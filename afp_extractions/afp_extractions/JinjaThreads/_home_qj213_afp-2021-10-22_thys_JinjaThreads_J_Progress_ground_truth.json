{"file_name": "/home/qj213/afp-2021-10-22/thys/JinjaThreads/J/Progress.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/JinjaThreads", "problem_names": ["lemma final_addrE [consumes 3, case_names addr Throw]:\n  \"\\<lbrakk> P,E,h \\<turnstile> e : T; class_type_of' T = \\<lfloor>U\\<rfloor>; final e;\n    \\<And>a. e = addr a \\<Longrightarrow> R;\n    \\<And>a. e = Throw a \\<Longrightarrow> R \\<rbrakk> \\<Longrightarrow> R\"", "lemma finalRefE [consumes 3, case_names null Class Array Throw]:\n \"\\<lbrakk> P,E,h \\<turnstile> e : T; is_refT T; final e;\n   e = null \\<Longrightarrow> R;\n   \\<And>a C. \\<lbrakk> e = addr a; T = Class C \\<rbrakk> \\<Longrightarrow> R;\n   \\<And>a U. \\<lbrakk> e = addr a; T = U\\<lfloor>\\<rceil> \\<rbrakk> \\<Longrightarrow> R;\n   \\<And>a. e = Throw a \\<Longrightarrow> R \\<rbrakk> \\<Longrightarrow> R\"", "theorem (in J_progress) red_progress:\n  assumes wf: \"wwf_J_prog P\" and hconf: \"hconf h\"\n  shows progress: \"\\<lbrakk> P,E,h \\<turnstile> e : T; \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e \\<rbrakk> \\<Longrightarrow> \\<exists>e' s' ta. extTA,P,t \\<turnstile> \\<langle>e,(h,l)\\<rangle> -ta\\<rightarrow> \\<langle>e',s'\\<rangle>\"\n  and progresss: \"\\<lbrakk> P,E,h \\<turnstile> es [:] Ts; \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es \\<rbrakk> \\<Longrightarrow> \\<exists>es' s' ta. extTA,P,t \\<turnstile> \\<langle>es,(h,l)\\<rangle> [-ta\\<rightarrow>] \\<langle>es',s'\\<rangle>\""], "translations": [["", "lemma final_addrE [consumes 3, case_names addr Throw]:\n  \"\\<lbrakk> P,E,h \\<turnstile> e : T; class_type_of' T = \\<lfloor>U\\<rfloor>; final e;\n    \\<And>a. e = addr a \\<Longrightarrow> R;\n    \\<And>a. e = Throw a \\<Longrightarrow> R \\<rbrakk> \\<Longrightarrow> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P,E,h \\<turnstile> e : T;\n     class_type_of' T = \\<lfloor>U\\<rfloor>; final e;\n     \\<And>a. e = addr a \\<Longrightarrow> R;\n     \\<And>a. e = Throw a \\<Longrightarrow> R\\<rbrakk>\n    \\<Longrightarrow> R", "apply(auto elim!: final.cases)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>v.\n       \\<lbrakk>class_type_of' T = \\<lfloor>U\\<rfloor>;\n        \\<And>a. v = Addr a \\<Longrightarrow> R; e = Val v;\n        typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> R", "apply(case_tac v)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>v.\n       \\<lbrakk>class_type_of' T = \\<lfloor>U\\<rfloor>;\n        \\<And>a. v = Addr a \\<Longrightarrow> R; e = Val v;\n        typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>; v = Unit\\<rbrakk>\n       \\<Longrightarrow> R\n 2. \\<And>v.\n       \\<lbrakk>class_type_of' T = \\<lfloor>U\\<rfloor>;\n        \\<And>a. v = Addr a \\<Longrightarrow> R; e = Val v;\n        typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>; v = Null\\<rbrakk>\n       \\<Longrightarrow> R\n 3. \\<And>v x3.\n       \\<lbrakk>class_type_of' T = \\<lfloor>U\\<rfloor>;\n        \\<And>a. v = Addr a \\<Longrightarrow> R; e = Val v;\n        typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        v = Bool x3\\<rbrakk>\n       \\<Longrightarrow> R\n 4. \\<And>v x4.\n       \\<lbrakk>class_type_of' T = \\<lfloor>U\\<rfloor>;\n        \\<And>a. v = Addr a \\<Longrightarrow> R; e = Val v;\n        typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        v = Intg x4\\<rbrakk>\n       \\<Longrightarrow> R\n 5. \\<And>v x5.\n       \\<lbrakk>class_type_of' T = \\<lfloor>U\\<rfloor>;\n        \\<And>a. v = Addr a \\<Longrightarrow> R; e = Val v;\n        typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        v = Addr x5\\<rbrakk>\n       \\<Longrightarrow> R", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma finalRefE [consumes 3, case_names null Class Array Throw]:\n \"\\<lbrakk> P,E,h \\<turnstile> e : T; is_refT T; final e;\n   e = null \\<Longrightarrow> R;\n   \\<And>a C. \\<lbrakk> e = addr a; T = Class C \\<rbrakk> \\<Longrightarrow> R;\n   \\<And>a U. \\<lbrakk> e = addr a; T = U\\<lfloor>\\<rceil> \\<rbrakk> \\<Longrightarrow> R;\n   \\<And>a. e = Throw a \\<Longrightarrow> R \\<rbrakk> \\<Longrightarrow> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P,E,h \\<turnstile> e : T; is_refT T; final e;\n     e = null \\<Longrightarrow> R;\n     \\<And>a C.\n        \\<lbrakk>e = addr a; T = Class C\\<rbrakk> \\<Longrightarrow> R;\n     \\<And>a U.\n        \\<lbrakk>e = addr a; T = U\\<lfloor>\\<rceil>\\<rbrakk>\n        \\<Longrightarrow> R;\n     \\<And>a. e = Throw a \\<Longrightarrow> R\\<rbrakk>\n    \\<Longrightarrow> R", "apply(auto simp:final_iff)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>v.\n       \\<lbrakk>is_refT T; v = Null \\<Longrightarrow> R;\n        \\<And>a C.\n           \\<lbrakk>v = Addr a; T = Class C\\<rbrakk> \\<Longrightarrow> R;\n        \\<And>a U.\n           \\<lbrakk>v = Addr a; T = U\\<lfloor>\\<rceil>\\<rbrakk>\n           \\<Longrightarrow> R;\n        e = Val v; typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> R", "apply(case_tac v)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>v.\n       \\<lbrakk>is_refT T; v = Null \\<Longrightarrow> R;\n        \\<And>a C.\n           \\<lbrakk>v = Addr a; T = Class C\\<rbrakk> \\<Longrightarrow> R;\n        \\<And>a U.\n           \\<lbrakk>v = Addr a; T = U\\<lfloor>\\<rceil>\\<rbrakk>\n           \\<Longrightarrow> R;\n        e = Val v; typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        v = Unit\\<rbrakk>\n       \\<Longrightarrow> R\n 2. \\<And>v.\n       \\<lbrakk>is_refT T; v = Null \\<Longrightarrow> R;\n        \\<And>a C.\n           \\<lbrakk>v = Addr a; T = Class C\\<rbrakk> \\<Longrightarrow> R;\n        \\<And>a U.\n           \\<lbrakk>v = Addr a; T = U\\<lfloor>\\<rceil>\\<rbrakk>\n           \\<Longrightarrow> R;\n        e = Val v; typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        v = Null\\<rbrakk>\n       \\<Longrightarrow> R\n 3. \\<And>v x3.\n       \\<lbrakk>is_refT T; v = Null \\<Longrightarrow> R;\n        \\<And>a C.\n           \\<lbrakk>v = Addr a; T = Class C\\<rbrakk> \\<Longrightarrow> R;\n        \\<And>a U.\n           \\<lbrakk>v = Addr a; T = U\\<lfloor>\\<rceil>\\<rbrakk>\n           \\<Longrightarrow> R;\n        e = Val v; typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        v = Bool x3\\<rbrakk>\n       \\<Longrightarrow> R\n 4. \\<And>v x4.\n       \\<lbrakk>is_refT T; v = Null \\<Longrightarrow> R;\n        \\<And>a C.\n           \\<lbrakk>v = Addr a; T = Class C\\<rbrakk> \\<Longrightarrow> R;\n        \\<And>a U.\n           \\<lbrakk>v = Addr a; T = U\\<lfloor>\\<rceil>\\<rbrakk>\n           \\<Longrightarrow> R;\n        e = Val v; typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        v = Intg x4\\<rbrakk>\n       \\<Longrightarrow> R\n 5. \\<And>v x5.\n       \\<lbrakk>is_refT T; v = Null \\<Longrightarrow> R;\n        \\<And>a C.\n           \\<lbrakk>v = Addr a; T = Class C\\<rbrakk> \\<Longrightarrow> R;\n        \\<And>a U.\n           \\<lbrakk>v = Addr a; T = U\\<lfloor>\\<rceil>\\<rbrakk>\n           \\<Longrightarrow> R;\n        e = Val v; typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        v = Addr x5\\<rbrakk>\n       \\<Longrightarrow> R", "apply(auto elim!: is_refT.cases)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "end"], ["", "theorem (in J_progress) red_progress:\n  assumes wf: \"wwf_J_prog P\" and hconf: \"hconf h\"\n  shows progress: \"\\<lbrakk> P,E,h \\<turnstile> e : T; \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e \\<rbrakk> \\<Longrightarrow> \\<exists>e' s' ta. extTA,P,t \\<turnstile> \\<langle>e,(h,l)\\<rangle> -ta\\<rightarrow> \\<langle>e',s'\\<rangle>\"\n  and progresss: \"\\<lbrakk> P,E,h \\<turnstile> es [:] Ts; \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es \\<rbrakk> \\<Longrightarrow> \\<exists>es' s' ta. extTA,P,t \\<turnstile> \\<langle>es,(h,l)\\<rangle> [-ta\\<rightarrow>] \\<langle>es',s'\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lbrakk>P,E,h \\<turnstile> e : T; \\<D> e \\<lfloor>dom l\\<rfloor>;\n      \\<not> final e\\<rbrakk>\n     \\<Longrightarrow> \\<exists>e' s' ta.\n                          extTA,P,t \\<turnstile> \\<langle>e,\n            (h, l)\\<rangle> -ta\\<rightarrow>\n           \\<langle>e',s'\\<rangle>) &&&\n    (\\<lbrakk>P,E,h \\<turnstile> es [:] Ts;\n      \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n     \\<Longrightarrow> \\<exists>es' s' ta.\n                          extTA,P,t \\<turnstile> \\<langle>es,\n            (h, l)\\<rangle> [-ta\\<rightarrow>]\n           \\<langle>es',s'\\<rangle>)", "proof (induct arbitrary: l and l rule:WTrt_WTrts.inducts)"], ["proof (state)\ngoal (32 subgoals):\n 1. \\<And>C E l.\n       \\<lbrakk>is_class P C; \\<D> (new C) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (new C)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>new C,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P (T\\<lfloor>\\<rceil>);\n        \\<D> (newA T\\<lfloor>e\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (newA T\\<lfloor>e\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (Cast U e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast U e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Cast U e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e instanceof U)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Val v,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a i T l.\n        \\<lbrakk>P,E,h \\<turnstile> a : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> i : Integer;\n         \\<And>l.\n            \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>i,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 32 subgoals...", "case (WTrtNew C)"], ["proof (state)\nthis:\n  is_class P C\n  \\<D> (new C) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (new C)\n\ngoal (32 subgoals):\n 1. \\<And>C E l.\n       \\<lbrakk>is_class P C; \\<D> (new C) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (new C)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>new C,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P (T\\<lfloor>\\<rceil>);\n        \\<D> (newA T\\<lfloor>e\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (newA T\\<lfloor>e\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (Cast U e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast U e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Cast U e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e instanceof U)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Val v,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a i T l.\n        \\<lbrakk>P,E,h \\<turnstile> a : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> i : Integer;\n         \\<And>l.\n            \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>i,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 32 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  is_class P C\n  \\<D> (new C) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (new C)\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>new C,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "using WTrtNew"], ["proof (prove)\nusing this:\n  is_class P C\n  \\<D> (new C) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (new C)\n  is_class P C\n  \\<D> (new C) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (new C)\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>new C,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(cases \"allocate h (Class_type C) = {}\")(fastforce intro: RedNewFail RedNew)+"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>new C,(h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (31 subgoals):\n 1. \\<And>E e T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P (T\\<lfloor>\\<rceil>);\n        \\<D> (newA T\\<lfloor>e\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (newA T\\<lfloor>e\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (Cast U e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast U e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Cast U e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e instanceof U)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Val v,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a T i e T' l.\n        \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n         \\<And>l.\n            \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> i : Integer;\n         \\<And>l.\n            \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>i,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 31 subgoals...", "next"], ["proof (state)\ngoal (31 subgoals):\n 1. \\<And>E e T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P (T\\<lfloor>\\<rceil>);\n        \\<D> (newA T\\<lfloor>e\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (newA T\\<lfloor>e\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (Cast U e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast U e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Cast U e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e instanceof U)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Val v,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a T i e T' l.\n        \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n         \\<And>l.\n            \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> i : Integer;\n         \\<And>l.\n            \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>i,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 31 subgoals...", "case (WTrtNewArray E e T l)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : Integer\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  is_type P (T\\<lfloor>\\<rceil>)\n  \\<D> (newA T\\<lfloor>e\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (newA T\\<lfloor>e\\<rceil>)\n\ngoal (31 subgoals):\n 1. \\<And>E e T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P (T\\<lfloor>\\<rceil>);\n        \\<D> (newA T\\<lfloor>e\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (newA T\\<lfloor>e\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (Cast U e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast U e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Cast U e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e instanceof U)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Val v,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a T i e T' l.\n        \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n         \\<And>l.\n            \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> i : Integer;\n         \\<And>l.\n            \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>i,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 31 subgoals...", "have IH: \"\\<And>l. \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk> \\<Longrightarrow> \\<exists>e' s' tas. extTA,P,t \\<turnstile> \\<langle>e,(h,l)\\<rangle> -tas\\<rightarrow> \\<langle>e', s'\\<rangle>\"\n   and D: \"\\<D> (newA T\\<lfloor>e\\<rceil>) \\<lfloor>dom l\\<rfloor>\"\n   and ei: \"P,E,h \\<turnstile> e : Integer\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>l.\n        \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' tas.\n                             extTA,P,t \\<turnstile> \\<langle>e,\n               (h, l)\\<rangle> -tas\\<rightarrow>\n              \\<langle>e',s'\\<rangle>) &&&\n    \\<D> (newA T\\<lfloor>e\\<rceil>) \\<lfloor>dom l\\<rfloor> &&&\n    P,E,h \\<turnstile> e : Integer", "by fact+"], ["proof (state)\nthis:\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (newA T\\<lfloor>e\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  P,E,h \\<turnstile> e : Integer\n\ngoal (31 subgoals):\n 1. \\<And>E e T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P (T\\<lfloor>\\<rceil>);\n        \\<D> (newA T\\<lfloor>e\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (newA T\\<lfloor>e\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (Cast U e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast U e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Cast U e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e instanceof U)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Val v,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a T i e T' l.\n        \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n         \\<And>l.\n            \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> i : Integer;\n         \\<And>l.\n            \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>i,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 31 subgoals...", "from D"], ["proof (chain)\npicking this:\n  \\<D> (newA T\\<lfloor>e\\<rceil>) \\<lfloor>dom l\\<rfloor>", "have De: \"\\<D> e \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\nusing this:\n  \\<D> (newA T\\<lfloor>e\\<rceil>) \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> e \\<lfloor>dom l\\<rfloor>", "by auto"], ["proof (state)\nthis:\n  \\<D> e \\<lfloor>dom l\\<rfloor>\n\ngoal (31 subgoals):\n 1. \\<And>E e T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P (T\\<lfloor>\\<rceil>);\n        \\<D> (newA T\\<lfloor>e\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (newA T\\<lfloor>e\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (Cast U e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast U e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Cast U e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e instanceof U)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Val v,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a T i e T' l.\n        \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n         \\<And>l.\n            \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> i : Integer;\n         \\<And>l.\n            \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>i,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 31 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume e [simp]: \"e = Val v\""], ["proof (state)\nthis:\n  e = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with ei"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : Integer\n  e = Val v", "have \"typeof\\<^bsub>h\\<^esub> v = Some Integer\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : Integer\n  e = Val v\n\ngoal (1 subgoal):\n 1. typeof\\<^bsub>h\\<^esub> v = \\<lfloor>Integer\\<rfloor>", "by fastforce"], ["proof (state)\nthis:\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>Integer\\<rfloor>\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "hence exei: \"\\<exists>i. v = Intg i\""], ["proof (prove)\nusing this:\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>Integer\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<exists>i. v = Intg i", "by fastforce"], ["proof (state)\nthis:\n  \\<exists>i. v = Intg i\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  \\<exists>i. v = Intg i", "obtain i where v: \"v = Intg i\""], ["proof (prove)\nusing this:\n  \\<exists>i. v = Intg i\n\ngoal (1 subgoal):\n 1. (\\<And>i. v = Intg i \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by blast"], ["proof (state)\nthis:\n  v = Intg i\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  v = Intg i\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (cases \"0 <=s i\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>v = Intg i; 0 \\<le>s i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>v = Intg i; \\<not> 0 \\<le>s i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "case True"], ["proof (state)\nthis:\n  0 \\<le>s i\n\ngoal (2 subgoals):\n 1. \\<lbrakk>v = Intg i; 0 \\<le>s i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>v = Intg i; \\<not> 0 \\<le>s i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  0 \\<le>s i\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "using True \\<open>v = Intg i\\<close> WTrtNewArray.prems"], ["proof (prove)\nusing this:\n  0 \\<le>s i\n  0 \\<le>s i\n  v = Intg i\n  \\<D> (newA T\\<lfloor>e\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (newA T\\<lfloor>e\\<rceil>)\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(cases \"allocate h (Array_type T (nat (sint i))) = {}\")(auto simp del: split_paired_Ex intro: RedNewArrayFail RedNewArray)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>v = Intg i; \\<not> 0 \\<le>s i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>v = Intg i; \\<not> 0 \\<le>s i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "assume \"\\<not> 0 <=s i\""], ["proof (state)\nthis:\n  \\<not> 0 \\<le>s i\n\ngoal (1 subgoal):\n 1. \\<lbrakk>v = Intg i; \\<not> 0 \\<le>s i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "hence \"i <s 0\""], ["proof (prove)\nusing this:\n  \\<not> 0 \\<le>s i\n\ngoal (1 subgoal):\n 1. i <s 0", "by simp"], ["proof (state)\nthis:\n  i <s 0\n\ngoal (1 subgoal):\n 1. \\<lbrakk>v = Intg i; \\<not> 0 \\<le>s i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  i <s 0", "have \"extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>Val(Intg i)\\<rceil>,(h, l)\\<rangle> -\\<epsilon>\\<rightarrow> \\<langle>THROW NegativeArraySize,(h, l)\\<rangle>\""], ["proof (prove)\nusing this:\n  i <s 0\n\ngoal (1 subgoal):\n 1. extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>Val (Intg i)\\<rceil>,\n                            (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                           \\<langle>Throw\n                                     (addr_of_sys_xcpt NegativeArraySize),\n                            (h, l)\\<rangle>", "by - (rule RedNewArrayNegative, auto)"], ["proof (state)\nthis:\n  extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>Val (Intg i)\\<rceil>,\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Throw\n                                   (addr_of_sys_xcpt NegativeArraySize),\n                          (h, l)\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>v = Intg i; \\<not> 0 \\<le>s i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "with e v"], ["proof (chain)\npicking this:\n  e = Val v\n  v = Intg i\n  extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>Val (Intg i)\\<rceil>,\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Throw\n                                   (addr_of_sys_xcpt NegativeArraySize),\n                          (h, l)\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  e = Val v\n  v = Intg i\n  extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>Val (Intg i)\\<rceil>,\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Throw\n                                   (addr_of_sys_xcpt NegativeArraySize),\n                          (h, l)\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by blast"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix exa"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume e: \"e = Throw exa\""], ["proof (state)\nthis:\n  e = Throw exa\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  e = Throw exa", "have \"extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>Throw exa\\<rceil>,(h, l)\\<rangle> -\\<epsilon>\\<rightarrow> \\<langle>Throw exa,(h, l)\\<rangle>\""], ["proof (prove)\nusing this:\n  e = Throw exa\n\ngoal (1 subgoal):\n 1. extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>Throw exa\\<rceil>,\n                            (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                           \\<langle>Throw exa,(h, l)\\<rangle>", "by - (rule NewArrayThrow)"], ["proof (state)\nthis:\n  extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>Throw exa\\<rceil>,\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Throw exa,(h, l)\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with e"], ["proof (chain)\npicking this:\n  e = Throw exa\n  extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>Throw exa\\<rceil>,\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Throw exa,(h, l)\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  e = Throw exa\n  extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>Throw exa\\<rceil>,\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Throw exa,(h, l)\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by blast"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with IH De"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> e \\<lfloor>dom l\\<rfloor>\n  \\<not> final e", "have exes: \"\\<exists>e' s' ta. extTA,P,t \\<turnstile> \\<langle>e,(h, l)\\<rangle> -ta\\<rightarrow> \\<langle>e',s'\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> e \\<lfloor>dom l\\<rfloor>\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e,(h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by simp"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e,(h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e,(h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>", "obtain e' s' ta where \"extTA,P,t \\<turnstile> \\<langle>e,(h, l)\\<rangle> -ta\\<rightarrow> \\<langle>e',s'\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e,(h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>ta e' s'.\n        extTA,P,t \\<turnstile> \\<langle>e,(h, l)\\<rangle> -ta\\<rightarrow>\n                               \\<langle>e',s'\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  extTA,P,t \\<turnstile> \\<langle>e,(h, l)\\<rangle> -ta\\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "hence \"extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,(h, l)\\<rangle> -ta\\<rightarrow> \\<langle>newA T\\<lfloor>e'\\<rceil>,s'\\<rangle>\""], ["proof (prove)\nusing this:\n  extTA,P,t \\<turnstile> \\<langle>e,(h, l)\\<rangle> -ta\\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                            (h, l)\\<rangle> -ta\\<rightarrow>\n                           \\<langle>newA T\\<lfloor>e'\\<rceil>,s'\\<rangle>", "by - (rule NewArrayRed)"], ["proof (state)\nthis:\n  extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                          (h, l)\\<rangle> -ta\\<rightarrow>\n                         \\<langle>newA T\\<lfloor>e'\\<rceil>,s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                          (h, l)\\<rangle> -ta\\<rightarrow>\n                         \\<langle>newA T\\<lfloor>e'\\<rceil>,s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by blast"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>newA T\\<lfloor>e\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (30 subgoals):\n 1. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (Cast U e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast U e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Cast U e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e instanceof U)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Val v,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a i e T' l.\n        \\<lbrakk>P,E,h \\<turnstile> a : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> i : Integer;\n         \\<And>l.\n            \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>i,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 30 subgoals...", "next"], ["proof (state)\ngoal (30 subgoals):\n 1. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (Cast U e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast U e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Cast U e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e instanceof U)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Val v,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a i e T' l.\n        \\<lbrakk>P,E,h \\<turnstile> a : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> i : Integer;\n         \\<And>l.\n            \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>i,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 30 subgoals...", "case (WTrtCast E e T U l)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : T\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  is_type P U\n  \\<D> (Cast U e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Cast U e)\n\ngoal (30 subgoals):\n 1. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (Cast U e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast U e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Cast U e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e instanceof U)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Val v,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a i e T' l.\n        \\<lbrakk>P,E,h \\<turnstile> a : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> i : Integer;\n         \\<And>l.\n            \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>i,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 30 subgoals...", "have wte: \"P,E,h \\<turnstile> e : T\"\n   and IH: \"\\<And>l. \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n                \\<Longrightarrow> \\<exists>e' s' tas. extTA,P,t \\<turnstile> \\<langle>e,(h,l)\\<rangle> -tas\\<rightarrow> \\<langle>e',s'\\<rangle>\"\n   and D: \"\\<D> (Cast U e) \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h \\<turnstile> e : T &&&\n    (\\<And>l.\n        \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' tas.\n                             extTA,P,t \\<turnstile> \\<langle>e,\n               (h, l)\\<rangle> -tas\\<rightarrow>\n              \\<langle>e',s'\\<rangle>) &&&\n    \\<D> (Cast U e) \\<lfloor>dom l\\<rfloor>", "by fact+"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : T\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (Cast U e) \\<lfloor>dom l\\<rfloor>\n\ngoal (30 subgoals):\n 1. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (Cast U e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast U e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Cast U e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e instanceof U)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Val v,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a i e T' l.\n        \\<lbrakk>P,E,h \\<turnstile> a : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> i : Integer;\n         \\<And>l.\n            \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>i,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 30 subgoals...", "from D"], ["proof (chain)\npicking this:\n  \\<D> (Cast U e) \\<lfloor>dom l\\<rfloor>", "have De: \"\\<D> e \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\nusing this:\n  \\<D> (Cast U e) \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> e \\<lfloor>dom l\\<rfloor>", "by auto"], ["proof (state)\nthis:\n  \\<D> e \\<lfloor>dom l\\<rfloor>\n\ngoal (30 subgoals):\n 1. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (Cast U e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast U e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Cast U e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e instanceof U)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Val v,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a i e T' l.\n        \\<lbrakk>P,E,h \\<turnstile> a : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> i : Integer;\n         \\<And>l.\n            \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>i,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 30 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (cases \"final e\")"], ["proof (state)\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume ev: \"e = Val v\""], ["proof (state)\nthis:\n  e = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with WTrtCast"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : T\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  is_type P U\n  \\<D> (Cast U e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Cast U e)\n  e = Val v", "obtain V where thvU: \"typeof\\<^bsub>h\\<^esub> v = \\<lfloor>V\\<rfloor>\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : T\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  is_type P U\n  \\<D> (Cast U e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Cast U e)\n  e = Val v\n\ngoal (1 subgoal):\n 1. (\\<And>V.\n        typeof\\<^bsub>h\\<^esub> v = \\<lfloor>V\\<rfloor> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>V\\<rfloor>\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>V\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (cases \"P \\<turnstile> V \\<le> U\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>V\\<rfloor>;\n     P \\<turnstile> V \\<le> U\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>Cast U e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>V\\<rfloor>;\n     \\<not> P \\<turnstile> V \\<le> U\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>Cast U e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "assume \"P \\<turnstile> V \\<le> U\""], ["proof (state)\nthis:\n  P \\<turnstile> V \\<le> U\n\ngoal (2 subgoals):\n 1. \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>V\\<rfloor>;\n     P \\<turnstile> V \\<le> U\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>Cast U e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>V\\<rfloor>;\n     \\<not> P \\<turnstile> V \\<le> U\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>Cast U e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "with thvU"], ["proof (chain)\npicking this:\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>V\\<rfloor>\n  P \\<turnstile> V \\<le> U", "have \"extTA,P,t \\<turnstile> \\<langle>Cast U (Val v),(h, l)\\<rangle> -\\<epsilon>\\<rightarrow> \\<langle>Val v,(h,l)\\<rangle>\""], ["proof (prove)\nusing this:\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>V\\<rfloor>\n  P \\<turnstile> V \\<le> U\n\ngoal (1 subgoal):\n 1. extTA,P,t \\<turnstile> \\<langle>Cast U (Val v),\n                            (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                           \\<langle>Val v,(h, l)\\<rangle>", "by - (rule RedCast, auto)"], ["proof (state)\nthis:\n  extTA,P,t \\<turnstile> \\<langle>Cast U (Val v),\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Val v,(h, l)\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>V\\<rfloor>;\n     P \\<turnstile> V \\<le> U\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>Cast U e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>V\\<rfloor>;\n     \\<not> P \\<turnstile> V \\<le> U\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>Cast U e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "with ev"], ["proof (chain)\npicking this:\n  e = Val v\n  extTA,P,t \\<turnstile> \\<langle>Cast U (Val v),\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Val v,(h, l)\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  e = Val v\n  extTA,P,t \\<turnstile> \\<langle>Cast U (Val v),\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Val v,(h, l)\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by blast"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>V\\<rfloor>;\n     \\<not> P \\<turnstile> V \\<le> U\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>Cast U e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>V\\<rfloor>;\n     \\<not> P \\<turnstile> V \\<le> U\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>Cast U e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "assume \"\\<not> P \\<turnstile> V \\<le> U\""], ["proof (state)\nthis:\n  \\<not> P \\<turnstile> V \\<le> U\n\ngoal (1 subgoal):\n 1. \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>V\\<rfloor>;\n     \\<not> P \\<turnstile> V \\<le> U\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>Cast U e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "with thvU"], ["proof (chain)\npicking this:\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>V\\<rfloor>\n  \\<not> P \\<turnstile> V \\<le> U", "have \"extTA,P,t \\<turnstile> \\<langle>Cast U (Val v),(h, l)\\<rangle> -\\<epsilon>\\<rightarrow> \\<langle>THROW ClassCast,(h,l)\\<rangle>\""], ["proof (prove)\nusing this:\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>V\\<rfloor>\n  \\<not> P \\<turnstile> V \\<le> U\n\ngoal (1 subgoal):\n 1. extTA,P,t \\<turnstile> \\<langle>Cast U (Val v),\n                            (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                           \\<langle>Throw (addr_of_sys_xcpt ClassCast),\n                            (h, l)\\<rangle>", "by - (rule RedCastFail, auto)"], ["proof (state)\nthis:\n  extTA,P,t \\<turnstile> \\<langle>Cast U (Val v),\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Throw (addr_of_sys_xcpt ClassCast),\n                          (h, l)\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>V\\<rfloor>;\n     \\<not> P \\<turnstile> V \\<le> U\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>Cast U e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "with ev"], ["proof (chain)\npicking this:\n  e = Val v\n  extTA,P,t \\<turnstile> \\<langle>Cast U (Val v),\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Throw (addr_of_sys_xcpt ClassCast),\n                          (h, l)\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  e = Val v\n  extTA,P,t \\<turnstile> \\<langle>Cast U (Val v),\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Throw (addr_of_sys_xcpt ClassCast),\n                          (h, l)\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by blast"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"e = Throw a\""], ["proof (state)\nthis:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(blast intro!:CastThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume nf: \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "from IH[OF De nf]"], ["proof (chain)\npicking this:\n  \\<exists>e' s' tas.\n     extTA,P,t \\<turnstile> \\<langle>e,(h, l)\\<rangle> -tas\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>e' s' tas.\n     extTA,P,t \\<turnstile> \\<langle>e,(h, l)\\<rangle> -tas\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (blast intro:CastRed)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>Cast U e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (29 subgoals):\n 1. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e instanceof U)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Val v,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a T l.\n        \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n         \\<And>l.\n            \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (a\\<bullet>length)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 29 subgoals...", "next"], ["proof (state)\ngoal (29 subgoals):\n 1. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e instanceof U)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Val v,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a T l.\n        \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n         \\<And>l.\n            \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (a\\<bullet>length)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 29 subgoals...", "case (WTrtInstanceOf E e T U l)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : T\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  is_type P U\n  \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e instanceof U)\n\ngoal (29 subgoals):\n 1. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e instanceof U)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Val v,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a T l.\n        \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n         \\<And>l.\n            \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (a\\<bullet>length)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 29 subgoals...", "have wte: \"P,E,h \\<turnstile> e : T\"\n   and IH: \"\\<And>l. \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n                \\<Longrightarrow> \\<exists>e' s' tas. extTA,P,t \\<turnstile> \\<langle>e,(h,l)\\<rangle> -tas\\<rightarrow> \\<langle>e',s'\\<rangle>\"\n   and D: \"\\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h \\<turnstile> e : T &&&\n    (\\<And>l.\n        \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' tas.\n                             extTA,P,t \\<turnstile> \\<langle>e,\n               (h, l)\\<rangle> -tas\\<rightarrow>\n              \\<langle>e',s'\\<rangle>) &&&\n    \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>", "by fact+"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : T\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>\n\ngoal (29 subgoals):\n 1. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e instanceof U)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Val v,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a T l.\n        \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n         \\<And>l.\n            \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (a\\<bullet>length)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 29 subgoals...", "from D"], ["proof (chain)\npicking this:\n  \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>", "have De: \"\\<D> e \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\nusing this:\n  \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> e \\<lfloor>dom l\\<rfloor>", "by auto"], ["proof (state)\nthis:\n  \\<D> e \\<lfloor>dom l\\<rfloor>\n\ngoal (29 subgoals):\n 1. \\<And>E e T U l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_type P U; \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e instanceof U)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Val v,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a T l.\n        \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n         \\<And>l.\n            \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (a\\<bullet>length)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 29 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (cases \"final e\")"], ["proof (state)\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume ev: \"e = Val v\""], ["proof (state)\nthis:\n  e = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with WTrtInstanceOf"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : T\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  is_type P U\n  \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e instanceof U)\n  e = Val v", "obtain V where thvU: \"typeof\\<^bsub>h\\<^esub> v = \\<lfloor>V\\<rfloor>\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : T\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  is_type P U\n  \\<D> (e instanceof U) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e instanceof U)\n  e = Val v\n\ngoal (1 subgoal):\n 1. (\\<And>V.\n        typeof\\<^bsub>h\\<^esub> v = \\<lfloor>V\\<rfloor> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>V\\<rfloor>\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "hence \"extTA,P,t \\<turnstile> \\<langle>(Val v) instanceof U,(h, l)\\<rangle> -\\<epsilon>\\<rightarrow> \\<langle>Val (Bool (v \\<noteq> Null \\<and> P \\<turnstile> V \\<le> U)),(h,l)\\<rangle>\""], ["proof (prove)\nusing this:\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>V\\<rfloor>\n\ngoal (1 subgoal):\n 1. extTA,P,t \\<turnstile> \\<langle>Val v instanceof U,\n                            (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                           \\<langle>Val (Bool\n    (v \\<noteq> Null \\<and> P \\<turnstile> V \\<le> U)),\n                            (h, l)\\<rangle>", "by -(rule RedInstanceOf, auto)"], ["proof (state)\nthis:\n  extTA,P,t \\<turnstile> \\<langle>Val v instanceof U,\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Val (Bool\n  (v \\<noteq> Null \\<and> P \\<turnstile> V \\<le> U)),\n                          (h, l)\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with ev"], ["proof (chain)\npicking this:\n  e = Val v\n  extTA,P,t \\<turnstile> \\<langle>Val v instanceof U,\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Val (Bool\n  (v \\<noteq> Null \\<and> P \\<turnstile> V \\<le> U)),\n                          (h, l)\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  e = Val v\n  extTA,P,t \\<turnstile> \\<langle>Val v instanceof U,\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Val (Bool\n  (v \\<noteq> Null \\<and> P \\<turnstile> V \\<le> U)),\n                          (h, l)\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by blast"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"e = Throw a\""], ["proof (state)\nthis:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(blast intro!:InstanceOfThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume nf: \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "from IH[OF De nf]"], ["proof (chain)\npicking this:\n  \\<exists>e' s' tas.\n     extTA,P,t \\<turnstile> \\<langle>e,(h, l)\\<rangle> -tas\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>e' s' tas.\n     extTA,P,t \\<turnstile> \\<langle>e,(h, l)\\<rangle> -tas\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (blast intro:InstanceOfRed)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e instanceof U,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (28 subgoals):\n 1. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Val v,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a T l.\n        \\<lbrakk>P,E,h \\<turnstile> a : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (a\\<bullet>length)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 28 subgoals...", "next"], ["proof (state)\ngoal (28 subgoals):\n 1. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Val v,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a T l.\n        \\<lbrakk>P,E,h \\<turnstile> a : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (a\\<bullet>length)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 28 subgoals...", "case WTrtVal"], ["proof (state)\nthis:\n  typeof\\<^bsub>h\\<^esub> v_ = \\<lfloor>T_\\<rfloor>\n  \\<D> (Val v_) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Val v_)\n\ngoal (28 subgoals):\n 1. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Val v,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a T l.\n        \\<lbrakk>P,E,h \\<turnstile> a : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (a\\<bullet>length)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 28 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  typeof\\<^bsub>h\\<^esub> v_ = \\<lfloor>T_\\<rfloor>\n  \\<D> (Val v_) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Val v_)\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>Val v_,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(simp add:final_iff)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>Val v_,(h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (27 subgoals):\n 1. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e U C F T fm D l.\n        \\<lbrakk>P,E,h \\<turnstile> e : U;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         class_type_of' U = \\<lfloor>C\\<rfloor>;\n         P \\<turnstile> C has F:T (fm) in D;\n         \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 27 subgoals...", "next"], ["proof (state)\ngoal (27 subgoals):\n 1. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e U C F T fm D l.\n        \\<lbrakk>P,E,h \\<turnstile> e : U;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         class_type_of' U = \\<lfloor>C\\<rfloor>;\n         P \\<turnstile> C has F:T (fm) in D;\n         \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 27 subgoals...", "case WTrtVar"], ["proof (state)\nthis:\n  E_ V_ = \\<lfloor>T_\\<rfloor>\n  \\<D> (Var V_) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Var V_)\n\ngoal (27 subgoals):\n 1. \\<And>E V T l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var V)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>Var V,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e U C F T fm D l.\n        \\<lbrakk>P,E,h \\<turnstile> e : U;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         class_type_of' U = \\<lfloor>C\\<rfloor>;\n         P \\<turnstile> C has F:T (fm) in D;\n         \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 27 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  E_ V_ = \\<lfloor>T_\\<rfloor>\n  \\<D> (Var V_) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Var V_)\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>Var V_,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro:RedVar simp:hyper_isin_def)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>Var V_,(h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (26 subgoals):\n 1. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e F D T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 26 subgoals...", "next"], ["proof (state)\ngoal (26 subgoals):\n 1. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e F D T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 26 subgoals...", "case (WTrtBinOp E e1 T1 e2 T2 bop T)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T\n  \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n\ngoal (26 subgoals):\n 1. \\<And>E e1 T1 e2 T2 bop T l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T;\n        \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e F D T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 26 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"final e1\""], ["proof (state)\nthis:\n  final e1\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e1 = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix v1"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e1 = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume [simp]: \"e1 = Val v1\""], ["proof (state)\nthis:\n  e1 = Val v1\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e1 = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"final e2\""], ["proof (state)\nthis:\n  final e2\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix v2"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume [simp]: \"e2 = Val v2\""], ["proof (state)\nthis:\n  e2 = Val v2\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with WTrtBinOp"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T\n  \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n  e2 = Val v2", "have type: \"typeof\\<^bsub>h\\<^esub> v1 = \\<lfloor>T1\\<rfloor>\" \"typeof\\<^bsub>h\\<^esub> v2 = \\<lfloor>T2\\<rfloor>\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T\n  \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n  e2 = Val v2\n\ngoal (1 subgoal):\n 1. typeof\\<^bsub>h\\<^esub> v1 = \\<lfloor>T1\\<rfloor> &&&\n    typeof\\<^bsub>h\\<^esub> v2 = \\<lfloor>T2\\<rfloor>", "by auto"], ["proof (state)\nthis:\n  typeof\\<^bsub>h\\<^esub> v1 = \\<lfloor>T1\\<rfloor>\n  typeof\\<^bsub>h\\<^esub> v2 = \\<lfloor>T2\\<rfloor>\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "from binop_progress[OF this \\<open>P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T\\<close>]"], ["proof (chain)\npicking this:\n  \\<exists>va. binop bop v1 v2 = \\<lfloor>va\\<rfloor>", "obtain va\n            where \"binop bop v1 v2 = \\<lfloor>va\\<rfloor>\""], ["proof (prove)\nusing this:\n  \\<exists>va. binop bop v1 v2 = \\<lfloor>va\\<rfloor>\n\ngoal (1 subgoal):\n 1. (\\<And>va.\n        binop bop v1 v2 = \\<lfloor>va\\<rfloor> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  binop bop v1 v2 = \\<lfloor>va\\<rfloor>\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  binop bop v1 v2 = \\<lfloor>va\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(cases va)(fastforce intro: RedBinOp RedBinOpFail)+"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"e2 = Throw a\""], ["proof (state)\nthis:\n  e2 = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e2 = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro:BinOpThrow2)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e2\""], ["proof (state)\nthis:\n  \\<not> final e2\n\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtBinOp"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T\n  \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n  \\<not> final e2", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T\n  \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n  \\<not> final e2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by simp (fast intro!:BinOpRed2)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"e1 = Throw a\""], ["proof (state)\nthis:\n  e1 = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e1 = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by simp (fast intro:BinOpThrow1)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e1\""], ["proof (state)\nthis:\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtBinOp"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T\n  \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n  \\<not> final e1", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T1\\<guillemotleft>bop\\<guillemotright>T2 : T\n  \\<D> (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by simp (fast intro:BinOpRed1)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1 \\<guillemotleft>bop\\<guillemotright> e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (25 subgoals):\n 1. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 U C F T fm D e2 T2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         class_type_of' U = \\<lfloor>C\\<rfloor>;\n         P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T2 \\<le> T;\n         \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 25 subgoals...", "next"], ["proof (state)\ngoal (25 subgoals):\n 1. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 U C F T fm D e2 T2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         class_type_of' U = \\<lfloor>C\\<rfloor>;\n         P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T2 \\<le> T;\n         \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 25 subgoals...", "case (WTrtLAss E V T e T')"], ["proof (state)\nthis:\n  E V = \\<lfloor>T\\<rfloor>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (V:=e)\n\ngoal (25 subgoals):\n 1. \\<And>E V T e T' l.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>V:=e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 U C F T fm D e2 T2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         class_type_of' U = \\<lfloor>C\\<rfloor>;\n         P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T2 \\<le> T;\n         \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 25 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtLAss"], ["proof (chain)\npicking this:\n  E V = \\<lfloor>T\\<rfloor>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (V:=e)\n  final e", "show ?thesis"], ["proof (prove)\nusing this:\n  E V = \\<lfloor>T\\<rfloor>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (V:=e)\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce simp:final_iff intro!:RedLAss LAssThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtLAss"], ["proof (chain)\npicking this:\n  E V = \\<lfloor>T\\<rfloor>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (V:=e)\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  E V = \\<lfloor>T\\<rfloor>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (V:=e)\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by simp (fast intro:LAssRed)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (24 subgoals):\n 1. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 e2 T2 F D l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 24 subgoals...", "next"], ["proof (state)\ngoal (24 subgoals):\n 1. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 e2 T2 F D l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 24 subgoals...", "case (WTrtAAcc E a T i l)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil>)\n\ngoal (24 subgoals):\n 1. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 e2 T2 F D l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 24 subgoals...", "have wte: \"P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\"\n   and wtei: \"P,E,h \\<turnstile> i : Integer\"\n   and IHa: \"\\<And>l. \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n                 \\<Longrightarrow> \\<exists>e' s' tas. extTA,P,t \\<turnstile> \\<langle>a,(h,l)\\<rangle> -tas\\<rightarrow> \\<langle>e',s'\\<rangle>\"\n   and IHi: \"\\<And>l. \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n                 \\<Longrightarrow> \\<exists>e' s' tas. extTA,P,t \\<turnstile> \\<langle>i,(h,l)\\<rangle> -tas\\<rightarrow> \\<langle>e',s'\\<rangle>\"\n   and D: \"\\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil> &&&\n     P,E,h \\<turnstile> i : Integer) &&&\n    (\\<And>l.\n        \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' tas.\n                             extTA,P,t \\<turnstile> \\<langle>a,\n               (h, l)\\<rangle> -tas\\<rightarrow>\n              \\<langle>e',s'\\<rangle>) &&&\n    (\\<And>l.\n        \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' tas.\n                             extTA,P,t \\<turnstile> \\<langle>i,\n               (h, l)\\<rangle> -tas\\<rightarrow>\n              \\<langle>e',s'\\<rangle>) &&&\n    \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>", "by fact+"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n\ngoal (24 subgoals):\n 1. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 e2 T2 F D l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 24 subgoals...", "have ref: \"is_refT (T\\<lfloor>\\<rceil>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_refT (T\\<lfloor>\\<rceil>)", "by simp"], ["proof (state)\nthis:\n  is_refT (T\\<lfloor>\\<rceil>)\n\ngoal (24 subgoals):\n 1. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 e2 T2 F D l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 24 subgoals...", "from D"], ["proof (chain)\npicking this:\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>", "have Da: \"\\<D> a \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\nusing this:\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> a \\<lfloor>dom l\\<rfloor>", "by simp"], ["proof (state)\nthis:\n  \\<D> a \\<lfloor>dom l\\<rfloor>\n\ngoal (24 subgoals):\n 1. \\<And>E a T i l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 e2 T2 F D l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 24 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (cases \"final a\")"], ["proof (state)\ngoal (2 subgoals):\n 1. final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"final a\""], ["proof (state)\nthis:\n  final a\n\ngoal (2 subgoals):\n 1. final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with wte ref"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  is_refT (T\\<lfloor>\\<rceil>)\n  final a", "show ?case"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  is_refT (T\\<lfloor>\\<rceil>)\n  final a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (cases rule: finalRefE)"], ["proof (state)\ngoal (4 subgoals):\n 1. a = null \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa U.\n       \\<lbrakk>a = addr aa;\n        T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "case null"], ["proof (state)\nthis:\n  a = null\n\ngoal (4 subgoals):\n 1. a = null \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa U.\n       \\<lbrakk>a = addr aa;\n        T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  a = null\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (cases \"final i\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>a = null; final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>a = null; \\<not> final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "assume \"final i\""], ["proof (state)\nthis:\n  final i\n\ngoal (2 subgoals):\n 1. \\<lbrakk>a = null; final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>a = null; \\<not> final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final i\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume i: \"i = Val v\""], ["proof (state)\nthis:\n  i = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "have \"extTA,P,t \\<turnstile> \\<langle>null\\<lfloor>Val v\\<rceil>, (h, l)\\<rangle> -\\<epsilon>\\<rightarrow> \\<langle>THROW NullPointer, (h,l)\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extTA,P,t \\<turnstile> \\<langle>null\\<lfloor>Val v\\<rceil>,\n                            (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                           \\<langle>Throw (addr_of_sys_xcpt NullPointer),\n                            (h, l)\\<rangle>", "by(rule RedAAccNull)"], ["proof (state)\nthis:\n  extTA,P,t \\<turnstile> \\<langle>null\\<lfloor>Val v\\<rceil>,\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Throw (addr_of_sys_xcpt NullPointer),\n                          (h, l)\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with i null"], ["proof (chain)\npicking this:\n  i = Val v\n  a = null\n  extTA,P,t \\<turnstile> \\<langle>null\\<lfloor>Val v\\<rceil>,\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Throw (addr_of_sys_xcpt NullPointer),\n                          (h, l)\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  i = Val v\n  a = null\n  extTA,P,t \\<turnstile> \\<langle>null\\<lfloor>Val v\\<rceil>,\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Throw (addr_of_sys_xcpt NullPointer),\n                          (h, l)\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by blast"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix ex"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume i: \"i = Throw ex\""], ["proof (state)\nthis:\n  i = Throw ex\n\ngoal (1 subgoal):\n 1. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "have \"extTA,P,t \\<turnstile> \\<langle>null\\<lfloor>Throw ex\\<rceil>, (h, l)\\<rangle> -\\<epsilon>\\<rightarrow> \\<langle>Throw ex, (h,l)\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extTA,P,t \\<turnstile> \\<langle>null\\<lfloor>Throw ex\\<rceil>,\n                            (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                           \\<langle>Throw ex,(h, l)\\<rangle>", "by(rule AAccThrow2)"], ["proof (state)\nthis:\n  extTA,P,t \\<turnstile> \\<langle>null\\<lfloor>Throw ex\\<rceil>,\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Throw ex,(h, l)\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with i null"], ["proof (chain)\npicking this:\n  i = Throw ex\n  a = null\n  extTA,P,t \\<turnstile> \\<langle>null\\<lfloor>Throw ex\\<rceil>,\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Throw ex,(h, l)\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  i = Throw ex\n  a = null\n  extTA,P,t \\<turnstile> \\<langle>null\\<lfloor>Throw ex\\<rceil>,\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Throw ex,(h, l)\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by blast"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>a = null; \\<not> final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>a = null; \\<not> final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "assume \"\\<not> final i\""], ["proof (state)\nthis:\n  \\<not> final i\n\ngoal (1 subgoal):\n 1. \\<lbrakk>a = null; \\<not> final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "from WTrtAAcc null"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil>)\n  a = null", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil>)\n  a = null\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by simp"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa U.\n       \\<lbrakk>a = addr aa;\n        T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa U.\n       \\<lbrakk>a = addr aa;\n        T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "case (Array ad U)"], ["proof (state)\nthis:\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n\ngoal (3 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa U.\n       \\<lbrakk>a = addr aa;\n        T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with wte"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>", "obtain n where ty: \"typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        typeof_addr h ad =\n        \\<lfloor>Array_type U n\\<rfloor> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>\n\ngoal (3 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa U.\n       \\<lbrakk>a = addr aa;\n        T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (cases \"final i\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>;\n     final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>;\n     \\<not> final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "assume \"final i\""], ["proof (state)\nthis:\n  final i\n\ngoal (2 subgoals):\n 1. \\<lbrakk>typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>;\n     final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>;\n     \\<not> final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final i\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume [simp]: \"i = Val v\""], ["proof (state)\nthis:\n  i = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with wtei"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> i : Integer\n  i = Val v", "have \"typeof\\<^bsub>h\\<^esub> v = Some Integer\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> i : Integer\n  i = Val v\n\ngoal (1 subgoal):\n 1. typeof\\<^bsub>h\\<^esub> v = \\<lfloor>Integer\\<rfloor>", "by fastforce"], ["proof (state)\nthis:\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>Integer\\<rfloor>\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "hence \"\\<exists>i. v = Intg i\""], ["proof (prove)\nusing this:\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>Integer\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<exists>i. v = Intg i", "by fastforce"], ["proof (state)\nthis:\n  \\<exists>i. v = Intg i\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  \\<exists>i. v = Intg i", "obtain i where [simp]: \"v = Intg i\""], ["proof (prove)\nusing this:\n  \\<exists>i. v = Intg i\n\ngoal (1 subgoal):\n 1. (\\<And>i. v = Intg i \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by blast"], ["proof (state)\nthis:\n  v = Intg i\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       i__ = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i__\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i__ = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i__\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  v = Intg i\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i__\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (cases \"i <s 0 \\<or> sint i \\<ge> int n\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>v = Intg i; i <s 0 \\<or> int n \\<le> sint i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i__\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>v = Intg i; \\<not> (i <s 0 \\<or> int n \\<le> sint i)\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i__\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "case True"], ["proof (state)\nthis:\n  i <s 0 \\<or> int n \\<le> sint i\n\ngoal (2 subgoals):\n 1. \\<lbrakk>v = Intg i; i <s 0 \\<or> int n \\<le> sint i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i__\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>v = Intg i; \\<not> (i <s 0 \\<or> int n \\<le> sint i)\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i__\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "with WTrtAAcc Array ty"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i__ : Integer\n  \\<lbrakk>\\<D> i__ \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i__\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i__,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i__\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i__\\<rceil>)\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n  typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>\n  i <s 0 \\<or> int n \\<le> sint i", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i__ : Integer\n  \\<lbrakk>\\<D> i__ \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i__\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i__,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i__\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i__\\<rceil>)\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n  typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>\n  i <s 0 \\<or> int n \\<le> sint i\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i__\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce intro: RedAAccBounds)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i__\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>v = Intg i; \\<not> (i <s 0 \\<or> int n \\<le> sint i)\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i__\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>v = Intg i; \\<not> (i <s 0 \\<or> int n \\<le> sint i)\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i__\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "case False"], ["proof (state)\nthis:\n  \\<not> (i <s 0 \\<or> int n \\<le> sint i)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>v = Intg i; \\<not> (i <s 0 \\<or> int n \\<le> sint i)\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i__\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  \\<not> (i <s 0 \\<or> int n \\<le> sint i)", "have \"nat (sint i) < n\""], ["proof (prove)\nusing this:\n  \\<not> (i <s 0 \\<or> int n \\<le> sint i)\n\ngoal (1 subgoal):\n 1. nat (sint i) < n", "by (simp add: not_le word_sless_alt nat_less_iff)"], ["proof (state)\nthis:\n  nat (sint i) < n\n\ngoal (1 subgoal):\n 1. \\<lbrakk>v = Intg i; \\<not> (i <s 0 \\<or> int n \\<le> sint i)\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i__\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "with ty"], ["proof (chain)\npicking this:\n  typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>\n  nat (sint i) < n", "have \"P,h \\<turnstile> ad@ACell (nat (sint i)) : U\""], ["proof (prove)\nusing this:\n  typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>\n  nat (sint i) < n\n\ngoal (1 subgoal):\n 1. P,h \\<turnstile> ad@ACell (nat (sint i)) : U", "by(auto intro!: addr_loc_type.intros)"], ["proof (state)\nthis:\n  P,h \\<turnstile> ad@ACell (nat (sint i)) : U\n\ngoal (1 subgoal):\n 1. \\<lbrakk>v = Intg i; \\<not> (i <s 0 \\<or> int n \\<le> sint i)\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i__\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "from heap_read_total[OF hconf this]"], ["proof (chain)\npicking this:\n  \\<exists>v.\n     heap_read h ad (ACell (nat (sint i))) v \\<and>\n     P,h \\<turnstile> v :\\<le> U", "obtain v where \"heap_read h ad (ACell (nat (sint i))) v\""], ["proof (prove)\nusing this:\n  \\<exists>v.\n     heap_read h ad (ACell (nat (sint i))) v \\<and>\n     P,h \\<turnstile> v :\\<le> U\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        heap_read h ad (ACell (nat (sint i))) v \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  heap_read h ad (ACell (nat (sint i))) v\n\ngoal (1 subgoal):\n 1. \\<lbrakk>v__ = Intg i; \\<not> (i <s 0 \\<or> int n \\<le> sint i)\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i__\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "with False Array ty"], ["proof (chain)\npicking this:\n  \\<not> (i <s 0 \\<or> int n \\<le> sint i)\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n  typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>\n  heap_read h ad (ACell (nat (sint i))) v", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> (i <s 0 \\<or> int n \\<le> sint i)\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n  typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>\n  heap_read h ad (ACell (nat (sint i))) v\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i__\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: RedAAcc)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i__\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i__\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>aa.\n       i__ = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i__\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix ex"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"i = Throw ex\""], ["proof (state)\nthis:\n  i = Throw ex\n\ngoal (1 subgoal):\n 1. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with WTrtAAcc Array"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil>)\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n  i = Throw ex", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil>)\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n  i = Throw ex\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce intro: AAccThrow2)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>;\n     \\<not> final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>;\n     \\<not> final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "assume \"\\<not> final i\""], ["proof (state)\nthis:\n  \\<not> final i\n\ngoal (1 subgoal):\n 1. \\<lbrakk>typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>;\n     \\<not> final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "with WTrtAAcc Array"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil>)\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n  \\<not> final i", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil>)\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n  \\<not> final i\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce intro: AAccRed2)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix ex"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"a = Throw ex\""], ["proof (state)\nthis:\n  a = Throw ex\n\ngoal (2 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with WTrtAAcc"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil>)\n  a = Throw ex", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil>)\n  a = Throw ex\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce intro: AAccThrow1)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>", "qed simp"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> final a\""], ["proof (state)\nthis:\n  \\<not> final a\n\ngoal (1 subgoal):\n 1. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtAAcc"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil>)\n  \\<not> final a", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil>)\n  \\<not> final a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce intro: AAccRed1)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (23 subgoals):\n 1. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         class_type_of' U = \\<lfloor>C\\<rfloor>;\n         P \\<turnstile> C has F:T (fm) in D; volatile fm;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n         \\<And>l.\n            \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e3\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e3,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T3 \\<le> T;\n         \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n          \\<lfloor>dom l\\<rfloor>;\n         \\<not> final\n                 (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 23 subgoals...", "next"], ["proof (state)\ngoal (23 subgoals):\n 1. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         class_type_of' U = \\<lfloor>C\\<rfloor>;\n         P \\<turnstile> C has F:T (fm) in D; volatile fm;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n         \\<And>l.\n            \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e3\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e3,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T3 \\<le> T;\n         \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n          \\<lfloor>dom l\\<rfloor>;\n         \\<not> final\n                 (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 23 subgoals...", "case (WTrtAAccNT E a i T l)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> a : NT\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil>)\n\ngoal (23 subgoals):\n 1. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         class_type_of' U = \\<lfloor>C\\<rfloor>;\n         P \\<turnstile> C has F:T (fm) in D; volatile fm;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n         \\<And>l.\n            \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e3\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e3,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T3 \\<le> T;\n         \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n          \\<lfloor>dom l\\<rfloor>;\n         \\<not> final\n                 (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 23 subgoals...", "have wte: \"P,E,h \\<turnstile> a : NT\"\n   and wtei: \"P,E,h \\<turnstile> i : Integer\"\n   and IHa: \"\\<And>l. \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n                 \\<Longrightarrow> \\<exists>e' s' tas. extTA,P,t \\<turnstile> \\<langle>a,(h,l)\\<rangle> -tas\\<rightarrow> \\<langle>e',s'\\<rangle>\"\n   and IHi: \"\\<And>l. \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n                 \\<Longrightarrow> \\<exists>e' s' tas. extTA,P,t \\<turnstile> \\<langle>i,(h,l)\\<rangle> -tas\\<rightarrow> \\<langle>e',s'\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> a : NT &&& P,E,h \\<turnstile> i : Integer) &&&\n    (\\<And>l.\n        \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' tas.\n                             extTA,P,t \\<turnstile> \\<langle>a,\n               (h, l)\\<rangle> -tas\\<rightarrow>\n              \\<langle>e',s'\\<rangle>) &&&\n    (\\<And>l.\n        \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' tas.\n                             extTA,P,t \\<turnstile> \\<langle>i,\n               (h, l)\\<rangle> -tas\\<rightarrow>\n              \\<langle>e',s'\\<rangle>)", "by fact+"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> a : NT\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n\ngoal (23 subgoals):\n 1. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         class_type_of' U = \\<lfloor>C\\<rfloor>;\n         P \\<turnstile> C has F:T (fm) in D; volatile fm;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n         \\<And>l.\n            \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e3\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e3,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T3 \\<le> T;\n         \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n          \\<lfloor>dom l\\<rfloor>;\n         \\<not> final\n                 (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 23 subgoals...", "have ref: \"is_refT NT\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_refT NT", "by simp"], ["proof (state)\nthis:\n  is_refT NT\n\ngoal (23 subgoals):\n 1. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         class_type_of' U = \\<lfloor>C\\<rfloor>;\n         P \\<turnstile> C has F:T (fm) in D; volatile fm;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n         \\<And>l.\n            \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e3\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e3,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T3 \\<le> T;\n         \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n          \\<lfloor>dom l\\<rfloor>;\n         \\<not> final\n                 (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 23 subgoals...", "with WTrtAAccNT"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : NT\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil>)\n  is_refT NT", "have Da: \"\\<D> a \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : NT\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil>)\n  is_refT NT\n\ngoal (1 subgoal):\n 1. \\<D> a \\<lfloor>dom l\\<rfloor>", "by simp"], ["proof (state)\nthis:\n  \\<D> a \\<lfloor>dom l\\<rfloor>\n\ngoal (23 subgoals):\n 1. \\<And>E a i T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil>)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         class_type_of' U = \\<lfloor>C\\<rfloor>;\n         P \\<turnstile> C has F:T (fm) in D; volatile fm;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n         \\<And>l.\n            \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e3\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e3,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T3 \\<le> T;\n         \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n          \\<lfloor>dom l\\<rfloor>;\n         \\<not> final\n                 (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 23 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  \\<D> a \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (cases \"final a\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; final a\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "case True"], ["proof (state)\nthis:\n  final a\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; final a\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "with wte ref"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : NT\n  is_refT NT\n  final a", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : NT\n  is_refT NT\n  final a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (cases rule: finalRefE)"], ["proof (state)\ngoal (4 subgoals):\n 1. a = null \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<And>aa C.\n       \\<lbrakk>a = addr aa; NT = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa U.\n       \\<lbrakk>a = addr aa; NT = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "case null"], ["proof (state)\nthis:\n  a = null\n\ngoal (4 subgoals):\n 1. a = null \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<And>aa C.\n       \\<lbrakk>a = addr aa; NT = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa U.\n       \\<lbrakk>a = addr aa; NT = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  a = null\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (cases \"final i\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>a = null; final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>a = null; \\<not> final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "assume \"final i\""], ["proof (state)\nthis:\n  final i\n\ngoal (2 subgoals):\n 1. \\<lbrakk>a = null; final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>a = null; \\<not> final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final i\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume i: \"i = Val v\""], ["proof (state)\nthis:\n  i = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "have \"extTA,P,t \\<turnstile> \\<langle>null\\<lfloor>Val v\\<rceil>, (h, l)\\<rangle> -\\<epsilon>\\<rightarrow> \\<langle>THROW NullPointer, (h,l)\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extTA,P,t \\<turnstile> \\<langle>null\\<lfloor>Val v\\<rceil>,\n                            (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                           \\<langle>Throw (addr_of_sys_xcpt NullPointer),\n                            (h, l)\\<rangle>", "by (rule RedAAccNull)"], ["proof (state)\nthis:\n  extTA,P,t \\<turnstile> \\<langle>null\\<lfloor>Val v\\<rceil>,\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Throw (addr_of_sys_xcpt NullPointer),\n                          (h, l)\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with WTrtAAccNT \\<open>final a\\<close> null \\<open>final i\\<close> i"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : NT\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil>)\n  final a\n  a = null\n  final i\n  i = Val v\n  extTA,P,t \\<turnstile> \\<langle>null\\<lfloor>Val v\\<rceil>,\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Throw (addr_of_sys_xcpt NullPointer),\n                          (h, l)\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : NT\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil>)\n  final a\n  a = null\n  final i\n  i = Val v\n  extTA,P,t \\<turnstile> \\<langle>null\\<lfloor>Val v\\<rceil>,\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Throw (addr_of_sys_xcpt NullPointer),\n                          (h, l)\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by blast"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix ex"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume i: \"i = Throw ex\""], ["proof (state)\nthis:\n  i = Throw ex\n\ngoal (1 subgoal):\n 1. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "have \"extTA,P,t \\<turnstile> \\<langle>null\\<lfloor>Throw ex\\<rceil>, (h, l)\\<rangle> -\\<epsilon>\\<rightarrow> \\<langle>Throw ex, (h,l)\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extTA,P,t \\<turnstile> \\<langle>null\\<lfloor>Throw ex\\<rceil>,\n                            (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                           \\<langle>Throw ex,(h, l)\\<rangle>", "by(rule AAccThrow2)"], ["proof (state)\nthis:\n  extTA,P,t \\<turnstile> \\<langle>null\\<lfloor>Throw ex\\<rceil>,\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Throw ex,(h, l)\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with WTrtAAccNT \\<open>final a\\<close> null \\<open>final i\\<close> i"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : NT\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil>)\n  final a\n  a = null\n  final i\n  i = Throw ex\n  extTA,P,t \\<turnstile> \\<langle>null\\<lfloor>Throw ex\\<rceil>,\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Throw ex,(h, l)\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : NT\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil>)\n  final a\n  a = null\n  final i\n  i = Throw ex\n  extTA,P,t \\<turnstile> \\<langle>null\\<lfloor>Throw ex\\<rceil>,\n                          (h, l)\\<rangle> -\\<lbrace>\\<rbrace>\\<rightarrow>\n                         \\<langle>Throw ex,(h, l)\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by blast"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>a = null; \\<not> final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>a = null; \\<not> final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "assume \"\\<not> final i\""], ["proof (state)\nthis:\n  \\<not> final i\n\ngoal (1 subgoal):\n 1. \\<lbrakk>a = null; \\<not> final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "with WTrtAAccNT null"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : NT\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil>)\n  a = null\n  \\<not> final i", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : NT\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil>)\n  a = null\n  \\<not> final i\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: AAccRed2)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; NT = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa U.\n       \\<lbrakk>a = addr aa; NT = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; NT = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa U.\n       \\<lbrakk>a = addr aa; NT = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "case Throw"], ["proof (state)\nthis:\n  a = Throw a_\n\ngoal (3 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; NT = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa U.\n       \\<lbrakk>a = addr aa; NT = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  a = Throw a_\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce intro: AAccThrow1)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; NT = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa U.\n       \\<lbrakk>a = addr aa; NT = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>", "qed simp_all"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "case False"], ["proof (state)\nthis:\n  \\<not> final a\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "with WTrtAAccNT Da"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : NT\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil>)\n  \\<D> a \\<lfloor>dom l\\<rfloor>\n  \\<not> final a", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : NT\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil>) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil>)\n  \\<D> a \\<lfloor>dom l\\<rfloor>\n  \\<not> final a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce intro:AAccRed1)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil>,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (22 subgoals):\n 1. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 e2 T2 e3 T3 D F l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e3 : T3;\n         \\<And>l.\n            \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e3\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e3,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n          \\<lfloor>dom l\\<rfloor>;\n         \\<not> final\n                 (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 22 subgoals...", "next"], ["proof (state)\ngoal (22 subgoals):\n 1. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 e2 T2 e3 T3 D F l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e3 : T3;\n         \\<And>l.\n            \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e3\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e3,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n          \\<lfloor>dom l\\<rfloor>;\n         \\<not> final\n                 (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 22 subgoals...", "case (WTrtAAss E a T i e T' l)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n\ngoal (22 subgoals):\n 1. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 e2 T2 e3 T3 D F l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e3 : T3;\n         \\<And>l.\n            \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e3\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e3,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n          \\<lfloor>dom l\\<rfloor>;\n         \\<not> final\n                 (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 22 subgoals...", "have wta: \"P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\"\n    and wti: \"P,E,h \\<turnstile> i : Integer\"\n    and wte: \"P,E,h \\<turnstile> e : T'\"\n    and D: \"\\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\"\n    and IH1: \"\\<And>l. \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk> \\<Longrightarrow> \\<exists>e' s' tas. extTA,P,t \\<turnstile> \\<langle>a,(h, l)\\<rangle> -tas\\<rightarrow> \\<langle>e',s'\\<rangle>\"\n    and IH2: \"\\<And>l. \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk> \\<Longrightarrow> \\<exists>e' s' tas. extTA,P,t \\<turnstile> \\<langle>i,(h, l)\\<rangle> -tas\\<rightarrow> \\<langle>e',s'\\<rangle>\"\n    and IH3: \"\\<And>l. \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk> \\<Longrightarrow> \\<exists>e' s' tas. extTA,P,t \\<turnstile> \\<langle>e,(h, l)\\<rangle> -tas\\<rightarrow> \\<langle>e',s'\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil> &&&\n     P,E,h \\<turnstile> i : Integer &&& P,E,h \\<turnstile> e : T') &&&\n    (\\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor> &&&\n     (\\<And>l.\n         \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n         \\<Longrightarrow> \\<exists>e' s' tas.\n                              extTA,P,t \\<turnstile> \\<langle>a,\n                (h, l)\\<rangle> -tas\\<rightarrow>\n               \\<langle>e',s'\\<rangle>)) &&&\n    (\\<And>l.\n        \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' tas.\n                             extTA,P,t \\<turnstile> \\<langle>i,\n               (h, l)\\<rangle> -tas\\<rightarrow>\n              \\<langle>e',s'\\<rangle>) &&&\n    (\\<And>l.\n        \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' tas.\n                             extTA,P,t \\<turnstile> \\<langle>e,\n               (h, l)\\<rangle> -tas\\<rightarrow>\n              \\<langle>e',s'\\<rangle>)", "by fact+"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  P,E,h \\<turnstile> i : Integer\n  P,E,h \\<turnstile> e : T'\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n\ngoal (22 subgoals):\n 1. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 e2 T2 e3 T3 D F l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e3 : T3;\n         \\<And>l.\n            \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e3\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e3,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n          \\<lfloor>dom l\\<rfloor>;\n         \\<not> final\n                 (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 22 subgoals...", "have ref: \"is_refT (T\\<lfloor>\\<rceil>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_refT (T\\<lfloor>\\<rceil>)", "by simp"], ["proof (state)\nthis:\n  is_refT (T\\<lfloor>\\<rceil>)\n\ngoal (22 subgoals):\n 1. \\<And>E a T i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 e2 T2 e3 T3 D F l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e3 : T3;\n         \\<And>l.\n            \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e3\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e3,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n          \\<lfloor>dom l\\<rfloor>;\n         \\<not> final\n                 (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 22 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (cases \"final a\")"], ["proof (state)\ngoal (2 subgoals):\n 1. final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume fa: \"final a\""], ["proof (state)\nthis:\n  final a\n\ngoal (2 subgoals):\n 1. final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with wta ref"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  is_refT (T\\<lfloor>\\<rceil>)\n  final a", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  is_refT (T\\<lfloor>\\<rceil>)\n  final a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(cases rule: finalRefE)"], ["proof (state)\ngoal (4 subgoals):\n 1. a = null \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa U.\n       \\<lbrakk>a = addr aa;\n        T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "case null"], ["proof (state)\nthis:\n  a = null\n\ngoal (4 subgoals):\n 1. a = null \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa U.\n       \\<lbrakk>a = addr aa;\n        T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(cases \"final i\")"], ["proof (state)\ngoal (2 subgoals):\n 1. final i \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final i \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"final i\""], ["proof (state)\nthis:\n  final i\n\ngoal (2 subgoals):\n 1. final i \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final i \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final i\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume i: \"i = Val v\""], ["proof (state)\nthis:\n  i = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with wti"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> i : Integer\n  i = Val v", "have \"typeof\\<^bsub>h\\<^esub> v = Some Integer\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> i : Integer\n  i = Val v\n\ngoal (1 subgoal):\n 1. typeof\\<^bsub>h\\<^esub> v = \\<lfloor>Integer\\<rfloor>", "by fastforce"], ["proof (state)\nthis:\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>Integer\\<rfloor>\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>Integer\\<rfloor>", "obtain idx where \"v = Intg idx\""], ["proof (prove)\nusing this:\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>Integer\\<rfloor>\n\ngoal (1 subgoal):\n 1. (\\<And>idx. v = Intg idx \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  v = Intg idx\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  v = Intg idx\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (cases \"final e\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>v = Intg idx; final e\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>v = Intg idx; \\<not> final e\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. \\<lbrakk>v = Intg idx; final e\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>v = Intg idx; \\<not> final e\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       e = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix w"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       e = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"e = Val w\""], ["proof (state)\nthis:\n  e = Val w\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       e = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with WTrtAAss null"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  a = null\n  e = Val w", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  a = null\n  e = Val w\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce intro: RedAAssNull)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>aa.\n       e = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>aa.\n       e = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix ex"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>aa.\n       e = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"e = Throw ex\""], ["proof (state)\nthis:\n  e = Throw ex\n\ngoal (1 subgoal):\n 1. \\<And>aa.\n       e = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with WTrtAAss null"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  a = null\n  e = Throw ex", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  a = null\n  e = Throw ex\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce intro: AAssThrow3)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>v = Intg idx; \\<not> final e\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>v = Intg idx; \\<not> final e\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<lbrakk>v = Intg idx; \\<not> final e\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "with WTrtAAss null"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  a = null\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  a = null\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce intro: AAssRed3)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix ex"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"i = Throw ex\""], ["proof (state)\nthis:\n  i = Throw ex\n\ngoal (1 subgoal):\n 1. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with WTrtAAss null"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  a = null\n  i = Throw ex", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  a = null\n  i = Throw ex\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce intro: AAssThrow2)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final i \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final i \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> final i\""], ["proof (state)\nthis:\n  \\<not> final i\n\ngoal (1 subgoal):\n 1. \\<not> final i \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtAAss null"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  a = null\n  \\<not> final i", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  a = null\n  \\<not> final i\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce intro: AAssRed2)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa U.\n       \\<lbrakk>a = addr aa;\n        T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa U.\n       \\<lbrakk>a = addr aa;\n        T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "case (Array ad U)"], ["proof (state)\nthis:\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n\ngoal (3 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa U.\n       \\<lbrakk>a = addr aa;\n        T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with wta"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>", "obtain n where ty: \"typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        typeof_addr h ad =\n        \\<lfloor>Array_type U n\\<rfloor> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>\n\ngoal (3 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa U.\n       \\<lbrakk>a = addr aa;\n        T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (cases \"final i\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>;\n     final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>;\n     \\<not> final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "assume fi: \"final i\""], ["proof (state)\nthis:\n  final i\n\ngoal (2 subgoals):\n 1. \\<lbrakk>typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>;\n     final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>;\n     \\<not> final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final i\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume ivalv: \"i = Val v\""], ["proof (state)\nthis:\n  i = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with wti"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> i : Integer\n  i = Val v", "have \"typeof\\<^bsub>h\\<^esub> v = Some Integer\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> i : Integer\n  i = Val v\n\ngoal (1 subgoal):\n 1. typeof\\<^bsub>h\\<^esub> v = \\<lfloor>Integer\\<rfloor>", "by fastforce"], ["proof (state)\nthis:\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>Integer\\<rfloor>\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>Integer\\<rfloor>", "obtain idx where vidx: \"v = Intg idx\""], ["proof (prove)\nusing this:\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>Integer\\<rfloor>\n\ngoal (1 subgoal):\n 1. (\\<And>idx. v = Intg idx \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  v = Intg idx\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       i = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  v = Intg idx\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (cases \"final e\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>v = Intg idx; final e\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>v = Intg idx; \\<not> final e\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "assume fe: \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. \\<lbrakk>v = Intg idx; final e\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>v = Intg idx; \\<not> final e\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       e = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix w"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       e = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume evalw: \"e = Val w\""], ["proof (state)\nthis:\n  e = Val w\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       e = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(cases \"idx <s 0 \\<or> sint idx \\<ge> int n\")"], ["proof (state)\ngoal (2 subgoals):\n 1. idx <s 0 \\<or> int n \\<le> sint idx \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> (idx <s 0 \\<or> int n \\<le> sint idx) \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case True"], ["proof (state)\nthis:\n  idx <s 0 \\<or> int n \\<le> sint idx\n\ngoal (2 subgoals):\n 1. idx <s 0 \\<or> int n \\<le> sint idx \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> (idx <s 0 \\<or> int n \\<le> sint idx) \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with ty evalw Array ivalv vidx"], ["proof (chain)\npicking this:\n  typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>\n  e = Val w\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n  i = Val v\n  v = Intg idx\n  idx <s 0 \\<or> int n \\<le> sint idx", "show ?thesis"], ["proof (prove)\nusing this:\n  typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>\n  e = Val w\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n  i = Val v\n  v = Intg idx\n  idx <s 0 \\<or> int n \\<le> sint idx\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: RedAAssBounds)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> (idx <s 0 \\<or> int n \\<le> sint idx) \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (idx <s 0 \\<or> int n \\<le> sint idx) \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case False"], ["proof (state)\nthis:\n  \\<not> (idx <s 0 \\<or> int n \\<le> sint idx)\n\ngoal (1 subgoal):\n 1. \\<not> (idx <s 0 \\<or> int n \\<le> sint idx) \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  \\<not> (idx <s 0 \\<or> int n \\<le> sint idx)", "have \"nat (sint idx) < n\""], ["proof (prove)\nusing this:\n  \\<not> (idx <s 0 \\<or> int n \\<le> sint idx)\n\ngoal (1 subgoal):\n 1. nat (sint idx) < n", "by (simp add: not_le word_sless_alt nat_less_iff)"], ["proof (state)\nthis:\n  nat (sint idx) < n\n\ngoal (1 subgoal):\n 1. \\<not> (idx <s 0 \\<or> int n \\<le> sint idx) \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with ty"], ["proof (chain)\npicking this:\n  typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>\n  nat (sint idx) < n", "have adal: \"P,h \\<turnstile> ad@ACell (nat (sint idx)) : U\""], ["proof (prove)\nusing this:\n  typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>\n  nat (sint idx) < n\n\ngoal (1 subgoal):\n 1. P,h \\<turnstile> ad@ACell (nat (sint idx)) : U", "by(auto intro!: addr_loc_type.intros)"], ["proof (state)\nthis:\n  P,h \\<turnstile> ad@ACell (nat (sint idx)) : U\n\ngoal (1 subgoal):\n 1. \\<not> (idx <s 0 \\<or> int n \\<le> sint idx) \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(cases \"P \\<turnstile> T' \\<le> U\")"], ["proof (state)\ngoal (2 subgoals):\n 1. P \\<turnstile> T' \\<le> U \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> P \\<turnstile> T' \\<le> U \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case True"], ["proof (state)\nthis:\n  P \\<turnstile> T' \\<le> U\n\ngoal (2 subgoals):\n 1. P \\<turnstile> T' \\<le> U \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> P \\<turnstile> T' \\<le> U \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with wte evalw"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : T'\n  e = Val w\n  P \\<turnstile> T' \\<le> U", "have \"P,h \\<turnstile> w :\\<le> U\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : T'\n  e = Val w\n  P \\<turnstile> T' \\<le> U\n\ngoal (1 subgoal):\n 1. P,h \\<turnstile> w :\\<le> U", "by(auto simp add: conf_def)"], ["proof (state)\nthis:\n  P,h \\<turnstile> w :\\<le> U\n\ngoal (2 subgoals):\n 1. P \\<turnstile> T' \\<le> U \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> P \\<turnstile> T' \\<le> U \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "from heap_write_total[OF hconf adal this]"], ["proof (chain)\npicking this:\n  \\<exists>h'. heap_write h ad (ACell (nat (sint idx))) w h'", "obtain h' where h': \"heap_write h ad (ACell (nat (sint idx))) w h'\""], ["proof (prove)\nusing this:\n  \\<exists>h'. heap_write h ad (ACell (nat (sint idx))) w h'\n\ngoal (1 subgoal):\n 1. (\\<And>h'.\n        heap_write h ad (ACell (nat (sint idx))) w h' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  heap_write h ad (ACell (nat (sint idx))) w h'\n\ngoal (2 subgoals):\n 1. P \\<turnstile> T' \\<le> U \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> P \\<turnstile> T' \\<le> U \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with ty False vidx ivalv evalw Array wte True"], ["proof (chain)\npicking this:\n  typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>\n  \\<not> (idx <s 0 \\<or> int n \\<le> sint idx)\n  v = Intg idx\n  i = Val v\n  e = Val w\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n  P,E,h \\<turnstile> e : T'\n  P \\<turnstile> T' \\<le> U\n  heap_write h ad (ACell (nat (sint idx))) w h'", "show ?thesis"], ["proof (prove)\nusing this:\n  typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>\n  \\<not> (idx <s 0 \\<or> int n \\<le> sint idx)\n  v = Intg idx\n  i = Val v\n  e = Val w\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n  P,E,h \\<turnstile> e : T'\n  P \\<turnstile> T' \\<le> U\n  heap_write h ad (ACell (nat (sint idx))) w h'\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: RedAAss)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> P \\<turnstile> T' \\<le> U \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> P \\<turnstile> T' \\<le> U \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case False"], ["proof (state)\nthis:\n  \\<not> P \\<turnstile> T' \\<le> U\n\ngoal (1 subgoal):\n 1. \\<not> P \\<turnstile> T' \\<le> U \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with ty vidx ivalv evalw Array wte \\<open>\\<not> (idx <s 0 \\<or> sint idx \\<ge> int n)\\<close>"], ["proof (chain)\npicking this:\n  typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>\n  v = Intg idx\n  i = Val v\n  e = Val w\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n  P,E,h \\<turnstile> e : T'\n  \\<not> (idx <s 0 \\<or> int n \\<le> sint idx)\n  \\<not> P \\<turnstile> T' \\<le> U", "show ?thesis"], ["proof (prove)\nusing this:\n  typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>\n  v = Intg idx\n  i = Val v\n  e = Val w\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n  P,E,h \\<turnstile> e : T'\n  \\<not> (idx <s 0 \\<or> int n \\<le> sint idx)\n  \\<not> P \\<turnstile> T' \\<le> U\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: RedAAssStore)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>aa.\n       e = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>aa.\n       e = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix ex"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>aa.\n       e = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"e = Throw ex\""], ["proof (state)\nthis:\n  e = Throw ex\n\ngoal (1 subgoal):\n 1. \\<And>aa.\n       e = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with Array ivalv"], ["proof (chain)\npicking this:\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n  i = Val v\n  e = Throw ex", "show ?thesis"], ["proof (prove)\nusing this:\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n  i = Val v\n  e = Throw ex\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce intro: AAssThrow3)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>v = Intg idx; \\<not> final e\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>v = Intg idx; \\<not> final e\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<lbrakk>v = Intg idx; \\<not> final e\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "with WTrtAAss Array fi ivalv vidx"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n  final i\n  i = Val v\n  v = Intg idx\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n  final i\n  i = Val v\n  v = Intg idx\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce intro: AAssRed3)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix ex"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"i = Throw ex\""], ["proof (state)\nthis:\n  i = Throw ex\n\ngoal (1 subgoal):\n 1. \\<And>aa.\n       i = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with WTrtAAss Array"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n  i = Throw ex", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n  i = Throw ex\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce intro: AAssThrow2)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>;\n     \\<not> final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>;\n     \\<not> final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "assume \"\\<not> final i\""], ["proof (state)\nthis:\n  \\<not> final i\n\ngoal (1 subgoal):\n 1. \\<lbrakk>typeof_addr h ad = \\<lfloor>Array_type U n\\<rfloor>;\n     \\<not> final i\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>", "with WTrtAAss Array"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n  \\<not> final i", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n  \\<not> final i\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce intro: AAssRed2)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix ex"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"a = Throw ex\""], ["proof (state)\nthis:\n  a = Throw ex\n\ngoal (2 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with WTrtAAss"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  a = Throw ex", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  a = Throw ex\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce intro:AAssThrow1)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>", "qed simp_all"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> final a\""], ["proof (state)\nthis:\n  \\<not> final a\n\ngoal (1 subgoal):\n 1. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtAAss"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  \\<not> final a", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  \\<not> final a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce intro: AAssRed1)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (21 subgoals):\n 1. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e U C M Ts T meth D es Ts' l.\n        \\<lbrakk>P,E,h \\<turnstile> e : U;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         class_type_of' U = \\<lfloor>C\\<rfloor>;\n         P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n         P,E,h \\<turnstile> es [:] Ts';\n         \\<And>l.\n            \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n             \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>es,\n                   (h, l)\\<rangle> [-ta\\<rightarrow>]\n                  \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> Ts' [\\<le>] Ts;\n         \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 21 subgoals...", "next"], ["proof (state)\ngoal (21 subgoals):\n 1. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e U C M Ts T meth D es Ts' l.\n        \\<lbrakk>P,E,h \\<turnstile> e : U;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         class_type_of' U = \\<lfloor>C\\<rfloor>;\n         P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n         P,E,h \\<turnstile> es [:] Ts';\n         \\<And>l.\n            \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n             \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>es,\n                   (h, l)\\<rangle> [-ta\\<rightarrow>]\n                  \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> Ts' [\\<le>] Ts;\n         \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 21 subgoals...", "case (WTrtAAssNT E a i e T' l)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> a : NT\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n\ngoal (21 subgoals):\n 1. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e U C M Ts T meth D es Ts' l.\n        \\<lbrakk>P,E,h \\<turnstile> e : U;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         class_type_of' U = \\<lfloor>C\\<rfloor>;\n         P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n         P,E,h \\<turnstile> es [:] Ts';\n         \\<And>l.\n            \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n             \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>es,\n                   (h, l)\\<rangle> [-ta\\<rightarrow>]\n                  \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> Ts' [\\<le>] Ts;\n         \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 21 subgoals...", "have wta: \"P,E,h \\<turnstile> a : NT\"\n    and wti: \"P,E,h \\<turnstile> i : Integer\"\n    and wte: \"P,E,h \\<turnstile> e : T'\"\n    and D: \"\\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\"\n    and IH1: \"\\<And>l. \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk> \\<Longrightarrow> \\<exists>e' s' tas. extTA,P,t \\<turnstile> \\<langle>a,(h, l)\\<rangle> -tas\\<rightarrow> \\<langle>e',s'\\<rangle>\"\n    and IH2: \"\\<And>l. \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk> \\<Longrightarrow> \\<exists>e' s' tas. extTA,P,t \\<turnstile> \\<langle>i,(h, l)\\<rangle> -tas\\<rightarrow> \\<langle>e',s'\\<rangle>\"\n    and IH3: \"\\<And>l. \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk> \\<Longrightarrow> \\<exists>e' s' tas. extTA,P,t \\<turnstile> \\<langle>e,(h, l)\\<rangle> -tas\\<rightarrow> \\<langle>e',s'\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> a : NT &&&\n     P,E,h \\<turnstile> i : Integer &&& P,E,h \\<turnstile> e : T') &&&\n    (\\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor> &&&\n     (\\<And>l.\n         \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n         \\<Longrightarrow> \\<exists>e' s' tas.\n                              extTA,P,t \\<turnstile> \\<langle>a,\n                (h, l)\\<rangle> -tas\\<rightarrow>\n               \\<langle>e',s'\\<rangle>)) &&&\n    (\\<And>l.\n        \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' tas.\n                             extTA,P,t \\<turnstile> \\<langle>i,\n               (h, l)\\<rangle> -tas\\<rightarrow>\n              \\<langle>e',s'\\<rangle>) &&&\n    (\\<And>l.\n        \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' tas.\n                             extTA,P,t \\<turnstile> \\<langle>e,\n               (h, l)\\<rangle> -tas\\<rightarrow>\n              \\<langle>e',s'\\<rangle>)", "by fact+"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> a : NT\n  P,E,h \\<turnstile> i : Integer\n  P,E,h \\<turnstile> e : T'\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n\ngoal (21 subgoals):\n 1. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e U C M Ts T meth D es Ts' l.\n        \\<lbrakk>P,E,h \\<turnstile> e : U;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         class_type_of' U = \\<lfloor>C\\<rfloor>;\n         P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n         P,E,h \\<turnstile> es [:] Ts';\n         \\<And>l.\n            \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n             \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>es,\n                   (h, l)\\<rangle> [-ta\\<rightarrow>]\n                  \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> Ts' [\\<le>] Ts;\n         \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 21 subgoals...", "have ref: \"is_refT NT\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_refT NT", "by simp"], ["proof (state)\nthis:\n  is_refT NT\n\ngoal (21 subgoals):\n 1. \\<And>E a i e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> i : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> i \\<lfloor>dom l\\<rfloor>; \\<not> final i\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>i,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<lfloor>i\\<rceil> := e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e U C M Ts T meth D es Ts' l.\n        \\<lbrakk>P,E,h \\<turnstile> e : U;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         class_type_of' U = \\<lfloor>C\\<rfloor>;\n         P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n         P,E,h \\<turnstile> es [:] Ts';\n         \\<And>l.\n            \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n             \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>es,\n                   (h, l)\\<rangle> [-ta\\<rightarrow>]\n                  \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> Ts' [\\<le>] Ts;\n         \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 21 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (cases \"final a\")"], ["proof (state)\ngoal (2 subgoals):\n 1. final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume fa: \"final a\""], ["proof (state)\nthis:\n  final a\n\ngoal (2 subgoals):\n 1. final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (cases \"final i\")"], ["proof (state)\ngoal (2 subgoals):\n 1. final i \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final i \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume fi: \"final i\""], ["proof (state)\nthis:\n  final i\n\ngoal (2 subgoals):\n 1. final i \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final i \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (cases \"final e\")"], ["proof (state)\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume fe: \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtAAssNT fa fi"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : NT\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  final a\n  final i\n  final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : NT\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  final a\n  final i\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce simp:final_iff intro: RedAAssNull AAssThrow1 AAssThrow2 AAssThrow3)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtAAssNT fa fi"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : NT\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  final a\n  final i\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : NT\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  final a\n  final i\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce simp: final_iff intro!:AAssRed3 AAssThrow1 AAssThrow2)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final i \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final i \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> final i\""], ["proof (state)\nthis:\n  \\<not> final i\n\ngoal (1 subgoal):\n 1. \\<not> final i \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtAAssNT fa"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : NT\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  final a\n  \\<not> final i", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : NT\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  final a\n  \\<not> final i\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce simp: final_iff intro!:AAssRed2 AAssThrow1)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> final a\""], ["proof (state)\nthis:\n  \\<not> final a\n\ngoal (1 subgoal):\n 1. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtAAssNT"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : NT\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  \\<not> final a", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : NT\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> i : Integer\n  \\<lbrakk>\\<D> i \\<lfloor>dom ?l15\\<rfloor>; \\<not> final i\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>i,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<lfloor>i\\<rceil> := e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<lfloor>i\\<rceil> := e)\n  \\<not> final a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce simp: final_iff intro!:AAssRed1)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<lfloor>i\\<rceil> := e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (20 subgoals):\n 1. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e es Ts M T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> es [:] Ts;\n         \\<And>l.\n            \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n             \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>es,\n                   (h, l)\\<rangle> [-ta\\<rightarrow>]\n                  \\<langle>es',s'\\<rangle>;\n         \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 20 subgoals...", "next"], ["proof (state)\ngoal (20 subgoals):\n 1. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e es Ts M T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> es [:] Ts;\n         \\<And>l.\n            \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n             \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>es,\n                   (h, l)\\<rangle> [-ta\\<rightarrow>]\n                  \\<langle>es',s'\\<rangle>;\n         \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 20 subgoals...", "case (WTrtALength E a T l)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<bullet>length)\n\ngoal (20 subgoals):\n 1. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e es Ts M T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> es [:] Ts;\n         \\<And>l.\n            \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n             \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>es,\n                   (h, l)\\<rangle> [-ta\\<rightarrow>]\n                  \\<langle>es',s'\\<rangle>;\n         \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 20 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(cases \"final a\")"], ["proof (state)\ngoal (2 subgoals):\n 1. final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case True"], ["proof (state)\nthis:\n  final a\n\ngoal (2 subgoals):\n 1. final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "note wta = \\<open>P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\\<close>"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n\ngoal (2 subgoals):\n 1. final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(rule finalRefE[OF _ _ True])"], ["proof (state)\ngoal (5 subgoals):\n 1. is_refT (T\\<lfloor>\\<rceil>)\n 2. a = null \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 3. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>aa U.\n       \\<lbrakk>a = addr aa;\n        T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "show \"is_refT (T\\<lfloor>\\<rceil>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_refT (T\\<lfloor>\\<rceil>)", "by simp"], ["proof (state)\nthis:\n  is_refT (T\\<lfloor>\\<rceil>)\n\ngoal (4 subgoals):\n 1. a = null \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa U.\n       \\<lbrakk>a = addr aa;\n        T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. a = null \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa U.\n       \\<lbrakk>a = addr aa;\n        T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"a = null\""], ["proof (state)\nthis:\n  a = null\n\ngoal (4 subgoals):\n 1. a = null \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa U.\n       \\<lbrakk>a = addr aa;\n        T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  a = null\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: RedALengthNull)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa U.\n       \\<lbrakk>a = addr aa;\n        T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa U.\n       \\<lbrakk>a = addr aa;\n        T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix ad U"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa U.\n       \\<lbrakk>a = addr aa;\n        T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"a = addr ad\" and \"T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\""], ["proof (state)\nthis:\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n\ngoal (3 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa U.\n       \\<lbrakk>a = addr aa;\n        T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with wta"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : T\\<lfloor>\\<rceil>\n  a = addr ad\n  T\\<lfloor>\\<rceil> = U\\<lfloor>\\<rceil>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: RedALength)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix ad"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"a = Throw ad\""], ["proof (state)\nthis:\n  a = Throw ad\n\ngoal (2 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  a = Throw ad\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce intro: ALengthThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; T\\<lfloor>\\<rceil> = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>", "qed simp"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case False"], ["proof (state)\nthis:\n  \\<not> final a\n\ngoal (1 subgoal):\n 1. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "from \\<open>\\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>\\<close>"], ["proof (chain)\npicking this:\n  \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>", "have \"\\<D> a \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\nusing this:\n  \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> a \\<lfloor>dom l\\<rfloor>", "by simp"], ["proof (state)\nthis:\n  \\<D> a \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with False \\<open>\\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk> \\<Longrightarrow> \\<exists>e' s' ta. extTA,P,t \\<turnstile> \\<langle>a,(h, l)\\<rangle> -ta\\<rightarrow> \\<langle>e',s'\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<not> final a\n  \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, l)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> a \\<lfloor>dom l\\<rfloor>", "obtain e' s' ta where \"extTA,P,t \\<turnstile> \\<langle>a,(h, l)\\<rangle> -ta\\<rightarrow> \\<langle>e',s'\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<not> final a\n  \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, l)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> a \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. (\\<And>ta e' s'.\n        extTA,P,t \\<turnstile> \\<langle>a,(h, l)\\<rangle> -ta\\<rightarrow>\n                               \\<langle>e',s'\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  extTA,P,t \\<turnstile> \\<langle>a,(h, l)\\<rangle> -ta\\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  extTA,P,t \\<turnstile> \\<langle>a,(h, l)\\<rangle> -ta\\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(blast intro: ALengthRed)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (19 subgoals):\n 1. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E V T e T' vo l.\n        \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         case vo of None \\<Rightarrow> True\n         | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n             \\<exists>T'.\n                typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n                P \\<turnstile> T' \\<le> T;\n         \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n         \\<not> final {V:T=vo; e}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 19 subgoals...", "next"], ["proof (state)\ngoal (19 subgoals):\n 1. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E V T e T' vo l.\n        \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         case vo of None \\<Rightarrow> True\n         | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n             \\<exists>T'.\n                typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n                P \\<turnstile> T' \\<le> T;\n         \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n         \\<not> final {V:T=vo; e}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 19 subgoals...", "case (WTrtALengthNT E a T l)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> a : NT\n  \\<lbrakk>\\<D> a \\<lfloor>dom ?l15\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (a\\<bullet>length)\n\ngoal (19 subgoals):\n 1. \\<And>E a T l.\n       \\<lbrakk>P,E,h \\<turnstile> a : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (a\\<bullet>length)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E V T e T' vo l.\n        \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         case vo of None \\<Rightarrow> True\n         | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n             \\<exists>T'.\n                typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n                P \\<turnstile> T' \\<le> T;\n         \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n         \\<not> final {V:T=vo; e}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 19 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(cases \"final a\")"], ["proof (state)\ngoal (2 subgoals):\n 1. final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case True"], ["proof (state)\nthis:\n  final a\n\ngoal (2 subgoals):\n 1. final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "note wta = \\<open>P,E,h \\<turnstile> a : NT\\<close>"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> a : NT\n\ngoal (2 subgoals):\n 1. final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> a : NT\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(rule finalRefE[OF _ _ True])"], ["proof (state)\ngoal (5 subgoals):\n 1. is_refT NT\n 2. a = null \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 3. \\<And>aa C.\n       \\<lbrakk>a = addr aa; NT = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>aa U.\n       \\<lbrakk>a = addr aa; NT = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "show \"is_refT NT\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_refT NT", "by simp"], ["proof (state)\nthis:\n  is_refT NT\n\ngoal (4 subgoals):\n 1. a = null \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<And>aa C.\n       \\<lbrakk>a = addr aa; NT = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa U.\n       \\<lbrakk>a = addr aa; NT = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. a = null \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<And>aa C.\n       \\<lbrakk>a = addr aa; NT = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa U.\n       \\<lbrakk>a = addr aa; NT = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"a = null\""], ["proof (state)\nthis:\n  a = null\n\ngoal (4 subgoals):\n 1. a = null \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<And>aa C.\n       \\<lbrakk>a = addr aa; NT = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa U.\n       \\<lbrakk>a = addr aa; NT = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  a = null\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(blast intro: RedALengthNull)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; NT = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa U.\n       \\<lbrakk>a = addr aa; NT = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; NT = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa U.\n       \\<lbrakk>a = addr aa; NT = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix ad"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; NT = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa U.\n       \\<lbrakk>a = addr aa; NT = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"a = Throw ad\""], ["proof (state)\nthis:\n  a = Throw ad\n\ngoal (3 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; NT = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa U.\n       \\<lbrakk>a = addr aa; NT = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>aa.\n       a = Throw aa \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  a = Throw ad\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(blast intro: ALengthThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>aa C.\n       \\<lbrakk>a = addr aa; NT = Class C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>aa U.\n       \\<lbrakk>a = addr aa; NT = U\\<lfloor>\\<rceil>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>", "qed simp_all"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case False"], ["proof (state)\nthis:\n  \\<not> final a\n\ngoal (1 subgoal):\n 1. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "from \\<open>\\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>\\<close>"], ["proof (chain)\npicking this:\n  \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>", "have \"\\<D> a \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\nusing this:\n  \\<D> (a\\<bullet>length) \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> a \\<lfloor>dom l\\<rfloor>", "by simp"], ["proof (state)\nthis:\n  \\<D> a \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with False \\<open>\\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk> \\<Longrightarrow> \\<exists>e' s' ta. extTA,P,t \\<turnstile> \\<langle>a,(h, l)\\<rangle> -ta\\<rightarrow> \\<langle>e',s'\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<not> final a\n  \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, l)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> a \\<lfloor>dom l\\<rfloor>", "obtain e' s' ta where \"extTA,P,t \\<turnstile> \\<langle>a,(h, l)\\<rangle> -ta\\<rightarrow> \\<langle>e',s'\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<not> final a\n  \\<lbrakk>\\<D> a \\<lfloor>dom l\\<rfloor>; \\<not> final a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>a,\n         (h, l)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> a \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. (\\<And>ta e' s'.\n        extTA,P,t \\<turnstile> \\<langle>a,(h, l)\\<rangle> -ta\\<rightarrow>\n                               \\<langle>e',s'\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  extTA,P,t \\<turnstile> \\<langle>a,(h, l)\\<rangle> -ta\\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final a \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  extTA,P,t \\<turnstile> \\<langle>a,(h, l)\\<rangle> -ta\\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(blast intro: ALengthRed)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>a\\<bullet>length,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (18 subgoals):\n 1. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E o' T e T' l.\n        \\<lbrakk>P,E,h \\<turnstile> o' : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n             \\<not> final o'\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>o',\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         is_refT T; P,E,h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (sync(o') e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 18 subgoals...", "next"], ["proof (state)\ngoal (18 subgoals):\n 1. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E o' T e T' l.\n        \\<lbrakk>P,E,h \\<turnstile> o' : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n             \\<not> final o'\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>o',\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         is_refT T; P,E,h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (sync(o') e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 18 subgoals...", "case (WTrtFAcc E e U C F T fm D l)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : U\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C has F:T (fm) in D\n  \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{D})\n\ngoal (18 subgoals):\n 1. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E o' T e T' l.\n        \\<lbrakk>P,E,h \\<turnstile> o' : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n             \\<not> final o'\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>o',\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         is_refT T; P,E,h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (sync(o') e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 18 subgoals...", "have wte: \"P,E,h \\<turnstile> e : U\"\n    and icto: \"class_type_of' U = \\<lfloor>C\\<rfloor>\"\n   and field: \"P \\<turnstile> C has F:T (fm) in D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h \\<turnstile> e : U &&&\n    class_type_of' U = \\<lfloor>C\\<rfloor> &&&\n    P \\<turnstile> C has F:T (fm) in D", "by fact+"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : U\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C has F:T (fm) in D\n\ngoal (18 subgoals):\n 1. \\<And>E e U C F T fm D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E o' T e T' l.\n        \\<lbrakk>P,E,h \\<turnstile> o' : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n             \\<not> final o'\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>o',\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         is_refT T; P,E,h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (sync(o') e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 18 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with wte icto"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : U\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : U\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (cases rule: final_addrE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       e = addr a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "case (addr a)"], ["proof (state)\nthis:\n  e = addr a\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       e = addr a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with wte"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : U\n  e = addr a", "obtain hU where ty: \"typeof_addr h a = \\<lfloor>hU\\<rfloor>\" \"U = ty_of_htype hU\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : U\n  e = addr a\n\ngoal (1 subgoal):\n 1. (\\<And>hU.\n        \\<lbrakk>typeof_addr h a = \\<lfloor>hU\\<rfloor>;\n         U = ty_of_htype hU\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  typeof_addr h a = \\<lfloor>hU\\<rfloor>\n  U = ty_of_htype hU\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       e = addr a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with icto field"], ["proof (chain)\npicking this:\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C has F:T (fm) in D\n  typeof_addr h a = \\<lfloor>hU\\<rfloor>\n  U = ty_of_htype hU", "have \"P,h \\<turnstile> a@CField D F : T\""], ["proof (prove)\nusing this:\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C has F:T (fm) in D\n  typeof_addr h a = \\<lfloor>hU\\<rfloor>\n  U = ty_of_htype hU\n\ngoal (1 subgoal):\n 1. P,h \\<turnstile> a@CField D F : T", "by(auto intro: addr_loc_type.intros)"], ["proof (state)\nthis:\n  P,h \\<turnstile> a@CField D F : T\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       e = addr a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "from heap_read_total[OF hconf this]"], ["proof (chain)\npicking this:\n  \\<exists>v.\n     heap_read h a (CField D F) v \\<and> P,h \\<turnstile> v :\\<le> T", "obtain v where \"heap_read h a (CField D F) v\""], ["proof (prove)\nusing this:\n  \\<exists>v.\n     heap_read h a (CField D F) v \\<and> P,h \\<turnstile> v :\\<le> T\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        heap_read h a (CField D F) v \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  heap_read h a (CField D F) v\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       e = addr a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with addr ty"], ["proof (chain)\npicking this:\n  e = addr a\n  typeof_addr h a = \\<lfloor>hU\\<rfloor>\n  U = ty_of_htype hU\n  heap_read h a (CField D F) v", "show ?thesis"], ["proof (prove)\nusing this:\n  e = addr a\n  typeof_addr h a = \\<lfloor>hU\\<rfloor>\n  U = ty_of_htype hU\n  heap_read h a (CField D F) v\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: RedFAcc)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"e = Throw a\""], ["proof (state)\nthis:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro:FAccThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtFAcc"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : U\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C has F:T (fm) in D\n  \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{D})\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : U\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C has F:T (fm) in D\n  \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{D})\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro!:FAccRed)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (17 subgoals):\n 1. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a T e T' l.\n        \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n             \\<not> final (addr a)\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>addr a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (insync(a) e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 17 subgoals...", "next"], ["proof (state)\ngoal (17 subgoals):\n 1. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a T e T' l.\n        \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n             \\<not> final (addr a)\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>addr a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (insync(a) e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 17 subgoals...", "case (WTrtFAccNT E e F D T l)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{D})\n\ngoal (17 subgoals):\n 1. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E a T e T' l.\n        \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n             \\<not> final (addr a)\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>addr a,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (insync(a) e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 17 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"final e\"  \\<comment> \\<open>@{term e} is @{term null} or @{term throw}\\<close>"], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtFAccNT"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{D})\n  final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{D})\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce simp:final_iff intro: RedFAccNull FAccThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\" \\<comment> \\<open>@{term e} reduces by IH\\<close>"], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtFAccNT"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{D})\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{D})\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by simp (fast intro:FAccRed)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>F{D},\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (16 subgoals):\n 1. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 T1 e2 T2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e1;; e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 16 subgoals...", "next"], ["proof (state)\ngoal (16 subgoals):\n 1. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 T1 e2 T2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e1;; e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 16 subgoals...", "case (WTrtFAss E e1 U C F T fm D e2 T2 l)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e1 : U\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C has F:T (fm) in D\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T2 \\<le> T\n  \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>F{D} := e2)\n\ngoal (16 subgoals):\n 1. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 T1 e2 T2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e1;; e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 16 subgoals...", "have wte1: \"P,E,h \\<turnstile> e1 : U\"\n    and icto: \"class_type_of' U = \\<lfloor>C\\<rfloor>\"\n    and field: \"P \\<turnstile> C has F:T (fm) in D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h \\<turnstile> e1 : U &&&\n    class_type_of' U = \\<lfloor>C\\<rfloor> &&&\n    P \\<turnstile> C has F:T (fm) in D", "by fact+"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e1 : U\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C has F:T (fm) in D\n\ngoal (16 subgoals):\n 1. \\<And>E e1 U C F T fm D e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 T1 e2 T2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e1;; e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 16 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"final e1\""], ["proof (state)\nthis:\n  final e1\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with wte1 icto"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : U\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  final e1", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : U\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (rule final_addrE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       e1 = addr a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       e1 = addr a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume e1: \"e1 = addr a\""], ["proof (state)\nthis:\n  e1 = addr a\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       e1 = addr a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"final e2\""], ["proof (state)\nthis:\n  final e2\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume e2: \"e2 = Val v\""], ["proof (state)\nthis:\n  e2 = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "from wte1 field icto e1"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : U\n  P \\<turnstile> C has F:T (fm) in D\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  e1 = addr a", "have adal: \"P,h \\<turnstile> a@CField D F : T\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : U\n  P \\<turnstile> C has F:T (fm) in D\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  e1 = addr a\n\ngoal (1 subgoal):\n 1. P,h \\<turnstile> a@CField D F : T", "by(auto intro: addr_loc_type.intros)"], ["proof (state)\nthis:\n  P,h \\<turnstile> a@CField D F : T\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "from e2 \\<open>P \\<turnstile> T2 \\<le> T\\<close> \\<open>P,E,h \\<turnstile> e2 : T2\\<close>"], ["proof (chain)\npicking this:\n  e2 = Val v\n  P \\<turnstile> T2 \\<le> T\n  P,E,h \\<turnstile> e2 : T2", "have \"P,h \\<turnstile> v :\\<le> T\""], ["proof (prove)\nusing this:\n  e2 = Val v\n  P \\<turnstile> T2 \\<le> T\n  P,E,h \\<turnstile> e2 : T2\n\ngoal (1 subgoal):\n 1. P,h \\<turnstile> v :\\<le> T", "by(auto simp add: conf_def)"], ["proof (state)\nthis:\n  P,h \\<turnstile> v :\\<le> T\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "from heap_write_total[OF hconf adal this]"], ["proof (chain)\npicking this:\n  \\<exists>h'. heap_write h a (CField D F) v h'", "obtain h' \n            where \"heap_write h a (CField D F) v h'\""], ["proof (prove)\nusing this:\n  \\<exists>h'. heap_write h a (CField D F) v h'\n\ngoal (1 subgoal):\n 1. (\\<And>h'.\n        heap_write h a (CField D F) v h' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  heap_write h a (CField D F) v h'\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with wte1 field e1 e2"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : U\n  P \\<turnstile> C has F:T (fm) in D\n  e1 = addr a\n  e2 = Val v\n  heap_write h a (CField D F) v h'", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : U\n  P \\<turnstile> C has F:T (fm) in D\n  e1 = addr a\n  e2 = Val v\n  heap_write h a (CField D F) v h'\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: RedFAss)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"e2 = Throw a\""], ["proof (state)\nthis:\n  e2 = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e2 = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "using e1"], ["proof (prove)\nusing this:\n  e2 = Throw a\n  e1 = addr a__\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro:FAssThrow2)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e2\""], ["proof (state)\nthis:\n  \\<not> final e2\n\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtFAss \\<open>final e1\\<close> e1"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : U\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C has F:T (fm) in D\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T2 \\<le> T\n  \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>F{D} := e2)\n  final e1\n  e1 = addr a\n  \\<not> final e2", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : U\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C has F:T (fm) in D\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T2 \\<le> T\n  \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>F{D} := e2)\n  final e1\n  e1 = addr a\n  \\<not> final e2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by simp (fast intro!:FAssRed2)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"e1 = Throw a\""], ["proof (state)\nthis:\n  e1 = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e1 = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro:FAssThrow1)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e1\""], ["proof (state)\nthis:\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtFAss"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : U\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C has F:T (fm) in D\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T2 \\<le> T\n  \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>F{D} := e2)\n  \\<not> final e1", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : U\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C has F:T (fm) in D\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T2 \\<le> T\n  \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>F{D} := e2)\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(simp del: split_paired_Ex)(blast intro!:FAssRed1)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (15 subgoals):\n 1. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e e1 T1 e2 T2 T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e1 : T1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> lub(T1, T2) = T;\n         \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (if (e) e1 else e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>if (e) e1\n               else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 15 subgoals...", "next"], ["proof (state)\ngoal (15 subgoals):\n 1. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e e1 T1 e2 T2 T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e1 : T1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> lub(T1, T2) = T;\n         \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (if (e) e1 else e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>if (e) e1\n               else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 15 subgoals...", "case (WTrtFAssNT E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e\\<^sub>1 : NT\n  \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom ?l15\\<rfloor>;\n   \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom ?l15\\<rfloor>;\n   \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\n\ngoal (15 subgoals):\n 1. \\<And>E e1 e2 T2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1\\<bullet>F{D} := e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e e1 T1 e2 T2 T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e1 : T1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> lub(T1, T2) = T;\n         \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (if (e) e1 else e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>if (e) e1\n               else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 15 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"final e\\<^sub>1\"  \\<comment> \\<open>@{term e\\<^sub>1} is @{term null} or @{term throw}\\<close>"], ["proof (state)\nthis:\n  final e\\<^sub>1\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"final e\\<^sub>2\"  \\<comment> \\<open>@{term e\\<^sub>2} is @{term Val} or @{term throw}\\<close>"], ["proof (state)\nthis:\n  final e\\<^sub>2\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtFAssNT \\<open>final e\\<^sub>1\\<close>"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e\\<^sub>1 : NT\n  \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom ?l15\\<rfloor>;\n   \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom ?l15\\<rfloor>;\n   \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\n  final e\\<^sub>1\n  final e\\<^sub>2", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e\\<^sub>1 : NT\n  \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom ?l15\\<rfloor>;\n   \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom ?l15\\<rfloor>;\n   \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\n  final e\\<^sub>1\n  final e\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce simp:final_iff intro: RedFAssNull FAssThrow1 FAssThrow2)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\\<^sub>2\" \\<comment> \\<open>@{term e\\<^sub>2} reduces by IH\\<close>"], ["proof (state)\nthis:\n  \\<not> final e\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtFAssNT \\<open>final e\\<^sub>1\\<close>"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e\\<^sub>1 : NT\n  \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom ?l15\\<rfloor>;\n   \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom ?l15\\<rfloor>;\n   \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\n  final e\\<^sub>1\n  \\<not> final e\\<^sub>2", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e\\<^sub>1 : NT\n  \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom ?l15\\<rfloor>;\n   \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom ?l15\\<rfloor>;\n   \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\n  final e\\<^sub>1\n  \\<not> final e\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce  simp:final_iff intro!:FAssRed2 FAssThrow1)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\\<^sub>1\" \\<comment> \\<open>@{term e\\<^sub>1} reduces by IH\\<close>"], ["proof (state)\nthis:\n  \\<not> final e\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtFAssNT"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e\\<^sub>1 : NT\n  \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom ?l15\\<rfloor>;\n   \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom ?l15\\<rfloor>;\n   \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\n  \\<not> final e\\<^sub>1", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e\\<^sub>1 : NT\n  \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom ?l15\\<rfloor>;\n   \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom ?l15\\<rfloor>;\n   \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\n  \\<not> final e\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce intro:FAssRed1)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (14 subgoals):\n 1. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e c T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> c : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>c,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (while (e) c)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>while (e) c,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 14 subgoals...", "next"], ["proof (state)\ngoal (14 subgoals):\n 1. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e c T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> c : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>c,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (while (e) c)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>while (e) c,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 14 subgoals...", "case (WTrtCAS E e1 U C F T fm D e2 T2 e3 T3)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e1 : U\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C has F:T (fm) in D\n  volatile fm\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T2 \\<le> T\n  P,E,h \\<turnstile> e3 : T3\n  \\<lbrakk>\\<D> e3 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e3\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e3,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T3 \\<le> T\n  \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n   \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n\ngoal (14 subgoals):\n 1. \\<And>E e1 U C F T fm D e2 T2 e3 T3 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C has F:T (fm) in D; volatile fm;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T2 \\<le> T; P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T3 \\<le> T;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e c T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> c : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>c,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (while (e) c)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>while (e) c,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 14 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(cases \"final e1\")"], ["proof (state)\ngoal (2 subgoals):\n 1. final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case e1: True"], ["proof (state)\nthis:\n  final e1\n\ngoal (2 subgoals):\n 1. final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtCAS.hyps(1,3)"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : U\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  final e1", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : U\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(rule final_addrE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       e1 = addr a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       e1 = addr a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume e1: \"e1 = addr a\""], ["proof (state)\nthis:\n  e1 = addr a\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       e1 = addr a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with WTrtCAS.hyps(1)"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : U\n  e1 = addr a", "obtain hU\n        where ty: \"typeof_addr h a = \\<lfloor>hU\\<rfloor>\" \"U = ty_of_htype hU\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : U\n  e1 = addr a\n\ngoal (1 subgoal):\n 1. (\\<And>hU.\n        \\<lbrakk>typeof_addr h a = \\<lfloor>hU\\<rfloor>;\n         U = ty_of_htype hU\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  typeof_addr h a = \\<lfloor>hU\\<rfloor>\n  U = ty_of_htype hU\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       e1 = addr a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with WTrtCAS.hyps(3,4)"], ["proof (chain)\npicking this:\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C has F:T (fm) in D\n  typeof_addr h a = \\<lfloor>hU\\<rfloor>\n  U = ty_of_htype hU", "have adal: \"P,h \\<turnstile> a@CField D F : T\""], ["proof (prove)\nusing this:\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C has F:T (fm) in D\n  typeof_addr h a = \\<lfloor>hU\\<rfloor>\n  U = ty_of_htype hU\n\ngoal (1 subgoal):\n 1. P,h \\<turnstile> a@CField D F : T", "by(auto intro: addr_loc_type.intros)"], ["proof (state)\nthis:\n  P,h \\<turnstile> a@CField D F : T\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       e1 = addr a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "from heap_read_total[OF hconf this]"], ["proof (chain)\npicking this:\n  \\<exists>v.\n     heap_read h a (CField D F) v \\<and> P,h \\<turnstile> v :\\<le> T", "obtain v where v: \"heap_read h a (CField D F) v\""], ["proof (prove)\nusing this:\n  \\<exists>v.\n     heap_read h a (CField D F) v \\<and> P,h \\<turnstile> v :\\<le> T\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        heap_read h a (CField D F) v \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  heap_read h a (CField D F) v\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       e1 = addr a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(cases \"final e2\")"], ["proof (state)\ngoal (2 subgoals):\n 1. final e2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case e2: True"], ["proof (state)\nthis:\n  final e2\n\ngoal (2 subgoals):\n 1. final e2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(cases \"final e3\")"], ["proof (state)\ngoal (2 subgoals):\n 1. final e3 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e3 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case e3: True"], ["proof (state)\nthis:\n  final e3\n\ngoal (2 subgoals):\n 1. final e3 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e3 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "consider (Val2) v2 where \"e2 = Val v2\" | (Throw2) a2 where \"e2 = Throw a2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>v2. e2 = Val v2 \\<Longrightarrow> thesis;\n     \\<And>a2. e2 = Throw a2 \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "using e2"], ["proof (prove)\nusing this:\n  final e2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>v2. e2 = Val v2 \\<Longrightarrow> thesis;\n     \\<And>a2. e2 = Throw a2 \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by(auto simp add: final_iff)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<And>v2. e2 = Val v2 \\<Longrightarrow> ?thesis15;\n   \\<And>a2. e2 = Throw a2 \\<Longrightarrow> ?thesis15\\<rbrakk>\n  \\<Longrightarrow> ?thesis15\n\ngoal (2 subgoals):\n 1. final e3 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e3 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<And>v2. e2 = Val v2 \\<Longrightarrow> ?thesis15;\n   \\<And>a2. e2 = Throw a2 \\<Longrightarrow> ?thesis15\\<rbrakk>\n  \\<Longrightarrow> ?thesis15", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>v2. e2 = Val v2 \\<Longrightarrow> ?thesis15;\n   \\<And>a2. e2 = Throw a2 \\<Longrightarrow> ?thesis15\\<rbrakk>\n  \\<Longrightarrow> ?thesis15\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v2.\n       e2 = Val v2 \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a2.\n       e2 = Throw a2 \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "case Val2"], ["proof (state)\nthis:\n  e2 = Val v2\n\ngoal (2 subgoals):\n 1. \\<And>v2.\n       e2 = Val v2 \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a2.\n       e2 = Throw a2 \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "consider (Succeed) v3 where \"e3 = Val v3\" \"v2 = v\" \n              | (Fail) v3 where \"e3 = Val v3\" \"v2 \\<noteq> v\" \n              | (Throw3) a3 where \"e3 = Throw a3\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>v3.\n                \\<lbrakk>e3 = Val v3; v2 = v\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     \\<And>v3.\n        \\<lbrakk>e3 = Val v3; v2 \\<noteq> v\\<rbrakk>\n        \\<Longrightarrow> thesis;\n     \\<And>a3. e3 = Throw a3 \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "using e3"], ["proof (prove)\nusing this:\n  final e3\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>v3.\n                \\<lbrakk>e3 = Val v3; v2 = v\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     \\<And>v3.\n        \\<lbrakk>e3 = Val v3; v2 \\<noteq> v\\<rbrakk>\n        \\<Longrightarrow> thesis;\n     \\<And>a3. e3 = Throw a3 \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by(auto simp add: final_iff)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<And>v3.\n              \\<lbrakk>e3 = Val v3; v2 = v\\<rbrakk>\n              \\<Longrightarrow> ?thesis15;\n   \\<And>v3.\n      \\<lbrakk>e3 = Val v3; v2 \\<noteq> v\\<rbrakk>\n      \\<Longrightarrow> ?thesis15;\n   \\<And>a3. e3 = Throw a3 \\<Longrightarrow> ?thesis15\\<rbrakk>\n  \\<Longrightarrow> ?thesis15\n\ngoal (2 subgoals):\n 1. \\<And>v2.\n       e2 = Val v2 \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a2.\n       e2 = Throw a2 \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<And>v3.\n              \\<lbrakk>e3 = Val v3; v2 = v\\<rbrakk>\n              \\<Longrightarrow> ?thesis15;\n   \\<And>v3.\n      \\<lbrakk>e3 = Val v3; v2 \\<noteq> v\\<rbrakk>\n      \\<Longrightarrow> ?thesis15;\n   \\<And>a3. e3 = Throw a3 \\<Longrightarrow> ?thesis15\\<rbrakk>\n  \\<Longrightarrow> ?thesis15", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>v3.\n              \\<lbrakk>e3 = Val v3; v2 = v\\<rbrakk>\n              \\<Longrightarrow> ?thesis15;\n   \\<And>v3.\n      \\<lbrakk>e3 = Val v3; v2 \\<noteq> v\\<rbrakk>\n      \\<Longrightarrow> ?thesis15;\n   \\<And>a3. e3 = Throw a3 \\<Longrightarrow> ?thesis15\\<rbrakk>\n  \\<Longrightarrow> ?thesis15\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>v3.\n       \\<lbrakk>e3 = Val v3; v2 = v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>v3.\n       \\<lbrakk>e3 = Val v3; v2 \\<noteq> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>a3.\n       e3 = Throw a3 \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "case Succeed"], ["proof (state)\nthis:\n  e3 = Val v3\n  v2 = v\n\ngoal (3 subgoals):\n 1. \\<And>v3.\n       \\<lbrakk>e3 = Val v3; v2 = v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>v3.\n       \\<lbrakk>e3 = Val v3; v2 \\<noteq> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>a3.\n       e3 = Throw a3 \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with WTrtCAS.hyps(9,11) adal"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e3 : T3\n  P \\<turnstile> T3 \\<le> T\n  P,h \\<turnstile> a@CField D F : T\n  e3 = Val v3\n  v2 = v", "have \"P,h \\<turnstile> v3 :\\<le> T\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e3 : T3\n  P \\<turnstile> T3 \\<le> T\n  P,h \\<turnstile> a@CField D F : T\n  e3 = Val v3\n  v2 = v\n\ngoal (1 subgoal):\n 1. P,h \\<turnstile> v3 :\\<le> T", "by(auto simp add: conf_def)"], ["proof (state)\nthis:\n  P,h \\<turnstile> v3 :\\<le> T\n\ngoal (3 subgoals):\n 1. \\<And>v3.\n       \\<lbrakk>e3 = Val v3; v2 = v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>v3.\n       \\<lbrakk>e3 = Val v3; v2 \\<noteq> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>a3.\n       e3 = Throw a3 \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "from heap_write_total[OF hconf adal this]"], ["proof (chain)\npicking this:\n  \\<exists>h'. heap_write h a (CField D F) v3 h'", "obtain h' \n                where \"heap_write h a (CField D F) v3 h'\""], ["proof (prove)\nusing this:\n  \\<exists>h'. heap_write h a (CField D F) v3 h'\n\ngoal (1 subgoal):\n 1. (\\<And>h'.\n        heap_write h a (CField D F) v3 h' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  heap_write h a (CField D F) v3 h'\n\ngoal (3 subgoals):\n 1. \\<And>v3.\n       \\<lbrakk>e3 = Val v3; v2 = v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>v3.\n       \\<lbrakk>e3 = Val v3; v2 \\<noteq> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>a3.\n       e3 = Throw a3 \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with Val2 e1 v Succeed"], ["proof (chain)\npicking this:\n  e2 = Val v2\n  e1 = addr a\n  heap_read h a (CField D F) v\n  e3 = Val v3\n  v2 = v\n  heap_write h a (CField D F) v3 h'", "show ?thesis"], ["proof (prove)\nusing this:\n  e2 = Val v2\n  e1 = addr a\n  heap_read h a (CField D F) v\n  e3 = Val v3\n  v2 = v\n  heap_write h a (CField D F) v3 h'\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(auto intro: RedCASSucceed simp del: split_paired_Ex)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>v3.\n       \\<lbrakk>e3 = Val v3; v2 \\<noteq> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>a3.\n       e3 = Throw a3 \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v3.\n       \\<lbrakk>e3 = Val v3; v2 \\<noteq> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>a3.\n       e3 = Throw a3 \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "case Fail"], ["proof (state)\nthis:\n  e3 = Val v3\n  v2 \\<noteq> v\n\ngoal (2 subgoals):\n 1. \\<And>v3.\n       \\<lbrakk>e3 = Val v3; v2 \\<noteq> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>a3.\n       e3 = Throw a3 \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with Val2 e1 v"], ["proof (chain)\npicking this:\n  e2 = Val v2\n  e1 = addr a\n  heap_read h a (CField D F) v\n  e3 = Val v3\n  v2 \\<noteq> v", "show ?thesis"], ["proof (prove)\nusing this:\n  e2 = Val v2\n  e1 = addr a\n  heap_read h a (CField D F) v\n  e3 = Val v3\n  v2 \\<noteq> v\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(auto intro: RedCASFail simp del: split_paired_Ex)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a3.\n       e3 = Throw a3 \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a3.\n       e3 = Throw a3 \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "case Throw3"], ["proof (state)\nthis:\n  e3 = Throw a3\n\ngoal (1 subgoal):\n 1. \\<And>a3.\n       e3 = Throw a3 \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  e3 = Throw a3", "show ?thesis"], ["proof (prove)\nusing this:\n  e3 = Throw a3\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "using e1 Val2"], ["proof (prove)\nusing this:\n  e3 = Throw a3\n  e1 = addr a\n  e2 = Val v2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(auto intro: CASThrow3 simp del: split_paired_Ex)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a2.\n       e2 = Throw a2 \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a2.\n       e2 = Throw a2 \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "case Throw2"], ["proof (state)\nthis:\n  e2 = Throw a2\n\ngoal (1 subgoal):\n 1. \\<And>a2.\n       e2 = Throw a2 \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  e2 = Throw a2", "show ?thesis"], ["proof (prove)\nusing this:\n  e2 = Throw a2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "using e1"], ["proof (prove)\nusing this:\n  e2 = Throw a2\n  e1 = addr a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(auto intro: CASThrow2 simp del: split_paired_Ex)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e3 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e3 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case False"], ["proof (state)\nthis:\n  \\<not> final e3\n\ngoal (1 subgoal):\n 1. \\<not> final e3 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtCAS e1 e2"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : U\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C has F:T (fm) in D\n  volatile fm\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T2 \\<le> T\n  P,E,h \\<turnstile> e3 : T3\n  \\<lbrakk>\\<D> e3 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e3\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e3,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T3 \\<le> T\n  \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n   \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n  e1 = addr a\n  final e2\n  \\<not> final e3", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : U\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C has F:T (fm) in D\n  volatile fm\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T2 \\<le> T\n  P,E,h \\<turnstile> e3 : T3\n  \\<lbrakk>\\<D> e3 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e3\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e3,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T3 \\<le> T\n  \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n   \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n  e1 = addr a\n  final e2\n  \\<not> final e3\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce simp del: split_paired_Ex simp add: final_iff intro: CASRed3 CASThrow2)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case False"], ["proof (state)\nthis:\n  \\<not> final e2\n\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtCAS e1"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : U\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C has F:T (fm) in D\n  volatile fm\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T2 \\<le> T\n  P,E,h \\<turnstile> e3 : T3\n  \\<lbrakk>\\<D> e3 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e3\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e3,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T3 \\<le> T\n  \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n   \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n  e1 = addr a\n  \\<not> final e2", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : U\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C has F:T (fm) in D\n  volatile fm\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T2 \\<le> T\n  P,E,h \\<turnstile> e3 : T3\n  \\<lbrakk>\\<D> e3 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e3\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e3,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T3 \\<le> T\n  \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n   \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n  e1 = addr a\n  \\<not> final e2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: CASRed2 CASThrow2 simp del: split_paired_Ex)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "qed(fastforce intro: CASThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case False"], ["proof (state)\nthis:\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  \\<not> final e1", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "using WTrtCAS"], ["proof (prove)\nusing this:\n  \\<not> final e1\n  P,E,h \\<turnstile> e1 : U\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C has F:T (fm) in D\n  volatile fm\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T2 \\<le> T\n  P,E,h \\<turnstile> e3 : T3\n  \\<lbrakk>\\<D> e3 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e3\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e3,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T3 \\<le> T\n  \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n   \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: CASRed1)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (13 subgoals):\n 1. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e T T' l.\n        \\<lbrakk>P,E,h \\<turnstile> e : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T \\<le> Class Throwable;\n         \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (throw e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>throw e,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 13 subgoals...", "next"], ["proof (state)\ngoal (13 subgoals):\n 1. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e T T' l.\n        \\<lbrakk>P,E,h \\<turnstile> e : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T \\<le> Class Throwable;\n         \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (throw e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>throw e,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 13 subgoals...", "case (WTrtCASNT E e1 e2 T2 e3 T3 D F)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e1 : NT\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e3 : T3\n  \\<lbrakk>\\<D> e3 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e3\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e3,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n   \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n\ngoal (13 subgoals):\n 1. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e T T' l.\n        \\<lbrakk>P,E,h \\<turnstile> e : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T \\<le> Class Throwable;\n         \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (throw e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>throw e,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 13 subgoals...", "note [simp del] = split_paired_Ex"], ["proof (state)\nthis:\n  (\\<exists>x. ?P x) = (\\<exists>a b. ?P (a, b))\n\ngoal (13 subgoals):\n 1. \\<And>E e1 e2 T2 e3 T3 D F l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e3 : T3;\n        \\<And>l.\n           \\<lbrakk>\\<D> e3 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e3\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e3,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e T T' l.\n        \\<lbrakk>P,E,h \\<turnstile> e : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T \\<le> Class Throwable;\n         \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (throw e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>throw e,\n               (h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 13 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(cases \"final e1\")"], ["proof (state)\ngoal (2 subgoals):\n 1. final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case e1: True"], ["proof (state)\nthis:\n  final e1\n\ngoal (2 subgoals):\n 1. final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(cases \"final e2\")"], ["proof (state)\ngoal (2 subgoals):\n 1. final e2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case e2: True"], ["proof (state)\nthis:\n  final e2\n\ngoal (2 subgoals):\n 1. final e2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(cases \"final e3\")"], ["proof (state)\ngoal (2 subgoals):\n 1. final e3 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e3 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case True"], ["proof (state)\nthis:\n  final e3\n\ngoal (2 subgoals):\n 1. final e3 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e3 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with e1 e2 WTrtCASNT"], ["proof (chain)\npicking this:\n  final e1\n  final e2\n  P,E,h \\<turnstile> e1 : NT\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e3 : T3\n  \\<lbrakk>\\<D> e3 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e3\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e3,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n   \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n  final e3", "show ?thesis"], ["proof (prove)\nusing this:\n  final e1\n  final e2\n  P,E,h \\<turnstile> e1 : NT\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e3 : T3\n  \\<lbrakk>\\<D> e3 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e3\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e3,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n   \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n  final e3\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce simp add: final_iff intro: CASNull CASThrow CASThrow2 CASThrow3)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e3 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e3 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case False"], ["proof (state)\nthis:\n  \\<not> final e3\n\ngoal (1 subgoal):\n 1. \\<not> final e3 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with e1 e2 WTrtCASNT"], ["proof (chain)\npicking this:\n  final e1\n  final e2\n  P,E,h \\<turnstile> e1 : NT\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e3 : T3\n  \\<lbrakk>\\<D> e3 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e3\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e3,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n   \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n  \\<not> final e3", "show ?thesis"], ["proof (prove)\nusing this:\n  final e1\n  final e2\n  P,E,h \\<turnstile> e1 : NT\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e3 : T3\n  \\<lbrakk>\\<D> e3 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e3\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e3,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n   \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n  \\<not> final e3\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce simp add: final_iff intro: CASRed3 CASThrow CASThrow2)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case False"], ["proof (state)\nthis:\n  \\<not> final e2\n\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with e1 WTrtCASNT"], ["proof (chain)\npicking this:\n  final e1\n  P,E,h \\<turnstile> e1 : NT\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e3 : T3\n  \\<lbrakk>\\<D> e3 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e3\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e3,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n   \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n  \\<not> final e2", "show ?thesis"], ["proof (prove)\nusing this:\n  final e1\n  P,E,h \\<turnstile> e1 : NT\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e3 : T3\n  \\<lbrakk>\\<D> e3 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e3\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e3,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n   \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n  \\<not> final e2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce simp add: final_iff intro: CASRed2 CASThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case False"], ["proof (state)\nthis:\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtCASNT"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : NT\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e3 : T3\n  \\<lbrakk>\\<D> e3 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e3\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e3,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n   \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n  \\<not> final e1", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : NT\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e3 : T3\n  \\<lbrakk>\\<D> e3 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e3\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e3,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n   \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3))\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce simp add: final_iff intro: CASRed1)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1\\<bullet>compareAndSwap(D\\<bullet>F, e2, e3),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (12 subgoals):\n 1. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 T1 V C e2 T2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T1 \\<le> T2;\n         \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>try e1\n               catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 12 subgoals...", "next"], ["proof (state)\ngoal (12 subgoals):\n 1. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 T1 V C e2 T2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T1 \\<le> T2;\n         \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>try e1\n               catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 12 subgoals...", "case (WTrtCall E e U C M Ts T meth D es Ts' l)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : U\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D\n  P,E,h \\<turnstile> es [:] Ts'\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l15\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>es,\n         (h, ?l15)\\<rangle> [-ta\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\n  P \\<turnstile> Ts' [\\<le>] Ts\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n\ngoal (12 subgoals):\n 1. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 T1 V C e2 T2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T1 \\<le> T2;\n         \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>try e1\n               catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 12 subgoals...", "have wte: \"P,E,h \\<turnstile> e : U\" \n    and icto: \"class_type_of' U = \\<lfloor>C\\<rfloor>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h \\<turnstile> e : U &&& class_type_of' U = \\<lfloor>C\\<rfloor>", "by fact+"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : U\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n\ngoal (12 subgoals):\n 1. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 T1 V C e2 T2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T1 \\<le> T2;\n         \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>try e1\n               catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 12 subgoals...", "have IHe: \"\\<And>l. \\<lbrakk> \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e \\<rbrakk>\n             \\<Longrightarrow> \\<exists>e' s' tas. extTA,P,t \\<turnstile> \\<langle>e,(h, l)\\<rangle> -tas\\<rightarrow> \\<langle>e',s'\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>l.\n       \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' tas.\n                            extTA,P,t \\<turnstile> \\<langle>e,\n              (h, l)\\<rangle> -tas\\<rightarrow>\n             \\<langle>e',s'\\<rangle>", "by fact"], ["proof (state)\nthis:\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n\ngoal (12 subgoals):\n 1. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 T1 V C e2 T2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T1 \\<le> T2;\n         \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>try e1\n               catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 12 subgoals...", "have sees: \"P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D", "by fact"], ["proof (state)\nthis:\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D\n\ngoal (12 subgoals):\n 1. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 T1 V C e2 T2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T1 \\<le> T2;\n         \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>try e1\n               catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 12 subgoals...", "have wtes: \"P,E,h \\<turnstile> es [:] Ts'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h \\<turnstile> es [:] Ts'", "by fact"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> es [:] Ts'\n\ngoal (12 subgoals):\n 1. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 T1 V C e2 T2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T1 \\<le> T2;\n         \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>try e1\n               catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 12 subgoals...", "have IHes: \"\\<And>l. \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk> \\<Longrightarrow> \\<exists>es' s' ta. extTA,P,t \\<turnstile> \\<langle>es,(h, l)\\<rangle> [-ta\\<rightarrow>] \\<langle>es',s'\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>l.\n       \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "by fact"], ["proof (state)\nthis:\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l15\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>es,\n         (h, ?l15)\\<rangle> [-ta\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\n\ngoal (12 subgoals):\n 1. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 T1 V C e2 T2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T1 \\<le> T2;\n         \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>try e1\n               catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 12 subgoals...", "have subtype: \"P \\<turnstile> Ts' [\\<le>] Ts\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<turnstile> Ts' [\\<le>] Ts", "by fact"], ["proof (state)\nthis:\n  P \\<turnstile> Ts' [\\<le>] Ts\n\ngoal (12 subgoals):\n 1. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 T1 V C e2 T2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T1 \\<le> T2;\n         \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>try e1\n               catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 12 subgoals...", "have dae: \"\\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>", "by fact"], ["proof (state)\nthis:\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n\ngoal (12 subgoals):\n 1. \\<And>E e U C M Ts T meth D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : U;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        class_type_of' U = \\<lfloor>C\\<rfloor>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E e1 T1 V C e2 T2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e1,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e2,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T1 \\<le> T2;\n         \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>try e1\n               catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n              \\<langle>e',s'\\<rangle>\nA total of 12 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(cases \"final e\")"], ["proof (state)\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume fine: \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with wte icto"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : U\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : U\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (rule final_addrE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       e = addr a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       e = addr a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume e_addr: \"e = addr a\""], ["proof (state)\nthis:\n  e = addr a\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       e = addr a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(cases \"\\<exists>vs. es = map Val vs\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<exists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume es: \"\\<exists>vs. es = map Val vs\""], ["proof (state)\nthis:\n  \\<exists>vs. es = map Val vs\n\ngoal (2 subgoals):\n 1. \\<exists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "from wte e_addr"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : U\n  e = addr a", "obtain hU where ha: \"typeof_addr h a = \\<lfloor>hU\\<rfloor>\" \"U = ty_of_htype hU\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : U\n  e = addr a\n\ngoal (1 subgoal):\n 1. (\\<And>hU.\n        \\<lbrakk>typeof_addr h a = \\<lfloor>hU\\<rfloor>;\n         U = ty_of_htype hU\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(auto)"], ["proof (state)\nthis:\n  typeof_addr h a = \\<lfloor>hU\\<rfloor>\n  U = ty_of_htype hU\n\ngoal (2 subgoals):\n 1. \\<exists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "have \"length es = length Ts'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. length es = length Ts'", "using wtes"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> es [:] Ts'\n\ngoal (1 subgoal):\n 1. length es = length Ts'", "by(auto simp add: WTrts_conv_list_all2 dest: list_all2_lengthD)"], ["proof (state)\nthis:\n  length es = length Ts'\n\ngoal (2 subgoals):\n 1. \\<exists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "moreover"], ["proof (state)\nthis:\n  length es = length Ts'\n\ngoal (2 subgoals):\n 1. \\<exists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "from subtype"], ["proof (chain)\npicking this:\n  P \\<turnstile> Ts' [\\<le>] Ts", "have \"length Ts' = length Ts\""], ["proof (prove)\nusing this:\n  P \\<turnstile> Ts' [\\<le>] Ts\n\ngoal (1 subgoal):\n 1. length Ts' = length Ts", "by(auto dest: list_all2_lengthD)"], ["proof (state)\nthis:\n  length Ts' = length Ts\n\ngoal (2 subgoals):\n 1. \\<exists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  length es = length Ts'\n  length Ts' = length Ts", "have esTs: \"length es = length Ts\""], ["proof (prove)\nusing this:\n  length es = length Ts'\n  length Ts' = length Ts\n\ngoal (1 subgoal):\n 1. length es = length Ts", "by(auto)"], ["proof (state)\nthis:\n  length es = length Ts\n\ngoal (2 subgoals):\n 1. \\<exists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(cases meth)"], ["proof (state)\ngoal (2 subgoals):\n 1. meth = None \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       meth = \\<lfloor>a\\<rfloor> \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "case (Some pnsbody)"], ["proof (state)\nthis:\n  meth = \\<lfloor>pnsbody\\<rfloor>\n\ngoal (2 subgoals):\n 1. meth = None \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       meth = \\<lfloor>a\\<rfloor> \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with esTs e_addr ha sees subtype es sees_wf_mdecl[OF wf sees] icto"], ["proof (chain)\npicking this:\n  length es = length Ts\n  e = addr a\n  typeof_addr h a = \\<lfloor>hU\\<rfloor>\n  U = ty_of_htype hU\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D\n  P \\<turnstile> Ts' [\\<le>] Ts\n  \\<exists>vs. es = map Val vs\n  wf_mdecl wwf_J_mdecl P D (M, Ts, T, meth)\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  meth = \\<lfloor>pnsbody\\<rfloor>", "show ?thesis"], ["proof (prove)\nusing this:\n  length es = length Ts\n  e = addr a\n  typeof_addr h a = \\<lfloor>hU\\<rfloor>\n  U = ty_of_htype hU\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D\n  P \\<turnstile> Ts' [\\<le>] Ts\n  \\<exists>vs. es = map Val vs\n  wf_mdecl wwf_J_mdecl P D (M, Ts, T, meth)\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  meth = \\<lfloor>pnsbody\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(cases pnsbody) (fastforce intro!: RedCall simp:list_all2_iff wf_mdecl_def)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. meth = None \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. meth = None \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case None"], ["proof (state)\nthis:\n  meth = None\n\ngoal (1 subgoal):\n 1. meth = None \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with sees wf"], ["proof (chain)\npicking this:\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D\n  wwf_J_prog P\n  meth = None", "have \"D\\<bullet>M(Ts) :: T\""], ["proof (prove)\nusing this:\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D\n  wwf_J_prog P\n  meth = None\n\ngoal (1 subgoal):\n 1. D\\<bullet>M(Ts) :: T", "by(auto intro: sees_wf_native)"], ["proof (state)\nthis:\n  D\\<bullet>M(Ts) :: T\n\ngoal (1 subgoal):\n 1. meth = None \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "moreover"], ["proof (state)\nthis:\n  D\\<bullet>M(Ts) :: T\n\ngoal (1 subgoal):\n 1. meth = None \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "from es"], ["proof (chain)\npicking this:\n  \\<exists>vs. es = map Val vs", "obtain vs where vs: \"es = map Val vs\""], ["proof (prove)\nusing this:\n  \\<exists>vs. es = map Val vs\n\ngoal (1 subgoal):\n 1. (\\<And>vs. es = map Val vs \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  es = map Val vs\n\ngoal (1 subgoal):\n 1. meth = None \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with wtes"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> es [:] Ts'\n  es = map Val vs", "have tyes: \"map typeof\\<^bsub>h\\<^esub> vs = map Some Ts'\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> es [:] Ts'\n  es = map Val vs\n\ngoal (1 subgoal):\n 1. map typeof\\<^bsub>h\\<^esub> vs = map Some Ts'", "by simp"], ["proof (state)\nthis:\n  map typeof\\<^bsub>h\\<^esub> vs = map Some Ts'\n\ngoal (1 subgoal):\n 1. meth = None \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with ha \\<open>D\\<bullet>M(Ts) :: T\\<close> icto sees None"], ["proof (chain)\npicking this:\n  typeof_addr h a = \\<lfloor>hU\\<rfloor>\n  U = ty_of_htype hU\n  D\\<bullet>M(Ts) :: T\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D\n  meth = None\n  map typeof\\<^bsub>h\\<^esub> vs = map Some Ts'", "have \"P,h \\<turnstile> a\\<bullet>M(vs) : T\""], ["proof (prove)\nusing this:\n  typeof_addr h a = \\<lfloor>hU\\<rfloor>\n  U = ty_of_htype hU\n  D\\<bullet>M(Ts) :: T\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D\n  meth = None\n  map typeof\\<^bsub>h\\<^esub> vs = map Some Ts'\n\ngoal (1 subgoal):\n 1. P,h \\<turnstile> a\\<bullet>M(vs) : T", "using subtype"], ["proof (prove)\nusing this:\n  typeof_addr h a = \\<lfloor>hU\\<rfloor>\n  U = ty_of_htype hU\n  D\\<bullet>M(Ts) :: T\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D\n  meth = None\n  map typeof\\<^bsub>h\\<^esub> vs = map Some Ts'\n  P \\<turnstile> Ts' [\\<le>] Ts\n\ngoal (1 subgoal):\n 1. P,h \\<turnstile> a\\<bullet>M(vs) : T", "by(auto simp add: external_WT'_iff)"], ["proof (state)\nthis:\n  P,h \\<turnstile> a\\<bullet>M(vs) : T\n\ngoal (1 subgoal):\n 1. meth = None \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "from external_call_progress[OF wf this hconf, of t]"], ["proof (chain)\npicking this:\n  \\<exists>ta va h'.\n     P,t \\<turnstile> \\<langle>a\\<bullet>M(vs),\n                      h\\<rangle> -ta\\<rightarrow>ext \\<langle>va,h'\\<rangle>", "obtain ta va h'\n            where \"P,t \\<turnstile> \\<langle>a\\<bullet>M(vs), h\\<rangle> -ta\\<rightarrow>ext \\<langle>va, h'\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<exists>ta va h'.\n     P,t \\<turnstile> \\<langle>a\\<bullet>M(vs),\n                      h\\<rangle> -ta\\<rightarrow>ext \\<langle>va,h'\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>ta va h'.\n        P,t \\<turnstile> \\<langle>a\\<bullet>M(vs),\n                         h\\<rangle> -ta\\<rightarrow>ext \\<langle>va,\n                  h'\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  P,t \\<turnstile> \\<langle>a\\<bullet>M(vs),\n                   h\\<rangle> -ta\\<rightarrow>ext \\<langle>va,h'\\<rangle>\n\ngoal (1 subgoal):\n 1. meth = None \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  P,t \\<turnstile> \\<langle>a\\<bullet>M(vs),\n                   h\\<rangle> -ta\\<rightarrow>ext \\<langle>va,h'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "using ha icto None sees vs e_addr"], ["proof (prove)\nusing this:\n  P,t \\<turnstile> \\<langle>a\\<bullet>M(vs),\n                   h\\<rangle> -ta\\<rightarrow>ext \\<langle>va,h'\\<rangle>\n  typeof_addr h a = \\<lfloor>hU\\<rfloor>\n  U = ty_of_htype hU\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  meth = None\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D\n  es = map Val vs\n  e = addr a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: RedCallExternal simp del: split_paired_Ex)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not>(\\<exists>vs. es = map Val vs)\""], ["proof (state)\nthis:\n  \\<nexists>vs. es = map Val vs\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "hence not_all_Val: \"\\<not>(\\<forall>e \\<in> set es. \\<exists>v. e = Val v)\""], ["proof (prove)\nusing this:\n  \\<nexists>vs. es = map Val vs\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>e\\<in>set es. \\<exists>v. e = Val v)", "by(simp add:ex_map_conv)"], ["proof (state)\nthis:\n  \\<not> (\\<forall>e\\<in>set es. \\<exists>v. e = Val v)\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "let ?ves = \"takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "let ?rest = \"dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "let ?ex = \"hd ?rest\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "let ?rst = \"tl ?rest\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "from not_all_Val"], ["proof (chain)\npicking this:\n  \\<not> (\\<forall>e\\<in>set es. \\<exists>v. e = Val v)", "have nonempty: \"?rest \\<noteq> []\""], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>e\\<in>set es. \\<exists>v. e = Val v)\n\ngoal (1 subgoal):\n 1. dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es \\<noteq> []", "by auto"], ["proof (state)\nthis:\n  dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es \\<noteq> []\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "hence es: \"es = ?ves @ ?ex # ?rst\""], ["proof (prove)\nusing this:\n  dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es \\<noteq> []\n\ngoal (1 subgoal):\n 1. es =\n    takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n    hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)", "by simp"], ["proof (state)\nthis:\n  es =\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n  hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n  tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "have \"\\<forall>e \\<in> set ?ves. \\<exists>v. e = Val v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>e\\<in>set (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es).\n       \\<exists>v. e = Val v", "by(fastforce dest:set_takeWhileD)"], ["proof (state)\nthis:\n  \\<forall>e\\<in>set (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es).\n     \\<exists>v. e = Val v\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  \\<forall>e\\<in>set (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es).\n     \\<exists>v. e = Val v", "obtain vs where ves: \"?ves = map Val vs\""], ["proof (prove)\nusing this:\n  \\<forall>e\\<in>set (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es).\n     \\<exists>v. e = Val v\n\ngoal (1 subgoal):\n 1. (\\<And>vs.\n        takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es =\n        map Val vs \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using ex_map_conv"], ["proof (prove)\nusing this:\n  \\<forall>e\\<in>set (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es).\n     \\<exists>v. e = Val v\n  (\\<exists>xs. ?ys = map ?f xs) =\n  (\\<forall>y\\<in>set ?ys. \\<exists>x. y = ?f x)\n\ngoal (1 subgoal):\n 1. (\\<And>vs.\n        takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es =\n        map Val vs \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es = map Val vs\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"final ?ex\""], ["proof (state)\nthis:\n  final (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "moreover"], ["proof (state)\nthis:\n  final (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "from nonempty"], ["proof (chain)\npicking this:\n  dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es \\<noteq> []", "have \"\\<not>(\\<exists>v. ?ex = Val v)\""], ["proof (prove)\nusing this:\n  dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es \\<noteq> []\n\ngoal (1 subgoal):\n 1. \\<nexists>v.\n       hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Val v", "by(auto simp:neq_Nil_conv simp del:dropWhile_eq_Nil_conv)\n              (simp add:dropWhile_eq_Cons_conv)"], ["proof (state)\nthis:\n  \\<nexists>v. hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Val v\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  final (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n  \\<nexists>v. hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Val v", "obtain b where ex_Throw: \"?ex = Throw b\""], ["proof (prove)\nusing this:\n  final (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n  \\<nexists>v. hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Val v\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) =\n        Throw b \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by(fast elim!:finalE)"], ["proof (state)\nthis:\n  hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Throw b\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "using e_addr es ex_Throw ves"], ["proof (prove)\nusing this:\n  e = addr a\n  es =\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n  hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n  tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)\n  hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Throw b\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es = map Val vs\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro:CallThrowParams)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume not_fin: \"\\<not> final ?ex\""], ["proof (state)\nthis:\n  \\<not> final (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "have \"finals es = finals(?ves @ ?ex # ?rst)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finals es =\n    finals\n     (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n      hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "using es"], ["proof (prove)\nusing this:\n  es =\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n  hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n  tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)\n\ngoal (1 subgoal):\n 1. finals es =\n    finals\n     (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n      hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "by(rule arg_cong)"], ["proof (state)\nthis:\n  finals es =\n  finals\n   (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n    hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "also"], ["proof (state)\nthis:\n  finals es =\n  finals\n   (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n    hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "have \"\\<dots> = finals(?ex # ?rst)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finals\n     (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n      hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)) =\n    finals\n     (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "using ves"], ["proof (prove)\nusing this:\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es = map Val vs\n\ngoal (1 subgoal):\n 1. finals\n     (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n      hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)) =\n    finals\n     (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "by simp"], ["proof (state)\nthis:\n  finals\n   (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n    hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)) =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "finally"], ["proof (chain)\npicking this:\n  finals es =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "have \"finals es = finals(?ex # ?rst)\""], ["proof (prove)\nusing this:\n  finals es =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. finals es =\n    finals\n     (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "."], ["proof (state)\nthis:\n  finals es =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "hence \"\\<not> finals es\""], ["proof (prove)\nusing this:\n  finals es =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> finals es", "using not_finals_ConsI[OF not_fin]"], ["proof (prove)\nusing this:\n  finals es =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n  \\<not> finals\n          (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) # ?es)\n\ngoal (1 subgoal):\n 1. \\<not> finals es", "by blast"], ["proof (state)\nthis:\n  \\<not> finals es\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<not> finals es\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "using e_addr dae IHes"], ["proof (prove)\nusing this:\n  \\<not> finals es\n  e = addr a\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l15\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>es,\n         (h, ?l15)\\<rangle> [-ta\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro!:CallParams)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"e = Throw a\""], ["proof (state)\nthis:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fast intro!:CallThrowObj)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtCall"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : U\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D\n  P,E,h \\<turnstile> es [:] Ts'\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l15\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>es,\n         (h, ?l15)\\<rangle> [-ta\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\n  P \\<turnstile> Ts' [\\<le>] Ts\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : U\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  class_type_of' U = \\<lfloor>C\\<rfloor>\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = meth in D\n  P,E,h \\<turnstile> es [:] Ts'\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l15\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>es,\n         (h, ?l15)\\<rangle> [-ta\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\n  P \\<turnstile> Ts' [\\<le>] Ts\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(simp del: split_paired_Ex)(blast intro!:CallObj)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (11 subgoals):\n 1. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E l.\n        \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>[],\n               (h, l)\\<rangle> [-ta\\<rightarrow>]\n              \\<langle>es',s'\\<rangle>\nA total of 11 subgoals...", "next"], ["proof (state)\ngoal (11 subgoals):\n 1. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E l.\n        \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>[],\n               (h, l)\\<rangle> [-ta\\<rightarrow>]\n              \\<langle>es',s'\\<rangle>\nA total of 11 subgoals...", "case (WTrtCallNT E e es Ts M T l)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l15\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>es,\n         (h, ?l15)\\<rangle> [-ta\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n\ngoal (11 subgoals):\n 1. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E l.\n        \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>[],\n               (h, l)\\<rangle> [-ta\\<rightarrow>]\n              \\<langle>es',s'\\<rangle>\nA total of 11 subgoals...", "have wte: \"P,E,h \\<turnstile> e : NT\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h \\<turnstile> e : NT", "by fact"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : NT\n\ngoal (11 subgoals):\n 1. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E l.\n        \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>[],\n               (h, l)\\<rangle> [-ta\\<rightarrow>]\n              \\<langle>es',s'\\<rangle>\nA total of 11 subgoals...", "have IHe: \"\\<And>l. \\<lbrakk> \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e \\<rbrakk>\n             \\<Longrightarrow> \\<exists>e' s' tas. extTA,P,t \\<turnstile> \\<langle>e,(h, l)\\<rangle> -tas\\<rightarrow> \\<langle>e',s'\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>l.\n       \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' tas.\n                            extTA,P,t \\<turnstile> \\<langle>e,\n              (h, l)\\<rangle> -tas\\<rightarrow>\n             \\<langle>e',s'\\<rangle>", "by fact"], ["proof (state)\nthis:\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n\ngoal (11 subgoals):\n 1. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E l.\n        \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>[],\n               (h, l)\\<rangle> [-ta\\<rightarrow>]\n              \\<langle>es',s'\\<rangle>\nA total of 11 subgoals...", "have IHes: \"\\<And>l. \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk> \\<Longrightarrow> \\<exists>es' s' ta. extTA,P,t \\<turnstile> \\<langle>es,(h, l)\\<rangle> [-ta\\<rightarrow>] \\<langle>es',s'\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>l.\n       \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "by fact"], ["proof (state)\nthis:\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l15\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>es,\n         (h, ?l15)\\<rangle> [-ta\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\n\ngoal (11 subgoals):\n 1. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E l.\n        \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>[],\n               (h, l)\\<rangle> [-ta\\<rightarrow>]\n              \\<langle>es',s'\\<rangle>\nA total of 11 subgoals...", "have wtes: \"P,E,h \\<turnstile> es [:] Ts\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h \\<turnstile> es [:] Ts", "by fact"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> es [:] Ts\n\ngoal (11 subgoals):\n 1. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E l.\n        \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>[],\n               (h, l)\\<rangle> [-ta\\<rightarrow>]\n              \\<langle>es',s'\\<rangle>\nA total of 11 subgoals...", "have dae: \"\\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>", "by fact"], ["proof (state)\nthis:\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n\ngoal (11 subgoals):\n 1. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 10. \\<And>E l.\n        \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>[],\n               (h, l)\\<rangle> [-ta\\<rightarrow>]\n              \\<langle>es',s'\\<rangle>\nA total of 11 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(cases \"final e\")"], ["proof (state)\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "moreover"], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "{"], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"e = Val v\""], ["proof (state)\nthis:\n  e = Val v\n\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "hence \"e = null\""], ["proof (prove)\nusing this:\n  e = Val v\n\ngoal (1 subgoal):\n 1. e = null", "using WTrtCallNT"], ["proof (prove)\nusing this:\n  e = Val v\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l15\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>es,\n         (h, ?l15)\\<rangle> [-ta\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n\ngoal (1 subgoal):\n 1. e = null", "by simp"], ["proof (state)\nthis:\n  e = null\n\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "have ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"finals es\""], ["proof (state)\nthis:\n  finals es\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "moreover"], ["proof (state)\nthis:\n  finals es\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "{"], ["proof (state)\nthis:\n  finals es\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "fix vs"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"es = map Val vs\""], ["proof (state)\nthis:\n  es = map Val vs\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtCallNT \\<open>e = null\\<close> \\<open>finals es\\<close>"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l15\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>es,\n         (h, ?l15)\\<rangle> [-ta\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  e = null\n  finals es\n  es = map Val vs", "have ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l15\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>es,\n         (h, ?l15)\\<rangle> [-ta\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  e = null\n  finals es\n  es = map Val vs\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: RedCallNull)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "}"], ["proof (state)\nthis:\n  es = map Val ?vs17 \\<Longrightarrow>\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "moreover"], ["proof (state)\nthis:\n  es = map Val ?vs17 \\<Longrightarrow>\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "{"], ["proof (state)\nthis:\n  es = map Val ?vs17 \\<Longrightarrow>\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "fix vs a es'"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"es = map Val vs @ Throw a # es'\""], ["proof (state)\nthis:\n  es = map Val vs @ Throw a # es'\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtCallNT \\<open>e = null\\<close> \\<open>finals es\\<close>"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l15\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>es,\n         (h, ?l15)\\<rangle> [-ta\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  e = null\n  finals es\n  es = map Val vs @ Throw a # es'", "have ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l15\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>es,\n         (h, ?l15)\\<rangle> [-ta\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  e = null\n  finals es\n  es = map Val vs @ Throw a # es'\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: CallThrowParams)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "}"], ["proof (state)\nthis:\n  es = map Val ?vs17 @ Throw ?a17 # ?es'17 \\<Longrightarrow>\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  finals es\n  es = map Val ?vs17 \\<Longrightarrow>\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n  es = map Val ?vs17 @ Throw ?a17 # ?es'17 \\<Longrightarrow>\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  finals es\n  es = map Val ?vs17 \\<Longrightarrow>\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n  es = map Val ?vs17 @ Throw ?a17 # ?es'17 \\<Longrightarrow>\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce simp:finals_iff)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> finals es \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> finals es \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> finals es\" \\<comment> \\<open>@{term es} reduces by IH\\<close>"], ["proof (state)\nthis:\n  \\<not> finals es\n\ngoal (1 subgoal):\n 1. \\<not> finals es \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtCallNT \\<open>e = null\\<close>"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l15\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>es,\n         (h, ?l15)\\<rangle> [-ta\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  e = null\n  \\<not> finals es", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l15\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>es,\n         (h, ?l15)\\<rangle> [-ta\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  e = null\n  \\<not> finals es\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: CallParams)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "}"], ["proof (state)\nthis:\n  e = Val ?v17 \\<Longrightarrow>\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "moreover"], ["proof (state)\nthis:\n  e = Val ?v17 \\<Longrightarrow>\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "{"], ["proof (state)\nthis:\n  e = Val ?v17 \\<Longrightarrow>\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"e = Throw a\""], ["proof (state)\nthis:\n  e = Throw a\n\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtCallNT"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l15\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>es,\n         (h, ?l15)\\<rangle> [-ta\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  e = Throw a", "have ?case"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l15\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>es,\n         (h, ?l15)\\<rangle> [-ta\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: CallThrowObj)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "}"], ["proof (state)\nthis:\n  e = Throw ?a17 \\<Longrightarrow>\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  final e\n  e = Val ?v17 \\<Longrightarrow>\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n  e = Throw ?a17 \\<Longrightarrow>\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  final e\n  e = Val ?v17 \\<Longrightarrow>\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n  e = Throw ?a17 \\<Longrightarrow>\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce simp:final_iff)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\" \\<comment> \\<open>@{term e} reduces by IH\\<close>"], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtCallNT"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l15\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>es,\n         (h, ?l15)\\<rangle> [-ta\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l15\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>es,\n         (h, ?l15)\\<rangle> [-ta\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by (fastforce intro:CallObj)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e\\<bullet>M(es),\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (10 subgoals):\n 1. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 10. \\<And>E e T es Ts l.\n        \\<lbrakk>P,E,h \\<turnstile> e : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> es [:] Ts;\n         \\<And>l.\n            \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n             \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>es,\n                   (h, l)\\<rangle> [-ta\\<rightarrow>]\n                  \\<langle>es',s'\\<rangle>;\n         \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n         \\<not> finals (e # es)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e # es,\n               (h, l)\\<rangle> [-ta\\<rightarrow>]\n              \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (10 subgoals):\n 1. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 10. \\<And>E e T es Ts l.\n        \\<lbrakk>P,E,h \\<turnstile> e : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> es [:] Ts;\n         \\<And>l.\n            \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n             \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>es,\n                   (h, l)\\<rangle> [-ta\\<rightarrow>]\n                  \\<langle>es',s'\\<rangle>;\n         \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n         \\<not> finals (e # es)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e # es,\n               (h, l)\\<rangle> [-ta\\<rightarrow>]\n              \\<langle>es',s'\\<rangle>", "case (WTrtBlock E V T e T' vo l)"], ["proof (state)\nthis:\n  P,E(V \\<mapsto> T),h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  case vo of None \\<Rightarrow> True\n  | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n      \\<exists>T'.\n         typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n         P \\<turnstile> T' \\<le> T\n  \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>\n  \\<not> final {V:T=vo; e}\n\ngoal (10 subgoals):\n 1. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 10. \\<And>E e T es Ts l.\n        \\<lbrakk>P,E,h \\<turnstile> e : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> es [:] Ts;\n         \\<And>l.\n            \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n             \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>es,\n                   (h, l)\\<rangle> [-ta\\<rightarrow>]\n                  \\<langle>es',s'\\<rangle>;\n         \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n         \\<not> finals (e # es)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e # es,\n               (h, l)\\<rangle> [-ta\\<rightarrow>]\n              \\<langle>es',s'\\<rangle>", "have IH: \"\\<And>l. \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n                 \\<Longrightarrow> \\<exists>e' s' tas. extTA,P,t \\<turnstile> \\<langle>e,(h,l)\\<rangle> -tas\\<rightarrow> \\<langle>e',s'\\<rangle>\"\n   and D: \"\\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>l.\n        \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s' tas.\n                             extTA,P,t \\<turnstile> \\<langle>e,\n               (h, l)\\<rangle> -tas\\<rightarrow>\n              \\<langle>e',s'\\<rangle>) &&&\n    \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>", "by fact+"], ["proof (state)\nthis:\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>\n\ngoal (10 subgoals):\n 1. \\<And>E V T e T' vo l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        case vo of None \\<Rightarrow> True\n        | \\<lfloor>v\\<rfloor> \\<Rightarrow>\n            \\<exists>T'.\n               typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'\\<rfloor> \\<and>\n               P \\<turnstile> T' \\<le> T;\n        \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T=vo; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 9. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 10. \\<And>E e T es Ts l.\n        \\<lbrakk>P,E,h \\<turnstile> e : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>e,\n                   (h, l)\\<rangle> -ta\\<rightarrow>\n                  \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> es [:] Ts;\n         \\<And>l.\n            \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n             \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s' ta.\n                                 extTA,P,t \\<turnstile> \\<langle>es,\n                   (h, l)\\<rangle> [-ta\\<rightarrow>]\n                  \\<langle>es',s'\\<rangle>;\n         \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n         \\<not> finals (e # es)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s' ta.\n                             extTA,P,t \\<turnstile> \\<langle>e # es,\n               (h, l)\\<rangle> [-ta\\<rightarrow>]\n              \\<langle>es',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"e = Val v\""], ["proof (state)\nthis:\n  e = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e = Val v\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fast intro:RedBlock)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"e = Throw a\""], ["proof (state)\nthis:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fast intro:BlockThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume not_fin: \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "from D"], ["proof (chain)\npicking this:\n  \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>", "have De: \"\\<D> e \\<lfloor>dom(l(V:=vo))\\<rfloor>\""], ["proof (prove)\nusing this:\n  \\<D> {V:T=vo; e} \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> e \\<lfloor>dom (l(V := vo))\\<rfloor>", "by(auto simp add:hyperset_defs)"], ["proof (state)\nthis:\n  \\<D> e \\<lfloor>dom (l(V := vo))\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "from IH[OF De not_fin]"], ["proof (chain)\npicking this:\n  \\<exists>e' s' tas.\n     extTA,P,t \\<turnstile> \\<langle>e,\n                             (h, l(V := vo))\\<rangle> -tas\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>", "obtain h' l' e' tas where red: \"extTA,P,t \\<turnstile> \\<langle>e,(h,l(V:=vo))\\<rangle> -tas\\<rightarrow> \\<langle>e',(h',l')\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<exists>e' s' tas.\n     extTA,P,t \\<turnstile> \\<langle>e,\n                             (h, l(V := vo))\\<rangle> -tas\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>tas e' h' l'.\n        extTA,P,t \\<turnstile> \\<langle>e,\n                                (h, l(V := vo))\\<rangle> -tas\\<rightarrow>\n                               \\<langle>e',\n                                (h', l')\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  extTA,P,t \\<turnstile> \\<langle>e,\n                          (h, l(V := vo))\\<rangle> -tas\\<rightarrow>\n                         \\<langle>e',(h', l')\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  extTA,P,t \\<turnstile> \\<langle>e,\n                          (h, l(V := vo))\\<rangle> -tas\\<rightarrow>\n                         \\<langle>e',(h', l')\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(blast intro: BlockRed)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>{V:T=vo; e},\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (9 subgoals):\n 1. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 9. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (9 subgoals):\n 1. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 9. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "case (WTrtSynchronized E o' T e T' l)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> o' : T\n  \\<lbrakk>\\<D> o' \\<lfloor>dom ?l15\\<rfloor>; \\<not> final o'\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>o',\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  is_refT T\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (sync(o') e)\n\ngoal (9 subgoals):\n 1. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 9. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "note wto = \\<open>P,E,h \\<turnstile> o' : T\\<close>"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> o' : T\n\ngoal (9 subgoals):\n 1. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 9. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "note IHe = \\<open>\\<And>l. \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e \\<rbrakk> \\<Longrightarrow> \\<exists>e' s' tas. extTA,P,t \\<turnstile> \\<langle>e,(h, l)\\<rangle> -tas\\<rightarrow> \\<langle>e',s'\\<rangle>\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n\ngoal (9 subgoals):\n 1. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 9. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "note wte = \\<open>P,E,h \\<turnstile> e : T'\\<close>"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : T'\n\ngoal (9 subgoals):\n 1. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 9. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "note IHo = \\<open>\\<And>l. \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>; \\<not> final o' \\<rbrakk> \\<Longrightarrow> \\<exists>e' s' tas. extTA,P,t \\<turnstile> \\<langle>o',(h, l)\\<rangle> -tas\\<rightarrow> \\<langle>e',s'\\<rangle>\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>\\<D> o' \\<lfloor>dom ?l\\<rfloor>; \\<not> final o'\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>o',\n         (h, ?l)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n\ngoal (9 subgoals):\n 1. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 9. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "note refT = \\<open>is_refT T\\<close>"], ["proof (state)\nthis:\n  is_refT T\n\ngoal (9 subgoals):\n 1. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 9. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "note dae = \\<open>\\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>\\<close>"], ["proof (state)\nthis:\n  \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>\n\ngoal (9 subgoals):\n 1. \\<And>E o' T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> o' \\<lfloor>dom l\\<rfloor>;\n            \\<not> final o'\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>o',\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        is_refT T; P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (sync(o') e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 8. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 9. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(cases \"final o'\")"], ["proof (state)\ngoal (2 subgoals):\n 1. final o' \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final o' \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume fino: \"final o'\""], ["proof (state)\nthis:\n  final o'\n\ngoal (2 subgoals):\n 1. final o' \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final o' \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final o'\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       o' = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       o' = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       o' = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       o' = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume oval: \"o' = Val v\""], ["proof (state)\nthis:\n  o' = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       o' = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       o' = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with wto refT"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> o' : T\n  is_refT T\n  o' = Val v", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> o' : T\n  is_refT T\n  o' = Val v\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(cases \"v\")"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n     v = Unit\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n     v = Null\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 3. \\<And>x3.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n        v = Bool x3\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>x4.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n        v = Intg x4\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>x5.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n        v = Addr x5\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>", "assume vnull: \"v = Null\""], ["proof (state)\nthis:\n  v = Null\n\ngoal (5 subgoals):\n 1. \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n     v = Unit\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n     v = Null\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 3. \\<And>x3.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n        v = Bool x3\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>x4.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n        v = Intg x4\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>x5.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n        v = Addr x5\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>", "with oval vnull"], ["proof (chain)\npicking this:\n  o' = Val v\n  v = Null\n  v = Null", "show ?thesis"], ["proof (prove)\nusing this:\n  o' = Val v\n  v = Null\n  v = Null\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: SynchronizedNull)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n     v = Unit\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<And>x3.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n        v = Bool x3\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>x4.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n        v = Intg x4\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>x5.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n        v = Addr x5\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n     v = Unit\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<And>x3.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n        v = Bool x3\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>x4.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n        v = Intg x4\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>x5.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n        v = Addr x5\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>", "fix ad"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n     v = Unit\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<And>x3.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n        v = Bool x3\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>x4.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n        v = Intg x4\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>x5.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n        v = Addr x5\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>", "assume vaddr: \"v = Addr ad\""], ["proof (state)\nthis:\n  v = Addr ad\n\ngoal (4 subgoals):\n 1. \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n     v = Unit\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<And>x3.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n        v = Bool x3\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>x4.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n        v = Intg x4\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>x5.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n        v = Addr x5\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  v = Addr ad\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "using oval"], ["proof (prove)\nusing this:\n  v = Addr ad\n  o' = Val v\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: LockSynchronized)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n     v = Unit\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s' ta.\n                         extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n           (h, l)\\<rangle> -ta\\<rightarrow>\n          \\<langle>e',s'\\<rangle>\n 2. \\<And>x3.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n        v = Bool x3\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>x4.\n       \\<lbrakk>P,E,h \\<turnstile> o' : T; is_refT T; o' = Val v;\n        v = Intg x4\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>", "qed(auto elim: refTE)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       o' = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       o' = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       o' = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume othrow: \"o' = Throw a\""], ["proof (state)\nthis:\n  o' = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       o' = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  o' = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: SynchronizedThrow1)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final o' \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final o' \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume nfino: \"\\<not> final o'\""], ["proof (state)\nthis:\n  \\<not> final o'\n\ngoal (1 subgoal):\n 1. \\<not> final o' \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with dae IHo"], ["proof (chain)\npicking this:\n  \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>\n  \\<lbrakk>\\<D> o' \\<lfloor>dom ?l\\<rfloor>; \\<not> final o'\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>o',\n         (h, ?l)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<not> final o'", "show ?case"], ["proof (prove)\nusing this:\n  \\<D> (sync(o') e) \\<lfloor>dom l\\<rfloor>\n  \\<lbrakk>\\<D> o' \\<lfloor>dom ?l\\<rfloor>; \\<not> final o'\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>o',\n         (h, ?l)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<not> final o'\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: SynchronizedRed1)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>sync(o') e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (8 subgoals):\n 1. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 8. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (8 subgoals):\n 1. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 8. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "case (WTrtInSynchronized E a T e T' l)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> addr a : T\n  \\<lbrakk>\\<D> (addr a) \\<lfloor>dom ?l15\\<rfloor>;\n   \\<not> final (addr a)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>addr a,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (insync(a) e)\n\ngoal (8 subgoals):\n 1. \\<And>E a T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> addr a : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (addr a) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (addr a)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>addr a,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (insync(a) e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 7. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 8. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(cases \"final e\")"], ["proof (state)\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case True"], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce elim!: finalE intro: UnlockSynchronized SynchronizedThrow2)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case False"], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "from \\<open>\\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>\\<close>"], ["proof (chain)\npicking this:\n  \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>", "have \"\\<D> e \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\nusing this:\n  \\<D> (insync(a) e) \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> e \\<lfloor>dom l\\<rfloor>", "by simp"], ["proof (state)\nthis:\n  \\<D> e \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<D> e \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "note IHe = \\<open>\\<And>l. \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk> \\<Longrightarrow> \\<exists>e' s' tas. extTA,P,t \\<turnstile> \\<langle>e,(h, l)\\<rangle> -tas\\<rightarrow> \\<langle>e',s'\\<rangle>\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  \\<not> final e\n  \\<D> e \\<lfloor>dom l\\<rfloor>\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> final e\n  \\<D> e \\<lfloor>dom l\\<rfloor>\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' tas.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l)\\<rangle> -tas\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: SynchronizedRed2)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>insync(a) e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (7 subgoals):\n 1. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 7. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (7 subgoals):\n 1. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 7. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "case (WTrtSeq E e1 T1 e2 T2 l)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1;; e2)\n\ngoal (7 subgoals):\n 1. \\<And>E e1 T1 e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e1;; e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 6. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 7. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"final e1\""], ["proof (state)\nthis:\n  final e1\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fast elim:finalE intro:intro:RedSeq SeqThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e1\""], ["proof (state)\nthis:\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtSeq"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1;; e2)\n  \\<not> final e1", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1;; e2)\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(simp del: split_paired_Ex)(blast intro!:SeqRed)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e1;; e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (6 subgoals):\n 1. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 6. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 6. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "case (WTrtCond E e e1 T1 e2 T2 T l)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : Boolean\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> lub(T1, T2) = T\n  \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (if (e) e1 else e2)\n\ngoal (6 subgoals):\n 1. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 6. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "have wt: \"P,E,h \\<turnstile> e : Boolean\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h \\<turnstile> e : Boolean", "by fact"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : Boolean\n\ngoal (6 subgoals):\n 1. \\<And>E e e1 T1 e2 T2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> lub(T1, T2) = T;\n        \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e1 else e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>if (e) e1\n              else e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 5. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 6. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume val: \"e = Val v\""], ["proof (state)\nthis:\n  e = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  e = Val v", "obtain b where v: \"v = Bool b\""], ["proof (prove)\nusing this:\n  e = Val v\n\ngoal (1 subgoal):\n 1. (\\<And>b. v = Bool b \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using wt"], ["proof (prove)\nusing this:\n  e = Val v\n  P,E,h \\<turnstile> e : Boolean\n\ngoal (1 subgoal):\n 1. (\\<And>b. v = Bool b \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  v = Bool b\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (cases b)"], ["proof (state)\ngoal (2 subgoals):\n 1. b \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> b \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case True"], ["proof (state)\nthis:\n  b\n\ngoal (2 subgoals):\n 1. b \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> b \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with val v"], ["proof (chain)\npicking this:\n  e = Val v\n  v = Bool b\n  b", "show ?thesis"], ["proof (prove)\nusing this:\n  e = Val v\n  v = Bool b\n  b\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro:RedCondT)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> b \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> b \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "case False"], ["proof (state)\nthis:\n  \\<not> b\n\ngoal (1 subgoal):\n 1. \\<not> b \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with val v"], ["proof (chain)\npicking this:\n  e = Val v\n  v = Bool b\n  \\<not> b", "show ?thesis"], ["proof (prove)\nusing this:\n  e = Val v\n  v = Bool b\n  \\<not> b\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro:RedCondF)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"e = Throw a\""], ["proof (state)\nthis:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fast intro:CondThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtCond"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : Boolean\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> lub(T1, T2) = T\n  \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (if (e) e1 else e2)\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : Boolean\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> lub(T1, T2) = T\n  \\<D> (if (e) e1 else e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (if (e) e1 else e2)\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by simp (fast intro:CondRed)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>if (e) e1 else e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (5 subgoals):\n 1. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 5. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 5. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "case WTrtWhile"], ["proof (state)\nthis:\n  P,E_,h \\<turnstile> e_ : Boolean\n  \\<lbrakk>\\<D> e_ \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e_\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e_,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E_,h \\<turnstile> c_ : T_\n  \\<lbrakk>\\<D> c_ \\<lfloor>dom ?l15\\<rfloor>; \\<not> final c_\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>c_,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<D> (while (e_) c_) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (while (e_) c_)\n\ngoal (5 subgoals):\n 1. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>c,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>while (e) c,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 4. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 5. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>while (e_) c_,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fast intro:RedWhile)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>while (e_) c_,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 4. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 4. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "case (WTrtThrow E e T T' l)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : T\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T \\<le> Class Throwable\n  \\<D> (throw e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (throw e)\n\ngoal (4 subgoals):\n 1. \\<And>E e T T' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T \\<le> Class Throwable;\n        \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>throw e,\n              (h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 3. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 4. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>throw e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>throw e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>throw e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"final e\" \\<comment> \\<open>Then @{term e} must be @{term throw} or @{term null}\\<close>"], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>throw e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>throw e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>throw e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof(induct rule: finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>throw e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>throw e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "case (Val v)"], ["proof (state)\nthis:\n  e = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>throw e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>throw e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with \\<open>P \\<turnstile> T \\<le> Class Throwable\\<close> \\<open>\\<not> final (throw e)\\<close> \\<open>P,E,h \\<turnstile> e : T\\<close>"], ["proof (chain)\npicking this:\n  P \\<turnstile> T \\<le> Class Throwable\n  \\<not> final (throw e)\n  P,E,h \\<turnstile> e : T\n  e = Val v", "have \"v = Null\""], ["proof (prove)\nusing this:\n  P \\<turnstile> T \\<le> Class Throwable\n  \\<not> final (throw e)\n  P,E,h \\<turnstile> e : T\n  e = Val v\n\ngoal (1 subgoal):\n 1. v = Null", "by(cases v)(auto simp add: final_iff widen_Class)"], ["proof (state)\nthis:\n  v = Null\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>throw e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>throw e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  v = Null\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>throw e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "using Val"], ["proof (prove)\nusing this:\n  v = Null\n  e = Val v\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>throw e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: RedThrowNull)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>throw e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>throw e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>throw e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "case (Throw a)"], ["proof (state)\nthis:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>throw e,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>throw e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fastforce intro: ThrowThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>throw e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>throw e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>throw e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>throw e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\" \\<comment> \\<open>Then @{term e} must reduce\\<close>"], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>throw e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtThrow"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : T\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T \\<le> Class Throwable\n  \\<D> (throw e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (throw e)\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : T\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T \\<le> Class Throwable\n  \\<D> (throw e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (throw e)\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>throw e,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by simp (blast intro:ThrowRed)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>throw e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>throw e,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 3. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 3. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "case (WTrtTry E e1 T1 V C e2 T2 l)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T1 \\<le> T2\n  \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (try e1 catch(C V) e2)\n\ngoal (3 subgoals):\n 1. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 3. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "have wt1: \"P,E,h \\<turnstile> e1 : T1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h \\<turnstile> e1 : T1", "by fact"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e1 : T1\n\ngoal (3 subgoals):\n 1. \\<And>E e1 T1 V C e2 T2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e1 : T1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e1,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e2,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T1 \\<le> T2;\n        \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e1 catch(C V) e2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>try e1\n              catch(C V) e2,(h, l)\\<rangle> -ta\\<rightarrow>\n             \\<langle>e',s'\\<rangle>\n 2. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 3. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"final e1\""], ["proof (state)\nthis:\n  final e1\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e1 = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e1 = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume \"e1 = Val v\""], ["proof (state)\nthis:\n  e1 = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e1 = Val v \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e1 = Val v\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(fast intro:RedTry)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "assume e1_Throw: \"e1 = Throw a\""], ["proof (state)\nthis:\n  e1 = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "with wt1"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : T1\n  e1 = Throw a", "obtain D where ha: \"typeof_addr h a = \\<lfloor>Class_type D\\<rfloor>\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : T1\n  e1 = Throw a\n\ngoal (1 subgoal):\n 1. (\\<And>D.\n        typeof_addr h a = \\<lfloor>Class_type D\\<rfloor> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by(auto simp add: widen_Class)"], ["proof (state)\nthis:\n  typeof_addr h a = \\<lfloor>Class_type D\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                                  (h, l)\\<rangle> -ta\\<rightarrow>\n                                 \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  typeof_addr h a = \\<lfloor>Class_type D\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "using e1_Throw"], ["proof (prove)\nusing this:\n  typeof_addr h a = \\<lfloor>Class_type D\\<rfloor>\n  e1 = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by(cases \"P \\<turnstile> D \\<preceq>\\<^sup>* C\")(fastforce intro:RedTryCatch RedTryFail)+"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e1\""], ["proof (state)\nthis:\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "with WTrtTry"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T1 \\<le> T2\n  \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (try e1 catch(C V) e2)\n  \\<not> final e1", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e1,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e2,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P \\<turnstile> T1 \\<le> T2\n  \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (try e1 catch(C V) e2)\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                               (h, l)\\<rangle> -ta\\<rightarrow>\n                              \\<langle>e',s'\\<rangle>", "by simp (fast intro:TryRed)"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                             (h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 2. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 2. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "case WTrtNil"], ["proof (state)\nthis:\n  \\<D>s [] \\<lfloor>dom l\\<rfloor>\n  \\<not> finals []\n\ngoal (2 subgoals):\n 1. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>[],\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>\n 2. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "thus ?case"], ["proof (prove)\nusing this:\n  \\<D>s [] \\<lfloor>dom l\\<rfloor>\n  \\<not> finals []\n\ngoal (1 subgoal):\n 1. \\<exists>es' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>[],(h, l)\\<rangle> [-ta\\<rightarrow>]\n                              \\<langle>es',s'\\<rangle>", "by simp"], ["proof (state)\nthis:\n  \\<exists>es' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>[],(h, l)\\<rangle> [-ta\\<rightarrow>]\n                            \\<langle>es',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "case (WTrtCons E e T es Ts)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : T\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l15\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>es,\n         (h, ?l15)\\<rangle> [-ta\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\n  \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>\n  \\<not> finals (e # es)\n\ngoal (1 subgoal):\n 1. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "have IHe: \"\\<And>l. \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n                \\<Longrightarrow> \\<exists>e' s' ta. extTA,P,t \\<turnstile> \\<langle>e,(h,l)\\<rangle> -ta\\<rightarrow> \\<langle>e',s'\\<rangle>\"\n   and IHes: \"\\<And>l. \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n             \\<Longrightarrow> \\<exists>es' s' ta. extTA,P,t \\<turnstile> \\<langle>es,(h,l)\\<rangle> [-ta\\<rightarrow>] \\<langle>es',s'\\<rangle>\"\n   and D: \"\\<D>s (e#es) \\<lfloor>dom l\\<rfloor>\" and not_fins: \"\\<not> finals(e # es)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<And>l.\n         \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n         \\<Longrightarrow> \\<exists>e' s' ta.\n                              extTA,P,t \\<turnstile> \\<langle>e,\n                (h, l)\\<rangle> -ta\\<rightarrow>\n               \\<langle>e',s'\\<rangle>) &&&\n     (\\<And>l.\n         \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n          \\<not> finals es\\<rbrakk>\n         \\<Longrightarrow> \\<exists>es' s' ta.\n                              extTA,P,t \\<turnstile> \\<langle>es,\n                (h, l)\\<rangle> [-ta\\<rightarrow>]\n               \\<langle>es',s'\\<rangle>)) &&&\n    \\<D>s (e # es) \\<lfloor>dom l\\<rfloor> &&& \\<not> finals (e # es)", "by fact+"], ["proof (state)\nthis:\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l15\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>e,\n         (h, ?l15)\\<rangle> -ta\\<rightarrow>\n        \\<langle>e',s'\\<rangle>\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l15\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s' ta.\n                       extTA,P,t \\<turnstile> \\<langle>es,\n         (h, ?l15)\\<rangle> [-ta\\<rightarrow>]\n        \\<langle>es',s'\\<rangle>\n  \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>\n  \\<not> finals (e # es)\n\ngoal (1 subgoal):\n 1. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "have De: \"\\<D> e \\<lfloor>dom l\\<rfloor>\" and Des: \"\\<D>s es (\\<lfloor>dom l\\<rfloor> \\<squnion> \\<A> e)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<D> e \\<lfloor>dom l\\<rfloor> &&&\n    \\<D>s es (\\<lfloor>dom l\\<rfloor> \\<squnion> \\<A> e)", "using D"], ["proof (prove)\nusing this:\n  \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> e \\<lfloor>dom l\\<rfloor> &&&\n    \\<D>s es (\\<lfloor>dom l\\<rfloor> \\<squnion> \\<A> e)", "by auto"], ["proof (state)\nthis:\n  \\<D> e \\<lfloor>dom l\\<rfloor>\n  \\<D>s es (\\<lfloor>dom l\\<rfloor> \\<squnion> \\<A> e)\n\ngoal (1 subgoal):\n 1. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>e,\n                  (h, l)\\<rangle> -ta\\<rightarrow>\n                 \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s' ta.\n                                extTA,P,t \\<turnstile> \\<langle>es,\n                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                 \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s' ta.\n                            extTA,P,t \\<turnstile> \\<langle>e # es,\n              (h, l)\\<rangle> [-ta\\<rightarrow>]\n             \\<langle>es',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>es' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e # es,\n                               (h, l)\\<rangle> [-ta\\<rightarrow>]\n                              \\<langle>es',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>es' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e # es,\n                               (h, l)\\<rangle> [-ta\\<rightarrow>]\n                              \\<langle>es',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>es' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e # es,\n                               (h, l)\\<rangle> [-ta\\<rightarrow>]\n                              \\<langle>es',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>es' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e # es,\n                               (h, l)\\<rangle> [-ta\\<rightarrow>]\n                              \\<langle>es',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>es' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e # es,\n                               (h, l)\\<rangle> [-ta\\<rightarrow>]\n                              \\<langle>es',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>es' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e # es,\n                               (h, l)\\<rangle> [-ta\\<rightarrow>]\n                              \\<langle>es',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>es' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e # es,\n                                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                                 \\<langle>es',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>es' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e # es,\n                                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                                 \\<langle>es',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>es' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e # es,\n                                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                                 \\<langle>es',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>es' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e # es,\n                                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                                 \\<langle>es',s'\\<rangle>", "assume e: \"e = Val v\""], ["proof (state)\nthis:\n  e = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>es' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e # es,\n                                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                                 \\<langle>es',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>es' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e # es,\n                                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                                 \\<langle>es',s'\\<rangle>", "hence Des': \"\\<D>s es \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\nusing this:\n  e = Val v\n\ngoal (1 subgoal):\n 1. \\<D>s es \\<lfloor>dom l\\<rfloor>", "using De Des"], ["proof (prove)\nusing this:\n  e = Val v\n  \\<D> e \\<lfloor>dom l\\<rfloor>\n  \\<D>s es (\\<lfloor>dom l\\<rfloor> \\<squnion> \\<A> e)\n\ngoal (1 subgoal):\n 1. \\<D>s es \\<lfloor>dom l\\<rfloor>", "by auto"], ["proof (state)\nthis:\n  \\<D>s es \\<lfloor>dom l\\<rfloor>\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>es' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e # es,\n                                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                                 \\<langle>es',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>es' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e # es,\n                                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                                 \\<langle>es',s'\\<rangle>", "have not_fins_tl: \"\\<not> finals es\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> finals es", "using not_fins e"], ["proof (prove)\nusing this:\n  \\<not> finals (e # es)\n  e = Val v\n\ngoal (1 subgoal):\n 1. \\<not> finals es", "by simp"], ["proof (state)\nthis:\n  \\<not> finals es\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>es' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e # es,\n                                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                                 \\<langle>es',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>es' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e # es,\n                                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                                 \\<langle>es',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>es' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e # es,\n                               (h, l)\\<rangle> [-ta\\<rightarrow>]\n                              \\<langle>es',s'\\<rangle>", "using e IHes[OF Des' not_fins_tl]"], ["proof (prove)\nusing this:\n  e = Val v\n  \\<exists>es' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>es,(h, l)\\<rangle> [-ta\\<rightarrow>]\n                            \\<langle>es',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>es' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e # es,\n                               (h, l)\\<rangle> [-ta\\<rightarrow>]\n                              \\<langle>es',s'\\<rangle>", "by (blast intro!:ListRed2)"], ["proof (state)\nthis:\n  \\<exists>es' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e # es,\n                             (h, l)\\<rangle> [-ta\\<rightarrow>]\n                            \\<langle>es',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>es' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e # es,\n                                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                                 \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>es' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e # es,\n                                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                                 \\<langle>es',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>es' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e # es,\n                                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                                 \\<langle>es',s'\\<rangle>", "assume \"e = Throw a\""], ["proof (state)\nthis:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>es' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e # es,\n                                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                                 \\<langle>es',s'\\<rangle>", "hence False"], ["proof (prove)\nusing this:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. False", "using not_fins"], ["proof (prove)\nusing this:\n  e = Throw a\n  \\<not> finals (e # es)\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>es' s' ta.\n          extTA,P,t \\<turnstile> \\<langle>e # es,\n                                  (h, l)\\<rangle> [-ta\\<rightarrow>]\n                                 \\<langle>es',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>es' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e # es,\n                               (h, l)\\<rangle> [-ta\\<rightarrow>]\n                              \\<langle>es',s'\\<rangle>", ".."], ["proof (state)\nthis:\n  \\<exists>es' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e # es,\n                             (h, l)\\<rangle> [-ta\\<rightarrow>]\n                            \\<langle>es',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>es' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e # es,\n                             (h, l)\\<rangle> [-ta\\<rightarrow>]\n                            \\<langle>es',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>es' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e # es,\n                               (h, l)\\<rangle> [-ta\\<rightarrow>]\n                              \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>es' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e # es,\n                               (h, l)\\<rangle> [-ta\\<rightarrow>]\n                              \\<langle>es',s'\\<rangle>", "assume \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>es' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e # es,\n                               (h, l)\\<rangle> [-ta\\<rightarrow>]\n                              \\<langle>es',s'\\<rangle>", "with IHe[OF De]"], ["proof (chain)\npicking this:\n  \\<not> final e \\<Longrightarrow>\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e,(h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> final e \\<Longrightarrow>\n  \\<exists>e' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e,(h, l)\\<rangle> -ta\\<rightarrow>\n                            \\<langle>e',s'\\<rangle>\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>es' s' ta.\n       extTA,P,t \\<turnstile> \\<langle>e # es,\n                               (h, l)\\<rangle> [-ta\\<rightarrow>]\n                              \\<langle>es',s'\\<rangle>", "by(fast intro!:ListRed1)"], ["proof (state)\nthis:\n  \\<exists>es' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e # es,\n                             (h, l)\\<rangle> [-ta\\<rightarrow>]\n                            \\<langle>es',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>es' s' ta.\n     extTA,P,t \\<turnstile> \\<langle>e # es,\n                             (h, l)\\<rangle> [-ta\\<rightarrow>]\n                            \\<langle>es',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}