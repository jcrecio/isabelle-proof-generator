{"file_name": "/home/qj213/afp-2021-10-22/thys/JinjaThreads/MM/Orders.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/JinjaThreads", "problem_names": ["lemma refl_onPI: \"(\\<And>a a'. r a a' \\<Longrightarrow> a \\<in> A \\<and> a' \\<in> A) \\<Longrightarrow> (\\<And>a. a : A \\<Longrightarrow> r a a) \\<Longrightarrow> refl_onP A r\"", "lemma refl_onPD: \"refl_onP A r ==> a : A ==> r a a\"", "lemma refl_onPD1: \"refl_onP A r ==> r a b ==> a : A\"", "lemma refl_onPD2: \"refl_onP A r ==> r a b ==> b : A\"", "lemma refl_onP_Int: \"refl_onP A r ==> refl_onP B s ==> refl_onP (A \\<inter> B) (\\<lambda>a a'. r a a' \\<and> s a a')\"", "lemma refl_onP_Un: \"refl_onP A r ==> refl_onP B s ==> refl_onP (A \\<union> B) (\\<lambda>a a'. r a a' \\<or> s a a')\"", "lemma refl_onP_empty[simp]: \"refl_onP {} (\\<lambda>a a'. False)\"", "lemma refl_onP_tranclp:\n  assumes \"refl_onP A r\"\n  shows \"refl_onP A r^++\"", "lemma irreflPI: \"(\\<And>a. \\<not> r a a) \\<Longrightarrow> irreflP r\"", "lemma irreflPE:\n  assumes \"irreflP r\" \n  obtains \"\\<forall>a. \\<not> r a a\"", "lemma irreflPD: \"\\<lbrakk> irreflP r; r a a \\<rbrakk> \\<Longrightarrow> False\"", "lemma irreflclpD:\n  \"r\\<^sup>\\<noteq>\\<^sup>\\<noteq> a b \\<Longrightarrow> r a b \\<and> a \\<noteq> b\"", "lemma irreflclpI [intro!]:\n  \"\\<lbrakk> r a b; a \\<noteq> b \\<rbrakk> \\<Longrightarrow> r\\<^sup>\\<noteq>\\<^sup>\\<noteq> a b\"", "lemma irreflclpE [elim!]:\n  assumes \"r\\<^sup>\\<noteq>\\<^sup>\\<noteq> a b\"\n  obtains \"r a b\" \"a \\<noteq> b\"", "lemma transPI: \"(\\<And>x y z. \\<lbrakk> r x y; r y z \\<rbrakk> \\<Longrightarrow> r x z) \\<Longrightarrow> transp r\"", "lemma transPD: \"\\<lbrakk>transp r; r x y; r y z \\<rbrakk> \\<Longrightarrow> r x z\"", "lemma transP_tranclp: \"transp r^++\"", "lemma antisymPI: \"(\\<And>x y. \\<lbrakk> r x y; r y x \\<rbrakk> \\<Longrightarrow> x = y) \\<Longrightarrow> antisymp r\"", "lemma antisymPD: \"\\<lbrakk> antisymp r; r a b; r b a \\<rbrakk> \\<Longrightarrow> a = b\"", "lemma antisym_subset:\n  \"\\<lbrakk> antisymp r; \\<And>a a'. s a a' \\<Longrightarrow> r a a' \\<rbrakk> \\<Longrightarrow> antisymp s\"", "lemma symPI: \"(\\<And>x y. r x y \\<Longrightarrow> r y x) \\<Longrightarrow> symP r\"", "lemma symPD: \"\\<lbrakk> symP r; r x y \\<rbrakk> \\<Longrightarrow> r y x\"", "lemma porder_onI:\n  \"\\<lbrakk> refl_onP A r; antisymp r; transp r \\<rbrakk> \\<Longrightarrow> porder_on A r\"", "lemma porder_onE:\n  assumes \"porder_on A r\"\n  obtains \"refl_onP A r\" \"antisymp r\" \"transp r\"", "lemma torder_onI:\n  \"\\<lbrakk> porder_on A r; total_onP A r \\<rbrakk> \\<Longrightarrow> torder_on A r\"", "lemma torder_onE:\n  assumes \"torder_on A r\"\n  obtains \"porder_on A r\" \"total_onP A r\"", "lemma total_onI:\n  \"(\\<And>x y. \\<lbrakk> x \\<in> A; y \\<in> A \\<rbrakk> \\<Longrightarrow> (x, y) \\<in> r \\<or> x = y \\<or> (y, x) \\<in> r) \\<Longrightarrow> total_on A r\"", "lemma total_onPI:\n  \"(\\<And>x y. \\<lbrakk> x \\<in> A; y \\<in> A \\<rbrakk> \\<Longrightarrow> r x y \\<or> x = y \\<or> r y x) \\<Longrightarrow> total_onP A r\"", "lemma total_onD:\n  \"\\<lbrakk> total_on A r; x \\<in> A; y \\<in> A \\<rbrakk> \\<Longrightarrow> (x, y) \\<in> r \\<or> x = y \\<or> (y, x) \\<in> r\"", "lemma total_onPD:\n  \"\\<lbrakk> total_onP A r; x \\<in> A; y \\<in> A \\<rbrakk> \\<Longrightarrow> r x y \\<or> x = y \\<or> r y x\"", "lemma order_consistentI:\n  \"(\\<And>a a'. \\<lbrakk> r a a'; s a' a \\<rbrakk> \\<Longrightarrow> a = a') \\<Longrightarrow> order_consistent r s\"", "lemma order_consistentD:\n  \"\\<lbrakk> order_consistent r s; r a a'; s a' a \\<rbrakk> \\<Longrightarrow> a = a'\"", "lemma order_consistent_subset:\n  \"\\<lbrakk> order_consistent r s; \\<And>a a'. r' a a' \\<Longrightarrow> r a a'; \\<And>a a'. s' a a' \\<Longrightarrow> s a a' \\<rbrakk> \\<Longrightarrow> order_consistent r' s'\"", "lemma order_consistent_sym:\n  \"order_consistent r s \\<Longrightarrow> order_consistent s r\"", "lemma antisym_order_consistent_self:\n  \"antisymp r \\<Longrightarrow> order_consistent r r\"", "lemma total_on_refl_on_consistent_into:\n  assumes r: \"total_onP A r\" \"refl_onP A r\"\n  and consist: \"order_consistent r s\"\n  and x: \"x \\<in> A\" and y: \"y \\<in> A\" and s: \"s x y\"\n  shows \"r x y\"", "lemma porder_torder_tranclpE [consumes 5, case_names base step]:\n  assumes r: \"porder_on A r\"\n  and s: \"torder_on B s\"\n  and consist: \"order_consistent r s\"\n  and B_subset_A: \"B \\<subseteq> A\"\n  and trancl: \"(\\<lambda>a b. r a b \\<or> s a b)^++ x y\"\n  obtains \"r x y\"\n        | u v where \"r x u\" \"s u v\" \"r v y\"", "lemma torder_on_porder_on_consistent_tranclp_antisym:\n  assumes r: \"porder_on A r\"\n  and s: \"torder_on B s\"\n  and consist: \"order_consistent r s\"\n  and B_subset_A: \"B \\<subseteq> A\"\n  shows \"antisymp (\\<lambda>x y. r x y \\<or> s x y)^++\"", "lemma porder_on_torder_on_tranclp_porder_onI:\n  assumes r: \"porder_on A r\"\n  and s: \"torder_on B s\" \n  and consist: \"order_consistent r s\"\n  and subset: \"B \\<subseteq> A\"\n  shows \"porder_on A (\\<lambda>a b. r a b \\<or> s a b)^++\"", "lemma porder_on_sub_torder_on_tranclp_porder_onI:\n  assumes r: \"porder_on A r\"\n  and s: \"torder_on B s\"\n  and consist: \"order_consistent r s\"\n  and t: \"\\<And>x y. t x y \\<Longrightarrow> s x y\"\n  and subset: \"B \\<subseteq> A\"\n  shows \"porder_on A (\\<lambda>x y. r x y \\<or> t x y)^++\"", "lemma restrictPI [intro!, simp]:\n  \"\\<lbrakk> r a b; a \\<in> A; b \\<in> A \\<rbrakk> \\<Longrightarrow> (r |` A) a b\"", "lemma restrictPE [elim!]:\n  assumes \"(r |` A) a b\"\n  obtains \"r a b\" \"a \\<in> A\" \"b \\<in> A\"", "lemma restrictP_empty [simp]: \"R |` {} = (\\<lambda>_ _. False)\"", "lemma refl_on_restrictPI:\n  \"refl_onP A r \\<Longrightarrow> refl_onP (A \\<inter> B) (r |` B)\"", "lemma refl_on_restrictPI':\n  \"\\<lbrakk> refl_onP A r; B = A \\<inter> C \\<rbrakk> \\<Longrightarrow> refl_onP B (r |` C)\"", "lemma antisym_restrictPI:\n  \"antisymp r \\<Longrightarrow> antisymp (r |` A)\"", "lemma trans_restrictPI:\n  \"transp r \\<Longrightarrow> transp (r |` A)\"", "lemma porder_on_restrictPI:\n  \"porder_on A r \\<Longrightarrow> porder_on (A \\<inter> B) (r |` B)\"", "lemma porder_on_restrictPI':\n  \"\\<lbrakk> porder_on A r; B = A \\<inter> C \\<rbrakk> \\<Longrightarrow> porder_on B (r |` C)\"", "lemma total_on_restrictPI:\n  \"total_onP A r \\<Longrightarrow> total_onP (A \\<inter> B) (r |` B)\"", "lemma total_on_restrictPI':\n  \"\\<lbrakk> total_onP A r; B = A \\<inter> C \\<rbrakk> \\<Longrightarrow> total_onP B (r |` C)\"", "lemma torder_on_restrictPI:\n  \"torder_on A r \\<Longrightarrow> torder_on (A \\<inter> B) (r |` B)\"", "lemma torder_on_restrictPI':\n  \"\\<lbrakk> torder_on A r; B = A \\<inter> C \\<rbrakk> \\<Longrightarrow> torder_on B (r |` C)\"", "lemma restrictP_commute:\n  fixes r :: \"'a \\<Rightarrow> 'a \\<Rightarrow> bool\"\n  shows \"r |` A |` B = r |` B |` A\"", "lemma restrictP_subsume1:\n  fixes r :: \"'a \\<Rightarrow> 'a \\<Rightarrow> bool\"\n  assumes \"A \\<subseteq> B\"\n  shows \"r |` A |` B = r |` A\"", "lemma restrictP_subsume2:\n  fixes r :: \"'a \\<Rightarrow> 'a \\<Rightarrow> bool\"\n  assumes \"B \\<subseteq> A\"\n  shows \"r |` A |` B = r |` B\"", "lemma restrictP_idem [simp]:\n  fixes r :: \"'a \\<Rightarrow> 'a \\<Rightarrow> bool\"\n  shows \"r |` A |` A = r |` A\"", "lemma refl_on_DomainD: \"refl_on A r \\<Longrightarrow> A = Domain r\"", "lemma refl_onP_DomainPD: \"refl_onP A r \\<Longrightarrow> A = {a. Domainp r a}\"", "lemma semilattice_max_torder:\n  assumes tot: \"torder_on A r\"\n  shows \"semilattice (max_torder r)\"", "lemma max_torder_ge_conv_disj:\n  assumes tot: \"torder_on A r\" and x: \"x \\<in> A\" and y: \"y \\<in> A\"\n  shows \"r z (max_torder r x y) \\<longleftrightarrow> r z x \\<or> r z y\"", "lemma semilattice_set:\n  \"semilattice_set (max_torder r)\"", "lemma domain:\n  \"Domainp r a \\<longleftrightarrow> a \\<in> A\"", "lemma Max_torder_in_Domain:\n  assumes B: \"finite B\" \"B \\<noteq> {}\" \"B \\<subseteq> A\"\n  shows \"Max_torder r B \\<in> A\"", "lemma Max_torder_in_set:\n  assumes B: \"finite B\" \"B \\<noteq> {}\" \"B \\<subseteq> A\"\n  shows \"Max_torder r B \\<in> B\"", "lemma Max_torder_above_iff:\n  assumes B: \"finite B\" \"B \\<noteq> {}\" \"B \\<subseteq> A\"\n  shows \"r x (Max_torder r B) \\<longleftrightarrow> (\\<exists>a\\<in>B. r x a)\"", "lemma Max_torder_above:\n  assumes tot: \"torder_on A r\"\n  and \"finite B\" \"a \\<in> B\" \"B \\<subseteq> A\"\n  shows \"r a (Max_torder r B)\"", "lemma inv_imageP_id [simp]: \"inv_imageP R id = R\"", "lemma inv_into_id [simp]: \"a \\<in> A \\<Longrightarrow> inv_into A id a = a\""], "translations": [["", "lemma refl_onPI: \"(\\<And>a a'. r a a' \\<Longrightarrow> a \\<in> A \\<and> a' \\<in> A) \\<Longrightarrow> (\\<And>a. a : A \\<Longrightarrow> r a a) \\<Longrightarrow> refl_onP A r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>a a'.\n                r a a' \\<Longrightarrow> a \\<in> A \\<and> a' \\<in> A;\n     \\<And>a. a \\<in> A \\<Longrightarrow> r a a\\<rbrakk>\n    \\<Longrightarrow> refl_onP A r", "by(rule refl_onI)(auto)"], ["", "lemma refl_onPD: \"refl_onP A r ==> a : A ==> r a a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>refl_onP A r; a \\<in> A\\<rbrakk> \\<Longrightarrow> r a a", "by(drule (1) refl_onD)(simp)"], ["", "lemma refl_onPD1: \"refl_onP A r ==> r a b ==> a : A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>refl_onP A r; r a b\\<rbrakk> \\<Longrightarrow> a \\<in> A", "by(erule refl_onD1)(simp)"], ["", "lemma refl_onPD2: \"refl_onP A r ==> r a b ==> b : A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>refl_onP A r; r a b\\<rbrakk> \\<Longrightarrow> b \\<in> A", "by(erule refl_onD2)(simp)"], ["", "lemma refl_onP_Int: \"refl_onP A r ==> refl_onP B s ==> refl_onP (A \\<inter> B) (\\<lambda>a a'. r a a' \\<and> s a a')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>refl_onP A r; refl_onP B s\\<rbrakk>\n    \\<Longrightarrow> refl_onP (A \\<inter> B)\n                       (\\<lambda>x y. r x y \\<and> s x y)", "by(drule (1) refl_on_Int)(simp add: split_def inf_fun_def inf_set_def)"], ["", "lemma refl_onP_Un: \"refl_onP A r ==> refl_onP B s ==> refl_onP (A \\<union> B) (\\<lambda>a a'. r a a' \\<or> s a a')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>refl_onP A r; refl_onP B s\\<rbrakk>\n    \\<Longrightarrow> refl_onP (A \\<union> B)\n                       (\\<lambda>x y. r x y \\<or> s x y)", "by(drule (1) refl_on_Un)(simp add: split_def sup_fun_def sup_set_def)"], ["", "lemma refl_onP_empty[simp]: \"refl_onP {} (\\<lambda>a a'. False)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. refl_onP {} (\\<lambda>x y. False)", "unfolding split_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. refl_on {} {p. False}", "by simp"], ["", "lemma refl_onP_tranclp:\n  assumes \"refl_onP A r\"\n  shows \"refl_onP A r^++\""], ["proof (prove)\ngoal (1 subgoal):\n 1. refl_onP A r\\<^sup>+\\<^sup>+", "proof(rule refl_onPI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a a'.\n       r\\<^sup>+\\<^sup>+ a a' \\<Longrightarrow> a \\<in> A \\<and> a' \\<in> A\n 2. \\<And>a. a \\<in> A \\<Longrightarrow> r\\<^sup>+\\<^sup>+ a a", "fix a a'"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a a'.\n       r\\<^sup>+\\<^sup>+ a a' \\<Longrightarrow> a \\<in> A \\<and> a' \\<in> A\n 2. \\<And>a. a \\<in> A \\<Longrightarrow> r\\<^sup>+\\<^sup>+ a a", "assume \"r^++ a a'\""], ["proof (state)\nthis:\n  r\\<^sup>+\\<^sup>+ a a'\n\ngoal (2 subgoals):\n 1. \\<And>a a'.\n       r\\<^sup>+\\<^sup>+ a a' \\<Longrightarrow> a \\<in> A \\<and> a' \\<in> A\n 2. \\<And>a. a \\<in> A \\<Longrightarrow> r\\<^sup>+\\<^sup>+ a a", "thus \"a \\<in> A \\<and> a' \\<in> A\""], ["proof (prove)\nusing this:\n  r\\<^sup>+\\<^sup>+ a a'\n\ngoal (1 subgoal):\n 1. a \\<in> A \\<and> a' \\<in> A", "by(induct)(blast intro: refl_onPD1[OF assms] refl_onPD2[OF assms])+"], ["proof (state)\nthis:\n  a \\<in> A \\<and> a' \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>a. a \\<in> A \\<Longrightarrow> r\\<^sup>+\\<^sup>+ a a", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a. a \\<in> A \\<Longrightarrow> r\\<^sup>+\\<^sup>+ a a", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a. a \\<in> A \\<Longrightarrow> r\\<^sup>+\\<^sup>+ a a", "assume \"a \\<in> A\""], ["proof (state)\nthis:\n  a \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>a. a \\<in> A \\<Longrightarrow> r\\<^sup>+\\<^sup>+ a a", "from refl_onPD[OF assms this]"], ["proof (chain)\npicking this:\n  r a a", "show \"r^++ a a\""], ["proof (prove)\nusing this:\n  r a a\n\ngoal (1 subgoal):\n 1. r\\<^sup>+\\<^sup>+ a a", ".."], ["proof (state)\nthis:\n  r\\<^sup>+\\<^sup>+ a a\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma irreflPI: \"(\\<And>a. \\<not> r a a) \\<Longrightarrow> irreflP r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a. \\<not> r a a) \\<Longrightarrow> irreflP r", "unfolding irrefl_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a. \\<not> r a a) \\<Longrightarrow>\n    \\<forall>a. (a, a) \\<notin> {(x, y). r x y}", "by blast"], ["", "lemma irreflPE:\n  assumes \"irreflP r\" \n  obtains \"\\<forall>a. \\<not> r a a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>a. \\<not> r a a \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  irreflP r\n\ngoal (1 subgoal):\n 1. (\\<forall>a. \\<not> r a a \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding irrefl_def"], ["proof (prove)\nusing this:\n  \\<forall>a. (a, a) \\<notin> {(x, y). r x y}\n\ngoal (1 subgoal):\n 1. (\\<forall>a. \\<not> r a a \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["", "lemma irreflPD: \"\\<lbrakk> irreflP r; r a a \\<rbrakk> \\<Longrightarrow> False\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>irreflP r; r a a\\<rbrakk> \\<Longrightarrow> False", "unfolding irrefl_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>a. (a, a) \\<notin> {(x, y). r x y}; r a a\\<rbrakk>\n    \\<Longrightarrow> False", "by blast"], ["", "lemma irreflclpD:\n  \"r\\<^sup>\\<noteq>\\<^sup>\\<noteq> a b \\<Longrightarrow> r a b \\<and> a \\<noteq> b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<^sup>\\<noteq>\\<^sup>\\<noteq> a b \\<Longrightarrow>\n    r a b \\<and> a \\<noteq> b", "by(simp add: irreflclp_def)"], ["", "lemma irreflclpI [intro!]:\n  \"\\<lbrakk> r a b; a \\<noteq> b \\<rbrakk> \\<Longrightarrow> r\\<^sup>\\<noteq>\\<^sup>\\<noteq> a b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>r a b; a \\<noteq> b\\<rbrakk>\n    \\<Longrightarrow> r\\<^sup>\\<noteq>\\<^sup>\\<noteq> a b", "by(simp add: irreflclp_def)"], ["", "lemma irreflclpE [elim!]:\n  assumes \"r\\<^sup>\\<noteq>\\<^sup>\\<noteq> a b\"\n  obtains \"r a b\" \"a \\<noteq> b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lbrakk>r a b; a \\<noteq> b\\<rbrakk>\n     \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  r\\<^sup>\\<noteq>\\<^sup>\\<noteq> a b\n\ngoal (1 subgoal):\n 1. (\\<lbrakk>r a b; a \\<noteq> b\\<rbrakk>\n     \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(simp add: irreflclp_def)"], ["", "lemma transPI: \"(\\<And>x y z. \\<lbrakk> r x y; r y z \\<rbrakk> \\<Longrightarrow> r x z) \\<Longrightarrow> transp r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>x y z.\n        \\<lbrakk>r x y; r y z\\<rbrakk>\n        \\<Longrightarrow> r x z) \\<Longrightarrow>\n    transp r", "by (fact transpI)"], ["", "lemma transPD: \"\\<lbrakk>transp r; r x y; r y z \\<rbrakk> \\<Longrightarrow> r x z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>transp r; r x y; r y z\\<rbrakk> \\<Longrightarrow> r x z", "by (fact transpD)"], ["", "lemma transP_tranclp: \"transp r^++\""], ["proof (prove)\ngoal (1 subgoal):\n 1. transp r\\<^sup>+\\<^sup>+", "by (fact trans_trancl [to_pred])"], ["", "lemma antisymPI: \"(\\<And>x y. \\<lbrakk> r x y; r y x \\<rbrakk> \\<Longrightarrow> x = y) \\<Longrightarrow> antisymp r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>x y.\n        \\<lbrakk>r x y; r y x\\<rbrakk>\n        \\<Longrightarrow> x = y) \\<Longrightarrow>\n    antisymp r", "by (fact antisympI)"], ["", "lemma antisymPD: \"\\<lbrakk> antisymp r; r a b; r b a \\<rbrakk> \\<Longrightarrow> a = b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>antisymp r; r a b; r b a\\<rbrakk> \\<Longrightarrow> a = b", "by (fact antisympD)"], ["", "lemma antisym_subset:\n  \"\\<lbrakk> antisymp r; \\<And>a a'. s a a' \\<Longrightarrow> r a a' \\<rbrakk> \\<Longrightarrow> antisymp s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>antisymp r;\n     \\<And>a a'. s a a' \\<Longrightarrow> r a a'\\<rbrakk>\n    \\<Longrightarrow> antisymp s", "by (blast intro: antisymp_less_eq [of s r])"], ["", "lemma symPI: \"(\\<And>x y. r x y \\<Longrightarrow> r y x) \\<Longrightarrow> symP r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>x y. r x y \\<Longrightarrow> r y x) \\<Longrightarrow> symP r", "by(rule symI)(blast)"], ["", "lemma symPD: \"\\<lbrakk> symP r; r x y \\<rbrakk> \\<Longrightarrow> r y x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>symP r; r x y\\<rbrakk> \\<Longrightarrow> r y x", "by(blast dest: symD)"], ["", "subsection \\<open>Easy properties\\<close>"], ["", "lemma porder_onI:\n  \"\\<lbrakk> refl_onP A r; antisymp r; transp r \\<rbrakk> \\<Longrightarrow> porder_on A r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>refl_onP A r; antisymp r; transp r\\<rbrakk>\n    \\<Longrightarrow> porder_on A r", "unfolding porder_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>refl_onP A r; antisymp r; transp r\\<rbrakk>\n    \\<Longrightarrow> refl_onP A r \\<and> transp r \\<and> antisymp r", "by blast"], ["", "lemma porder_onE:\n  assumes \"porder_on A r\"\n  obtains \"refl_onP A r\" \"antisymp r\" \"transp r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lbrakk>refl_onP A r; antisymp r; transp r\\<rbrakk>\n     \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  porder_on A r\n\ngoal (1 subgoal):\n 1. (\\<lbrakk>refl_onP A r; antisymp r; transp r\\<rbrakk>\n     \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding porder_on_def"], ["proof (prove)\nusing this:\n  refl_onP A r \\<and> transp r \\<and> antisymp r\n\ngoal (1 subgoal):\n 1. (\\<lbrakk>refl_onP A r; antisymp r; transp r\\<rbrakk>\n     \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["", "lemma torder_onI:\n  \"\\<lbrakk> porder_on A r; total_onP A r \\<rbrakk> \\<Longrightarrow> torder_on A r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>porder_on A r; total_onP A r\\<rbrakk>\n    \\<Longrightarrow> torder_on A r", "unfolding torder_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>porder_on A r; total_onP A r\\<rbrakk>\n    \\<Longrightarrow> porder_on A r \\<and> total_onP A r", "by blast"], ["", "lemma torder_onE:\n  assumes \"torder_on A r\"\n  obtains \"porder_on A r\" \"total_onP A r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lbrakk>porder_on A r; total_onP A r\\<rbrakk>\n     \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  torder_on A r\n\ngoal (1 subgoal):\n 1. (\\<lbrakk>porder_on A r; total_onP A r\\<rbrakk>\n     \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding torder_on_def"], ["proof (prove)\nusing this:\n  porder_on A r \\<and> total_onP A r\n\ngoal (1 subgoal):\n 1. (\\<lbrakk>porder_on A r; total_onP A r\\<rbrakk>\n     \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["", "lemma total_onI:\n  \"(\\<And>x y. \\<lbrakk> x \\<in> A; y \\<in> A \\<rbrakk> \\<Longrightarrow> (x, y) \\<in> r \\<or> x = y \\<or> (y, x) \\<in> r) \\<Longrightarrow> total_on A r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>x y.\n        \\<lbrakk>x \\<in> A; y \\<in> A\\<rbrakk>\n        \\<Longrightarrow> (x, y) \\<in> r \\<or>\n                          x = y \\<or> (y, x) \\<in> r) \\<Longrightarrow>\n    total_on A r", "unfolding total_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>x y.\n        \\<lbrakk>x \\<in> A; y \\<in> A\\<rbrakk>\n        \\<Longrightarrow> (x, y) \\<in> r \\<or>\n                          x = y \\<or> (y, x) \\<in> r) \\<Longrightarrow>\n    \\<forall>x\\<in>A.\n       \\<forall>y\\<in>A.\n          x \\<noteq> y \\<longrightarrow> (x, y) \\<in> r \\<or> (y, x) \\<in> r", "by blast"], ["", "lemma total_onPI:\n  \"(\\<And>x y. \\<lbrakk> x \\<in> A; y \\<in> A \\<rbrakk> \\<Longrightarrow> r x y \\<or> x = y \\<or> r y x) \\<Longrightarrow> total_onP A r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>x y.\n        \\<lbrakk>x \\<in> A; y \\<in> A\\<rbrakk>\n        \\<Longrightarrow> r x y \\<or> x = y \\<or> r y x) \\<Longrightarrow>\n    total_onP A r", "by(rule total_onI) simp"], ["", "lemma total_onD:\n  \"\\<lbrakk> total_on A r; x \\<in> A; y \\<in> A \\<rbrakk> \\<Longrightarrow> (x, y) \\<in> r \\<or> x = y \\<or> (y, x) \\<in> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>total_on A r; x \\<in> A; y \\<in> A\\<rbrakk>\n    \\<Longrightarrow> (x, y) \\<in> r \\<or> x = y \\<or> (y, x) \\<in> r", "unfolding total_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>x\\<in>A.\n                \\<forall>y\\<in>A.\n                   x \\<noteq> y \\<longrightarrow>\n                   (x, y) \\<in> r \\<or> (y, x) \\<in> r;\n     x \\<in> A; y \\<in> A\\<rbrakk>\n    \\<Longrightarrow> (x, y) \\<in> r \\<or> x = y \\<or> (y, x) \\<in> r", "by blast"], ["", "lemma total_onPD:\n  \"\\<lbrakk> total_onP A r; x \\<in> A; y \\<in> A \\<rbrakk> \\<Longrightarrow> r x y \\<or> x = y \\<or> r y x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>total_onP A r; x \\<in> A; y \\<in> A\\<rbrakk>\n    \\<Longrightarrow> r x y \\<or> x = y \\<or> r y x", "by(drule (2) total_onD) blast"], ["", "subsection \\<open>Order consistency\\<close>"], ["", "lemma order_consistentI:\n  \"(\\<And>a a'. \\<lbrakk> r a a'; s a' a \\<rbrakk> \\<Longrightarrow> a = a') \\<Longrightarrow> order_consistent r s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a a'.\n        \\<lbrakk>r a a'; s a' a\\<rbrakk>\n        \\<Longrightarrow> a = a') \\<Longrightarrow>\n    order_consistent r s", "unfolding order_consistent_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a a'.\n        \\<lbrakk>r a a'; s a' a\\<rbrakk>\n        \\<Longrightarrow> a = a') \\<Longrightarrow>\n    \\<forall>a a'. r a a' \\<and> s a' a \\<longrightarrow> a = a'", "by blast"], ["", "lemma order_consistentD:\n  \"\\<lbrakk> order_consistent r s; r a a'; s a' a \\<rbrakk> \\<Longrightarrow> a = a'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>order_consistent r s; r a a'; s a' a\\<rbrakk>\n    \\<Longrightarrow> a = a'", "unfolding order_consistent_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>a a'. r a a' \\<and> s a' a \\<longrightarrow> a = a';\n     r a a'; s a' a\\<rbrakk>\n    \\<Longrightarrow> a = a'", "by blast"], ["", "lemma order_consistent_subset:\n  \"\\<lbrakk> order_consistent r s; \\<And>a a'. r' a a' \\<Longrightarrow> r a a'; \\<And>a a'. s' a a' \\<Longrightarrow> s a a' \\<rbrakk> \\<Longrightarrow> order_consistent r' s'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>order_consistent r s;\n     \\<And>a a'. r' a a' \\<Longrightarrow> r a a';\n     \\<And>a a'. s' a a' \\<Longrightarrow> s a a'\\<rbrakk>\n    \\<Longrightarrow> order_consistent r' s'", "by(blast intro: order_consistentI order_consistentD)"], ["", "lemma order_consistent_sym:\n  \"order_consistent r s \\<Longrightarrow> order_consistent s r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. order_consistent r s \\<Longrightarrow> order_consistent s r", "by(blast intro: order_consistentI dest: order_consistentD)"], ["", "lemma antisym_order_consistent_self:\n  \"antisymp r \\<Longrightarrow> order_consistent r r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. antisymp r \\<Longrightarrow> order_consistent r r", "by(rule order_consistentI)(erule antisympD, simp_all)"], ["", "lemma total_on_refl_on_consistent_into:\n  assumes r: \"total_onP A r\" \"refl_onP A r\"\n  and consist: \"order_consistent r s\"\n  and x: \"x \\<in> A\" and y: \"y \\<in> A\" and s: \"s x y\"\n  shows \"r x y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r x y", "proof(cases \"x = y\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> r x y\n 2. x \\<noteq> y \\<Longrightarrow> r x y", "case True"], ["proof (state)\nthis:\n  x = y\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> r x y\n 2. x \\<noteq> y \\<Longrightarrow> r x y", "with r x y"], ["proof (chain)\npicking this:\n  total_onP A r\n  refl_onP A r\n  x \\<in> A\n  y \\<in> A\n  x = y", "show ?thesis"], ["proof (prove)\nusing this:\n  total_onP A r\n  refl_onP A r\n  x \\<in> A\n  y \\<in> A\n  x = y\n\ngoal (1 subgoal):\n 1. r x y", "by(blast intro: refl_onPD)"], ["proof (state)\nthis:\n  r x y\n\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow> r x y", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow> r x y", "case False"], ["proof (state)\nthis:\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow> r x y", "with r x y"], ["proof (chain)\npicking this:\n  total_onP A r\n  refl_onP A r\n  x \\<in> A\n  y \\<in> A\n  x \\<noteq> y", "have \"r x y \\<or> r y x\""], ["proof (prove)\nusing this:\n  total_onP A r\n  refl_onP A r\n  x \\<in> A\n  y \\<in> A\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. r x y \\<or> r y x", "by(blast dest: total_onD)"], ["proof (state)\nthis:\n  r x y \\<or> r y x\n\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow> r x y", "thus ?thesis"], ["proof (prove)\nusing this:\n  r x y \\<or> r y x\n\ngoal (1 subgoal):\n 1. r x y", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. r x y \\<Longrightarrow> r x y\n 2. r y x \\<Longrightarrow> r x y", "assume \"r y x\""], ["proof (state)\nthis:\n  r y x\n\ngoal (2 subgoals):\n 1. r x y \\<Longrightarrow> r x y\n 2. r y x \\<Longrightarrow> r x y", "with s consist"], ["proof (chain)\npicking this:\n  s x y\n  order_consistent r s\n  r y x", "have \"x = y\""], ["proof (prove)\nusing this:\n  s x y\n  order_consistent r s\n  r y x\n\ngoal (1 subgoal):\n 1. x = y", "by(blast dest: order_consistentD)"], ["proof (state)\nthis:\n  x = y\n\ngoal (2 subgoals):\n 1. r x y \\<Longrightarrow> r x y\n 2. r y x \\<Longrightarrow> r x y", "with False"], ["proof (chain)\npicking this:\n  x \\<noteq> y\n  x = y", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<noteq> y\n  x = y\n\ngoal (1 subgoal):\n 1. r x y", "by(contradiction)"], ["proof (state)\nthis:\n  r x y\n\ngoal (1 subgoal):\n 1. r x y \\<Longrightarrow> r x y", "qed"], ["proof (state)\nthis:\n  r x y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma porder_torder_tranclpE [consumes 5, case_names base step]:\n  assumes r: \"porder_on A r\"\n  and s: \"torder_on B s\"\n  and consist: \"order_consistent r s\"\n  and B_subset_A: \"B \\<subseteq> A\"\n  and trancl: \"(\\<lambda>a b. r a b \\<or> s a b)^++ x y\"\n  obtains \"r x y\"\n        | u v where \"r x u\" \"s u v\" \"r v y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>r x y \\<Longrightarrow> thesis;\n     \\<And>u v.\n        \\<lbrakk>r x u; s u v; r v y\\<rbrakk>\n        \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "proof(atomize_elim)"], ["proof (state)\ngoal (1 subgoal):\n 1. r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)", "from r"], ["proof (chain)\npicking this:\n  porder_on A r", "have \"refl_onP A r\" \"transp r\""], ["proof (prove)\nusing this:\n  porder_on A r\n\ngoal (1 subgoal):\n 1. refl_onP A r &&& transp r", "by(blast elim: porder_onE)+"], ["proof (state)\nthis:\n  refl_onP A r\n  transp r\n\ngoal (1 subgoal):\n 1. r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)", "from s"], ["proof (chain)\npicking this:\n  torder_on B s", "have \"refl_onP B s\" \"total_onP B s\" \"transp s\""], ["proof (prove)\nusing this:\n  torder_on B s\n\ngoal (1 subgoal):\n 1. refl_onP B s &&& total_onP B s &&& transp s", "by(blast elim: torder_onE porder_onE)+"], ["proof (state)\nthis:\n  refl_onP B s\n  total_onP B s\n  transp s\n\ngoal (1 subgoal):\n 1. r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)", "from trancl"], ["proof (chain)\npicking this:\n  (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+ x y", "show \"r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\""], ["proof (prove)\nusing this:\n  (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+ x y\n\ngoal (1 subgoal):\n 1. r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)", "proof(induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>y.\n       r x y \\<or> s x y \\<Longrightarrow>\n       r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\n 2. \\<And>y z.\n       \\<lbrakk>(\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+ x y;\n        r y z \\<or> s y z;\n        r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\\<rbrakk>\n       \\<Longrightarrow> r x z \\<or>\n                         (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "case (base y)"], ["proof (state)\nthis:\n  r x y \\<or> s x y\n\ngoal (2 subgoals):\n 1. \\<And>y.\n       r x y \\<or> s x y \\<Longrightarrow>\n       r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\n 2. \\<And>y z.\n       \\<lbrakk>(\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+ x y;\n        r y z \\<or> s y z;\n        r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\\<rbrakk>\n       \\<Longrightarrow> r x z \\<or>\n                         (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "thus ?case"], ["proof (prove)\nusing this:\n  r x y \\<or> s x y\n\ngoal (1 subgoal):\n 1. r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. r x y \\<Longrightarrow>\n    r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\n 2. s x y \\<Longrightarrow>\n    r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)", "assume \"s x y\""], ["proof (state)\nthis:\n  s x y\n\ngoal (2 subgoals):\n 1. r x y \\<Longrightarrow>\n    r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\n 2. s x y \\<Longrightarrow>\n    r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)", "with s"], ["proof (chain)\npicking this:\n  torder_on B s\n  s x y", "have \"x \\<in> B\" \"y \\<in> B\""], ["proof (prove)\nusing this:\n  torder_on B s\n  s x y\n\ngoal (1 subgoal):\n 1. x \\<in> B &&& y \\<in> B", "by(blast elim: torder_onE porder_onE dest: refl_onPD1 refl_onPD2)+"], ["proof (state)\nthis:\n  x \\<in> B\n  y \\<in> B\n\ngoal (2 subgoals):\n 1. r x y \\<Longrightarrow>\n    r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\n 2. s x y \\<Longrightarrow>\n    r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)", "with B_subset_A"], ["proof (chain)\npicking this:\n  B \\<subseteq> A\n  x \\<in> B\n  y \\<in> B", "have \"x \\<in> A\" \"y \\<in> A\""], ["proof (prove)\nusing this:\n  B \\<subseteq> A\n  x \\<in> B\n  y \\<in> B\n\ngoal (1 subgoal):\n 1. x \\<in> A &&& y \\<in> A", "by blast+"], ["proof (state)\nthis:\n  x \\<in> A\n  y \\<in> A\n\ngoal (2 subgoals):\n 1. r x y \\<Longrightarrow>\n    r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\n 2. s x y \\<Longrightarrow>\n    r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)", "with refl_onPD[OF \\<open>refl_onP A r\\<close>, of x] refl_onPD[OF \\<open>refl_onP A r\\<close>, of y] \\<open>s x y\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> A \\<Longrightarrow> r x x\n  y \\<in> A \\<Longrightarrow> r y y\n  s x y\n  x \\<in> A\n  y \\<in> A", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<in> A \\<Longrightarrow> r x x\n  y \\<in> A \\<Longrightarrow> r y y\n  s x y\n  x \\<in> A\n  y \\<in> A\n\ngoal (1 subgoal):\n 1. r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)", "by(iprover)"], ["proof (state)\nthis:\n  r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\n\ngoal (1 subgoal):\n 1. r x y \\<Longrightarrow>\n    r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. r x y \\<Longrightarrow>\n    r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)", "assume \"r x y\""], ["proof (state)\nthis:\n  r x y\n\ngoal (1 subgoal):\n 1. r x y \\<Longrightarrow>\n    r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)", "thus ?thesis"], ["proof (prove)\nusing this:\n  r x y\n\ngoal (1 subgoal):\n 1. r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)", ".."], ["proof (state)\nthis:\n  r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+ x y;\n        r y z \\<or> s y z;\n        r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\\<rbrakk>\n       \\<Longrightarrow> r x z \\<or>\n                         (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+ x y;\n        r y z \\<or> s y z;\n        r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\\<rbrakk>\n       \\<Longrightarrow> r x z \\<or>\n                         (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "case (step y z)"], ["proof (state)\nthis:\n  (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+ x y\n  r y z \\<or> s y z\n  r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+ x y;\n        r y z \\<or> s y z;\n        r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\\<rbrakk>\n       \\<Longrightarrow> r x z \\<or>\n                         (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "note IH = \\<open>r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\\<close>"], ["proof (state)\nthis:\n  r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+ x y;\n        r y z \\<or> s y z;\n        r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\\<rbrakk>\n       \\<Longrightarrow> r x z \\<or>\n                         (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "from \\<open>r y z \\<or> s y z\\<close>"], ["proof (chain)\npicking this:\n  r y z \\<or> s y z", "show ?case"], ["proof (prove)\nusing this:\n  r y z \\<or> s y z\n\ngoal (1 subgoal):\n 1. r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. r y z \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)\n 2. s y z \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "assume \"s y z\""], ["proof (state)\nthis:\n  s y z\n\ngoal (2 subgoals):\n 1. r y z \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)\n 2. s y z \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "with \\<open>refl_onP B s\\<close>"], ["proof (chain)\npicking this:\n  refl_onP B s\n  s y z", "have \"y \\<in> B\" \"z \\<in> B\""], ["proof (prove)\nusing this:\n  refl_onP B s\n  s y z\n\ngoal (1 subgoal):\n 1. y \\<in> B &&& z \\<in> B", "by(blast dest: refl_onPD2 refl_onPD1)+"], ["proof (state)\nthis:\n  y \\<in> B\n  z \\<in> B\n\ngoal (2 subgoals):\n 1. r y z \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)\n 2. s y z \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "from IH"], ["proof (chain)\npicking this:\n  r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)", "show ?thesis"], ["proof (prove)\nusing this:\n  r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\n\ngoal (1 subgoal):\n 1. r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. r x y \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)\n 2. \\<exists>u v. r x u \\<and> s u v \\<and> r v y \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "assume \"r x y\""], ["proof (state)\nthis:\n  r x y\n\ngoal (2 subgoals):\n 1. r x y \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)\n 2. \\<exists>u v. r x u \\<and> s u v \\<and> r v y \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "moreover"], ["proof (state)\nthis:\n  r x y\n\ngoal (2 subgoals):\n 1. r x y \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)\n 2. \\<exists>u v. r x u \\<and> s u v \\<and> r v y \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "from \\<open>z \\<in> B\\<close> B_subset_A r"], ["proof (chain)\npicking this:\n  z \\<in> B\n  B \\<subseteq> A\n  porder_on A r", "have \"r z z\""], ["proof (prove)\nusing this:\n  z \\<in> B\n  B \\<subseteq> A\n  porder_on A r\n\ngoal (1 subgoal):\n 1. r z z", "by(blast elim: porder_onE dest: refl_onPD)"], ["proof (state)\nthis:\n  r z z\n\ngoal (2 subgoals):\n 1. r x y \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)\n 2. \\<exists>u v. r x u \\<and> s u v \\<and> r v y \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "ultimately"], ["proof (chain)\npicking this:\n  r x y\n  r z z", "show ?thesis"], ["proof (prove)\nusing this:\n  r x y\n  r z z\n\ngoal (1 subgoal):\n 1. r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "using \\<open>s y z\\<close>"], ["proof (prove)\nusing this:\n  r x y\n  r z z\n  s y z\n\ngoal (1 subgoal):\n 1. r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "by blast"], ["proof (state)\nthis:\n  r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)\n\ngoal (1 subgoal):\n 1. \\<exists>u v. r x u \\<and> s u v \\<and> r v y \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>u v. r x u \\<and> s u v \\<and> r v y \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "assume \"\\<exists>u v. r x u \\<and> s u v \\<and> r v y\""], ["proof (state)\nthis:\n  \\<exists>u v. r x u \\<and> s u v \\<and> r v y\n\ngoal (1 subgoal):\n 1. \\<exists>u v. r x u \\<and> s u v \\<and> r v y \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "then"], ["proof (chain)\npicking this:\n  \\<exists>u v. r x u \\<and> s u v \\<and> r v y", "obtain u v where \"r x u\" \"s u v\" \"r v y\""], ["proof (prove)\nusing this:\n  \\<exists>u v. r x u \\<and> s u v \\<and> r v y\n\ngoal (1 subgoal):\n 1. (\\<And>u v.\n        \\<lbrakk>r x u; s u v; r v y\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  r x u\n  s u v\n  r v y\n\ngoal (1 subgoal):\n 1. \\<exists>u v. r x u \\<and> s u v \\<and> r v y \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "from \\<open>refl_onP B s\\<close> \\<open>s u v\\<close>"], ["proof (chain)\npicking this:\n  refl_onP B s\n  s u v", "have \"v \\<in> B\""], ["proof (prove)\nusing this:\n  refl_onP B s\n  s u v\n\ngoal (1 subgoal):\n 1. v \\<in> B", "by(rule refl_onPD2)"], ["proof (state)\nthis:\n  v \\<in> B\n\ngoal (1 subgoal):\n 1. \\<exists>u v. r x u \\<and> s u v \\<and> r v y \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "with \\<open>total_onP B s\\<close> \\<open>refl_onP B s\\<close> order_consistent_sym[OF consist]"], ["proof (chain)\npicking this:\n  total_onP B s\n  refl_onP B s\n  order_consistent s r\n  v \\<in> B", "have \"s v y\""], ["proof (prove)\nusing this:\n  total_onP B s\n  refl_onP B s\n  order_consistent s r\n  v \\<in> B\n\ngoal (1 subgoal):\n 1. s v y", "using \\<open>y \\<in> B\\<close> \\<open>r v y\\<close>"], ["proof (prove)\nusing this:\n  total_onP B s\n  refl_onP B s\n  order_consistent s r\n  v \\<in> B\n  y \\<in> B\n  r v y\n\ngoal (1 subgoal):\n 1. s v y", "by(rule total_on_refl_on_consistent_into)"], ["proof (state)\nthis:\n  s v y\n\ngoal (1 subgoal):\n 1. \\<exists>u v. r x u \\<and> s u v \\<and> r v y \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "with \\<open>transp s\\<close>"], ["proof (chain)\npicking this:\n  transp s\n  s v y", "have \"s v z\""], ["proof (prove)\nusing this:\n  transp s\n  s v y\n\ngoal (1 subgoal):\n 1. s v z", "using \\<open>s y z\\<close>"], ["proof (prove)\nusing this:\n  transp s\n  s v y\n  s y z\n\ngoal (1 subgoal):\n 1. s v z", "by(rule transPD)"], ["proof (state)\nthis:\n  s v z\n\ngoal (1 subgoal):\n 1. \\<exists>u v. r x u \\<and> s u v \\<and> r v y \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "with \\<open>transp s\\<close> \\<open>s u v\\<close>"], ["proof (chain)\npicking this:\n  transp s\n  s u v\n  s v z", "have \"s u z\""], ["proof (prove)\nusing this:\n  transp s\n  s u v\n  s v z\n\ngoal (1 subgoal):\n 1. s u z", "by(rule transPD)"], ["proof (state)\nthis:\n  s u z\n\ngoal (1 subgoal):\n 1. \\<exists>u v. r x u \\<and> s u v \\<and> r v y \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "moreover"], ["proof (state)\nthis:\n  s u z\n\ngoal (1 subgoal):\n 1. \\<exists>u v. r x u \\<and> s u v \\<and> r v y \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "from \\<open>z \\<in> B\\<close> B_subset_A"], ["proof (chain)\npicking this:\n  z \\<in> B\n  B \\<subseteq> A", "have \"z \\<in> A\""], ["proof (prove)\nusing this:\n  z \\<in> B\n  B \\<subseteq> A\n\ngoal (1 subgoal):\n 1. z \\<in> A", ".."], ["proof (state)\nthis:\n  z \\<in> A\n\ngoal (1 subgoal):\n 1. \\<exists>u v. r x u \\<and> s u v \\<and> r v y \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "with \\<open>refl_onP A r\\<close>"], ["proof (chain)\npicking this:\n  refl_onP A r\n  z \\<in> A", "have \"r z z\""], ["proof (prove)\nusing this:\n  refl_onP A r\n  z \\<in> A\n\ngoal (1 subgoal):\n 1. r z z", "by(rule refl_onPD)"], ["proof (state)\nthis:\n  r z z\n\ngoal (1 subgoal):\n 1. \\<exists>u v. r x u \\<and> s u v \\<and> r v y \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "ultimately"], ["proof (chain)\npicking this:\n  s u z\n  r z z", "show ?thesis"], ["proof (prove)\nusing this:\n  s u z\n  r z z\n\ngoal (1 subgoal):\n 1. r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "using \\<open>r x u\\<close>"], ["proof (prove)\nusing this:\n  s u z\n  r z z\n  r x u\n\ngoal (1 subgoal):\n 1. r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "by blast"], ["proof (state)\nthis:\n  r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)\n\ngoal (1 subgoal):\n 1. r y z \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. r y z \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "assume \"r y z\""], ["proof (state)\nthis:\n  r y z\n\ngoal (1 subgoal):\n 1. r y z \\<Longrightarrow>\n    r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "with IH"], ["proof (chain)\npicking this:\n  r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\n  r y z", "show ?thesis"], ["proof (prove)\nusing this:\n  r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\n  r y z\n\ngoal (1 subgoal):\n 1. r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)", "by(blast intro: transPD[OF \\<open>transp r\\<close>])"], ["proof (state)\nthis:\n  r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  r x z \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v z)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  r x y \\<or> (\\<exists>u v. r x u \\<and> s u v \\<and> r v y)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma torder_on_porder_on_consistent_tranclp_antisym:\n  assumes r: \"porder_on A r\"\n  and s: \"torder_on B s\"\n  and consist: \"order_consistent r s\"\n  and B_subset_A: \"B \\<subseteq> A\"\n  shows \"antisymp (\\<lambda>x y. r x y \\<or> s x y)^++\""], ["proof (prove)\ngoal (1 subgoal):\n 1. antisymp (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+", "proof(rule antisymPI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>(\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ x y;\n        (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ y x\\<rbrakk>\n       \\<Longrightarrow> x = y", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>(\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ x y;\n        (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ y x\\<rbrakk>\n       \\<Longrightarrow> x = y", "let ?rs = \"\\<lambda>x y. r x y \\<or> s x y\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>(\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ x y;\n        (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ y x\\<rbrakk>\n       \\<Longrightarrow> x = y", "assume \"?rs^++ x y\" \"?rs^++ y x\""], ["proof (state)\nthis:\n  (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ x y\n  (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ y x\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>(\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ x y;\n        (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ y x\\<rbrakk>\n       \\<Longrightarrow> x = y", "from r"], ["proof (chain)\npicking this:\n  porder_on A r", "have \"antisymp r\" \"transp r\""], ["proof (prove)\nusing this:\n  porder_on A r\n\ngoal (1 subgoal):\n 1. antisymp r &&& transp r", "by(blast elim: porder_onE)+"], ["proof (state)\nthis:\n  antisymp r\n  transp r\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>(\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ x y;\n        (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ y x\\<rbrakk>\n       \\<Longrightarrow> x = y", "from s"], ["proof (chain)\npicking this:\n  torder_on B s", "have \"total_onP B s\" \"refl_onP B s\" \"transp s\" \"antisymp s\""], ["proof (prove)\nusing this:\n  torder_on B s\n\ngoal (1 subgoal):\n 1. (total_onP B s &&& refl_onP B s) &&& transp s &&& antisymp s", "by(blast elim: torder_onE porder_onE)+"], ["proof (state)\nthis:\n  total_onP B s\n  refl_onP B s\n  transp s\n  antisymp s\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>(\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ x y;\n        (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ y x\\<rbrakk>\n       \\<Longrightarrow> x = y", "from r s consist B_subset_A \\<open>?rs^++ x y\\<close>"], ["proof (chain)\npicking this:\n  porder_on A r\n  torder_on B s\n  order_consistent r s\n  B \\<subseteq> A\n  (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ x y", "show \"x = y\""], ["proof (prove)\nusing this:\n  porder_on A r\n  torder_on B s\n  order_consistent r s\n  B \\<subseteq> A\n  (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ x y\n\ngoal (1 subgoal):\n 1. x = y", "proof(cases rule: porder_torder_tranclpE)"], ["proof (state)\ngoal (2 subgoals):\n 1. r x y \\<Longrightarrow> x = y\n 2. \\<And>u v. \\<lbrakk>r x u; s u v; r v y\\<rbrakk> \\<Longrightarrow> x = y", "case base"], ["proof (state)\nthis:\n  r x y\n\ngoal (2 subgoals):\n 1. r x y \\<Longrightarrow> x = y\n 2. \\<And>u v. \\<lbrakk>r x u; s u v; r v y\\<rbrakk> \\<Longrightarrow> x = y", "from r s consist B_subset_A \\<open>?rs^++ y x\\<close>"], ["proof (chain)\npicking this:\n  porder_on A r\n  torder_on B s\n  order_consistent r s\n  B \\<subseteq> A\n  (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ y x", "show ?thesis"], ["proof (prove)\nusing this:\n  porder_on A r\n  torder_on B s\n  order_consistent r s\n  B \\<subseteq> A\n  (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ y x\n\ngoal (1 subgoal):\n 1. x = y", "proof(cases rule: porder_torder_tranclpE)"], ["proof (state)\ngoal (2 subgoals):\n 1. r y x \\<Longrightarrow> x = y\n 2. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "case base"], ["proof (state)\nthis:\n  r y x\n\ngoal (2 subgoals):\n 1. r y x \\<Longrightarrow> x = y\n 2. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "with \\<open>antisymp r\\<close> \\<open>r x y\\<close>"], ["proof (chain)\npicking this:\n  antisymp r\n  r x y\n  r y x", "show ?thesis"], ["proof (prove)\nusing this:\n  antisymp r\n  r x y\n  r y x\n\ngoal (1 subgoal):\n 1. x = y", "by(rule antisymPD)"], ["proof (state)\nthis:\n  x = y\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "case (step u v)"], ["proof (state)\nthis:\n  r y u\n  s u v\n  r v x\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "from \\<open>r v x\\<close> \\<open>r x y\\<close> \\<open>r y u\\<close>"], ["proof (chain)\npicking this:\n  r v x\n  r x y\n  r y u", "have \"r v u\""], ["proof (prove)\nusing this:\n  r v x\n  r x y\n  r y u\n\ngoal (1 subgoal):\n 1. r v u", "by(blast intro: transPD[OF \\<open>transp r\\<close>])"], ["proof (state)\nthis:\n  r v u\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "with consist"], ["proof (chain)\npicking this:\n  order_consistent r s\n  r v u", "have \"v = u\""], ["proof (prove)\nusing this:\n  order_consistent r s\n  r v u\n\ngoal (1 subgoal):\n 1. v = u", "using \\<open>s u v\\<close>"], ["proof (prove)\nusing this:\n  order_consistent r s\n  r v u\n  s u v\n\ngoal (1 subgoal):\n 1. v = u", "by(rule order_consistentD)"], ["proof (state)\nthis:\n  v = u\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "with \\<open>r y u\\<close> \\<open>r v x\\<close>"], ["proof (chain)\npicking this:\n  r y u\n  r v x\n  v = u", "have \"r y x\""], ["proof (prove)\nusing this:\n  r y u\n  r v x\n  v = u\n\ngoal (1 subgoal):\n 1. r y x", "by(blast intro: transPD[OF \\<open>transp r\\<close>])"], ["proof (state)\nthis:\n  r y x\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "with \\<open>r x y\\<close>"], ["proof (chain)\npicking this:\n  r x y\n  r y x", "show ?thesis"], ["proof (prove)\nusing this:\n  r x y\n  r y x\n\ngoal (1 subgoal):\n 1. x = y", "by(rule antisymPD[OF \\<open>antisymp r\\<close>])"], ["proof (state)\nthis:\n  x = y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x = y\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r x u; s u v; r v y\\<rbrakk> \\<Longrightarrow> x = y", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r x u; s u v; r v y\\<rbrakk> \\<Longrightarrow> x = y", "case (step u v)"], ["proof (state)\nthis:\n  r x u\n  s u v\n  r v y\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r x u; s u v; r v y\\<rbrakk> \\<Longrightarrow> x = y", "from r s consist B_subset_A \\<open>?rs^++ y x\\<close>"], ["proof (chain)\npicking this:\n  porder_on A r\n  torder_on B s\n  order_consistent r s\n  B \\<subseteq> A\n  (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ y x", "show ?thesis"], ["proof (prove)\nusing this:\n  porder_on A r\n  torder_on B s\n  order_consistent r s\n  B \\<subseteq> A\n  (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ y x\n\ngoal (1 subgoal):\n 1. x = y", "proof(cases rule: porder_torder_tranclpE)"], ["proof (state)\ngoal (2 subgoals):\n 1. r y x \\<Longrightarrow> x = y\n 2. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "case base"], ["proof (state)\nthis:\n  r y x\n\ngoal (2 subgoals):\n 1. r y x \\<Longrightarrow> x = y\n 2. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "from \\<open>r v y\\<close> \\<open>r y x\\<close> \\<open>r x u\\<close>"], ["proof (chain)\npicking this:\n  r v y\n  r y x\n  r x u", "have \"r v u\""], ["proof (prove)\nusing this:\n  r v y\n  r y x\n  r x u\n\ngoal (1 subgoal):\n 1. r v u", "by(blast intro: transPD[OF \\<open>transp r\\<close>])"], ["proof (state)\nthis:\n  r v u\n\ngoal (2 subgoals):\n 1. r y x \\<Longrightarrow> x = y\n 2. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "with order_consistent_sym[OF consist] \\<open>s u v\\<close>"], ["proof (chain)\npicking this:\n  order_consistent s r\n  s u v\n  r v u", "have \"u = v\""], ["proof (prove)\nusing this:\n  order_consistent s r\n  s u v\n  r v u\n\ngoal (1 subgoal):\n 1. u = v", "by(rule order_consistentD)"], ["proof (state)\nthis:\n  u = v\n\ngoal (2 subgoals):\n 1. r y x \\<Longrightarrow> x = y\n 2. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "with \\<open>r v y\\<close> \\<open>r x u\\<close>"], ["proof (chain)\npicking this:\n  r v y\n  r x u\n  u = v", "have \"r x y\""], ["proof (prove)\nusing this:\n  r v y\n  r x u\n  u = v\n\ngoal (1 subgoal):\n 1. r x y", "by(blast intro: transPD[OF \\<open>transp r\\<close>])"], ["proof (state)\nthis:\n  r x y\n\ngoal (2 subgoals):\n 1. r y x \\<Longrightarrow> x = y\n 2. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "thus ?thesis"], ["proof (prove)\nusing this:\n  r x y\n\ngoal (1 subgoal):\n 1. x = y", "using \\<open>r y x\\<close>"], ["proof (prove)\nusing this:\n  r x y\n  r y x\n\ngoal (1 subgoal):\n 1. x = y", "by(rule antisymPD[OF \\<open>antisymp r\\<close>])"], ["proof (state)\nthis:\n  x = y\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "case (step u' v')"], ["proof (state)\nthis:\n  r y u'\n  s u' v'\n  r v' x\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "note r_into_s = total_on_refl_on_consistent_into[OF \\<open>total_onP B s\\<close> \\<open>refl_onP B s\\<close> order_consistent_sym[OF consist]]"], ["proof (state)\nthis:\n  \\<lbrakk>?x \\<in> B; ?y \\<in> B; r ?x ?y\\<rbrakk>\n  \\<Longrightarrow> s ?x ?y\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "from \\<open>refl_onP B s\\<close> \\<open>s u v\\<close> \\<open>s u' v'\\<close>"], ["proof (chain)\npicking this:\n  refl_onP B s\n  s u v\n  s u' v'", "have \"u \\<in> B\" \"v \\<in> B\" \"u' \\<in> B\" \"v' \\<in> B\""], ["proof (prove)\nusing this:\n  refl_onP B s\n  s u v\n  s u' v'\n\ngoal (1 subgoal):\n 1. (u \\<in> B &&& v \\<in> B) &&& u' \\<in> B &&& v' \\<in> B", "by(blast dest: refl_onPD1 refl_onPD2)+"], ["proof (state)\nthis:\n  u \\<in> B\n  v \\<in> B\n  u' \\<in> B\n  v' \\<in> B\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "from \\<open>r v' x\\<close> \\<open>r x u\\<close>"], ["proof (chain)\npicking this:\n  r v' x\n  r x u", "have \"r v' u\""], ["proof (prove)\nusing this:\n  r v' x\n  r x u\n\ngoal (1 subgoal):\n 1. r v' u", "by(rule transPD[OF \\<open>transp r\\<close>])"], ["proof (state)\nthis:\n  r v' u\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "with \\<open>v' \\<in> B\\<close> \\<open>u \\<in> B\\<close>"], ["proof (chain)\npicking this:\n  v' \\<in> B\n  u \\<in> B\n  r v' u", "have \"s v' u\""], ["proof (prove)\nusing this:\n  v' \\<in> B\n  u \\<in> B\n  r v' u\n\ngoal (1 subgoal):\n 1. s v' u", "by(rule r_into_s)"], ["proof (state)\nthis:\n  s v' u\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "also"], ["proof (state)\nthis:\n  s v' u\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "note \\<open>s u v\\<close>"], ["proof (state)\nthis:\n  s u v\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "also (transPD[OF \\<open>transp s\\<close>])"], ["proof (state)\nthis:\n  s u v\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "from \\<open>r v y\\<close> \\<open>r y u'\\<close>"], ["proof (chain)\npicking this:\n  r v y\n  r y u'", "have \"r v u'\""], ["proof (prove)\nusing this:\n  r v y\n  r y u'\n\ngoal (1 subgoal):\n 1. r v u'", "by(rule transPD[OF \\<open>transp r\\<close>])"], ["proof (state)\nthis:\n  r v u'\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "with \\<open>v \\<in> B\\<close> \\<open>u' \\<in> B\\<close>"], ["proof (chain)\npicking this:\n  v \\<in> B\n  u' \\<in> B\n  r v u'", "have \"s v u'\""], ["proof (prove)\nusing this:\n  v \\<in> B\n  u' \\<in> B\n  r v u'\n\ngoal (1 subgoal):\n 1. s v u'", "by(rule r_into_s)"], ["proof (state)\nthis:\n  s v u'\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "finally (transPD[OF \\<open>transp s\\<close>])"], ["proof (chain)\npicking this:\n  s v' u'", "have \"v' = u'\""], ["proof (prove)\nusing this:\n  s v' u'\n\ngoal (1 subgoal):\n 1. v' = u'", "using \\<open>s u' v'\\<close>"], ["proof (prove)\nusing this:\n  s v' u'\n  s u' v'\n\ngoal (1 subgoal):\n 1. v' = u'", "by(rule antisymPD[OF \\<open>antisymp s\\<close>])"], ["proof (state)\nthis:\n  v' = u'\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "moreover"], ["proof (state)\nthis:\n  v' = u'\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "with \\<open>s v u'\\<close> \\<open>s v' u\\<close>"], ["proof (chain)\npicking this:\n  s v u'\n  s v' u\n  v' = u'", "have \"s v u\""], ["proof (prove)\nusing this:\n  s v u'\n  s v' u\n  v' = u'\n\ngoal (1 subgoal):\n 1. s v u", "by(blast intro: transPD[OF \\<open>transp s\\<close>])"], ["proof (state)\nthis:\n  s v u\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "with \\<open>s u v\\<close>"], ["proof (chain)\npicking this:\n  s u v\n  s v u", "have \"u = v\""], ["proof (prove)\nusing this:\n  s u v\n  s v u\n\ngoal (1 subgoal):\n 1. u = v", "by(rule antisymPD[OF \\<open>antisymp s\\<close>])"], ["proof (state)\nthis:\n  u = v\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "ultimately"], ["proof (chain)\npicking this:\n  v' = u'\n  u = v", "have \"r x y\" \"r y x\""], ["proof (prove)\nusing this:\n  v' = u'\n  u = v\n\ngoal (1 subgoal):\n 1. r x y &&& r y x", "using \\<open>r x u\\<close> \\<open>r v y\\<close> \\<open>r y u'\\<close> \\<open>r v' x\\<close>"], ["proof (prove)\nusing this:\n  v' = u'\n  u = v\n  r x u\n  r v y\n  r y u'\n  r v' x\n\ngoal (1 subgoal):\n 1. r x y &&& r y x", "by(blast intro: transPD[OF \\<open>transp r\\<close>])+"], ["proof (state)\nthis:\n  r x y\n  r y x\n\ngoal (1 subgoal):\n 1. \\<And>u v. \\<lbrakk>r y u; s u v; r v x\\<rbrakk> \\<Longrightarrow> x = y", "thus ?thesis"], ["proof (prove)\nusing this:\n  r x y\n  r y x\n\ngoal (1 subgoal):\n 1. x = y", "by(rule antisymPD[OF \\<open>antisymp r\\<close>])"], ["proof (state)\nthis:\n  x = y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x = y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x = y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma porder_on_torder_on_tranclp_porder_onI:\n  assumes r: \"porder_on A r\"\n  and s: \"torder_on B s\" \n  and consist: \"order_consistent r s\"\n  and subset: \"B \\<subseteq> A\"\n  shows \"porder_on A (\\<lambda>a b. r a b \\<or> s a b)^++\""], ["proof (prove)\ngoal (1 subgoal):\n 1. porder_on A (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+", "proof(rule porder_onI)"], ["proof (state)\ngoal (3 subgoals):\n 1. refl_onP A (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+\n 2. antisymp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+\n 3. transp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+", "let ?rs = \"\\<lambda>a b. r a b \\<or> s a b\""], ["proof (state)\ngoal (3 subgoals):\n 1. refl_onP A (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+\n 2. antisymp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+\n 3. transp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+", "from r"], ["proof (chain)\npicking this:\n  porder_on A r", "have \"refl_onP A r\""], ["proof (prove)\nusing this:\n  porder_on A r\n\ngoal (1 subgoal):\n 1. refl_onP A r", "by(rule porder_onE)"], ["proof (state)\nthis:\n  refl_onP A r\n\ngoal (3 subgoals):\n 1. refl_onP A (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+\n 2. antisymp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+\n 3. transp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+", "moreover"], ["proof (state)\nthis:\n  refl_onP A r\n\ngoal (3 subgoals):\n 1. refl_onP A (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+\n 2. antisymp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+\n 3. transp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+", "from s"], ["proof (chain)\npicking this:\n  torder_on B s", "have \"refl_onP B s\""], ["proof (prove)\nusing this:\n  torder_on B s\n\ngoal (1 subgoal):\n 1. refl_onP B s", "by(blast elim: torder_onE porder_onE)"], ["proof (state)\nthis:\n  refl_onP B s\n\ngoal (3 subgoals):\n 1. refl_onP A (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+\n 2. antisymp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+\n 3. transp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+", "ultimately"], ["proof (chain)\npicking this:\n  refl_onP A r\n  refl_onP B s", "have \"refl_onP (A \\<union> B) ?rs\""], ["proof (prove)\nusing this:\n  refl_onP A r\n  refl_onP B s\n\ngoal (1 subgoal):\n 1. refl_onP (A \\<union> B) (\\<lambda>x y. r x y \\<or> s x y)", "by(rule refl_onP_Un)"], ["proof (state)\nthis:\n  refl_onP (A \\<union> B) (\\<lambda>x y. r x y \\<or> s x y)\n\ngoal (3 subgoals):\n 1. refl_onP A (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+\n 2. antisymp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+\n 3. transp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+", "also"], ["proof (state)\nthis:\n  refl_onP (A \\<union> B) (\\<lambda>x y. r x y \\<or> s x y)\n\ngoal (3 subgoals):\n 1. refl_onP A (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+\n 2. antisymp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+\n 3. transp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+", "from subset"], ["proof (chain)\npicking this:\n  B \\<subseteq> A", "have \"A \\<union> B = A\""], ["proof (prove)\nusing this:\n  B \\<subseteq> A\n\ngoal (1 subgoal):\n 1. A \\<union> B = A", "by blast"], ["proof (state)\nthis:\n  A \\<union> B = A\n\ngoal (3 subgoals):\n 1. refl_onP A (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+\n 2. antisymp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+\n 3. transp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+", "finally"], ["proof (chain)\npicking this:\n  refl_onP A (\\<lambda>x y. r x y \\<or> s x y)", "show \"refl_onP A ?rs^++\""], ["proof (prove)\nusing this:\n  refl_onP A (\\<lambda>x y. r x y \\<or> s x y)\n\ngoal (1 subgoal):\n 1. refl_onP A (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+", "by(rule refl_onP_tranclp)"], ["proof (state)\nthis:\n  refl_onP A (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+\n\ngoal (2 subgoals):\n 1. antisymp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+\n 2. transp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+", "show \"transp ?rs^++\""], ["proof (prove)\ngoal (1 subgoal):\n 1. transp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+", "by(rule transP_tranclp)"], ["proof (state)\nthis:\n  transp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+\n\ngoal (1 subgoal):\n 1. antisymp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+", "from r s consist subset"], ["proof (chain)\npicking this:\n  porder_on A r\n  torder_on B s\n  order_consistent r s\n  B \\<subseteq> A", "show \"antisymp ?rs^++\""], ["proof (prove)\nusing this:\n  porder_on A r\n  torder_on B s\n  order_consistent r s\n  B \\<subseteq> A\n\ngoal (1 subgoal):\n 1. antisymp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+", "by (rule torder_on_porder_on_consistent_tranclp_antisym)"], ["proof (state)\nthis:\n  antisymp (\\<lambda>a b. r a b \\<or> s a b)\\<^sup>+\\<^sup>+\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma porder_on_sub_torder_on_tranclp_porder_onI:\n  assumes r: \"porder_on A r\"\n  and s: \"torder_on B s\"\n  and consist: \"order_consistent r s\"\n  and t: \"\\<And>x y. t x y \\<Longrightarrow> s x y\"\n  and subset: \"B \\<subseteq> A\"\n  shows \"porder_on A (\\<lambda>x y. r x y \\<or> t x y)^++\""], ["proof (prove)\ngoal (1 subgoal):\n 1. porder_on A (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+", "proof(rule porder_onI)"], ["proof (state)\ngoal (3 subgoals):\n 1. refl_onP A (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+\n 2. antisymp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+\n 3. transp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+", "let ?rt = \"\\<lambda>x y. r x y \\<or> t x y\""], ["proof (state)\ngoal (3 subgoals):\n 1. refl_onP A (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+\n 2. antisymp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+\n 3. transp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+", "let ?rs = \"\\<lambda>x y. r x y \\<or> s x y\""], ["proof (state)\ngoal (3 subgoals):\n 1. refl_onP A (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+\n 2. antisymp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+\n 3. transp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+", "from r s consist subset"], ["proof (chain)\npicking this:\n  porder_on A r\n  torder_on B s\n  order_consistent r s\n  B \\<subseteq> A", "have \"antisymp ?rs^++\""], ["proof (prove)\nusing this:\n  porder_on A r\n  torder_on B s\n  order_consistent r s\n  B \\<subseteq> A\n\ngoal (1 subgoal):\n 1. antisymp (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+", "by(rule torder_on_porder_on_consistent_tranclp_antisym)"], ["proof (state)\nthis:\n  antisymp (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+\n\ngoal (3 subgoals):\n 1. refl_onP A (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+\n 2. antisymp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+\n 3. transp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+", "thus \"antisymp ?rt^++\""], ["proof (prove)\nusing this:\n  antisymp (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+\n\ngoal (1 subgoal):\n 1. antisymp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+", "proof(rule antisym_subset)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a a'.\n       (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+ a\n        a' \\<Longrightarrow>\n       (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ a a'", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a a'.\n       (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+ a\n        a' \\<Longrightarrow>\n       (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ a a'", "assume \"?rt^++ x y\""], ["proof (state)\nthis:\n  (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+ x y\n\ngoal (1 subgoal):\n 1. \\<And>a a'.\n       (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+ a\n        a' \\<Longrightarrow>\n       (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ a a'", "thus \"?rs^++ x y\""], ["proof (prove)\nusing this:\n  (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+ x y\n\ngoal (1 subgoal):\n 1. (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ x y", "by(induct)(blast intro: tranclp.r_into_trancl t tranclp.trancl_into_trancl t)+"], ["proof (state)\nthis:\n  (\\<lambda>x y. r x y \\<or> s x y)\\<^sup>+\\<^sup>+ x y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  antisymp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+\n\ngoal (2 subgoals):\n 1. refl_onP A (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+\n 2. transp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+", "from s"], ["proof (chain)\npicking this:\n  torder_on B s", "have \"refl_onP B s\""], ["proof (prove)\nusing this:\n  torder_on B s\n\ngoal (1 subgoal):\n 1. refl_onP B s", "by(blast elim: porder_onE torder_onE)"], ["proof (state)\nthis:\n  refl_onP B s\n\ngoal (2 subgoals):\n 1. refl_onP A (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+\n 2. transp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+", "{"], ["proof (state)\nthis:\n  refl_onP B s\n\ngoal (2 subgoals):\n 1. refl_onP A (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+\n 2. transp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+", "fix x y"], ["proof (state)\ngoal (2 subgoals):\n 1. refl_onP A (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+\n 2. transp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+", "assume \"t x y\""], ["proof (state)\nthis:\n  t x y\n\ngoal (2 subgoals):\n 1. refl_onP A (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+\n 2. transp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+", "hence \"s x y\""], ["proof (prove)\nusing this:\n  t x y\n\ngoal (1 subgoal):\n 1. s x y", "by(rule t)"], ["proof (state)\nthis:\n  s x y\n\ngoal (2 subgoals):\n 1. refl_onP A (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+\n 2. transp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+", "hence \"x \\<in> B\" \"y \\<in> B\""], ["proof (prove)\nusing this:\n  s x y\n\ngoal (1 subgoal):\n 1. x \\<in> B &&& y \\<in> B", "by(blast dest: refl_onPD1[OF \\<open>refl_onP B s\\<close>] refl_onPD2[OF \\<open>refl_onP B s\\<close>])+"], ["proof (state)\nthis:\n  x \\<in> B\n  y \\<in> B\n\ngoal (2 subgoals):\n 1. refl_onP A (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+\n 2. transp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+", "with subset"], ["proof (chain)\npicking this:\n  B \\<subseteq> A\n  x \\<in> B\n  y \\<in> B", "have \"x \\<in> A\" \"y \\<in> A\""], ["proof (prove)\nusing this:\n  B \\<subseteq> A\n  x \\<in> B\n  y \\<in> B\n\ngoal (1 subgoal):\n 1. x \\<in> A &&& y \\<in> A", "by blast+"], ["proof (state)\nthis:\n  x \\<in> A\n  y \\<in> A\n\ngoal (2 subgoals):\n 1. refl_onP A (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+\n 2. transp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+", "}"], ["proof (state)\nthis:\n  t ?x2 ?y2 \\<Longrightarrow> ?x2 \\<in> A\n  t ?x2 ?y2 \\<Longrightarrow> ?y2 \\<in> A\n\ngoal (2 subgoals):\n 1. refl_onP A (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+\n 2. transp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+", "note t_reflD = this"], ["proof (state)\nthis:\n  t ?x2 ?y2 \\<Longrightarrow> ?x2 \\<in> A\n  t ?x2 ?y2 \\<Longrightarrow> ?y2 \\<in> A\n\ngoal (2 subgoals):\n 1. refl_onP A (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+\n 2. transp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+", "from r"], ["proof (chain)\npicking this:\n  porder_on A r", "have \"refl_onP A r\""], ["proof (prove)\nusing this:\n  porder_on A r\n\ngoal (1 subgoal):\n 1. refl_onP A r", "by(rule porder_onE)"], ["proof (state)\nthis:\n  refl_onP A r\n\ngoal (2 subgoals):\n 1. refl_onP A (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+\n 2. transp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+", "show \"refl_onP A ?rt^++\""], ["proof (prove)\ngoal (1 subgoal):\n 1. refl_onP A (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+", "proof(rule refl_onPI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a a'.\n       (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+ a\n        a' \\<Longrightarrow>\n       a \\<in> A \\<and> a' \\<in> A\n 2. \\<And>a.\n       a \\<in> A \\<Longrightarrow>\n       (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+ a a", "fix a a'"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a a'.\n       (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+ a\n        a' \\<Longrightarrow>\n       a \\<in> A \\<and> a' \\<in> A\n 2. \\<And>a.\n       a \\<in> A \\<Longrightarrow>\n       (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+ a a", "assume \"?rt^++ a a'\""], ["proof (state)\nthis:\n  (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+ a a'\n\ngoal (2 subgoals):\n 1. \\<And>a a'.\n       (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+ a\n        a' \\<Longrightarrow>\n       a \\<in> A \\<and> a' \\<in> A\n 2. \\<And>a.\n       a \\<in> A \\<Longrightarrow>\n       (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+ a a", "thus \"a \\<in> A \\<and> a' \\<in> A\""], ["proof (prove)\nusing this:\n  (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+ a a'\n\ngoal (1 subgoal):\n 1. a \\<in> A \\<and> a' \\<in> A", "by(induct)(auto dest: refl_onPD1[OF \\<open>refl_onP A r\\<close>] refl_onPD2[OF \\<open>refl_onP A r\\<close>] t_reflD)"], ["proof (state)\nthis:\n  a \\<in> A \\<and> a' \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       a \\<in> A \\<Longrightarrow>\n       (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+ a a", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       a \\<in> A \\<Longrightarrow>\n       (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+ a a", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       a \\<in> A \\<Longrightarrow>\n       (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+ a a", "assume \"a \\<in> A\""], ["proof (state)\nthis:\n  a \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       a \\<in> A \\<Longrightarrow>\n       (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+ a a", "with \\<open>refl_onP A r\\<close>"], ["proof (chain)\npicking this:\n  refl_onP A r\n  a \\<in> A", "have \"r a a\""], ["proof (prove)\nusing this:\n  refl_onP A r\n  a \\<in> A\n\ngoal (1 subgoal):\n 1. r a a", "by(rule refl_onPD)"], ["proof (state)\nthis:\n  r a a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       a \\<in> A \\<Longrightarrow>\n       (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+ a a", "thus \"?rt^++ a a\""], ["proof (prove)\nusing this:\n  r a a\n\ngoal (1 subgoal):\n 1. (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+ a a", "by(blast intro: tranclp.r_into_trancl)"], ["proof (state)\nthis:\n  (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+ a a\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  refl_onP A (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+\n\ngoal (1 subgoal):\n 1. transp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+", "show \"transp ?rt^++\""], ["proof (prove)\ngoal (1 subgoal):\n 1. transp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+", "by(rule transP_tranclp)"], ["proof (state)\nthis:\n  transp (\\<lambda>x y. r x y \\<or> t x y)\\<^sup>+\\<^sup>+\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Order restrictions\\<close>"], ["", "lemma restrictPI [intro!, simp]:\n  \"\\<lbrakk> r a b; a \\<in> A; b \\<in> A \\<rbrakk> \\<Longrightarrow> (r |` A) a b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>r a b; a \\<in> A; b \\<in> A\\<rbrakk>\n    \\<Longrightarrow> (r |` A) a b", "unfolding restrictP_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>r a b; a \\<in> A; b \\<in> A\\<rbrakk>\n    \\<Longrightarrow> r a b \\<and> a \\<in> A \\<and> b \\<in> A", "by simp"], ["", "lemma restrictPE [elim!]:\n  assumes \"(r |` A) a b\"\n  obtains \"r a b\" \"a \\<in> A\" \"b \\<in> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lbrakk>r a b; a \\<in> A; b \\<in> A\\<rbrakk>\n     \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  (r |` A) a b\n\ngoal (1 subgoal):\n 1. (\\<lbrakk>r a b; a \\<in> A; b \\<in> A\\<rbrakk>\n     \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding restrictP_def"], ["proof (prove)\nusing this:\n  r a b \\<and> a \\<in> A \\<and> b \\<in> A\n\ngoal (1 subgoal):\n 1. (\\<lbrakk>r a b; a \\<in> A; b \\<in> A\\<rbrakk>\n     \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by simp"], ["", "lemma restrictP_empty [simp]: \"R |` {} = (\\<lambda>_ _. False)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R |` {} = (\\<lambda>_ _. False)", "by(simp add: restrictP_def[abs_def])"], ["", "lemma refl_on_restrictPI:\n  \"refl_onP A r \\<Longrightarrow> refl_onP (A \\<inter> B) (r |` B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. refl_onP A r \\<Longrightarrow> refl_onP (A \\<inter> B) (r |` B)", "by(rule refl_onPI)(blast dest: refl_onPD1 refl_onPD2 refl_onPD)+"], ["", "lemma refl_on_restrictPI':\n  \"\\<lbrakk> refl_onP A r; B = A \\<inter> C \\<rbrakk> \\<Longrightarrow> refl_onP B (r |` C)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>refl_onP A r; B = A \\<inter> C\\<rbrakk>\n    \\<Longrightarrow> refl_onP B (r |` C)", "by(simp add: refl_on_restrictPI)"], ["", "lemma antisym_restrictPI:\n  \"antisymp r \\<Longrightarrow> antisymp (r |` A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. antisymp r \\<Longrightarrow> antisymp (r |` A)", "by(rule antisymPI)(blast dest: antisymPD)"], ["", "lemma trans_restrictPI:\n  \"transp r \\<Longrightarrow> transp (r |` A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. transp r \\<Longrightarrow> transp (r |` A)", "by(rule transPI)(blast dest: transPD)"], ["", "lemma porder_on_restrictPI:\n  \"porder_on A r \\<Longrightarrow> porder_on (A \\<inter> B) (r |` B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. porder_on A r \\<Longrightarrow> porder_on (A \\<inter> B) (r |` B)", "by(blast elim: porder_onE intro: refl_on_restrictPI antisym_restrictPI trans_restrictPI porder_onI)"], ["", "lemma porder_on_restrictPI':\n  \"\\<lbrakk> porder_on A r; B = A \\<inter> C \\<rbrakk> \\<Longrightarrow> porder_on B (r |` C)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>porder_on A r; B = A \\<inter> C\\<rbrakk>\n    \\<Longrightarrow> porder_on B (r |` C)", "by(simp add: porder_on_restrictPI)"], ["", "lemma total_on_restrictPI:\n  \"total_onP A r \\<Longrightarrow> total_onP (A \\<inter> B) (r |` B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. total_onP A r \\<Longrightarrow> total_onP (A \\<inter> B) (r |` B)", "by(blast intro: total_onPI dest: total_onPD)"], ["", "lemma total_on_restrictPI':\n  \"\\<lbrakk> total_onP A r; B = A \\<inter> C \\<rbrakk> \\<Longrightarrow> total_onP B (r |` C)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>total_onP A r; B = A \\<inter> C\\<rbrakk>\n    \\<Longrightarrow> total_onP B (r |` C)", "by(simp add: total_on_restrictPI)"], ["", "lemma torder_on_restrictPI:\n  \"torder_on A r \\<Longrightarrow> torder_on (A \\<inter> B) (r |` B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. torder_on A r \\<Longrightarrow> torder_on (A \\<inter> B) (r |` B)", "by(blast elim: torder_onE intro: torder_onI porder_on_restrictPI total_on_restrictPI)"], ["", "lemma torder_on_restrictPI':\n  \"\\<lbrakk> torder_on A r; B = A \\<inter> C \\<rbrakk> \\<Longrightarrow> torder_on B (r |` C)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>torder_on A r; B = A \\<inter> C\\<rbrakk>\n    \\<Longrightarrow> torder_on B (r |` C)", "by(simp add: torder_on_restrictPI)"], ["", "lemma restrictP_commute:\n  fixes r :: \"'a \\<Rightarrow> 'a \\<Rightarrow> bool\"\n  shows \"r |` A |` B = r |` B |` A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r |` A |` B = r |` B |` A", "by(blast intro!: ext)"], ["", "lemma restrictP_subsume1:\n  fixes r :: \"'a \\<Rightarrow> 'a \\<Rightarrow> bool\"\n  assumes \"A \\<subseteq> B\"\n  shows \"r |` A |` B = r |` A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r |` A |` B = r |` A", "using assms"], ["proof (prove)\nusing this:\n  A \\<subseteq> B\n\ngoal (1 subgoal):\n 1. r |` A |` B = r |` A", "by(blast intro!: ext)"], ["", "lemma restrictP_subsume2:\n  fixes r :: \"'a \\<Rightarrow> 'a \\<Rightarrow> bool\"\n  assumes \"B \\<subseteq> A\"\n  shows \"r |` A |` B = r |` B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r |` A |` B = r |` B", "using assms"], ["proof (prove)\nusing this:\n  B \\<subseteq> A\n\ngoal (1 subgoal):\n 1. r |` A |` B = r |` B", "by(blast intro!: ext)"], ["", "lemma restrictP_idem [simp]:\n  fixes r :: \"'a \\<Rightarrow> 'a \\<Rightarrow> bool\"\n  shows \"r |` A |` A = r |` A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r |` A |` A = r |` A", "by(simp add: restrictP_subsume1)"], ["", "subsection \\<open>Maximal elements w.r.t. a total order\\<close>"], ["", "definition max_torder :: \"('a \\<Rightarrow> 'a \\<Rightarrow> bool) \\<Rightarrow> 'a \\<Rightarrow> 'a \\<Rightarrow> 'a\"\nwhere \"max_torder r a b = (if Domainp r a \\<and> Domainp r b then if r a b then b else a\n  else if a = b then a else SOME a. \\<not> Domainp r a)\""], ["", "lemma refl_on_DomainD: \"refl_on A r \\<Longrightarrow> A = Domain r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. refl_on A r \\<Longrightarrow> A = Domain r", "by(auto simp add: Domain_unfold dest: refl_onD refl_onD1)"], ["", "lemma refl_onP_DomainPD: \"refl_onP A r \\<Longrightarrow> A = {a. Domainp r a}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. refl_onP A r \\<Longrightarrow> A = {a. Domainp r a}", "by(drule refl_on_DomainD) auto"], ["", "lemma semilattice_max_torder:\n  assumes tot: \"torder_on A r\"\n  shows \"semilattice (max_torder r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. semilattice (max_torder r)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. semilattice (max_torder r)", "from tot"], ["proof (chain)\npicking this:\n  torder_on A r", "have as: \"antisymp r\" \n    and to: \"total_onP A r\" \n    and trans: \"transp r\"\n    and refl: \"refl_onP A r\""], ["proof (prove)\nusing this:\n  torder_on A r\n\ngoal (1 subgoal):\n 1. (antisymp r &&& total_onP A r) &&& transp r &&& refl_onP A r", "by(auto elim: torder_onE porder_onE)"], ["proof (state)\nthis:\n  antisymp r\n  total_onP A r\n  transp r\n  refl_onP A r\n\ngoal (1 subgoal):\n 1. semilattice (max_torder r)", "from refl"], ["proof (chain)\npicking this:\n  refl_onP A r", "have \"{a. Domainp r a} = A\""], ["proof (prove)\nusing this:\n  refl_onP A r\n\ngoal (1 subgoal):\n 1. {a. Domainp r a} = A", "by (rule refl_onP_DomainPD[symmetric])"], ["proof (state)\nthis:\n  {a. Domainp r a} = A\n\ngoal (1 subgoal):\n 1. semilattice (max_torder r)", "from this [symmetric]"], ["proof (chain)\npicking this:\n  A = {a. Domainp r a}", "have \"domain\": \"\\<And>a. Domainp r a \\<longleftrightarrow> a \\<in> A\""], ["proof (prove)\nusing this:\n  A = {a. Domainp r a}\n\ngoal (1 subgoal):\n 1. \\<And>a. Domainp r a = (a \\<in> A)", "by simp"], ["proof (state)\nthis:\n  Domainp r ?a = (?a \\<in> A)\n\ngoal (1 subgoal):\n 1. semilattice (max_torder r)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. semilattice (max_torder r)", "proof"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>a b c.\n       max_torder r (max_torder r a b) c = max_torder r a (max_torder r b c)\n 2. \\<And>a b. max_torder r a b = max_torder r b a\n 3. \\<And>a. max_torder r a a = a", "fix x y z"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>a b c.\n       max_torder r (max_torder r a b) c = max_torder r a (max_torder r b c)\n 2. \\<And>a b. max_torder r a b = max_torder r b a\n 3. \\<And>a. max_torder r a a = a", "show \"max_torder r (max_torder r x y) z = max_torder r x (max_torder r y z)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. max_torder r (max_torder r x y) z = max_torder r x (max_torder r y z)", "proof (cases \"x \\<noteq> y \\<and> x \\<noteq> z \\<and> y \\<noteq> z\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<noteq> y \\<and> x \\<noteq> z \\<and> y \\<noteq> z \\<Longrightarrow>\n    max_torder r (max_torder r x y) z = max_torder r x (max_torder r y z)\n 2. \\<not> (x \\<noteq> y \\<and>\n            x \\<noteq> z \\<and> y \\<noteq> z) \\<Longrightarrow>\n    max_torder r (max_torder r x y) z = max_torder r x (max_torder r y z)", "case True"], ["proof (state)\nthis:\n  x \\<noteq> y \\<and> x \\<noteq> z \\<and> y \\<noteq> z\n\ngoal (2 subgoals):\n 1. x \\<noteq> y \\<and> x \\<noteq> z \\<and> y \\<noteq> z \\<Longrightarrow>\n    max_torder r (max_torder r x y) z = max_torder r x (max_torder r y z)\n 2. \\<not> (x \\<noteq> y \\<and>\n            x \\<noteq> z \\<and> y \\<noteq> z) \\<Longrightarrow>\n    max_torder r (max_torder r x y) z = max_torder r x (max_torder r y z)", "have *: \"\\<And>a b. a \\<noteq> b \\<Longrightarrow> max_torder r a b = (if Domainp r a \\<and> Domainp r b then\n        if r a b then b else a else SOME a. \\<not> Domainp r a)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a b.\n       a \\<noteq> b \\<Longrightarrow>\n       max_torder r a b =\n       (if Domainp r a \\<and> Domainp r b then if r a b then b else a\n        else SOME a. \\<not> Domainp r a)", "by (auto simp add: max_torder_def)"], ["proof (state)\nthis:\n  ?a \\<noteq> ?b \\<Longrightarrow>\n  max_torder r ?a ?b =\n  (if Domainp r ?a \\<and> Domainp r ?b then if r ?a ?b then ?b else ?a\n   else SOME a. \\<not> Domainp r a)\n\ngoal (2 subgoals):\n 1. x \\<noteq> y \\<and> x \\<noteq> z \\<and> y \\<noteq> z \\<Longrightarrow>\n    max_torder r (max_torder r x y) z = max_torder r x (max_torder r y z)\n 2. \\<not> (x \\<noteq> y \\<and>\n            x \\<noteq> z \\<and> y \\<noteq> z) \\<Longrightarrow>\n    max_torder r (max_torder r x y) z = max_torder r x (max_torder r y z)", "with True"], ["proof (chain)\npicking this:\n  x \\<noteq> y \\<and> x \\<noteq> z \\<and> y \\<noteq> z\n  ?a \\<noteq> ?b \\<Longrightarrow>\n  max_torder r ?a ?b =\n  (if Domainp r ?a \\<and> Domainp r ?b then if r ?a ?b then ?b else ?a\n   else SOME a. \\<not> Domainp r a)", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<noteq> y \\<and> x \\<noteq> z \\<and> y \\<noteq> z\n  ?a \\<noteq> ?b \\<Longrightarrow>\n  max_torder r ?a ?b =\n  (if Domainp r ?a \\<and> Domainp r ?b then if r ?a ?b then ?b else ?a\n   else SOME a. \\<not> Domainp r a)\n\ngoal (1 subgoal):\n 1. max_torder r (max_torder r x y) z = max_torder r x (max_torder r y z)", "apply (simp only: max_torder_def \"domain\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<noteq> y \\<and> x \\<noteq> z \\<and> y \\<noteq> z;\n     \\<And>a b.\n        a \\<noteq> b \\<Longrightarrow>\n        (if a \\<in> A \\<and> b \\<in> A then if r a b then b else a\n         else if False then a else SOME a. a \\<notin> A) =\n        (if a \\<in> A \\<and> b \\<in> A then if r a b then b else a\n         else SOME a. a \\<notin> A)\\<rbrakk>\n    \\<Longrightarrow> (if (if x \\<in> A \\<and> y \\<in> A\n                           then if r x y then y else x\n                           else if False then x else SOME a. a \\<notin> A)\n                          \\<in> A \\<and>\n                          z \\<in> A\n                       then if r (if x \\<in> A \\<and> y \\<in> A\n                                  then if r x y then y else x\n                                  else if False then x\n else SOME a. a \\<notin> A)\n                                z\n                            then z\n                            else if x \\<in> A \\<and> y \\<in> A\n                                 then if r x y then y else x\n                                 else if False then x\nelse SOME a. a \\<notin> A\n                       else if (if x \\<in> A \\<and> y \\<in> A\n                                then if r x y then y else x\n                                else if False then x\n                                     else SOME a. a \\<notin> A) =\n                               z\n                            then if x \\<in> A \\<and> y \\<in> A\n                                 then if r x y then y else x\n                                 else if False then x\nelse SOME a. a \\<notin> A\n                            else SOME a. a \\<notin> A) =\n                      (if x \\<in> A \\<and>\n                          (if y \\<in> A \\<and> z \\<in> A\n                           then if r y z then z else y\n                           else if False then y else SOME a. a \\<notin> A)\n                          \\<in> A\n                       then if r x (if y \\<in> A \\<and> z \\<in> A\n                                    then if r y z then z else y\n                                    else if False then y\n   else SOME a. a \\<notin> A)\n                            then if y \\<in> A \\<and> z \\<in> A\n                                 then if r y z then z else y\n                                 else if False then y\nelse SOME a. a \\<notin> A\n                            else x\n                       else if x =\n                               (if y \\<in> A \\<and> z \\<in> A\n                                then if r y z then z else y\n                                else if False then y\n                                     else SOME a. a \\<notin> A)\n                            then x else SOME a. a \\<notin> A)", "apply (auto split!: if_splits)"], ["proof (prove)\ngoal (11 subgoals):\n 1. \\<lbrakk>\\<And>a b.\n                a \\<noteq> b \\<Longrightarrow>\n                (if a \\<in> A \\<and> b \\<in> A then if r a b then b else a\n                 else if False then a else SOME a. a \\<notin> A) =\n                (if a \\<in> A \\<and> b \\<in> A then if r a b then b else a\n                 else SOME a. a \\<notin> A);\n     x \\<noteq> y; x \\<noteq> z; y \\<noteq> z; x \\<in> A;\n     r x (SOME a. a \\<notin> A); y \\<notin> A;\n     (SOME a. a \\<notin> A) \\<in> A; z \\<in> A; r (SOME a. a \\<notin> A) z;\n     z \\<noteq> (SOME a. a \\<notin> A)\\<rbrakk>\n    \\<Longrightarrow> False\n 2. \\<lbrakk>\\<And>a b.\n                a \\<noteq> b \\<Longrightarrow>\n                (if a \\<in> A \\<and> b \\<in> A then if r a b then b else a\n                 else if False then a else SOME a. a \\<notin> A) =\n                (if a \\<in> A \\<and> b \\<in> A then if r a b then b else a\n                 else SOME a. a \\<notin> A);\n     x \\<noteq> y; x \\<noteq> z; y \\<noteq> z; x \\<in> A; z \\<in> A; r y z;\n     \\<not> r x z; r x y; y \\<in> A\\<rbrakk>\n    \\<Longrightarrow> False\n 3. \\<lbrakk>\\<And>a b.\n                a \\<noteq> b \\<Longrightarrow>\n                (if a \\<in> A \\<and> b \\<in> A then if r a b then b else a\n                 else if False then a else SOME a. a \\<notin> A) =\n                (if a \\<in> A \\<and> b \\<in> A then if r a b then b else a\n                 else SOME a. a \\<notin> A);\n     x \\<noteq> y; x \\<noteq> z; y \\<noteq> z; x \\<in> A; z \\<in> A; r x z;\n     y \\<in> A; \\<not> r y z; \\<not> r x y\\<rbrakk>\n    \\<Longrightarrow> False\n 4. \\<lbrakk>\\<And>a b.\n                a \\<noteq> b \\<Longrightarrow>\n                (if a \\<in> A \\<and> b \\<in> A then if r a b then b else a\n                 else if False then a else SOME a. a \\<notin> A) =\n                (if a \\<in> A \\<and> b \\<in> A then if r a b then b else a\n                 else SOME a. a \\<notin> A);\n     x \\<noteq> y; x \\<noteq> z; y \\<noteq> z; x \\<in> A;\n     \\<not> r x (SOME a. a \\<notin> A); z \\<in> A;\n     r (SOME a. a \\<notin> A) z; y \\<notin> A;\n     (SOME a. a \\<notin> A) \\<in> A\\<rbrakk>\n    \\<Longrightarrow> False\n 5. \\<lbrakk>\\<And>a b.\n                a \\<noteq> b \\<Longrightarrow>\n                (if a \\<in> A \\<and> b \\<in> A then if r a b then b else a\n                 else if False then a else SOME a. a \\<notin> A) =\n                (if a \\<in> A \\<and> b \\<in> A then if r a b then b else a\n                 else SOME a. a \\<notin> A);\n     x \\<noteq> y; x \\<noteq> z; y \\<noteq> z; x \\<in> A;\n     (SOME a. a \\<notin> A) \\<in> A; \\<not> r x (SOME a. a \\<notin> A);\n     z \\<in> A; \\<not> r (SOME a. a \\<notin> A) z; y \\<notin> A\\<rbrakk>\n    \\<Longrightarrow> (SOME a. a \\<notin> A) = x\n 6. \\<lbrakk>\\<And>a b.\n                a \\<noteq> b \\<Longrightarrow>\n                (if a \\<in> A \\<and> b \\<in> A then if r a b then b else a\n                 else if False then a else SOME a. a \\<notin> A) =\n                (if a \\<in> A \\<and> b \\<in> A then if r a b then b else a\n                 else SOME a. a \\<notin> A);\n     x \\<noteq> y; x \\<noteq> z; x \\<in> A;\n     \\<not> r x (SOME a. a \\<notin> A); z \\<notin> A;\n     (SOME a. a \\<notin> A) \\<in> A; (SOME a. a \\<notin> A) \\<noteq> x;\n     y \\<in> A; r x y; y \\<noteq> z\\<rbrakk>\n    \\<Longrightarrow> False\n 7. \\<lbrakk>\\<And>a b.\n                a \\<noteq> b \\<Longrightarrow>\n                (if a \\<in> A \\<and> b \\<in> A then if r a b then b else a\n                 else if False then a else SOME a. a \\<notin> A) =\n                (if a \\<in> A \\<and> b \\<in> A then if r a b then b else a\n                 else SOME a. a \\<notin> A);\n     x \\<noteq> y; y \\<noteq> z; x \\<in> A;\n     \\<not> r x (SOME a. a \\<notin> A); z \\<notin> A;\n     (SOME a. a \\<notin> A) \\<in> A; (SOME a. a \\<notin> A) \\<noteq> x;\n     y \\<in> A; \\<not> r x y; x \\<noteq> z\\<rbrakk>\n    \\<Longrightarrow> False\n 8. \\<lbrakk>\\<And>a b.\n                a \\<noteq> b \\<Longrightarrow>\n                (if a \\<in> A \\<and> b \\<in> A then if r a b then b else a\n                 else if False then a else SOME a. a \\<notin> A) =\n                (if a \\<in> A \\<and> b \\<in> A then if r a b then b else a\n                 else SOME a. a \\<notin> A);\n     x \\<noteq> y; x \\<noteq> z; y \\<noteq> z; x \\<in> A;\n     \\<not> r x (SOME a. a \\<notin> A); (SOME a. a \\<notin> A) \\<in> A;\n     (SOME a. a \\<notin> A) \\<noteq> x; y \\<notin> A;\n     (SOME a. a \\<notin> A) \\<noteq> z\\<rbrakk>\n    \\<Longrightarrow> z \\<in> A\n 9. \\<lbrakk>\\<And>a b.\n                a \\<noteq> b \\<Longrightarrow>\n                (if a \\<in> A \\<and> b \\<in> A then if r a b then b else a\n                 else if False then a else SOME a. a \\<notin> A) =\n                (if a \\<in> A \\<and> b \\<in> A then if r a b then b else a\n                 else SOME a. a \\<notin> A);\n     x \\<noteq> y; y \\<noteq> z; y \\<in> A; z \\<in> A; r y z; x \\<noteq> z;\n     x \\<notin> A; (SOME a. a \\<notin> A) \\<in> A;\n     r (SOME a. a \\<notin> A) z; z \\<noteq> (SOME a. a \\<notin> A)\\<rbrakk>\n    \\<Longrightarrow> False\n 10. \\<lbrakk>\\<And>a b.\n                 a \\<noteq> b \\<Longrightarrow>\n                 (if a \\<in> A \\<and> b \\<in> A then if r a b then b else a\n                  else if False then a else SOME a. a \\<notin> A) =\n                 (if a \\<in> A \\<and> b \\<in> A then if r a b then b else a\n                  else SOME a. a \\<notin> A);\n      x \\<noteq> z; y \\<noteq> z; y \\<in> A; z \\<in> A; \\<not> r y z;\n      x \\<noteq> y; x \\<notin> A; (SOME a. a \\<notin> A) \\<in> A;\n      r (SOME a. a \\<notin> A) z; z \\<noteq> (SOME a. a \\<notin> A)\\<rbrakk>\n     \\<Longrightarrow> False\nA total of 11 subgoals...", "apply (blast dest: total_onPD [OF to] transPD [OF trans] antisymPD [OF as] refl_onPD1 [OF refl] refl_onPD2 [OF refl] someI [where P=\"\\<lambda>a. a \\<notin> A\"])+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  max_torder r (max_torder r x y) z = max_torder r x (max_torder r y z)\n\ngoal (1 subgoal):\n 1. \\<not> (x \\<noteq> y \\<and>\n            x \\<noteq> z \\<and> y \\<noteq> z) \\<Longrightarrow>\n    max_torder r (max_torder r x y) z = max_torder r x (max_torder r y z)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (x \\<noteq> y \\<and>\n            x \\<noteq> z \\<and> y \\<noteq> z) \\<Longrightarrow>\n    max_torder r (max_torder r x y) z = max_torder r x (max_torder r y z)", "have max_torder_idem: \"\\<And>a. max_torder r a a = a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a. max_torder r a a = a", "by (simp add: max_torder_def)"], ["proof (state)\nthis:\n  max_torder r ?a ?a = ?a\n\ngoal (1 subgoal):\n 1. \\<not> (x \\<noteq> y \\<and>\n            x \\<noteq> z \\<and> y \\<noteq> z) \\<Longrightarrow>\n    max_torder r (max_torder r x y) z = max_torder r x (max_torder r y z)", "case False"], ["proof (state)\nthis:\n  \\<not> (x \\<noteq> y \\<and> x \\<noteq> z \\<and> y \\<noteq> z)\n\ngoal (1 subgoal):\n 1. \\<not> (x \\<noteq> y \\<and>\n            x \\<noteq> z \\<and> y \\<noteq> z) \\<Longrightarrow>\n    max_torder r (max_torder r x y) z = max_torder r x (max_torder r y z)", "then"], ["proof (chain)\npicking this:\n  \\<not> (x \\<noteq> y \\<and> x \\<noteq> z \\<and> y \\<noteq> z)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> (x \\<noteq> y \\<and> x \\<noteq> z \\<and> y \\<noteq> z)\n\ngoal (1 subgoal):\n 1. max_torder r (max_torder r x y) z = max_torder r x (max_torder r y z)", "apply (auto simp add: max_torder_idem)"], ["proof (prove)\ngoal (3 subgoals):\n 1. x = y \\<Longrightarrow>\n    max_torder r y z = max_torder r y (max_torder r y z)\n 2. x = z \\<Longrightarrow>\n    max_torder r (max_torder r z y) z = max_torder r z (max_torder r y z)\n 3. y = z \\<Longrightarrow>\n    max_torder r (max_torder r x z) z = max_torder r x z", "apply (auto simp add: max_torder_def \"domain\" dest: someI [where P=\"\\<lambda>a. a \\<notin> A\"])"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  max_torder r (max_torder r x y) z = max_torder r x (max_torder r y z)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  max_torder r (max_torder r x y) z = max_torder r x (max_torder r y z)\n\ngoal (2 subgoals):\n 1. \\<And>a b. max_torder r a b = max_torder r b a\n 2. \\<And>a. max_torder r a a = a", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b. max_torder r a b = max_torder r b a\n 2. \\<And>a. max_torder r a a = a", "fix x y"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b. max_torder r a b = max_torder r b a\n 2. \\<And>a. max_torder r a a = a", "show \"max_torder r x y = max_torder r y x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. max_torder r x y = max_torder r y x", "by (auto simp add: max_torder_def \"domain\" dest: total_onPD [OF to] antisymPD [OF as])"], ["proof (state)\nthis:\n  max_torder r x y = max_torder r y x\n\ngoal (1 subgoal):\n 1. \\<And>a. max_torder r a a = a", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a. max_torder r a a = a", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a. max_torder r a a = a", "show \"max_torder r x x = x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. max_torder r x x = x", "by (simp add: max_torder_def)"], ["proof (state)\nthis:\n  max_torder r x x = x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  semilattice (max_torder r)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma max_torder_ge_conv_disj:\n  assumes tot: \"torder_on A r\" and x: \"x \\<in> A\" and y: \"y \\<in> A\"\n  shows \"r z (max_torder r x y) \\<longleftrightarrow> r z x \\<or> r z y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r z (max_torder r x y) = (r z x \\<or> r z y)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. r z (max_torder r x y) = (r z x \\<or> r z y)", "from tot"], ["proof (chain)\npicking this:\n  torder_on A r", "have as: \"antisymp r\" \n    and to: \"total_onP A r\" \n    and trans: \"transp r\"\n    and refl: \"refl_onP A r\""], ["proof (prove)\nusing this:\n  torder_on A r\n\ngoal (1 subgoal):\n 1. (antisymp r &&& total_onP A r) &&& transp r &&& refl_onP A r", "by(auto elim: torder_onE porder_onE)"], ["proof (state)\nthis:\n  antisymp r\n  total_onP A r\n  transp r\n  refl_onP A r\n\ngoal (1 subgoal):\n 1. r z (max_torder r x y) = (r z x \\<or> r z y)", "from refl"], ["proof (chain)\npicking this:\n  refl_onP A r", "have \"{a. Domainp r a} = A\""], ["proof (prove)\nusing this:\n  refl_onP A r\n\ngoal (1 subgoal):\n 1. {a. Domainp r a} = A", "by (rule refl_onP_DomainPD[symmetric])"], ["proof (state)\nthis:\n  {a. Domainp r a} = A\n\ngoal (1 subgoal):\n 1. r z (max_torder r x y) = (r z x \\<or> r z y)", "from this [symmetric]"], ["proof (chain)\npicking this:\n  A = {a. Domainp r a}", "have \"domain\": \"\\<And>a. Domainp r a \\<longleftrightarrow> a \\<in> A\""], ["proof (prove)\nusing this:\n  A = {a. Domainp r a}\n\ngoal (1 subgoal):\n 1. \\<And>a. Domainp r a = (a \\<in> A)", "by simp"], ["proof (state)\nthis:\n  Domainp r ?a = (?a \\<in> A)\n\ngoal (1 subgoal):\n 1. r z (max_torder r x y) = (r z x \\<or> r z y)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. r z (max_torder r x y) = (r z x \\<or> r z y)", "using x y"], ["proof (prove)\nusing this:\n  x \\<in> A\n  y \\<in> A\n\ngoal (1 subgoal):\n 1. r z (max_torder r x y) = (r z x \\<or> r z y)", "by(simp add: max_torder_def \"domain\")(blast dest: total_onPD[OF to] transPD[OF trans])"], ["proof (state)\nthis:\n  r z (max_torder r x y) = (r z x \\<or> r z y)\n\ngoal:\nNo subgoals!", "qed"], ["", "definition Max_torder :: \"('a \\<Rightarrow> 'a \\<Rightarrow> bool) \\<Rightarrow> 'a set \\<Rightarrow> 'a\"\nwhere\n  \"Max_torder r = semilattice_set.F (max_torder r)\""], ["", "context\n  fixes A r\n  assumes tot: \"torder_on A r\"\nbegin"], ["", "lemma semilattice_set:\n  \"semilattice_set (max_torder r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. semilattice_set (max_torder r)", "by (rule semilattice_set.intro, rule semilattice_max_torder) (fact tot)"], ["", "lemma domain:\n  \"Domainp r a \\<longleftrightarrow> a \\<in> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Domainp r a = (a \\<in> A)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Domainp r a = (a \\<in> A)", "from tot"], ["proof (chain)\npicking this:\n  torder_on A r", "have \"{a. Domainp r a} = A\""], ["proof (prove)\nusing this:\n  torder_on A r\n\ngoal (1 subgoal):\n 1. {a. Domainp r a} = A", "by (auto elim: torder_onE porder_onE dest: refl_onP_DomainPD [symmetric])"], ["proof (state)\nthis:\n  {a. Domainp r a} = A\n\ngoal (1 subgoal):\n 1. Domainp r a = (a \\<in> A)", "from this [symmetric]"], ["proof (chain)\npicking this:\n  A = {a. Domainp r a}", "show ?thesis"], ["proof (prove)\nusing this:\n  A = {a. Domainp r a}\n\ngoal (1 subgoal):\n 1. Domainp r a = (a \\<in> A)", "by simp"], ["proof (state)\nthis:\n  Domainp r a = (a \\<in> A)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Max_torder_in_Domain:\n  assumes B: \"finite B\" \"B \\<noteq> {}\" \"B \\<subseteq> A\"\n  shows \"Max_torder r B \\<in> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Max_torder r B \\<in> A", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Max_torder r B \\<in> A", "interpret Max_torder: semilattice_set \"max_torder r\"\n  rewrites\n    \"semilattice_set.F (max_torder r) = Max_torder r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. semilattice_set (max_torder r) &&&\n    semilattice_set.F (max_torder r) = Max_torder r", "by (fact semilattice_set Max_torder_def [symmetric])+"], ["proof (state)\ngoal (1 subgoal):\n 1. Max_torder r B \\<in> A", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. Max_torder r B \\<in> A", "using B"], ["proof (prove)\nusing this:\n  finite B\n  B \\<noteq> {}\n  B \\<subseteq> A\n\ngoal (1 subgoal):\n 1. Max_torder r B \\<in> A", "by (induct rule: finite_ne_induct) (simp_all add: max_torder_def \"domain\")"], ["proof (state)\nthis:\n  Max_torder r B \\<in> A\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Max_torder_in_set:\n  assumes B: \"finite B\" \"B \\<noteq> {}\" \"B \\<subseteq> A\"\n  shows \"Max_torder r B \\<in> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Max_torder r B \\<in> B", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Max_torder r B \\<in> B", "interpret Max_torder: semilattice_set \"max_torder r\"\n  rewrites\n    \"semilattice_set.F (max_torder r) = Max_torder r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. semilattice_set (max_torder r) &&&\n    semilattice_set.F (max_torder r) = Max_torder r", "by (fact semilattice_set Max_torder_def [symmetric])+"], ["proof (state)\ngoal (1 subgoal):\n 1. Max_torder r B \\<in> B", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. Max_torder r B \\<in> B", "using B"], ["proof (prove)\nusing this:\n  finite B\n  B \\<noteq> {}\n  B \\<subseteq> A\n\ngoal (1 subgoal):\n 1. Max_torder r B \\<in> B", "by (induct rule: finite_ne_induct) (auto simp add: max_torder_def \"domain\")"], ["proof (state)\nthis:\n  Max_torder r B \\<in> B\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Max_torder_above_iff:\n  assumes B: \"finite B\" \"B \\<noteq> {}\" \"B \\<subseteq> A\"\n  shows \"r x (Max_torder r B) \\<longleftrightarrow> (\\<exists>a\\<in>B. r x a)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r x (Max_torder r B) = (\\<exists>a\\<in>B. r x a)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. r x (Max_torder r B) = (\\<exists>a\\<in>B. r x a)", "interpret Max_torder: semilattice_set \"max_torder r\"\n  rewrites\n    \"semilattice_set.F (max_torder r) = Max_torder r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. semilattice_set (max_torder r) &&&\n    semilattice_set.F (max_torder r) = Max_torder r", "by (fact semilattice_set Max_torder_def [symmetric])+"], ["proof (state)\ngoal (1 subgoal):\n 1. r x (Max_torder r B) = (\\<exists>a\\<in>B. r x a)", "from B"], ["proof (chain)\npicking this:\n  finite B\n  B \\<noteq> {}\n  B \\<subseteq> A", "show ?thesis"], ["proof (prove)\nusing this:\n  finite B\n  B \\<noteq> {}\n  B \\<subseteq> A\n\ngoal (1 subgoal):\n 1. r x (Max_torder r B) = (\\<exists>a\\<in>B. r x a)", "by (induct rule: finite_ne_induct) (simp_all add: max_torder_ge_conv_disj [OF tot] Max_torder_in_Domain)"], ["proof (state)\nthis:\n  r x (Max_torder r B) = (\\<exists>a\\<in>B. r x a)\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "lemma Max_torder_above:\n  assumes tot: \"torder_on A r\"\n  and \"finite B\" \"a \\<in> B\" \"B \\<subseteq> A\"\n  shows \"r a (Max_torder r B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r a (Max_torder r B)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. r a (Max_torder r B)", "from tot"], ["proof (chain)\npicking this:\n  torder_on A r", "have refl: \"refl_onP A r\""], ["proof (prove)\nusing this:\n  torder_on A r\n\ngoal (1 subgoal):\n 1. refl_onP A r", "by(auto elim: torder_onE porder_onE)"], ["proof (state)\nthis:\n  refl_onP A r\n\ngoal (1 subgoal):\n 1. r a (Max_torder r B)", "with \\<open>a \\<in> B\\<close> \\<open>B \\<subseteq> A\\<close>"], ["proof (chain)\npicking this:\n  a \\<in> B\n  B \\<subseteq> A\n  refl_onP A r", "have \"r a a\""], ["proof (prove)\nusing this:\n  a \\<in> B\n  B \\<subseteq> A\n  refl_onP A r\n\ngoal (1 subgoal):\n 1. r a a", "by(blast dest: refl_onPD[OF refl])"], ["proof (state)\nthis:\n  r a a\n\ngoal (1 subgoal):\n 1. r a (Max_torder r B)", "from \\<open>a \\<in> B\\<close>"], ["proof (chain)\npicking this:\n  a \\<in> B", "have \"B \\<noteq> {}\""], ["proof (prove)\nusing this:\n  a \\<in> B\n\ngoal (1 subgoal):\n 1. B \\<noteq> {}", "by auto"], ["proof (state)\nthis:\n  B \\<noteq> {}\n\ngoal (1 subgoal):\n 1. r a (Max_torder r B)", "from Max_torder_above_iff [OF tot \\<open>finite B\\<close> this \\<open>B \\<subseteq> A\\<close>, of a] \\<open>r a a\\<close> \\<open>a \\<in> B\\<close>"], ["proof (chain)\npicking this:\n  r a (Max_torder r B) = (\\<exists>aa\\<in>B. r a aa)\n  r a a\n  a \\<in> B", "show ?thesis"], ["proof (prove)\nusing this:\n  r a (Max_torder r B) = (\\<exists>aa\\<in>B. r a aa)\n  r a a\n  a \\<in> B\n\ngoal (1 subgoal):\n 1. r a (Max_torder r B)", "by blast"], ["proof (state)\nthis:\n  r a (Max_torder r B)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma inv_imageP_id [simp]: \"inv_imageP R id = R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inv_imageP R id = R", "by(simp add: fun_eq_iff)"], ["", "lemma inv_into_id [simp]: \"a \\<in> A \\<Longrightarrow> inv_into A id a = a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in> A \\<Longrightarrow> inv_into A id a = a", "by (metis f_inv_into_f id_apply image_id)"], ["", "end"]]}