{"file_name": "/home/qj213/afp-2021-10-22/thys/QR_Decomposition/Projections.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/QR_Decomposition", "problem_names": ["lemma proj_onto_sum_rw: \n  \"sum (\\<lambda>x. (x \\<bullet> v / (x \\<bullet> x)) *\\<^sub>R x) A = sum (\\<lambda>x. (v \\<bullet> x / (x \\<bullet> x)) *\\<^sub>R x) A\"", "lemma vector_sub_project_orthogonal_proj:\n  fixes b x :: \"'a::euclidean_space\"\n  shows \"inner b (x - proj x b) = 0\"", "lemma orthogonal_proj_set:\n  assumes yC: \"y\\<in>C\" and C: \"finite C\" and p: \"pairwise orthogonal C\"\n  shows \"orthogonal (a - proj_onto a C) y\"", "lemma pairwise_orthogonal_proj_set:\n  assumes C: \"finite C\" and p: \"pairwise orthogonal C\"\n  shows \"pairwise orthogonal (insert (a - proj_onto a C) C)\"", "lemma in_orthogonal_complement_imp_orthogonal:\n  assumes x: \"y \\<in> S\"\n  and \"x \\<in> orthogonal_complement S\"\n  shows \"orthogonal x y\"", "lemma subspace_orthogonal_complement: \"subspace (orthogonal_complement W)\"", "lemma orthogonal_complement_mono:\n  assumes A_in_B: \"A \\<subseteq> B\"\n  shows \"orthogonal_complement B \\<subseteq> orthogonal_complement A\"", "lemma B_in_orthogonal_complement_of_orthogonal_complement:\n  shows \"B \\<subseteq> orthogonal_complement (orthogonal_complement B)\"", "lemma phytagorean_theorem_norm:\n  assumes o: \"orthogonal x y\"\n  shows \"norm (x+y)^2=norm x^2 + norm y^2\"", "lemma in_orthogonal_complement_basis:\n  fixes B::\"'a::{euclidean_space} set\"\n  assumes S: \"subspace S\"\n  and ind_B: \"independent B\"\n  and B: \"B \\<subseteq> S\"\n  and span_B: \"S \\<subseteq> span B\"\n  shows \"(v \\<in> orthogonal_complement S) = (\\<forall>a\\<in>B. orthogonal a v)\"", "lemma v_minus_p_orthogonal_complement:\n  fixes X::\"'a::{euclidean_space} set\"\n  assumes subspace_S: \"subspace S\"\n  and ind_X: \"independent X\"\n  and X: \"X \\<subseteq> S\"\n  and span_X: \"S \\<subseteq> span X\"\n  and o: \"pairwise orthogonal X\"\n  shows \"(v - proj_onto v X) \\<in> orthogonal_complement S\"", "lemma UNIV_orthogonal_complement_decomposition:\n  fixes S::\"'a::{euclidean_space} set\"\n  assumes s: \"subspace S\"\n  shows \"UNIV = S + (orthogonal_complement S)\"", "lemma norm_normalize:\n  assumes \"x \\<noteq> 0\"\n  shows \"norm (normalize x) = 1\"", "lemma normalize_0: \"(normalize x = 0) = (x = 0)\"", "lemma norm_normalize_set_of_vec:\n  assumes \"x \\<noteq> 0\"\n  and \"x \\<in> normalize_set_of_vec X\"\n  shows \"norm x = 1\""], "translations": [["", "lemma proj_onto_sum_rw: \n  \"sum (\\<lambda>x. (x \\<bullet> v / (x \\<bullet> x)) *\\<^sub>R x) A = sum (\\<lambda>x. (v \\<bullet> x / (x \\<bullet> x)) *\\<^sub>R x) A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>A. (x \\<bullet> v / (x \\<bullet> x)) *\\<^sub>R x) =\n    (\\<Sum>x\\<in>A. (v \\<bullet> x / (x \\<bullet> x)) *\\<^sub>R x)", "by (rule sum.cong, auto simp add: inner_commute)"], ["", "lemma vector_sub_project_orthogonal_proj:\n  fixes b x :: \"'a::euclidean_space\"\n  shows \"inner b (x - proj x b) = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b \\<bullet> (x - proj x b) = 0", "using vector_sub_project_orthogonal"], ["proof (prove)\nusing this:\n  ?b \\<bullet> (?x - (?b \\<bullet> ?x / (?b \\<bullet> ?b)) *\\<^sub>R ?b) = 0\n\ngoal (1 subgoal):\n 1. b \\<bullet> (x - proj x b) = 0", "unfolding proj_def inner_commute[of x b]"], ["proof (prove)\nusing this:\n  ?b \\<bullet> (?x - (?b \\<bullet> ?x / (?b \\<bullet> ?b)) *\\<^sub>R ?b) = 0\n\ngoal (1 subgoal):\n 1. b \\<bullet> (x - (b \\<bullet> x / (b \\<bullet> b)) *\\<^sub>R b) = 0", "by auto"], ["", "lemma orthogonal_proj_set:\n  assumes yC: \"y\\<in>C\" and C: \"finite C\" and p: \"pairwise orthogonal C\"\n  shows \"orthogonal (a - proj_onto a C) y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. orthogonal (a - proj_onto a C) y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. orthogonal (a - proj_onto a C) y", "have Cy: \"C = insert y (C - {y})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C = insert y (C - {y})", "using yC"], ["proof (prove)\nusing this:\n  y \\<in> C\n\ngoal (1 subgoal):\n 1. C = insert y (C - {y})", "by blast"], ["proof (state)\nthis:\n  C = insert y (C - {y})\n\ngoal (1 subgoal):\n 1. orthogonal (a - proj_onto a C) y", "have fth: \"finite (C - {y})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (C - {y})", "using C"], ["proof (prove)\nusing this:\n  finite C\n\ngoal (1 subgoal):\n 1. finite (C - {y})", "by simp"], ["proof (state)\nthis:\n  finite (C - {y})\n\ngoal (1 subgoal):\n 1. orthogonal (a - proj_onto a C) y", "show \"orthogonal (a - proj_onto a C) y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. orthogonal (a - proj_onto a C) y", "unfolding orthogonal_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (a - proj_onto a C) \\<bullet> y = 0", "unfolding proj_onto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (a - sum (proj a) C) \\<bullet> y = 0", "unfolding proj_def[abs_def]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (a -\n     (\\<Sum>u\\<in>C.\n        (a \\<bullet> u / (u \\<bullet> u)) *\\<^sub>R u)) \\<bullet>\n    y =\n    0", "unfolding inner_diff"], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<bullet> y -\n    (\\<Sum>u\\<in>C. (a \\<bullet> u / (u \\<bullet> u)) *\\<^sub>R u) \\<bullet>\n    y =\n    0", "unfolding inner_sum_left"], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<bullet> y -\n    (\\<Sum>x\\<in>C.\n       (a \\<bullet> x / (x \\<bullet> x)) *\\<^sub>R x \\<bullet> y) =\n    0", "unfolding right_minus_eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<bullet> y =\n    (\\<Sum>x\\<in>C.\n       (a \\<bullet> x / (x \\<bullet> x)) *\\<^sub>R x \\<bullet> y)", "unfolding sum.remove[OF C yC]"], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<bullet> y =\n    (a \\<bullet> y / (y \\<bullet> y)) *\\<^sub>R y \\<bullet> y +\n    (\\<Sum>x\\<in>C - {y}.\n       (a \\<bullet> x / (x \\<bullet> x)) *\\<^sub>R x \\<bullet> y)", "apply (clarsimp simp add: inner_commute[of y a])"], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<noteq> (0::'a) \\<Longrightarrow>\n    (\\<Sum>x\\<in>C - {y}.\n       a \\<bullet> x * (x \\<bullet> y) / (x \\<bullet> x)) =\n    0", "apply (rule sum.neutral)"], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<noteq> (0::'a) \\<Longrightarrow>\n    \\<forall>x\\<in>C - {y}.\n       a \\<bullet> x * (x \\<bullet> y) / (x \\<bullet> x) = 0", "apply clarsimp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>y \\<noteq> (0::'a); x \\<in> C; x \\<noteq> y;\n        a \\<bullet> x \\<noteq> 0; x \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> x \\<bullet> y = 0", "apply (rule p[unfolded pairwise_def orthogonal_def, rule_format])"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>y \\<noteq> (0::'a); x \\<in> C; x \\<noteq> y;\n        a \\<bullet> x \\<noteq> 0; x \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> x \\<in> C\n 2. \\<And>x.\n       \\<lbrakk>y \\<noteq> (0::'a); x \\<in> C; x \\<noteq> y;\n        a \\<bullet> x \\<noteq> 0; x \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> y \\<in> C\n 3. \\<And>x.\n       \\<lbrakk>y \\<noteq> (0::'a); x \\<in> C; x \\<noteq> y;\n        a \\<bullet> x \\<noteq> 0; x \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> x \\<noteq> y", "using yC"], ["proof (prove)\nusing this:\n  y \\<in> C\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>y \\<noteq> (0::'a); x \\<in> C; x \\<noteq> y;\n        a \\<bullet> x \\<noteq> 0; x \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> x \\<in> C\n 2. \\<And>x.\n       \\<lbrakk>y \\<noteq> (0::'a); x \\<in> C; x \\<noteq> y;\n        a \\<bullet> x \\<noteq> 0; x \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> y \\<in> C\n 3. \\<And>x.\n       \\<lbrakk>y \\<noteq> (0::'a); x \\<in> C; x \\<noteq> y;\n        a \\<bullet> x \\<noteq> 0; x \\<noteq> (0::'a)\\<rbrakk>\n       \\<Longrightarrow> x \\<noteq> y", "by auto"], ["proof (state)\nthis:\n  orthogonal (a - proj_onto a C) y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma pairwise_orthogonal_proj_set:\n  assumes C: \"finite C\" and p: \"pairwise orthogonal C\"\n  shows \"pairwise orthogonal (insert (a - proj_onto a C) C)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pairwise orthogonal (insert (a - proj_onto a C) C)", "by (rule pairwise_orthogonal_insert[OF p], auto simp add: orthogonal_proj_set C p)"], ["", "subsection\\<open>Orthogonal Complement\\<close>"], ["", "definition \"orthogonal_complement W = {x. \\<forall>y \\<in> W. orthogonal x y}\""], ["", "lemma in_orthogonal_complement_imp_orthogonal:\n  assumes x: \"y \\<in> S\"\n  and \"x \\<in> orthogonal_complement S\"\n  shows \"orthogonal x y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. orthogonal x y", "using assms orthogonal_commute"], ["proof (prove)\nusing this:\n  y \\<in> S\n  x \\<in> orthogonal_complement S\n  orthogonal ?x ?y = orthogonal ?y ?x\n\ngoal (1 subgoal):\n 1. orthogonal x y", "unfolding orthogonal_complement_def"], ["proof (prove)\nusing this:\n  y \\<in> S\n  x \\<in> {x. Ball S (orthogonal x)}\n  orthogonal ?x ?y = orthogonal ?y ?x\n\ngoal (1 subgoal):\n 1. orthogonal x y", "by blast"], ["", "lemma subspace_orthogonal_complement: \"subspace (orthogonal_complement W)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subspace (orthogonal_complement W)", "unfolding subspace_def orthogonal_complement_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (0::'a) \\<in> {x. Ball W (orthogonal x)} \\<and>\n    (\\<forall>x\\<in>{x. Ball W (orthogonal x)}.\n        \\<forall>y\\<in>{x. Ball W (orthogonal x)}.\n           x + y \\<in> {x. Ball W (orthogonal x)}) \\<and>\n    (\\<forall>c.\n        \\<forall>x\\<in>{x. Ball W (orthogonal x)}.\n           c *\\<^sub>R x \\<in> {x. Ball W (orthogonal x)})", "by (simp add: orthogonal_def inner_left_distrib)"], ["", "lemma orthogonal_complement_mono:\n  assumes A_in_B: \"A \\<subseteq> B\"\n  shows \"orthogonal_complement B \\<subseteq> orthogonal_complement A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. orthogonal_complement B \\<subseteq> orthogonal_complement A", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> orthogonal_complement B \\<Longrightarrow>\n       x \\<in> orthogonal_complement A", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> orthogonal_complement B \\<Longrightarrow>\n       x \\<in> orthogonal_complement A", "assume x: \"x \\<in> orthogonal_complement B\""], ["proof (state)\nthis:\n  x \\<in> orthogonal_complement B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> orthogonal_complement B \\<Longrightarrow>\n       x \\<in> orthogonal_complement A", "show \"x \\<in> orthogonal_complement A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> orthogonal_complement A", "using x"], ["proof (prove)\nusing this:\n  x \\<in> orthogonal_complement B\n\ngoal (1 subgoal):\n 1. x \\<in> orthogonal_complement A", "unfolding orthogonal_complement_def"], ["proof (prove)\nusing this:\n  x \\<in> {x. Ball B (orthogonal x)}\n\ngoal (1 subgoal):\n 1. x \\<in> {x. Ball A (orthogonal x)}", "by (simp add: orthogonal_def, metis A_in_B in_mono)"], ["proof (state)\nthis:\n  x \\<in> orthogonal_complement A\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma B_in_orthogonal_complement_of_orthogonal_complement:\n  shows \"B \\<subseteq> orthogonal_complement (orthogonal_complement B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B \\<subseteq> orthogonal_complement (orthogonal_complement B)", "by (auto simp add: orthogonal_complement_def orthogonal_def inner_commute)"], ["", "lemma phytagorean_theorem_norm:\n  assumes o: \"orthogonal x y\"\n  shows \"norm (x+y)^2=norm x^2 + norm y^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (norm (x + y))\\<^sup>2 = (norm x)\\<^sup>2 + (norm y)\\<^sup>2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (norm (x + y))\\<^sup>2 = (norm x)\\<^sup>2 + (norm y)\\<^sup>2", "have \"norm (x+y)^2 = (x+y) \\<bullet> (x+y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (norm (x + y))\\<^sup>2 = (x + y) \\<bullet> (x + y)", "unfolding power2_norm_eq_inner"], ["proof (prove)\ngoal (1 subgoal):\n 1. (x + y) \\<bullet> (x + y) = (x + y) \\<bullet> (x + y)", ".."], ["proof (state)\nthis:\n  (norm (x + y))\\<^sup>2 = (x + y) \\<bullet> (x + y)\n\ngoal (1 subgoal):\n 1. (norm (x + y))\\<^sup>2 = (norm x)\\<^sup>2 + (norm y)\\<^sup>2", "also"], ["proof (state)\nthis:\n  (norm (x + y))\\<^sup>2 = (x + y) \\<bullet> (x + y)\n\ngoal (1 subgoal):\n 1. (norm (x + y))\\<^sup>2 = (norm x)\\<^sup>2 + (norm y)\\<^sup>2", "have \"... = ((x+y) \\<bullet> x) + ((x+y) \\<bullet> y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x + y) \\<bullet> (x + y) = (x + y) \\<bullet> x + (x + y) \\<bullet> y", "unfolding inner_right_distrib"], ["proof (prove)\ngoal (1 subgoal):\n 1. (x + y) \\<bullet> x + (x + y) \\<bullet> y =\n    (x + y) \\<bullet> x + (x + y) \\<bullet> y", ".."], ["proof (state)\nthis:\n  (x + y) \\<bullet> (x + y) = (x + y) \\<bullet> x + (x + y) \\<bullet> y\n\ngoal (1 subgoal):\n 1. (norm (x + y))\\<^sup>2 = (norm x)\\<^sup>2 + (norm y)\\<^sup>2", "also"], ["proof (state)\nthis:\n  (x + y) \\<bullet> (x + y) = (x + y) \\<bullet> x + (x + y) \\<bullet> y\n\ngoal (1 subgoal):\n 1. (norm (x + y))\\<^sup>2 = (norm x)\\<^sup>2 + (norm y)\\<^sup>2", "have \"... = (x \\<bullet> x) + (x \\<bullet> y) + (y \\<bullet> x) + (y \\<bullet> y) \""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x + y) \\<bullet> x + (x + y) \\<bullet> y =\n    x \\<bullet> x + x \\<bullet> y + y \\<bullet> x + y \\<bullet> y", "unfolding real_inner_class.inner_add_left"], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<bullet> x + y \\<bullet> x + (x \\<bullet> y + y \\<bullet> y) =\n    x \\<bullet> x + x \\<bullet> y + y \\<bullet> x + y \\<bullet> y", "by simp"], ["proof (state)\nthis:\n  (x + y) \\<bullet> x + (x + y) \\<bullet> y =\n  x \\<bullet> x + x \\<bullet> y + y \\<bullet> x + y \\<bullet> y\n\ngoal (1 subgoal):\n 1. (norm (x + y))\\<^sup>2 = (norm x)\\<^sup>2 + (norm y)\\<^sup>2", "also"], ["proof (state)\nthis:\n  (x + y) \\<bullet> x + (x + y) \\<bullet> y =\n  x \\<bullet> x + x \\<bullet> y + y \\<bullet> x + y \\<bullet> y\n\ngoal (1 subgoal):\n 1. (norm (x + y))\\<^sup>2 = (norm x)\\<^sup>2 + (norm y)\\<^sup>2", "have \"... = (x \\<bullet> x) + (y \\<bullet> y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<bullet> x + x \\<bullet> y + y \\<bullet> x + y \\<bullet> y =\n    x \\<bullet> x + y \\<bullet> y", "using o"], ["proof (prove)\nusing this:\n  orthogonal x y\n\ngoal (1 subgoal):\n 1. x \\<bullet> x + x \\<bullet> y + y \\<bullet> x + y \\<bullet> y =\n    x \\<bullet> x + y \\<bullet> y", "unfolding orthogonal_def"], ["proof (prove)\nusing this:\n  x \\<bullet> y = 0\n\ngoal (1 subgoal):\n 1. x \\<bullet> x + x \\<bullet> y + y \\<bullet> x + y \\<bullet> y =\n    x \\<bullet> x + y \\<bullet> y", "by (metis monoid_add_class.add.right_neutral inner_commute)"], ["proof (state)\nthis:\n  x \\<bullet> x + x \\<bullet> y + y \\<bullet> x + y \\<bullet> y =\n  x \\<bullet> x + y \\<bullet> y\n\ngoal (1 subgoal):\n 1. (norm (x + y))\\<^sup>2 = (norm x)\\<^sup>2 + (norm y)\\<^sup>2", "also"], ["proof (state)\nthis:\n  x \\<bullet> x + x \\<bullet> y + y \\<bullet> x + y \\<bullet> y =\n  x \\<bullet> x + y \\<bullet> y\n\ngoal (1 subgoal):\n 1. (norm (x + y))\\<^sup>2 = (norm x)\\<^sup>2 + (norm y)\\<^sup>2", "have \"... = norm x^2 + norm y^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<bullet> x + y \\<bullet> y = (norm x)\\<^sup>2 + (norm y)\\<^sup>2", "unfolding power2_norm_eq_inner"], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<bullet> x + y \\<bullet> y = x \\<bullet> x + y \\<bullet> y", ".."], ["proof (state)\nthis:\n  x \\<bullet> x + y \\<bullet> y = (norm x)\\<^sup>2 + (norm y)\\<^sup>2\n\ngoal (1 subgoal):\n 1. (norm (x + y))\\<^sup>2 = (norm x)\\<^sup>2 + (norm y)\\<^sup>2", "finally"], ["proof (chain)\npicking this:\n  (norm (x + y))\\<^sup>2 = (norm x)\\<^sup>2 + (norm y)\\<^sup>2", "show ?thesis"], ["proof (prove)\nusing this:\n  (norm (x + y))\\<^sup>2 = (norm x)\\<^sup>2 + (norm y)\\<^sup>2\n\ngoal (1 subgoal):\n 1. (norm (x + y))\\<^sup>2 = (norm x)\\<^sup>2 + (norm y)\\<^sup>2", "."], ["proof (state)\nthis:\n  (norm (x + y))\\<^sup>2 = (norm x)\\<^sup>2 + (norm y)\\<^sup>2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma in_orthogonal_complement_basis:\n  fixes B::\"'a::{euclidean_space} set\"\n  assumes S: \"subspace S\"\n  and ind_B: \"independent B\"\n  and B: \"B \\<subseteq> S\"\n  and span_B: \"S \\<subseteq> span B\"\n  shows \"(v \\<in> orthogonal_complement S) = (\\<forall>a\\<in>B. orthogonal a v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (v \\<in> orthogonal_complement S) = (\\<forall>a\\<in>B. orthogonal a v)", "proof (unfold orthogonal_complement_def, auto)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       \\<lbrakk>\\<forall>x\\<in>S. orthogonal v x; a \\<in> B\\<rbrakk>\n       \\<Longrightarrow> orthogonal a v\n 2. \\<And>x.\n       \\<lbrakk>\\<forall>a\\<in>B. orthogonal a v; x \\<in> S\\<rbrakk>\n       \\<Longrightarrow> orthogonal v x", "fix a"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       \\<lbrakk>\\<forall>x\\<in>S. orthogonal v x; a \\<in> B\\<rbrakk>\n       \\<Longrightarrow> orthogonal a v\n 2. \\<And>x.\n       \\<lbrakk>\\<forall>a\\<in>B. orthogonal a v; x \\<in> S\\<rbrakk>\n       \\<Longrightarrow> orthogonal v x", "assume \"\\<forall>x\\<in>S. orthogonal v x\" and \"a \\<in> B\""], ["proof (state)\nthis:\n  \\<forall>x\\<in>S. orthogonal v x\n  a \\<in> B\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       \\<lbrakk>\\<forall>x\\<in>S. orthogonal v x; a \\<in> B\\<rbrakk>\n       \\<Longrightarrow> orthogonal a v\n 2. \\<And>x.\n       \\<lbrakk>\\<forall>a\\<in>B. orthogonal a v; x \\<in> S\\<rbrakk>\n       \\<Longrightarrow> orthogonal v x", "thus \"orthogonal a v\""], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>S. orthogonal v x\n  a \\<in> B\n\ngoal (1 subgoal):\n 1. orthogonal a v", "by (metis B orthogonal_commute rev_subsetD)"], ["proof (state)\nthis:\n  orthogonal a v\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>a\\<in>B. orthogonal a v; x \\<in> S\\<rbrakk>\n       \\<Longrightarrow> orthogonal v x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>a\\<in>B. orthogonal a v; x \\<in> S\\<rbrakk>\n       \\<Longrightarrow> orthogonal v x", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>a\\<in>B. orthogonal a v; x \\<in> S\\<rbrakk>\n       \\<Longrightarrow> orthogonal v x", "assume o: \"\\<forall>a\\<in>B. orthogonal a v\" and x: \"x \\<in> S\""], ["proof (state)\nthis:\n  \\<forall>a\\<in>B. orthogonal a v\n  x \\<in> S\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>a\\<in>B. orthogonal a v; x \\<in> S\\<rbrakk>\n       \\<Longrightarrow> orthogonal v x", "have finite_B: \"finite B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite B", "using independent_bound_general[OF ind_B]"], ["proof (prove)\nusing this:\n  finite B \\<and> card B \\<le> dim B\n\ngoal (1 subgoal):\n 1. finite B", ".."], ["proof (state)\nthis:\n  finite B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>a\\<in>B. orthogonal a v; x \\<in> S\\<rbrakk>\n       \\<Longrightarrow> orthogonal v x", "have span_B_eq: \"S = span B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S = span B", "using B S span_B span_subspace"], ["proof (prove)\nusing this:\n  B \\<subseteq> S\n  subspace S\n  S \\<subseteq> span B\n  \\<lbrakk>?A \\<subseteq> ?B; ?B \\<subseteq> span ?A; subspace ?B\\<rbrakk>\n  \\<Longrightarrow> span ?A = ?B\n\ngoal (1 subgoal):\n 1. S = span B", "by blast"], ["proof (state)\nthis:\n  S = span B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>a\\<in>B. orthogonal a v; x \\<in> S\\<rbrakk>\n       \\<Longrightarrow> orthogonal v x", "obtain f where f: \"(\\<Sum>a\\<in>B. f a *\\<^sub>R a) = x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>f.\n        (\\<Sum>a\\<in>B. f a *\\<^sub>R a) = x \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using span_finite[OF finite_B]"], ["proof (prove)\nusing this:\n  span B = range (\\<lambda>u. \\<Sum>v\\<in>B. u v *\\<^sub>R v)\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        (\\<Sum>a\\<in>B. f a *\\<^sub>R a) = x \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using x"], ["proof (prove)\nusing this:\n  span B = range (\\<lambda>u. \\<Sum>v\\<in>B. u v *\\<^sub>R v)\n  x \\<in> S\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        (\\<Sum>a\\<in>B. f a *\\<^sub>R a) = x \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding span_B_eq"], ["proof (prove)\nusing this:\n  span B = range (\\<lambda>u. \\<Sum>v\\<in>B. u v *\\<^sub>R v)\n  x \\<in> span B\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        (\\<Sum>a\\<in>B. f a *\\<^sub>R a) = x \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by force"], ["proof (state)\nthis:\n  (\\<Sum>a\\<in>B. f a *\\<^sub>R a) = x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>a\\<in>B. orthogonal a v; x \\<in> S\\<rbrakk>\n       \\<Longrightarrow> orthogonal v x", "have \"v \\<bullet> x = v \\<bullet> (\\<Sum>a\\<in>B. f a *\\<^sub>R a)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<bullet> x = v \\<bullet> (\\<Sum>a\\<in>B. f a *\\<^sub>R a)", "unfolding f"], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<bullet> x = v \\<bullet> x", ".."], ["proof (state)\nthis:\n  v \\<bullet> x = v \\<bullet> (\\<Sum>a\\<in>B. f a *\\<^sub>R a)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>a\\<in>B. orthogonal a v; x \\<in> S\\<rbrakk>\n       \\<Longrightarrow> orthogonal v x", "also"], ["proof (state)\nthis:\n  v \\<bullet> x = v \\<bullet> (\\<Sum>a\\<in>B. f a *\\<^sub>R a)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>a\\<in>B. orthogonal a v; x \\<in> S\\<rbrakk>\n       \\<Longrightarrow> orthogonal v x", "have \"... = (\\<Sum>a\\<in>B. v \\<bullet> (f a *\\<^sub>R a))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<bullet> (\\<Sum>a\\<in>B. f a *\\<^sub>R a) =\n    (\\<Sum>a\\<in>B. v \\<bullet> f a *\\<^sub>R a)", "unfolding inner_sum_right"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>y\\<in>B. v \\<bullet> f y *\\<^sub>R y) =\n    (\\<Sum>a\\<in>B. v \\<bullet> f a *\\<^sub>R a)", ".."], ["proof (state)\nthis:\n  v \\<bullet> (\\<Sum>a\\<in>B. f a *\\<^sub>R a) =\n  (\\<Sum>a\\<in>B. v \\<bullet> f a *\\<^sub>R a)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>a\\<in>B. orthogonal a v; x \\<in> S\\<rbrakk>\n       \\<Longrightarrow> orthogonal v x", "also"], ["proof (state)\nthis:\n  v \\<bullet> (\\<Sum>a\\<in>B. f a *\\<^sub>R a) =\n  (\\<Sum>a\\<in>B. v \\<bullet> f a *\\<^sub>R a)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>a\\<in>B. orthogonal a v; x \\<in> S\\<rbrakk>\n       \\<Longrightarrow> orthogonal v x", "have \"... = (\\<Sum>a\\<in>B. f a * (v \\<bullet> a))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>a\\<in>B. v \\<bullet> f a *\\<^sub>R a) =\n    (\\<Sum>a\\<in>B. f a * (v \\<bullet> a))", "unfolding inner_scaleR_right"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>a\\<in>B. f a * (v \\<bullet> a)) =\n    (\\<Sum>a\\<in>B. f a * (v \\<bullet> a))", ".."], ["proof (state)\nthis:\n  (\\<Sum>a\\<in>B. v \\<bullet> f a *\\<^sub>R a) =\n  (\\<Sum>a\\<in>B. f a * (v \\<bullet> a))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>a\\<in>B. orthogonal a v; x \\<in> S\\<rbrakk>\n       \\<Longrightarrow> orthogonal v x", "also"], ["proof (state)\nthis:\n  (\\<Sum>a\\<in>B. v \\<bullet> f a *\\<^sub>R a) =\n  (\\<Sum>a\\<in>B. f a * (v \\<bullet> a))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>a\\<in>B. orthogonal a v; x \\<in> S\\<rbrakk>\n       \\<Longrightarrow> orthogonal v x", "have \"... = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>a\\<in>B. f a * (v \\<bullet> a)) = 0", "using sum.neutral o"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>?A. ?g x = (0::?'a) \\<Longrightarrow> sum ?g ?A = (0::?'a)\n  \\<forall>a\\<in>B. orthogonal a v\n\ngoal (1 subgoal):\n 1. (\\<Sum>a\\<in>B. f a * (v \\<bullet> a)) = 0", "by (simp add: orthogonal_def inner_commute)"], ["proof (state)\nthis:\n  (\\<Sum>a\\<in>B. f a * (v \\<bullet> a)) = 0\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<forall>a\\<in>B. orthogonal a v; x \\<in> S\\<rbrakk>\n       \\<Longrightarrow> orthogonal v x", "finally"], ["proof (chain)\npicking this:\n  v \\<bullet> x = 0", "show \"orthogonal v x\""], ["proof (prove)\nusing this:\n  v \\<bullet> x = 0\n\ngoal (1 subgoal):\n 1. orthogonal v x", "unfolding orthogonal_def"], ["proof (prove)\nusing this:\n  v \\<bullet> x = 0\n\ngoal (1 subgoal):\n 1. v \\<bullet> x = 0", "."], ["proof (state)\nthis:\n  orthogonal v x\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>See @{url \"https://people.math.osu.edu/husen.1/teaching/571/least_squares.pdf\"}\\<close>"], ["", "text\\<open>Part 1 of the Theorem 1.7 in the previous website, but the proof has been carried out\n  in other way.\\<close>"], ["", "lemma v_minus_p_orthogonal_complement:\n  fixes X::\"'a::{euclidean_space} set\"\n  assumes subspace_S: \"subspace S\"\n  and ind_X: \"independent X\"\n  and X: \"X \\<subseteq> S\"\n  and span_X: \"S \\<subseteq> span X\"\n  and o: \"pairwise orthogonal X\"\n  shows \"(v - proj_onto v X) \\<in> orthogonal_complement S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v - proj_onto v X \\<in> orthogonal_complement S", "unfolding in_orthogonal_complement_basis[OF subspace_S ind_X X span_X]"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>a\\<in>X. orthogonal a (v - proj_onto v X)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a. a \\<in> X \\<Longrightarrow> orthogonal a (v - proj_onto v X)", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a. a \\<in> X \\<Longrightarrow> orthogonal a (v - proj_onto v X)", "assume a: \"a \\<in> X\""], ["proof (state)\nthis:\n  a \\<in> X\n\ngoal (1 subgoal):\n 1. \\<And>a. a \\<in> X \\<Longrightarrow> orthogonal a (v - proj_onto v X)", "let ?p=\"proj_onto v X\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a. a \\<in> X \\<Longrightarrow> orthogonal a (v - proj_onto v X)", "show \"orthogonal a (v - ?p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. orthogonal a (v - proj_onto v X)", "unfolding orthogonal_commute[of a \"v-?p\"]"], ["proof (prove)\ngoal (1 subgoal):\n 1. orthogonal (v - proj_onto v X) a", "by (rule orthogonal_proj_set[OF a _ o])\n       (simp add: independent_bound_general[OF ind_X])"], ["proof (state)\nthis:\n  orthogonal a (v - proj_onto v X)\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>Part 2 of the Theorem 1.7 in the previous website.\\<close>"], ["", "lemma UNIV_orthogonal_complement_decomposition:\n  fixes S::\"'a::{euclidean_space} set\"\n  assumes s: \"subspace S\"\n  shows \"UNIV = S + (orthogonal_complement S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. UNIV = S + orthogonal_complement S", "proof (unfold set_plus_def, auto)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<exists>a\\<in>S. \\<exists>b\\<in>orthogonal_complement S. x = a + b", "fix v"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<exists>a\\<in>S. \\<exists>b\\<in>orthogonal_complement S. x = a + b", "obtain X where ind_X: \"independent X\"\n    and X: \"X \\<subseteq> S\"\n    and span_X: \"S \\<subseteq> span X\"\n    and o: \"pairwise orthogonal X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>X.\n        \\<lbrakk>independent X; X \\<subseteq> S; S \\<subseteq> span X;\n         pairwise orthogonal X\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis order_refl orthonormal_basis_subspace s)"], ["proof (state)\nthis:\n  independent X\n  X \\<subseteq> S\n  S \\<subseteq> span X\n  pairwise orthogonal X\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<exists>a\\<in>S. \\<exists>b\\<in>orthogonal_complement S. x = a + b", "have finite_X: \"finite X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite X", "by (metis independent_bound_general ind_X)"], ["proof (state)\nthis:\n  finite X\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<exists>a\\<in>S. \\<exists>b\\<in>orthogonal_complement S. x = a + b", "let ?p=\"proj_onto v X\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<exists>a\\<in>S. \\<exists>b\\<in>orthogonal_complement S. x = a + b", "have \"v=?p +(v-?p)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v = proj_onto v X + (v - proj_onto v X)", "by simp"], ["proof (state)\nthis:\n  v = proj_onto v X + (v - proj_onto v X)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<exists>a\\<in>S. \\<exists>b\\<in>orthogonal_complement S. x = a + b", "moreover"], ["proof (state)\nthis:\n  v = proj_onto v X + (v - proj_onto v X)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<exists>a\\<in>S. \\<exists>b\\<in>orthogonal_complement S. x = a + b", "have \"?p \\<in> S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. proj_onto v X \\<in> S", "unfolding proj_onto_def proj_def[abs_def]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>u\\<in>X. (v \\<bullet> u / (u \\<bullet> u)) *\\<^sub>R u) \\<in> S", "by (rule subspace_sum[OF s])\n      (simp add: X s rev_subsetD subspace_mul)"], ["proof (state)\nthis:\n  proj_onto v X \\<in> S\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<exists>a\\<in>S. \\<exists>b\\<in>orthogonal_complement S. x = a + b", "moreover"], ["proof (state)\nthis:\n  proj_onto v X \\<in> S\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<exists>a\\<in>S. \\<exists>b\\<in>orthogonal_complement S. x = a + b", "have \"(v-?p) \\<in> orthogonal_complement S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v - proj_onto v X \\<in> orthogonal_complement S", "by (rule v_minus_p_orthogonal_complement[OF s ind_X X span_X o])"], ["proof (state)\nthis:\n  v - proj_onto v X \\<in> orthogonal_complement S\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<exists>a\\<in>S. \\<exists>b\\<in>orthogonal_complement S. x = a + b", "ultimately"], ["proof (chain)\npicking this:\n  v = proj_onto v X + (v - proj_onto v X)\n  proj_onto v X \\<in> S\n  v - proj_onto v X \\<in> orthogonal_complement S", "show \"\\<exists>a\\<in>S. \\<exists>b\\<in>orthogonal_complement S. v = a + b\""], ["proof (prove)\nusing this:\n  v = proj_onto v X + (v - proj_onto v X)\n  proj_onto v X \\<in> S\n  v - proj_onto v X \\<in> orthogonal_complement S\n\ngoal (1 subgoal):\n 1. \\<exists>a\\<in>S. \\<exists>b\\<in>orthogonal_complement S. v = a + b", "by force"], ["proof (state)\nthis:\n  \\<exists>a\\<in>S. \\<exists>b\\<in>orthogonal_complement S. v = a + b\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection\\<open>Normalization of vectors\\<close>"], ["", "definition normalize\n  where \"normalize x  = ((1/norm x) *\\<^sub>R x)\""], ["", "definition normalize_set_of_vec\n  where \"normalize_set_of_vec X  = normalize` X\""], ["", "lemma norm_normalize:\n  assumes \"x \\<noteq> 0\"\n  shows \"norm (normalize x) = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. norm (Projections.normalize x) = 1", "by (simp add: normalize_def assms)"], ["", "lemma normalize_0: \"(normalize x = 0) = (x = 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (Projections.normalize x = (0::'a)) = (x = (0::'a))", "unfolding normalize_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((1 / norm x) *\\<^sub>R x = (0::'a)) = (x = (0::'a))", "by auto"], ["", "lemma norm_normalize_set_of_vec:\n  assumes \"x \\<noteq> 0\"\n  and \"x \\<in> normalize_set_of_vec X\"\n  shows \"norm x = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. norm x = 1", "using assms norm_normalize normalize_0"], ["proof (prove)\nusing this:\n  x \\<noteq> (0::'a)\n  x \\<in> normalize_set_of_vec X\n  ?x \\<noteq> (0::?'a) \\<Longrightarrow> norm (Projections.normalize ?x) = 1\n  (Projections.normalize ?x = (0::?'a)) = (?x = (0::?'a))\n\ngoal (1 subgoal):\n 1. norm x = 1", "unfolding normalize_set_of_vec_def"], ["proof (prove)\nusing this:\n  x \\<noteq> (0::'a)\n  x \\<in> Projections.normalize ` X\n  ?x \\<noteq> (0::?'a) \\<Longrightarrow> norm (Projections.normalize ?x) = 1\n  (Projections.normalize ?x = (0::?'a)) = (?x = (0::?'a))\n\ngoal (1 subgoal):\n 1. norm x = 1", "by blast"], ["", "end"]]}