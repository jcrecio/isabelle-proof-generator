{"file_name": "/home/qj213/afp-2021-10-22/thys/Transition_Systems_and_Automata/Automata/DBTA/DBTA_Combine.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Transition_Systems_and_Automata", "problem_names": ["lemmas degeneralize_language[simp] = degeneralization.degeneralize_language[folded DBTA.language_def]", "lemmas degeneralize_nodes_finite[iff] = degeneralization.degeneralize_nodes_finite[folded DBTA.nodes_def]", "lemmas degeneralize_nodes_card = degeneralization.degeneralize_nodes_card[folded DBTA.nodes_def]", "lemmas intersect'_language[simp] = intersection.product_language[folded DGBTA.language_def]", "lemmas intersect'_nodes_finite = intersection.product_nodes_finite[folded DGBTA.nodes_def]", "lemmas intersect'_nodes_card = intersection.product_nodes_card[folded DGBTA.nodes_def]", "lemmas union_language = union.product_language", "lemmas union_nodes_finite = union.product_nodes_finite", "lemmas union_nodes_card = union.product_nodes_card", "lemma intersect_language[simp]: \"DBTA.language (intersect A B) = DBTA.language A \\<inter> DBTA.language B\"", "lemma intersect_nodes_finite:\n    assumes \"finite (DBTA.nodes A)\" \"finite (DBTA.nodes B)\"\n    shows \"finite (DBTA.nodes (intersect A B))\"", "lemma intersect_nodes_card:\n    assumes \"finite (DBTA.nodes A)\" \"finite (DBTA.nodes B)\"\n    shows \"card (DBTA.nodes (intersect A B)) \\<le> 2 * card (DBTA.nodes A) * card (DBTA.nodes B)\""], "translations": [["", "lemmas degeneralize_language[simp] = degeneralization.degeneralize_language[folded DBTA.language_def]"], ["", "lemmas degeneralize_nodes_finite[iff] = degeneralization.degeneralize_nodes_finite[folded DBTA.nodes_def]"], ["", "lemmas degeneralize_nodes_card = degeneralization.degeneralize_nodes_card[folded DBTA.nodes_def]"], ["", "global_interpretation intersection: automaton_intersection_run\n    dbta.dbta dbta.alphabet dbta.initial dbta.transition dbta.accepting \"\\<lambda> P w r p. infs P (p ## r ||| w ||| r)\"\n    dbta.dbta dbta.alphabet dbta.initial dbta.transition dbta.accepting \"\\<lambda> P w r p. infs P (p ## r ||| w ||| r)\"\n    dgbta.dgbta dgbta.alphabet dgbta.initial dgbta.transition dgbta.accepting \"\\<lambda> P w r p. gen infs P (p ## r ||| w ||| r)\"\n    \"\\<lambda> c\\<^sub>1 c\\<^sub>2. [c\\<^sub>1 \\<circ> (\\<lambda> ((p\\<^sub>1, p\\<^sub>2), a, (q\\<^sub>1, q\\<^sub>2)). (p\\<^sub>1, a, q\\<^sub>1)), c\\<^sub>2 \\<circ> (\\<lambda> ((p\\<^sub>1, p\\<^sub>2), a, (q\\<^sub>1, q\\<^sub>2)). (p\\<^sub>2, a, q\\<^sub>2))]\"\n    defines intersect' = intersection.product"], ["proof (prove)\ngoal (1 subgoal):\n 1. automaton_intersection_run dbta dbta.alphabet dbta.initial\n     dbta.transition dbta.accepting\n     (\\<lambda>P w r p. infs P (p ## r ||| w ||| r)) dbta dbta.alphabet\n     dbta.initial dbta.transition dbta.accepting\n     (\\<lambda>P w r p. infs P (p ## r ||| w ||| r)) dgbta dgbta.alphabet\n     dgbta.initial dgbta.transition dgbta.accepting\n     (\\<lambda>P w r p. gen infs P (p ## r ||| w ||| r))\n     (\\<lambda>c\\<^sub>1 c\\<^sub>2.\n         [c\\<^sub>1 \\<circ>\n          (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n              (p\\<^sub>1, a, q\\<^sub>1)),\n          c\\<^sub>2 \\<circ>\n          (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n              (p\\<^sub>2, a, q\\<^sub>2))])", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       gen infs\n        [c\\<^sub>1 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>1, a, q\\<^sub>1)),\n         c\\<^sub>2 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>2, a, q\\<^sub>2))]\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<and>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "fix w :: \"'a stream\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       gen infs\n        [c\\<^sub>1 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>1, a, q\\<^sub>1)),\n         c\\<^sub>2 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>2, a, q\\<^sub>2))]\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<and>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "fix u :: \"'b stream\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       gen infs\n        [c\\<^sub>1 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>1, a, q\\<^sub>1)),\n         c\\<^sub>2 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>2, a, q\\<^sub>2))]\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<and>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "fix v :: \"'c stream\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       gen infs\n        [c\\<^sub>1 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>1, a, q\\<^sub>1)),\n         c\\<^sub>2 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>2, a, q\\<^sub>2))]\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<and>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "fix c\\<^sub>1 c\\<^sub>2 p q"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       gen infs\n        [c\\<^sub>1 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>1, a, q\\<^sub>1)),\n         c\\<^sub>2 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>2, a, q\\<^sub>2))]\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<and>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "let ?tfst = \"\\<lambda> ((p\\<^sub>1, p\\<^sub>2), a, (q\\<^sub>1, q\\<^sub>2)). (p\\<^sub>1, a, q\\<^sub>1)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       gen infs\n        [c\\<^sub>1 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>1, a, q\\<^sub>1)),\n         c\\<^sub>2 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>2, a, q\\<^sub>2))]\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<and>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "let ?tsnd = \"\\<lambda> ((p\\<^sub>1, p\\<^sub>2), a, (q\\<^sub>1, q\\<^sub>2)). (p\\<^sub>2, a, q\\<^sub>2)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       gen infs\n        [c\\<^sub>1 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>1, a, q\\<^sub>1)),\n         c\\<^sub>2 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>2, a, q\\<^sub>2))]\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<and>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "have \"gen infs [c\\<^sub>1 \\<circ> ?tfst, c\\<^sub>2 \\<circ> ?tsnd] ((p, q) ## (u ||| v) ||| w ||| u ||| v) \\<longleftrightarrow>\n      infs c\\<^sub>1 (smap ?tfst ((p, q) ## (u ||| v) ||| w ||| u ||| v)) \\<and>\n      infs c\\<^sub>2 (smap ?tsnd ((p, q) ## (u ||| v) ||| w ||| u ||| v))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. gen infs\n     [c\\<^sub>1 \\<circ>\n      (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n          (p\\<^sub>1, a, q\\<^sub>1)),\n      c\\<^sub>2 \\<circ>\n      (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n          (p\\<^sub>2, a, q\\<^sub>2))]\n     ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n    (infs c\\<^sub>1\n      (smap\n        (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n            (p\\<^sub>1, a, q\\<^sub>1))\n        ((p, q) ## (u ||| v) ||| w ||| u ||| v)) \\<and>\n     infs c\\<^sub>2\n      (smap\n        (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n            (p\\<^sub>2, a, q\\<^sub>2))\n        ((p, q) ## (u ||| v) ||| w ||| u ||| v)))", "unfolding gen_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>c\\<in>set [c\\<^sub>1 \\<circ>\n                         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1,\n                             q\\<^sub>2). (p\\<^sub>1, a, q\\<^sub>1)),\n                         c\\<^sub>2 \\<circ>\n                         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1,\n                             q\\<^sub>2). (p\\<^sub>2, a, q\\<^sub>2))].\n        infs c ((p, q) ## (u ||| v) ||| w ||| u ||| v)) =\n    (infs c\\<^sub>1\n      (smap\n        (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n            (p\\<^sub>1, a, q\\<^sub>1))\n        ((p, q) ## (u ||| v) ||| w ||| u ||| v)) \\<and>\n     infs c\\<^sub>2\n      (smap\n        (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n            (p\\<^sub>2, a, q\\<^sub>2))\n        ((p, q) ## (u ||| v) ||| w ||| u ||| v)))", "by (simp add: comp_def)"], ["proof (state)\nthis:\n  gen infs\n   [c\\<^sub>1 \\<circ>\n    (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n        (p\\<^sub>1, a, q\\<^sub>1)),\n    c\\<^sub>2 \\<circ>\n    (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n        (p\\<^sub>2, a, q\\<^sub>2))]\n   ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n  (infs c\\<^sub>1\n    (smap\n      (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n          (p\\<^sub>1, a, q\\<^sub>1))\n      ((p, q) ## (u ||| v) ||| w ||| u ||| v)) \\<and>\n   infs c\\<^sub>2\n    (smap\n      (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n          (p\\<^sub>2, a, q\\<^sub>2))\n      ((p, q) ## (u ||| v) ||| w ||| u ||| v)))\n\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       gen infs\n        [c\\<^sub>1 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>1, a, q\\<^sub>1)),\n         c\\<^sub>2 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>2, a, q\\<^sub>2))]\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<and>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "also"], ["proof (state)\nthis:\n  gen infs\n   [c\\<^sub>1 \\<circ>\n    (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n        (p\\<^sub>1, a, q\\<^sub>1)),\n    c\\<^sub>2 \\<circ>\n    (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n        (p\\<^sub>2, a, q\\<^sub>2))]\n   ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n  (infs c\\<^sub>1\n    (smap\n      (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n          (p\\<^sub>1, a, q\\<^sub>1))\n      ((p, q) ## (u ||| v) ||| w ||| u ||| v)) \\<and>\n   infs c\\<^sub>2\n    (smap\n      (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n          (p\\<^sub>2, a, q\\<^sub>2))\n      ((p, q) ## (u ||| v) ||| w ||| u ||| v)))\n\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       gen infs\n        [c\\<^sub>1 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>1, a, q\\<^sub>1)),\n         c\\<^sub>2 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>2, a, q\\<^sub>2))]\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<and>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "have \"smap ?tfst ((p, q) ## (u ||| v) ||| w ||| u ||| v) = p ## u ||| w ||| u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. smap\n     (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n         (p\\<^sub>1, a, q\\<^sub>1))\n     ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n    p ## u ||| w ||| u", "by (coinduction arbitrary: p q u v w) (auto simp flip: szip_unfold, metis stream.collapse)"], ["proof (state)\nthis:\n  smap\n   (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n       (p\\<^sub>1, a, q\\<^sub>1))\n   ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n  p ## u ||| w ||| u\n\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       gen infs\n        [c\\<^sub>1 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>1, a, q\\<^sub>1)),\n         c\\<^sub>2 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>2, a, q\\<^sub>2))]\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<and>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "also"], ["proof (state)\nthis:\n  smap\n   (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n       (p\\<^sub>1, a, q\\<^sub>1))\n   ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n  p ## u ||| w ||| u\n\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       gen infs\n        [c\\<^sub>1 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>1, a, q\\<^sub>1)),\n         c\\<^sub>2 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>2, a, q\\<^sub>2))]\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<and>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "have \"smap ?tsnd ((p, q) ## (u ||| v) ||| w ||| u ||| v) = q ## v ||| w ||| v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. smap\n     (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n         (p\\<^sub>2, a, q\\<^sub>2))\n     ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n    q ## v ||| w ||| v", "by (coinduction arbitrary: p q u v w) (auto simp flip: szip_unfold, metis stream.collapse)"], ["proof (state)\nthis:\n  smap\n   (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n       (p\\<^sub>2, a, q\\<^sub>2))\n   ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n  q ## v ||| w ||| v\n\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       gen infs\n        [c\\<^sub>1 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>1, a, q\\<^sub>1)),\n         c\\<^sub>2 \\<circ>\n         (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n             (p\\<^sub>2, a, q\\<^sub>2))]\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<and>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "finally"], ["proof (chain)\npicking this:\n  gen infs\n   [c\\<^sub>1 \\<circ>\n    (\\<lambda>a.\n        case a of\n        (a, b) \\<Rightarrow>\n          (case a of\n           (p\\<^sub>1, p\\<^sub>2) \\<Rightarrow>\n             \\<lambda>a.\n                case a of\n                (a, q\\<^sub>1, q\\<^sub>2) \\<Rightarrow>\n                  (p\\<^sub>1, a, q\\<^sub>1))\n           b),\n    c\\<^sub>2 \\<circ>\n    (\\<lambda>a.\n        case a of\n        (a, b) \\<Rightarrow>\n          (case a of\n           (p\\<^sub>1, p\\<^sub>2) \\<Rightarrow>\n             \\<lambda>a.\n                case a of\n                (a, q\\<^sub>1, q\\<^sub>2) \\<Rightarrow>\n                  (p\\<^sub>2, a, q\\<^sub>2))\n           b)]\n   ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n  (infs c\\<^sub>1 (p ## u ||| w ||| u) \\<and>\n   infs c\\<^sub>2 (q ## v ||| w ||| v))", "show \"gen infs [c\\<^sub>1 \\<circ> ?tfst, c\\<^sub>2 \\<circ> ?tsnd] ((p, q) ## (u ||| v) ||| w ||| u ||| v) \\<longleftrightarrow>\n      infs c\\<^sub>1 (p ## u ||| w ||| u) \\<and> infs c\\<^sub>2 (q ## v ||| w ||| v)\""], ["proof (prove)\nusing this:\n  gen infs\n   [c\\<^sub>1 \\<circ>\n    (\\<lambda>a.\n        case a of\n        (a, b) \\<Rightarrow>\n          (case a of\n           (p\\<^sub>1, p\\<^sub>2) \\<Rightarrow>\n             \\<lambda>a.\n                case a of\n                (a, q\\<^sub>1, q\\<^sub>2) \\<Rightarrow>\n                  (p\\<^sub>1, a, q\\<^sub>1))\n           b),\n    c\\<^sub>2 \\<circ>\n    (\\<lambda>a.\n        case a of\n        (a, b) \\<Rightarrow>\n          (case a of\n           (p\\<^sub>1, p\\<^sub>2) \\<Rightarrow>\n             \\<lambda>a.\n                case a of\n                (a, q\\<^sub>1, q\\<^sub>2) \\<Rightarrow>\n                  (p\\<^sub>2, a, q\\<^sub>2))\n           b)]\n   ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n  (infs c\\<^sub>1 (p ## u ||| w ||| u) \\<and>\n   infs c\\<^sub>2 (q ## v ||| w ||| v))\n\ngoal (1 subgoal):\n 1. gen infs\n     [c\\<^sub>1 \\<circ>\n      (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n          (p\\<^sub>1, a, q\\<^sub>1)),\n      c\\<^sub>2 \\<circ>\n      (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n          (p\\<^sub>2, a, q\\<^sub>2))]\n     ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n    (infs c\\<^sub>1 (p ## u ||| w ||| u) \\<and>\n     infs c\\<^sub>2 (q ## v ||| w ||| v))", "by this"], ["proof (state)\nthis:\n  gen infs\n   [c\\<^sub>1 \\<circ>\n    (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n        (p\\<^sub>1, a, q\\<^sub>1)),\n    c\\<^sub>2 \\<circ>\n    (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n        (p\\<^sub>2, a, q\\<^sub>2))]\n   ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n  (infs c\\<^sub>1 (p ## u ||| w ||| u) \\<and>\n   infs c\\<^sub>2 (q ## v ||| w ||| v))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemmas intersect'_language[simp] = intersection.product_language[folded DGBTA.language_def]"], ["", "lemmas intersect'_nodes_finite = intersection.product_nodes_finite[folded DGBTA.nodes_def]"], ["", "lemmas intersect'_nodes_card = intersection.product_nodes_card[folded DGBTA.nodes_def]"], ["", "global_interpretation union: automaton_union_run\n    dbta.dbta dbta.alphabet dbta.initial dbta.transition dbta.accepting \"\\<lambda> P w r p. infs P (p ## r ||| w ||| r)\"\n    dbta.dbta dbta.alphabet dbta.initial dbta.transition dbta.accepting \"\\<lambda> P w r p. infs P (p ## r ||| w ||| r)\"\n    dbta.dbta dbta.alphabet dbta.initial dbta.transition dbta.accepting \"\\<lambda> P w r p. infs P (p ## r ||| w ||| r)\"\n    \"\\<lambda> c\\<^sub>1 c\\<^sub>2 pq. (c\\<^sub>1 \\<circ> (\\<lambda> ((p\\<^sub>1, p\\<^sub>2), a, (q\\<^sub>1, q\\<^sub>2)). (p\\<^sub>1, a, q\\<^sub>1))) pq \\<or> (c\\<^sub>2 \\<circ> (\\<lambda> ((p\\<^sub>1, p\\<^sub>2), a, (q\\<^sub>1, q\\<^sub>2)). (p\\<^sub>2, a, q\\<^sub>2))) pq\"\n    defines union = union.product"], ["proof (prove)\ngoal (1 subgoal):\n 1. automaton_union_run dbta dbta.alphabet dbta.initial dbta.transition\n     dbta.accepting (\\<lambda>P w r p. infs P (p ## r ||| w ||| r)) dbta\n     dbta.alphabet dbta.initial dbta.transition dbta.accepting\n     (\\<lambda>P w r p. infs P (p ## r ||| w ||| r)) dbta dbta.alphabet\n     dbta.initial dbta.transition dbta.accepting\n     (\\<lambda>P w r p. infs P (p ## r ||| w ||| r))\n     (\\<lambda>c\\<^sub>1 c\\<^sub>2 pq.\n         (c\\<^sub>1 \\<circ>\n          (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n              (p\\<^sub>1, a, q\\<^sub>1)))\n          pq \\<or>\n         (c\\<^sub>2 \\<circ>\n          (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n              (p\\<^sub>2, a, q\\<^sub>2)))\n          pq)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       infs\n        (\\<lambda>pq.\n            (c\\<^sub>1 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>1, a, q\\<^sub>1)))\n             pq \\<or>\n            (c\\<^sub>2 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>2, a, q\\<^sub>2)))\n             pq)\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<or>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "fix w :: \"'a stream\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       infs\n        (\\<lambda>pq.\n            (c\\<^sub>1 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>1, a, q\\<^sub>1)))\n             pq \\<or>\n            (c\\<^sub>2 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>2, a, q\\<^sub>2)))\n             pq)\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<or>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "fix u :: \"'b stream\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       infs\n        (\\<lambda>pq.\n            (c\\<^sub>1 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>1, a, q\\<^sub>1)))\n             pq \\<or>\n            (c\\<^sub>2 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>2, a, q\\<^sub>2)))\n             pq)\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<or>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "fix v :: \"'c stream\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       infs\n        (\\<lambda>pq.\n            (c\\<^sub>1 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>1, a, q\\<^sub>1)))\n             pq \\<or>\n            (c\\<^sub>2 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>2, a, q\\<^sub>2)))\n             pq)\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<or>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "fix c\\<^sub>1 c\\<^sub>2 p q"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       infs\n        (\\<lambda>pq.\n            (c\\<^sub>1 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>1, a, q\\<^sub>1)))\n             pq \\<or>\n            (c\\<^sub>2 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>2, a, q\\<^sub>2)))\n             pq)\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<or>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "let ?tfst = \"\\<lambda> ((p\\<^sub>1, p\\<^sub>2), a, (q\\<^sub>1, q\\<^sub>2)). (p\\<^sub>1, a, q\\<^sub>1)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       infs\n        (\\<lambda>pq.\n            (c\\<^sub>1 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>1, a, q\\<^sub>1)))\n             pq \\<or>\n            (c\\<^sub>2 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>2, a, q\\<^sub>2)))\n             pq)\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<or>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "let ?tsnd = \"\\<lambda> ((p\\<^sub>1, p\\<^sub>2), a, (q\\<^sub>1, q\\<^sub>2)). (p\\<^sub>2, a, q\\<^sub>2)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       infs\n        (\\<lambda>pq.\n            (c\\<^sub>1 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>1, a, q\\<^sub>1)))\n             pq \\<or>\n            (c\\<^sub>2 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>2, a, q\\<^sub>2)))\n             pq)\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<or>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "have \"infs (\\<lambda> pq. (c\\<^sub>1 \\<circ> (\\<lambda> ((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2). (p\\<^sub>1, a, q\\<^sub>1))) pq \\<or>\n       (c\\<^sub>2 \\<circ> (\\<lambda> ((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2). (p\\<^sub>2, a, q\\<^sub>2))) pq) ((p, q) ## (u ||| v) ||| w ||| (u ||| v))  \\<longleftrightarrow>\n      infs c\\<^sub>1 (smap ?tfst ((p, q) ## (u ||| v) ||| w ||| u ||| v)) \\<or>\n      infs c\\<^sub>2 (smap ?tsnd ((p, q) ## (u ||| v) ||| w ||| u ||| v))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. infs\n     (\\<lambda>pq.\n         (c\\<^sub>1 \\<circ>\n          (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n              (p\\<^sub>1, a, q\\<^sub>1)))\n          pq \\<or>\n         (c\\<^sub>2 \\<circ>\n          (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n              (p\\<^sub>2, a, q\\<^sub>2)))\n          pq)\n     ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n    (infs c\\<^sub>1\n      (smap\n        (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n            (p\\<^sub>1, a, q\\<^sub>1))\n        ((p, q) ## (u ||| v) ||| w ||| u ||| v)) \\<or>\n     infs c\\<^sub>2\n      (smap\n        (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n            (p\\<^sub>2, a, q\\<^sub>2))\n        ((p, q) ## (u ||| v) ||| w ||| u ||| v)))", "by (simp add: comp_def)"], ["proof (state)\nthis:\n  infs\n   (\\<lambda>pq.\n       (c\\<^sub>1 \\<circ>\n        (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n            (p\\<^sub>1, a, q\\<^sub>1)))\n        pq \\<or>\n       (c\\<^sub>2 \\<circ>\n        (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n            (p\\<^sub>2, a, q\\<^sub>2)))\n        pq)\n   ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n  (infs c\\<^sub>1\n    (smap\n      (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n          (p\\<^sub>1, a, q\\<^sub>1))\n      ((p, q) ## (u ||| v) ||| w ||| u ||| v)) \\<or>\n   infs c\\<^sub>2\n    (smap\n      (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n          (p\\<^sub>2, a, q\\<^sub>2))\n      ((p, q) ## (u ||| v) ||| w ||| u ||| v)))\n\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       infs\n        (\\<lambda>pq.\n            (c\\<^sub>1 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>1, a, q\\<^sub>1)))\n             pq \\<or>\n            (c\\<^sub>2 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>2, a, q\\<^sub>2)))\n             pq)\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<or>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "also"], ["proof (state)\nthis:\n  infs\n   (\\<lambda>pq.\n       (c\\<^sub>1 \\<circ>\n        (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n            (p\\<^sub>1, a, q\\<^sub>1)))\n        pq \\<or>\n       (c\\<^sub>2 \\<circ>\n        (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n            (p\\<^sub>2, a, q\\<^sub>2)))\n        pq)\n   ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n  (infs c\\<^sub>1\n    (smap\n      (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n          (p\\<^sub>1, a, q\\<^sub>1))\n      ((p, q) ## (u ||| v) ||| w ||| u ||| v)) \\<or>\n   infs c\\<^sub>2\n    (smap\n      (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n          (p\\<^sub>2, a, q\\<^sub>2))\n      ((p, q) ## (u ||| v) ||| w ||| u ||| v)))\n\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       infs\n        (\\<lambda>pq.\n            (c\\<^sub>1 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>1, a, q\\<^sub>1)))\n             pq \\<or>\n            (c\\<^sub>2 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>2, a, q\\<^sub>2)))\n             pq)\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<or>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "have \"smap ?tfst ((p, q) ## (u ||| v) ||| w ||| u ||| v) = p ## u ||| w ||| u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. smap\n     (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n         (p\\<^sub>1, a, q\\<^sub>1))\n     ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n    p ## u ||| w ||| u", "by (coinduction arbitrary: p q u v w) (auto simp flip: szip_unfold, metis stream.collapse)"], ["proof (state)\nthis:\n  smap\n   (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n       (p\\<^sub>1, a, q\\<^sub>1))\n   ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n  p ## u ||| w ||| u\n\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       infs\n        (\\<lambda>pq.\n            (c\\<^sub>1 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>1, a, q\\<^sub>1)))\n             pq \\<or>\n            (c\\<^sub>2 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>2, a, q\\<^sub>2)))\n             pq)\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<or>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "also"], ["proof (state)\nthis:\n  smap\n   (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n       (p\\<^sub>1, a, q\\<^sub>1))\n   ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n  p ## u ||| w ||| u\n\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       infs\n        (\\<lambda>pq.\n            (c\\<^sub>1 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>1, a, q\\<^sub>1)))\n             pq \\<or>\n            (c\\<^sub>2 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>2, a, q\\<^sub>2)))\n             pq)\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<or>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "have \"smap ?tsnd ((p, q) ## (u ||| v) ||| w ||| u ||| v) = q ## v ||| w ||| v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. smap\n     (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n         (p\\<^sub>2, a, q\\<^sub>2))\n     ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n    q ## v ||| w ||| v", "by (coinduction arbitrary: p q u v w) (auto simp flip: szip_unfold, metis stream.collapse)"], ["proof (state)\nthis:\n  smap\n   (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n       (p\\<^sub>2, a, q\\<^sub>2))\n   ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n  q ## v ||| w ||| v\n\ngoal (1 subgoal):\n 1. \\<And>c\\<^sub>1 c\\<^sub>2 w r s p q.\n       infs\n        (\\<lambda>pq.\n            (c\\<^sub>1 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>1, a, q\\<^sub>1)))\n             pq \\<or>\n            (c\\<^sub>2 \\<circ>\n             (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n                 (p\\<^sub>2, a, q\\<^sub>2)))\n             pq)\n        ((p, q) ## (r ||| s) ||| w ||| r ||| s) =\n       (infs c\\<^sub>1 (p ## r ||| w ||| r) \\<or>\n        infs c\\<^sub>2 (q ## s ||| w ||| s))", "finally"], ["proof (chain)\npicking this:\n  infs\n   (\\<lambda>pq.\n       (c\\<^sub>1 \\<circ>\n        (\\<lambda>a.\n            case a of\n            (a, b) \\<Rightarrow>\n              (case a of\n               (p\\<^sub>1, p\\<^sub>2) \\<Rightarrow>\n                 \\<lambda>a.\n                    case a of\n                    (a, q\\<^sub>1, q\\<^sub>2) \\<Rightarrow>\n                      (p\\<^sub>1, a, q\\<^sub>1))\n               b))\n        pq \\<or>\n       (c\\<^sub>2 \\<circ>\n        (\\<lambda>a.\n            case a of\n            (a, b) \\<Rightarrow>\n              (case a of\n               (p\\<^sub>1, p\\<^sub>2) \\<Rightarrow>\n                 \\<lambda>a.\n                    case a of\n                    (a, q\\<^sub>1, q\\<^sub>2) \\<Rightarrow>\n                      (p\\<^sub>2, a, q\\<^sub>2))\n               b))\n        pq)\n   ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n  (infs c\\<^sub>1 (p ## u ||| w ||| u) \\<or>\n   infs c\\<^sub>2 (q ## v ||| w ||| v))", "show \"infs (\\<lambda> pq. (c\\<^sub>1 \\<circ> (\\<lambda> ((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2). (p\\<^sub>1, a, q\\<^sub>1))) pq \\<or>\n       (c\\<^sub>2 \\<circ> (\\<lambda> ((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2). (p\\<^sub>2, a, q\\<^sub>2))) pq) ((p, q) ## (u ||| v) ||| w ||| (u ||| v)) \\<longleftrightarrow>\n      infs c\\<^sub>1 (p ## u ||| w ||| u) \\<or> infs c\\<^sub>2 (q ## v ||| w ||| v)\""], ["proof (prove)\nusing this:\n  infs\n   (\\<lambda>pq.\n       (c\\<^sub>1 \\<circ>\n        (\\<lambda>a.\n            case a of\n            (a, b) \\<Rightarrow>\n              (case a of\n               (p\\<^sub>1, p\\<^sub>2) \\<Rightarrow>\n                 \\<lambda>a.\n                    case a of\n                    (a, q\\<^sub>1, q\\<^sub>2) \\<Rightarrow>\n                      (p\\<^sub>1, a, q\\<^sub>1))\n               b))\n        pq \\<or>\n       (c\\<^sub>2 \\<circ>\n        (\\<lambda>a.\n            case a of\n            (a, b) \\<Rightarrow>\n              (case a of\n               (p\\<^sub>1, p\\<^sub>2) \\<Rightarrow>\n                 \\<lambda>a.\n                    case a of\n                    (a, q\\<^sub>1, q\\<^sub>2) \\<Rightarrow>\n                      (p\\<^sub>2, a, q\\<^sub>2))\n               b))\n        pq)\n   ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n  (infs c\\<^sub>1 (p ## u ||| w ||| u) \\<or>\n   infs c\\<^sub>2 (q ## v ||| w ||| v))\n\ngoal (1 subgoal):\n 1. infs\n     (\\<lambda>pq.\n         (c\\<^sub>1 \\<circ>\n          (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n              (p\\<^sub>1, a, q\\<^sub>1)))\n          pq \\<or>\n         (c\\<^sub>2 \\<circ>\n          (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n              (p\\<^sub>2, a, q\\<^sub>2)))\n          pq)\n     ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n    (infs c\\<^sub>1 (p ## u ||| w ||| u) \\<or>\n     infs c\\<^sub>2 (q ## v ||| w ||| v))", "by this"], ["proof (state)\nthis:\n  infs\n   (\\<lambda>pq.\n       (c\\<^sub>1 \\<circ>\n        (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n            (p\\<^sub>1, a, q\\<^sub>1)))\n        pq \\<or>\n       (c\\<^sub>2 \\<circ>\n        (\\<lambda>((p\\<^sub>1, p\\<^sub>2), a, q\\<^sub>1, q\\<^sub>2).\n            (p\\<^sub>2, a, q\\<^sub>2)))\n        pq)\n   ((p, q) ## (u ||| v) ||| w ||| u ||| v) =\n  (infs c\\<^sub>1 (p ## u ||| w ||| u) \\<or>\n   infs c\\<^sub>2 (q ## v ||| w ||| v))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemmas union_language = union.product_language"], ["", "lemmas union_nodes_finite = union.product_nodes_finite"], ["", "lemmas union_nodes_card = union.product_nodes_card"], ["", "abbreviation intersect where \"intersect A B \\<equiv> degeneralize (intersect' A B)\""], ["", "lemma intersect_language[simp]: \"DBTA.language (intersect A B) = DBTA.language A \\<inter> DBTA.language B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. DBTA.language (intersect A B) = DBTA.language A \\<inter> DBTA.language B", "by simp"], ["", "lemma intersect_nodes_finite:\n    assumes \"finite (DBTA.nodes A)\" \"finite (DBTA.nodes B)\"\n    shows \"finite (DBTA.nodes (intersect A B))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (DBTA.nodes (intersect A B))", "using intersect'_nodes_finite assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>finite (DBTA.nodes ?A); finite (DBTA.nodes ?B)\\<rbrakk>\n  \\<Longrightarrow> finite (DGBTA.nodes (intersect' ?A ?B))\n  finite (DBTA.nodes A)\n  finite (DBTA.nodes B)\n\ngoal (1 subgoal):\n 1. finite (DBTA.nodes (intersect A B))", "by simp"], ["", "lemma intersect_nodes_card:\n    assumes \"finite (DBTA.nodes A)\" \"finite (DBTA.nodes B)\"\n    shows \"card (DBTA.nodes (intersect A B)) \\<le> 2 * card (DBTA.nodes A) * card (DBTA.nodes B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card (DBTA.nodes (intersect A B))\n    \\<le> 2 * card (DBTA.nodes A) * card (DBTA.nodes B)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. card (DBTA.nodes (intersect A B))\n    \\<le> 2 * card (DBTA.nodes A) * card (DBTA.nodes B)", "have \"card (DBTA.nodes (intersect A B)) \\<le>\n      max 1 (length (dgbta.accepting (intersect' A B))) * card (DGBTA.nodes (intersect' A B))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card (DBTA.nodes (intersect A B))\n    \\<le> max 1 (length (dgbta.accepting (intersect' A B))) *\n          card (DGBTA.nodes (intersect' A B))", "using degeneralize_nodes_card"], ["proof (prove)\nusing this:\n  card (DBTA.nodes (degeneralize ?A))\n  \\<le> max 1 (length (dgbta.accepting ?A)) * card (DGBTA.nodes ?A)\n\ngoal (1 subgoal):\n 1. card (DBTA.nodes (intersect A B))\n    \\<le> max 1 (length (dgbta.accepting (intersect' A B))) *\n          card (DGBTA.nodes (intersect' A B))", "by this"], ["proof (state)\nthis:\n  card (DBTA.nodes (intersect A B))\n  \\<le> max 1 (length (dgbta.accepting (intersect' A B))) *\n        card (DGBTA.nodes (intersect' A B))\n\ngoal (1 subgoal):\n 1. card (DBTA.nodes (intersect A B))\n    \\<le> 2 * card (DBTA.nodes A) * card (DBTA.nodes B)", "also"], ["proof (state)\nthis:\n  card (DBTA.nodes (intersect A B))\n  \\<le> max 1 (length (dgbta.accepting (intersect' A B))) *\n        card (DGBTA.nodes (intersect' A B))\n\ngoal (1 subgoal):\n 1. card (DBTA.nodes (intersect A B))\n    \\<le> 2 * card (DBTA.nodes A) * card (DBTA.nodes B)", "have \"length (dgbta.accepting (intersect' A B)) = 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. length (dgbta.accepting (intersect' A B)) = 2", "by simp"], ["proof (state)\nthis:\n  length (dgbta.accepting (intersect' A B)) = 2\n\ngoal (1 subgoal):\n 1. card (DBTA.nodes (intersect A B))\n    \\<le> 2 * card (DBTA.nodes A) * card (DBTA.nodes B)", "also"], ["proof (state)\nthis:\n  length (dgbta.accepting (intersect' A B)) = 2\n\ngoal (1 subgoal):\n 1. card (DBTA.nodes (intersect A B))\n    \\<le> 2 * card (DBTA.nodes A) * card (DBTA.nodes B)", "have \"card (DGBTA.nodes (intersect' A B)) \\<le> card (DBTA.nodes A) * card (DBTA.nodes B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card (DGBTA.nodes (intersect' A B))\n    \\<le> card (DBTA.nodes A) * card (DBTA.nodes B)", "using intersect'_nodes_card assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>finite (DBTA.nodes ?A); finite (DBTA.nodes ?B)\\<rbrakk>\n  \\<Longrightarrow> card (DGBTA.nodes (intersect' ?A ?B))\n                    \\<le> card (DBTA.nodes ?A) * card (DBTA.nodes ?B)\n  finite (DBTA.nodes A)\n  finite (DBTA.nodes B)\n\ngoal (1 subgoal):\n 1. card (DGBTA.nodes (intersect' A B))\n    \\<le> card (DBTA.nodes A) * card (DBTA.nodes B)", "by this"], ["proof (state)\nthis:\n  card (DGBTA.nodes (intersect' A B))\n  \\<le> card (DBTA.nodes A) * card (DBTA.nodes B)\n\ngoal (1 subgoal):\n 1. card (DBTA.nodes (intersect A B))\n    \\<le> 2 * card (DBTA.nodes A) * card (DBTA.nodes B)", "finally"], ["proof (chain)\npicking this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      max 1 2 * x \\<le> max 1 2 * y) \\<Longrightarrow>\n  card (DBTA.nodes (intersect A B))\n  \\<le> max 1 2 * (card (DBTA.nodes A) * card (DBTA.nodes B))", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      max 1 2 * x \\<le> max 1 2 * y) \\<Longrightarrow>\n  card (DBTA.nodes (intersect A B))\n  \\<le> max 1 2 * (card (DBTA.nodes A) * card (DBTA.nodes B))\n\ngoal (1 subgoal):\n 1. card (DBTA.nodes (intersect A B))\n    \\<le> 2 * card (DBTA.nodes A) * card (DBTA.nodes B)", "by simp"], ["proof (state)\nthis:\n  card (DBTA.nodes (intersect A B))\n  \\<le> 2 * card (DBTA.nodes A) * card (DBTA.nodes B)\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}