{"file_name": "/home/qj213/afp-2021-10-22/thys/Transition_Systems_and_Automata/Automata/NBA/NBA.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Transition_Systems_and_Automata", "problem_names": ["lemma nodes_mono: \"mono nodes\"", "lemma language_mono: \"mono language\"", "lemma simulation_language:\n    assumes \"alphabet A \\<subseteq> alphabet B\"\n    assumes \"\\<And> p. p \\<in> initial A \\<Longrightarrow> \\<exists> q \\<in> initial B. (p, q) \\<in> R\"\n    assumes \"\\<And> a p p' q. p' \\<in> transition A a p \\<Longrightarrow> (p, q) \\<in> R \\<Longrightarrow> \\<exists> q' \\<in> transition B a q. (p', q') \\<in> R\"\n    assumes \"\\<And> p q. (p, q) \\<in> R \\<Longrightarrow> accepting A p \\<Longrightarrow> accepting B q\"\n    shows \"language A \\<subseteq> language B\""], "translations": [["", "lemma nodes_mono: \"mono nodes\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mono nodes", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y. x \\<le> y \\<Longrightarrow> nodes x \\<subseteq> nodes y", "fix A B :: \"('label, 'state) nba\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y. x \\<le> y \\<Longrightarrow> nodes x \\<subseteq> nodes y", "assume 1: \"A \\<le> B\""], ["proof (state)\nthis:\n  A \\<le> B\n\ngoal (1 subgoal):\n 1. \\<And>x y. x \\<le> y \\<Longrightarrow> nodes x \\<subseteq> nodes y", "have 2: \"alphabet A \\<subseteq> alphabet B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. alphabet A \\<subseteq> alphabet B", "using 1"], ["proof (prove)\nusing this:\n  A \\<le> B\n\ngoal (1 subgoal):\n 1. alphabet A \\<subseteq> alphabet B", "unfolding less_eq_nba_def"], ["proof (prove)\nusing this:\n  alphabet A \\<subseteq> alphabet B \\<and>\n  initial A \\<subseteq> initial B \\<and>\n  transition A \\<le> transition B \\<and> accepting A \\<le> accepting B\n\ngoal (1 subgoal):\n 1. alphabet A \\<subseteq> alphabet B", "by auto"], ["proof (state)\nthis:\n  alphabet A \\<subseteq> alphabet B\n\ngoal (1 subgoal):\n 1. \\<And>x y. x \\<le> y \\<Longrightarrow> nodes x \\<subseteq> nodes y", "have 3: \"initial A \\<subseteq> initial B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. initial A \\<subseteq> initial B", "using 1"], ["proof (prove)\nusing this:\n  A \\<le> B\n\ngoal (1 subgoal):\n 1. initial A \\<subseteq> initial B", "unfolding less_eq_nba_def"], ["proof (prove)\nusing this:\n  alphabet A \\<subseteq> alphabet B \\<and>\n  initial A \\<subseteq> initial B \\<and>\n  transition A \\<le> transition B \\<and> accepting A \\<le> accepting B\n\ngoal (1 subgoal):\n 1. initial A \\<subseteq> initial B", "by auto"], ["proof (state)\nthis:\n  initial A \\<subseteq> initial B\n\ngoal (1 subgoal):\n 1. \\<And>x y. x \\<le> y \\<Longrightarrow> nodes x \\<subseteq> nodes y", "have 4: \"transition A a p \\<subseteq> transition B a p\" for a p"], ["proof (prove)\ngoal (1 subgoal):\n 1. transition A a p \\<subseteq> transition B a p", "using 1"], ["proof (prove)\nusing this:\n  A \\<le> B\n\ngoal (1 subgoal):\n 1. transition A a p \\<subseteq> transition B a p", "unfolding less_eq_nba_def le_fun_def"], ["proof (prove)\nusing this:\n  alphabet A \\<subseteq> alphabet B \\<and>\n  initial A \\<subseteq> initial B \\<and>\n  (\\<forall>x xa. transition A x xa \\<subseteq> transition B x xa) \\<and>\n  (\\<forall>x. accepting A x \\<le> accepting B x)\n\ngoal (1 subgoal):\n 1. transition A a p \\<subseteq> transition B a p", "by auto"], ["proof (state)\nthis:\n  transition A ?a ?p \\<subseteq> transition B ?a ?p\n\ngoal (1 subgoal):\n 1. \\<And>x y. x \\<le> y \\<Longrightarrow> nodes x \\<subseteq> nodes y", "have 5: \"p \\<in> nodes B\" if \"p \\<in> nodes A\" for p"], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<in> nodes B", "using that 2 3 4"], ["proof (prove)\nusing this:\n  p \\<in> nodes A\n  alphabet A \\<subseteq> alphabet B\n  initial A \\<subseteq> initial B\n  transition A ?a ?p \\<subseteq> transition B ?a ?p\n\ngoal (1 subgoal):\n 1. p \\<in> nodes B", "by induct fastforce+"], ["proof (state)\nthis:\n  ?p \\<in> nodes A \\<Longrightarrow> ?p \\<in> nodes B\n\ngoal (1 subgoal):\n 1. \\<And>x y. x \\<le> y \\<Longrightarrow> nodes x \\<subseteq> nodes y", "show \"nodes A \\<subseteq> nodes B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nodes A \\<subseteq> nodes B", "using 5"], ["proof (prove)\nusing this:\n  ?p \\<in> nodes A \\<Longrightarrow> ?p \\<in> nodes B\n\ngoal (1 subgoal):\n 1. nodes A \\<subseteq> nodes B", "by auto"], ["proof (state)\nthis:\n  nodes A \\<subseteq> nodes B\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma language_mono: \"mono language\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mono language", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y. x \\<le> y \\<Longrightarrow> language x \\<subseteq> language y", "fix A B :: \"('label, 'state) nba\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y. x \\<le> y \\<Longrightarrow> language x \\<subseteq> language y", "assume 1: \"A \\<le> B\""], ["proof (state)\nthis:\n  A \\<le> B\n\ngoal (1 subgoal):\n 1. \\<And>x y. x \\<le> y \\<Longrightarrow> language x \\<subseteq> language y", "have 2: \"alphabet A \\<subseteq> alphabet B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. alphabet A \\<subseteq> alphabet B", "using 1"], ["proof (prove)\nusing this:\n  A \\<le> B\n\ngoal (1 subgoal):\n 1. alphabet A \\<subseteq> alphabet B", "unfolding less_eq_nba_def"], ["proof (prove)\nusing this:\n  alphabet A \\<subseteq> alphabet B \\<and>\n  initial A \\<subseteq> initial B \\<and>\n  transition A \\<le> transition B \\<and> accepting A \\<le> accepting B\n\ngoal (1 subgoal):\n 1. alphabet A \\<subseteq> alphabet B", "by auto"], ["proof (state)\nthis:\n  alphabet A \\<subseteq> alphabet B\n\ngoal (1 subgoal):\n 1. \\<And>x y. x \\<le> y \\<Longrightarrow> language x \\<subseteq> language y", "have 3: \"initial A \\<subseteq> initial B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. initial A \\<subseteq> initial B", "using 1"], ["proof (prove)\nusing this:\n  A \\<le> B\n\ngoal (1 subgoal):\n 1. initial A \\<subseteq> initial B", "unfolding less_eq_nba_def"], ["proof (prove)\nusing this:\n  alphabet A \\<subseteq> alphabet B \\<and>\n  initial A \\<subseteq> initial B \\<and>\n  transition A \\<le> transition B \\<and> accepting A \\<le> accepting B\n\ngoal (1 subgoal):\n 1. initial A \\<subseteq> initial B", "by auto"], ["proof (state)\nthis:\n  initial A \\<subseteq> initial B\n\ngoal (1 subgoal):\n 1. \\<And>x y. x \\<le> y \\<Longrightarrow> language x \\<subseteq> language y", "have 4: \"transition A a p \\<subseteq> transition B a p\" for a p"], ["proof (prove)\ngoal (1 subgoal):\n 1. transition A a p \\<subseteq> transition B a p", "using 1"], ["proof (prove)\nusing this:\n  A \\<le> B\n\ngoal (1 subgoal):\n 1. transition A a p \\<subseteq> transition B a p", "unfolding less_eq_nba_def le_fun_def"], ["proof (prove)\nusing this:\n  alphabet A \\<subseteq> alphabet B \\<and>\n  initial A \\<subseteq> initial B \\<and>\n  (\\<forall>x xa. transition A x xa \\<subseteq> transition B x xa) \\<and>\n  (\\<forall>x. accepting A x \\<le> accepting B x)\n\ngoal (1 subgoal):\n 1. transition A a p \\<subseteq> transition B a p", "by auto"], ["proof (state)\nthis:\n  transition A ?a ?p \\<subseteq> transition B ?a ?p\n\ngoal (1 subgoal):\n 1. \\<And>x y. x \\<le> y \\<Longrightarrow> language x \\<subseteq> language y", "have 5: \"accepting A p \\<Longrightarrow> accepting B p\" for p"], ["proof (prove)\ngoal (1 subgoal):\n 1. accepting A p \\<Longrightarrow> accepting B p", "using 1"], ["proof (prove)\nusing this:\n  A \\<le> B\n\ngoal (1 subgoal):\n 1. accepting A p \\<Longrightarrow> accepting B p", "unfolding less_eq_nba_def"], ["proof (prove)\nusing this:\n  alphabet A \\<subseteq> alphabet B \\<and>\n  initial A \\<subseteq> initial B \\<and>\n  transition A \\<le> transition B \\<and> accepting A \\<le> accepting B\n\ngoal (1 subgoal):\n 1. accepting A p \\<Longrightarrow> accepting B p", "by auto"], ["proof (state)\nthis:\n  accepting A ?p \\<Longrightarrow> accepting B ?p\n\ngoal (1 subgoal):\n 1. \\<And>x y. x \\<le> y \\<Longrightarrow> language x \\<subseteq> language y", "have 6: \"run B wr p\" if \"run A wr p\" for wr p"], ["proof (prove)\ngoal (1 subgoal):\n 1. run B wr p", "using that 2 4"], ["proof (prove)\nusing this:\n  run A wr p\n  alphabet A \\<subseteq> alphabet B\n  transition A ?a ?p \\<subseteq> transition B ?a ?p\n\ngoal (1 subgoal):\n 1. run B wr p", "by coinduct auto"], ["proof (state)\nthis:\n  run A ?wr ?p \\<Longrightarrow> run B ?wr ?p\n\ngoal (1 subgoal):\n 1. \\<And>x y. x \\<le> y \\<Longrightarrow> language x \\<subseteq> language y", "have 7: \"infs (accepting B) w\" if \"infs (accepting A) w\" for w"], ["proof (prove)\ngoal (1 subgoal):\n 1. infs (accepting B) w", "using infs_mono that 5"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>a.\n              \\<lbrakk>a \\<in> sset ?w; ?P a\\<rbrakk>\n              \\<Longrightarrow> ?Q a;\n   infs ?P ?w\\<rbrakk>\n  \\<Longrightarrow> infs ?Q ?w\n  infs (accepting A) w\n  accepting A ?p \\<Longrightarrow> accepting B ?p\n\ngoal (1 subgoal):\n 1. infs (accepting B) w", "by metis"], ["proof (state)\nthis:\n  infs (accepting A) ?w \\<Longrightarrow> infs (accepting B) ?w\n\ngoal (1 subgoal):\n 1. \\<And>x y. x \\<le> y \\<Longrightarrow> language x \\<subseteq> language y", "show \"language A \\<subseteq> language B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. language A \\<subseteq> language B", "using 3 6 7"], ["proof (prove)\nusing this:\n  initial A \\<subseteq> initial B\n  run A ?wr ?p \\<Longrightarrow> run B ?wr ?p\n  infs (accepting A) ?w \\<Longrightarrow> infs (accepting B) ?w\n\ngoal (1 subgoal):\n 1. language A \\<subseteq> language B", "by blast"], ["proof (state)\nthis:\n  language A \\<subseteq> language B\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma simulation_language:\n    assumes \"alphabet A \\<subseteq> alphabet B\"\n    assumes \"\\<And> p. p \\<in> initial A \\<Longrightarrow> \\<exists> q \\<in> initial B. (p, q) \\<in> R\"\n    assumes \"\\<And> a p p' q. p' \\<in> transition A a p \\<Longrightarrow> (p, q) \\<in> R \\<Longrightarrow> \\<exists> q' \\<in> transition B a q. (p', q') \\<in> R\"\n    assumes \"\\<And> p q. (p, q) \\<in> R \\<Longrightarrow> accepting A p \\<Longrightarrow> accepting B q\"\n    shows \"language A \\<subseteq> language B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. language A \\<subseteq> language B", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> language A \\<Longrightarrow> x \\<in> language B", "fix w"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> language A \\<Longrightarrow> x \\<in> language B", "assume 1: \"w \\<in> language A\""], ["proof (state)\nthis:\n  w \\<in> language A\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> language A \\<Longrightarrow> x \\<in> language B", "obtain r p where 2: \"p \\<in> initial A\" \"run A (w ||| r) p\" \"infs (accepting A) (p ## r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>p r.\n        \\<lbrakk>p \\<in> initial A; run A (w ||| r) p;\n         infs (accepting A) (p ## r)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using 1"], ["proof (prove)\nusing this:\n  w \\<in> language A\n\ngoal (1 subgoal):\n 1. (\\<And>p r.\n        \\<lbrakk>p \\<in> initial A; run A (w ||| r) p;\n         infs (accepting A) (p ## r)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by rule"], ["proof (state)\nthis:\n  p \\<in> initial A\n  run A (w ||| r) p\n  infs (accepting A) (p ## r)\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> language A \\<Longrightarrow> x \\<in> language B", "define P where \"P n q \\<equiv> (target (stake n (w ||| r)) p, q) \\<in> R\" for n q"], ["proof (state)\nthis:\n  P ?n ?q \\<equiv> (target (stake ?n (w ||| r)) p, ?q) \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> language A \\<Longrightarrow> x \\<in> language B", "obtain q where 3: \"q \\<in> initial B\" \"(p, q) \\<in> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>q.\n        \\<lbrakk>q \\<in> initial B; (p, q) \\<in> R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms(2) 2(1)"], ["proof (prove)\nusing this:\n  ?p \\<in> initial A \\<Longrightarrow>\n  \\<exists>q\\<in>initial B. (?p, q) \\<in> R\n  p \\<in> initial A\n\ngoal (1 subgoal):\n 1. (\\<And>q.\n        \\<lbrakk>q \\<in> initial B; (p, q) \\<in> R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  q \\<in> initial B\n  (p, q) \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> language A \\<Longrightarrow> x \\<in> language B", "obtain ws where 4:\n      \"run B ws q\" \"\\<And> i. P (0 + i) (target (stake i ws) q)\" \"\\<And> i. fst (ws !! i) = w !! (0 + i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>ws.\n        \\<lbrakk>run B ws q; \\<And>i. P (0 + i) (target (stake i ws) q);\n         \\<And>i. fst (ws !! i) = w !! (0 + i)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof (rule nba.invariant_run_index)"], ["proof (state)\ngoal (3 subgoals):\n 1. (\\<And>ws.\n        \\<lbrakk>run B ws q; \\<And>i. P (0 + i) (target (stake i ws) q);\n         \\<And>i. fst (ws !! i) = w !! (0 + i)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    ?P2 ?n2 ?p2\n 2. \\<And>n p.\n       \\<lbrakk>\\<And>ws.\n                   \\<lbrakk>run B ws q;\n                    \\<And>i. P (0 + i) (target (stake i ws) q);\n                    \\<And>i. fst (ws !! i) = w !! (0 + i)\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        ?P2 n p\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a.\n                            (fst a \\<in> alphabet ?A2 \\<and>\n                             snd a \\<in> transition ?A2 (fst a) p) \\<and>\n                            ?P2 (Suc n) (snd a) \\<and> ?Q2 n p a\n 3. \\<And>r.\n       \\<lbrakk>\\<And>ws.\n                   \\<lbrakk>run B ws q;\n                    \\<And>i. P (0 + i) (target (stake i ws) q);\n                    \\<And>i. fst (ws !! i) = w !! (0 + i)\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        run ?A2 r ?p2; \\<And>i. ?P2 (?n2 + i) (target (stake i r) ?p2);\n        \\<And>i. ?Q2 (?n2 + i) (target (stake i r) ?p2) (r !! i)\\<rbrakk>\n       \\<Longrightarrow> thesis", "have \"stake k (w ||| r) @- (w !! k, target (stake (Suc k) (w ||| r)) p) ##\n        sdrop (Suc k) (w ||| r) = w ||| r\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. stake k (w ||| r) @-\n    (w !! k, target (stake (Suc k) (w ||| r)) p) ##\n    sdrop (Suc k) (w ||| r) =\n    w ||| r", "by (metis id_stake_snth_sdrop snth_szip sscan_snth szip_smap_snd nba.trace_alt_def)"], ["proof (state)\nthis:\n  stake ?k (w ||| r) @-\n  (w !! ?k, target (stake (Suc ?k) (w ||| r)) p) ##\n  sdrop (Suc ?k) (w ||| r) =\n  w ||| r\n\ngoal (3 subgoals):\n 1. (\\<And>ws.\n        \\<lbrakk>run B ws q; \\<And>i. P (0 + i) (target (stake i ws) q);\n         \\<And>i. fst (ws !! i) = w !! (0 + i)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    ?P2 ?n2 ?p2\n 2. \\<And>n p.\n       \\<lbrakk>\\<And>ws.\n                   \\<lbrakk>run B ws q;\n                    \\<And>i. P (0 + i) (target (stake i ws) q);\n                    \\<And>i. fst (ws !! i) = w !! (0 + i)\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        ?P2 n p\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a.\n                            (fst a \\<in> alphabet ?A2 \\<and>\n                             snd a \\<in> transition ?A2 (fst a) p) \\<and>\n                            ?P2 (Suc n) (snd a) \\<and> ?Q2 n p a\n 3. \\<And>r.\n       \\<lbrakk>\\<And>ws.\n                   \\<lbrakk>run B ws q;\n                    \\<And>i. P (0 + i) (target (stake i ws) q);\n                    \\<And>i. fst (ws !! i) = w !! (0 + i)\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        run ?A2 r ?p2; \\<And>i. ?P2 (?n2 + i) (target (stake i r) ?p2);\n        \\<And>i. ?Q2 (?n2 + i) (target (stake i r) ?p2) (r !! i)\\<rbrakk>\n       \\<Longrightarrow> thesis", "also"], ["proof (state)\nthis:\n  stake ?k (w ||| r) @-\n  (w !! ?k, target (stake (Suc ?k) (w ||| r)) p) ##\n  sdrop (Suc ?k) (w ||| r) =\n  w ||| r\n\ngoal (3 subgoals):\n 1. (\\<And>ws.\n        \\<lbrakk>run B ws q; \\<And>i. P (0 + i) (target (stake i ws) q);\n         \\<And>i. fst (ws !! i) = w !! (0 + i)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    ?P2 ?n2 ?p2\n 2. \\<And>n p.\n       \\<lbrakk>\\<And>ws.\n                   \\<lbrakk>run B ws q;\n                    \\<And>i. P (0 + i) (target (stake i ws) q);\n                    \\<And>i. fst (ws !! i) = w !! (0 + i)\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        ?P2 n p\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a.\n                            (fst a \\<in> alphabet ?A2 \\<and>\n                             snd a \\<in> transition ?A2 (fst a) p) \\<and>\n                            ?P2 (Suc n) (snd a) \\<and> ?Q2 n p a\n 3. \\<And>r.\n       \\<lbrakk>\\<And>ws.\n                   \\<lbrakk>run B ws q;\n                    \\<And>i. P (0 + i) (target (stake i ws) q);\n                    \\<And>i. fst (ws !! i) = w !! (0 + i)\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        run ?A2 r ?p2; \\<And>i. ?P2 (?n2 + i) (target (stake i r) ?p2);\n        \\<And>i. ?Q2 (?n2 + i) (target (stake i r) ?p2) (r !! i)\\<rbrakk>\n       \\<Longrightarrow> thesis", "have \"run A \\<dots> p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. run A (w ||| r) p", "using 2(2)"], ["proof (prove)\nusing this:\n  run A (w ||| r) p\n\ngoal (1 subgoal):\n 1. run A (w ||| r) p", "by this"], ["proof (state)\nthis:\n  run A (w ||| r) p\n\ngoal (3 subgoals):\n 1. (\\<And>ws.\n        \\<lbrakk>run B ws q; \\<And>i. P (0 + i) (target (stake i ws) q);\n         \\<And>i. fst (ws !! i) = w !! (0 + i)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    ?P2 ?n2 ?p2\n 2. \\<And>n p.\n       \\<lbrakk>\\<And>ws.\n                   \\<lbrakk>run B ws q;\n                    \\<And>i. P (0 + i) (target (stake i ws) q);\n                    \\<And>i. fst (ws !! i) = w !! (0 + i)\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        ?P2 n p\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a.\n                            (fst a \\<in> alphabet ?A2 \\<and>\n                             snd a \\<in> transition ?A2 (fst a) p) \\<and>\n                            ?P2 (Suc n) (snd a) \\<and> ?Q2 n p a\n 3. \\<And>r.\n       \\<lbrakk>\\<And>ws.\n                   \\<lbrakk>run B ws q;\n                    \\<And>i. P (0 + i) (target (stake i ws) q);\n                    \\<And>i. fst (ws !! i) = w !! (0 + i)\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        run ?A2 r ?p2; \\<And>i. ?P2 (?n2 + i) (target (stake i r) ?p2);\n        \\<And>i. ?Q2 (?n2 + i) (target (stake i r) ?p2) (r !! i)\\<rbrakk>\n       \\<Longrightarrow> thesis", "finally"], ["proof (chain)\npicking this:\n  run A\n   (stake ?k1 (w ||| r) @-\n    (w !! ?k1, target (stake (Suc ?k1) (w ||| r)) p) ##\n    sdrop (Suc ?k1) (w ||| r))\n   p", "show \"\\<exists> a. (fst a \\<in> alphabet B \\<and> snd a \\<in> transition B (fst a) q) \\<and>\n        P (Suc n) (snd a) \\<and> fst a = w !! n\" if \"P n q\" for n q"], ["proof (prove)\nusing this:\n  run A\n   (stake ?k1 (w ||| r) @-\n    (w !! ?k1, target (stake (Suc ?k1) (w ||| r)) p) ##\n    sdrop (Suc ?k1) (w ||| r))\n   p\n\ngoal (1 subgoal):\n 1. \\<exists>a.\n       (fst a \\<in> alphabet B \\<and>\n        snd a \\<in> transition B (fst a) q) \\<and>\n       P (Suc n) (snd a) \\<and> fst a = w !! n", "using assms(1, 3) that"], ["proof (prove)\nusing this:\n  run A\n   (stake ?k1 (w ||| r) @-\n    (w !! ?k1, target (stake (Suc ?k1) (w ||| r)) p) ##\n    sdrop (Suc ?k1) (w ||| r))\n   p\n  alphabet A \\<subseteq> alphabet B\n  \\<lbrakk>?p' \\<in> transition A ?a ?p; (?p, ?q) \\<in> R\\<rbrakk>\n  \\<Longrightarrow> \\<exists>q'\\<in>transition B ?a ?q. (?p', q') \\<in> R\n  P n q\n\ngoal (1 subgoal):\n 1. \\<exists>a.\n       (fst a \\<in> alphabet B \\<and>\n        snd a \\<in> transition B (fst a) q) \\<and>\n       P (Suc n) (snd a) \\<and> fst a = w !! n", "unfolding P_def"], ["proof (prove)\nusing this:\n  run A\n   (stake ?k1 (w ||| r) @-\n    (w !! ?k1, target (stake (Suc ?k1) (w ||| r)) p) ##\n    sdrop (Suc ?k1) (w ||| r))\n   p\n  alphabet A \\<subseteq> alphabet B\n  \\<lbrakk>?p' \\<in> transition A ?a ?p; (?p, ?q) \\<in> R\\<rbrakk>\n  \\<Longrightarrow> \\<exists>q'\\<in>transition B ?a ?q. (?p', q') \\<in> R\n  (target (stake n (w ||| r)) p, q) \\<in> R\n\ngoal (1 subgoal):\n 1. \\<exists>a.\n       (fst a \\<in> alphabet B \\<and>\n        snd a \\<in> transition B (fst a) q) \\<and>\n       (target (stake (Suc n) (w ||| r)) p, snd a) \\<in> R \\<and>\n       fst a = w !! n", "by fastforce"], ["proof (state)\nthis:\n  P ?n ?q \\<Longrightarrow>\n  \\<exists>a.\n     (fst a \\<in> alphabet B \\<and>\n      snd a \\<in> transition B (fst a) ?q) \\<and>\n     P (Suc ?n) (snd a) \\<and> fst a = w !! ?n\n\ngoal (2 subgoals):\n 1. (\\<And>ws.\n        \\<lbrakk>run B ws q; \\<And>i. P (0 + i) (target (stake i ws) q);\n         \\<And>i. fst (ws !! i) = w !! (0 + i)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    P ?n2 ?p2\n 2. \\<And>r.\n       \\<lbrakk>\\<And>ws.\n                   \\<lbrakk>run B ws q;\n                    \\<And>i. P (0 + i) (target (stake i ws) q);\n                    \\<And>i. fst (ws !! i) = w !! (0 + i)\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        run B r ?p2; \\<And>i. P (?n2 + i) (target (stake i r) ?p2);\n        \\<And>i. fst (r !! i) = w !! (?n2 + i)\\<rbrakk>\n       \\<Longrightarrow> thesis", "show \"P 0 q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P 0 q", "unfolding P_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (target (stake 0 (w ||| r)) p, q) \\<in> R", "using 3(2)"], ["proof (prove)\nusing this:\n  (p, q) \\<in> R\n\ngoal (1 subgoal):\n 1. (target (stake 0 (w ||| r)) p, q) \\<in> R", "by auto"], ["proof (state)\nthis:\n  P 0 q\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       \\<lbrakk>\\<And>ws.\n                   \\<lbrakk>run B ws q;\n                    \\<And>i. P (0 + i) (target (stake i ws) q);\n                    \\<And>i. fst (ws !! i) = w !! (0 + i)\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        run B r q; \\<And>i. P (0 + i) (target (stake i r) q);\n        \\<And>i. fst (r !! i) = w !! (0 + i)\\<rbrakk>\n       \\<Longrightarrow> thesis", "qed rule"], ["proof (state)\nthis:\n  run B ws q\n  P (0 + ?i) (target (stake ?i ws) q)\n  fst (ws !! ?i) = w !! (0 + ?i)\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> language A \\<Longrightarrow> x \\<in> language B", "obtain s where 5: \"ws = w ||| s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>s. ws = w ||| s \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using 4(3)"], ["proof (prove)\nusing this:\n  fst (ws !! ?i) = w !! (0 + ?i)\n\ngoal (1 subgoal):\n 1. (\\<And>s. ws = w ||| s \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis add.left_neutral eqI_snth snth_smap szip_smap)"], ["proof (state)\nthis:\n  ws = w ||| s\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> language A \\<Longrightarrow> x \\<in> language B", "show \"w \\<in> language B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w \\<in> language B", "proof"], ["proof (state)\ngoal (3 subgoals):\n 1. ?p \\<in> initial B\n 2. run B (w ||| ?r) ?p\n 3. infs (accepting B) (?p ## ?r)", "show \"q \\<in> initial B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. q \\<in> initial B", "using 3(1)"], ["proof (prove)\nusing this:\n  q \\<in> initial B\n\ngoal (1 subgoal):\n 1. q \\<in> initial B", "by this"], ["proof (state)\nthis:\n  q \\<in> initial B\n\ngoal (2 subgoals):\n 1. run B (w ||| ?r) q\n 2. infs (accepting B) (q ## ?r)", "show \"run B (w ||| s) q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. run B (w ||| s) q", "using 4(1)"], ["proof (prove)\nusing this:\n  run B ws q\n\ngoal (1 subgoal):\n 1. run B (w ||| s) q", "unfolding 5"], ["proof (prove)\nusing this:\n  run B (w ||| s) q\n\ngoal (1 subgoal):\n 1. run B (w ||| s) q", "by this"], ["proof (state)\nthis:\n  run B (w ||| s) q\n\ngoal (1 subgoal):\n 1. infs (accepting B) (q ## s)", "have 6: \"(\\<lambda> a b. (a, b) \\<in> R) \\<le> (\\<lambda> a b. accepting A a \\<longrightarrow> accepting B b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>a b. (a, b) \\<in> R)\n    \\<le> (\\<lambda>a b. accepting A a \\<longrightarrow> accepting B b)", "using assms(4)"], ["proof (prove)\nusing this:\n  \\<lbrakk>(?p, ?q) \\<in> R; accepting A ?p\\<rbrakk>\n  \\<Longrightarrow> accepting B ?q\n\ngoal (1 subgoal):\n 1. (\\<lambda>a b. (a, b) \\<in> R)\n    \\<le> (\\<lambda>a b. accepting A a \\<longrightarrow> accepting B b)", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>a b. (a, b) \\<in> R)\n  \\<le> (\\<lambda>a b. accepting A a \\<longrightarrow> accepting B b)\n\ngoal (1 subgoal):\n 1. infs (accepting B) (q ## s)", "have 7: \"stream_all2 (\\<lambda> p q. (p, q) \\<in> R) (trace (w ||| r) p) (trace (w ||| s) q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. stream_all2 (\\<lambda>p q. (p, q) \\<in> R) (trace (w ||| r) p)\n     (trace (w ||| s) q)", "using 4(2)"], ["proof (prove)\nusing this:\n  P (0 + ?i) (target (stake ?i ws) q)\n\ngoal (1 subgoal):\n 1. stream_all2 (\\<lambda>p q. (p, q) \\<in> R) (trace (w ||| r) p)\n     (trace (w ||| s) q)", "unfolding P_def 5"], ["proof (prove)\nusing this:\n  (target (stake (0 + ?i) (w ||| r)) p, target (stake ?i (w ||| s)) q)\n  \\<in> R\n\ngoal (1 subgoal):\n 1. stream_all2 (\\<lambda>p q. (p, q) \\<in> R) (trace (w ||| r) p)\n     (trace (w ||| s) q)", "by (simp add: stream_rel_snth del: stake.simps(2))"], ["proof (state)\nthis:\n  stream_all2 (\\<lambda>p q. (p, q) \\<in> R) (trace (w ||| r) p)\n   (trace (w ||| s) q)\n\ngoal (1 subgoal):\n 1. infs (accepting B) (q ## s)", "have 8: \"stream_all2 (\\<lambda> a b. accepting A a \\<longrightarrow> accepting B b) r s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. stream_all2\n     (\\<lambda>a b. accepting A a \\<longrightarrow> accepting B b) r s", "using stream.rel_mono 6 7"], ["proof (prove)\nusing this:\n  ?R \\<le> ?Ra \\<Longrightarrow> stream_all2 ?R \\<le> stream_all2 ?Ra\n  (\\<lambda>a b. (a, b) \\<in> R)\n  \\<le> (\\<lambda>a b. accepting A a \\<longrightarrow> accepting B b)\n  stream_all2 (\\<lambda>p q. (p, q) \\<in> R) (trace (w ||| r) p)\n   (trace (w ||| s) q)\n\ngoal (1 subgoal):\n 1. stream_all2\n     (\\<lambda>a b. accepting A a \\<longrightarrow> accepting B b) r s", "unfolding nba.trace_alt_def"], ["proof (prove)\nusing this:\n  ?R \\<le> ?Ra \\<Longrightarrow> stream_all2 ?R \\<le> stream_all2 ?Ra\n  (\\<lambda>a b. (a, b) \\<in> R)\n  \\<le> (\\<lambda>a b. accepting A a \\<longrightarrow> accepting B b)\n  stream_all2 (\\<lambda>p q. (p, q) \\<in> R) (smap snd (w ||| r))\n   (smap snd (w ||| s))\n\ngoal (1 subgoal):\n 1. stream_all2\n     (\\<lambda>a b. accepting A a \\<longrightarrow> accepting B b) r s", "by auto"], ["proof (state)\nthis:\n  stream_all2 (\\<lambda>a b. accepting A a \\<longrightarrow> accepting B b)\n   r s\n\ngoal (1 subgoal):\n 1. infs (accepting B) (q ## s)", "show \"infs (accepting B) (q ## s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. infs (accepting B) (q ## s)", "using infs_mono_strong 8 2(3)"], ["proof (prove)\nusing this:\n  \\<lbrakk>stream_all2 (\\<lambda>a b. ?P a \\<longrightarrow> ?Q b) ?u ?v;\n   infs ?P ?u\\<rbrakk>\n  \\<Longrightarrow> infs ?Q ?v\n  stream_all2 (\\<lambda>a b. accepting A a \\<longrightarrow> accepting B b)\n   r s\n  infs (accepting A) (p ## r)\n\ngoal (1 subgoal):\n 1. infs (accepting B) (q ## s)", "by simp"], ["proof (state)\nthis:\n  infs (accepting B) (q ## s)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  w \\<in> language B\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}