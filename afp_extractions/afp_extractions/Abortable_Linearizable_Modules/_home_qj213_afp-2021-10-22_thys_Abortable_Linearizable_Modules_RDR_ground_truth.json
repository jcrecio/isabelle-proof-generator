{"file_name": "/home/qj213/afp-2021-10-22/thys/Abortable_Linearizable_Modules/RDR.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Abortable_Linearizable_Modules", "problem_names": ["lemma exec_cons: \n  \"s \\<star> (rs # r)= (s \\<star> rs) \\<bullet> r\"", "lemma exec_append: \n  \"(s \\<star> rs) \\<star> rs'  = s \\<star> (rs@rs')\"", "lemma trans:\n  assumes \"s1 \\<preceq> s2\" and \"s2 \\<preceq> s3\"\n  shows \"s1 \\<preceq> s3\"", "lemma contains_star:\n  fixes s r rs\n  assumes \"contains s r\"\n  shows \"contains (s \\<star> rs) r\"", "lemma preceq_star: \"s \\<star> (rs#r) \\<preceq> s' \\<Longrightarrow> s \\<star> rs \\<preceq> s'\"", "lemma inf_glb:\"is_glb (s1 \\<sqinter> s2) s1 s2\"", "lemma idem_star: \nfixes r s rs\nassumes \"contains s r\"\nshows \"s \\<star> rs = s \\<star> (filter (\\<lambda> x . x \\<noteq> r) rs)\"", "lemma idem_star2: \n  fixes s rs' \n  shows \"\\<exists> rs' . s \\<star> rs = s \\<star> rs' \\<and> set rs' \\<subseteq> set rs \n    \\<and> (\\<forall> r \\<in> set rs' . \\<not> contains s r)\"", "lemma idem2_star:\nassumes \"contains s r\" \nand \"\\<And> r' . r' \\<in> set rs \\<Longrightarrow> fst r' \\<noteq> fst r\"\nshows \"\\<gamma> s r = \\<gamma> (s \\<star> rs) r\"", "lemma glb_common:\nfixes s1 s2 s rs1 rs2\nassumes \"s1 = s \\<star> rs1\" and \"s2 = s \\<star> rs2\"\nshows \"\\<exists> rs . s1 \\<sqinter> s2 = s \\<star> rs \\<and> set rs \\<subseteq> set rs1 \\<union> set rs2\"", "lemma glb_common_set:\nfixes ss s0 rset\nassumes \"finite ss\"  and \"ss \\<noteq> {}\"\nand \"\\<And> s . s \\<in> ss \\<Longrightarrow> \\<exists> rs . s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\"\nshows \"\\<exists> rs . \\<Sqinter> ss = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\""], "translations": [["", "lemma exec_cons: \n  \"s \\<star> (rs # r)= (s \\<star> rs) \\<bullet> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<star> Cons r rs = (s \\<star> rs) \\<bullet> r", "by simp"], ["", "lemma exec_append: \n  \"(s \\<star> rs) \\<star> rs'  = s \\<star> (rs@rs')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (s \\<star> rs) \\<star> rs' = s \\<star> append rs' rs", "proof (induct rs')"], ["proof (state)\ngoal (2 subgoals):\n 1. (s \\<star> rs) \\<star> [] = s \\<star> append [] rs\n 2. \\<And>a rs'.\n       (s \\<star> rs) \\<star> rs' =\n       s \\<star> append rs' rs \\<Longrightarrow>\n       (s \\<star> rs) \\<star> Cons a rs' = s \\<star> append (Cons a rs') rs", "show \"(s \\<star> rs) \\<star> []  = s \\<star> (rs@[])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (s \\<star> rs) \\<star> [] = s \\<star> append [] rs", "by simp"], ["proof (state)\nthis:\n  (s \\<star> rs) \\<star> [] = s \\<star> append [] rs\n\ngoal (1 subgoal):\n 1. \\<And>a rs'.\n       (s \\<star> rs) \\<star> rs' =\n       s \\<star> append rs' rs \\<Longrightarrow>\n       (s \\<star> rs) \\<star> Cons a rs' = s \\<star> append (Cons a rs') rs", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a rs'.\n       (s \\<star> rs) \\<star> rs' =\n       s \\<star> append rs' rs \\<Longrightarrow>\n       (s \\<star> rs) \\<star> Cons a rs' = s \\<star> append (Cons a rs') rs", "fix rs' r"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a rs'.\n       (s \\<star> rs) \\<star> rs' =\n       s \\<star> append rs' rs \\<Longrightarrow>\n       (s \\<star> rs) \\<star> Cons a rs' = s \\<star> append (Cons a rs') rs", "assume ih:\"(s \\<star> rs) \\<star> rs'  = s \\<star> (rs@rs')\""], ["proof (state)\nthis:\n  (s \\<star> rs) \\<star> rs' = s \\<star> append rs' rs\n\ngoal (1 subgoal):\n 1. \\<And>a rs'.\n       (s \\<star> rs) \\<star> rs' =\n       s \\<star> append rs' rs \\<Longrightarrow>\n       (s \\<star> rs) \\<star> Cons a rs' = s \\<star> append (Cons a rs') rs", "thus \"(s \\<star> rs) \\<star> (rs'#r)  = s \\<star> (rs @ (rs'#r))\""], ["proof (prove)\nusing this:\n  (s \\<star> rs) \\<star> rs' = s \\<star> append rs' rs\n\ngoal (1 subgoal):\n 1. (s \\<star> rs) \\<star> Cons r rs' = s \\<star> append (Cons r rs') rs", "by (metis append_Cons exec_cons)"], ["proof (state)\nthis:\n  (s \\<star> rs) \\<star> Cons r rs' = s \\<star> append (Cons r rs') rs\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma trans:\n  assumes \"s1 \\<preceq> s2\" and \"s2 \\<preceq> s3\"\n  shows \"s1 \\<preceq> s3\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s1 \\<preceq> s3", "using assms"], ["proof (prove)\nusing this:\n  s1 \\<preceq> s2\n  s2 \\<preceq> s3\n\ngoal (1 subgoal):\n 1. s1 \\<preceq> s3", "by (auto simp add:less_eq_def, metis exec_append)"], ["", "lemma contains_star:\n  fixes s r rs\n  assumes \"contains s r\"\n  shows \"contains (s \\<star> rs) r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. contains (s \\<star> rs) r", "proof (induct rs)"], ["proof (state)\ngoal (2 subgoals):\n 1. contains (s \\<star> []) r\n 2. \\<And>a rs.\n       contains (s \\<star> rs) r \\<Longrightarrow>\n       contains (s \\<star> Cons a rs) r", "case Nil"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. contains (s \\<star> []) r\n 2. \\<And>a rs.\n       contains (s \\<star> rs) r \\<Longrightarrow>\n       contains (s \\<star> Cons a rs) r", "show \"contains (s \\<star> []) r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. contains (s \\<star> []) r", "using assms"], ["proof (prove)\nusing this:\n  contains s r\n\ngoal (1 subgoal):\n 1. contains (s \\<star> []) r", "by auto"], ["proof (state)\nthis:\n  contains (s \\<star> []) r\n\ngoal (1 subgoal):\n 1. \\<And>a rs.\n       contains (s \\<star> rs) r \\<Longrightarrow>\n       contains (s \\<star> Cons a rs) r", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a rs.\n       contains (s \\<star> rs) r \\<Longrightarrow>\n       contains (s \\<star> Cons a rs) r", "case (Cons r' rs)"], ["proof (state)\nthis:\n  contains (s \\<star> rs) r\n\ngoal (1 subgoal):\n 1. \\<And>a rs.\n       contains (s \\<star> rs) r \\<Longrightarrow>\n       contains (s \\<star> Cons a rs) r", "with this"], ["proof (chain)\npicking this:\n  contains (s \\<star> rs) r\n  contains (s \\<star> rs) r", "obtain rs' where 1:\"s \\<star> rs = \\<bottom> \\<star> rs'\" and 2:\"r \\<in> set rs'\""], ["proof (prove)\nusing this:\n  contains (s \\<star> rs) r\n  contains (s \\<star> rs) r\n\ngoal (1 subgoal):\n 1. (\\<And>rs'.\n        \\<lbrakk>s \\<star> rs = \\<bottom> \\<star> rs';\n         r \\<in> set rs'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp add:contains_def)"], ["proof (state)\nthis:\n  s \\<star> rs = \\<bottom> \\<star> rs'\n  r \\<in> set rs'\n\ngoal (1 subgoal):\n 1. \\<And>a rs.\n       contains (s \\<star> rs) r \\<Longrightarrow>\n       contains (s \\<star> Cons a rs) r", "have 3:\"s \\<star> (rs#r') = \\<bottom>\\<star>(rs'#r')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<star> Cons r' rs = \\<bottom> \\<star> Cons r' rs'", "using 1"], ["proof (prove)\nusing this:\n  s \\<star> rs = \\<bottom> \\<star> rs'\n\ngoal (1 subgoal):\n 1. s \\<star> Cons r' rs = \\<bottom> \\<star> Cons r' rs'", "by fastforce"], ["proof (state)\nthis:\n  s \\<star> Cons r' rs = \\<bottom> \\<star> Cons r' rs'\n\ngoal (1 subgoal):\n 1. \\<And>a rs.\n       contains (s \\<star> rs) r \\<Longrightarrow>\n       contains (s \\<star> Cons a rs) r", "show \"contains (s \\<star> (rs#r')) r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. contains (s \\<star> Cons r' rs) r", "using 2 3"], ["proof (prove)\nusing this:\n  r \\<in> set rs'\n  s \\<star> Cons r' rs = \\<bottom> \\<star> Cons r' rs'\n\ngoal (1 subgoal):\n 1. contains (s \\<star> Cons r' rs) r", "by (auto simp add:contains_def) (metis exec_cons rev_subsetD set_subset_Cons)"], ["proof (state)\nthis:\n  contains (s \\<star> Cons r' rs) r\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma preceq_star: \"s \\<star> (rs#r) \\<preceq> s' \\<Longrightarrow> s \\<star> rs \\<preceq> s'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<star> Cons r rs \\<preceq> s' \\<Longrightarrow>\n    s \\<star> rs \\<preceq> s'", "by (metis pre_RDR.exec.simps(1) pre_RDR.exec.simps(2) pre_RDR.less_eq_def trans)"], ["", "end"], ["", "subsection \\<open>The RDR locale\\<close>"], ["", "locale RDR = pre_RDR +\n  assumes idem1:\"contains s r \\<Longrightarrow> s \\<bullet> r = s\"\n  and idem2:\"\\<And> s r r' . fst r \\<noteq> fst r' \\<Longrightarrow> \\<gamma> s r = \\<gamma> ((s \\<bullet> r) \\<bullet> r') r\"\n  and antisym:\"\\<And> s1 s2 . s1 \\<preceq> s2 \\<and> s2 \\<preceq> s1 \\<Longrightarrow> s1 = s2\"\n  and glb_exists:\"\\<And> s1 s2 . \\<exists> s . is_glb s s1 s2\"\n  and consistency:\"\\<And>s1 s2 s3 rs . s1 \\<preceq> s2 \\<Longrightarrow> s2 \\<preceq> s3 \\<Longrightarrow> s3 = s1 \\<star> rs \n    \\<Longrightarrow> \\<exists> rs' rs'' . s2 = s1 \\<star> rs' \\<and> s3 = s2 \\<star> rs'' \n      \\<and> set rs' \\<subseteq> set rs \\<and> set rs'' \\<subseteq> set rs\"\n  and bot:\"\\<And> s . \\<bottom> \\<preceq> s\"\nbegin"], ["", "lemma inf_glb:\"is_glb (s1 \\<sqinter> s2) s1 s2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_glb (s1 \\<sqinter> s2) s1 s2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. is_glb (s1 \\<sqinter> s2) s1 s2", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. is_glb (s1 \\<sqinter> s2) s1 s2", "fix s s'"], ["proof (state)\ngoal (1 subgoal):\n 1. is_glb (s1 \\<sqinter> s2) s1 s2", "assume \"is_glb s s1 s2\" and \"is_glb s' s1 s2\""], ["proof (state)\nthis:\n  is_glb s s1 s2\n  is_glb s' s1 s2\n\ngoal (1 subgoal):\n 1. is_glb (s1 \\<sqinter> s2) s1 s2", "hence \"s = s'\""], ["proof (prove)\nusing this:\n  is_glb s s1 s2\n  is_glb s' s1 s2\n\ngoal (1 subgoal):\n 1. s = s'", "using antisym"], ["proof (prove)\nusing this:\n  is_glb s s1 s2\n  is_glb s' s1 s2\n  ?s1.0 \\<preceq> ?s2.0 \\<and> ?s2.0 \\<preceq> ?s1.0 \\<Longrightarrow>\n  ?s1.0 = ?s2.0\n\ngoal (1 subgoal):\n 1. s = s'", "by (auto simp add:is_glb_def is_lb_def)"], ["proof (state)\nthis:\n  s = s'\n\ngoal (1 subgoal):\n 1. is_glb (s1 \\<sqinter> s2) s1 s2", "}"], ["proof (state)\nthis:\n  \\<lbrakk>is_glb ?s2 s1 s2; is_glb ?s'2 s1 s2\\<rbrakk>\n  \\<Longrightarrow> ?s2 = ?s'2\n\ngoal (1 subgoal):\n 1. is_glb (s1 \\<sqinter> s2) s1 s2", "from this and glb_exists"], ["proof (chain)\npicking this:\n  \\<lbrakk>is_glb ?s2 s1 s2; is_glb ?s'2 s1 s2\\<rbrakk>\n  \\<Longrightarrow> ?s2 = ?s'2\n  \\<exists>s. is_glb s ?s1.0 ?s2.0", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>is_glb ?s2 s1 s2; is_glb ?s'2 s1 s2\\<rbrakk>\n  \\<Longrightarrow> ?s2 = ?s'2\n  \\<exists>s. is_glb s ?s1.0 ?s2.0\n\ngoal (1 subgoal):\n 1. is_glb (s1 \\<sqinter> s2) s1 s2", "by (auto simp add:inf_def, metis (lifting) theI')"], ["proof (state)\nthis:\n  is_glb (s1 \\<sqinter> s2) s1 s2\n\ngoal:\nNo subgoals!", "qed"], ["", "sublocale ordering less_eq less"], ["proof (prove)\ngoal (1 subgoal):\n 1. ordering (\\<preceq>) (\\<prec>)", "proof"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>a b. (a \\<prec> b) = (a \\<preceq> b \\<and> a \\<noteq> b)\n 2. \\<And>a. a \\<preceq> a\n 3. \\<And>a b.\n       \\<lbrakk>a \\<preceq> b; b \\<preceq> a\\<rbrakk>\n       \\<Longrightarrow> a = b\n 4. \\<And>a b c.\n       \\<lbrakk>a \\<preceq> b; b \\<preceq> c\\<rbrakk>\n       \\<Longrightarrow> a \\<preceq> c", "fix s"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>a b. (a \\<prec> b) = (a \\<preceq> b \\<and> a \\<noteq> b)\n 2. \\<And>a. a \\<preceq> a\n 3. \\<And>a b.\n       \\<lbrakk>a \\<preceq> b; b \\<preceq> a\\<rbrakk>\n       \\<Longrightarrow> a = b\n 4. \\<And>a b c.\n       \\<lbrakk>a \\<preceq> b; b \\<preceq> c\\<rbrakk>\n       \\<Longrightarrow> a \\<preceq> c", "show \"s \\<preceq> s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<preceq> s", "by (metis exec.simps(1) less_eq_def)"], ["proof (state)\nthis:\n  s \\<preceq> s\n\ngoal (3 subgoals):\n 1. \\<And>a b. (a \\<prec> b) = (a \\<preceq> b \\<and> a \\<noteq> b)\n 2. \\<And>a b.\n       \\<lbrakk>a \\<preceq> b; b \\<preceq> a\\<rbrakk>\n       \\<Longrightarrow> a = b\n 3. \\<And>a b c.\n       \\<lbrakk>a \\<preceq> b; b \\<preceq> c\\<rbrakk>\n       \\<Longrightarrow> a \\<preceq> c", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>a b. (a \\<prec> b) = (a \\<preceq> b \\<and> a \\<noteq> b)\n 2. \\<And>a b.\n       \\<lbrakk>a \\<preceq> b; b \\<preceq> a\\<rbrakk>\n       \\<Longrightarrow> a = b\n 3. \\<And>a b c.\n       \\<lbrakk>a \\<preceq> b; b \\<preceq> c\\<rbrakk>\n       \\<Longrightarrow> a \\<preceq> c", "fix s s'"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>a b. (a \\<prec> b) = (a \\<preceq> b \\<and> a \\<noteq> b)\n 2. \\<And>a b.\n       \\<lbrakk>a \\<preceq> b; b \\<preceq> a\\<rbrakk>\n       \\<Longrightarrow> a = b\n 3. \\<And>a b c.\n       \\<lbrakk>a \\<preceq> b; b \\<preceq> c\\<rbrakk>\n       \\<Longrightarrow> a \\<preceq> c", "show \"s \\<prec> s' = (s \\<preceq> s' \\<and> s \\<noteq> s')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (s \\<prec> s') = (s \\<preceq> s' \\<and> s \\<noteq> s')", "by (auto simp add:less_def)"], ["proof (state)\nthis:\n  (s \\<prec> s') = (s \\<preceq> s' \\<and> s \\<noteq> s')\n\ngoal (2 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<preceq> b; b \\<preceq> a\\<rbrakk>\n       \\<Longrightarrow> a = b\n 2. \\<And>a b c.\n       \\<lbrakk>a \\<preceq> b; b \\<preceq> c\\<rbrakk>\n       \\<Longrightarrow> a \\<preceq> c", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<preceq> b; b \\<preceq> a\\<rbrakk>\n       \\<Longrightarrow> a = b\n 2. \\<And>a b c.\n       \\<lbrakk>a \\<preceq> b; b \\<preceq> c\\<rbrakk>\n       \\<Longrightarrow> a \\<preceq> c", "fix s s'"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<preceq> b; b \\<preceq> a\\<rbrakk>\n       \\<Longrightarrow> a = b\n 2. \\<And>a b c.\n       \\<lbrakk>a \\<preceq> b; b \\<preceq> c\\<rbrakk>\n       \\<Longrightarrow> a \\<preceq> c", "assume \"s \\<preceq> s'\" and \"s' \\<preceq> s\""], ["proof (state)\nthis:\n  s \\<preceq> s'\n  s' \\<preceq> s\n\ngoal (2 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<preceq> b; b \\<preceq> a\\<rbrakk>\n       \\<Longrightarrow> a = b\n 2. \\<And>a b c.\n       \\<lbrakk>a \\<preceq> b; b \\<preceq> c\\<rbrakk>\n       \\<Longrightarrow> a \\<preceq> c", "thus \"s = s'\""], ["proof (prove)\nusing this:\n  s \\<preceq> s'\n  s' \\<preceq> s\n\ngoal (1 subgoal):\n 1. s = s'", "using antisym"], ["proof (prove)\nusing this:\n  s \\<preceq> s'\n  s' \\<preceq> s\n  ?s1.0 \\<preceq> ?s2.0 \\<and> ?s2.0 \\<preceq> ?s1.0 \\<Longrightarrow>\n  ?s1.0 = ?s2.0\n\ngoal (1 subgoal):\n 1. s = s'", "by auto"], ["proof (state)\nthis:\n  s = s'\n\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>a \\<preceq> b; b \\<preceq> c\\<rbrakk>\n       \\<Longrightarrow> a \\<preceq> c", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>a \\<preceq> b; b \\<preceq> c\\<rbrakk>\n       \\<Longrightarrow> a \\<preceq> c", "fix s1 s2 s3"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>a \\<preceq> b; b \\<preceq> c\\<rbrakk>\n       \\<Longrightarrow> a \\<preceq> c", "assume \"s1 \\<preceq> s2\" and \"s2 \\<preceq> s3\""], ["proof (state)\nthis:\n  s1 \\<preceq> s2\n  s2 \\<preceq> s3\n\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>a \\<preceq> b; b \\<preceq> c\\<rbrakk>\n       \\<Longrightarrow> a \\<preceq> c", "thus \"s1 \\<preceq> s3\""], ["proof (prove)\nusing this:\n  s1 \\<preceq> s2\n  s2 \\<preceq> s3\n\ngoal (1 subgoal):\n 1. s1 \\<preceq> s3", "using trans"], ["proof (prove)\nusing this:\n  s1 \\<preceq> s2\n  s2 \\<preceq> s3\n  \\<lbrakk>?s1.0 \\<preceq> ?s2.0; ?s2.0 \\<preceq> ?s3.0\\<rbrakk>\n  \\<Longrightarrow> ?s1.0 \\<preceq> ?s3.0\n\ngoal (1 subgoal):\n 1. s1 \\<preceq> s3", "by blast"], ["proof (state)\nthis:\n  s1 \\<preceq> s3\n\ngoal:\nNo subgoals!", "qed"], ["", "sublocale semilattice_set inf"], ["proof (prove)\ngoal (1 subgoal):\n 1. semilattice_set (\\<sqinter>)", "proof"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>a b c.\n       (a \\<sqinter> b) \\<sqinter> c = a \\<sqinter> (b \\<sqinter> c)\n 2. \\<And>a b. a \\<sqinter> b = b \\<sqinter> a\n 3. \\<And>a. a \\<sqinter> a = a", "fix s"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>a b c.\n       (a \\<sqinter> b) \\<sqinter> c = a \\<sqinter> (b \\<sqinter> c)\n 2. \\<And>a b. a \\<sqinter> b = b \\<sqinter> a\n 3. \\<And>a. a \\<sqinter> a = a", "show \"s \\<sqinter> s = s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<sqinter> s = s", "using inf_glb"], ["proof (prove)\nusing this:\n  is_glb (?s1.0 \\<sqinter> ?s2.0) ?s1.0 ?s2.0\n\ngoal (1 subgoal):\n 1. s \\<sqinter> s = s", "by (metis antisym is_glb_def is_lb_def refl)"], ["proof (state)\nthis:\n  s \\<sqinter> s = s\n\ngoal (2 subgoals):\n 1. \\<And>a b c.\n       (a \\<sqinter> b) \\<sqinter> c = a \\<sqinter> (b \\<sqinter> c)\n 2. \\<And>a b. a \\<sqinter> b = b \\<sqinter> a", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b c.\n       (a \\<sqinter> b) \\<sqinter> c = a \\<sqinter> (b \\<sqinter> c)\n 2. \\<And>a b. a \\<sqinter> b = b \\<sqinter> a", "fix s1 s2"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b c.\n       (a \\<sqinter> b) \\<sqinter> c = a \\<sqinter> (b \\<sqinter> c)\n 2. \\<And>a b. a \\<sqinter> b = b \\<sqinter> a", "show \"s1 \\<sqinter> s2 = (s2 \\<sqinter> s1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s1 \\<sqinter> s2 = s2 \\<sqinter> s1", "using inf_glb"], ["proof (prove)\nusing this:\n  is_glb (?s1.0 \\<sqinter> ?s2.0) ?s1.0 ?s2.0\n\ngoal (1 subgoal):\n 1. s1 \\<sqinter> s2 = s2 \\<sqinter> s1", "by (smt antisym is_glb_def pre_RDR.is_lb_def)"], ["proof (state)\nthis:\n  s1 \\<sqinter> s2 = s2 \\<sqinter> s1\n\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       (a \\<sqinter> b) \\<sqinter> c = a \\<sqinter> (b \\<sqinter> c)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       (a \\<sqinter> b) \\<sqinter> c = a \\<sqinter> (b \\<sqinter> c)", "fix s1 s2 s3"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       (a \\<sqinter> b) \\<sqinter> c = a \\<sqinter> (b \\<sqinter> c)", "show \"(s1 \\<sqinter> s2) \\<sqinter> s3 = (s1 \\<sqinter> (s2 \\<sqinter> s3))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (s1 \\<sqinter> s2) \\<sqinter> s3 = s1 \\<sqinter> (s2 \\<sqinter> s3)", "using inf_glb"], ["proof (prove)\nusing this:\n  is_glb (?s1.0 \\<sqinter> ?s2.0) ?s1.0 ?s2.0\n\ngoal (1 subgoal):\n 1. (s1 \\<sqinter> s2) \\<sqinter> s3 = s1 \\<sqinter> (s2 \\<sqinter> s3)", "by(auto simp add:is_glb_def is_lb_def, smt antisym trans)"], ["proof (state)\nthis:\n  (s1 \\<sqinter> s2) \\<sqinter> s3 = s1 \\<sqinter> (s2 \\<sqinter> s3)\n\ngoal:\nNo subgoals!", "qed"], ["", "sublocale semilattice_order_set inf less_eq less"], ["proof (prove)\ngoal (1 subgoal):\n 1. semilattice_order_set (\\<sqinter>) (\\<preceq>) (\\<prec>)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b. (a \\<preceq> b) = (a = a \\<sqinter> b)\n 2. \\<And>a b. (a \\<prec> b) = (a = a \\<sqinter> b \\<and> a \\<noteq> b)", "fix s s'"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b. (a \\<preceq> b) = (a = a \\<sqinter> b)\n 2. \\<And>a b. (a \\<prec> b) = (a = a \\<sqinter> b \\<and> a \\<noteq> b)", "show \"s \\<preceq> s' = (s = s \\<sqinter> s')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (s \\<preceq> s') = (s = s \\<sqinter> s')", "by (metis antisym idem inf_glb pre_RDR.is_glb_def pre_RDR.is_lb_def)"], ["proof (state)\nthis:\n  (s \\<preceq> s') = (s = s \\<sqinter> s')\n\ngoal (1 subgoal):\n 1. \\<And>a b. (a \\<prec> b) = (a = a \\<sqinter> b \\<and> a \\<noteq> b)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b. (a \\<prec> b) = (a = a \\<sqinter> b \\<and> a \\<noteq> b)", "fix s s'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b. (a \\<prec> b) = (a = a \\<sqinter> b \\<and> a \\<noteq> b)", "show \"s \\<prec> s' = (s = s \\<sqinter> s' \\<and> s \\<noteq> s')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (s \\<prec> s') = (s = s \\<sqinter> s' \\<and> s \\<noteq> s')", "by (metis inf_glb local.antisym local.refl pre_RDR.is_glb_def pre_RDR.is_lb_def pre_RDR.less_def)"], ["proof (state)\nthis:\n  (s \\<prec> s') = (s = s \\<sqinter> s' \\<and> s \\<noteq> s')\n\ngoal:\nNo subgoals!", "qed"], ["", "notation F (\"\\<Sqinter> _\" [99])"], ["", "subsection \\<open>Some useful lemmas\\<close>"], ["", "lemma idem_star: \nfixes r s rs\nassumes \"contains s r\"\nshows \"s \\<star> rs = s \\<star> (filter (\\<lambda> x . x \\<noteq> r) rs)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<star> rs = s \\<star> filter (\\<lambda>x. x \\<noteq> r) rs", "proof (induct rs)"], ["proof (state)\ngoal (2 subgoals):\n 1. s \\<star> [] = s \\<star> filter (\\<lambda>x. x \\<noteq> r) []\n 2. \\<And>a rs.\n       s \\<star> rs =\n       s \\<star> filter (\\<lambda>x. x \\<noteq> r) rs \\<Longrightarrow>\n       s \\<star> Cons a rs =\n       s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons a rs)", "case Nil"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. s \\<star> [] = s \\<star> filter (\\<lambda>x. x \\<noteq> r) []\n 2. \\<And>a rs.\n       s \\<star> rs =\n       s \\<star> filter (\\<lambda>x. x \\<noteq> r) rs \\<Longrightarrow>\n       s \\<star> Cons a rs =\n       s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons a rs)", "show \"s \\<star> [] = s \\<star> (filter (\\<lambda> x . x \\<noteq> r) [])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<star> [] = s \\<star> filter (\\<lambda>x. x \\<noteq> r) []", "using assms"], ["proof (prove)\nusing this:\n  contains s r\n\ngoal (1 subgoal):\n 1. s \\<star> [] = s \\<star> filter (\\<lambda>x. x \\<noteq> r) []", "by auto"], ["proof (state)\nthis:\n  s \\<star> [] = s \\<star> filter (\\<lambda>x. x \\<noteq> r) []\n\ngoal (1 subgoal):\n 1. \\<And>a rs.\n       s \\<star> rs =\n       s \\<star> filter (\\<lambda>x. x \\<noteq> r) rs \\<Longrightarrow>\n       s \\<star> Cons a rs =\n       s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons a rs)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a rs.\n       s \\<star> rs =\n       s \\<star> filter (\\<lambda>x. x \\<noteq> r) rs \\<Longrightarrow>\n       s \\<star> Cons a rs =\n       s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons a rs)", "case (Cons r' rs)"], ["proof (state)\nthis:\n  s \\<star> rs = s \\<star> filter (\\<lambda>x. x \\<noteq> r) rs\n\ngoal (1 subgoal):\n 1. \\<And>a rs.\n       s \\<star> rs =\n       s \\<star> filter (\\<lambda>x. x \\<noteq> r) rs \\<Longrightarrow>\n       s \\<star> Cons a rs =\n       s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons a rs)", "have 1:\"contains (s \\<star> rs) r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. contains (s \\<star> rs) r", "using assms and contains_star"], ["proof (prove)\nusing this:\n  contains s r\n  contains ?s ?r \\<Longrightarrow> contains (?s \\<star> ?rs) ?r\n\ngoal (1 subgoal):\n 1. contains (s \\<star> rs) r", "by auto"], ["proof (state)\nthis:\n  contains (s \\<star> rs) r\n\ngoal (1 subgoal):\n 1. \\<And>a rs.\n       s \\<star> rs =\n       s \\<star> filter (\\<lambda>x. x \\<noteq> r) rs \\<Longrightarrow>\n       s \\<star> Cons a rs =\n       s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons a rs)", "show \"s \\<star> (rs#r') = s \\<star> (filter (\\<lambda> x . x \\<noteq> r) (rs#r'))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<star> Cons r' rs =\n    s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons r' rs)", "proof (cases \"r' = r\")"], ["proof (state)\ngoal (2 subgoals):\n 1. r' = r \\<Longrightarrow>\n    s \\<star> Cons r' rs =\n    s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons r' rs)\n 2. r' \\<noteq> r \\<Longrightarrow>\n    s \\<star> Cons r' rs =\n    s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons r' rs)", "case True"], ["proof (state)\nthis:\n  r' = r\n\ngoal (2 subgoals):\n 1. r' = r \\<Longrightarrow>\n    s \\<star> Cons r' rs =\n    s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons r' rs)\n 2. r' \\<noteq> r \\<Longrightarrow>\n    s \\<star> Cons r' rs =\n    s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons r' rs)", "hence \"s \\<star> (rs#r') = s \\<star> rs\""], ["proof (prove)\nusing this:\n  r' = r\n\ngoal (1 subgoal):\n 1. s \\<star> Cons r' rs = s \\<star> rs", "using idem1 1"], ["proof (prove)\nusing this:\n  r' = r\n  contains ?s ?r \\<Longrightarrow> ?s \\<bullet> ?r = ?s\n  contains (s \\<star> rs) r\n\ngoal (1 subgoal):\n 1. s \\<star> Cons r' rs = s \\<star> rs", "by auto"], ["proof (state)\nthis:\n  s \\<star> Cons r' rs = s \\<star> rs\n\ngoal (2 subgoals):\n 1. r' = r \\<Longrightarrow>\n    s \\<star> Cons r' rs =\n    s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons r' rs)\n 2. r' \\<noteq> r \\<Longrightarrow>\n    s \\<star> Cons r' rs =\n    s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons r' rs)", "thus ?thesis"], ["proof (prove)\nusing this:\n  s \\<star> Cons r' rs = s \\<star> rs\n\ngoal (1 subgoal):\n 1. s \\<star> Cons r' rs =\n    s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons r' rs)", "using Cons"], ["proof (prove)\nusing this:\n  s \\<star> Cons r' rs = s \\<star> rs\n  s \\<star> rs = s \\<star> filter (\\<lambda>x. x \\<noteq> r) rs\n\ngoal (1 subgoal):\n 1. s \\<star> Cons r' rs =\n    s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons r' rs)", "by simp"], ["proof (state)\nthis:\n  s \\<star> Cons r' rs =\n  s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons r' rs)\n\ngoal (1 subgoal):\n 1. r' \\<noteq> r \\<Longrightarrow>\n    s \\<star> Cons r' rs =\n    s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons r' rs)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. r' \\<noteq> r \\<Longrightarrow>\n    s \\<star> Cons r' rs =\n    s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons r' rs)", "case False"], ["proof (state)\nthis:\n  r' \\<noteq> r\n\ngoal (1 subgoal):\n 1. r' \\<noteq> r \\<Longrightarrow>\n    s \\<star> Cons r' rs =\n    s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons r' rs)", "thus ?thesis"], ["proof (prove)\nusing this:\n  r' \\<noteq> r\n\ngoal (1 subgoal):\n 1. s \\<star> Cons r' rs =\n    s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons r' rs)", "using Cons"], ["proof (prove)\nusing this:\n  r' \\<noteq> r\n  s \\<star> rs = s \\<star> filter (\\<lambda>x. x \\<noteq> r) rs\n\ngoal (1 subgoal):\n 1. s \\<star> Cons r' rs =\n    s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons r' rs)", "by auto"], ["proof (state)\nthis:\n  s \\<star> Cons r' rs =\n  s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons r' rs)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  s \\<star> Cons r' rs =\n  s \\<star> filter (\\<lambda>x. x \\<noteq> r) (Cons r' rs)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma idem_star2: \n  fixes s rs' \n  shows \"\\<exists> rs' . s \\<star> rs = s \\<star> rs' \\<and> set rs' \\<subseteq> set rs \n    \\<and> (\\<forall> r \\<in> set rs' . \\<not> contains s r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>rs'.\n       s \\<star> rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set rs \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "proof (induct rs)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<exists>rs'.\n       s \\<star> [] = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set [] \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)\n 2. \\<And>a rs.\n       \\<exists>rs'.\n          s \\<star> rs = s \\<star> rs' \\<and>\n          set rs' \\<subseteq> set rs \\<and>\n          (\\<forall>r\\<in>set rs'. \\<not> contains s r) \\<Longrightarrow>\n       \\<exists>rs'.\n          s \\<star> Cons a rs = s \\<star> rs' \\<and>\n          set rs' \\<subseteq> set (Cons a rs) \\<and>\n          (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "case Nil"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. \\<exists>rs'.\n       s \\<star> [] = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set [] \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)\n 2. \\<And>a rs.\n       \\<exists>rs'.\n          s \\<star> rs = s \\<star> rs' \\<and>\n          set rs' \\<subseteq> set rs \\<and>\n          (\\<forall>r\\<in>set rs'. \\<not> contains s r) \\<Longrightarrow>\n       \\<exists>rs'.\n          s \\<star> Cons a rs = s \\<star> rs' \\<and>\n          set rs' \\<subseteq> set (Cons a rs) \\<and>\n          (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "thus \"\\<exists> rs' . s \\<star> [] = s \\<star> rs' \\<and> set rs' \\<subseteq> set [] \n    \\<and> (\\<forall> r \\<in> set rs' . \\<not> contains s r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>rs'.\n       s \\<star> [] = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set [] \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "by force"], ["proof (state)\nthis:\n  \\<exists>rs'.\n     s \\<star> [] = s \\<star> rs' \\<and>\n     set rs' \\<subseteq> set [] \\<and>\n     (\\<forall>r\\<in>set rs'. \\<not> contains s r)\n\ngoal (1 subgoal):\n 1. \\<And>a rs.\n       \\<exists>rs'.\n          s \\<star> rs = s \\<star> rs' \\<and>\n          set rs' \\<subseteq> set rs \\<and>\n          (\\<forall>r\\<in>set rs'. \\<not> contains s r) \\<Longrightarrow>\n       \\<exists>rs'.\n          s \\<star> Cons a rs = s \\<star> rs' \\<and>\n          set rs' \\<subseteq> set (Cons a rs) \\<and>\n          (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a rs.\n       \\<exists>rs'.\n          s \\<star> rs = s \\<star> rs' \\<and>\n          set rs' \\<subseteq> set rs \\<and>\n          (\\<forall>r\\<in>set rs'. \\<not> contains s r) \\<Longrightarrow>\n       \\<exists>rs'.\n          s \\<star> Cons a rs = s \\<star> rs' \\<and>\n          set rs' \\<subseteq> set (Cons a rs) \\<and>\n          (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "case (Cons r rs)"], ["proof (state)\nthis:\n  \\<exists>rs'.\n     s \\<star> rs = s \\<star> rs' \\<and>\n     set rs' \\<subseteq> set rs \\<and>\n     (\\<forall>r\\<in>set rs'. \\<not> contains s r)\n\ngoal (1 subgoal):\n 1. \\<And>a rs.\n       \\<exists>rs'.\n          s \\<star> rs = s \\<star> rs' \\<and>\n          set rs' \\<subseteq> set rs \\<and>\n          (\\<forall>r\\<in>set rs'. \\<not> contains s r) \\<Longrightarrow>\n       \\<exists>rs'.\n          s \\<star> Cons a rs = s \\<star> rs' \\<and>\n          set rs' \\<subseteq> set (Cons a rs) \\<and>\n          (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "obtain rs' where 1:\"s \\<star> rs = s \\<star> rs'\" and 2:\"set rs' \\<subseteq> set rs\"\n  and 3:\"\\<forall> r \\<in> set rs' . \\<not> contains s r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>rs'.\n        \\<lbrakk>s \\<star> rs = s \\<star> rs'; set rs' \\<subseteq> set rs;\n         \\<forall>r\\<in>set rs'. \\<not> contains s r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using Cons(1)"], ["proof (prove)\nusing this:\n  \\<exists>rs'.\n     s \\<star> rs = s \\<star> rs' \\<and>\n     set rs' \\<subseteq> set rs \\<and>\n     (\\<forall>r\\<in>set rs'. \\<not> contains s r)\n\ngoal (1 subgoal):\n 1. (\\<And>rs'.\n        \\<lbrakk>s \\<star> rs = s \\<star> rs'; set rs' \\<subseteq> set rs;\n         \\<forall>r\\<in>set rs'. \\<not> contains s r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  s \\<star> rs = s \\<star> rs'\n  set rs' \\<subseteq> set rs\n  \\<forall>r\\<in>set rs'. \\<not> contains s r\n\ngoal (1 subgoal):\n 1. \\<And>a rs.\n       \\<exists>rs'.\n          s \\<star> rs = s \\<star> rs' \\<and>\n          set rs' \\<subseteq> set rs \\<and>\n          (\\<forall>r\\<in>set rs'. \\<not> contains s r) \\<Longrightarrow>\n       \\<exists>rs'.\n          s \\<star> Cons a rs = s \\<star> rs' \\<and>\n          set rs' \\<subseteq> set (Cons a rs) \\<and>\n          (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "show \"\\<exists> rs' . s \\<star> (rs#r) = s \\<star> rs' \\<and> set rs' \\<subseteq> set (rs#r)\n    \\<and> (\\<forall> r \\<in> set rs' . \\<not> contains s r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "proof (cases \"contains s r\")"], ["proof (state)\ngoal (2 subgoals):\n 1. contains s r \\<Longrightarrow>\n    \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)\n 2. \\<not> contains s r \\<Longrightarrow>\n    \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "case True"], ["proof (state)\nthis:\n  contains s r\n\ngoal (2 subgoals):\n 1. contains s r \\<Longrightarrow>\n    \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)\n 2. \\<not> contains s r \\<Longrightarrow>\n    \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "have \"s\\<star>(rs#r) = s\\<star>rs'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<star> Cons r rs = s \\<star> rs'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. s \\<star> Cons r rs = s \\<star> rs'", "have \"s \\<star> (rs#r) = s\\<star>rs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<star> Cons r rs = s \\<star> rs", "using True"], ["proof (prove)\nusing this:\n  contains s r\n\ngoal (1 subgoal):\n 1. s \\<star> Cons r rs = s \\<star> rs", "by (metis contains_star exec_cons idem1)"], ["proof (state)\nthis:\n  s \\<star> Cons r rs = s \\<star> rs\n\ngoal (1 subgoal):\n 1. s \\<star> Cons r rs = s \\<star> rs'", "moreover"], ["proof (state)\nthis:\n  s \\<star> Cons r rs = s \\<star> rs\n\ngoal (1 subgoal):\n 1. s \\<star> Cons r rs = s \\<star> rs'", "have \"s \\<star> (rs'#r) = s\\<star>rs'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<star> Cons r rs' = s \\<star> rs'", "using True"], ["proof (prove)\nusing this:\n  contains s r\n\ngoal (1 subgoal):\n 1. s \\<star> Cons r rs' = s \\<star> rs'", "by (metis contains_star exec_cons idem1)"], ["proof (state)\nthis:\n  s \\<star> Cons r rs' = s \\<star> rs'\n\ngoal (1 subgoal):\n 1. s \\<star> Cons r rs = s \\<star> rs'", "ultimately"], ["proof (chain)\npicking this:\n  s \\<star> Cons r rs = s \\<star> rs\n  s \\<star> Cons r rs' = s \\<star> rs'", "show ?thesis"], ["proof (prove)\nusing this:\n  s \\<star> Cons r rs = s \\<star> rs\n  s \\<star> Cons r rs' = s \\<star> rs'\n\ngoal (1 subgoal):\n 1. s \\<star> Cons r rs = s \\<star> rs'", "using 1"], ["proof (prove)\nusing this:\n  s \\<star> Cons r rs = s \\<star> rs\n  s \\<star> Cons r rs' = s \\<star> rs'\n  s \\<star> rs = s \\<star> rs'\n\ngoal (1 subgoal):\n 1. s \\<star> Cons r rs = s \\<star> rs'", "by simp"], ["proof (state)\nthis:\n  s \\<star> Cons r rs = s \\<star> rs'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  s \\<star> Cons r rs = s \\<star> rs'\n\ngoal (2 subgoals):\n 1. contains s r \\<Longrightarrow>\n    \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)\n 2. \\<not> contains s r \\<Longrightarrow>\n    \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "moreover"], ["proof (state)\nthis:\n  s \\<star> Cons r rs = s \\<star> rs'\n\ngoal (2 subgoals):\n 1. contains s r \\<Longrightarrow>\n    \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)\n 2. \\<not> contains s r \\<Longrightarrow>\n    \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "have \"set rs' \\<subseteq> set (rs#r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set rs' \\<subseteq> set (Cons r rs)", "using 2"], ["proof (prove)\nusing this:\n  set rs' \\<subseteq> set rs\n\ngoal (1 subgoal):\n 1. set rs' \\<subseteq> set (Cons r rs)", "by (simp, metis subset_insertI2)"], ["proof (state)\nthis:\n  set rs' \\<subseteq> set (Cons r rs)\n\ngoal (2 subgoals):\n 1. contains s r \\<Longrightarrow>\n    \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)\n 2. \\<not> contains s r \\<Longrightarrow>\n    \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "moreover"], ["proof (state)\nthis:\n  set rs' \\<subseteq> set (Cons r rs)\n\ngoal (2 subgoals):\n 1. contains s r \\<Longrightarrow>\n    \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)\n 2. \\<not> contains s r \\<Longrightarrow>\n    \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "have \"\\<forall> r \\<in> set rs' . \\<not> contains s r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>r\\<in>set rs'. \\<not> contains s r", "using 3"], ["proof (prove)\nusing this:\n  \\<forall>r\\<in>set rs'. \\<not> contains s r\n\ngoal (1 subgoal):\n 1. \\<forall>r\\<in>set rs'. \\<not> contains s r", "by assumption"], ["proof (state)\nthis:\n  \\<forall>r\\<in>set rs'. \\<not> contains s r\n\ngoal (2 subgoals):\n 1. contains s r \\<Longrightarrow>\n    \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)\n 2. \\<not> contains s r \\<Longrightarrow>\n    \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "ultimately"], ["proof (chain)\npicking this:\n  s \\<star> Cons r rs = s \\<star> rs'\n  set rs' \\<subseteq> set (Cons r rs)\n  \\<forall>r\\<in>set rs'. \\<not> contains s r", "show ?thesis"], ["proof (prove)\nusing this:\n  s \\<star> Cons r rs = s \\<star> rs'\n  set rs' \\<subseteq> set (Cons r rs)\n  \\<forall>r\\<in>set rs'. \\<not> contains s r\n\ngoal (1 subgoal):\n 1. \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "by blast"], ["proof (state)\nthis:\n  \\<exists>rs'.\n     s \\<star> Cons r rs = s \\<star> rs' \\<and>\n     set rs' \\<subseteq> set (Cons r rs) \\<and>\n     (\\<forall>r\\<in>set rs'. \\<not> contains s r)\n\ngoal (1 subgoal):\n 1. \\<not> contains s r \\<Longrightarrow>\n    \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> contains s r \\<Longrightarrow>\n    \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "case False"], ["proof (state)\nthis:\n  \\<not> contains s r\n\ngoal (1 subgoal):\n 1. \\<not> contains s r \\<Longrightarrow>\n    \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "have \"s\\<star>(rs#r) = s\\<star>(rs'#r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<star> Cons r rs = s \\<star> Cons r rs'", "using 1"], ["proof (prove)\nusing this:\n  s \\<star> rs = s \\<star> rs'\n\ngoal (1 subgoal):\n 1. s \\<star> Cons r rs = s \\<star> Cons r rs'", "by simp"], ["proof (state)\nthis:\n  s \\<star> Cons r rs = s \\<star> Cons r rs'\n\ngoal (1 subgoal):\n 1. \\<not> contains s r \\<Longrightarrow>\n    \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "moreover"], ["proof (state)\nthis:\n  s \\<star> Cons r rs = s \\<star> Cons r rs'\n\ngoal (1 subgoal):\n 1. \\<not> contains s r \\<Longrightarrow>\n    \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "have \"set (rs'#r) \\<subseteq> set (rs#r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set (Cons r rs') \\<subseteq> set (Cons r rs)", "using 2"], ["proof (prove)\nusing this:\n  set rs' \\<subseteq> set rs\n\ngoal (1 subgoal):\n 1. set (Cons r rs') \\<subseteq> set (Cons r rs)", "by auto"], ["proof (state)\nthis:\n  set (Cons r rs') \\<subseteq> set (Cons r rs)\n\ngoal (1 subgoal):\n 1. \\<not> contains s r \\<Longrightarrow>\n    \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "moreover"], ["proof (state)\nthis:\n  set (Cons r rs') \\<subseteq> set (Cons r rs)\n\ngoal (1 subgoal):\n 1. \\<not> contains s r \\<Longrightarrow>\n    \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "have \"\\<forall> r \\<in> set (rs'#r) . \\<not> contains s r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>r\\<in>set (Cons r rs'). \\<not> contains s r", "using 3 False"], ["proof (prove)\nusing this:\n  \\<forall>r\\<in>set rs'. \\<not> contains s r\n  \\<not> contains s r\n\ngoal (1 subgoal):\n 1. \\<forall>r\\<in>set (Cons r rs'). \\<not> contains s r", "by auto"], ["proof (state)\nthis:\n  \\<forall>r\\<in>set (Cons r rs'). \\<not> contains s r\n\ngoal (1 subgoal):\n 1. \\<not> contains s r \\<Longrightarrow>\n    \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "ultimately"], ["proof (chain)\npicking this:\n  s \\<star> Cons r rs = s \\<star> Cons r rs'\n  set (Cons r rs') \\<subseteq> set (Cons r rs)\n  \\<forall>r\\<in>set (Cons r rs'). \\<not> contains s r", "show ?thesis"], ["proof (prove)\nusing this:\n  s \\<star> Cons r rs = s \\<star> Cons r rs'\n  set (Cons r rs') \\<subseteq> set (Cons r rs)\n  \\<forall>r\\<in>set (Cons r rs'). \\<not> contains s r\n\ngoal (1 subgoal):\n 1. \\<exists>rs'.\n       s \\<star> Cons r rs = s \\<star> rs' \\<and>\n       set rs' \\<subseteq> set (Cons r rs) \\<and>\n       (\\<forall>r\\<in>set rs'. \\<not> contains s r)", "by blast"], ["proof (state)\nthis:\n  \\<exists>rs'.\n     s \\<star> Cons r rs = s \\<star> rs' \\<and>\n     set rs' \\<subseteq> set (Cons r rs) \\<and>\n     (\\<forall>r\\<in>set rs'. \\<not> contains s r)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>rs'.\n     s \\<star> Cons r rs = s \\<star> rs' \\<and>\n     set rs' \\<subseteq> set (Cons r rs) \\<and>\n     (\\<forall>r\\<in>set rs'. \\<not> contains s r)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma idem2_star:\nassumes \"contains s r\" \nand \"\\<And> r' . r' \\<in> set rs \\<Longrightarrow> fst r' \\<noteq> fst r\"\nshows \"\\<gamma> s r = \\<gamma> (s \\<star> rs) r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<gamma> s r = \\<gamma> (s \\<star> rs) r", "using assms"], ["proof (prove)\nusing this:\n  contains s r\n  ?r' \\<in> set rs \\<Longrightarrow> fst ?r' \\<noteq> fst r\n\ngoal (1 subgoal):\n 1. \\<gamma> s r = \\<gamma> (s \\<star> rs) r", "proof (induct rs)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>contains s r;\n     \\<And>r'.\n        r' \\<in> set [] \\<Longrightarrow> fst r' \\<noteq> fst r\\<rbrakk>\n    \\<Longrightarrow> \\<gamma> s r = \\<gamma> (s \\<star> []) r\n 2. \\<And>a rs.\n       \\<lbrakk>\\<lbrakk>contains s r;\n                 \\<And>r'.\n                    r' \\<in> set rs \\<Longrightarrow>\n                    fst r' \\<noteq> fst r\\<rbrakk>\n                \\<Longrightarrow> \\<gamma> s r = \\<gamma> (s \\<star> rs) r;\n        contains s r;\n        \\<And>r'.\n           r' \\<in> set (Cons a rs) \\<Longrightarrow>\n           fst r' \\<noteq> fst r\\<rbrakk>\n       \\<Longrightarrow> \\<gamma> s r = \\<gamma> (s \\<star> Cons a rs) r", "case Nil"], ["proof (state)\nthis:\n  contains s r\n  ?r' \\<in> set [] \\<Longrightarrow> fst ?r' \\<noteq> fst r\n\ngoal (2 subgoals):\n 1. \\<lbrakk>contains s r;\n     \\<And>r'.\n        r' \\<in> set [] \\<Longrightarrow> fst r' \\<noteq> fst r\\<rbrakk>\n    \\<Longrightarrow> \\<gamma> s r = \\<gamma> (s \\<star> []) r\n 2. \\<And>a rs.\n       \\<lbrakk>\\<lbrakk>contains s r;\n                 \\<And>r'.\n                    r' \\<in> set rs \\<Longrightarrow>\n                    fst r' \\<noteq> fst r\\<rbrakk>\n                \\<Longrightarrow> \\<gamma> s r = \\<gamma> (s \\<star> rs) r;\n        contains s r;\n        \\<And>r'.\n           r' \\<in> set (Cons a rs) \\<Longrightarrow>\n           fst r' \\<noteq> fst r\\<rbrakk>\n       \\<Longrightarrow> \\<gamma> s r = \\<gamma> (s \\<star> Cons a rs) r", "show \"\\<gamma> s r = \\<gamma> (s \\<star> []) r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<gamma> s r = \\<gamma> (s \\<star> []) r", "by simp"], ["proof (state)\nthis:\n  \\<gamma> s r = \\<gamma> (s \\<star> []) r\n\ngoal (1 subgoal):\n 1. \\<And>a rs.\n       \\<lbrakk>\\<lbrakk>contains s r;\n                 \\<And>r'.\n                    r' \\<in> set rs \\<Longrightarrow>\n                    fst r' \\<noteq> fst r\\<rbrakk>\n                \\<Longrightarrow> \\<gamma> s r = \\<gamma> (s \\<star> rs) r;\n        contains s r;\n        \\<And>r'.\n           r' \\<in> set (Cons a rs) \\<Longrightarrow>\n           fst r' \\<noteq> fst r\\<rbrakk>\n       \\<Longrightarrow> \\<gamma> s r = \\<gamma> (s \\<star> Cons a rs) r", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a rs.\n       \\<lbrakk>\\<lbrakk>contains s r;\n                 \\<And>r'.\n                    r' \\<in> set rs \\<Longrightarrow>\n                    fst r' \\<noteq> fst r\\<rbrakk>\n                \\<Longrightarrow> \\<gamma> s r = \\<gamma> (s \\<star> rs) r;\n        contains s r;\n        \\<And>r'.\n           r' \\<in> set (Cons a rs) \\<Longrightarrow>\n           fst r' \\<noteq> fst r\\<rbrakk>\n       \\<Longrightarrow> \\<gamma> s r = \\<gamma> (s \\<star> Cons a rs) r", "case (Cons r' rs)"], ["proof (state)\nthis:\n  \\<lbrakk>contains s r;\n   \\<And>r'.\n      r' \\<in> set rs \\<Longrightarrow> fst r' \\<noteq> fst r\\<rbrakk>\n  \\<Longrightarrow> \\<gamma> s r = \\<gamma> (s \\<star> rs) r\n  contains s r\n  ?r' \\<in> set (Cons r' rs) \\<Longrightarrow> fst ?r' \\<noteq> fst r\n\ngoal (1 subgoal):\n 1. \\<And>a rs.\n       \\<lbrakk>\\<lbrakk>contains s r;\n                 \\<And>r'.\n                    r' \\<in> set rs \\<Longrightarrow>\n                    fst r' \\<noteq> fst r\\<rbrakk>\n                \\<Longrightarrow> \\<gamma> s r = \\<gamma> (s \\<star> rs) r;\n        contains s r;\n        \\<And>r'.\n           r' \\<in> set (Cons a rs) \\<Longrightarrow>\n           fst r' \\<noteq> fst r\\<rbrakk>\n       \\<Longrightarrow> \\<gamma> s r = \\<gamma> (s \\<star> Cons a rs) r", "thus \"\\<gamma> s r = \\<gamma> (s \\<star> (rs#r')) r\""], ["proof (prove)\nusing this:\n  \\<lbrakk>contains s r;\n   \\<And>r'.\n      r' \\<in> set rs \\<Longrightarrow> fst r' \\<noteq> fst r\\<rbrakk>\n  \\<Longrightarrow> \\<gamma> s r = \\<gamma> (s \\<star> rs) r\n  contains s r\n  ?r' \\<in> set (Cons r' rs) \\<Longrightarrow> fst ?r' \\<noteq> fst r\n\ngoal (1 subgoal):\n 1. \\<gamma> s r = \\<gamma> (s \\<star> Cons r' rs) r", "using assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>contains s r;\n   \\<And>r'.\n      r' \\<in> set rs \\<Longrightarrow> fst r' \\<noteq> fst r\\<rbrakk>\n  \\<Longrightarrow> \\<gamma> s r = \\<gamma> (s \\<star> rs) r\n  contains s r\n  ?r' \\<in> set (Cons r' rs) \\<Longrightarrow> fst ?r' \\<noteq> fst r\n  contains s r\n  ?r' \\<in> set rs \\<Longrightarrow> fst ?r' \\<noteq> fst r\n\ngoal (1 subgoal):\n 1. \\<gamma> s r = \\<gamma> (s \\<star> Cons r' rs) r", "by auto\n      (metis contains_star fst_conv idem1 idem2 prod.exhaust)"], ["proof (state)\nthis:\n  \\<gamma> s r = \\<gamma> (s \\<star> Cons r' rs) r\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma glb_common:\nfixes s1 s2 s rs1 rs2\nassumes \"s1 = s \\<star> rs1\" and \"s2 = s \\<star> rs2\"\nshows \"\\<exists> rs . s1 \\<sqinter> s2 = s \\<star> rs \\<and> set rs \\<subseteq> set rs1 \\<union> set rs2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>rs.\n       s1 \\<sqinter> s2 = s \\<star> rs \\<and>\n       set rs \\<subseteq> set rs1 \\<union> set rs2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>rs.\n       s1 \\<sqinter> s2 = s \\<star> rs \\<and>\n       set rs \\<subseteq> set rs1 \\<union> set rs2", "have 1:\"s \\<preceq> s1\" and 2:\"s \\<preceq> s2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<preceq> s1 &&& s \\<preceq> s2", "using assms"], ["proof (prove)\nusing this:\n  s1 = s \\<star> rs1\n  s2 = s \\<star> rs2\n\ngoal (1 subgoal):\n 1. s \\<preceq> s1 &&& s \\<preceq> s2", "by (auto simp add:less_eq_def)"], ["proof (state)\nthis:\n  s \\<preceq> s1\n  s \\<preceq> s2\n\ngoal (1 subgoal):\n 1. \\<exists>rs.\n       s1 \\<sqinter> s2 = s \\<star> rs \\<and>\n       set rs \\<subseteq> set rs1 \\<union> set rs2", "hence 3:\"s \\<preceq> s1 \\<sqinter> s2\""], ["proof (prove)\nusing this:\n  s \\<preceq> s1\n  s \\<preceq> s2\n\ngoal (1 subgoal):\n 1. s \\<preceq> s1 \\<sqinter> s2", "by (metis inf_glb is_lb_def pre_RDR.is_glb_def)"], ["proof (state)\nthis:\n  s \\<preceq> s1 \\<sqinter> s2\n\ngoal (1 subgoal):\n 1. \\<exists>rs.\n       s1 \\<sqinter> s2 = s \\<star> rs \\<and>\n       set rs \\<subseteq> set rs1 \\<union> set rs2", "have 4:\"s1 \\<sqinter> s2 \\<preceq> s1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s1 \\<sqinter> s2 \\<preceq> s1", "by (metis cobounded1)"], ["proof (state)\nthis:\n  s1 \\<sqinter> s2 \\<preceq> s1\n\ngoal (1 subgoal):\n 1. \\<exists>rs.\n       s1 \\<sqinter> s2 = s \\<star> rs \\<and>\n       set rs \\<subseteq> set rs1 \\<union> set rs2", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>rs.\n       s1 \\<sqinter> s2 = s \\<star> rs \\<and>\n       set rs \\<subseteq> set rs1 \\<union> set rs2", "using 3 4 assms(1) and consistency"], ["proof (prove)\nusing this:\n  s \\<preceq> s1 \\<sqinter> s2\n  s1 \\<sqinter> s2 \\<preceq> s1\n  s1 = s \\<star> rs1\n  \\<lbrakk>?s1.0 \\<preceq> ?s2.0; ?s2.0 \\<preceq> ?s3.0;\n   ?s3.0 = ?s1.0 \\<star> ?rs\\<rbrakk>\n  \\<Longrightarrow> \\<exists>rs' rs''.\n                       ?s2.0 = ?s1.0 \\<star> rs' \\<and>\n                       ?s3.0 = ?s2.0 \\<star> rs'' \\<and>\n                       set rs' \\<subseteq> set ?rs \\<and>\n                       set rs'' \\<subseteq> set ?rs\n\ngoal (1 subgoal):\n 1. \\<exists>rs.\n       s1 \\<sqinter> s2 = s \\<star> rs \\<and>\n       set rs \\<subseteq> set rs1 \\<union> set rs2", "by blast"], ["proof (state)\nthis:\n  \\<exists>rs.\n     s1 \\<sqinter> s2 = s \\<star> rs \\<and>\n     set rs \\<subseteq> set rs1 \\<union> set rs2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma glb_common_set:\nfixes ss s0 rset\nassumes \"finite ss\"  and \"ss \\<noteq> {}\"\nand \"\\<And> s . s \\<in> ss \\<Longrightarrow> \\<exists> rs . s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\"\nshows \"\\<exists> rs . \\<Sqinter> ss = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>rs.\n       \\<Sqinter> ss = s0 \\<star> rs \\<and> set rs \\<subseteq> rset", "using assms"], ["proof (prove)\nusing this:\n  finite ss\n  ss \\<noteq> {}\n  ?s \\<in> ss \\<Longrightarrow>\n  \\<exists>rs. ?s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\n\ngoal (1 subgoal):\n 1. \\<exists>rs.\n       \\<Sqinter> ss = s0 \\<star> rs \\<and> set rs \\<subseteq> rset", "proof (induct ss rule:finite_ne_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       (\\<And>s.\n           s \\<in> {x} \\<Longrightarrow>\n           \\<exists>rs.\n              s = s0 \\<star> rs \\<and>\n              set rs \\<subseteq> rset) \\<Longrightarrow>\n       \\<exists>rs.\n          \\<Sqinter> {x} = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\n 2. \\<And>x Fa.\n       \\<lbrakk>finite Fa; Fa \\<noteq> {}; x \\<notin> Fa;\n        (\\<And>s.\n            s \\<in> Fa \\<Longrightarrow>\n            \\<exists>rs.\n               s = s0 \\<star> rs \\<and>\n               set rs \\<subseteq> rset) \\<Longrightarrow>\n        \\<exists>rs.\n           \\<Sqinter> Fa = s0 \\<star> rs \\<and> set rs \\<subseteq> rset;\n        \\<And>s.\n           s \\<in> insert x Fa \\<Longrightarrow>\n           \\<exists>rs.\n              s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\\<rbrakk>\n       \\<Longrightarrow> \\<exists>rs.\n                            \\<Sqinter> insert x Fa = s0 \\<star> rs \\<and>\n                            set rs \\<subseteq> rset", "case (singleton s)"], ["proof (state)\nthis:\n  ?s \\<in> {s} \\<Longrightarrow>\n  \\<exists>rs. ?s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       (\\<And>s.\n           s \\<in> {x} \\<Longrightarrow>\n           \\<exists>rs.\n              s = s0 \\<star> rs \\<and>\n              set rs \\<subseteq> rset) \\<Longrightarrow>\n       \\<exists>rs.\n          \\<Sqinter> {x} = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\n 2. \\<And>x Fa.\n       \\<lbrakk>finite Fa; Fa \\<noteq> {}; x \\<notin> Fa;\n        (\\<And>s.\n            s \\<in> Fa \\<Longrightarrow>\n            \\<exists>rs.\n               s = s0 \\<star> rs \\<and>\n               set rs \\<subseteq> rset) \\<Longrightarrow>\n        \\<exists>rs.\n           \\<Sqinter> Fa = s0 \\<star> rs \\<and> set rs \\<subseteq> rset;\n        \\<And>s.\n           s \\<in> insert x Fa \\<Longrightarrow>\n           \\<exists>rs.\n              s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\\<rbrakk>\n       \\<Longrightarrow> \\<exists>rs.\n                            \\<Sqinter> insert x Fa = s0 \\<star> rs \\<and>\n                            set rs \\<subseteq> rset", "obtain rs where \"s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>rs.\n        s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using singleton"], ["proof (prove)\nusing this:\n  ?s \\<in> {s} \\<Longrightarrow>\n  \\<exists>rs. ?s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\n\ngoal (1 subgoal):\n 1. (\\<And>rs.\n        s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by force"], ["proof (state)\nthis:\n  s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       (\\<And>s.\n           s \\<in> {x} \\<Longrightarrow>\n           \\<exists>rs.\n              s = s0 \\<star> rs \\<and>\n              set rs \\<subseteq> rset) \\<Longrightarrow>\n       \\<exists>rs.\n          \\<Sqinter> {x} = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\n 2. \\<And>x Fa.\n       \\<lbrakk>finite Fa; Fa \\<noteq> {}; x \\<notin> Fa;\n        (\\<And>s.\n            s \\<in> Fa \\<Longrightarrow>\n            \\<exists>rs.\n               s = s0 \\<star> rs \\<and>\n               set rs \\<subseteq> rset) \\<Longrightarrow>\n        \\<exists>rs.\n           \\<Sqinter> Fa = s0 \\<star> rs \\<and> set rs \\<subseteq> rset;\n        \\<And>s.\n           s \\<in> insert x Fa \\<Longrightarrow>\n           \\<exists>rs.\n              s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\\<rbrakk>\n       \\<Longrightarrow> \\<exists>rs.\n                            \\<Sqinter> insert x Fa = s0 \\<star> rs \\<and>\n                            set rs \\<subseteq> rset", "moreover"], ["proof (state)\nthis:\n  s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       (\\<And>s.\n           s \\<in> {x} \\<Longrightarrow>\n           \\<exists>rs.\n              s = s0 \\<star> rs \\<and>\n              set rs \\<subseteq> rset) \\<Longrightarrow>\n       \\<exists>rs.\n          \\<Sqinter> {x} = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\n 2. \\<And>x Fa.\n       \\<lbrakk>finite Fa; Fa \\<noteq> {}; x \\<notin> Fa;\n        (\\<And>s.\n            s \\<in> Fa \\<Longrightarrow>\n            \\<exists>rs.\n               s = s0 \\<star> rs \\<and>\n               set rs \\<subseteq> rset) \\<Longrightarrow>\n        \\<exists>rs.\n           \\<Sqinter> Fa = s0 \\<star> rs \\<and> set rs \\<subseteq> rset;\n        \\<And>s.\n           s \\<in> insert x Fa \\<Longrightarrow>\n           \\<exists>rs.\n              s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\\<rbrakk>\n       \\<Longrightarrow> \\<exists>rs.\n                            \\<Sqinter> insert x Fa = s0 \\<star> rs \\<and>\n                            set rs \\<subseteq> rset", "have \"\\<Sqinter> {s} = s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Sqinter> {s} = s", "using singleton"], ["proof (prove)\nusing this:\n  ?s \\<in> {s} \\<Longrightarrow>\n  \\<exists>rs. ?s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\n\ngoal (1 subgoal):\n 1. \\<Sqinter> {s} = s", "by auto"], ["proof (state)\nthis:\n  \\<Sqinter> {s} = s\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       (\\<And>s.\n           s \\<in> {x} \\<Longrightarrow>\n           \\<exists>rs.\n              s = s0 \\<star> rs \\<and>\n              set rs \\<subseteq> rset) \\<Longrightarrow>\n       \\<exists>rs.\n          \\<Sqinter> {x} = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\n 2. \\<And>x Fa.\n       \\<lbrakk>finite Fa; Fa \\<noteq> {}; x \\<notin> Fa;\n        (\\<And>s.\n            s \\<in> Fa \\<Longrightarrow>\n            \\<exists>rs.\n               s = s0 \\<star> rs \\<and>\n               set rs \\<subseteq> rset) \\<Longrightarrow>\n        \\<exists>rs.\n           \\<Sqinter> Fa = s0 \\<star> rs \\<and> set rs \\<subseteq> rset;\n        \\<And>s.\n           s \\<in> insert x Fa \\<Longrightarrow>\n           \\<exists>rs.\n              s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\\<rbrakk>\n       \\<Longrightarrow> \\<exists>rs.\n                            \\<Sqinter> insert x Fa = s0 \\<star> rs \\<and>\n                            set rs \\<subseteq> rset", "ultimately"], ["proof (chain)\npicking this:\n  s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\n  \\<Sqinter> {s} = s", "show \"\\<exists> rs . \\<Sqinter> {s} = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\""], ["proof (prove)\nusing this:\n  s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\n  \\<Sqinter> {s} = s\n\ngoal (1 subgoal):\n 1. \\<exists>rs.\n       \\<Sqinter> {s} = s0 \\<star> rs \\<and> set rs \\<subseteq> rset", "by blast"], ["proof (state)\nthis:\n  \\<exists>rs. \\<Sqinter> {s} = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\n\ngoal (1 subgoal):\n 1. \\<And>x Fa.\n       \\<lbrakk>finite Fa; Fa \\<noteq> {}; x \\<notin> Fa;\n        (\\<And>s.\n            s \\<in> Fa \\<Longrightarrow>\n            \\<exists>rs.\n               s = s0 \\<star> rs \\<and>\n               set rs \\<subseteq> rset) \\<Longrightarrow>\n        \\<exists>rs.\n           \\<Sqinter> Fa = s0 \\<star> rs \\<and> set rs \\<subseteq> rset;\n        \\<And>s.\n           s \\<in> insert x Fa \\<Longrightarrow>\n           \\<exists>rs.\n              s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\\<rbrakk>\n       \\<Longrightarrow> \\<exists>rs.\n                            \\<Sqinter> insert x Fa = s0 \\<star> rs \\<and>\n                            set rs \\<subseteq> rset", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x Fa.\n       \\<lbrakk>finite Fa; Fa \\<noteq> {}; x \\<notin> Fa;\n        (\\<And>s.\n            s \\<in> Fa \\<Longrightarrow>\n            \\<exists>rs.\n               s = s0 \\<star> rs \\<and>\n               set rs \\<subseteq> rset) \\<Longrightarrow>\n        \\<exists>rs.\n           \\<Sqinter> Fa = s0 \\<star> rs \\<and> set rs \\<subseteq> rset;\n        \\<And>s.\n           s \\<in> insert x Fa \\<Longrightarrow>\n           \\<exists>rs.\n              s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\\<rbrakk>\n       \\<Longrightarrow> \\<exists>rs.\n                            \\<Sqinter> insert x Fa = s0 \\<star> rs \\<and>\n                            set rs \\<subseteq> rset", "case (insert s ss)"], ["proof (state)\nthis:\n  finite ss\n  ss \\<noteq> {}\n  s \\<notin> ss\n  (\\<And>s.\n      s \\<in> ss \\<Longrightarrow>\n      \\<exists>rs.\n         s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset) \\<Longrightarrow>\n  \\<exists>rs. \\<Sqinter> ss = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\n  ?s \\<in> insert s ss \\<Longrightarrow>\n  \\<exists>rs. ?s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\n\ngoal (1 subgoal):\n 1. \\<And>x Fa.\n       \\<lbrakk>finite Fa; Fa \\<noteq> {}; x \\<notin> Fa;\n        (\\<And>s.\n            s \\<in> Fa \\<Longrightarrow>\n            \\<exists>rs.\n               s = s0 \\<star> rs \\<and>\n               set rs \\<subseteq> rset) \\<Longrightarrow>\n        \\<exists>rs.\n           \\<Sqinter> Fa = s0 \\<star> rs \\<and> set rs \\<subseteq> rset;\n        \\<And>s.\n           s \\<in> insert x Fa \\<Longrightarrow>\n           \\<exists>rs.\n              s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\\<rbrakk>\n       \\<Longrightarrow> \\<exists>rs.\n                            \\<Sqinter> insert x Fa = s0 \\<star> rs \\<and>\n                            set rs \\<subseteq> rset", "have 1:\"\\<And> s' . s' \\<in> ss \\<Longrightarrow> \\<exists> rs . s' = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s'.\n       s' \\<in> ss \\<Longrightarrow>\n       \\<exists>rs. s' = s0 \\<star> rs \\<and> set rs \\<subseteq> rset", "using insert(5)"], ["proof (prove)\nusing this:\n  ?s \\<in> insert s ss \\<Longrightarrow>\n  \\<exists>rs. ?s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\n\ngoal (1 subgoal):\n 1. \\<And>s'.\n       s' \\<in> ss \\<Longrightarrow>\n       \\<exists>rs. s' = s0 \\<star> rs \\<and> set rs \\<subseteq> rset", "by force"], ["proof (state)\nthis:\n  ?s' \\<in> ss \\<Longrightarrow>\n  \\<exists>rs. ?s' = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\n\ngoal (1 subgoal):\n 1. \\<And>x Fa.\n       \\<lbrakk>finite Fa; Fa \\<noteq> {}; x \\<notin> Fa;\n        (\\<And>s.\n            s \\<in> Fa \\<Longrightarrow>\n            \\<exists>rs.\n               s = s0 \\<star> rs \\<and>\n               set rs \\<subseteq> rset) \\<Longrightarrow>\n        \\<exists>rs.\n           \\<Sqinter> Fa = s0 \\<star> rs \\<and> set rs \\<subseteq> rset;\n        \\<And>s.\n           s \\<in> insert x Fa \\<Longrightarrow>\n           \\<exists>rs.\n              s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\\<rbrakk>\n       \\<Longrightarrow> \\<exists>rs.\n                            \\<Sqinter> insert x Fa = s0 \\<star> rs \\<and>\n                            set rs \\<subseteq> rset", "obtain rs where 2:\"\\<Sqinter> ss = s0 \\<star> rs\" and 3:\"set rs \\<subseteq> rset\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>rs.\n        \\<lbrakk>\\<Sqinter> ss = s0 \\<star> rs;\n         set rs \\<subseteq> rset\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using insert(4) 1"], ["proof (prove)\nusing this:\n  (\\<And>s.\n      s \\<in> ss \\<Longrightarrow>\n      \\<exists>rs.\n         s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset) \\<Longrightarrow>\n  \\<exists>rs. \\<Sqinter> ss = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\n  ?s' \\<in> ss \\<Longrightarrow>\n  \\<exists>rs. ?s' = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\n\ngoal (1 subgoal):\n 1. (\\<And>rs.\n        \\<lbrakk>\\<Sqinter> ss = s0 \\<star> rs;\n         set rs \\<subseteq> rset\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  \\<Sqinter> ss = s0 \\<star> rs\n  set rs \\<subseteq> rset\n\ngoal (1 subgoal):\n 1. \\<And>x Fa.\n       \\<lbrakk>finite Fa; Fa \\<noteq> {}; x \\<notin> Fa;\n        (\\<And>s.\n            s \\<in> Fa \\<Longrightarrow>\n            \\<exists>rs.\n               s = s0 \\<star> rs \\<and>\n               set rs \\<subseteq> rset) \\<Longrightarrow>\n        \\<exists>rs.\n           \\<Sqinter> Fa = s0 \\<star> rs \\<and> set rs \\<subseteq> rset;\n        \\<And>s.\n           s \\<in> insert x Fa \\<Longrightarrow>\n           \\<exists>rs.\n              s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\\<rbrakk>\n       \\<Longrightarrow> \\<exists>rs.\n                            \\<Sqinter> insert x Fa = s0 \\<star> rs \\<and>\n                            set rs \\<subseteq> rset", "obtain rs' where 4:\"s = s0 \\<star> rs'\"and 5:\"set rs' \\<subseteq> rset\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>rs'.\n        \\<lbrakk>s = s0 \\<star> rs'; set rs' \\<subseteq> rset\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using insert(5)"], ["proof (prove)\nusing this:\n  ?s \\<in> insert s ss \\<Longrightarrow>\n  \\<exists>rs. ?s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\n\ngoal (1 subgoal):\n 1. (\\<And>rs'.\n        \\<lbrakk>s = s0 \\<star> rs'; set rs' \\<subseteq> rset\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  s = s0 \\<star> rs'\n  set rs' \\<subseteq> rset\n\ngoal (1 subgoal):\n 1. \\<And>x Fa.\n       \\<lbrakk>finite Fa; Fa \\<noteq> {}; x \\<notin> Fa;\n        (\\<And>s.\n            s \\<in> Fa \\<Longrightarrow>\n            \\<exists>rs.\n               s = s0 \\<star> rs \\<and>\n               set rs \\<subseteq> rset) \\<Longrightarrow>\n        \\<exists>rs.\n           \\<Sqinter> Fa = s0 \\<star> rs \\<and> set rs \\<subseteq> rset;\n        \\<And>s.\n           s \\<in> insert x Fa \\<Longrightarrow>\n           \\<exists>rs.\n              s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\\<rbrakk>\n       \\<Longrightarrow> \\<exists>rs.\n                            \\<Sqinter> insert x Fa = s0 \\<star> rs \\<and>\n                            set rs \\<subseteq> rset", "have 6:\"\\<Sqinter> (insert s ss) = s \\<sqinter> (\\<Sqinter> ss)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Sqinter> insert s ss = s \\<sqinter> \\<Sqinter> ss", "by (metis insert.hyps(1-3) insert_not_elem)"], ["proof (state)\nthis:\n  \\<Sqinter> insert s ss = s \\<sqinter> \\<Sqinter> ss\n\ngoal (1 subgoal):\n 1. \\<And>x Fa.\n       \\<lbrakk>finite Fa; Fa \\<noteq> {}; x \\<notin> Fa;\n        (\\<And>s.\n            s \\<in> Fa \\<Longrightarrow>\n            \\<exists>rs.\n               s = s0 \\<star> rs \\<and>\n               set rs \\<subseteq> rset) \\<Longrightarrow>\n        \\<exists>rs.\n           \\<Sqinter> Fa = s0 \\<star> rs \\<and> set rs \\<subseteq> rset;\n        \\<And>s.\n           s \\<in> insert x Fa \\<Longrightarrow>\n           \\<exists>rs.\n              s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\\<rbrakk>\n       \\<Longrightarrow> \\<exists>rs.\n                            \\<Sqinter> insert x Fa = s0 \\<star> rs \\<and>\n                            set rs \\<subseteq> rset", "obtain rs'' where 7:\"\\<Sqinter> (insert s ss) = s0 \\<star> rs''\" \n    and 8:\"set rs'' \\<subseteq> set rs' \\<union> set rs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>rs''.\n        \\<lbrakk>\\<Sqinter> insert s ss = s0 \\<star> rs'';\n         set rs'' \\<subseteq> set rs' \\<union> set rs\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using glb_common 2 4 6"], ["proof (prove)\nusing this:\n  \\<lbrakk>?s1.0 = ?s \\<star> ?rs1.0; ?s2.0 = ?s \\<star> ?rs2.0\\<rbrakk>\n  \\<Longrightarrow> \\<exists>rs.\n                       ?s1.0 \\<sqinter> ?s2.0 = ?s \\<star> rs \\<and>\n                       set rs \\<subseteq> set ?rs1.0 \\<union> set ?rs2.0\n  \\<Sqinter> ss = s0 \\<star> rs\n  s = s0 \\<star> rs'\n  \\<Sqinter> insert s ss = s \\<sqinter> \\<Sqinter> ss\n\ngoal (1 subgoal):\n 1. (\\<And>rs''.\n        \\<lbrakk>\\<Sqinter> insert s ss = s0 \\<star> rs'';\n         set rs'' \\<subseteq> set rs' \\<union> set rs\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by force"], ["proof (state)\nthis:\n  \\<Sqinter> insert s ss = s0 \\<star> rs''\n  set rs'' \\<subseteq> set rs' \\<union> set rs\n\ngoal (1 subgoal):\n 1. \\<And>x Fa.\n       \\<lbrakk>finite Fa; Fa \\<noteq> {}; x \\<notin> Fa;\n        (\\<And>s.\n            s \\<in> Fa \\<Longrightarrow>\n            \\<exists>rs.\n               s = s0 \\<star> rs \\<and>\n               set rs \\<subseteq> rset) \\<Longrightarrow>\n        \\<exists>rs.\n           \\<Sqinter> Fa = s0 \\<star> rs \\<and> set rs \\<subseteq> rset;\n        \\<And>s.\n           s \\<in> insert x Fa \\<Longrightarrow>\n           \\<exists>rs.\n              s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\\<rbrakk>\n       \\<Longrightarrow> \\<exists>rs.\n                            \\<Sqinter> insert x Fa = s0 \\<star> rs \\<and>\n                            set rs \\<subseteq> rset", "have 9:\"set rs'' \\<subseteq> rset\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set rs'' \\<subseteq> rset", "using 3 5 8"], ["proof (prove)\nusing this:\n  set rs \\<subseteq> rset\n  set rs' \\<subseteq> rset\n  set rs'' \\<subseteq> set rs' \\<union> set rs\n\ngoal (1 subgoal):\n 1. set rs'' \\<subseteq> rset", "by blast"], ["proof (state)\nthis:\n  set rs'' \\<subseteq> rset\n\ngoal (1 subgoal):\n 1. \\<And>x Fa.\n       \\<lbrakk>finite Fa; Fa \\<noteq> {}; x \\<notin> Fa;\n        (\\<And>s.\n            s \\<in> Fa \\<Longrightarrow>\n            \\<exists>rs.\n               s = s0 \\<star> rs \\<and>\n               set rs \\<subseteq> rset) \\<Longrightarrow>\n        \\<exists>rs.\n           \\<Sqinter> Fa = s0 \\<star> rs \\<and> set rs \\<subseteq> rset;\n        \\<And>s.\n           s \\<in> insert x Fa \\<Longrightarrow>\n           \\<exists>rs.\n              s = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\\<rbrakk>\n       \\<Longrightarrow> \\<exists>rs.\n                            \\<Sqinter> insert x Fa = s0 \\<star> rs \\<and>\n                            set rs \\<subseteq> rset", "show \"\\<exists> rs . \\<Sqinter> (insert s ss) = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>rs.\n       \\<Sqinter> insert s ss = s0 \\<star> rs \\<and> set rs \\<subseteq> rset", "using 7 9"], ["proof (prove)\nusing this:\n  \\<Sqinter> insert s ss = s0 \\<star> rs''\n  set rs'' \\<subseteq> rset\n\ngoal (1 subgoal):\n 1. \\<exists>rs.\n       \\<Sqinter> insert s ss = s0 \\<star> rs \\<and> set rs \\<subseteq> rset", "by blast"], ["proof (state)\nthis:\n  \\<exists>rs.\n     \\<Sqinter> insert s ss = s0 \\<star> rs \\<and> set rs \\<subseteq> rset\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "end"]]}