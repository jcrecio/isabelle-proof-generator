{"file_name": "/home/qj213/afp-2021-10-22/thys/Jordan_Normal_Form/Strassen_Algorithm.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Jordan_Normal_Form", "problem_names": ["lemma strassen_measure_add[simp]: \n  \"strassen_measure (A + B, C) = strassen_measure (B,C)\" \n  \"strassen_measure (A, B + C) = strassen_measure (A,C)\" \n  \"strassen_measure (A - B, C) = strassen_measure (B,C)\" \n  \"strassen_measure (A, B - C) = strassen_measure (A,C)\" \n  \"strassen_measure (- A, B) = strassen_measure (A,B)\"\n  \"strassen_measure (A, - B) = strassen_measure (A,B)\"", "lemma strassen_measure_div_2: assumes \"(A1, A2, A3, A4) = split_block A (dim_row A div 2) (dim_col A div 2)\"\n  \"(B1, B2, B3, B4) = split_block B (dim_col A div 2) (dim_col B div 2)\"  \n  and large: \"\\<not> strassen_too_small A B\"\n  shows \n  \"strassen_measure (A1,B4) < strassen_measure (A,B)\"\n  \"strassen_measure (A1,B2) < strassen_measure (A,B)\"\n  \"strassen_measure (A2,B4) < strassen_measure (A,B)\"\n  \"strassen_measure (A3,B2) < strassen_measure (A,B)\"\n  \"strassen_measure (A4,B1) < strassen_measure (A,B)\"\n  \"strassen_measure (A4,B3) < strassen_measure (A,B)\"\n  \"strassen_measure (A4,B4) < strassen_measure (A,B)\"", "lemma strassen_measure_odd: assumes \"(A1, A2, A3, A4) = split_block A ((dim_row A div 2) * 2) ((dim_col A div 2) * 2)\"  \n  and \"(B1, B2, B3, B4) = split_block B ((dim_col A div 2) * 2) ((dim_col B div 2) * 2)\"\n  and odd: \"\\<not> strassen_even A B\"\n  shows \"strassen_measure (A1,B1) < strassen_measure (A,B)\"", "lemma strassen_mat_mult: \n  \"dim_col A = dim_row B \\<Longrightarrow> strassen_mat_mult A B = A * B\""], "translations": [["", "lemma strassen_measure_add[simp]: \n  \"strassen_measure (A + B, C) = strassen_measure (B,C)\" \n  \"strassen_measure (A, B + C) = strassen_measure (A,C)\" \n  \"strassen_measure (A - B, C) = strassen_measure (B,C)\" \n  \"strassen_measure (A, B - C) = strassen_measure (A,C)\" \n  \"strassen_measure (- A, B) = strassen_measure (A,B)\"\n  \"strassen_measure (A, - B) = strassen_measure (A,B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (strassen_measure (A + B, C) = strassen_measure (B, C) &&&\n     strassen_measure (A, B + C) = strassen_measure (A, C) &&&\n     strassen_measure (A - B, C) = strassen_measure (B, C)) &&&\n    strassen_measure (A, B - C) = strassen_measure (A, C) &&&\n    strassen_measure (- A, B) = strassen_measure (A, B) &&&\n    strassen_measure (A, - B) = strassen_measure (A, B)", "unfolding strassen_measure_def strassen_even_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((case (A + B, C) of\n      (A, B) \\<Rightarrow>\n        dim_row A + dim_col A + dim_col B +\n        (dim_row A + dim_col A + dim_col B) +\n        (if even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B)\n         then 0 else 1)) =\n     (case (B, C) of\n      (A, B) \\<Rightarrow>\n        dim_row A + dim_col A + dim_col B +\n        (dim_row A + dim_col A + dim_col B) +\n        (if even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B)\n         then 0 else 1)) &&&\n     (case (A, B + C) of\n      (A, B) \\<Rightarrow>\n        dim_row A + dim_col A + dim_col B +\n        (dim_row A + dim_col A + dim_col B) +\n        (if even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B)\n         then 0 else 1)) =\n     (case (A, C) of\n      (A, B) \\<Rightarrow>\n        dim_row A + dim_col A + dim_col B +\n        (dim_row A + dim_col A + dim_col B) +\n        (if even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B)\n         then 0 else 1)) &&&\n     (case (A - B, C) of\n      (A, B) \\<Rightarrow>\n        dim_row A + dim_col A + dim_col B +\n        (dim_row A + dim_col A + dim_col B) +\n        (if even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B)\n         then 0 else 1)) =\n     (case (B, C) of\n      (A, B) \\<Rightarrow>\n        dim_row A + dim_col A + dim_col B +\n        (dim_row A + dim_col A + dim_col B) +\n        (if even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B)\n         then 0 else 1))) &&&\n    (case (A, B - C) of\n     (A, B) \\<Rightarrow>\n       dim_row A + dim_col A + dim_col B +\n       (dim_row A + dim_col A + dim_col B) +\n       (if even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B)\n        then 0 else 1)) =\n    (case (A, C) of\n     (A, B) \\<Rightarrow>\n       dim_row A + dim_col A + dim_col B +\n       (dim_row A + dim_col A + dim_col B) +\n       (if even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B)\n        then 0 else 1)) &&&\n    (case (- A, B) of\n     (A, B) \\<Rightarrow>\n       dim_row A + dim_col A + dim_col B +\n       (dim_row A + dim_col A + dim_col B) +\n       (if even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B)\n        then 0 else 1)) =\n    (case (A, B) of\n     (A, B) \\<Rightarrow>\n       dim_row A + dim_col A + dim_col B +\n       (dim_row A + dim_col A + dim_col B) +\n       (if even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B)\n        then 0 else 1)) &&&\n    (case (A, - B) of\n     (A, B) \\<Rightarrow>\n       dim_row A + dim_col A + dim_col B +\n       (dim_row A + dim_col A + dim_col B) +\n       (if even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B)\n        then 0 else 1)) =\n    (case (A, B) of\n     (A, B) \\<Rightarrow>\n       dim_row A + dim_col A + dim_col B +\n       (dim_row A + dim_col A + dim_col B) +\n       (if even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B)\n        then 0 else 1))", "by auto"], ["", "lemma strassen_measure_div_2: assumes \"(A1, A2, A3, A4) = split_block A (dim_row A div 2) (dim_col A div 2)\"\n  \"(B1, B2, B3, B4) = split_block B (dim_col A div 2) (dim_col B div 2)\"  \n  and large: \"\\<not> strassen_too_small A B\"\n  shows \n  \"strassen_measure (A1,B4) < strassen_measure (A,B)\"\n  \"strassen_measure (A1,B2) < strassen_measure (A,B)\"\n  \"strassen_measure (A2,B4) < strassen_measure (A,B)\"\n  \"strassen_measure (A3,B2) < strassen_measure (A,B)\"\n  \"strassen_measure (A4,B1) < strassen_measure (A,B)\"\n  \"strassen_measure (A4,B3) < strassen_measure (A,B)\"\n  \"strassen_measure (A4,B4) < strassen_measure (A,B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (strassen_measure (A1, B4) < strassen_measure (A, B) &&&\n     strassen_measure (A1, B2) < strassen_measure (A, B) &&&\n     strassen_measure (A2, B4) < strassen_measure (A, B)) &&&\n    (strassen_measure (A3, B2) < strassen_measure (A, B) &&&\n     strassen_measure (A4, B1) < strassen_measure (A, B)) &&&\n    strassen_measure (A4, B3) < strassen_measure (A, B) &&&\n    strassen_measure (A4, B4) < strassen_measure (A, B)", "proof -"], ["proof (state)\ngoal (7 subgoals):\n 1. strassen_measure (A1, B4) < strassen_measure (A, B)\n 2. strassen_measure (A1, B2) < strassen_measure (A, B)\n 3. strassen_measure (A2, B4) < strassen_measure (A, B)\n 4. strassen_measure (A3, B2) < strassen_measure (A, B)\n 5. strassen_measure (A4, B1) < strassen_measure (A, B)\n 6. strassen_measure (A4, B3) < strassen_measure (A, B)\n 7. strassen_measure (A4, B4) < strassen_measure (A, B)", "{"], ["proof (state)\ngoal (7 subgoals):\n 1. strassen_measure (A1, B4) < strassen_measure (A, B)\n 2. strassen_measure (A1, B2) < strassen_measure (A, B)\n 3. strassen_measure (A2, B4) < strassen_measure (A, B)\n 4. strassen_measure (A3, B2) < strassen_measure (A, B)\n 5. strassen_measure (A4, B1) < strassen_measure (A, B)\n 6. strassen_measure (A4, B3) < strassen_measure (A, B)\n 7. strassen_measure (A4, B4) < strassen_measure (A, B)", "fix Ai Bi"], ["proof (state)\ngoal (7 subgoals):\n 1. strassen_measure (A1, B4) < strassen_measure (A, B)\n 2. strassen_measure (A1, B2) < strassen_measure (A, B)\n 3. strassen_measure (A2, B4) < strassen_measure (A, B)\n 4. strassen_measure (A3, B2) < strassen_measure (A, B)\n 5. strassen_measure (A4, B1) < strassen_measure (A, B)\n 6. strassen_measure (A4, B3) < strassen_measure (A, B)\n 7. strassen_measure (A4, B4) < strassen_measure (A, B)", "assume Ai: \"Ai \\<in> {A1,A2,A3,A4}\" and Bi: \"Bi \\<in> {B1,B2,B3,B4}\""], ["proof (state)\nthis:\n  Ai \\<in> {A1, A2, A3, A4}\n  Bi \\<in> {B1, B2, B3, B4}\n\ngoal (7 subgoals):\n 1. strassen_measure (A1, B4) < strassen_measure (A, B)\n 2. strassen_measure (A1, B2) < strassen_measure (A, B)\n 3. strassen_measure (A2, B4) < strassen_measure (A, B)\n 4. strassen_measure (A3, B2) < strassen_measure (A, B)\n 5. strassen_measure (A4, B1) < strassen_measure (A, B)\n 6. strassen_measure (A4, B3) < strassen_measure (A, B)\n 7. strassen_measure (A4, B4) < strassen_measure (A, B)", "from large[unfolded strassen_too_small_def strassen_constant_def]"], ["proof (chain)\npicking this:\n  \\<not> (dim_row A < 20 \\<or> dim_col A < 20 \\<or> dim_col B < 20)", "have \"\\<not> dim_row A < 2\""], ["proof (prove)\nusing this:\n  \\<not> (dim_row A < 20 \\<or> dim_col A < 20 \\<or> dim_col B < 20)\n\ngoal (1 subgoal):\n 1. \\<not> dim_row A < 2", "by auto"], ["proof (state)\nthis:\n  \\<not> dim_row A < 2\n\ngoal (7 subgoals):\n 1. strassen_measure (A1, B4) < strassen_measure (A, B)\n 2. strassen_measure (A1, B2) < strassen_measure (A, B)\n 3. strassen_measure (A2, B4) < strassen_measure (A, B)\n 4. strassen_measure (A3, B2) < strassen_measure (A, B)\n 5. strassen_measure (A4, B1) < strassen_measure (A, B)\n 6. strassen_measure (A4, B3) < strassen_measure (A, B)\n 7. strassen_measure (A4, B4) < strassen_measure (A, B)", "with assms Ai Bi"], ["proof (chain)\npicking this:\n  (A1, A2, A3, A4) = split_block A (dim_row A div 2) (dim_col A div 2)\n  (B1, B2, B3, B4) = split_block B (dim_col A div 2) (dim_col B div 2)\n  \\<not> strassen_too_small A B\n  Ai \\<in> {A1, A2, A3, A4}\n  Bi \\<in> {B1, B2, B3, B4}\n  \\<not> dim_row A < 2", "have Ar:\n      \"dim_row Ai < dim_row A\"\n      \"dim_col Ai \\<le> dim_col A\"\n      \"dim_col Bi \\<le> dim_col B\""], ["proof (prove)\nusing this:\n  (A1, A2, A3, A4) = split_block A (dim_row A div 2) (dim_col A div 2)\n  (B1, B2, B3, B4) = split_block B (dim_col A div 2) (dim_col B div 2)\n  \\<not> strassen_too_small A B\n  Ai \\<in> {A1, A2, A3, A4}\n  Bi \\<in> {B1, B2, B3, B4}\n  \\<not> dim_row A < 2\n\ngoal (1 subgoal):\n 1. dim_row Ai < dim_row A &&&\n    dim_col Ai \\<le> dim_col A &&& dim_col Bi \\<le> dim_col B", "unfolding split_block_def Let_def"], ["proof (prove)\nusing this:\n  (A1, A2, A3, A4) =\n  (mat (dim_row A div 2) (dim_col A div 2) (($$) A),\n   mat (dim_row A div 2) (dim_col A - dim_col A div 2)\n    (\\<lambda>(i, j). A $$ (i, j + dim_col A div 2)),\n   mat (dim_row A - dim_row A div 2) (dim_col A div 2)\n    (\\<lambda>(i, j). A $$ (i + dim_row A div 2, j)),\n   mat (dim_row A - dim_row A div 2) (dim_col A - dim_col A div 2)\n    (\\<lambda>(i, j). A $$ (i + dim_row A div 2, j + dim_col A div 2)))\n  (B1, B2, B3, B4) =\n  (mat (dim_col A div 2) (dim_col B div 2) (($$) B),\n   mat (dim_col A div 2) (dim_col B - dim_col B div 2)\n    (\\<lambda>(i, j). B $$ (i, j + dim_col B div 2)),\n   mat (dim_row B - dim_col A div 2) (dim_col B div 2)\n    (\\<lambda>(i, j). B $$ (i + dim_col A div 2, j)),\n   mat (dim_row B - dim_col A div 2) (dim_col B - dim_col B div 2)\n    (\\<lambda>(i, j). B $$ (i + dim_col A div 2, j + dim_col B div 2)))\n  \\<not> strassen_too_small A B\n  Ai \\<in> {A1, A2, A3, A4}\n  Bi \\<in> {B1, B2, B3, B4}\n  \\<not> dim_row A < 2\n\ngoal (1 subgoal):\n 1. dim_row Ai < dim_row A &&&\n    dim_col Ai \\<le> dim_col A &&& dim_col Bi \\<le> dim_col B", "by auto"], ["proof (state)\nthis:\n  dim_row Ai < dim_row A\n  dim_col Ai \\<le> dim_col A\n  dim_col Bi \\<le> dim_col B\n\ngoal (7 subgoals):\n 1. strassen_measure (A1, B4) < strassen_measure (A, B)\n 2. strassen_measure (A1, B2) < strassen_measure (A, B)\n 3. strassen_measure (A2, B4) < strassen_measure (A, B)\n 4. strassen_measure (A3, B2) < strassen_measure (A, B)\n 5. strassen_measure (A4, B1) < strassen_measure (A, B)\n 6. strassen_measure (A4, B3) < strassen_measure (A, B)\n 7. strassen_measure (A4, B4) < strassen_measure (A, B)", "hence \"strassen_measure (Ai,Bi) < strassen_measure (A,B)\""], ["proof (prove)\nusing this:\n  dim_row Ai < dim_row A\n  dim_col Ai \\<le> dim_col A\n  dim_col Bi \\<le> dim_col B\n\ngoal (1 subgoal):\n 1. strassen_measure (Ai, Bi) < strassen_measure (A, B)", "unfolding strassen_measure_def split"], ["proof (prove)\nusing this:\n  dim_row Ai < dim_row A\n  dim_col Ai \\<le> dim_col A\n  dim_col Bi \\<le> dim_col B\n\ngoal (1 subgoal):\n 1. dim_row Ai + dim_col Ai + dim_col Bi +\n    (dim_row Ai + dim_col Ai + dim_col Bi) +\n    (if strassen_even Ai Bi then 0 else 1)\n    < dim_row A + dim_col A + dim_col B +\n      (dim_row A + dim_col A + dim_col B) +\n      (if strassen_even A B then 0 else 1)", "by auto"], ["proof (state)\nthis:\n  strassen_measure (Ai, Bi) < strassen_measure (A, B)\n\ngoal (7 subgoals):\n 1. strassen_measure (A1, B4) < strassen_measure (A, B)\n 2. strassen_measure (A1, B2) < strassen_measure (A, B)\n 3. strassen_measure (A2, B4) < strassen_measure (A, B)\n 4. strassen_measure (A3, B2) < strassen_measure (A, B)\n 5. strassen_measure (A4, B1) < strassen_measure (A, B)\n 6. strassen_measure (A4, B3) < strassen_measure (A, B)\n 7. strassen_measure (A4, B4) < strassen_measure (A, B)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?Ai2 \\<in> {A1, A2, A3, A4}; ?Bi2 \\<in> {B1, B2, B3, B4}\\<rbrakk>\n  \\<Longrightarrow> strassen_measure (?Ai2, ?Bi2) < strassen_measure (A, B)\n\ngoal (7 subgoals):\n 1. strassen_measure (A1, B4) < strassen_measure (A, B)\n 2. strassen_measure (A1, B2) < strassen_measure (A, B)\n 3. strassen_measure (A2, B4) < strassen_measure (A, B)\n 4. strassen_measure (A3, B2) < strassen_measure (A, B)\n 5. strassen_measure (A4, B1) < strassen_measure (A, B)\n 6. strassen_measure (A4, B3) < strassen_measure (A, B)\n 7. strassen_measure (A4, B4) < strassen_measure (A, B)", "thus\n    \"strassen_measure (A1,B2) < strassen_measure (A,B)\"\n    \"strassen_measure (A1,B4) < strassen_measure (A,B)\"\n    \"strassen_measure (A2,B4) < strassen_measure (A,B)\"\n    \"strassen_measure (A3,B2) < strassen_measure (A,B)\"\n    \"strassen_measure (A4,B1) < strassen_measure (A,B)\"\n    \"strassen_measure (A4,B3) < strassen_measure (A,B)\"\n    \"strassen_measure (A4,B4) < strassen_measure (A,B)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?Ai2 \\<in> {A1, A2, A3, A4}; ?Bi2 \\<in> {B1, B2, B3, B4}\\<rbrakk>\n  \\<Longrightarrow> strassen_measure (?Ai2, ?Bi2) < strassen_measure (A, B)\n\ngoal (1 subgoal):\n 1. (strassen_measure (A1, B2) < strassen_measure (A, B) &&&\n     strassen_measure (A1, B4) < strassen_measure (A, B) &&&\n     strassen_measure (A2, B4) < strassen_measure (A, B)) &&&\n    (strassen_measure (A3, B2) < strassen_measure (A, B) &&&\n     strassen_measure (A4, B1) < strassen_measure (A, B)) &&&\n    strassen_measure (A4, B3) < strassen_measure (A, B) &&&\n    strassen_measure (A4, B4) < strassen_measure (A, B)", "by auto"], ["proof (state)\nthis:\n  strassen_measure (A1, B2) < strassen_measure (A, B)\n  strassen_measure (A1, B4) < strassen_measure (A, B)\n  strassen_measure (A2, B4) < strassen_measure (A, B)\n  strassen_measure (A3, B2) < strassen_measure (A, B)\n  strassen_measure (A4, B1) < strassen_measure (A, B)\n  strassen_measure (A4, B3) < strassen_measure (A, B)\n  strassen_measure (A4, B4) < strassen_measure (A, B)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma strassen_measure_odd: assumes \"(A1, A2, A3, A4) = split_block A ((dim_row A div 2) * 2) ((dim_col A div 2) * 2)\"  \n  and \"(B1, B2, B3, B4) = split_block B ((dim_col A div 2) * 2) ((dim_col B div 2) * 2)\"\n  and odd: \"\\<not> strassen_even A B\"\n  shows \"strassen_measure (A1,B1) < strassen_measure (A,B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. strassen_measure (A1, B1) < strassen_measure (A, B)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. strassen_measure (A1, B1) < strassen_measure (A, B)", "from assms"], ["proof (chain)\npicking this:\n  (A1, A2, A3, A4) =\n  split_block A (dim_row A div 2 * 2) (dim_col A div 2 * 2)\n  (B1, B2, B3, B4) =\n  split_block B (dim_col A div 2 * 2) (dim_col B div 2 * 2)\n  \\<not> strassen_even A B", "have Ar:\n    \"dim_row A1 < dim_row A \\<or> dim_row A1 = dim_row A \\<and> even (dim_row A)\""], ["proof (prove)\nusing this:\n  (A1, A2, A3, A4) =\n  split_block A (dim_row A div 2 * 2) (dim_col A div 2 * 2)\n  (B1, B2, B3, B4) =\n  split_block B (dim_col A div 2 * 2) (dim_col B div 2 * 2)\n  \\<not> strassen_even A B\n\ngoal (1 subgoal):\n 1. dim_row A1 < dim_row A \\<or>\n    dim_row A1 = dim_row A \\<and> even (dim_row A)", "unfolding split_block_def Let_def"], ["proof (prove)\nusing this:\n  (A1, A2, A3, A4) =\n  (mat (dim_row A div 2 * 2) (dim_col A div 2 * 2) (($$) A),\n   mat (dim_row A div 2 * 2) (dim_col A - dim_col A div 2 * 2)\n    (\\<lambda>(i, j). A $$ (i, j + dim_col A div 2 * 2)),\n   mat (dim_row A - dim_row A div 2 * 2) (dim_col A div 2 * 2)\n    (\\<lambda>(i, j). A $$ (i + dim_row A div 2 * 2, j)),\n   mat (dim_row A - dim_row A div 2 * 2) (dim_col A - dim_col A div 2 * 2)\n    (\\<lambda>(i, j).\n        A $$ (i + dim_row A div 2 * 2, j + dim_col A div 2 * 2)))\n  (B1, B2, B3, B4) =\n  (mat (dim_col A div 2 * 2) (dim_col B div 2 * 2) (($$) B),\n   mat (dim_col A div 2 * 2) (dim_col B - dim_col B div 2 * 2)\n    (\\<lambda>(i, j). B $$ (i, j + dim_col B div 2 * 2)),\n   mat (dim_row B - dim_col A div 2 * 2) (dim_col B div 2 * 2)\n    (\\<lambda>(i, j). B $$ (i + dim_col A div 2 * 2, j)),\n   mat (dim_row B - dim_col A div 2 * 2) (dim_col B - dim_col B div 2 * 2)\n    (\\<lambda>(i, j).\n        B $$ (i + dim_col A div 2 * 2, j + dim_col B div 2 * 2)))\n  \\<not> strassen_even A B\n\ngoal (1 subgoal):\n 1. dim_row A1 < dim_row A \\<or>\n    dim_row A1 = dim_row A \\<and> even (dim_row A)", "by auto presburger"], ["proof (state)\nthis:\n  dim_row A1 < dim_row A \\<or>\n  dim_row A1 = dim_row A \\<and> even (dim_row A)\n\ngoal (1 subgoal):\n 1. strassen_measure (A1, B1) < strassen_measure (A, B)", "from assms"], ["proof (chain)\npicking this:\n  (A1, A2, A3, A4) =\n  split_block A (dim_row A div 2 * 2) (dim_col A div 2 * 2)\n  (B1, B2, B3, B4) =\n  split_block B (dim_col A div 2 * 2) (dim_col B div 2 * 2)\n  \\<not> strassen_even A B", "have Ac:\n    \"dim_col A1 < dim_col A \\<or> dim_col A1 = dim_col A \\<and> even (dim_col A)\""], ["proof (prove)\nusing this:\n  (A1, A2, A3, A4) =\n  split_block A (dim_row A div 2 * 2) (dim_col A div 2 * 2)\n  (B1, B2, B3, B4) =\n  split_block B (dim_col A div 2 * 2) (dim_col B div 2 * 2)\n  \\<not> strassen_even A B\n\ngoal (1 subgoal):\n 1. dim_col A1 < dim_col A \\<or>\n    dim_col A1 = dim_col A \\<and> even (dim_col A)", "unfolding split_block_def Let_def"], ["proof (prove)\nusing this:\n  (A1, A2, A3, A4) =\n  (mat (dim_row A div 2 * 2) (dim_col A div 2 * 2) (($$) A),\n   mat (dim_row A div 2 * 2) (dim_col A - dim_col A div 2 * 2)\n    (\\<lambda>(i, j). A $$ (i, j + dim_col A div 2 * 2)),\n   mat (dim_row A - dim_row A div 2 * 2) (dim_col A div 2 * 2)\n    (\\<lambda>(i, j). A $$ (i + dim_row A div 2 * 2, j)),\n   mat (dim_row A - dim_row A div 2 * 2) (dim_col A - dim_col A div 2 * 2)\n    (\\<lambda>(i, j).\n        A $$ (i + dim_row A div 2 * 2, j + dim_col A div 2 * 2)))\n  (B1, B2, B3, B4) =\n  (mat (dim_col A div 2 * 2) (dim_col B div 2 * 2) (($$) B),\n   mat (dim_col A div 2 * 2) (dim_col B - dim_col B div 2 * 2)\n    (\\<lambda>(i, j). B $$ (i, j + dim_col B div 2 * 2)),\n   mat (dim_row B - dim_col A div 2 * 2) (dim_col B div 2 * 2)\n    (\\<lambda>(i, j). B $$ (i + dim_col A div 2 * 2, j)),\n   mat (dim_row B - dim_col A div 2 * 2) (dim_col B - dim_col B div 2 * 2)\n    (\\<lambda>(i, j).\n        B $$ (i + dim_col A div 2 * 2, j + dim_col B div 2 * 2)))\n  \\<not> strassen_even A B\n\ngoal (1 subgoal):\n 1. dim_col A1 < dim_col A \\<or>\n    dim_col A1 = dim_col A \\<and> even (dim_col A)", "by auto presburger"], ["proof (state)\nthis:\n  dim_col A1 < dim_col A \\<or>\n  dim_col A1 = dim_col A \\<and> even (dim_col A)\n\ngoal (1 subgoal):\n 1. strassen_measure (A1, B1) < strassen_measure (A, B)", "from assms"], ["proof (chain)\npicking this:\n  (A1, A2, A3, A4) =\n  split_block A (dim_row A div 2 * 2) (dim_col A div 2 * 2)\n  (B1, B2, B3, B4) =\n  split_block B (dim_col A div 2 * 2) (dim_col B div 2 * 2)\n  \\<not> strassen_even A B", "have Bc:\n    \"dim_col B1 < dim_col B \\<or> dim_col B1 = dim_col B \\<and> even (dim_col B)\""], ["proof (prove)\nusing this:\n  (A1, A2, A3, A4) =\n  split_block A (dim_row A div 2 * 2) (dim_col A div 2 * 2)\n  (B1, B2, B3, B4) =\n  split_block B (dim_col A div 2 * 2) (dim_col B div 2 * 2)\n  \\<not> strassen_even A B\n\ngoal (1 subgoal):\n 1. dim_col B1 < dim_col B \\<or>\n    dim_col B1 = dim_col B \\<and> even (dim_col B)", "unfolding split_block_def Let_def"], ["proof (prove)\nusing this:\n  (A1, A2, A3, A4) =\n  (mat (dim_row A div 2 * 2) (dim_col A div 2 * 2) (($$) A),\n   mat (dim_row A div 2 * 2) (dim_col A - dim_col A div 2 * 2)\n    (\\<lambda>(i, j). A $$ (i, j + dim_col A div 2 * 2)),\n   mat (dim_row A - dim_row A div 2 * 2) (dim_col A div 2 * 2)\n    (\\<lambda>(i, j). A $$ (i + dim_row A div 2 * 2, j)),\n   mat (dim_row A - dim_row A div 2 * 2) (dim_col A - dim_col A div 2 * 2)\n    (\\<lambda>(i, j).\n        A $$ (i + dim_row A div 2 * 2, j + dim_col A div 2 * 2)))\n  (B1, B2, B3, B4) =\n  (mat (dim_col A div 2 * 2) (dim_col B div 2 * 2) (($$) B),\n   mat (dim_col A div 2 * 2) (dim_col B - dim_col B div 2 * 2)\n    (\\<lambda>(i, j). B $$ (i, j + dim_col B div 2 * 2)),\n   mat (dim_row B - dim_col A div 2 * 2) (dim_col B div 2 * 2)\n    (\\<lambda>(i, j). B $$ (i + dim_col A div 2 * 2, j)),\n   mat (dim_row B - dim_col A div 2 * 2) (dim_col B - dim_col B div 2 * 2)\n    (\\<lambda>(i, j).\n        B $$ (i + dim_col A div 2 * 2, j + dim_col B div 2 * 2)))\n  \\<not> strassen_even A B\n\ngoal (1 subgoal):\n 1. dim_col B1 < dim_col B \\<or>\n    dim_col B1 = dim_col B \\<and> even (dim_col B)", "by auto presburger"], ["proof (state)\nthis:\n  dim_col B1 < dim_col B \\<or>\n  dim_col B1 = dim_col B \\<and> even (dim_col B)\n\ngoal (1 subgoal):\n 1. strassen_measure (A1, B1) < strassen_measure (A, B)", "from Ar Ac Bc odd"], ["proof (chain)\npicking this:\n  dim_row A1 < dim_row A \\<or>\n  dim_row A1 = dim_row A \\<and> even (dim_row A)\n  dim_col A1 < dim_col A \\<or>\n  dim_col A1 = dim_col A \\<and> even (dim_col A)\n  dim_col B1 < dim_col B \\<or>\n  dim_col B1 = dim_col B \\<and> even (dim_col B)\n  \\<not> strassen_even A B", "show ?thesis"], ["proof (prove)\nusing this:\n  dim_row A1 < dim_row A \\<or>\n  dim_row A1 = dim_row A \\<and> even (dim_row A)\n  dim_col A1 < dim_col A \\<or>\n  dim_col A1 = dim_col A \\<and> even (dim_col A)\n  dim_col B1 < dim_col B \\<or>\n  dim_col B1 = dim_col B \\<and> even (dim_col B)\n  \\<not> strassen_even A B\n\ngoal (1 subgoal):\n 1. strassen_measure (A1, B1) < strassen_measure (A, B)", "unfolding strassen_measure_def strassen_even_def split"], ["proof (prove)\nusing this:\n  dim_row A1 < dim_row A \\<or>\n  dim_row A1 = dim_row A \\<and> even (dim_row A)\n  dim_col A1 < dim_col A \\<or>\n  dim_col A1 = dim_col A \\<and> even (dim_col A)\n  dim_col B1 < dim_col B \\<or>\n  dim_col B1 = dim_col B \\<and> even (dim_col B)\n  \\<not> (even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B))\n\ngoal (1 subgoal):\n 1. dim_row A1 + dim_col A1 + dim_col B1 +\n    (dim_row A1 + dim_col A1 + dim_col B1) +\n    (if even (dim_row A1) \\<and> even (dim_col A1) \\<and> even (dim_col B1)\n     then 0 else 1)\n    < dim_row A + dim_col A + dim_col B +\n      (dim_row A + dim_col A + dim_col B) +\n      (if even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B)\n       then 0 else 1)", "by (auto split: if_splits)"], ["proof (state)\nthis:\n  strassen_measure (A1, B1) < strassen_measure (A, B)\n\ngoal:\nNo subgoals!", "qed"], ["", "termination"], ["proof (prove)\ngoal (1 subgoal):\n 1. All strassen_mat_mult_dom", "by (relation \"measure strassen_measure\", \n   auto elim: strassen_measure_div_2 strassen_measure_odd)"], ["", "lemma strassen_mat_mult: \n  \"dim_col A = dim_row B \\<Longrightarrow> strassen_mat_mult A B = A * B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_col A = dim_row B \\<Longrightarrow> strassen_mat_mult A B = A * B", "proof (induct A B rule: strassen_mat_mult.induct)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A B.\n       \\<lbrakk>\\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm\n                   ye.\n                   \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n                    \\<not> strassen_too_small A B; strassen_even A B;\n                    xc = x div 2; xd = xa div 2; xe = xb div 2;\n                    xf = split_block A xc xd; (xg, y) = xf; (xh, ya) = y;\n                    (xi, yb) = ya; xj = split_block B xd xe; (xk, yc) = xj;\n                    (xl, yd) = yc; (xm, ye) = yd;\n                    dim_col (xg + yb) = dim_row (xk + ye)\\<rbrakk>\n                   \\<Longrightarrow> strassen_mat_mult (xg + yb) (xk + ye) =\n                                     (xg + yb) * (xk + ye);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            dim_col (xi + yb) = dim_row xk\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult (xi + yb) xk =\n                             (xi + yb) * xk;\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            dim_col xg = dim_row (xl - ye)\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult xg (xl - ye) =\n                             xg * (xl - ye);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo xp.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            xp = strassen_mat_mult xg (xl - ye);\n            dim_col yb = dim_row (xm - xk)\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult yb (xm - xk) =\n                             yb * (xm - xk);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo xp xq.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            xp = strassen_mat_mult xg (xl - ye);\n            xq = strassen_mat_mult yb (xm - xk);\n            dim_col (xg + xh) = dim_row ye\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult (xg + xh) ye =\n                             (xg + xh) * ye;\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo xp xq xr.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            xp = strassen_mat_mult xg (xl - ye);\n            xq = strassen_mat_mult yb (xm - xk);\n            xr = strassen_mat_mult (xg + xh) ye;\n            dim_col (xi - xg) = dim_row (xk + xl)\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult (xi - xg) (xk + xl) =\n                             (xi - xg) * (xk + xl);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo xp xq xr xs.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            xp = strassen_mat_mult xg (xl - ye);\n            xq = strassen_mat_mult yb (xm - xk);\n            xr = strassen_mat_mult (xg + xh) ye;\n            xs = strassen_mat_mult (xi - xg) (xk + xl);\n            dim_col (xh - yb) = dim_row (xm + ye)\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult (xh - yb) (xm + ye) =\n                             (xh - yb) * (xm + ye);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; \\<not> strassen_even A B;\n            xc = x div 2 * 2; xd = xa div 2 * 2; xe = xb div 2 * 2;\n            xf = split_block A xc xd; (xg, y) = xf; (xh, ya) = y;\n            (xi, yb) = ya; xj = split_block B xd xe; (xk, yc) = xj;\n            (xl, yd) = yc; (xm, ye) = yd; dim_col xg = dim_row xk\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult xg xk = xg * xk;\n        dim_col A = dim_row B\\<rbrakk>\n       \\<Longrightarrow> strassen_mat_mult A B = A * B", "case (1 A B)"], ["proof (state)\nthis:\n  \\<lbrakk>?x = dim_row A; ?xa = dim_col A; ?xb = dim_col B;\n   \\<not> strassen_too_small A B; strassen_even A B; ?xc = ?x div 2;\n   ?xd = ?xa div 2; ?xe = ?xb div 2; ?xf = split_block A ?xc ?xd;\n   (?xg, ?y) = ?xf; (?xh, ?ya) = ?y; (?xi, ?yb) = ?ya;\n   ?xj = split_block B ?xd ?xe; (?xk, ?yc) = ?xj; (?xl, ?yd) = ?yc;\n   (?xm, ?ye) = ?yd; dim_col (?xg + ?yb) = dim_row (?xk + ?ye)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (?xg + ?yb) (?xk + ?ye) =\n                    (?xg + ?yb) * (?xk + ?ye)\n  \\<lbrakk>?x = dim_row A; ?xa = dim_col A; ?xb = dim_col B;\n   \\<not> strassen_too_small A B; strassen_even A B; ?xc = ?x div 2;\n   ?xd = ?xa div 2; ?xe = ?xb div 2; ?xf = split_block A ?xc ?xd;\n   (?xg, ?y) = ?xf; (?xh, ?ya) = ?y; (?xi, ?yb) = ?ya;\n   ?xj = split_block B ?xd ?xe; (?xk, ?yc) = ?xj; (?xl, ?yd) = ?yc;\n   (?xm, ?ye) = ?yd; ?xn = strassen_mat_mult (?xg + ?yb) (?xk + ?ye);\n   dim_col (?xi + ?yb) = dim_row ?xk\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (?xi + ?yb) ?xk = (?xi + ?yb) * ?xk\n  \\<lbrakk>?x = dim_row A; ?xa = dim_col A; ?xb = dim_col B;\n   \\<not> strassen_too_small A B; strassen_even A B; ?xc = ?x div 2;\n   ?xd = ?xa div 2; ?xe = ?xb div 2; ?xf = split_block A ?xc ?xd;\n   (?xg, ?y) = ?xf; (?xh, ?ya) = ?y; (?xi, ?yb) = ?ya;\n   ?xj = split_block B ?xd ?xe; (?xk, ?yc) = ?xj; (?xl, ?yd) = ?yc;\n   (?xm, ?ye) = ?yd; ?xn = strassen_mat_mult (?xg + ?yb) (?xk + ?ye);\n   ?xo = strassen_mat_mult (?xi + ?yb) ?xk;\n   dim_col ?xg = dim_row (?xl - ?ye)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult ?xg (?xl - ?ye) = ?xg * (?xl - ?ye)\n  \\<lbrakk>?x = dim_row A; ?xa = dim_col A; ?xb = dim_col B;\n   \\<not> strassen_too_small A B; strassen_even A B; ?xc = ?x div 2;\n   ?xd = ?xa div 2; ?xe = ?xb div 2; ?xf = split_block A ?xc ?xd;\n   (?xg, ?y) = ?xf; (?xh, ?ya) = ?y; (?xi, ?yb) = ?ya;\n   ?xj = split_block B ?xd ?xe; (?xk, ?yc) = ?xj; (?xl, ?yd) = ?yc;\n   (?xm, ?ye) = ?yd; ?xn = strassen_mat_mult (?xg + ?yb) (?xk + ?ye);\n   ?xo = strassen_mat_mult (?xi + ?yb) ?xk;\n   ?xp = strassen_mat_mult ?xg (?xl - ?ye);\n   dim_col ?yb = dim_row (?xm - ?xk)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult ?yb (?xm - ?xk) = ?yb * (?xm - ?xk)\n  \\<lbrakk>?x = dim_row A; ?xa = dim_col A; ?xb = dim_col B;\n   \\<not> strassen_too_small A B; strassen_even A B; ?xc = ?x div 2;\n   ?xd = ?xa div 2; ?xe = ?xb div 2; ?xf = split_block A ?xc ?xd;\n   (?xg, ?y) = ?xf; (?xh, ?ya) = ?y; (?xi, ?yb) = ?ya;\n   ?xj = split_block B ?xd ?xe; (?xk, ?yc) = ?xj; (?xl, ?yd) = ?yc;\n   (?xm, ?ye) = ?yd; ?xn = strassen_mat_mult (?xg + ?yb) (?xk + ?ye);\n   ?xo = strassen_mat_mult (?xi + ?yb) ?xk;\n   ?xp = strassen_mat_mult ?xg (?xl - ?ye);\n   ?xq = strassen_mat_mult ?yb (?xm - ?xk);\n   dim_col (?xg + ?xh) = dim_row ?ye\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (?xg + ?xh) ?ye = (?xg + ?xh) * ?ye\n  \\<lbrakk>?x = dim_row A; ?xa = dim_col A; ?xb = dim_col B;\n   \\<not> strassen_too_small A B; strassen_even A B; ?xc = ?x div 2;\n   ?xd = ?xa div 2; ?xe = ?xb div 2; ?xf = split_block A ?xc ?xd;\n   (?xg, ?y) = ?xf; (?xh, ?ya) = ?y; (?xi, ?yb) = ?ya;\n   ?xj = split_block B ?xd ?xe; (?xk, ?yc) = ?xj; (?xl, ?yd) = ?yc;\n   (?xm, ?ye) = ?yd; ?xn = strassen_mat_mult (?xg + ?yb) (?xk + ?ye);\n   ?xo = strassen_mat_mult (?xi + ?yb) ?xk;\n   ?xp = strassen_mat_mult ?xg (?xl - ?ye);\n   ?xq = strassen_mat_mult ?yb (?xm - ?xk);\n   ?xr = strassen_mat_mult (?xg + ?xh) ?ye;\n   dim_col (?xi - ?xg) = dim_row (?xk + ?xl)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (?xi - ?xg) (?xk + ?xl) =\n                    (?xi - ?xg) * (?xk + ?xl)\n  \\<lbrakk>?x = dim_row A; ?xa = dim_col A; ?xb = dim_col B;\n   \\<not> strassen_too_small A B; strassen_even A B; ?xc = ?x div 2;\n   ?xd = ?xa div 2; ?xe = ?xb div 2; ?xf = split_block A ?xc ?xd;\n   (?xg, ?y) = ?xf; (?xh, ?ya) = ?y; (?xi, ?yb) = ?ya;\n   ?xj = split_block B ?xd ?xe; (?xk, ?yc) = ?xj; (?xl, ?yd) = ?yc;\n   (?xm, ?ye) = ?yd; ?xn = strassen_mat_mult (?xg + ?yb) (?xk + ?ye);\n   ?xo = strassen_mat_mult (?xi + ?yb) ?xk;\n   ?xp = strassen_mat_mult ?xg (?xl - ?ye);\n   ?xq = strassen_mat_mult ?yb (?xm - ?xk);\n   ?xr = strassen_mat_mult (?xg + ?xh) ?ye;\n   ?xs = strassen_mat_mult (?xi - ?xg) (?xk + ?xl);\n   dim_col (?xh - ?yb) = dim_row (?xm + ?ye)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (?xh - ?yb) (?xm + ?ye) =\n                    (?xh - ?yb) * (?xm + ?ye)\n  \\<lbrakk>?x = dim_row A; ?xa = dim_col A; ?xb = dim_col B;\n   \\<not> strassen_too_small A B; \\<not> strassen_even A B;\n   ?xc = ?x div 2 * 2; ?xd = ?xa div 2 * 2; ?xe = ?xb div 2 * 2;\n   ?xf = split_block A ?xc ?xd; (?xg, ?y) = ?xf; (?xh, ?ya) = ?y;\n   (?xi, ?yb) = ?ya; ?xj = split_block B ?xd ?xe; (?xk, ?yc) = ?xj;\n   (?xl, ?yd) = ?yc; (?xm, ?ye) = ?yd; dim_col ?xg = dim_row ?xk\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult ?xg ?xk = ?xg * ?xk\n  dim_col A = dim_row B\n\ngoal (1 subgoal):\n 1. \\<And>A B.\n       \\<lbrakk>\\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm\n                   ye.\n                   \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n                    \\<not> strassen_too_small A B; strassen_even A B;\n                    xc = x div 2; xd = xa div 2; xe = xb div 2;\n                    xf = split_block A xc xd; (xg, y) = xf; (xh, ya) = y;\n                    (xi, yb) = ya; xj = split_block B xd xe; (xk, yc) = xj;\n                    (xl, yd) = yc; (xm, ye) = yd;\n                    dim_col (xg + yb) = dim_row (xk + ye)\\<rbrakk>\n                   \\<Longrightarrow> strassen_mat_mult (xg + yb) (xk + ye) =\n                                     (xg + yb) * (xk + ye);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            dim_col (xi + yb) = dim_row xk\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult (xi + yb) xk =\n                             (xi + yb) * xk;\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            dim_col xg = dim_row (xl - ye)\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult xg (xl - ye) =\n                             xg * (xl - ye);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo xp.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            xp = strassen_mat_mult xg (xl - ye);\n            dim_col yb = dim_row (xm - xk)\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult yb (xm - xk) =\n                             yb * (xm - xk);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo xp xq.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            xp = strassen_mat_mult xg (xl - ye);\n            xq = strassen_mat_mult yb (xm - xk);\n            dim_col (xg + xh) = dim_row ye\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult (xg + xh) ye =\n                             (xg + xh) * ye;\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo xp xq xr.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            xp = strassen_mat_mult xg (xl - ye);\n            xq = strassen_mat_mult yb (xm - xk);\n            xr = strassen_mat_mult (xg + xh) ye;\n            dim_col (xi - xg) = dim_row (xk + xl)\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult (xi - xg) (xk + xl) =\n                             (xi - xg) * (xk + xl);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo xp xq xr xs.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            xp = strassen_mat_mult xg (xl - ye);\n            xq = strassen_mat_mult yb (xm - xk);\n            xr = strassen_mat_mult (xg + xh) ye;\n            xs = strassen_mat_mult (xi - xg) (xk + xl);\n            dim_col (xh - yb) = dim_row (xm + ye)\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult (xh - yb) (xm + ye) =\n                             (xh - yb) * (xm + ye);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; \\<not> strassen_even A B;\n            xc = x div 2 * 2; xd = xa div 2 * 2; xe = xb div 2 * 2;\n            xf = split_block A xc xd; (xg, y) = xf; (xh, ya) = y;\n            (xi, yb) = ya; xj = split_block B xd xe; (xk, yc) = xj;\n            (xl, yd) = yc; (xm, ye) = yd; dim_col xg = dim_row xk\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult xg xk = xg * xk;\n        dim_col A = dim_row B\\<rbrakk>\n       \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?nr = \"dim_row A\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A B.\n       \\<lbrakk>\\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm\n                   ye.\n                   \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n                    \\<not> strassen_too_small A B; strassen_even A B;\n                    xc = x div 2; xd = xa div 2; xe = xb div 2;\n                    xf = split_block A xc xd; (xg, y) = xf; (xh, ya) = y;\n                    (xi, yb) = ya; xj = split_block B xd xe; (xk, yc) = xj;\n                    (xl, yd) = yc; (xm, ye) = yd;\n                    dim_col (xg + yb) = dim_row (xk + ye)\\<rbrakk>\n                   \\<Longrightarrow> strassen_mat_mult (xg + yb) (xk + ye) =\n                                     (xg + yb) * (xk + ye);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            dim_col (xi + yb) = dim_row xk\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult (xi + yb) xk =\n                             (xi + yb) * xk;\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            dim_col xg = dim_row (xl - ye)\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult xg (xl - ye) =\n                             xg * (xl - ye);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo xp.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            xp = strassen_mat_mult xg (xl - ye);\n            dim_col yb = dim_row (xm - xk)\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult yb (xm - xk) =\n                             yb * (xm - xk);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo xp xq.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            xp = strassen_mat_mult xg (xl - ye);\n            xq = strassen_mat_mult yb (xm - xk);\n            dim_col (xg + xh) = dim_row ye\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult (xg + xh) ye =\n                             (xg + xh) * ye;\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo xp xq xr.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            xp = strassen_mat_mult xg (xl - ye);\n            xq = strassen_mat_mult yb (xm - xk);\n            xr = strassen_mat_mult (xg + xh) ye;\n            dim_col (xi - xg) = dim_row (xk + xl)\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult (xi - xg) (xk + xl) =\n                             (xi - xg) * (xk + xl);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo xp xq xr xs.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            xp = strassen_mat_mult xg (xl - ye);\n            xq = strassen_mat_mult yb (xm - xk);\n            xr = strassen_mat_mult (xg + xh) ye;\n            xs = strassen_mat_mult (xi - xg) (xk + xl);\n            dim_col (xh - yb) = dim_row (xm + ye)\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult (xh - yb) (xm + ye) =\n                             (xh - yb) * (xm + ye);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; \\<not> strassen_even A B;\n            xc = x div 2 * 2; xd = xa div 2 * 2; xe = xb div 2 * 2;\n            xf = split_block A xc xd; (xg, y) = xf; (xh, ya) = y;\n            (xi, yb) = ya; xj = split_block B xd xe; (xk, yc) = xj;\n            (xl, yd) = yc; (xm, ye) = yd; dim_col xg = dim_row xk\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult xg xk = xg * xk;\n        dim_col A = dim_row B\\<rbrakk>\n       \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?nc = \"dim_col B\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A B.\n       \\<lbrakk>\\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm\n                   ye.\n                   \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n                    \\<not> strassen_too_small A B; strassen_even A B;\n                    xc = x div 2; xd = xa div 2; xe = xb div 2;\n                    xf = split_block A xc xd; (xg, y) = xf; (xh, ya) = y;\n                    (xi, yb) = ya; xj = split_block B xd xe; (xk, yc) = xj;\n                    (xl, yd) = yc; (xm, ye) = yd;\n                    dim_col (xg + yb) = dim_row (xk + ye)\\<rbrakk>\n                   \\<Longrightarrow> strassen_mat_mult (xg + yb) (xk + ye) =\n                                     (xg + yb) * (xk + ye);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            dim_col (xi + yb) = dim_row xk\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult (xi + yb) xk =\n                             (xi + yb) * xk;\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            dim_col xg = dim_row (xl - ye)\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult xg (xl - ye) =\n                             xg * (xl - ye);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo xp.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            xp = strassen_mat_mult xg (xl - ye);\n            dim_col yb = dim_row (xm - xk)\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult yb (xm - xk) =\n                             yb * (xm - xk);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo xp xq.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            xp = strassen_mat_mult xg (xl - ye);\n            xq = strassen_mat_mult yb (xm - xk);\n            dim_col (xg + xh) = dim_row ye\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult (xg + xh) ye =\n                             (xg + xh) * ye;\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo xp xq xr.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            xp = strassen_mat_mult xg (xl - ye);\n            xq = strassen_mat_mult yb (xm - xk);\n            xr = strassen_mat_mult (xg + xh) ye;\n            dim_col (xi - xg) = dim_row (xk + xl)\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult (xi - xg) (xk + xl) =\n                             (xi - xg) * (xk + xl);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo xp xq xr xs.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            xp = strassen_mat_mult xg (xl - ye);\n            xq = strassen_mat_mult yb (xm - xk);\n            xr = strassen_mat_mult (xg + xh) ye;\n            xs = strassen_mat_mult (xi - xg) (xk + xl);\n            dim_col (xh - yb) = dim_row (xm + ye)\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult (xh - yb) (xm + ye) =\n                             (xh - yb) * (xm + ye);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; \\<not> strassen_even A B;\n            xc = x div 2 * 2; xd = xa div 2 * 2; xe = xb div 2 * 2;\n            xf = split_block A xc xd; (xg, y) = xf; (xh, ya) = y;\n            (xi, yb) = ya; xj = split_block B xd xe; (xk, yc) = xj;\n            (xl, yd) = yc; (xm, ye) = yd; dim_col xg = dim_row xk\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult xg xk = xg * xk;\n        dim_col A = dim_row B\\<rbrakk>\n       \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?n = \"dim_col A\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A B.\n       \\<lbrakk>\\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm\n                   ye.\n                   \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n                    \\<not> strassen_too_small A B; strassen_even A B;\n                    xc = x div 2; xd = xa div 2; xe = xb div 2;\n                    xf = split_block A xc xd; (xg, y) = xf; (xh, ya) = y;\n                    (xi, yb) = ya; xj = split_block B xd xe; (xk, yc) = xj;\n                    (xl, yd) = yc; (xm, ye) = yd;\n                    dim_col (xg + yb) = dim_row (xk + ye)\\<rbrakk>\n                   \\<Longrightarrow> strassen_mat_mult (xg + yb) (xk + ye) =\n                                     (xg + yb) * (xk + ye);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            dim_col (xi + yb) = dim_row xk\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult (xi + yb) xk =\n                             (xi + yb) * xk;\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            dim_col xg = dim_row (xl - ye)\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult xg (xl - ye) =\n                             xg * (xl - ye);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo xp.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            xp = strassen_mat_mult xg (xl - ye);\n            dim_col yb = dim_row (xm - xk)\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult yb (xm - xk) =\n                             yb * (xm - xk);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo xp xq.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            xp = strassen_mat_mult xg (xl - ye);\n            xq = strassen_mat_mult yb (xm - xk);\n            dim_col (xg + xh) = dim_row ye\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult (xg + xh) ye =\n                             (xg + xh) * ye;\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo xp xq xr.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            xp = strassen_mat_mult xg (xl - ye);\n            xq = strassen_mat_mult yb (xm - xk);\n            xr = strassen_mat_mult (xg + xh) ye;\n            dim_col (xi - xg) = dim_row (xk + xl)\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult (xi - xg) (xk + xl) =\n                             (xi - xg) * (xk + xl);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye xn\n           xo xp xq xr xs.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; strassen_even A B; xc = x div 2;\n            xd = xa div 2; xe = xb div 2; xf = split_block A xc xd;\n            (xg, y) = xf; (xh, ya) = y; (xi, yb) = ya;\n            xj = split_block B xd xe; (xk, yc) = xj; (xl, yd) = yc;\n            (xm, ye) = yd; xn = strassen_mat_mult (xg + yb) (xk + ye);\n            xo = strassen_mat_mult (xi + yb) xk;\n            xp = strassen_mat_mult xg (xl - ye);\n            xq = strassen_mat_mult yb (xm - xk);\n            xr = strassen_mat_mult (xg + xh) ye;\n            xs = strassen_mat_mult (xi - xg) (xk + xl);\n            dim_col (xh - yb) = dim_row (xm + ye)\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult (xh - yb) (xm + ye) =\n                             (xh - yb) * (xm + ye);\n        \\<And>x xa xb xc xd xe xf xg y xh ya xi yb xj xk yc xl yd xm ye.\n           \\<lbrakk>x = dim_row A; xa = dim_col A; xb = dim_col B;\n            \\<not> strassen_too_small A B; \\<not> strassen_even A B;\n            xc = x div 2 * 2; xd = xa div 2 * 2; xe = xb div 2 * 2;\n            xf = split_block A xc xd; (xg, y) = xf; (xh, ya) = y;\n            (xi, yb) = ya; xj = split_block B xd xe; (xk, yc) = xj;\n            (xl, yd) = yc; (xm, ye) = yd; dim_col xg = dim_row xk\\<rbrakk>\n           \\<Longrightarrow> strassen_mat_mult xg xk = xg * xk;\n        dim_col A = dim_row B\\<rbrakk>\n       \\<Longrightarrow> strassen_mat_mult A B = A * B", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. strassen_mat_mult A B = A * B", "proof (cases \"strassen_too_small A B\")"], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_too_small A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_too_small A B \\<Longrightarrow>\n    strassen_mat_mult A B = A * B", "case False"], ["proof (state)\nthis:\n  \\<not> strassen_too_small A B\n\ngoal (2 subgoals):\n 1. strassen_too_small A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_too_small A B \\<Longrightarrow>\n    strassen_mat_mult A B = A * B", "note large = this"], ["proof (state)\nthis:\n  \\<not> strassen_too_small A B\n\ngoal (2 subgoals):\n 1. strassen_too_small A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_too_small A B \\<Longrightarrow>\n    strassen_mat_mult A B = A * B", "let ?smm = strassen_mat_mult"], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_too_small A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_too_small A B \\<Longrightarrow>\n    strassen_mat_mult A B = A * B", "note IH = 1(1-8)[OF refl refl refl False _ refl refl refl _ refl refl refl _ refl refl refl]"], ["proof (state)\nthis:\n  \\<lbrakk>strassen_even A B;\n   (?xg, ?xh, ?xi, ?yb) = split_block A (dim_row A div 2) (dim_col A div 2);\n   (?xk, ?xl, ?xm, ?ye) = split_block B (dim_col A div 2) (dim_col B div 2);\n   dim_col (?xg + ?yb) = dim_row (?xk + ?ye)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (?xg + ?yb) (?xk + ?ye) =\n                    (?xg + ?yb) * (?xk + ?ye)\n  \\<lbrakk>strassen_even A B;\n   (?xg, ?xh, ?xi, ?yb) = split_block A (dim_row A div 2) (dim_col A div 2);\n   (?xk, ?xl, ?xm, ?ye) = split_block B (dim_col A div 2) (dim_col B div 2);\n   ?xn = strassen_mat_mult (?xg + ?yb) (?xk + ?ye);\n   dim_col (?xi + ?yb) = dim_row ?xk\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (?xi + ?yb) ?xk = (?xi + ?yb) * ?xk\n  \\<lbrakk>strassen_even A B;\n   (?xg, ?xh, ?xi, ?yb) = split_block A (dim_row A div 2) (dim_col A div 2);\n   (?xk, ?xl, ?xm, ?ye) = split_block B (dim_col A div 2) (dim_col B div 2);\n   ?xn = strassen_mat_mult (?xg + ?yb) (?xk + ?ye);\n   ?xo = strassen_mat_mult (?xi + ?yb) ?xk;\n   dim_col ?xg = dim_row (?xl - ?ye)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult ?xg (?xl - ?ye) = ?xg * (?xl - ?ye)\n  \\<lbrakk>strassen_even A B;\n   (?xg, ?xh, ?xi, ?yb) = split_block A (dim_row A div 2) (dim_col A div 2);\n   (?xk, ?xl, ?xm, ?ye) = split_block B (dim_col A div 2) (dim_col B div 2);\n   ?xn = strassen_mat_mult (?xg + ?yb) (?xk + ?ye);\n   ?xo = strassen_mat_mult (?xi + ?yb) ?xk;\n   ?xp = strassen_mat_mult ?xg (?xl - ?ye);\n   dim_col ?yb = dim_row (?xm - ?xk)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult ?yb (?xm - ?xk) = ?yb * (?xm - ?xk)\n  \\<lbrakk>strassen_even A B;\n   (?xg, ?xh, ?xi, ?yb) = split_block A (dim_row A div 2) (dim_col A div 2);\n   (?xk, ?xl, ?xm, ?ye) = split_block B (dim_col A div 2) (dim_col B div 2);\n   ?xn = strassen_mat_mult (?xg + ?yb) (?xk + ?ye);\n   ?xo = strassen_mat_mult (?xi + ?yb) ?xk;\n   ?xp = strassen_mat_mult ?xg (?xl - ?ye);\n   ?xq = strassen_mat_mult ?yb (?xm - ?xk);\n   dim_col (?xg + ?xh) = dim_row ?ye\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (?xg + ?xh) ?ye = (?xg + ?xh) * ?ye\n  \\<lbrakk>strassen_even A B;\n   (?xg, ?xh, ?xi, ?yb) = split_block A (dim_row A div 2) (dim_col A div 2);\n   (?xk, ?xl, ?xm, ?ye) = split_block B (dim_col A div 2) (dim_col B div 2);\n   ?xn = strassen_mat_mult (?xg + ?yb) (?xk + ?ye);\n   ?xo = strassen_mat_mult (?xi + ?yb) ?xk;\n   ?xp = strassen_mat_mult ?xg (?xl - ?ye);\n   ?xq = strassen_mat_mult ?yb (?xm - ?xk);\n   ?xr = strassen_mat_mult (?xg + ?xh) ?ye;\n   dim_col (?xi - ?xg) = dim_row (?xk + ?xl)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (?xi - ?xg) (?xk + ?xl) =\n                    (?xi - ?xg) * (?xk + ?xl)\n  \\<lbrakk>strassen_even A B;\n   (?xg, ?xh, ?xi, ?yb) = split_block A (dim_row A div 2) (dim_col A div 2);\n   (?xk, ?xl, ?xm, ?ye) = split_block B (dim_col A div 2) (dim_col B div 2);\n   ?xn = strassen_mat_mult (?xg + ?yb) (?xk + ?ye);\n   ?xo = strassen_mat_mult (?xi + ?yb) ?xk;\n   ?xp = strassen_mat_mult ?xg (?xl - ?ye);\n   ?xq = strassen_mat_mult ?yb (?xm - ?xk);\n   ?xr = strassen_mat_mult (?xg + ?xh) ?ye;\n   ?xs = strassen_mat_mult (?xi - ?xg) (?xk + ?xl);\n   dim_col (?xh - ?yb) = dim_row (?xm + ?ye)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (?xh - ?yb) (?xm + ?ye) =\n                    (?xh - ?yb) * (?xm + ?ye)\n  \\<lbrakk>\\<not> strassen_even A B;\n   (?xg, ?xh, ?xi, ?yb) =\n   split_block A (dim_row A div 2 * 2) (dim_col A div 2 * 2);\n   (?xk, ?xl, ?xm, ?ye) =\n   split_block B (dim_col A div 2 * 2) (dim_col B div 2 * 2);\n   dim_col ?xg = dim_row ?xk\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult ?xg ?xk = ?xg * ?xk\n\ngoal (2 subgoals):\n 1. strassen_too_small A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_too_small A B \\<Longrightarrow>\n    strassen_mat_mult A B = A * B", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. strassen_mat_mult A B = A * B", "proof (cases \"strassen_even A B\")"], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "case True"], ["proof (state)\nthis:\n  strassen_even A B\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "note even = True[unfolded strassen_even_def]"], ["proof (state)\nthis:\n  even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B)\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?nr2 = \"?nr div 2\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?n2 = \"?n div 2\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?nc2 = \"?nc div 2\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "from even"], ["proof (chain)\npicking this:\n  even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B)", "have nr: \"?nr = ?nr2 + ?nr2\""], ["proof (prove)\nusing this:\n  even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B)\n\ngoal (1 subgoal):\n 1. dim_row A = dim_row A div 2 + dim_row A div 2", "by presburger"], ["proof (state)\nthis:\n  dim_row A = dim_row A div 2 + dim_row A div 2\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "from even"], ["proof (chain)\npicking this:\n  even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B)", "have n: \"?n = ?n2 + ?n2\""], ["proof (prove)\nusing this:\n  even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B)\n\ngoal (1 subgoal):\n 1. dim_col A = dim_col A div 2 + dim_col A div 2", "by presburger"], ["proof (state)\nthis:\n  dim_col A = dim_col A div 2 + dim_col A div 2\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "from even"], ["proof (chain)\npicking this:\n  even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B)", "have nc: \"?nc = ?nc2 + ?nc2\""], ["proof (prove)\nusing this:\n  even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B)\n\ngoal (1 subgoal):\n 1. dim_col B = dim_col B div 2 + dim_col B div 2", "by presburger"], ["proof (state)\nthis:\n  dim_col B = dim_col B div 2 + dim_col B div 2\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "from 1(9) even"], ["proof (chain)\npicking this:\n  dim_col A = dim_row B\n  even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B)", "have n': \"dim_row B = ?n2 + ?n2\""], ["proof (prove)\nusing this:\n  dim_col A = dim_row B\n  even (dim_row A) \\<and> even (dim_col A) \\<and> even (dim_col B)\n\ngoal (1 subgoal):\n 1. dim_row B = dim_col A div 2 + dim_col A div 2", "by auto"], ["proof (state)\nthis:\n  dim_row B = dim_col A div 2 + dim_col A div 2\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "obtain A1 A2 A3 A4 where splitA: \n        \"split_block A ?nr2 ?n2 = (A1,A2,A3,A4)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A1 A2 A3 A4.\n        split_block A (dim_row A div 2) (dim_col A div 2) =\n        (A1, A2, A3, A4) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (rule prod_cases4)"], ["proof (state)\nthis:\n  split_block A (dim_row A div 2) (dim_col A div 2) = (A1, A2, A3, A4)\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "obtain B1 B2 B3 B4 where splitB: \n        \"split_block B ?n2 ?nc2 = (B1,B2,B3,B4)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>B1 B2 B3 B4.\n        split_block B (dim_col A div 2) (dim_col B div 2) =\n        (B1, B2, B3, B4) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (rule prod_cases4)"], ["proof (state)\nthis:\n  split_block B (dim_col A div 2) (dim_col B div 2) = (B1, B2, B3, B4)\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "note IH = IH(1-7)[OF True splitA[symmetric] splitB[symmetric] ]"], ["proof (state)\nthis:\n  dim_col (A1 + A4) = dim_row (B1 + B4) \\<Longrightarrow>\n  strassen_mat_mult (A1 + A4) (B1 + B4) = (A1 + A4) * (B1 + B4)\n  \\<lbrakk>?xn = strassen_mat_mult (A1 + A4) (B1 + B4);\n   dim_col (A3 + A4) = dim_row B1\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (A3 + A4) B1 = (A3 + A4) * B1\n  \\<lbrakk>?xn = strassen_mat_mult (A1 + A4) (B1 + B4);\n   ?xo = strassen_mat_mult (A3 + A4) B1;\n   dim_col A1 = dim_row (B2 - B4)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult A1 (B2 - B4) = A1 * (B2 - B4)\n  \\<lbrakk>?xn = strassen_mat_mult (A1 + A4) (B1 + B4);\n   ?xo = strassen_mat_mult (A3 + A4) B1;\n   ?xp = strassen_mat_mult A1 (B2 - B4);\n   dim_col A4 = dim_row (B3 - B1)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult A4 (B3 - B1) = A4 * (B3 - B1)\n  \\<lbrakk>?xn = strassen_mat_mult (A1 + A4) (B1 + B4);\n   ?xo = strassen_mat_mult (A3 + A4) B1;\n   ?xp = strassen_mat_mult A1 (B2 - B4);\n   ?xq = strassen_mat_mult A4 (B3 - B1);\n   dim_col (A1 + A2) = dim_row B4\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (A1 + A2) B4 = (A1 + A2) * B4\n  \\<lbrakk>?xn = strassen_mat_mult (A1 + A4) (B1 + B4);\n   ?xo = strassen_mat_mult (A3 + A4) B1;\n   ?xp = strassen_mat_mult A1 (B2 - B4);\n   ?xq = strassen_mat_mult A4 (B3 - B1);\n   ?xr = strassen_mat_mult (A1 + A2) B4;\n   dim_col (A3 - A1) = dim_row (B1 + B2)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (A3 - A1) (B1 + B2) =\n                    (A3 - A1) * (B1 + B2)\n  \\<lbrakk>?xn = strassen_mat_mult (A1 + A4) (B1 + B4);\n   ?xo = strassen_mat_mult (A3 + A4) B1;\n   ?xp = strassen_mat_mult A1 (B2 - B4);\n   ?xq = strassen_mat_mult A4 (B3 - B1);\n   ?xr = strassen_mat_mult (A1 + A2) B4;\n   ?xs = strassen_mat_mult (A3 - A1) (B1 + B2);\n   dim_col (A2 - A4) = dim_row (B3 + B4)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (A2 - A4) (B3 + B4) =\n                    (A2 - A4) * (B3 + B4)\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "from split_block[OF splitA nr n]"], ["proof (chain)\npicking this:\n  A1 \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2)\n  A2 \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2)\n  A3 \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2)\n  A4 \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2)\n  A = four_block_mat A1 A2 A3 A4", "have blockA: \"A = four_block_mat A1 A2 A3 A4\"\n        and A1: \"A1 \\<in> carrier_mat ?nr2 ?n2\" \n        and A2: \"A2 \\<in> carrier_mat ?nr2 ?n2\" \n        and A3: \"A3 \\<in> carrier_mat ?nr2 ?n2\" \n        and A4: \"A4 \\<in> carrier_mat ?nr2 ?n2\""], ["proof (prove)\nusing this:\n  A1 \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2)\n  A2 \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2)\n  A3 \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2)\n  A4 \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2)\n  A = four_block_mat A1 A2 A3 A4\n\ngoal (1 subgoal):\n 1. (A = four_block_mat A1 A2 A3 A4 &&&\n     A1 \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2)) &&&\n    A2 \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2) &&&\n    A3 \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2) &&&\n    A4 \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2)", "by blast+"], ["proof (state)\nthis:\n  A = four_block_mat A1 A2 A3 A4\n  A1 \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2)\n  A2 \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2)\n  A3 \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2)\n  A4 \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2)\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "from split_block[OF splitB n' nc]"], ["proof (chain)\npicking this:\n  B1 \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2)\n  B2 \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2)\n  B3 \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2)\n  B4 \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2)\n  B = four_block_mat B1 B2 B3 B4", "have blockB: \"B = four_block_mat B1 B2 B3 B4\"\n        and B1: \"B1 \\<in> carrier_mat ?n2 ?nc2\" \n        and B2: \"B2 \\<in> carrier_mat ?n2 ?nc2\" \n        and B3: \"B3 \\<in> carrier_mat ?n2 ?nc2\" \n        and B4: \"B4 \\<in> carrier_mat ?n2 ?nc2\""], ["proof (prove)\nusing this:\n  B1 \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2)\n  B2 \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2)\n  B3 \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2)\n  B4 \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2)\n  B = four_block_mat B1 B2 B3 B4\n\ngoal (1 subgoal):\n 1. (B = four_block_mat B1 B2 B3 B4 &&&\n     B1 \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2)) &&&\n    B2 \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2) &&&\n    B3 \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2) &&&\n    B4 \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2)", "by blast+"], ["proof (state)\nthis:\n  B = four_block_mat B1 B2 B3 B4\n  B1 \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2)\n  B2 \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2)\n  B3 \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2)\n  B4 \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2)\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "note carr = A1 A2 A3 A4 B1 B2 B3 B4"], ["proof (state)\nthis:\n  A1 \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2)\n  A2 \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2)\n  A3 \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2)\n  A4 \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2)\n  B1 \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2)\n  B2 \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2)\n  B3 \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2)\n  B4 \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2)\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?M11 = \"A1 + A4\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?M12 = \"B1 + B4\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?M21 = \"A3 + A4\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?M22 = \"B1\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?M31 = \"A1\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?M32 = \"B2 - B4\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?M41 = \"A4\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?M42 = \"B3 - B1\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?M51 = \"A1 + A2\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?M52 = \"B4\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?M61 = \"A3 - A1\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?M62 = \"B1 + B2\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?M71 = \"A2 - A4\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?M72 = \"B3 + B4\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?M1 = \"?smm ?M11 ?M12\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?M2 = \"?smm ?M21 ?M22\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?M3 = \"?smm ?M31 ?M32\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?M4 = \"?smm ?M41 ?M42\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?M5 = \"?smm ?M51 ?M52\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?M6 = \"?smm ?M61 ?M62\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?M7 = \"?smm ?M71 ?M72\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?C1 = \"?M1 + ?M4 - ?M5 + ?M7\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?C2 = \"?M3 + ?M5\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?C3 = \"?M2 + ?M4\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?C4 = \"?M1 - ?M2 + ?M3 + ?M6\""], ["proof (state)\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "have res: \"?smm A B = four_block_mat ?C1 ?C2 ?C3 ?C4\""], ["proof (prove)\ngoal (1 subgoal):\n 1. strassen_mat_mult A B =\n    four_block_mat\n     (strassen_mat_mult (A1 + A4) (B1 + B4) +\n      strassen_mat_mult A4 (B3 - B1) -\n      strassen_mat_mult (A1 + A2) B4 +\n      strassen_mat_mult (A2 - A4) (B3 + B4))\n     (strassen_mat_mult A1 (B2 - B4) + strassen_mat_mult (A1 + A2) B4)\n     (strassen_mat_mult (A3 + A4) B1 + strassen_mat_mult A4 (B3 - B1))\n     (strassen_mat_mult (A1 + A4) (B1 + B4) -\n      strassen_mat_mult (A3 + A4) B1 +\n      strassen_mat_mult A1 (B2 - B4) +\n      strassen_mat_mult (A3 - A1) (B1 + B2))", "using large True"], ["proof (prove)\nusing this:\n  \\<not> strassen_too_small A B\n  strassen_even A B\n\ngoal (1 subgoal):\n 1. strassen_mat_mult A B =\n    four_block_mat\n     (strassen_mat_mult (A1 + A4) (B1 + B4) +\n      strassen_mat_mult A4 (B3 - B1) -\n      strassen_mat_mult (A1 + A2) B4 +\n      strassen_mat_mult (A2 - A4) (B3 + B4))\n     (strassen_mat_mult A1 (B2 - B4) + strassen_mat_mult (A1 + A2) B4)\n     (strassen_mat_mult (A3 + A4) B1 + strassen_mat_mult A4 (B3 - B1))\n     (strassen_mat_mult (A1 + A4) (B1 + B4) -\n      strassen_mat_mult (A3 + A4) B1 +\n      strassen_mat_mult A1 (B2 - B4) +\n      strassen_mat_mult (A3 - A1) (B1 + B2))", "unfolding strassen_mat_mult.simps[of A B] Let_def splitA splitB split"], ["proof (prove)\nusing this:\n  \\<not> strassen_too_small A B\n  strassen_even A B\n\ngoal (1 subgoal):\n 1. (if strassen_too_small A B then A * B\n     else if strassen_even A B\n          then four_block_mat\n                (strassen_mat_mult (A1 + A4) (B1 + B4) +\n                 strassen_mat_mult A4 (B3 - B1) -\n                 strassen_mat_mult (A1 + A2) B4 +\n                 strassen_mat_mult (A2 - A4) (B3 + B4))\n                (strassen_mat_mult A1 (B2 - B4) +\n                 strassen_mat_mult (A1 + A2) B4)\n                (strassen_mat_mult (A3 + A4) B1 +\n                 strassen_mat_mult A4 (B3 - B1))\n                (strassen_mat_mult (A1 + A4) (B1 + B4) -\n                 strassen_mat_mult (A3 + A4) B1 +\n                 strassen_mat_mult A1 (B2 - B4) +\n                 strassen_mat_mult (A3 - A1) (B1 + B2))\n          else case split_block A (dim_row A div 2 * 2)\n                     (dim_col A div 2 * 2) of\n               (A1, A2, A3, A4) \\<Rightarrow>\n                 case split_block B (dim_col A div 2 * 2)\n                       (dim_col B div 2 * 2) of\n                 (B1, B2, B3, B4) \\<Rightarrow>\n                   four_block_mat (strassen_mat_mult A1 B1 + A2 * B3)\n                    (A1 * B2 + A2 * B4) (A3 * B1 + A4 * B3)\n                    (A3 * B2 + A4 * B4)) =\n    four_block_mat\n     (strassen_mat_mult (A1 + A4) (B1 + B4) +\n      strassen_mat_mult A4 (B3 - B1) -\n      strassen_mat_mult (A1 + A2) B4 +\n      strassen_mat_mult (A2 - A4) (B3 + B4))\n     (strassen_mat_mult A1 (B2 - B4) + strassen_mat_mult (A1 + A2) B4)\n     (strassen_mat_mult (A3 + A4) B1 + strassen_mat_mult A4 (B3 - B1))\n     (strassen_mat_mult (A1 + A4) (B1 + B4) -\n      strassen_mat_mult (A3 + A4) B1 +\n      strassen_mat_mult A1 (B2 - B4) +\n      strassen_mat_mult (A3 - A1) (B1 + B2))", "by auto"], ["proof (state)\nthis:\n  strassen_mat_mult A B =\n  four_block_mat\n   (strassen_mat_mult (A1 + A4) (B1 + B4) + strassen_mat_mult A4 (B3 - B1) -\n    strassen_mat_mult (A1 + A2) B4 +\n    strassen_mat_mult (A2 - A4) (B3 + B4))\n   (strassen_mat_mult A1 (B2 - B4) + strassen_mat_mult (A1 + A2) B4)\n   (strassen_mat_mult (A3 + A4) B1 + strassen_mat_mult A4 (B3 - B1))\n   (strassen_mat_mult (A1 + A4) (B1 + B4) - strassen_mat_mult (A3 + A4) B1 +\n    strassen_mat_mult A1 (B2 - B4) +\n    strassen_mat_mult (A3 - A1) (B1 + B2))\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "have M1: \"?M1 = ?M11 * ?M12\""], ["proof (prove)\ngoal (1 subgoal):\n 1. strassen_mat_mult (A1 + A4) (B1 + B4) = (A1 + A4) * (B1 + B4)", "by (rule IH(1), insert carr, auto)"], ["proof (state)\nthis:\n  strassen_mat_mult (A1 + A4) (B1 + B4) = (A1 + A4) * (B1 + B4)\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "note IH = IH(2-)[OF refl]"], ["proof (state)\nthis:\n  dim_col (A3 + A4) = dim_row B1 \\<Longrightarrow>\n  strassen_mat_mult (A3 + A4) B1 = (A3 + A4) * B1\n  \\<lbrakk>?xo = strassen_mat_mult (A3 + A4) B1;\n   dim_col A1 = dim_row (B2 - B4)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult A1 (B2 - B4) = A1 * (B2 - B4)\n  \\<lbrakk>?xo = strassen_mat_mult (A3 + A4) B1;\n   ?xp = strassen_mat_mult A1 (B2 - B4);\n   dim_col A4 = dim_row (B3 - B1)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult A4 (B3 - B1) = A4 * (B3 - B1)\n  \\<lbrakk>?xo = strassen_mat_mult (A3 + A4) B1;\n   ?xp = strassen_mat_mult A1 (B2 - B4);\n   ?xq = strassen_mat_mult A4 (B3 - B1);\n   dim_col (A1 + A2) = dim_row B4\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (A1 + A2) B4 = (A1 + A2) * B4\n  \\<lbrakk>?xo = strassen_mat_mult (A3 + A4) B1;\n   ?xp = strassen_mat_mult A1 (B2 - B4);\n   ?xq = strassen_mat_mult A4 (B3 - B1);\n   ?xr = strassen_mat_mult (A1 + A2) B4;\n   dim_col (A3 - A1) = dim_row (B1 + B2)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (A3 - A1) (B1 + B2) =\n                    (A3 - A1) * (B1 + B2)\n  \\<lbrakk>?xo = strassen_mat_mult (A3 + A4) B1;\n   ?xp = strassen_mat_mult A1 (B2 - B4);\n   ?xq = strassen_mat_mult A4 (B3 - B1);\n   ?xr = strassen_mat_mult (A1 + A2) B4;\n   ?xs = strassen_mat_mult (A3 - A1) (B1 + B2);\n   dim_col (A2 - A4) = dim_row (B3 + B4)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (A2 - A4) (B3 + B4) =\n                    (A2 - A4) * (B3 + B4)\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "have M2: \"?M2 = ?M21 * ?M22\""], ["proof (prove)\ngoal (1 subgoal):\n 1. strassen_mat_mult (A3 + A4) B1 = (A3 + A4) * B1", "by (rule IH(1), insert carr, auto)"], ["proof (state)\nthis:\n  strassen_mat_mult (A3 + A4) B1 = (A3 + A4) * B1\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "note IH = IH(2-)[OF refl]"], ["proof (state)\nthis:\n  dim_col A1 = dim_row (B2 - B4) \\<Longrightarrow>\n  strassen_mat_mult A1 (B2 - B4) = A1 * (B2 - B4)\n  \\<lbrakk>?xp = strassen_mat_mult A1 (B2 - B4);\n   dim_col A4 = dim_row (B3 - B1)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult A4 (B3 - B1) = A4 * (B3 - B1)\n  \\<lbrakk>?xp = strassen_mat_mult A1 (B2 - B4);\n   ?xq = strassen_mat_mult A4 (B3 - B1);\n   dim_col (A1 + A2) = dim_row B4\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (A1 + A2) B4 = (A1 + A2) * B4\n  \\<lbrakk>?xp = strassen_mat_mult A1 (B2 - B4);\n   ?xq = strassen_mat_mult A4 (B3 - B1);\n   ?xr = strassen_mat_mult (A1 + A2) B4;\n   dim_col (A3 - A1) = dim_row (B1 + B2)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (A3 - A1) (B1 + B2) =\n                    (A3 - A1) * (B1 + B2)\n  \\<lbrakk>?xp = strassen_mat_mult A1 (B2 - B4);\n   ?xq = strassen_mat_mult A4 (B3 - B1);\n   ?xr = strassen_mat_mult (A1 + A2) B4;\n   ?xs = strassen_mat_mult (A3 - A1) (B1 + B2);\n   dim_col (A2 - A4) = dim_row (B3 + B4)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (A2 - A4) (B3 + B4) =\n                    (A2 - A4) * (B3 + B4)\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "have M3: \"?M3 = ?M31 * ?M32\""], ["proof (prove)\ngoal (1 subgoal):\n 1. strassen_mat_mult A1 (B2 - B4) = A1 * (B2 - B4)", "by (rule IH(1), insert carr, auto)"], ["proof (state)\nthis:\n  strassen_mat_mult A1 (B2 - B4) = A1 * (B2 - B4)\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "note IH = IH(2-)[OF refl]"], ["proof (state)\nthis:\n  dim_col A4 = dim_row (B3 - B1) \\<Longrightarrow>\n  strassen_mat_mult A4 (B3 - B1) = A4 * (B3 - B1)\n  \\<lbrakk>?xq = strassen_mat_mult A4 (B3 - B1);\n   dim_col (A1 + A2) = dim_row B4\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (A1 + A2) B4 = (A1 + A2) * B4\n  \\<lbrakk>?xq = strassen_mat_mult A4 (B3 - B1);\n   ?xr = strassen_mat_mult (A1 + A2) B4;\n   dim_col (A3 - A1) = dim_row (B1 + B2)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (A3 - A1) (B1 + B2) =\n                    (A3 - A1) * (B1 + B2)\n  \\<lbrakk>?xq = strassen_mat_mult A4 (B3 - B1);\n   ?xr = strassen_mat_mult (A1 + A2) B4;\n   ?xs = strassen_mat_mult (A3 - A1) (B1 + B2);\n   dim_col (A2 - A4) = dim_row (B3 + B4)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (A2 - A4) (B3 + B4) =\n                    (A2 - A4) * (B3 + B4)\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "have M4: \"?M4 = ?M41 * ?M42\""], ["proof (prove)\ngoal (1 subgoal):\n 1. strassen_mat_mult A4 (B3 - B1) = A4 * (B3 - B1)", "by (rule IH(1), insert carr, auto)"], ["proof (state)\nthis:\n  strassen_mat_mult A4 (B3 - B1) = A4 * (B3 - B1)\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "note IH = IH(2-)[OF refl]"], ["proof (state)\nthis:\n  dim_col (A1 + A2) = dim_row B4 \\<Longrightarrow>\n  strassen_mat_mult (A1 + A2) B4 = (A1 + A2) * B4\n  \\<lbrakk>?xr = strassen_mat_mult (A1 + A2) B4;\n   dim_col (A3 - A1) = dim_row (B1 + B2)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (A3 - A1) (B1 + B2) =\n                    (A3 - A1) * (B1 + B2)\n  \\<lbrakk>?xr = strassen_mat_mult (A1 + A2) B4;\n   ?xs = strassen_mat_mult (A3 - A1) (B1 + B2);\n   dim_col (A2 - A4) = dim_row (B3 + B4)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (A2 - A4) (B3 + B4) =\n                    (A2 - A4) * (B3 + B4)\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "have M5: \"?M5 = ?M51 * ?M52\""], ["proof (prove)\ngoal (1 subgoal):\n 1. strassen_mat_mult (A1 + A2) B4 = (A1 + A2) * B4", "by (rule IH(1), insert carr, auto)"], ["proof (state)\nthis:\n  strassen_mat_mult (A1 + A2) B4 = (A1 + A2) * B4\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "note IH = IH(2-)[OF refl]"], ["proof (state)\nthis:\n  dim_col (A3 - A1) = dim_row (B1 + B2) \\<Longrightarrow>\n  strassen_mat_mult (A3 - A1) (B1 + B2) = (A3 - A1) * (B1 + B2)\n  \\<lbrakk>?xs = strassen_mat_mult (A3 - A1) (B1 + B2);\n   dim_col (A2 - A4) = dim_row (B3 + B4)\\<rbrakk>\n  \\<Longrightarrow> strassen_mat_mult (A2 - A4) (B3 + B4) =\n                    (A2 - A4) * (B3 + B4)\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "have M6: \"?M6 = ?M61 * ?M62\""], ["proof (prove)\ngoal (1 subgoal):\n 1. strassen_mat_mult (A3 - A1) (B1 + B2) = (A3 - A1) * (B1 + B2)", "by (rule IH(1), insert carr, auto)"], ["proof (state)\nthis:\n  strassen_mat_mult (A3 - A1) (B1 + B2) = (A3 - A1) * (B1 + B2)\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "note IH = IH(2-)[OF refl]"], ["proof (state)\nthis:\n  dim_col (A2 - A4) = dim_row (B3 + B4) \\<Longrightarrow>\n  strassen_mat_mult (A2 - A4) (B3 + B4) = (A2 - A4) * (B3 + B4)\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "have M7: \"?M7 = ?M71 * ?M72\""], ["proof (prove)\ngoal (1 subgoal):\n 1. strassen_mat_mult (A2 - A4) (B3 + B4) = (A2 - A4) * (B3 + B4)", "by (rule IH(1), insert carr, auto)"], ["proof (state)\nthis:\n  strassen_mat_mult (A2 - A4) (B3 + B4) = (A2 - A4) * (B3 + B4)\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "note distr = \n        add_mult_distrib_mat[of _ ?nr2 ?n2 _ _ ?nc2]\n        minus_mult_distrib_mat[of _ ?nr2 ?n2 _ _ ?nc2]\n        mult_add_distrib_mat[of _ ?nr2 ?n2 _ ?nc2]\n        mult_minus_distrib_mat[of _ ?nr2 ?n2 _ ?nc2]"], ["proof (state)\nthis:\n  \\<lbrakk>?A \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2);\n   ?B \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2);\n   ?C \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2)\\<rbrakk>\n  \\<Longrightarrow> (?A + ?B) * ?C = ?A * ?C + ?B * ?C\n  \\<lbrakk>?A \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2);\n   ?B \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2);\n   ?C \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2)\\<rbrakk>\n  \\<Longrightarrow> (?A - ?B) * ?C = ?A * ?C - ?B * ?C\n  \\<lbrakk>?A \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2);\n   ?B \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2);\n   ?C \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2)\\<rbrakk>\n  \\<Longrightarrow> ?A * (?B + ?C) = ?A * ?B + ?A * ?C\n  \\<lbrakk>?A \\<in> carrier_mat (dim_row A div 2) (dim_col A div 2);\n   ?B \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2);\n   ?C \\<in> carrier_mat (dim_col A div 2) (dim_col B div 2)\\<rbrakk>\n  \\<Longrightarrow> ?A * (?B - ?C) = ?A * ?B - ?A * ?C\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "note closed = add_carrier_mat[of _ ?nr2 ?nc2]\n         uminus_carrier_iff_mat[of _ ?nr2 ?nc2]"], ["proof (state)\nthis:\n  ?B \\<in> carrier_mat (dim_row A div 2) (dim_col B div 2) \\<Longrightarrow>\n  ?A + ?B \\<in> carrier_mat (dim_row A div 2) (dim_col B div 2)\n  (- ?A \\<in> carrier_mat (dim_row A div 2) (dim_col B div 2)) =\n  (?A \\<in> carrier_mat (dim_row A div 2) (dim_col B div 2))\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "note ac = assoc_add_mat[of _ ?nr2 ?nc2] comm_add_mat[of _ ?nr2 ?nc2]"], ["proof (state)\nthis:\n  \\<lbrakk>?A \\<in> carrier_mat (dim_row A div 2) (dim_col B div 2);\n   ?B \\<in> carrier_mat (dim_row A div 2) (dim_col B div 2);\n   ?C \\<in> carrier_mat (dim_row A div 2) (dim_col B div 2)\\<rbrakk>\n  \\<Longrightarrow> ?A + ?B + ?C = ?A + (?B + ?C)\n  \\<lbrakk>?A \\<in> carrier_mat (dim_row A div 2) (dim_col B div 2);\n   ?B \\<in> carrier_mat (dim_row A div 2) (dim_col B div 2)\\<rbrakk>\n  \\<Longrightarrow> ?A + ?B = ?B + ?A\n\ngoal (2 subgoals):\n 1. strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B\n 2. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. strassen_mat_mult A B = A * B", "unfolding res M1 M2 M3 M4 M5 M6 M7"], ["proof (prove)\ngoal (1 subgoal):\n 1. four_block_mat\n     ((A1 + A4) * (B1 + B4) + A4 * (B3 - B1) - (A1 + A2) * B4 +\n      (A2 - A4) * (B3 + B4))\n     (A1 * (B2 - B4) + (A1 + A2) * B4) ((A3 + A4) * B1 + A4 * (B3 - B1))\n     ((A1 + A4) * (B1 + B4) - (A3 + A4) * B1 + A1 * (B2 - B4) +\n      (A3 - A1) * (B1 + B2)) =\n    A * B", "unfolding blockA blockB\n          mult_four_block_mat[OF carr]"], ["proof (prove)\ngoal (1 subgoal):\n 1. four_block_mat\n     ((A1 + A4) * (B1 + B4) + A4 * (B3 - B1) - (A1 + A2) * B4 +\n      (A2 - A4) * (B3 + B4))\n     (A1 * (B2 - B4) + (A1 + A2) * B4) ((A3 + A4) * B1 + A4 * (B3 - B1))\n     ((A1 + A4) * (B1 + B4) - (A3 + A4) * B1 + A1 * (B2 - B4) +\n      (A3 - A1) * (B1 + B2)) =\n    four_block_mat (A1 * B1 + A2 * B3) (A1 * B2 + A2 * B4)\n     (A3 * B1 + A4 * B3) (A3 * B2 + A4 * B4)", "by (rule cong_four_block_mat)\n           (insert carr, auto simp: distr ac closed)"], ["proof (state)\nthis:\n  strassen_mat_mult A B = A * B\n\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "case False"], ["proof (state)\nthis:\n  \\<not> strassen_even A B\n\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?nr2 = \"?nr div 2 * 2\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?nr2' = \"?nr - ?nr2\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?n2 = \"?n div 2 * 2\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?n2' = \"?n - ?n2\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?nc2 = \"?nc div 2 * 2\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "let ?nc2' = \"?nc - ?nc2\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "have nr: \"?nr = ?nr2 + ?nr2'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_row A = dim_row A div 2 * 2 + (dim_row A - dim_row A div 2 * 2)", "by presburger"], ["proof (state)\nthis:\n  dim_row A = dim_row A div 2 * 2 + (dim_row A - dim_row A div 2 * 2)\n\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "have n: \"?n = ?n2 + ?n2'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_col A = dim_col A div 2 * 2 + (dim_col A - dim_col A div 2 * 2)", "by presburger"], ["proof (state)\nthis:\n  dim_col A = dim_col A div 2 * 2 + (dim_col A - dim_col A div 2 * 2)\n\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "have nc: \"?nc = ?nc2 + ?nc2'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_col B = dim_col B div 2 * 2 + (dim_col B - dim_col B div 2 * 2)", "by presburger"], ["proof (state)\nthis:\n  dim_col B = dim_col B div 2 * 2 + (dim_col B - dim_col B div 2 * 2)\n\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "from 1(9)"], ["proof (chain)\npicking this:\n  dim_col A = dim_row B", "have n': \"dim_row B = ?n2 + ?n2'\""], ["proof (prove)\nusing this:\n  dim_col A = dim_row B\n\ngoal (1 subgoal):\n 1. dim_row B = dim_col A div 2 * 2 + (dim_col A - dim_col A div 2 * 2)", "by auto"], ["proof (state)\nthis:\n  dim_row B = dim_col A div 2 * 2 + (dim_col A - dim_col A div 2 * 2)\n\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "obtain A1 A2 A3 A4 where splitA: \n        \"split_block A ?nr2 ?n2 = (A1,A2,A3,A4)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A1 A2 A3 A4.\n        split_block A (dim_row A div 2 * 2) (dim_col A div 2 * 2) =\n        (A1, A2, A3, A4) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (rule prod_cases4)"], ["proof (state)\nthis:\n  split_block A (dim_row A div 2 * 2) (dim_col A div 2 * 2) =\n  (A1, A2, A3, A4)\n\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "obtain B1 B2 B3 B4 where splitB: \n        \"split_block B ?n2 ?nc2 = (B1,B2,B3,B4)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>B1 B2 B3 B4.\n        split_block B (dim_col A div 2 * 2) (dim_col B div 2 * 2) =\n        (B1, B2, B3, B4) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (rule prod_cases4)"], ["proof (state)\nthis:\n  split_block B (dim_col A div 2 * 2) (dim_col B div 2 * 2) =\n  (B1, B2, B3, B4)\n\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "note IH = IH(8)[OF False splitA[symmetric] splitB[symmetric]]"], ["proof (state)\nthis:\n  dim_col A1 = dim_row B1 \\<Longrightarrow>\n  strassen_mat_mult A1 B1 = A1 * B1\n\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "from split_block[OF splitA nr n]"], ["proof (chain)\npicking this:\n  A1 \\<in> carrier_mat (dim_row A div 2 * 2) (dim_col A div 2 * 2)\n  A2 \\<in> carrier_mat (dim_row A div 2 * 2)\n            (dim_col A - dim_col A div 2 * 2)\n  A3 \\<in> carrier_mat (dim_row A - dim_row A div 2 * 2)\n            (dim_col A div 2 * 2)\n  A4 \\<in> carrier_mat (dim_row A - dim_row A div 2 * 2)\n            (dim_col A - dim_col A div 2 * 2)\n  A = four_block_mat A1 A2 A3 A4", "have blockA: \"A = four_block_mat A1 A2 A3 A4\"\n        and A1: \"A1 \\<in> carrier_mat ?nr2 ?n2\" \n        and A2: \"A2 \\<in> carrier_mat ?nr2 ?n2'\" \n        and A3: \"A3 \\<in> carrier_mat ?nr2' ?n2\" \n        and A4: \"A4 \\<in> carrier_mat ?nr2' ?n2'\""], ["proof (prove)\nusing this:\n  A1 \\<in> carrier_mat (dim_row A div 2 * 2) (dim_col A div 2 * 2)\n  A2 \\<in> carrier_mat (dim_row A div 2 * 2)\n            (dim_col A - dim_col A div 2 * 2)\n  A3 \\<in> carrier_mat (dim_row A - dim_row A div 2 * 2)\n            (dim_col A div 2 * 2)\n  A4 \\<in> carrier_mat (dim_row A - dim_row A div 2 * 2)\n            (dim_col A - dim_col A div 2 * 2)\n  A = four_block_mat A1 A2 A3 A4\n\ngoal (1 subgoal):\n 1. (A = four_block_mat A1 A2 A3 A4 &&&\n     A1 \\<in> carrier_mat (dim_row A div 2 * 2) (dim_col A div 2 * 2)) &&&\n    A2 \\<in> carrier_mat (dim_row A div 2 * 2)\n              (dim_col A - dim_col A div 2 * 2) &&&\n    A3 \\<in> carrier_mat (dim_row A - dim_row A div 2 * 2)\n              (dim_col A div 2 * 2) &&&\n    A4 \\<in> carrier_mat (dim_row A - dim_row A div 2 * 2)\n              (dim_col A - dim_col A div 2 * 2)", "by blast+"], ["proof (state)\nthis:\n  A = four_block_mat A1 A2 A3 A4\n  A1 \\<in> carrier_mat (dim_row A div 2 * 2) (dim_col A div 2 * 2)\n  A2 \\<in> carrier_mat (dim_row A div 2 * 2)\n            (dim_col A - dim_col A div 2 * 2)\n  A3 \\<in> carrier_mat (dim_row A - dim_row A div 2 * 2)\n            (dim_col A div 2 * 2)\n  A4 \\<in> carrier_mat (dim_row A - dim_row A div 2 * 2)\n            (dim_col A - dim_col A div 2 * 2)\n\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "from split_block[OF splitB n' nc]"], ["proof (chain)\npicking this:\n  B1 \\<in> carrier_mat (dim_col A div 2 * 2) (dim_col B div 2 * 2)\n  B2 \\<in> carrier_mat (dim_col A div 2 * 2)\n            (dim_col B - dim_col B div 2 * 2)\n  B3 \\<in> carrier_mat (dim_col A - dim_col A div 2 * 2)\n            (dim_col B div 2 * 2)\n  B4 \\<in> carrier_mat (dim_col A - dim_col A div 2 * 2)\n            (dim_col B - dim_col B div 2 * 2)\n  B = four_block_mat B1 B2 B3 B4", "have blockB: \"B = four_block_mat B1 B2 B3 B4\"\n        and B1: \"B1 \\<in> carrier_mat ?n2 ?nc2\" \n        and B2: \"B2 \\<in> carrier_mat ?n2 ?nc2'\" \n        and B3: \"B3 \\<in> carrier_mat ?n2' ?nc2\" \n        and B4: \"B4 \\<in> carrier_mat ?n2' ?nc2'\""], ["proof (prove)\nusing this:\n  B1 \\<in> carrier_mat (dim_col A div 2 * 2) (dim_col B div 2 * 2)\n  B2 \\<in> carrier_mat (dim_col A div 2 * 2)\n            (dim_col B - dim_col B div 2 * 2)\n  B3 \\<in> carrier_mat (dim_col A - dim_col A div 2 * 2)\n            (dim_col B div 2 * 2)\n  B4 \\<in> carrier_mat (dim_col A - dim_col A div 2 * 2)\n            (dim_col B - dim_col B div 2 * 2)\n  B = four_block_mat B1 B2 B3 B4\n\ngoal (1 subgoal):\n 1. (B = four_block_mat B1 B2 B3 B4 &&&\n     B1 \\<in> carrier_mat (dim_col A div 2 * 2) (dim_col B div 2 * 2)) &&&\n    B2 \\<in> carrier_mat (dim_col A div 2 * 2)\n              (dim_col B - dim_col B div 2 * 2) &&&\n    B3 \\<in> carrier_mat (dim_col A - dim_col A div 2 * 2)\n              (dim_col B div 2 * 2) &&&\n    B4 \\<in> carrier_mat (dim_col A - dim_col A div 2 * 2)\n              (dim_col B - dim_col B div 2 * 2)", "by blast+"], ["proof (state)\nthis:\n  B = four_block_mat B1 B2 B3 B4\n  B1 \\<in> carrier_mat (dim_col A div 2 * 2) (dim_col B div 2 * 2)\n  B2 \\<in> carrier_mat (dim_col A div 2 * 2)\n            (dim_col B - dim_col B div 2 * 2)\n  B3 \\<in> carrier_mat (dim_col A - dim_col A div 2 * 2)\n            (dim_col B div 2 * 2)\n  B4 \\<in> carrier_mat (dim_col A - dim_col A div 2 * 2)\n            (dim_col B - dim_col B div 2 * 2)\n\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "note carr = A1 A2 A3 A4 B1 B2 B3 B4"], ["proof (state)\nthis:\n  A1 \\<in> carrier_mat (dim_row A div 2 * 2) (dim_col A div 2 * 2)\n  A2 \\<in> carrier_mat (dim_row A div 2 * 2)\n            (dim_col A - dim_col A div 2 * 2)\n  A3 \\<in> carrier_mat (dim_row A - dim_row A div 2 * 2)\n            (dim_col A div 2 * 2)\n  A4 \\<in> carrier_mat (dim_row A - dim_row A div 2 * 2)\n            (dim_col A - dim_col A div 2 * 2)\n  B1 \\<in> carrier_mat (dim_col A div 2 * 2) (dim_col B div 2 * 2)\n  B2 \\<in> carrier_mat (dim_col A div 2 * 2)\n            (dim_col B - dim_col B div 2 * 2)\n  B3 \\<in> carrier_mat (dim_col A - dim_col A div 2 * 2)\n            (dim_col B div 2 * 2)\n  B4 \\<in> carrier_mat (dim_col A - dim_col A div 2 * 2)\n            (dim_col B - dim_col B div 2 * 2)\n\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "from carr"], ["proof (chain)\npicking this:\n  A1 \\<in> carrier_mat (dim_row A div 2 * 2) (dim_col A div 2 * 2)\n  A2 \\<in> carrier_mat (dim_row A div 2 * 2)\n            (dim_col A - dim_col A div 2 * 2)\n  A3 \\<in> carrier_mat (dim_row A - dim_row A div 2 * 2)\n            (dim_col A div 2 * 2)\n  A4 \\<in> carrier_mat (dim_row A - dim_row A div 2 * 2)\n            (dim_col A - dim_col A div 2 * 2)\n  B1 \\<in> carrier_mat (dim_col A div 2 * 2) (dim_col B div 2 * 2)\n  B2 \\<in> carrier_mat (dim_col A div 2 * 2)\n            (dim_col B - dim_col B div 2 * 2)\n  B3 \\<in> carrier_mat (dim_col A - dim_col A div 2 * 2)\n            (dim_col B div 2 * 2)\n  B4 \\<in> carrier_mat (dim_col A - dim_col A div 2 * 2)\n            (dim_col B - dim_col B div 2 * 2)", "have \"dim_col A1 = dim_row B1\""], ["proof (prove)\nusing this:\n  A1 \\<in> carrier_mat (dim_row A div 2 * 2) (dim_col A div 2 * 2)\n  A2 \\<in> carrier_mat (dim_row A div 2 * 2)\n            (dim_col A - dim_col A div 2 * 2)\n  A3 \\<in> carrier_mat (dim_row A - dim_row A div 2 * 2)\n            (dim_col A div 2 * 2)\n  A4 \\<in> carrier_mat (dim_row A - dim_row A div 2 * 2)\n            (dim_col A - dim_col A div 2 * 2)\n  B1 \\<in> carrier_mat (dim_col A div 2 * 2) (dim_col B div 2 * 2)\n  B2 \\<in> carrier_mat (dim_col A div 2 * 2)\n            (dim_col B - dim_col B div 2 * 2)\n  B3 \\<in> carrier_mat (dim_col A - dim_col A div 2 * 2)\n            (dim_col B div 2 * 2)\n  B4 \\<in> carrier_mat (dim_col A - dim_col A div 2 * 2)\n            (dim_col B - dim_col B div 2 * 2)\n\ngoal (1 subgoal):\n 1. dim_col A1 = dim_row B1", "by simp"], ["proof (state)\nthis:\n  dim_col A1 = dim_row B1\n\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "note IH = IH[OF this]"], ["proof (state)\nthis:\n  strassen_mat_mult A1 B1 = A1 * B1\n\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "have \"?smm A B = four_block_mat \n        (A1 * B1 + A2 * B3)\n        (A1 * B2 + A2 * B4)\n        (A3 * B1 + A4 * B3)\n        (A3 * B2 + A4 * B4)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. strassen_mat_mult A B =\n    four_block_mat (A1 * B1 + A2 * B3) (A1 * B2 + A2 * B4)\n     (A3 * B1 + A4 * B3) (A3 * B2 + A4 * B4)", "unfolding strassen_mat_mult.simps[of A B] Let_def \n          splitA splitB split IH"], ["proof (prove)\ngoal (1 subgoal):\n 1. (if strassen_too_small A B then A * B\n     else if strassen_even A B\n          then case split_block A (dim_row A div 2) (dim_col A div 2) of\n               (A1, A2, A3, A4) \\<Rightarrow>\n                 case split_block B (dim_col A div 2) (dim_col B div 2) of\n                 (B1, B2, B3, B4) \\<Rightarrow>\n                   four_block_mat\n                    (strassen_mat_mult (A1 + A4) (B1 + B4) +\n                     strassen_mat_mult A4 (B3 - B1) -\n                     strassen_mat_mult (A1 + A2) B4 +\n                     strassen_mat_mult (A2 - A4) (B3 + B4))\n                    (strassen_mat_mult A1 (B2 - B4) +\n                     strassen_mat_mult (A1 + A2) B4)\n                    (strassen_mat_mult (A3 + A4) B1 +\n                     strassen_mat_mult A4 (B3 - B1))\n                    (strassen_mat_mult (A1 + A4) (B1 + B4) -\n                     strassen_mat_mult (A3 + A4) B1 +\n                     strassen_mat_mult A1 (B2 - B4) +\n                     strassen_mat_mult (A3 - A1) (B1 + B2))\n          else four_block_mat (A1 * B1 + A2 * B3) (A1 * B2 + A2 * B4)\n                (A3 * B1 + A4 * B3) (A3 * B2 + A4 * B4)) =\n    four_block_mat (A1 * B1 + A2 * B3) (A1 * B2 + A2 * B4)\n     (A3 * B1 + A4 * B3) (A3 * B2 + A4 * B4)", "using large False"], ["proof (prove)\nusing this:\n  \\<not> strassen_too_small A B\n  \\<not> strassen_even A B\n\ngoal (1 subgoal):\n 1. (if strassen_too_small A B then A * B\n     else if strassen_even A B\n          then case split_block A (dim_row A div 2) (dim_col A div 2) of\n               (A1, A2, A3, A4) \\<Rightarrow>\n                 case split_block B (dim_col A div 2) (dim_col B div 2) of\n                 (B1, B2, B3, B4) \\<Rightarrow>\n                   four_block_mat\n                    (strassen_mat_mult (A1 + A4) (B1 + B4) +\n                     strassen_mat_mult A4 (B3 - B1) -\n                     strassen_mat_mult (A1 + A2) B4 +\n                     strassen_mat_mult (A2 - A4) (B3 + B4))\n                    (strassen_mat_mult A1 (B2 - B4) +\n                     strassen_mat_mult (A1 + A2) B4)\n                    (strassen_mat_mult (A3 + A4) B1 +\n                     strassen_mat_mult A4 (B3 - B1))\n                    (strassen_mat_mult (A1 + A4) (B1 + B4) -\n                     strassen_mat_mult (A3 + A4) B1 +\n                     strassen_mat_mult A1 (B2 - B4) +\n                     strassen_mat_mult (A3 - A1) (B1 + B2))\n          else four_block_mat (A1 * B1 + A2 * B3) (A1 * B2 + A2 * B4)\n                (A3 * B1 + A4 * B3) (A3 * B2 + A4 * B4)) =\n    four_block_mat (A1 * B1 + A2 * B3) (A1 * B2 + A2 * B4)\n     (A3 * B1 + A4 * B3) (A3 * B2 + A4 * B4)", "by auto"], ["proof (state)\nthis:\n  strassen_mat_mult A B =\n  four_block_mat (A1 * B1 + A2 * B3) (A1 * B2 + A2 * B4) (A3 * B1 + A4 * B3)\n   (A3 * B2 + A4 * B4)\n\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "also"], ["proof (state)\nthis:\n  strassen_mat_mult A B =\n  four_block_mat (A1 * B1 + A2 * B3) (A1 * B2 + A2 * B4) (A3 * B1 + A4 * B3)\n   (A3 * B2 + A4 * B4)\n\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "have \"\\<dots> = A * B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. four_block_mat (A1 * B1 + A2 * B3) (A1 * B2 + A2 * B4)\n     (A3 * B1 + A4 * B3) (A3 * B2 + A4 * B4) =\n    A * B", "unfolding blockA blockB\n         mult_four_block_mat[OF carr]"], ["proof (prove)\ngoal (1 subgoal):\n 1. four_block_mat (A1 * B1 + A2 * B3) (A1 * B2 + A2 * B4)\n     (A3 * B1 + A4 * B3) (A3 * B2 + A4 * B4) =\n    four_block_mat (A1 * B1 + A2 * B3) (A1 * B2 + A2 * B4)\n     (A3 * B1 + A4 * B3) (A3 * B2 + A4 * B4)", "by simp"], ["proof (state)\nthis:\n  four_block_mat (A1 * B1 + A2 * B3) (A1 * B2 + A2 * B4) (A3 * B1 + A4 * B3)\n   (A3 * B2 + A4 * B4) =\n  A * B\n\ngoal (1 subgoal):\n 1. \\<not> strassen_even A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "finally"], ["proof (chain)\npicking this:\n  strassen_mat_mult A B = A * B", "show ?thesis"], ["proof (prove)\nusing this:\n  strassen_mat_mult A B = A * B\n\ngoal (1 subgoal):\n 1. strassen_mat_mult A B = A * B", "by simp"], ["proof (state)\nthis:\n  strassen_mat_mult A B = A * B\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  strassen_mat_mult A B = A * B\n\ngoal (1 subgoal):\n 1. strassen_too_small A B \\<Longrightarrow> strassen_mat_mult A B = A * B", "qed simp"], ["proof (state)\nthis:\n  strassen_mat_mult A B = A * B\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}