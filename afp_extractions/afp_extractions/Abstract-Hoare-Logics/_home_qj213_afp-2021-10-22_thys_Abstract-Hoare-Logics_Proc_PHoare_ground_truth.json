{"file_name": "/home/qj213/afp-2021-10-22/thys/Abstract-Hoare-Logics/Proc/PHoare.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Abstract-Hoare-Logics", "problem_names": ["lemma strengthen_pre:\n \"\\<lbrakk> \\<forall>z s. P' z s \\<longrightarrow> P z s; C\\<turnstile> {P}c{Q}  \\<rbrakk> \\<Longrightarrow> C\\<turnstile> {P'}c{Q}\"", "lemmas valid_defs = valid_def valids_def cvalid_def\n                    nvalid_def nvalids_def cnvalid_def", "theorem hoare_sound: \"C \\<turnstile> {P}c{Q}  \\<Longrightarrow>  C \\<Turnstile> {P}c{Q}\"", "lemma MGT_implies_complete:\n \"{} \\<turnstile> MGT c  \\<Longrightarrow>  {} \\<Turnstile> {P}c{Q}  \\<Longrightarrow>  {} \\<turnstile> {P}c{Q::state assn}\"", "lemma MGT_lemma: \"C \\<turnstile> MGT CALL  \\<Longrightarrow>  C \\<turnstile> MGT c\"", "lemma MGT_CALL: \"{} \\<turnstile> MGT CALL\"", "theorem \"{} \\<Turnstile> {P}c{Q}  \\<Longrightarrow>  {} \\<turnstile> {P}c{Q::state assn}\""], "translations": [["", "lemma strengthen_pre:\n \"\\<lbrakk> \\<forall>z s. P' z s \\<longrightarrow> P z s; C\\<turnstile> {P}c{Q}  \\<rbrakk> \\<Longrightarrow> C\\<turnstile> {P'}c{Q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>z s. P' z s \\<longrightarrow> P z s;\n     C \\<turnstile> {P} c {Q}\\<rbrakk>\n    \\<Longrightarrow> C \\<turnstile> {P'} c {Q}", "by(rule hoare.Conseq, assumption, blast)"], ["", "lemmas valid_defs = valid_def valids_def cvalid_def\n                    nvalid_def nvalids_def cnvalid_def"], ["", "theorem hoare_sound: \"C \\<turnstile> {P}c{Q}  \\<Longrightarrow>  C \\<Turnstile> {P}c{Q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C \\<turnstile> {P} c {Q} \\<Longrightarrow> C \\<Turnstile> {P} c {Q}", "txt\\<open>\\noindent requires a generalization: @{prop\"\\<forall>n. C \\<Turnstile>n\n{P}c{Q}\"} is proved instead, from which the actual theorem follows\ndirectly via lemma @{thm[source]exec_iff_execn} in \\S\\ref{sec:proc1-lang}.\nThe generalization\nis proved by induction on @{term c}. The reason for the generalization\nis that soundness of the @{term CALL} rule is proved by induction on the\nmaximal call depth, i.e.\\ @{term n}.\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. C \\<turnstile> {P} c {Q} \\<Longrightarrow> C \\<Turnstile> {P} c {Q}", "apply(subgoal_tac \"\\<forall>n. C \\<Turnstile>n {P}c{Q}\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>C \\<turnstile> {P} c {Q};\n     \\<forall>n. C \\<Turnstile>n {P} c {Q}\\<rbrakk>\n    \\<Longrightarrow> C \\<Turnstile> {P} c {Q}\n 2. C \\<turnstile> {P} c {Q} \\<Longrightarrow>\n    \\<forall>n. C \\<Turnstile>n {P} c {Q}", "apply(unfold valid_defs exec_iff_execn)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>C \\<turnstile> {P} c {Q};\n     \\<forall>n.\n        (\\<forall>(P, c, Q)\\<in>C.\n            \\<forall>s t.\n               s -c-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z.\n                   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n        (\\<forall>s t.\n            s -c-n\\<rightarrow> t \\<longrightarrow>\n            (\\<forall>z. P z s \\<longrightarrow> Q z t))\\<rbrakk>\n    \\<Longrightarrow> (\\<forall>(P, c, Q)\\<in>C.\n                          \\<forall>s t.\n                             (\\<exists>n. s -c-n\\<rightarrow>\n                                 t) \\<longrightarrow>\n                             (\\<forall>z.\n                                 P z s \\<longrightarrow>\n                                 Q z t)) \\<longrightarrow>\n                      (\\<forall>s t.\n                          (\\<exists>n. s -c-n\\<rightarrow>\n                              t) \\<longrightarrow>\n                          (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 2. C \\<turnstile> {P} c {Q} \\<Longrightarrow>\n    \\<forall>n.\n       (\\<forall>(P, c, Q)\\<in>C.\n           \\<forall>s t.\n              s -c-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n       (\\<forall>s t.\n           s -c-n\\<rightarrow> t \\<longrightarrow>\n           (\\<forall>z. P z s \\<longrightarrow> Q z t))", "apply fast"], ["proof (prove)\ngoal (1 subgoal):\n 1. C \\<turnstile> {P} c {Q} \\<Longrightarrow>\n    \\<forall>n.\n       (\\<forall>(P, c, Q)\\<in>C.\n           \\<forall>s t.\n              s -c-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n       (\\<forall>s t.\n           s -c-n\\<rightarrow> t \\<longrightarrow>\n           (\\<forall>z. P z s \\<longrightarrow> Q z t))", "apply(erule hoare.induct)"], ["proof (prove)\ngoal (8 subgoals):\n 1. \\<And>C f P.\n       \\<forall>n.\n          (\\<forall>a\\<in>C.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -Do f-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z.\n                  (\\<forall>t\\<in>f s. P z t) \\<longrightarrow> P z t))\n 2. \\<And>C P c1 Q c2 R.\n       \\<lbrakk>C \\<turnstile> {P} c1 {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c1-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<longrightarrow> Q z t));\n        C \\<turnstile> {Q} c2 {R};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c2-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. Q z s \\<longrightarrow> R z t))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>C.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -c1; c2-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> R z t))\n 3. \\<And>C P b c1 Q c2.\n       \\<lbrakk>C \\<turnstile> {\\<lambda>z s. P z s \\<and> b s} c1 {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c1-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<and> b s \\<longrightarrow> Q z t));\n        C \\<turnstile> {\\<lambda>z s. P z s \\<and> \\<not> b s} c2 {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c2-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z.\n                   P z s \\<and> \\<not> b s \\<longrightarrow>\n                   Q z t))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>C.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -IF b THEN c1 ELSE c2-n\\<rightarrow>\n                                t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 4. \\<And>C P b c.\n       \\<lbrakk>C \\<turnstile> {\\<lambda>z s. P z s \\<and> b s} c {P};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z.\n                   P z s \\<and> b s \\<longrightarrow> P z t))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>C.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -WHILE b DO c-n\\<rightarrow>\n                                t \\<longrightarrow>\n                                (\\<forall>z.\n                                    P z s \\<longrightarrow>\n                                    P z t \\<and> \\<not> b t))\n 5. \\<And>C P' c Q' P Q.\n       \\<lbrakk>C \\<turnstile> {P'} c {Q'};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P' z s \\<longrightarrow> Q' z t));\n        \\<forall>s t.\n           (\\<forall>z. P' z s \\<longrightarrow> Q' z t) \\<longrightarrow>\n           (\\<forall>z. P z s \\<longrightarrow> Q z t)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>C.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -c-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 6. \\<And>P Q.\n       \\<lbrakk>{(P, CALL, Q)} \\<turnstile> {P} body {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>{(P, CALL, Q)}.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -body-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<longrightarrow> Q z t))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>{}.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -CALL-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 7. \\<And>P Q.\n       \\<forall>n.\n          (\\<forall>a\\<in>{(P, CALL, Q)}.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -CALL-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 8. \\<And>C P f c Q g.\n       \\<forall>s'.\n          C \\<turnstile>\n          {\\<lambda>z s. P z s' \\<and> s = f s'} c\n          {\\<lambda>z t. Q z (g s' t)} \\<and>\n          (\\<forall>n.\n              (\\<forall>a\\<in>C.\n                  case a of\n                  (P, c, Q) \\<Rightarrow>\n                    \\<forall>s t.\n                       s -c-n\\<rightarrow> t \\<longrightarrow>\n                       (\\<forall>z.\n                           P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n              (\\<forall>s t.\n                  s -c-n\\<rightarrow> t \\<longrightarrow>\n                  (\\<forall>z.\n                      P z s' \\<and> s = f s' \\<longrightarrow>\n                      Q z (g s' t)))) \\<Longrightarrow>\n       \\<forall>n.\n          (\\<forall>a\\<in>C.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -LOCAL f; c; g-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))", "apply simp"], ["proof (prove)\ngoal (7 subgoals):\n 1. \\<And>C P c1 Q c2 R.\n       \\<lbrakk>C \\<turnstile> {P} c1 {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c1-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<longrightarrow> Q z t));\n        C \\<turnstile> {Q} c2 {R};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c2-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. Q z s \\<longrightarrow> R z t))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>C.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -c1; c2-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> R z t))\n 2. \\<And>C P b c1 Q c2.\n       \\<lbrakk>C \\<turnstile> {\\<lambda>z s. P z s \\<and> b s} c1 {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c1-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<and> b s \\<longrightarrow> Q z t));\n        C \\<turnstile> {\\<lambda>z s. P z s \\<and> \\<not> b s} c2 {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c2-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z.\n                   P z s \\<and> \\<not> b s \\<longrightarrow>\n                   Q z t))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>C.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -IF b THEN c1 ELSE c2-n\\<rightarrow>\n                                t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 3. \\<And>C P b c.\n       \\<lbrakk>C \\<turnstile> {\\<lambda>z s. P z s \\<and> b s} c {P};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z.\n                   P z s \\<and> b s \\<longrightarrow> P z t))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>C.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -WHILE b DO c-n\\<rightarrow>\n                                t \\<longrightarrow>\n                                (\\<forall>z.\n                                    P z s \\<longrightarrow>\n                                    P z t \\<and> \\<not> b t))\n 4. \\<And>C P' c Q' P Q.\n       \\<lbrakk>C \\<turnstile> {P'} c {Q'};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P' z s \\<longrightarrow> Q' z t));\n        \\<forall>s t.\n           (\\<forall>z. P' z s \\<longrightarrow> Q' z t) \\<longrightarrow>\n           (\\<forall>z. P z s \\<longrightarrow> Q z t)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>C.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -c-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 5. \\<And>P Q.\n       \\<lbrakk>{(P, CALL, Q)} \\<turnstile> {P} body {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>{(P, CALL, Q)}.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -body-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<longrightarrow> Q z t))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>{}.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -CALL-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 6. \\<And>P Q.\n       \\<forall>n.\n          (\\<forall>a\\<in>{(P, CALL, Q)}.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -CALL-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 7. \\<And>C P f c Q g.\n       \\<forall>s'.\n          C \\<turnstile>\n          {\\<lambda>z s. P z s' \\<and> s = f s'} c\n          {\\<lambda>z t. Q z (g s' t)} \\<and>\n          (\\<forall>n.\n              (\\<forall>a\\<in>C.\n                  case a of\n                  (P, c, Q) \\<Rightarrow>\n                    \\<forall>s t.\n                       s -c-n\\<rightarrow> t \\<longrightarrow>\n                       (\\<forall>z.\n                           P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n              (\\<forall>s t.\n                  s -c-n\\<rightarrow> t \\<longrightarrow>\n                  (\\<forall>z.\n                      P z s' \\<and> s = f s' \\<longrightarrow>\n                      Q z (g s' t)))) \\<Longrightarrow>\n       \\<forall>n.\n          (\\<forall>a\\<in>C.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -LOCAL f; c; g-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))", "apply fast"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<And>C P b c1 Q c2.\n       \\<lbrakk>C \\<turnstile> {\\<lambda>z s. P z s \\<and> b s} c1 {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c1-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<and> b s \\<longrightarrow> Q z t));\n        C \\<turnstile> {\\<lambda>z s. P z s \\<and> \\<not> b s} c2 {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c2-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z.\n                   P z s \\<and> \\<not> b s \\<longrightarrow>\n                   Q z t))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>C.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -IF b THEN c1 ELSE c2-n\\<rightarrow>\n                                t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 2. \\<And>C P b c.\n       \\<lbrakk>C \\<turnstile> {\\<lambda>z s. P z s \\<and> b s} c {P};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z.\n                   P z s \\<and> b s \\<longrightarrow> P z t))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>C.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -WHILE b DO c-n\\<rightarrow>\n                                t \\<longrightarrow>\n                                (\\<forall>z.\n                                    P z s \\<longrightarrow>\n                                    P z t \\<and> \\<not> b t))\n 3. \\<And>C P' c Q' P Q.\n       \\<lbrakk>C \\<turnstile> {P'} c {Q'};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P' z s \\<longrightarrow> Q' z t));\n        \\<forall>s t.\n           (\\<forall>z. P' z s \\<longrightarrow> Q' z t) \\<longrightarrow>\n           (\\<forall>z. P z s \\<longrightarrow> Q z t)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>C.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -c-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 4. \\<And>P Q.\n       \\<lbrakk>{(P, CALL, Q)} \\<turnstile> {P} body {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>{(P, CALL, Q)}.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -body-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<longrightarrow> Q z t))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>{}.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -CALL-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 5. \\<And>P Q.\n       \\<forall>n.\n          (\\<forall>a\\<in>{(P, CALL, Q)}.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -CALL-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 6. \\<And>C P f c Q g.\n       \\<forall>s'.\n          C \\<turnstile>\n          {\\<lambda>z s. P z s' \\<and> s = f s'} c\n          {\\<lambda>z t. Q z (g s' t)} \\<and>\n          (\\<forall>n.\n              (\\<forall>a\\<in>C.\n                  case a of\n                  (P, c, Q) \\<Rightarrow>\n                    \\<forall>s t.\n                       s -c-n\\<rightarrow> t \\<longrightarrow>\n                       (\\<forall>z.\n                           P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n              (\\<forall>s t.\n                  s -c-n\\<rightarrow> t \\<longrightarrow>\n                  (\\<forall>z.\n                      P z s' \\<and> s = f s' \\<longrightarrow>\n                      Q z (g s' t)))) \\<Longrightarrow>\n       \\<forall>n.\n          (\\<forall>a\\<in>C.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -LOCAL f; c; g-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))", "apply simp"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>C P b c.\n       \\<lbrakk>C \\<turnstile> {\\<lambda>z s. P z s \\<and> b s} c {P};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z.\n                   P z s \\<and> b s \\<longrightarrow> P z t))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>C.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -WHILE b DO c-n\\<rightarrow>\n                                t \\<longrightarrow>\n                                (\\<forall>z.\n                                    P z s \\<longrightarrow>\n                                    P z t \\<and> \\<not> b t))\n 2. \\<And>C P' c Q' P Q.\n       \\<lbrakk>C \\<turnstile> {P'} c {Q'};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P' z s \\<longrightarrow> Q' z t));\n        \\<forall>s t.\n           (\\<forall>z. P' z s \\<longrightarrow> Q' z t) \\<longrightarrow>\n           (\\<forall>z. P z s \\<longrightarrow> Q z t)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>C.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -c-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 3. \\<And>P Q.\n       \\<lbrakk>{(P, CALL, Q)} \\<turnstile> {P} body {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>{(P, CALL, Q)}.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -body-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<longrightarrow> Q z t))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>{}.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -CALL-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 4. \\<And>P Q.\n       \\<forall>n.\n          (\\<forall>a\\<in>{(P, CALL, Q)}.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -CALL-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 5. \\<And>C P f c Q g.\n       \\<forall>s'.\n          C \\<turnstile>\n          {\\<lambda>z s. P z s' \\<and> s = f s'} c\n          {\\<lambda>z t. Q z (g s' t)} \\<and>\n          (\\<forall>n.\n              (\\<forall>a\\<in>C.\n                  case a of\n                  (P, c, Q) \\<Rightarrow>\n                    \\<forall>s t.\n                       s -c-n\\<rightarrow> t \\<longrightarrow>\n                       (\\<forall>z.\n                           P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n              (\\<forall>s t.\n                  s -c-n\\<rightarrow> t \\<longrightarrow>\n                  (\\<forall>z.\n                      P z s' \\<and> s = f s' \\<longrightarrow>\n                      Q z (g s' t)))) \\<Longrightarrow>\n       \\<forall>n.\n          (\\<forall>a\\<in>C.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -LOCAL f; c; g-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))", "apply clarify"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>C P b c n s t z.\n       \\<lbrakk>C \\<turnstile> {\\<lambda>z s. P z s \\<and> b s} c {P};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<and> b s \\<longrightarrow> P z t));\n        \\<forall>a\\<in>C.\n           case a of\n           (P, c, Q) \\<Rightarrow>\n             \\<forall>s t.\n                s -c-n\\<rightarrow> t \\<longrightarrow>\n                (\\<forall>z. P z s \\<longrightarrow> Q z t);\n        s -WHILE b DO c-n\\<rightarrow> t; P z s\\<rbrakk>\n       \\<Longrightarrow> P z t \\<and> \\<not> b t\n 2. \\<And>C P' c Q' P Q.\n       \\<lbrakk>C \\<turnstile> {P'} c {Q'};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P' z s \\<longrightarrow> Q' z t));\n        \\<forall>s t.\n           (\\<forall>z. P' z s \\<longrightarrow> Q' z t) \\<longrightarrow>\n           (\\<forall>z. P z s \\<longrightarrow> Q z t)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>C.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -c-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 3. \\<And>P Q.\n       \\<lbrakk>{(P, CALL, Q)} \\<turnstile> {P} body {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>{(P, CALL, Q)}.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -body-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<longrightarrow> Q z t))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>{}.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -CALL-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 4. \\<And>P Q.\n       \\<forall>n.\n          (\\<forall>a\\<in>{(P, CALL, Q)}.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -CALL-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 5. \\<And>C P f c Q g.\n       \\<forall>s'.\n          C \\<turnstile>\n          {\\<lambda>z s. P z s' \\<and> s = f s'} c\n          {\\<lambda>z t. Q z (g s' t)} \\<and>\n          (\\<forall>n.\n              (\\<forall>a\\<in>C.\n                  case a of\n                  (P, c, Q) \\<Rightarrow>\n                    \\<forall>s t.\n                       s -c-n\\<rightarrow> t \\<longrightarrow>\n                       (\\<forall>z.\n                           P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n              (\\<forall>s t.\n                  s -c-n\\<rightarrow> t \\<longrightarrow>\n                  (\\<forall>z.\n                      P z s' \\<and> s = f s' \\<longrightarrow>\n                      Q z (g s' t)))) \\<Longrightarrow>\n       \\<forall>n.\n          (\\<forall>a\\<in>C.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -LOCAL f; c; g-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))", "apply(drule while_rule)"], ["proof (prove)\ngoal (7 subgoals):\n 1. \\<And>C P b c n s t z.\n       \\<lbrakk>C \\<turnstile> {\\<lambda>z s. P z s \\<and> b s} c {P};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<and> b s \\<longrightarrow> P z t));\n        \\<forall>a\\<in>C.\n           case a of\n           (P, c, Q) \\<Rightarrow>\n             \\<forall>s t.\n                s -c-n\\<rightarrow> t \\<longrightarrow>\n                (\\<forall>z. P z s \\<longrightarrow> Q z t);\n        P z s\\<rbrakk>\n       \\<Longrightarrow> ?P155 C P b c n s t z s\n 2. \\<And>C P b c n s t z sa s'.\n       \\<lbrakk>C \\<turnstile> {\\<lambda>z s. P z s \\<and> b s} c {P};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<and> b s \\<longrightarrow> P z t));\n        \\<forall>a\\<in>C.\n           case a of\n           (P, c, Q) \\<Rightarrow>\n             \\<forall>s t.\n                s -c-n\\<rightarrow> t \\<longrightarrow>\n                (\\<forall>z. P z s \\<longrightarrow> Q z t);\n        P z s; ?P155 C P b c n s t z sa; b sa;\n        sa -c-n\\<rightarrow> s'\\<rbrakk>\n       \\<Longrightarrow> ?P155 C P b c n s t z s'\n 3. \\<And>C P b c n s t z.\n       \\<lbrakk>C \\<turnstile> {\\<lambda>z s. P z s \\<and> b s} c {P};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<and> b s \\<longrightarrow> P z t));\n        \\<forall>a\\<in>C.\n           case a of\n           (P, c, Q) \\<Rightarrow>\n             \\<forall>s t.\n                s -c-n\\<rightarrow> t \\<longrightarrow>\n                (\\<forall>z. P z s \\<longrightarrow> Q z t);\n        P z s; ?P155 C P b c n s t z t \\<and> \\<not> b t\\<rbrakk>\n       \\<Longrightarrow> P z t \\<and> \\<not> b t\n 4. \\<And>C P' c Q' P Q.\n       \\<lbrakk>C \\<turnstile> {P'} c {Q'};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P' z s \\<longrightarrow> Q' z t));\n        \\<forall>s t.\n           (\\<forall>z. P' z s \\<longrightarrow> Q' z t) \\<longrightarrow>\n           (\\<forall>z. P z s \\<longrightarrow> Q z t)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>C.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -c-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 5. \\<And>P Q.\n       \\<lbrakk>{(P, CALL, Q)} \\<turnstile> {P} body {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>{(P, CALL, Q)}.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -body-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<longrightarrow> Q z t))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>{}.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -CALL-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 6. \\<And>P Q.\n       \\<forall>n.\n          (\\<forall>a\\<in>{(P, CALL, Q)}.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -CALL-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 7. \\<And>C P f c Q g.\n       \\<forall>s'.\n          C \\<turnstile>\n          {\\<lambda>z s. P z s' \\<and> s = f s'} c\n          {\\<lambda>z t. Q z (g s' t)} \\<and>\n          (\\<forall>n.\n              (\\<forall>a\\<in>C.\n                  case a of\n                  (P, c, Q) \\<Rightarrow>\n                    \\<forall>s t.\n                       s -c-n\\<rightarrow> t \\<longrightarrow>\n                       (\\<forall>z.\n                           P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n              (\\<forall>s t.\n                  s -c-n\\<rightarrow> t \\<longrightarrow>\n                  (\\<forall>z.\n                      P z s' \\<and> s = f s' \\<longrightarrow>\n                      Q z (g s' t)))) \\<Longrightarrow>\n       \\<forall>n.\n          (\\<forall>a\\<in>C.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -LOCAL f; c; g-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))", "prefer 3"], ["proof (prove)\ngoal (7 subgoals):\n 1. \\<And>C P b c n s t z.\n       \\<lbrakk>C \\<turnstile> {\\<lambda>z s. P z s \\<and> b s} c {P};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<and> b s \\<longrightarrow> P z t));\n        \\<forall>a\\<in>C.\n           case a of\n           (P, c, Q) \\<Rightarrow>\n             \\<forall>s t.\n                s -c-n\\<rightarrow> t \\<longrightarrow>\n                (\\<forall>z. P z s \\<longrightarrow> Q z t);\n        P z s; ?P155 C P b c n s t z t \\<and> \\<not> b t\\<rbrakk>\n       \\<Longrightarrow> P z t \\<and> \\<not> b t\n 2. \\<And>C P b c n s t z.\n       \\<lbrakk>C \\<turnstile> {\\<lambda>z s. P z s \\<and> b s} c {P};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<and> b s \\<longrightarrow> P z t));\n        \\<forall>a\\<in>C.\n           case a of\n           (P, c, Q) \\<Rightarrow>\n             \\<forall>s t.\n                s -c-n\\<rightarrow> t \\<longrightarrow>\n                (\\<forall>z. P z s \\<longrightarrow> Q z t);\n        P z s\\<rbrakk>\n       \\<Longrightarrow> ?P155 C P b c n s t z s\n 3. \\<And>C P b c n s t z sa s'.\n       \\<lbrakk>C \\<turnstile> {\\<lambda>z s. P z s \\<and> b s} c {P};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<and> b s \\<longrightarrow> P z t));\n        \\<forall>a\\<in>C.\n           case a of\n           (P, c, Q) \\<Rightarrow>\n             \\<forall>s t.\n                s -c-n\\<rightarrow> t \\<longrightarrow>\n                (\\<forall>z. P z s \\<longrightarrow> Q z t);\n        P z s; ?P155 C P b c n s t z sa; b sa;\n        sa -c-n\\<rightarrow> s'\\<rbrakk>\n       \\<Longrightarrow> ?P155 C P b c n s t z s'\n 4. \\<And>C P' c Q' P Q.\n       \\<lbrakk>C \\<turnstile> {P'} c {Q'};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P' z s \\<longrightarrow> Q' z t));\n        \\<forall>s t.\n           (\\<forall>z. P' z s \\<longrightarrow> Q' z t) \\<longrightarrow>\n           (\\<forall>z. P z s \\<longrightarrow> Q z t)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>C.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -c-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 5. \\<And>P Q.\n       \\<lbrakk>{(P, CALL, Q)} \\<turnstile> {P} body {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>{(P, CALL, Q)}.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -body-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<longrightarrow> Q z t))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>{}.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -CALL-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 6. \\<And>P Q.\n       \\<forall>n.\n          (\\<forall>a\\<in>{(P, CALL, Q)}.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -CALL-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 7. \\<And>C P f c Q g.\n       \\<forall>s'.\n          C \\<turnstile>\n          {\\<lambda>z s. P z s' \\<and> s = f s'} c\n          {\\<lambda>z t. Q z (g s' t)} \\<and>\n          (\\<forall>n.\n              (\\<forall>a\\<in>C.\n                  case a of\n                  (P, c, Q) \\<Rightarrow>\n                    \\<forall>s t.\n                       s -c-n\\<rightarrow> t \\<longrightarrow>\n                       (\\<forall>z.\n                           P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n              (\\<forall>s t.\n                  s -c-n\\<rightarrow> t \\<longrightarrow>\n                  (\\<forall>z.\n                      P z s' \\<and> s = f s' \\<longrightarrow>\n                      Q z (g s' t)))) \\<Longrightarrow>\n       \\<forall>n.\n          (\\<forall>a\\<in>C.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -LOCAL f; c; g-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))", "apply (assumption, assumption)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>C P b c n s t z sa s'.\n       \\<lbrakk>C \\<turnstile> {\\<lambda>z s. P z s \\<and> b s} c {P};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<and> b s \\<longrightarrow> P z t));\n        \\<forall>a\\<in>C.\n           case a of\n           (P, c, Q) \\<Rightarrow>\n             \\<forall>s t.\n                s -c-n\\<rightarrow> t \\<longrightarrow>\n                (\\<forall>z. P z s \\<longrightarrow> Q z t);\n        P z s; P z sa; b sa; sa -c-n\\<rightarrow> s'\\<rbrakk>\n       \\<Longrightarrow> P z s'\n 2. \\<And>C P' c Q' P Q.\n       \\<lbrakk>C \\<turnstile> {P'} c {Q'};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P' z s \\<longrightarrow> Q' z t));\n        \\<forall>s t.\n           (\\<forall>z. P' z s \\<longrightarrow> Q' z t) \\<longrightarrow>\n           (\\<forall>z. P z s \\<longrightarrow> Q z t)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>C.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -c-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 3. \\<And>P Q.\n       \\<lbrakk>{(P, CALL, Q)} \\<turnstile> {P} body {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>{(P, CALL, Q)}.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -body-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<longrightarrow> Q z t))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>{}.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -CALL-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 4. \\<And>P Q.\n       \\<forall>n.\n          (\\<forall>a\\<in>{(P, CALL, Q)}.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -CALL-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 5. \\<And>C P f c Q g.\n       \\<forall>s'.\n          C \\<turnstile>\n          {\\<lambda>z s. P z s' \\<and> s = f s'} c\n          {\\<lambda>z t. Q z (g s' t)} \\<and>\n          (\\<forall>n.\n              (\\<forall>a\\<in>C.\n                  case a of\n                  (P, c, Q) \\<Rightarrow>\n                    \\<forall>s t.\n                       s -c-n\\<rightarrow> t \\<longrightarrow>\n                       (\\<forall>z.\n                           P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n              (\\<forall>s t.\n                  s -c-n\\<rightarrow> t \\<longrightarrow>\n                  (\\<forall>z.\n                      P z s' \\<and> s = f s' \\<longrightarrow>\n                      Q z (g s' t)))) \\<Longrightarrow>\n       \\<forall>n.\n          (\\<forall>a\\<in>C.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -LOCAL f; c; g-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))", "apply fast"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>C P' c Q' P Q.\n       \\<lbrakk>C \\<turnstile> {P'} c {Q'};\n        \\<forall>n.\n           (\\<forall>a\\<in>C.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -c-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P' z s \\<longrightarrow> Q' z t));\n        \\<forall>s t.\n           (\\<forall>z. P' z s \\<longrightarrow> Q' z t) \\<longrightarrow>\n           (\\<forall>z. P z s \\<longrightarrow> Q z t)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>C.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -c-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 2. \\<And>P Q.\n       \\<lbrakk>{(P, CALL, Q)} \\<turnstile> {P} body {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>{(P, CALL, Q)}.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -body-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<longrightarrow> Q z t))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>{}.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -CALL-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 3. \\<And>P Q.\n       \\<forall>n.\n          (\\<forall>a\\<in>{(P, CALL, Q)}.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -CALL-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 4. \\<And>C P f c Q g.\n       \\<forall>s'.\n          C \\<turnstile>\n          {\\<lambda>z s. P z s' \\<and> s = f s'} c\n          {\\<lambda>z t. Q z (g s' t)} \\<and>\n          (\\<forall>n.\n              (\\<forall>a\\<in>C.\n                  case a of\n                  (P, c, Q) \\<Rightarrow>\n                    \\<forall>s t.\n                       s -c-n\\<rightarrow> t \\<longrightarrow>\n                       (\\<forall>z.\n                           P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n              (\\<forall>s t.\n                  s -c-n\\<rightarrow> t \\<longrightarrow>\n                  (\\<forall>z.\n                      P z s' \\<and> s = f s' \\<longrightarrow>\n                      Q z (g s' t)))) \\<Longrightarrow>\n       \\<forall>n.\n          (\\<forall>a\\<in>C.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -LOCAL f; c; g-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))", "apply fast"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>P Q.\n       \\<lbrakk>{(P, CALL, Q)} \\<turnstile> {P} body {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>{(P, CALL, Q)}.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -body-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<longrightarrow> Q z t))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>{}.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -CALL-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 2. \\<And>P Q.\n       \\<forall>n.\n          (\\<forall>a\\<in>{(P, CALL, Q)}.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -CALL-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 3. \\<And>C P f c Q g.\n       \\<forall>s'.\n          C \\<turnstile>\n          {\\<lambda>z s. P z s' \\<and> s = f s'} c\n          {\\<lambda>z t. Q z (g s' t)} \\<and>\n          (\\<forall>n.\n              (\\<forall>a\\<in>C.\n                  case a of\n                  (P, c, Q) \\<Rightarrow>\n                    \\<forall>s t.\n                       s -c-n\\<rightarrow> t \\<longrightarrow>\n                       (\\<forall>z.\n                           P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n              (\\<forall>s t.\n                  s -c-n\\<rightarrow> t \\<longrightarrow>\n                  (\\<forall>z.\n                      P z s' \\<and> s = f s' \\<longrightarrow>\n                      Q z (g s' t)))) \\<Longrightarrow>\n       \\<forall>n.\n          (\\<forall>a\\<in>C.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -LOCAL f; c; g-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))", "prefer 2"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>P Q.\n       \\<forall>n.\n          (\\<forall>a\\<in>{(P, CALL, Q)}.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -CALL-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 2. \\<And>P Q.\n       \\<lbrakk>{(P, CALL, Q)} \\<turnstile> {P} body {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>{(P, CALL, Q)}.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -body-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<longrightarrow> Q z t))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>{}.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -CALL-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 3. \\<And>C P f c Q g.\n       \\<forall>s'.\n          C \\<turnstile>\n          {\\<lambda>z s. P z s' \\<and> s = f s'} c\n          {\\<lambda>z t. Q z (g s' t)} \\<and>\n          (\\<forall>n.\n              (\\<forall>a\\<in>C.\n                  case a of\n                  (P, c, Q) \\<Rightarrow>\n                    \\<forall>s t.\n                       s -c-n\\<rightarrow> t \\<longrightarrow>\n                       (\\<forall>z.\n                           P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n              (\\<forall>s t.\n                  s -c-n\\<rightarrow> t \\<longrightarrow>\n                  (\\<forall>z.\n                      P z s' \\<and> s = f s' \\<longrightarrow>\n                      Q z (g s' t)))) \\<Longrightarrow>\n       \\<forall>n.\n          (\\<forall>a\\<in>C.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -LOCAL f; c; g-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))", "apply simp"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>P Q.\n       \\<lbrakk>{(P, CALL, Q)} \\<turnstile> {P} body {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>{(P, CALL, Q)}.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -body-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<longrightarrow> Q z t))\\<rbrakk>\n       \\<Longrightarrow> \\<forall>n.\n                            (\\<forall>a\\<in>{}.\n                                case a of\n                                (P, c, Q) \\<Rightarrow>\n                                  \\<forall>s t.\n                                     s -c-n\\<rightarrow> t \\<longrightarrow>\n                                     (\\<forall>z.\n   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n                            (\\<forall>s t.\n                                s -CALL-n\\<rightarrow> t \\<longrightarrow>\n                                (\\<forall>z. P z s \\<longrightarrow> Q z t))\n 2. \\<And>C P f c Q g.\n       \\<forall>s'.\n          C \\<turnstile>\n          {\\<lambda>z s. P z s' \\<and> s = f s'} c\n          {\\<lambda>z t. Q z (g s' t)} \\<and>\n          (\\<forall>n.\n              (\\<forall>a\\<in>C.\n                  case a of\n                  (P, c, Q) \\<Rightarrow>\n                    \\<forall>s t.\n                       s -c-n\\<rightarrow> t \\<longrightarrow>\n                       (\\<forall>z.\n                           P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n              (\\<forall>s t.\n                  s -c-n\\<rightarrow> t \\<longrightarrow>\n                  (\\<forall>z.\n                      P z s' \\<and> s = f s' \\<longrightarrow>\n                      Q z (g s' t)))) \\<Longrightarrow>\n       \\<forall>n.\n          (\\<forall>a\\<in>C.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -LOCAL f; c; g-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))", "apply(rule allI, rule impI)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>P Q n.\n       \\<lbrakk>{(P, CALL, Q)} \\<turnstile> {P} body {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>{(P, CALL, Q)}.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -body-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<longrightarrow> Q z t));\n        \\<forall>a\\<in>{}.\n           case a of\n           (P, c, Q) \\<Rightarrow>\n             \\<forall>s t.\n                s -c-n\\<rightarrow> t \\<longrightarrow>\n                (\\<forall>z. P z s \\<longrightarrow> Q z t)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s t.\n                            s -CALL-n\\<rightarrow> t \\<longrightarrow>\n                            (\\<forall>z. P z s \\<longrightarrow> Q z t)\n 2. \\<And>C P f c Q g.\n       \\<forall>s'.\n          C \\<turnstile>\n          {\\<lambda>z s. P z s' \\<and> s = f s'} c\n          {\\<lambda>z t. Q z (g s' t)} \\<and>\n          (\\<forall>n.\n              (\\<forall>a\\<in>C.\n                  case a of\n                  (P, c, Q) \\<Rightarrow>\n                    \\<forall>s t.\n                       s -c-n\\<rightarrow> t \\<longrightarrow>\n                       (\\<forall>z.\n                           P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n              (\\<forall>s t.\n                  s -c-n\\<rightarrow> t \\<longrightarrow>\n                  (\\<forall>z.\n                      P z s' \\<and> s = f s' \\<longrightarrow>\n                      Q z (g s' t)))) \\<Longrightarrow>\n       \\<forall>n.\n          (\\<forall>a\\<in>C.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -LOCAL f; c; g-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))", "apply(induct_tac n)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>P Q n.\n       \\<lbrakk>{(P, CALL, Q)} \\<turnstile> {P} body {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>{(P, CALL, Q)}.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -body-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<longrightarrow> Q z t));\n        \\<forall>a\\<in>{}.\n           case a of\n           (P, c, Q) \\<Rightarrow>\n             \\<forall>s t.\n                s -c-n\\<rightarrow> t \\<longrightarrow>\n                (\\<forall>z. P z s \\<longrightarrow> Q z t)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s t.\n                            s -CALL-0\\<rightarrow> t \\<longrightarrow>\n                            (\\<forall>z. P z s \\<longrightarrow> Q z t)\n 2. \\<And>P Q n na.\n       \\<lbrakk>{(P, CALL, Q)} \\<turnstile> {P} body {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>{(P, CALL, Q)}.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -body-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<longrightarrow> Q z t));\n        \\<forall>a\\<in>{}.\n           case a of\n           (P, c, Q) \\<Rightarrow>\n             \\<forall>s t.\n                s -c-n\\<rightarrow> t \\<longrightarrow>\n                (\\<forall>z. P z s \\<longrightarrow> Q z t);\n        \\<forall>s t.\n           s -CALL-na\\<rightarrow> t \\<longrightarrow>\n           (\\<forall>z. P z s \\<longrightarrow> Q z t)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s t.\n                            s -CALL-Suc na\\<rightarrow> t \\<longrightarrow>\n                            (\\<forall>z. P z s \\<longrightarrow> Q z t)\n 3. \\<And>C P f c Q g.\n       \\<forall>s'.\n          C \\<turnstile>\n          {\\<lambda>z s. P z s' \\<and> s = f s'} c\n          {\\<lambda>z t. Q z (g s' t)} \\<and>\n          (\\<forall>n.\n              (\\<forall>a\\<in>C.\n                  case a of\n                  (P, c, Q) \\<Rightarrow>\n                    \\<forall>s t.\n                       s -c-n\\<rightarrow> t \\<longrightarrow>\n                       (\\<forall>z.\n                           P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n              (\\<forall>s t.\n                  s -c-n\\<rightarrow> t \\<longrightarrow>\n                  (\\<forall>z.\n                      P z s' \\<and> s = f s' \\<longrightarrow>\n                      Q z (g s' t)))) \\<Longrightarrow>\n       \\<forall>n.\n          (\\<forall>a\\<in>C.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -LOCAL f; c; g-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))", "apply blast"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>P Q n na.\n       \\<lbrakk>{(P, CALL, Q)} \\<turnstile> {P} body {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>{(P, CALL, Q)}.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -body-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<longrightarrow> Q z t));\n        \\<forall>a\\<in>{}.\n           case a of\n           (P, c, Q) \\<Rightarrow>\n             \\<forall>s t.\n                s -c-n\\<rightarrow> t \\<longrightarrow>\n                (\\<forall>z. P z s \\<longrightarrow> Q z t);\n        \\<forall>s t.\n           s -CALL-na\\<rightarrow> t \\<longrightarrow>\n           (\\<forall>z. P z s \\<longrightarrow> Q z t)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s t.\n                            s -CALL-Suc na\\<rightarrow> t \\<longrightarrow>\n                            (\\<forall>z. P z s \\<longrightarrow> Q z t)\n 2. \\<And>C P f c Q g.\n       \\<forall>s'.\n          C \\<turnstile>\n          {\\<lambda>z s. P z s' \\<and> s = f s'} c\n          {\\<lambda>z t. Q z (g s' t)} \\<and>\n          (\\<forall>n.\n              (\\<forall>a\\<in>C.\n                  case a of\n                  (P, c, Q) \\<Rightarrow>\n                    \\<forall>s t.\n                       s -c-n\\<rightarrow> t \\<longrightarrow>\n                       (\\<forall>z.\n                           P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n              (\\<forall>s t.\n                  s -c-n\\<rightarrow> t \\<longrightarrow>\n                  (\\<forall>z.\n                      P z s' \\<and> s = f s' \\<longrightarrow>\n                      Q z (g s' t)))) \\<Longrightarrow>\n       \\<forall>n.\n          (\\<forall>a\\<in>C.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -LOCAL f; c; g-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))", "apply clarify"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>P Q n na s t z.\n       \\<lbrakk>{(P, CALL, Q)} \\<turnstile> {P} body {Q};\n        \\<forall>n.\n           (\\<forall>a\\<in>{(P, CALL, Q)}.\n               case a of\n               (P, c, Q) \\<Rightarrow>\n                 \\<forall>s t.\n                    s -c-n\\<rightarrow> t \\<longrightarrow>\n                    (\\<forall>z.\n                        P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -body-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<longrightarrow> Q z t));\n        \\<forall>a\\<in>{}.\n           case a of\n           (P, c, Q) \\<Rightarrow>\n             \\<forall>s t.\n                s -c-n\\<rightarrow> t \\<longrightarrow>\n                (\\<forall>z. P z s \\<longrightarrow> Q z t);\n        \\<forall>s t.\n           s -CALL-na\\<rightarrow> t \\<longrightarrow>\n           (\\<forall>z. P z s \\<longrightarrow> Q z t);\n        s -body-na\\<rightarrow> t; P z s\\<rbrakk>\n       \\<Longrightarrow> Q z t\n 2. \\<And>C P f c Q g.\n       \\<forall>s'.\n          C \\<turnstile>\n          {\\<lambda>z s. P z s' \\<and> s = f s'} c\n          {\\<lambda>z t. Q z (g s' t)} \\<and>\n          (\\<forall>n.\n              (\\<forall>a\\<in>C.\n                  case a of\n                  (P, c, Q) \\<Rightarrow>\n                    \\<forall>s t.\n                       s -c-n\\<rightarrow> t \\<longrightarrow>\n                       (\\<forall>z.\n                           P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n              (\\<forall>s t.\n                  s -c-n\\<rightarrow> t \\<longrightarrow>\n                  (\\<forall>z.\n                      P z s' \\<and> s = f s' \\<longrightarrow>\n                      Q z (g s' t)))) \\<Longrightarrow>\n       \\<forall>n.\n          (\\<forall>a\\<in>C.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -LOCAL f; c; g-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))", "apply (simp(no_asm_use))"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>P Q na s t z.\n       \\<lbrakk>{(P, CALL, Q)} \\<turnstile> {P} body {Q};\n        \\<forall>n.\n           (\\<forall>s t.\n               s -CALL-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z.\n                   P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n           (\\<forall>s t.\n               s -body-n\\<rightarrow> t \\<longrightarrow>\n               (\\<forall>z. P z s \\<longrightarrow> Q z t));\n        \\<forall>s t.\n           s -CALL-na\\<rightarrow> t \\<longrightarrow>\n           (\\<forall>z. P z s \\<longrightarrow> Q z t);\n        s -body-na\\<rightarrow> t; P z s\\<rbrakk>\n       \\<Longrightarrow> Q z t\n 2. \\<And>C P f c Q g.\n       \\<forall>s'.\n          C \\<turnstile>\n          {\\<lambda>z s. P z s' \\<and> s = f s'} c\n          {\\<lambda>z t. Q z (g s' t)} \\<and>\n          (\\<forall>n.\n              (\\<forall>a\\<in>C.\n                  case a of\n                  (P, c, Q) \\<Rightarrow>\n                    \\<forall>s t.\n                       s -c-n\\<rightarrow> t \\<longrightarrow>\n                       (\\<forall>z.\n                           P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n              (\\<forall>s t.\n                  s -c-n\\<rightarrow> t \\<longrightarrow>\n                  (\\<forall>z.\n                      P z s' \\<and> s = f s' \\<longrightarrow>\n                      Q z (g s' t)))) \\<Longrightarrow>\n       \\<forall>n.\n          (\\<forall>a\\<in>C.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -LOCAL f; c; g-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))", "apply blast"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>C P f c Q g.\n       \\<forall>s'.\n          C \\<turnstile>\n          {\\<lambda>z s. P z s' \\<and> s = f s'} c\n          {\\<lambda>z t. Q z (g s' t)} \\<and>\n          (\\<forall>n.\n              (\\<forall>a\\<in>C.\n                  case a of\n                  (P, c, Q) \\<Rightarrow>\n                    \\<forall>s t.\n                       s -c-n\\<rightarrow> t \\<longrightarrow>\n                       (\\<forall>z.\n                           P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n              (\\<forall>s t.\n                  s -c-n\\<rightarrow> t \\<longrightarrow>\n                  (\\<forall>z.\n                      P z s' \\<and> s = f s' \\<longrightarrow>\n                      Q z (g s' t)))) \\<Longrightarrow>\n       \\<forall>n.\n          (\\<forall>a\\<in>C.\n              case a of\n              (P, c, Q) \\<Rightarrow>\n                \\<forall>s t.\n                   s -c-n\\<rightarrow> t \\<longrightarrow>\n                   (\\<forall>z.\n                       P z s \\<longrightarrow> Q z t)) \\<longrightarrow>\n          (\\<forall>s t.\n              s -LOCAL f; c; g-n\\<rightarrow> t \\<longrightarrow>\n              (\\<forall>z. P z s \\<longrightarrow> Q z t))", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "text\\<open>\nThe completeness proof employs the notion of a \\emph{most general triple} (or\n\\emph{most general formula}):\\<close>"], ["", "definition\n  MGT :: \"com \\<Rightarrow> state assn \\<times> com \\<times> state assn\" where\n  \"MGT c = (\\<lambda>z s. z = s, c, \\<lambda>z t. z -c\\<rightarrow> t)\""], ["", "declare MGT_def[simp]"], ["", "text\\<open>\\noindent Note that the type of @{term z} has been identified with\n@{typ state}.  This means that for every state variable there is an auxiliary\nvariable, which is simply there to record the value of the program variables\nbefore execution of a command. This is exactly what, for example, VDM offers\nby allowing you to refer to the pre-value of a variable in a\npostcondition. The intuition behind @{term\"MGT c\"} is\nthat it completely describes the operational behaviour of @{term c}.  It is\neasy to see that, in the presence of the new consequence rule,\n\\mbox{@{prop\"{} \\<turnstile> MGT c\"}} implies completeness:\\<close>"], ["", "lemma MGT_implies_complete:\n \"{} \\<turnstile> MGT c  \\<Longrightarrow>  {} \\<Turnstile> {P}c{Q}  \\<Longrightarrow>  {} \\<turnstile> {P}c{Q::state assn}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>{} \\<turnstile> MGT c; {} \\<Turnstile> {P} c {Q}\\<rbrakk>\n    \\<Longrightarrow> {} \\<turnstile> {P} c {Q}", "apply(simp add: MGT_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>{} \\<turnstile> {(=)} c {\\<lambda>z. exec z c};\n     {} \\<Turnstile> {P} c {Q}\\<rbrakk>\n    \\<Longrightarrow> {} \\<turnstile> {P} c {Q}", "apply (erule hoare.Conseq)"], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<Turnstile> {P} c {Q} \\<Longrightarrow>\n    \\<forall>s t.\n       (\\<forall>z.\n           z = s \\<longrightarrow> z -c\\<rightarrow> t) \\<longrightarrow>\n       (\\<forall>z. P z s \\<longrightarrow> Q z t)", "apply(simp add: valid_defs)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "text\\<open>In order to discharge @{prop\"{} \\<turnstile> MGT c\"} one proves\\<close>"], ["", "lemma MGT_lemma: \"C \\<turnstile> MGT CALL  \\<Longrightarrow>  C \\<turnstile> MGT c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C \\<turnstile> MGT CALL \\<Longrightarrow> C \\<turnstile> MGT c", "apply (simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body} \\<Longrightarrow>\n    C \\<turnstile> {(=)} c {\\<lambda>z. exec z c}", "apply(induct_tac c)"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<And>x.\n       C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body} \\<Longrightarrow>\n       C \\<turnstile> {(=)} Do x {\\<lambda>z. exec z (Do x)}\n 2. \\<And>x1a x2.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x1a {\\<lambda>z. exec z x1a};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} x1a; x2 {\\<lambda>z. exec z (x1a; x2)}\n 3. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2};\n        C \\<turnstile> {(=)} x3 {\\<lambda>z. exec z x3}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} IF x1a THEN x2 ELSE x3\n                         {\\<lambda>z. exec z (IF x1a THEN x2 ELSE x3)}\n 4. \\<And>x1a x2.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} WHILE x1a DO x2\n                         {\\<lambda>z. exec z (WHILE x1a DO x2)}\n 5. C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body} \\<Longrightarrow>\n    C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z CALL}\n 6. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "apply (rule strengthen_pre[OF _ hoare.Do])"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<And>x.\n       C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body} \\<Longrightarrow>\n       \\<forall>z s.\n          z = s \\<longrightarrow>\n          (\\<forall>t\\<in>x s. z -Do x\\<rightarrow> t)\n 2. \\<And>x1a x2.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x1a {\\<lambda>z. exec z x1a};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} x1a; x2 {\\<lambda>z. exec z (x1a; x2)}\n 3. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2};\n        C \\<turnstile> {(=)} x3 {\\<lambda>z. exec z x3}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} IF x1a THEN x2 ELSE x3\n                         {\\<lambda>z. exec z (IF x1a THEN x2 ELSE x3)}\n 4. \\<And>x1a x2.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} WHILE x1a DO x2\n                         {\\<lambda>z. exec z (WHILE x1a DO x2)}\n 5. C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body} \\<Longrightarrow>\n    C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z CALL}\n 6. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "apply blast"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>x1a x2.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x1a {\\<lambda>z. exec z x1a};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} x1a; x2 {\\<lambda>z. exec z (x1a; x2)}\n 2. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2};\n        C \\<turnstile> {(=)} x3 {\\<lambda>z. exec z x3}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} IF x1a THEN x2 ELSE x3\n                         {\\<lambda>z. exec z (IF x1a THEN x2 ELSE x3)}\n 3. \\<And>x1a x2.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} WHILE x1a DO x2\n                         {\\<lambda>z. exec z (WHILE x1a DO x2)}\n 4. C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body} \\<Longrightarrow>\n    C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z CALL}\n 5. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "apply(blast intro:hoare.Semi hoare.Conseq)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2};\n        C \\<turnstile> {(=)} x3 {\\<lambda>z. exec z x3}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} IF x1a THEN x2 ELSE x3\n                         {\\<lambda>z. exec z (IF x1a THEN x2 ELSE x3)}\n 2. \\<And>x1a x2.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} WHILE x1a DO x2\n                         {\\<lambda>z. exec z (WHILE x1a DO x2)}\n 3. C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body} \\<Longrightarrow>\n    C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z CALL}\n 4. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "apply(rule hoare.If)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2};\n        C \\<turnstile> {(=)} x3 {\\<lambda>z. exec z x3}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {\\<lambda>z s. z = s \\<and> x1a s} x2\n                         {\\<lambda>z. exec z (IF x1a THEN x2 ELSE x3)}\n 2. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2};\n        C \\<turnstile> {(=)} x3 {\\<lambda>z. exec z x3}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {\\<lambda>z s. z = s \\<and> \\<not> x1a s} x3\n                         {\\<lambda>z. exec z (IF x1a THEN x2 ELSE x3)}\n 3. \\<And>x1a x2.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} WHILE x1a DO x2\n                         {\\<lambda>z. exec z (WHILE x1a DO x2)}\n 4. C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body} \\<Longrightarrow>\n    C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z CALL}\n 5. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "apply(erule hoare.Conseq)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x3 {\\<lambda>z. exec z x3}\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s t.\n                            (\\<forall>z.\n                                z = s \\<longrightarrow> z -x2\\<rightarrow>\n                                t) \\<longrightarrow>\n                            (\\<forall>z.\n                                z = s \\<and> x1a s \\<longrightarrow> z\n                                -IF x1a THEN x2 ELSE x3\\<rightarrow> t)\n 2. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2};\n        C \\<turnstile> {(=)} x3 {\\<lambda>z. exec z x3}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {\\<lambda>z s. z = s \\<and> \\<not> x1a s} x3\n                         {\\<lambda>z. exec z (IF x1a THEN x2 ELSE x3)}\n 3. \\<And>x1a x2.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} WHILE x1a DO x2\n                         {\\<lambda>z. exec z (WHILE x1a DO x2)}\n 4. C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body} \\<Longrightarrow>\n    C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z CALL}\n 5. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "apply simp"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2};\n        C \\<turnstile> {(=)} x3 {\\<lambda>z. exec z x3}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {\\<lambda>z s. z = s \\<and> \\<not> x1a s} x3\n                         {\\<lambda>z. exec z (IF x1a THEN x2 ELSE x3)}\n 2. \\<And>x1a x2.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} WHILE x1a DO x2\n                         {\\<lambda>z. exec z (WHILE x1a DO x2)}\n 3. C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body} \\<Longrightarrow>\n    C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z CALL}\n 4. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "apply(erule hoare.Conseq)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s t.\n                            (\\<forall>z.\n                                z = s \\<longrightarrow> z -x3\\<rightarrow>\n                                t) \\<longrightarrow>\n                            (\\<forall>z.\n                                z = s \\<and> \\<not> x1a s \\<longrightarrow>\n                                z -IF x1a THEN x2 ELSE x3\\<rightarrow> t)\n 2. \\<And>x1a x2.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} WHILE x1a DO x2\n                         {\\<lambda>z. exec z (WHILE x1a DO x2)}\n 3. C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body} \\<Longrightarrow>\n    C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z CALL}\n 4. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "apply simp"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x1a x2.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} WHILE x1a DO x2\n                         {\\<lambda>z. exec z (WHILE x1a DO x2)}\n 2. C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body} \\<Longrightarrow>\n    C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z CALL}\n 3. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "prefer 2"], ["proof (prove)\ngoal (3 subgoals):\n 1. C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body} \\<Longrightarrow>\n    C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z CALL}\n 2. \\<And>x1a x2.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} WHILE x1a DO x2\n                         {\\<lambda>z. exec z (WHILE x1a DO x2)}\n 3. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "apply simp"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x1a x2.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} WHILE x1a DO x2\n                         {\\<lambda>z. exec z (WHILE x1a DO x2)}\n 2. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "apply(rename_tac b c)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>b c.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} c {\\<lambda>z. exec z c}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} WHILE b DO c\n                         {\\<lambda>z. exec z (WHILE b DO c)}\n 2. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "apply(rule hoare.Conseq)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>b c.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} c {\\<lambda>z. exec z c}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile> {?P'48 b c} WHILE b DO c {?Q'48 b c}\n 2. \\<And>b c.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} c {\\<lambda>z. exec z c}\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s t.\n                            (\\<forall>z.\n                                ?P'48 b c z s \\<longrightarrow>\n                                ?Q'48 b c z t) \\<longrightarrow>\n                            (\\<forall>z.\n                                z = s \\<longrightarrow> z\n                                -WHILE b DO c\\<rightarrow> t)\n 3. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "apply(rule_tac P = \"\\<lambda>z s. (z,s) \\<in> ({(s,t). b s \\<and> s -c\\<rightarrow> t})^*\"\n        in hoare.While)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>b c.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} c {\\<lambda>z. exec z c}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {\\<lambda>z s.\n                             (z, s)\n                             \\<in> {(s, t).\n                                    b s \\<and> s -c\\<rightarrow>\n                                    t}\\<^sup>* \\<and>\n                             b s}\n                         c {\\<lambda>z s.\n                               (z, s)\n                               \\<in> {(s, t).\nb s \\<and> s -c\\<rightarrow> t}\\<^sup>*}\n 2. \\<And>b c.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} c {\\<lambda>z. exec z c}\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s t.\n                            (\\<forall>z.\n                                (z, s)\n                                \\<in> {(s, t).\n b s \\<and> s -c\\<rightarrow> t}\\<^sup>* \\<longrightarrow>\n                                (z, t)\n                                \\<in> {(s, t).\n b s \\<and> s -c\\<rightarrow> t}\\<^sup>* \\<and>\n                                \\<not> b t) \\<longrightarrow>\n                            (\\<forall>z.\n                                z = s \\<longrightarrow> z\n                                -WHILE b DO c\\<rightarrow> t)\n 3. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "apply(erule hoare.Conseq)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>b c.\n       C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body} \\<Longrightarrow>\n       \\<forall>s t.\n          (\\<forall>z.\n              z = s \\<longrightarrow> z -c\\<rightarrow> t) \\<longrightarrow>\n          (\\<forall>z.\n              (z, s)\n              \\<in> {(s, t). b s \\<and> s -c\\<rightarrow> t}\\<^sup>* \\<and>\n              b s \\<longrightarrow>\n              (z, t) \\<in> {(s, t). b s \\<and> s -c\\<rightarrow> t}\\<^sup>*)\n 2. \\<And>b c.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} c {\\<lambda>z. exec z c}\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s t.\n                            (\\<forall>z.\n                                (z, s)\n                                \\<in> {(s, t).\n b s \\<and> s -c\\<rightarrow> t}\\<^sup>* \\<longrightarrow>\n                                (z, t)\n                                \\<in> {(s, t).\n b s \\<and> s -c\\<rightarrow> t}\\<^sup>* \\<and>\n                                \\<not> b t) \\<longrightarrow>\n                            (\\<forall>z.\n                                z = s \\<longrightarrow> z\n                                -WHILE b DO c\\<rightarrow> t)\n 3. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "apply(blast intro:rtrancl_into_rtrancl)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>b c.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} c {\\<lambda>z. exec z c}\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s t.\n                            (\\<forall>z.\n                                (z, s)\n                                \\<in> {(s, t).\n b s \\<and> s -c\\<rightarrow> t}\\<^sup>* \\<longrightarrow>\n                                (z, t)\n                                \\<in> {(s, t).\n b s \\<and> s -c\\<rightarrow> t}\\<^sup>* \\<and>\n                                \\<not> b t) \\<longrightarrow>\n                            (\\<forall>z.\n                                z = s \\<longrightarrow> z\n                                -WHILE b DO c\\<rightarrow> t)\n 2. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "apply clarsimp"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>b c s t.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} c {\\<lambda>z. exec z c};\n        \\<forall>z.\n           (z, s)\n           \\<in> {(s, t).\n                  b s \\<and> s -c\\<rightarrow> t}\\<^sup>* \\<longrightarrow>\n           (z, t)\n           \\<in> {(s, t). b s \\<and> s -c\\<rightarrow> t}\\<^sup>* \\<and>\n           \\<not> b t\\<rbrakk>\n       \\<Longrightarrow> s -WHILE b DO c\\<rightarrow> t\n 2. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "apply(rename_tac s t)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>b c s t.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} c {\\<lambda>z. exec z c};\n        \\<forall>z.\n           (z, s)\n           \\<in> {(s, t).\n                  b s \\<and> s -c\\<rightarrow> t}\\<^sup>* \\<longrightarrow>\n           (z, t)\n           \\<in> {(s, t). b s \\<and> s -c\\<rightarrow> t}\\<^sup>* \\<and>\n           \\<not> b t\\<rbrakk>\n       \\<Longrightarrow> s -WHILE b DO c\\<rightarrow> t\n 2. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "apply(erule_tac x = s in allE)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>b c s t.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} c {\\<lambda>z. exec z c};\n        (s, s)\n        \\<in> {(s, t).\n               b s \\<and> s -c\\<rightarrow> t}\\<^sup>* \\<longrightarrow>\n        (s, t) \\<in> {(s, t). b s \\<and> s -c\\<rightarrow> t}\\<^sup>* \\<and>\n        \\<not> b t\\<rbrakk>\n       \\<Longrightarrow> s -WHILE b DO c\\<rightarrow> t\n 2. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "apply clarsimp"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>b c s t.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} c {\\<lambda>z. exec z c};\n        (s, t) \\<in> {(s, t). b s \\<and> s -c\\<rightarrow> t}\\<^sup>*;\n        \\<not> b t\\<rbrakk>\n       \\<Longrightarrow> s -WHILE b DO c\\<rightarrow> t\n 2. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "apply(erule converse_rtrancl_induct)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>b c s t.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} c {\\<lambda>z. exec z c}; \\<not> b t\\<rbrakk>\n       \\<Longrightarrow> t -WHILE b DO c\\<rightarrow> t\n 2. \\<And>b c s t y z.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} c {\\<lambda>z. exec z c}; \\<not> b t;\n        (y, z) \\<in> {(s, t). b s \\<and> s -c\\<rightarrow> t};\n        (z, t) \\<in> {(s, t). b s \\<and> s -c\\<rightarrow> t}\\<^sup>*;\n        z -WHILE b DO c\\<rightarrow> t\\<rbrakk>\n       \\<Longrightarrow> y -WHILE b DO c\\<rightarrow> t\n 3. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "apply simp"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>b c s t y z.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} c {\\<lambda>z. exec z c}; \\<not> b t;\n        (y, z) \\<in> {(s, t). b s \\<and> s -c\\<rightarrow> t};\n        (z, t) \\<in> {(s, t). b s \\<and> s -c\\<rightarrow> t}\\<^sup>*;\n        z -WHILE b DO c\\<rightarrow> t\\<rbrakk>\n       \\<Longrightarrow> y -WHILE b DO c\\<rightarrow> t\n 2. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "apply(fast elim:exec.WhileTrue)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x1a x2 x3.\n       \\<lbrakk>C \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body};\n        C \\<turnstile> {(=)} x2 {\\<lambda>z. exec z x2}\\<rbrakk>\n       \\<Longrightarrow> C \\<turnstile>\n                         {(=)} LOCAL x1a; x2; x3\n                         {\\<lambda>z. exec z (LOCAL x1a; x2; x3)}", "apply(fastforce intro: hoare.Local elim!: hoare.Conseq)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "text\\<open>\\noindent The proof is by induction on @{term c}. In the @{term\nWhile}-case it is easy to show that @{term\"\\<lambda>z t. (z,t) \\<in> ({(s,t). b\ns \\<and> s -c\\<rightarrow> t})^*\"} is invariant. The precondition \\mbox{@{term[source]\"\\<lambda>z s. z=s\"}}\nestablishes the invariant and a reflexive transitive closure\ninduction shows that the invariant conjoined with @{prop\"\\<not>b t\"}\nimplies the postcondition \\mbox{@{term\"\\<lambda>z t. z -WHILE b DO c\\<rightarrow> t\"}}. The\nremaining cases are trivial.\n\nUsing the @{thm[source]MGT_lemma} (together with the \\<open>CALL\\<close> and the\nassumption rule) one can easily derive\\<close>"], ["", "lemma MGT_CALL: \"{} \\<turnstile> MGT CALL\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<turnstile> MGT CALL", "apply(simp add: MGT_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<turnstile> {(=)} CALL {\\<lambda>z. exec z body}", "apply (rule hoare.Call)"], ["proof (prove)\ngoal (1 subgoal):\n 1. {((=), CALL, \\<lambda>z. exec z body)} \\<turnstile>\n    {(=)} body {\\<lambda>z. exec z body}", "apply (rule hoare.Conseq[OF MGT_lemma[simplified], OF hoare.Asm])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>s t.\n       (\\<forall>z.\n           z = s \\<longrightarrow> z -body\\<rightarrow> t) \\<longrightarrow>\n       (\\<forall>z. z = s \\<longrightarrow> z -body\\<rightarrow> t)", "apply (fast intro:exec.intros)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "text\\<open>\\noindent Using the @{thm[source]MGT_lemma} once more we obtain\n@{prop\"{} \\<turnstile> MGT c\"} and thus by @{thm[source]MGT_implies_complete}\ncompleteness.\\<close>"], ["", "theorem \"{} \\<Turnstile> {P}c{Q}  \\<Longrightarrow>  {} \\<turnstile> {P}c{Q::state assn}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<Turnstile> {P} c {Q} \\<Longrightarrow> {} \\<turnstile> {P} c {Q}", "apply(erule MGT_implies_complete[OF MGT_lemma[OF MGT_CALL]])"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "end"]]}