{"file_name": "/home/qj213/afp-2021-10-22/thys/Abstract-Hoare-Logics/While/HoareTotal.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Abstract-Hoare-Logics", "problem_names": ["theorem \"\\<turnstile>\\<^sub>t {P}c{Q}  \\<Longrightarrow>  \\<Turnstile>\\<^sub>t {P}c{Q}\"", "lemmas wp_defs = wp_def wpt_def", "lemma [simp]: \"wp\\<^sub>t (Do f) Q = (\\<lambda>s. (\\<forall>t \\<in> f s. Q t) \\<and> f s \\<noteq> {})\"", "lemma [simp]: \"wp\\<^sub>t (c\\<^sub>1;c\\<^sub>2) R = wp\\<^sub>t c\\<^sub>1 (wp\\<^sub>t c\\<^sub>2 R)\"", "lemma [simp]:\n \"wp\\<^sub>t (IF b THEN c\\<^sub>1 ELSE c\\<^sub>2) Q = (\\<lambda>s. wp\\<^sub>t (if b s then c\\<^sub>1 else c\\<^sub>2) Q s)\"", "lemma [simp]: \"wp\\<^sub>t (LOCAL f;c;g) Q = (\\<lambda>s. wp\\<^sub>t c (Q o (g s)) (f s))\"", "lemma strengthen_pre: \"\\<lbrakk> \\<forall>s. P' s \\<longrightarrow> P s; \\<turnstile>\\<^sub>t {P}c{Q}  \\<rbrakk> \\<Longrightarrow> \\<turnstile>\\<^sub>t {P'}c{Q}\"", "lemma weaken_post: \"\\<lbrakk> \\<turnstile>\\<^sub>t {P}c{Q}; \\<forall>s. Q s \\<longrightarrow> Q' s  \\<rbrakk> \\<Longrightarrow> \\<turnstile>\\<^sub>t {P}c{Q'}\"", "lemma wp_is_pre[rule_format]: \"\\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}\"", "theorem \"\\<Turnstile>\\<^sub>t {P}c{Q} \\<Longrightarrow> \\<turnstile>\\<^sub>t {P}c{Q}\""], "translations": [["", "theorem \"\\<turnstile>\\<^sub>t {P}c{Q}  \\<Longrightarrow>  \\<Turnstile>\\<^sub>t {P}c{Q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>t {P} c {Q} \\<Longrightarrow>\n    \\<Turnstile>\\<^sub>t {P} c {Q}", "apply(unfold hoare_tvalid_def hoare_valid_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>t {P} c {Q} \\<Longrightarrow>\n    (\\<forall>s t.\n        s -c\\<rightarrow> t \\<longrightarrow>\n        P s \\<longrightarrow> Q t) \\<and>\n    (\\<forall>s. P s \\<longrightarrow> c \\<down> s)", "apply(erule thoare.induct)"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<And>f P.\n       (\\<forall>s t.\n           s -Do f\\<rightarrow> t \\<longrightarrow>\n           (\\<forall>t\\<in>f s. P t) \\<and>\n           f s \\<noteq> {} \\<longrightarrow>\n           P t) \\<and>\n       (\\<forall>s.\n           (\\<forall>t\\<in>f s. P t) \\<and>\n           f s \\<noteq> {} \\<longrightarrow>\n           Do f \\<down> s)\n 2. \\<And>P c Q d R.\n       \\<lbrakk>\\<turnstile>\\<^sub>t {P} c {Q};\n        (\\<forall>s t.\n            s -c\\<rightarrow> t \\<longrightarrow>\n            P s \\<longrightarrow> Q t) \\<and>\n        (\\<forall>s. P s \\<longrightarrow> c \\<down> s);\n        \\<turnstile>\\<^sub>t {Q} d {R};\n        (\\<forall>s t.\n            s -d\\<rightarrow> t \\<longrightarrow>\n            Q s \\<longrightarrow> R t) \\<and>\n        (\\<forall>s. Q s \\<longrightarrow> d \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -c; d\\<rightarrow> t \\<longrightarrow>\n                             P s \\<longrightarrow> R t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> (c; d) \\<down> s)\n 3. \\<And>P b c Q d.\n       \\<lbrakk>\\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s} c {Q};\n        (\\<forall>s t.\n            s -c\\<rightarrow> t \\<longrightarrow>\n            P s \\<and> b s \\<longrightarrow> Q t) \\<and>\n        (\\<forall>s. P s \\<and> b s \\<longrightarrow> c \\<down> s);\n        \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> \\<not> b s} d {Q};\n        (\\<forall>s t.\n            s -d\\<rightarrow> t \\<longrightarrow>\n            P s \\<and> \\<not> b s \\<longrightarrow> Q t) \\<and>\n        (\\<forall>s.\n            P s \\<and> \\<not> b s \\<longrightarrow> d \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -IF b THEN c ELSE d\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow> Q t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow>\n                             IF b THEN c ELSE d \\<down> s)\n 4. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -WHILE b DO c\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow>\n                             P t \\<and> \\<not> b t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> WHILE b DO c \\<down> s)\n 5. \\<And>P' P c Q Q'.\n       \\<lbrakk>\\<forall>s. P' s \\<longrightarrow> P s;\n        \\<turnstile>\\<^sub>t {P} c {Q};\n        (\\<forall>s t.\n            s -c\\<rightarrow> t \\<longrightarrow>\n            P s \\<longrightarrow> Q t) \\<and>\n        (\\<forall>s. P s \\<longrightarrow> c \\<down> s);\n        \\<forall>s. Q s \\<longrightarrow> Q' s\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -c\\<rightarrow> t \\<longrightarrow>\n                             P' s \\<longrightarrow> Q' t) \\<and>\n                         (\\<forall>s. P' s \\<longrightarrow> c \\<down> s)\n 6. \\<And>P P' f c Q g.\n       \\<lbrakk>\\<And>s. P s \\<Longrightarrow> P' s (f s);\n        \\<forall>p.\n           \\<turnstile>\\<^sub>t {P' p} c {Q \\<circ> g p} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P' p s \\<longrightarrow> (Q \\<circ> g p) t) \\<and>\n           (\\<forall>s. P' p s \\<longrightarrow> c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -LOCAL f; c; g\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow> Q t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> LOCAL f; c; g \\<down> s)", "apply blast"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>P c Q d R.\n       \\<lbrakk>\\<turnstile>\\<^sub>t {P} c {Q};\n        (\\<forall>s t.\n            s -c\\<rightarrow> t \\<longrightarrow>\n            P s \\<longrightarrow> Q t) \\<and>\n        (\\<forall>s. P s \\<longrightarrow> c \\<down> s);\n        \\<turnstile>\\<^sub>t {Q} d {R};\n        (\\<forall>s t.\n            s -d\\<rightarrow> t \\<longrightarrow>\n            Q s \\<longrightarrow> R t) \\<and>\n        (\\<forall>s. Q s \\<longrightarrow> d \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -c; d\\<rightarrow> t \\<longrightarrow>\n                             P s \\<longrightarrow> R t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> (c; d) \\<down> s)\n 2. \\<And>P b c Q d.\n       \\<lbrakk>\\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s} c {Q};\n        (\\<forall>s t.\n            s -c\\<rightarrow> t \\<longrightarrow>\n            P s \\<and> b s \\<longrightarrow> Q t) \\<and>\n        (\\<forall>s. P s \\<and> b s \\<longrightarrow> c \\<down> s);\n        \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> \\<not> b s} d {Q};\n        (\\<forall>s t.\n            s -d\\<rightarrow> t \\<longrightarrow>\n            P s \\<and> \\<not> b s \\<longrightarrow> Q t) \\<and>\n        (\\<forall>s.\n            P s \\<and> \\<not> b s \\<longrightarrow> d \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -IF b THEN c ELSE d\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow> Q t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow>\n                             IF b THEN c ELSE d \\<down> s)\n 3. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -WHILE b DO c\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow>\n                             P t \\<and> \\<not> b t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> WHILE b DO c \\<down> s)\n 4. \\<And>P' P c Q Q'.\n       \\<lbrakk>\\<forall>s. P' s \\<longrightarrow> P s;\n        \\<turnstile>\\<^sub>t {P} c {Q};\n        (\\<forall>s t.\n            s -c\\<rightarrow> t \\<longrightarrow>\n            P s \\<longrightarrow> Q t) \\<and>\n        (\\<forall>s. P s \\<longrightarrow> c \\<down> s);\n        \\<forall>s. Q s \\<longrightarrow> Q' s\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -c\\<rightarrow> t \\<longrightarrow>\n                             P' s \\<longrightarrow> Q' t) \\<and>\n                         (\\<forall>s. P' s \\<longrightarrow> c \\<down> s)\n 5. \\<And>P P' f c Q g.\n       \\<lbrakk>\\<And>s. P s \\<Longrightarrow> P' s (f s);\n        \\<forall>p.\n           \\<turnstile>\\<^sub>t {P' p} c {Q \\<circ> g p} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P' p s \\<longrightarrow> (Q \\<circ> g p) t) \\<and>\n           (\\<forall>s. P' p s \\<longrightarrow> c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -LOCAL f; c; g\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow> Q t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> LOCAL f; c; g \\<down> s)", "apply blast"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>P b c Q d.\n       \\<lbrakk>\\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s} c {Q};\n        (\\<forall>s t.\n            s -c\\<rightarrow> t \\<longrightarrow>\n            P s \\<and> b s \\<longrightarrow> Q t) \\<and>\n        (\\<forall>s. P s \\<and> b s \\<longrightarrow> c \\<down> s);\n        \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> \\<not> b s} d {Q};\n        (\\<forall>s t.\n            s -d\\<rightarrow> t \\<longrightarrow>\n            P s \\<and> \\<not> b s \\<longrightarrow> Q t) \\<and>\n        (\\<forall>s.\n            P s \\<and> \\<not> b s \\<longrightarrow> d \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -IF b THEN c ELSE d\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow> Q t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow>\n                             IF b THEN c ELSE d \\<down> s)\n 2. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -WHILE b DO c\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow>\n                             P t \\<and> \\<not> b t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> WHILE b DO c \\<down> s)\n 3. \\<And>P' P c Q Q'.\n       \\<lbrakk>\\<forall>s. P' s \\<longrightarrow> P s;\n        \\<turnstile>\\<^sub>t {P} c {Q};\n        (\\<forall>s t.\n            s -c\\<rightarrow> t \\<longrightarrow>\n            P s \\<longrightarrow> Q t) \\<and>\n        (\\<forall>s. P s \\<longrightarrow> c \\<down> s);\n        \\<forall>s. Q s \\<longrightarrow> Q' s\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -c\\<rightarrow> t \\<longrightarrow>\n                             P' s \\<longrightarrow> Q' t) \\<and>\n                         (\\<forall>s. P' s \\<longrightarrow> c \\<down> s)\n 4. \\<And>P P' f c Q g.\n       \\<lbrakk>\\<And>s. P s \\<Longrightarrow> P' s (f s);\n        \\<forall>p.\n           \\<turnstile>\\<^sub>t {P' p} c {Q \\<circ> g p} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P' p s \\<longrightarrow> (Q \\<circ> g p) t) \\<and>\n           (\\<forall>s. P' p s \\<longrightarrow> c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -LOCAL f; c; g\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow> Q t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> LOCAL f; c; g \\<down> s)", "apply clarsimp"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -WHILE b DO c\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow>\n                             P t \\<and> \\<not> b t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> WHILE b DO c \\<down> s)\n 2. \\<And>P' P c Q Q'.\n       \\<lbrakk>\\<forall>s. P' s \\<longrightarrow> P s;\n        \\<turnstile>\\<^sub>t {P} c {Q};\n        (\\<forall>s t.\n            s -c\\<rightarrow> t \\<longrightarrow>\n            P s \\<longrightarrow> Q t) \\<and>\n        (\\<forall>s. P s \\<longrightarrow> c \\<down> s);\n        \\<forall>s. Q s \\<longrightarrow> Q' s\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -c\\<rightarrow> t \\<longrightarrow>\n                             P' s \\<longrightarrow> Q' t) \\<and>\n                         (\\<forall>s. P' s \\<longrightarrow> c \\<down> s)\n 3. \\<And>P P' f c Q g.\n       \\<lbrakk>\\<And>s. P s \\<Longrightarrow> P' s (f s);\n        \\<forall>p.\n           \\<turnstile>\\<^sub>t {P' p} c {Q \\<circ> g p} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P' p s \\<longrightarrow> (Q \\<circ> g p) t) \\<and>\n           (\\<forall>s. P' p s \\<longrightarrow> c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -LOCAL f; c; g\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow> Q t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> LOCAL f; c; g \\<down> s)", "defer"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>P' P c Q Q'.\n       \\<lbrakk>\\<forall>s. P' s \\<longrightarrow> P s;\n        \\<turnstile>\\<^sub>t {P} c {Q};\n        (\\<forall>s t.\n            s -c\\<rightarrow> t \\<longrightarrow>\n            P s \\<longrightarrow> Q t) \\<and>\n        (\\<forall>s. P s \\<longrightarrow> c \\<down> s);\n        \\<forall>s. Q s \\<longrightarrow> Q' s\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -c\\<rightarrow> t \\<longrightarrow>\n                             P' s \\<longrightarrow> Q' t) \\<and>\n                         (\\<forall>s. P' s \\<longrightarrow> c \\<down> s)\n 2. \\<And>P P' f c Q g.\n       \\<lbrakk>\\<And>s. P s \\<Longrightarrow> P' s (f s);\n        \\<forall>p.\n           \\<turnstile>\\<^sub>t {P' p} c {Q \\<circ> g p} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P' p s \\<longrightarrow> (Q \\<circ> g p) t) \\<and>\n           (\\<forall>s. P' p s \\<longrightarrow> c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -LOCAL f; c; g\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow> Q t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> LOCAL f; c; g \\<down> s)\n 3. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -WHILE b DO c\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow>\n                             P t \\<and> \\<not> b t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> WHILE b DO c \\<down> s)", "apply blast"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>P P' f c Q g.\n       \\<lbrakk>\\<And>s. P s \\<Longrightarrow> P' s (f s);\n        \\<forall>p.\n           \\<turnstile>\\<^sub>t {P' p} c {Q \\<circ> g p} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P' p s \\<longrightarrow> (Q \\<circ> g p) t) \\<and>\n           (\\<forall>s. P' p s \\<longrightarrow> c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -LOCAL f; c; g\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow> Q t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> LOCAL f; c; g \\<down> s)\n 2. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -WHILE b DO c\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow>\n                             P t \\<and> \\<not> b t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> WHILE b DO c \\<down> s)", "apply(rule conjI)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>P P' f c Q g.\n       \\<lbrakk>\\<And>s. P s \\<Longrightarrow> P' s (f s);\n        \\<forall>p.\n           \\<turnstile>\\<^sub>t {P' p} c {Q \\<circ> g p} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P' p s \\<longrightarrow> (Q \\<circ> g p) t) \\<and>\n           (\\<forall>s. P' p s \\<longrightarrow> c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s t.\n                            s -LOCAL f; c; g\\<rightarrow>\n                            t \\<longrightarrow> P s \\<longrightarrow> Q t\n 2. \\<And>P P' f c Q g.\n       \\<lbrakk>\\<And>s. P s \\<Longrightarrow> P' s (f s);\n        \\<forall>p.\n           \\<turnstile>\\<^sub>t {P' p} c {Q \\<circ> g p} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P' p s \\<longrightarrow> (Q \\<circ> g p) t) \\<and>\n           (\\<forall>s. P' p s \\<longrightarrow> c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s.\n                            P s \\<longrightarrow> LOCAL f; c; g \\<down> s\n 3. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -WHILE b DO c\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow>\n                             P t \\<and> \\<not> b t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> WHILE b DO c \\<down> s)", "apply clarify"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>P P' f c Q g s t ta.\n       \\<lbrakk>\\<And>s. P s \\<Longrightarrow> P' s (f s);\n        \\<forall>p.\n           \\<turnstile>\\<^sub>t {P' p} c {Q \\<circ> g p} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P' p s \\<longrightarrow> (Q \\<circ> g p) t) \\<and>\n           (\\<forall>s. P' p s \\<longrightarrow> c \\<down> s);\n        f s -c\\<rightarrow> ta; P s\\<rbrakk>\n       \\<Longrightarrow> Q (g s ta)\n 2. \\<And>P P' f c Q g.\n       \\<lbrakk>\\<And>s. P s \\<Longrightarrow> P' s (f s);\n        \\<forall>p.\n           \\<turnstile>\\<^sub>t {P' p} c {Q \\<circ> g p} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P' p s \\<longrightarrow> (Q \\<circ> g p) t) \\<and>\n           (\\<forall>s. P' p s \\<longrightarrow> c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s.\n                            P s \\<longrightarrow> LOCAL f; c; g \\<down> s\n 3. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -WHILE b DO c\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow>\n                             P t \\<and> \\<not> b t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> WHILE b DO c \\<down> s)", "apply(erule allE)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>P P' f c Q g s t ta.\n       \\<lbrakk>\\<And>s. P s \\<Longrightarrow> P' s (f s);\n        f s -c\\<rightarrow> ta; P s;\n        \\<turnstile>\\<^sub>t {P' (?p306 P P' f c Q g s t ta)} c\n                             {Q \\<circ>\n                              g (?p306 P P' f c Q g s t ta)} \\<and>\n        (\\<forall>sa tb.\n            sa -c\\<rightarrow> tb \\<longrightarrow>\n            P' (?p306 P P' f c Q g s t ta) sa \\<longrightarrow>\n            (Q \\<circ> g (?p306 P P' f c Q g s t ta)) tb) \\<and>\n        (\\<forall>sa.\n            P' (?p306 P P' f c Q g s t ta) sa \\<longrightarrow>\n            c \\<down> sa)\\<rbrakk>\n       \\<Longrightarrow> Q (g s ta)\n 2. \\<And>P P' f c Q g.\n       \\<lbrakk>\\<And>s. P s \\<Longrightarrow> P' s (f s);\n        \\<forall>p.\n           \\<turnstile>\\<^sub>t {P' p} c {Q \\<circ> g p} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P' p s \\<longrightarrow> (Q \\<circ> g p) t) \\<and>\n           (\\<forall>s. P' p s \\<longrightarrow> c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s.\n                            P s \\<longrightarrow> LOCAL f; c; g \\<down> s\n 3. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -WHILE b DO c\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow>\n                             P t \\<and> \\<not> b t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> WHILE b DO c \\<down> s)", "apply clarify"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>P P' f c Q g s t ta.\n       \\<lbrakk>\\<And>s. P s \\<Longrightarrow> P' s (f s);\n        f s -c\\<rightarrow> ta; P s;\n        \\<turnstile>\\<^sub>t {P' (?p306 P P' f c Q g s t ta)} c\n                             {Q \\<circ> g (?p306 P P' f c Q g s t ta)};\n        \\<forall>sa tb.\n           sa -c\\<rightarrow> tb \\<longrightarrow>\n           P' (?p306 P P' f c Q g s t ta) sa \\<longrightarrow>\n           (Q \\<circ> g (?p306 P P' f c Q g s t ta)) tb;\n        \\<forall>sa.\n           P' (?p306 P P' f c Q g s t ta) sa \\<longrightarrow>\n           c \\<down> sa\\<rbrakk>\n       \\<Longrightarrow> Q (g s ta)\n 2. \\<And>P P' f c Q g.\n       \\<lbrakk>\\<And>s. P s \\<Longrightarrow> P' s (f s);\n        \\<forall>p.\n           \\<turnstile>\\<^sub>t {P' p} c {Q \\<circ> g p} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P' p s \\<longrightarrow> (Q \\<circ> g p) t) \\<and>\n           (\\<forall>s. P' p s \\<longrightarrow> c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s.\n                            P s \\<longrightarrow> LOCAL f; c; g \\<down> s\n 3. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -WHILE b DO c\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow>\n                             P t \\<and> \\<not> b t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> WHILE b DO c \\<down> s)", "apply(erule allE, erule allE, erule impE, erule asm_rl)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>P P' f c Q g s t ta.\n       \\<lbrakk>\\<And>s. P s \\<Longrightarrow> P' s (f s);\n        f s -c\\<rightarrow> ta; P s;\n        \\<turnstile>\\<^sub>t {P' (?p306 P P' f c Q g s t ta)} c\n                             {Q \\<circ> g (?p306 P P' f c Q g s t ta)};\n        \\<forall>sa.\n           P' (?p306 P P' f c Q g s t ta) sa \\<longrightarrow> c \\<down> sa;\n        P' (?p306 P P' f c Q g s t ta) (f s) \\<longrightarrow>\n        (Q \\<circ> g (?p306 P P' f c Q g s t ta)) ta\\<rbrakk>\n       \\<Longrightarrow> Q (g s ta)\n 2. \\<And>P P' f c Q g.\n       \\<lbrakk>\\<And>s. P s \\<Longrightarrow> P' s (f s);\n        \\<forall>p.\n           \\<turnstile>\\<^sub>t {P' p} c {Q \\<circ> g p} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P' p s \\<longrightarrow> (Q \\<circ> g p) t) \\<and>\n           (\\<forall>s. P' p s \\<longrightarrow> c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s.\n                            P s \\<longrightarrow> LOCAL f; c; g \\<down> s\n 3. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -WHILE b DO c\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow>\n                             P t \\<and> \\<not> b t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> WHILE b DO c \\<down> s)", "apply simp"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>P P' f c Q g s t ta.\n       \\<lbrakk>\\<And>s. P s \\<Longrightarrow> P' s (f s);\n        f s -c\\<rightarrow> ta; P s;\n        \\<turnstile>\\<^sub>t {P' (?p306 P P' f c Q g s t ta)} c\n                             {Q \\<circ> g (?p306 P P' f c Q g s t ta)};\n        \\<forall>sa.\n           P' (?p306 P P' f c Q g s t ta) sa \\<longrightarrow> c \\<down> sa;\n        P' (?p306 P P' f c Q g s t ta) (f s) \\<longrightarrow>\n        Q (g (?p306 P P' f c Q g s t ta) ta)\\<rbrakk>\n       \\<Longrightarrow> Q (g s ta)\n 2. \\<And>P P' f c Q g.\n       \\<lbrakk>\\<And>s. P s \\<Longrightarrow> P' s (f s);\n        \\<forall>p.\n           \\<turnstile>\\<^sub>t {P' p} c {Q \\<circ> g p} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P' p s \\<longrightarrow> (Q \\<circ> g p) t) \\<and>\n           (\\<forall>s. P' p s \\<longrightarrow> c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s.\n                            P s \\<longrightarrow> LOCAL f; c; g \\<down> s\n 3. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -WHILE b DO c\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow>\n                             P t \\<and> \\<not> b t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> WHILE b DO c \\<down> s)", "apply(erule mp)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>P P' f c Q g s t ta.\n       \\<lbrakk>\\<And>s. P s \\<Longrightarrow> P' s (f s);\n        f s -c\\<rightarrow> ta; P s;\n        \\<turnstile>\\<^sub>t {P' s} c {Q \\<circ> g s};\n        \\<forall>sa. P' s sa \\<longrightarrow> c \\<down> sa\\<rbrakk>\n       \\<Longrightarrow> P' s (f s)\n 2. \\<And>P P' f c Q g.\n       \\<lbrakk>\\<And>s. P s \\<Longrightarrow> P' s (f s);\n        \\<forall>p.\n           \\<turnstile>\\<^sub>t {P' p} c {Q \\<circ> g p} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P' p s \\<longrightarrow> (Q \\<circ> g p) t) \\<and>\n           (\\<forall>s. P' p s \\<longrightarrow> c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s.\n                            P s \\<longrightarrow> LOCAL f; c; g \\<down> s\n 3. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -WHILE b DO c\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow>\n                             P t \\<and> \\<not> b t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> WHILE b DO c \\<down> s)", "apply(simp)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>P P' f c Q g.\n       \\<lbrakk>\\<And>s. P s \\<Longrightarrow> P' s (f s);\n        \\<forall>p.\n           \\<turnstile>\\<^sub>t {P' p} c {Q \\<circ> g p} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P' p s \\<longrightarrow> (Q \\<circ> g p) t) \\<and>\n           (\\<forall>s. P' p s \\<longrightarrow> c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s.\n                            P s \\<longrightarrow> LOCAL f; c; g \\<down> s\n 2. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -WHILE b DO c\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow>\n                             P t \\<and> \\<not> b t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> WHILE b DO c \\<down> s)", "apply blast"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>s t.\n                             s -WHILE b DO c\\<rightarrow>\n                             t \\<longrightarrow>\n                             P s \\<longrightarrow>\n                             P t \\<and> \\<not> b t) \\<and>\n                         (\\<forall>s.\n                             P s \\<longrightarrow> WHILE b DO c \\<down> s)", "apply(rule conjI)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s t.\n                            s -WHILE b DO c\\<rightarrow> t \\<longrightarrow>\n                            P s \\<longrightarrow> P t \\<and> \\<not> b t\n 2. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s.\n                            P s \\<longrightarrow> WHILE b DO c \\<down> s", "apply(rule allI)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>r P b c s.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>t.\n                            s -WHILE b DO c\\<rightarrow> t \\<longrightarrow>\n                            P s \\<longrightarrow> P t \\<and> \\<not> b t\n 2. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s.\n                            P s \\<longrightarrow> WHILE b DO c \\<down> s", "apply(erule wf_induct)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>r P b c s x.\n       \\<lbrakk>\\<forall>s'.\n                   \\<turnstile>\\<^sub>t {\\<lambda>s.\n      P s \\<and> b s \\<and> s' = s}\n  c {\\<lambda>s. P s \\<and> (s, s') \\<in> r} \\<and>\n                   (\\<forall>s t.\n                       s -c\\<rightarrow> t \\<longrightarrow>\n                       P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n                       P t \\<and> (t, s') \\<in> r) \\<and>\n                   (\\<forall>s.\n                       P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n                       c \\<down> s);\n        \\<forall>y.\n           (y, x) \\<in> r \\<longrightarrow>\n           (\\<forall>t.\n               y -WHILE b DO c\\<rightarrow> t \\<longrightarrow>\n               P y \\<longrightarrow> P t \\<and> \\<not> b t)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>t.\n                            x -WHILE b DO c\\<rightarrow> t \\<longrightarrow>\n                            P x \\<longrightarrow> P t \\<and> \\<not> b t\n 2. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s.\n                            P s \\<longrightarrow> WHILE b DO c \\<down> s", "apply clarify"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>r P b c s x t.\n       \\<lbrakk>\\<forall>s'.\n                   \\<turnstile>\\<^sub>t {\\<lambda>s.\n      P s \\<and> b s \\<and> s' = s}\n  c {\\<lambda>s. P s \\<and> (s, s') \\<in> r} \\<and>\n                   (\\<forall>s t.\n                       s -c\\<rightarrow> t \\<longrightarrow>\n                       P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n                       P t \\<and> (t, s') \\<in> r) \\<and>\n                   (\\<forall>s.\n                       P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n                       c \\<down> s);\n        \\<forall>y.\n           (y, x) \\<in> r \\<longrightarrow>\n           (\\<forall>t.\n               y -WHILE b DO c\\<rightarrow> t \\<longrightarrow>\n               P y \\<longrightarrow> P t \\<and> \\<not> b t);\n        x -WHILE b DO c\\<rightarrow> t; P x\\<rbrakk>\n       \\<Longrightarrow> P t \\<and> \\<not> b t\n 2. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s.\n                            P s \\<longrightarrow> WHILE b DO c \\<down> s", "apply(drule unfold_while[THEN iffD1])"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>r P b c s x t.\n       \\<lbrakk>\\<forall>s'.\n                   \\<turnstile>\\<^sub>t {\\<lambda>s.\n      P s \\<and> b s \\<and> s' = s}\n  c {\\<lambda>s. P s \\<and> (s, s') \\<in> r} \\<and>\n                   (\\<forall>s t.\n                       s -c\\<rightarrow> t \\<longrightarrow>\n                       P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n                       P t \\<and> (t, s') \\<in> r) \\<and>\n                   (\\<forall>s.\n                       P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n                       c \\<down> s);\n        \\<forall>y.\n           (y, x) \\<in> r \\<longrightarrow>\n           (\\<forall>t.\n               y -WHILE b DO c\\<rightarrow> t \\<longrightarrow>\n               P y \\<longrightarrow> P t \\<and> \\<not> b t);\n        P x;\n        x -IF b THEN c; WHILE b DO c ELSE Do (\\<lambda>s. {s})\\<rightarrow>\n        t\\<rbrakk>\n       \\<Longrightarrow> P t \\<and> \\<not> b t\n 2. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s.\n                            P s \\<longrightarrow> WHILE b DO c \\<down> s", "apply (simp split: if_split_asm)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>r P b c x t.\n       \\<lbrakk>\\<forall>s'.\n                   \\<turnstile>\\<^sub>t {\\<lambda>s.\n      P s \\<and> b s \\<and> s' = s}\n  c {\\<lambda>s. P s \\<and> (s, s') \\<in> r} \\<and>\n                   (\\<forall>t.\n                       s' -c\\<rightarrow> t \\<longrightarrow>\n                       P s' \\<and> b s' \\<longrightarrow>\n                       P t \\<and> (t, s') \\<in> r) \\<and>\n                   (P s' \\<and> b s' \\<longrightarrow> c \\<down> s');\n        \\<forall>y.\n           (y, x) \\<in> r \\<longrightarrow>\n           (\\<forall>t.\n               y -WHILE b DO c\\<rightarrow> t \\<longrightarrow>\n               P y \\<longrightarrow> P t \\<and> \\<not> b t);\n        P x; b x;\n        \\<exists>ta.\n           x -c\\<rightarrow> ta \\<and> ta -WHILE b DO c\\<rightarrow>\n           t\\<rbrakk>\n       \\<Longrightarrow> P t \\<and> \\<not> b t\n 2. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s.\n                            P s \\<longrightarrow> WHILE b DO c \\<down> s", "apply blast"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>r P b c.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> \\<forall>s.\n                            P s \\<longrightarrow> WHILE b DO c \\<down> s", "apply(rule allI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>r P b c s.\n       \\<lbrakk>wf r;\n        \\<forall>s'.\n           \\<turnstile>\\<^sub>t {\\<lambda>s. P s \\<and> b s \\<and> s' = s} c\n                                {\\<lambda>s.\n                                    P s \\<and> (s, s') \\<in> r} \\<and>\n           (\\<forall>s t.\n               s -c\\<rightarrow> t \\<longrightarrow>\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               P t \\<and> (t, s') \\<in> r) \\<and>\n           (\\<forall>s.\n               P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n               c \\<down> s)\\<rbrakk>\n       \\<Longrightarrow> P s \\<longrightarrow> WHILE b DO c \\<down> s", "apply(erule wf_induct)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>r P b c s x.\n       \\<lbrakk>\\<forall>s'.\n                   \\<turnstile>\\<^sub>t {\\<lambda>s.\n      P s \\<and> b s \\<and> s' = s}\n  c {\\<lambda>s. P s \\<and> (s, s') \\<in> r} \\<and>\n                   (\\<forall>s t.\n                       s -c\\<rightarrow> t \\<longrightarrow>\n                       P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n                       P t \\<and> (t, s') \\<in> r) \\<and>\n                   (\\<forall>s.\n                       P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n                       c \\<down> s);\n        \\<forall>y.\n           (y, x) \\<in> r \\<longrightarrow>\n           P y \\<longrightarrow> WHILE b DO c \\<down> y\\<rbrakk>\n       \\<Longrightarrow> P x \\<longrightarrow> WHILE b DO c \\<down> x", "apply clarify"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>r P b c s x.\n       \\<lbrakk>\\<forall>s'.\n                   \\<turnstile>\\<^sub>t {\\<lambda>s.\n      P s \\<and> b s \\<and> s' = s}\n  c {\\<lambda>s. P s \\<and> (s, s') \\<in> r} \\<and>\n                   (\\<forall>s t.\n                       s -c\\<rightarrow> t \\<longrightarrow>\n                       P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n                       P t \\<and> (t, s') \\<in> r) \\<and>\n                   (\\<forall>s.\n                       P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n                       c \\<down> s);\n        \\<forall>y.\n           (y, x) \\<in> r \\<longrightarrow>\n           P y \\<longrightarrow> WHILE b DO c \\<down> y;\n        P x\\<rbrakk>\n       \\<Longrightarrow> WHILE b DO c \\<down> x", "apply(case_tac \"b x\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>r P b c s x.\n       \\<lbrakk>\\<forall>s'.\n                   \\<turnstile>\\<^sub>t {\\<lambda>s.\n      P s \\<and> b s \\<and> s' = s}\n  c {\\<lambda>s. P s \\<and> (s, s') \\<in> r} \\<and>\n                   (\\<forall>s t.\n                       s -c\\<rightarrow> t \\<longrightarrow>\n                       P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n                       P t \\<and> (t, s') \\<in> r) \\<and>\n                   (\\<forall>s.\n                       P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n                       c \\<down> s);\n        \\<forall>y.\n           (y, x) \\<in> r \\<longrightarrow>\n           P y \\<longrightarrow> WHILE b DO c \\<down> y;\n        P x; b x\\<rbrakk>\n       \\<Longrightarrow> WHILE b DO c \\<down> x\n 2. \\<And>r P b c s x.\n       \\<lbrakk>\\<forall>s'.\n                   \\<turnstile>\\<^sub>t {\\<lambda>s.\n      P s \\<and> b s \\<and> s' = s}\n  c {\\<lambda>s. P s \\<and> (s, s') \\<in> r} \\<and>\n                   (\\<forall>s t.\n                       s -c\\<rightarrow> t \\<longrightarrow>\n                       P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n                       P t \\<and> (t, s') \\<in> r) \\<and>\n                   (\\<forall>s.\n                       P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n                       c \\<down> s);\n        \\<forall>y.\n           (y, x) \\<in> r \\<longrightarrow>\n           P y \\<longrightarrow> WHILE b DO c \\<down> y;\n        P x; \\<not> b x\\<rbrakk>\n       \\<Longrightarrow> WHILE b DO c \\<down> x", "apply (blast intro: termi.WhileTrue)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>r P b c s x.\n       \\<lbrakk>\\<forall>s'.\n                   \\<turnstile>\\<^sub>t {\\<lambda>s.\n      P s \\<and> b s \\<and> s' = s}\n  c {\\<lambda>s. P s \\<and> (s, s') \\<in> r} \\<and>\n                   (\\<forall>s t.\n                       s -c\\<rightarrow> t \\<longrightarrow>\n                       P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n                       P t \\<and> (t, s') \\<in> r) \\<and>\n                   (\\<forall>s.\n                       P s \\<and> b s \\<and> s' = s \\<longrightarrow>\n                       c \\<down> s);\n        \\<forall>y.\n           (y, x) \\<in> r \\<longrightarrow>\n           P y \\<longrightarrow> WHILE b DO c \\<down> y;\n        P x; \\<not> b x\\<rbrakk>\n       \\<Longrightarrow> WHILE b DO c \\<down> x", "apply (erule termi.WhileFalse)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "(*>*)"], ["", "text\\<open>\\noindent In the @{term While}-case we perform a\nlocal proof by wellfounded induction over the given relation @{term r}.\n\nThe completeness proof proceeds along the same lines as the one for partial\ncorrectness. First we have to strengthen our notion of weakest precondition\nto take termination into account:\\<close>"], ["", "definition\n wpt :: \"com \\<Rightarrow> assn \\<Rightarrow> assn\" (\"wp\\<^sub>t\") where\n  \"wp\\<^sub>t c Q = (\\<lambda>s. wp c Q s \\<and> c\\<down>s)\""], ["", "lemmas wp_defs = wp_def wpt_def"], ["", "lemma [simp]: \"wp\\<^sub>t (Do f) Q = (\\<lambda>s. (\\<forall>t \\<in> f s. Q t) \\<and> f s \\<noteq> {})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wp\\<^sub>t (Do f) Q =\n    (\\<lambda>s. (\\<forall>t\\<in>f s. Q t) \\<and> f s \\<noteq> {})", "by(simp add: wpt_def)"], ["", "lemma [simp]: \"wp\\<^sub>t (c\\<^sub>1;c\\<^sub>2) R = wp\\<^sub>t c\\<^sub>1 (wp\\<^sub>t c\\<^sub>2 R)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wp\\<^sub>t (c\\<^sub>1; c\\<^sub>2) R =\n    wp\\<^sub>t c\\<^sub>1 (wp\\<^sub>t c\\<^sub>2 R)", "apply(unfold wp_defs)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>s.\n        (\\<forall>t.\n            s -c\\<^sub>1; c\\<^sub>2\\<rightarrow> t \\<longrightarrow>\n            R t) \\<and>\n        (c\\<^sub>1; c\\<^sub>2) \\<down> s) =\n    (\\<lambda>s.\n        (\\<forall>t.\n            s -c\\<^sub>1\\<rightarrow> t \\<longrightarrow>\n            (\\<forall>ta.\n                t -c\\<^sub>2\\<rightarrow> ta \\<longrightarrow> R ta) \\<and>\n            c\\<^sub>2 \\<down> t) \\<and>\n        c\\<^sub>1 \\<down> s)", "apply(rule ext)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s.\n       ((\\<forall>t.\n            s -c\\<^sub>1; c\\<^sub>2\\<rightarrow> t \\<longrightarrow>\n            R t) \\<and>\n        (c\\<^sub>1; c\\<^sub>2) \\<down> s) =\n       ((\\<forall>t.\n            s -c\\<^sub>1\\<rightarrow> t \\<longrightarrow>\n            (\\<forall>ta.\n                t -c\\<^sub>2\\<rightarrow> ta \\<longrightarrow> R ta) \\<and>\n            c\\<^sub>2 \\<down> t) \\<and>\n        c\\<^sub>1 \\<down> s)", "apply blast"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma [simp]:\n \"wp\\<^sub>t (IF b THEN c\\<^sub>1 ELSE c\\<^sub>2) Q = (\\<lambda>s. wp\\<^sub>t (if b s then c\\<^sub>1 else c\\<^sub>2) Q s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wp\\<^sub>t (IF b THEN c\\<^sub>1 ELSE c\\<^sub>2) Q =\n    (\\<lambda>s. wp\\<^sub>t (if b s then c\\<^sub>1 else c\\<^sub>2) Q s)", "apply(unfold wp_defs)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>s.\n        (\\<forall>t.\n            s -IF b THEN c\\<^sub>1 ELSE c\\<^sub>2\\<rightarrow>\n            t \\<longrightarrow> Q t) \\<and>\n        IF b THEN c\\<^sub>1 ELSE c\\<^sub>2 \\<down> s) =\n    (\\<lambda>s.\n        (\\<forall>t.\n            s -if b s then c\\<^sub>1 else c\\<^sub>2\\<rightarrow>\n            t \\<longrightarrow> Q t) \\<and>\n        (if b s then c\\<^sub>1 else c\\<^sub>2) \\<down> s)", "apply(rule ext)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s.\n       ((\\<forall>t.\n            s -IF b THEN c\\<^sub>1 ELSE c\\<^sub>2\\<rightarrow>\n            t \\<longrightarrow> Q t) \\<and>\n        IF b THEN c\\<^sub>1 ELSE c\\<^sub>2 \\<down> s) =\n       ((\\<forall>t.\n            s -if b s then c\\<^sub>1 else c\\<^sub>2\\<rightarrow>\n            t \\<longrightarrow> Q t) \\<and>\n        (if b s then c\\<^sub>1 else c\\<^sub>2) \\<down> s)", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma [simp]: \"wp\\<^sub>t (LOCAL f;c;g) Q = (\\<lambda>s. wp\\<^sub>t c (Q o (g s)) (f s))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wp\\<^sub>t (LOCAL f; c; g) Q =\n    (\\<lambda>s. wp\\<^sub>t c (Q \\<circ> g s) (f s))", "apply(unfold wp_defs)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>s.\n        (\\<forall>t.\n            s -LOCAL f; c; g\\<rightarrow> t \\<longrightarrow> Q t) \\<and>\n        LOCAL f; c; g \\<down> s) =\n    (\\<lambda>s.\n        (\\<forall>t.\n            f s -c\\<rightarrow> t \\<longrightarrow>\n            (Q \\<circ> g s) t) \\<and>\n        c \\<down> f s)", "apply(rule ext)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s.\n       ((\\<forall>t.\n            s -LOCAL f; c; g\\<rightarrow> t \\<longrightarrow> Q t) \\<and>\n        LOCAL f; c; g \\<down> s) =\n       ((\\<forall>t.\n            f s -c\\<rightarrow> t \\<longrightarrow>\n            (Q \\<circ> g s) t) \\<and>\n        c \\<down> f s)", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma strengthen_pre: \"\\<lbrakk> \\<forall>s. P' s \\<longrightarrow> P s; \\<turnstile>\\<^sub>t {P}c{Q}  \\<rbrakk> \\<Longrightarrow> \\<turnstile>\\<^sub>t {P'}c{Q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>s. P' s \\<longrightarrow> P s;\n     \\<turnstile>\\<^sub>t {P} c {Q}\\<rbrakk>\n    \\<Longrightarrow> \\<turnstile>\\<^sub>t {P'} c {Q}", "by(erule thoare.Conseq, assumption, blast)"], ["", "lemma weaken_post: \"\\<lbrakk> \\<turnstile>\\<^sub>t {P}c{Q}; \\<forall>s. Q s \\<longrightarrow> Q' s  \\<rbrakk> \\<Longrightarrow> \\<turnstile>\\<^sub>t {P}c{Q'}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<turnstile>\\<^sub>t {P} c {Q};\n     \\<forall>s. Q s \\<longrightarrow> Q' s\\<rbrakk>\n    \\<Longrightarrow> \\<turnstile>\\<^sub>t {P} c {Q'}", "apply(rule thoare.Conseq)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<turnstile>\\<^sub>t {P} c {Q};\n     \\<forall>s. Q s \\<longrightarrow> Q' s\\<rbrakk>\n    \\<Longrightarrow> \\<forall>s. P s \\<longrightarrow> ?P s\n 2. \\<lbrakk>\\<turnstile>\\<^sub>t {P} c {Q};\n     \\<forall>s. Q s \\<longrightarrow> Q' s\\<rbrakk>\n    \\<Longrightarrow> \\<turnstile>\\<^sub>t {?P} c {?Q}\n 3. \\<lbrakk>\\<turnstile>\\<^sub>t {P} c {Q};\n     \\<forall>s. Q s \\<longrightarrow> Q' s\\<rbrakk>\n    \\<Longrightarrow> \\<forall>s. ?Q s \\<longrightarrow> Q' s", "apply(fast, assumption, assumption)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "inductive_cases [elim!]: \"WHILE b DO c \\<down> s\""], ["", "lemma wp_is_pre[rule_format]: \"\\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}", "apply (induct c arbitrary: Q)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>x Q. \\<turnstile>\\<^sub>t {wp\\<^sub>t (Do x) Q} Do x {Q}\n 2. \\<And>c1 c2 Q.\n       \\<lbrakk>\\<And>Q. \\<turnstile>\\<^sub>t {wp\\<^sub>t c1 Q} c1 {Q};\n        \\<And>Q. \\<turnstile>\\<^sub>t {wp\\<^sub>t c2 Q} c2 {Q}\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>t {wp\\<^sub>t (c1; c2) Q} c1; c2\n        {Q}\n 3. \\<And>x1a c1 c2 Q.\n       \\<lbrakk>\\<And>Q. \\<turnstile>\\<^sub>t {wp\\<^sub>t c1 Q} c1 {Q};\n        \\<And>Q. \\<turnstile>\\<^sub>t {wp\\<^sub>t c2 Q} c2 {Q}\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>t {wp\\<^sub>t\n          (IF x1a THEN c1 ELSE c2) Q}\n        IF x1a THEN c1 ELSE c2 {Q}\n 4. \\<And>x1a c Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<turnstile>\\<^sub>t {wp\\<^sub>t (WHILE x1a DO c) Q} WHILE x1a DO c\n                            {Q}\n 5. \\<And>x1a c x3 Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<turnstile>\\<^sub>t {wp\\<^sub>t (LOCAL x1a; c; x3) Q}\n                            LOCAL x1a; c; x3 {Q}", "apply simp_all"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>x Q.\n       \\<turnstile>\\<^sub>t {\\<lambda>s.\n                                (\\<forall>t\\<in>x s. Q t) \\<and>\n                                x s \\<noteq> {}}\n                            Do x {Q}\n 2. \\<And>c1 c2 Q.\n       \\<lbrakk>\\<And>Q. \\<turnstile>\\<^sub>t {wp\\<^sub>t c1 Q} c1 {Q};\n        \\<And>Q. \\<turnstile>\\<^sub>t {wp\\<^sub>t c2 Q} c2 {Q}\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>t {wp\\<^sub>t c1\n          (wp\\<^sub>t c2 Q)}\n        c1; c2 {Q}\n 3. \\<And>x1a c1 c2 Q.\n       \\<lbrakk>\\<And>Q. \\<turnstile>\\<^sub>t {wp\\<^sub>t c1 Q} c1 {Q};\n        \\<And>Q. \\<turnstile>\\<^sub>t {wp\\<^sub>t c2 Q} c2 {Q}\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>t {\\<lambda>s.\n            (x1a s \\<longrightarrow> wp\\<^sub>t c1 Q s) \\<and>\n            (\\<not> x1a s \\<longrightarrow> wp\\<^sub>t c2 Q s)}\n        IF x1a THEN c1 ELSE c2 {Q}\n 4. \\<And>x1a c Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<turnstile>\\<^sub>t {wp\\<^sub>t (WHILE x1a DO c) Q} WHILE x1a DO c\n                            {Q}\n 5. \\<And>x1a c x3 Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<turnstile>\\<^sub>t {\\<lambda>s.\n                                wp\\<^sub>t c (Q \\<circ> x3 s) (x1a s)}\n                            LOCAL x1a; c; x3 {Q}", "apply(blast intro:thoare.Do thoare.Conseq)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>c1 c2 Q.\n       \\<lbrakk>\\<And>Q. \\<turnstile>\\<^sub>t {wp\\<^sub>t c1 Q} c1 {Q};\n        \\<And>Q. \\<turnstile>\\<^sub>t {wp\\<^sub>t c2 Q} c2 {Q}\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>t {wp\\<^sub>t c1\n          (wp\\<^sub>t c2 Q)}\n        c1; c2 {Q}\n 2. \\<And>x1a c1 c2 Q.\n       \\<lbrakk>\\<And>Q. \\<turnstile>\\<^sub>t {wp\\<^sub>t c1 Q} c1 {Q};\n        \\<And>Q. \\<turnstile>\\<^sub>t {wp\\<^sub>t c2 Q} c2 {Q}\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>t {\\<lambda>s.\n            (x1a s \\<longrightarrow> wp\\<^sub>t c1 Q s) \\<and>\n            (\\<not> x1a s \\<longrightarrow> wp\\<^sub>t c2 Q s)}\n        IF x1a THEN c1 ELSE c2 {Q}\n 3. \\<And>x1a c Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<turnstile>\\<^sub>t {wp\\<^sub>t (WHILE x1a DO c) Q} WHILE x1a DO c\n                            {Q}\n 4. \\<And>x1a c x3 Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<turnstile>\\<^sub>t {\\<lambda>s.\n                                wp\\<^sub>t c (Q \\<circ> x3 s) (x1a s)}\n                            LOCAL x1a; c; x3 {Q}", "apply(blast intro:thoare.Semi thoare.Conseq)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x1a c1 c2 Q.\n       \\<lbrakk>\\<And>Q. \\<turnstile>\\<^sub>t {wp\\<^sub>t c1 Q} c1 {Q};\n        \\<And>Q. \\<turnstile>\\<^sub>t {wp\\<^sub>t c2 Q} c2 {Q}\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>t {\\<lambda>s.\n            (x1a s \\<longrightarrow> wp\\<^sub>t c1 Q s) \\<and>\n            (\\<not> x1a s \\<longrightarrow> wp\\<^sub>t c2 Q s)}\n        IF x1a THEN c1 ELSE c2 {Q}\n 2. \\<And>x1a c Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<turnstile>\\<^sub>t {wp\\<^sub>t (WHILE x1a DO c) Q} WHILE x1a DO c\n                            {Q}\n 3. \\<And>x1a c x3 Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<turnstile>\\<^sub>t {\\<lambda>s.\n                                wp\\<^sub>t c (Q \\<circ> x3 s) (x1a s)}\n                            LOCAL x1a; c; x3 {Q}", "apply(blast intro:thoare.If thoare.Conseq)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x1a c Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<turnstile>\\<^sub>t {wp\\<^sub>t (WHILE x1a DO c) Q} WHILE x1a DO c\n                            {Q}\n 2. \\<And>x1a c x3 Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<turnstile>\\<^sub>t {\\<lambda>s.\n                                wp\\<^sub>t c (Q \\<circ> x3 s) (x1a s)}\n                            LOCAL x1a; c; x3 {Q}", "defer"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x1a c x3 Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<turnstile>\\<^sub>t {\\<lambda>s.\n                                wp\\<^sub>t c (Q \\<circ> x3 s) (x1a s)}\n                            LOCAL x1a; c; x3 {Q}\n 2. \\<And>x1a c Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<turnstile>\\<^sub>t {wp\\<^sub>t (WHILE x1a DO c) Q} WHILE x1a DO c\n                            {Q}", "apply(fastforce intro!: thoare.Local)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x1a c Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<turnstile>\\<^sub>t {wp\\<^sub>t (WHILE x1a DO c) Q} WHILE x1a DO c\n                            {Q}", "apply(rename_tac b c Q)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>b c Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<turnstile>\\<^sub>t {wp\\<^sub>t (WHILE b DO c) Q} WHILE b DO c {Q}", "apply(rule weaken_post)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>b c Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<turnstile>\\<^sub>t {wp\\<^sub>t (WHILE b DO c) Q} WHILE b DO c\n                            {?Q97 b c Q}\n 2. \\<And>b c Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<forall>s. ?Q97 b c Q s \\<longrightarrow> Q s", "apply(rule_tac b=b and c=c in thoare.While)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>b c Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       wf (?r100 b c Q)\n 2. \\<And>b c Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<forall>s'.\n          \\<turnstile>\\<^sub>t {\\<lambda>s.\n                                   wp\\<^sub>t (WHILE b DO c) Q s \\<and>\n                                   b s \\<and> s' = s}\n                               c {\\<lambda>s.\n                                     wp\\<^sub>t (WHILE b DO c) Q s \\<and>\n                                     (s, s') \\<in> ?r100 b c Q}\n 3. \\<And>b c Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<forall>s.\n          wp\\<^sub>t (WHILE b DO c) Q s \\<and> \\<not> b s \\<longrightarrow>\n          Q s", "apply(rule_tac b=b and c=c in wf_termi)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>b c Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<forall>s'.\n          \\<turnstile>\\<^sub>t {\\<lambda>s.\n                                   wp\\<^sub>t (WHILE b DO c) Q s \\<and>\n                                   b s \\<and> s' = s}\n                               c {\\<lambda>s.\n                                     wp\\<^sub>t (WHILE b DO c) Q s \\<and>\n                                     (s, s')\n                                     \\<in> {(t, s).\n      WHILE b DO c \\<down> s \\<and> b s \\<and> s -c\\<rightarrow> t}}\n 2. \\<And>b c Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<forall>s.\n          wp\\<^sub>t (WHILE b DO c) Q s \\<and> \\<not> b s \\<longrightarrow>\n          Q s", "defer"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>b c Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<forall>s.\n          wp\\<^sub>t (WHILE b DO c) Q s \\<and> \\<not> b s \\<longrightarrow>\n          Q s\n 2. \\<And>b c Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<forall>s'.\n          \\<turnstile>\\<^sub>t {\\<lambda>s.\n                                   wp\\<^sub>t (WHILE b DO c) Q s \\<and>\n                                   b s \\<and> s' = s}\n                               c {\\<lambda>s.\n                                     wp\\<^sub>t (WHILE b DO c) Q s \\<and>\n                                     (s, s')\n                                     \\<in> {(t, s).\n      WHILE b DO c \\<down> s \\<and> b s \\<and> s -c\\<rightarrow> t}}", "apply (simp add:wp_defs unfold_while)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>b c Q.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<forall>s'.\n          \\<turnstile>\\<^sub>t {\\<lambda>s.\n                                   wp\\<^sub>t (WHILE b DO c) Q s \\<and>\n                                   b s \\<and> s' = s}\n                               c {\\<lambda>s.\n                                     wp\\<^sub>t (WHILE b DO c) Q s \\<and>\n                                     (s, s')\n                                     \\<in> {(t, s).\n      WHILE b DO c \\<down> s \\<and> b s \\<and> s -c\\<rightarrow> t}}", "apply(rule allI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>b c Q s'.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<turnstile>\\<^sub>t {\\<lambda>s.\n                                wp\\<^sub>t (WHILE b DO c) Q s \\<and>\n                                b s \\<and> s' = s}\n                            c {\\<lambda>s.\n                                  wp\\<^sub>t (WHILE b DO c) Q s \\<and>\n                                  (s, s')\n                                  \\<in> {(t, s).\n   WHILE b DO c \\<down> s \\<and> b s \\<and> s -c\\<rightarrow> t}}", "apply(rule strengthen_pre)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>b c Q s'.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<forall>s.\n          wp\\<^sub>t (WHILE b DO c) Q s \\<and>\n          b s \\<and> s' = s \\<longrightarrow>\n          ?P103 b c Q s' s\n 2. \\<And>b c Q s'.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<turnstile>\\<^sub>t {?P103 b c Q s'} c\n                            {\\<lambda>s.\n                                wp\\<^sub>t (WHILE b DO c) Q s \\<and>\n                                (s, s')\n                                \\<in> {(t, s).\n WHILE b DO c \\<down> s \\<and> b s \\<and> s -c\\<rightarrow> t}}", "prefer 2"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>b c Q s'.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<turnstile>\\<^sub>t {?P103 b c Q s'} c\n                            {\\<lambda>s.\n                                wp\\<^sub>t (WHILE b DO c) Q s \\<and>\n                                (s, s')\n                                \\<in> {(t, s).\n WHILE b DO c \\<down> s \\<and> b s \\<and> s -c\\<rightarrow> t}}\n 2. \\<And>b c Q s'.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<forall>s.\n          wp\\<^sub>t (WHILE b DO c) Q s \\<and>\n          b s \\<and> s' = s \\<longrightarrow>\n          ?P103 b c Q s' s", "apply fast"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>b c Q s'.\n       (\\<And>Q.\n           \\<turnstile>\\<^sub>t {wp\\<^sub>t c Q} c {Q}) \\<Longrightarrow>\n       \\<forall>s.\n          wp\\<^sub>t (WHILE b DO c) Q s \\<and>\n          b s \\<and> s' = s \\<longrightarrow>\n          wp\\<^sub>t c\n           (\\<lambda>s.\n               wp\\<^sub>t (WHILE b DO c) Q s \\<and>\n               (s, s')\n               \\<in> {(t, s).\n                      WHILE b DO c \\<down> s \\<and>\n                      b s \\<and> s -c\\<rightarrow> t})\n           s", "apply(clarsimp simp add: wp_defs)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>b c Q s' t ta.\n       \\<lbrakk>\\<And>Q.\n                   \\<turnstile>\\<^sub>t {\\<lambda>s.\n      (\\<forall>t. s -c\\<rightarrow> t \\<longrightarrow> Q t) \\<and>\n      c \\<down> s}\n  c {Q};\n        \\<forall>t. s' -WHILE b DO c\\<rightarrow> t \\<longrightarrow> Q t;\n        b s'; c \\<down> s';\n        \\<forall>t.\n           s' -c\\<rightarrow> t \\<longrightarrow> WHILE b DO c \\<down> t;\n        s' -c\\<rightarrow> t; t -WHILE b DO c\\<rightarrow> ta\\<rbrakk>\n       \\<Longrightarrow> Q ta", "apply(blast intro:exec.intros)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "text\\<open>\\noindent The @{term While}-case is interesting because we now have to furnish a\nsuitable wellfounded relation. Of course the execution of the loop\nbody directly yields the required relation.\nThe actual completeness theorem follows directly, in the same manner\nas for partial correctness.\\<close>"], ["", "theorem \"\\<Turnstile>\\<^sub>t {P}c{Q} \\<Longrightarrow> \\<turnstile>\\<^sub>t {P}c{Q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Turnstile>\\<^sub>t {P} c {Q} \\<Longrightarrow>\n    \\<turnstile>\\<^sub>t {P} c {Q}", "apply (rule strengthen_pre[OF _ wp_is_pre])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Turnstile>\\<^sub>t {P} c {Q} \\<Longrightarrow>\n    \\<forall>s. P s \\<longrightarrow> wp\\<^sub>t c Q s", "apply(unfold hoare_tvalid_def hoare_valid_def wp_defs)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>s t.\n        s -c\\<rightarrow> t \\<longrightarrow>\n        P s \\<longrightarrow> Q t) \\<and>\n    (\\<forall>s. P s \\<longrightarrow> c \\<down> s) \\<Longrightarrow>\n    \\<forall>s.\n       P s \\<longrightarrow>\n       (\\<forall>t. s -c\\<rightarrow> t \\<longrightarrow> Q t) \\<and>\n       c \\<down> s", "apply blast"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "end"]]}