{"file_name": "/home/qj213/afp-2021-10-22/thys/Integration/Integral.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Integration", "problem_names": ["lemma assumes un: \"(\\<Union>i\\<in>R. B i) = UNIV\" and fin: \"finite R\"\n  and dis: \"\\<forall>j1\\<in>R. \\<forall>j2\\<in>R. j1 \\<noteq> j2 \\<longrightarrow> (B j1) \\<inter> (B j2) = {}\"\n  shows char_split: \"\\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)\"", "lemma assumes ms: \"measure_space M\" and dis: \"\\<forall>j1\\<in>(R::nat set). \\<forall>j2\\<in>R. j1 \\<noteq> j2 \\<longrightarrow> (B j1) \\<inter> (B j2) = {}\"\n  and meas: \"\\<forall>j\\<in>R. B j \\<in> measurable_sets M\"\n  shows measure_sums_UNION: \"(\\<lambda>n. measure M (if n \\<in> R then B n else {})) sums measure M (\\<Union>i\\<in>R. B i)\"", "lemma sumr_sum:\n \"(\\<Sum>i=0..<k::nat. if i \\<in> R then f i else (0::real)) = (\\<Sum>i\\<in>(R\\<inter>{..<k}). f i)\"", "lemma assumes ms: \"measure_space M\" and dis: \"\\<forall>j1\\<in>(R::nat set). \\<forall>j2\\<in>R. j1 \\<noteq> j2 \\<longrightarrow> (B j1) \\<inter> (B j2) = {}\"\n  and meas: \"\\<forall>j\\<in>R. B j \\<in> measurable_sets M\" and fin: \"finite R\"\n  shows measure_sum: \"measure M (\\<Union>i\\<in>R. B i) = (\\<Sum>j\\<in>R. measure M (B j))\"", "lemma assumes ms: \"measure_space M\" and un: \"(\\<Union>i\\<in>R. B i) = UNIV\" and \n  fin: \"finite (R::nat set)\" and dis: \"\\<forall>j1\\<in>R. \\<forall>j2\\<in>R. j1 \\<noteq> j2 \\<longrightarrow> (B j1) \\<inter> (B j2) = {}\"\n  and meas: \"\\<forall>j\\<in>R. B j \\<in> measurable_sets M\" and Ameas: \"A \\<in> measurable_sets M\"\n  shows measure_split: \"measure M A = (\\<Sum>j\\<in>R. measure M (A \\<inter> B j))\"", "lemma prod_encode_fst_inj: \"inj (\\<lambda>i. prod_encode(i,j))\"", "lemma prod_encode_snd_inj: \"inj (\\<lambda>j. prod_encode(i,j))\"", "lemma assumes (*<*)ms:(*>*) \"measure_space M\" and (*<*)a:(*>*) \"a \\<in> sfis f M\" and (*<*)b:(*>*) \"b \\<in> sfis g M\"\n  shows sfis_present: \"\\<exists> z1 z2 C K. \n  f = (\\<lambda>t. \\<Sum>i\\<in>(K::nat set). z1 i * \\<chi> (C i) t) \\<and> g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \n  \\<and> a = (\\<Sum>i\\<in>K. z1 i * measure M (C i)) \\<and> b = (\\<Sum>i\\<in>K. z2 i * measure M (C i))\n  \\<and> finite K \\<and> (\\<forall>i\\<in>K. \\<forall>j\\<in>K. i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {})\n  \\<and> (\\<forall>i \\<in> K. C i \\<in> measurable_sets M) \\<and> (\\<Union>i\\<in>K. C i) = UNIV \n  \\<and> nonnegative z1 \\<and> nonnegative z2\"", "lemma assumes ms: \"measure_space M\" and a: \"a \\<in> sfis f M\" and b: \"b \\<in> sfis g M\"\n  shows sfis_add: \"a+b \\<in> sfis (\\<lambda>w. f w + g w) M\"", "lemma assumes ms: \"measure_space M\" and a: \"a \\<in> sfis f M\" \n  and b: \"b \\<in> sfis g M\" and fg: \"f\\<le>g\"\n  shows sfis_mono: \"a \\<le> b\"", "lemma sfis_unique: \n  assumes ms: \"measure_space M\" and a: \"a \\<in> sfis f M\" and b: \"b \\<in> sfis f M\"\n  shows \"a=b\"", "lemma sfis_char:\n  assumes ms: \"measure_space M\" and mA: \"A \\<in> measurable_sets M\" \n  shows \"measure M A \\<in> sfis \\<chi> A M\"", "lemma sfis_times:\n  assumes a: \"a \\<in> sfis f M\" and z: \"0\\<le>z\"\n  shows \"z*a \\<in> sfis (\\<lambda>w. z*f w) M\"", "lemma assumes ms: \"measure_space M\" \n  and a: \"\\<forall>i\\<in>S. a i \\<in> sfis (f i) M\" and S: \"finite S\"\n  shows sfis_sum: \"(\\<Sum>i\\<in>S. a i) \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. f i t) M\"", "lemma sfis_intro:\n  assumes ms: \"measure_space M\" and Ams: \"\\<forall>i \\<in> S. A i \\<in> measurable_sets M\" \n  and nn: \"nonnegative x\" and S: \"finite S\"\n  shows \"(\\<Sum>i\\<in>S. x i * measure M (A i)) \\<in> \n  sfis (\\<lambda>t. \\<Sum>i\\<in>(S::nat set). x i * \\<chi> (A i) t) M\"", "lemma sfis_nn:\n  assumes f: \"a \\<in> sfis f M\"\n  shows \"nonnegative f\"", "lemma sum_rv:\n  assumes rvs: \"\\<forall>k\\<in>K. (f k) \\<in> rv M\" and ms: \"measure_space M\"\n  shows \"(\\<lambda>t. \\<Sum>k\\<in>K. f k t) \\<in> rv M\"", "lemma sfis_rv: \n  assumes ms: \"measure_space M\" and f: \"a \\<in> sfis f M\"\n  shows \"f \\<in> rv M\"", "lemma real_le_mult_sustain:\n  assumes zr: \"\\<And>z. \\<lbrakk>0<z; z<1\\<rbrakk> \\<Longrightarrow> z * r \\<le> y\"\n  shows \"r \\<le> (y::real)\"", "lemma sfis_mon_conv_mono: \n  assumes uf: \"u\\<up>f\" and xu: \"\\<And>n. x n \\<in> sfis (u n) M\" and xy: \"x\\<up>y\"\n    and sr: \"r \\<in> sfis s M\" and sf: \"s \\<le> f\" and ms: \"measure_space M\"\n  shows \"r \\<le> y\"", "lemma sfis_nnfis:\n  assumes s: \"a \\<in> sfis f M\"\n  shows \"a \\<in> nnfis f M\"", "lemma nnfis_times: \n  assumes ms: \"measure_space M\" and a: \"a \\<in> nnfis f M\" and nn: \"0\\<le>z\"\n  shows \"z*a \\<in> nnfis (\\<lambda>w. z*f w) M\"", "lemma nnfis_add:\n  assumes ms: \"measure_space M\" and a: \"a \\<in> nnfis f M\" and b: \"b \\<in> nnfis g M\"\n  shows \"a+b \\<in> nnfis (\\<lambda>w. f w + g w) M\"", "lemma assumes ms: \"measure_space M\" and a: \"a \\<in> nnfis f M\" \n  and b: \"b \\<in> nnfis g M\" and fg: \"f\\<le>g\"\n  shows nnfis_mono: \"a \\<le> b\"", "lemma sf_norm_help:\n  assumes fin: \"finite K\" and jK: \"j \\<in> K\" and tj: \"t \\<in> C j\" and iK: \"\\<forall>i\\<in>K-{j}. t \\<notin> C i\"\n  shows \"(\\<Sum>i\\<in>K. (z i) * \\<chi> (C i) t) = z j\"", "lemma upclose_sfis: \n  assumes ms: \"measure_space M\" and f: \"a \\<in> sfis f M\" and g: \"b \\<in> sfis g M\" \n  shows \"\\<exists>c. c \\<in> sfis (upclose f g) M\"", "lemma mu_sfis:\n  assumes u: \"\\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M\" and ms: \"measure_space M\"\n  shows \"\\<exists>c. \\<forall>m. c m \\<in> sfis (mu u m) M\"", "lemma mu_help:\n  assumes uf: \"\\<And>n. (\\<lambda>m. u m n)\\<up>(f n)\" and fh: \"f\\<up>h\"\n  shows \"(mu u)\\<up>h\" and \"\\<And>n. mu u n \\<le> f n\"", "theorem nnfis_mon_conv:\n  assumes fh: \"f\\<up>h\" and xf: \"\\<And>n. x n \\<in> nnfis (f n) M\" and xy: \"x\\<up>y\"\n  and ms: \"measure_space M\"\n  shows \"y \\<in> nnfis h M\"", "lemma nnfis_nn: assumes \"a \\<in> nnfis f M\"\n  shows \"nonnegative f\"", "lemma assumes (*<*)ms:(*>*) \"measure_space M\" and (*<*)f:(*>*) \"a \\<in> nnfis f M\"\n  shows nnfis_rv: \"f \\<in> rv M\"", "lemma assumes (*<*)ms:(*>*) \"measure_space M\" and (*<*)f(*>*): \"f \\<in> rv M\" and (*<*)nn:(*>*) \"nonnegative f\"\n  shows rv_mon_conv_sfis: \"\\<exists>u x. u\\<up>f \\<and> (\\<forall>n. x n \\<in> sfis (u n) M)\"", "lemma nnfis_integral:\n  assumes nn: \"a \\<in> nnfis f M\" and ms: \"measure_space M\"\n  shows \"integrable f M\" and \"\\<integral> f \\<partial> M = a\"", "lemma nnfis_minus_nnfis_integral:\n  assumes a: \"a \\<in> nnfis f M\" and b: \"b \\<in> nnfis g M\"\n  and ms: \"measure_space M\"\n  shows \"integrable (\\<lambda>t. f t - g t) M\" and \"\\<integral> (\\<lambda>t. f t - g t) \\<partial> M = a - b\"", "theorem assumes (*<*)int:(*>*) \"integrable f M\"\n  shows integrable_rv: \"f \\<in> rv M\"", "theorem integral_char: \n  assumes ms: \"measure_space M\" and mA: \"A \\<in> measurable_sets M\" \n  shows \"\\<integral> \\<chi> A \\<partial> M = measure M A\" and \"integrable \\<chi> A M\"", "theorem integral_add:\n  assumes f: \"integrable f M\" and g: \"integrable g M\"\n  shows \"integrable (\\<lambda>t. f t + g t) M\"\n  and \"\\<integral> (\\<lambda>t. f t + g t) \\<partial>M = \\<integral> f \\<partial>M + \\<integral> g \\<partial>M\"", "theorem integral_mono:\n  assumes f: \"integrable f M\"    \n  and g: \"integrable g M\"  and fg: \"f\\<le>g\"\n  shows \"\\<integral> f \\<partial>M \\<le> \\<integral> g \\<partial>M\"", "theorem integral_times:\n  assumes int: \"integrable f M\"\n  shows \"integrable (\\<lambda>t. a*f t) M\" and \"\\<integral> (\\<lambda>t. a*f t) \\<partial>M = a*\\<integral> f \\<partial>M\"", "theorem assumes int: \"integrable f M\" and a: \"0<a\" and intp: \"integrable (\\<lambda>x. \\<bar>f x\\<bar> ^ n) M\"\n  shows markov_ineq: \"law M f {a..} \\<le>  \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / (a^n)\""], "translations": [["", "lemma assumes un: \"(\\<Union>i\\<in>R. B i) = UNIV\" and fin: \"finite R\"\n  and dis: \"\\<forall>j1\\<in>R. \\<forall>j2\\<in>R. j1 \\<noteq> j2 \\<longrightarrow> (B j1) \\<inter> (B j2) = {}\"\n  shows char_split: \"\\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)", "proof (cases \"t \\<in> A\")"], ["proof (state)\ngoal (2 subgoals):\n 1. t \\<in> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)\n 2. t \\<notin> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)", "case True"], ["proof (state)\nthis:\n  t \\<in> A\n\ngoal (2 subgoals):\n 1. t \\<in> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)\n 2. t \\<notin> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)", "with un"], ["proof (chain)\npicking this:\n  \\<Union> (B ` R) = UNIV\n  t \\<in> A", "obtain j where jR: \"j\\<in>R\" and tj: \"t \\<in> A \\<inter> B j\""], ["proof (prove)\nusing this:\n  \\<Union> (B ` R) = UNIV\n  t \\<in> A\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<lbrakk>j \\<in> R; t \\<in> A \\<inter> B j\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fast"], ["proof (state)\nthis:\n  j \\<in> R\n  t \\<in> A \\<inter> B j\n\ngoal (2 subgoals):\n 1. t \\<in> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)\n 2. t \\<notin> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)", "from tj"], ["proof (chain)\npicking this:\n  t \\<in> A \\<inter> B j", "have \"\\<chi> (A \\<inter> B j) t = 1\""], ["proof (prove)\nusing this:\n  t \\<in> A \\<inter> B j\n\ngoal (1 subgoal):\n 1. \\<chi> (A \\<inter> B j) t = 1", "by (simp add: characteristic_function_def)"], ["proof (state)\nthis:\n  \\<chi> (A \\<inter> B j) t = 1\n\ngoal (2 subgoals):\n 1. t \\<in> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)\n 2. t \\<notin> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)", "with fin jR"], ["proof (chain)\npicking this:\n  finite R\n  j \\<in> R\n  \\<chi> (A \\<inter> B j) t = 1", "have \"(\\<Sum>i\\<in>R-{j}. \\<chi> (A \\<inter> B i) t) = (\\<Sum>i\\<in>R. \\<chi> (A \\<inter> B i) t) - 1\""], ["proof (prove)\nusing this:\n  finite R\n  j \\<in> R\n  \\<chi> (A \\<inter> B j) t = 1\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>R - {j}. \\<chi> (A \\<inter> B i) t) =\n    (\\<Sum>i\\<in>R. \\<chi> (A \\<inter> B i) t) - 1", "by (simp add: sum_diff1)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>R - {j}. \\<chi> (A \\<inter> B i) t) =\n  (\\<Sum>i\\<in>R. \\<chi> (A \\<inter> B i) t) - 1\n\ngoal (2 subgoals):\n 1. t \\<in> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)\n 2. t \\<notin> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>R - {j}. \\<chi> (A \\<inter> B i) t) =\n  (\\<Sum>i\\<in>R. \\<chi> (A \\<inter> B i) t) - 1\n\ngoal (2 subgoals):\n 1. t \\<in> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)\n 2. t \\<notin> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)", "from dis jR tj"], ["proof (chain)\npicking this:\n  \\<forall>j1\\<in>R.\n     \\<forall>j2\\<in>R.\n        j1 \\<noteq> j2 \\<longrightarrow> B j1 \\<inter> B j2 = {}\n  j \\<in> R\n  t \\<in> A \\<inter> B j", "have \"R-{j} = R-{j}\" and \"\\<And>x. x \\<in> R-{j} \\<Longrightarrow> \\<chi> (A \\<inter> B x) t = 0\""], ["proof (prove)\nusing this:\n  \\<forall>j1\\<in>R.\n     \\<forall>j2\\<in>R.\n        j1 \\<noteq> j2 \\<longrightarrow> B j1 \\<inter> B j2 = {}\n  j \\<in> R\n  t \\<in> A \\<inter> B j\n\ngoal (1 subgoal):\n 1. R - {j} = R - {j} &&&\n    (\\<And>x.\n        x \\<in> R - {j} \\<Longrightarrow> \\<chi> (A \\<inter> B x) t = 0)", "by (auto simp add: characteristic_function_def)"], ["proof (state)\nthis:\n  R - {j} = R - {j}\n  ?x \\<in> R - {j} \\<Longrightarrow> \\<chi> (A \\<inter> B ?x) t = 0\n\ngoal (2 subgoals):\n 1. t \\<in> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)\n 2. t \\<notin> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)", "hence \"(\\<Sum>i\\<in>R-{j}. \\<chi> (A \\<inter> B i) t) = (\\<Sum>i\\<in>R-{j}. 0)\""], ["proof (prove)\nusing this:\n  R - {j} = R - {j}\n  ?x \\<in> R - {j} \\<Longrightarrow> \\<chi> (A \\<inter> B ?x) t = 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>R - {j}. \\<chi> (A \\<inter> B i) t) =\n    (\\<Sum>i\\<in>R - {j}. 0)", "by (rule sum.cong)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>R - {j}. \\<chi> (A \\<inter> B i) t) =\n  (\\<Sum>i\\<in>R - {j}. 0)\n\ngoal (2 subgoals):\n 1. t \\<in> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)\n 2. t \\<notin> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>i\\<in>R - {j}. 0) = (\\<Sum>i\\<in>R. \\<chi> (A \\<inter> B i) t) - 1", "have \"1 = (\\<Sum>i\\<in>R. \\<chi> (A \\<inter> B i) t)\""], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<in>R - {j}. 0) = (\\<Sum>i\\<in>R. \\<chi> (A \\<inter> B i) t) - 1\n\ngoal (1 subgoal):\n 1. 1 = (\\<Sum>i\\<in>R. \\<chi> (A \\<inter> B i) t)", "by (simp)"], ["proof (state)\nthis:\n  1 = (\\<Sum>i\\<in>R. \\<chi> (A \\<inter> B i) t)\n\ngoal (2 subgoals):\n 1. t \\<in> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)\n 2. t \\<notin> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)", "with True"], ["proof (chain)\npicking this:\n  t \\<in> A\n  1 = (\\<Sum>i\\<in>R. \\<chi> (A \\<inter> B i) t)", "show ?thesis"], ["proof (prove)\nusing this:\n  t \\<in> A\n  1 = (\\<Sum>i\\<in>R. \\<chi> (A \\<inter> B i) t)\n\ngoal (1 subgoal):\n 1. \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)", "by (simp add: characteristic_function_def)"], ["proof (state)\nthis:\n  \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)\n\ngoal (1 subgoal):\n 1. t \\<notin> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<notin> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)", "case False"], ["proof (state)\nthis:\n  t \\<notin> A\n\ngoal (1 subgoal):\n 1. t \\<notin> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)", "hence \"\\<And>i. \\<chi> (A \\<inter> B i) t = 0\""], ["proof (prove)\nusing this:\n  t \\<notin> A\n\ngoal (1 subgoal):\n 1. \\<And>i. \\<chi> (A \\<inter> B i) t = 0", "by (simp add: characteristic_function_def)"], ["proof (state)\nthis:\n  \\<chi> (A \\<inter> B ?i) t = 0\n\ngoal (1 subgoal):\n 1. t \\<notin> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)", "hence \"0 = (\\<Sum>i\\<in>R. \\<chi> (A \\<inter> B i) t)\""], ["proof (prove)\nusing this:\n  \\<chi> (A \\<inter> B ?i) t = 0\n\ngoal (1 subgoal):\n 1. 0 = (\\<Sum>i\\<in>R. \\<chi> (A \\<inter> B i) t)", "by (simp)"], ["proof (state)\nthis:\n  0 = (\\<Sum>i\\<in>R. \\<chi> (A \\<inter> B i) t)\n\ngoal (1 subgoal):\n 1. t \\<notin> A \\<Longrightarrow>\n    \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)", "with False"], ["proof (chain)\npicking this:\n  t \\<notin> A\n  0 = (\\<Sum>i\\<in>R. \\<chi> (A \\<inter> B i) t)", "show ?thesis"], ["proof (prove)\nusing this:\n  t \\<notin> A\n  0 = (\\<Sum>i\\<in>R. \\<chi> (A \\<inter> B i) t)\n\ngoal (1 subgoal):\n 1. \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)", "by (simp add: characteristic_function_def)"], ["proof (state)\nthis:\n  \\<chi> A t = (\\<Sum>j\\<in>R. \\<chi> (A \\<inter> B j) t)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma assumes ms: \"measure_space M\" and dis: \"\\<forall>j1\\<in>(R::nat set). \\<forall>j2\\<in>R. j1 \\<noteq> j2 \\<longrightarrow> (B j1) \\<inter> (B j2) = {}\"\n  and meas: \"\\<forall>j\\<in>R. B j \\<in> measurable_sets M\"\n  shows measure_sums_UNION: \"(\\<lambda>n. measure M (if n \\<in> R then B n else {})) sums measure M (\\<Union>i\\<in>R. B i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n    Measure.measure M (\\<Union> (B ` R))", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n    Measure.measure M (\\<Union> (B ` R))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n    Measure.measure M (\\<Union> (B ` R))", "have eq: \"(\\<Union>i\\<in>R. B i) = (\\<Union>i. if i\\<in>R then B i else {})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> (B ` R) = (\\<Union>i. if i \\<in> R then B i else {})", "by (auto split: if_splits)"], ["proof (state)\nthis:\n  \\<Union> (B ` R) = (\\<Union>i. if i \\<in> R then B i else {})\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n    Measure.measure M (\\<Union> (B ` R))", "from dis"], ["proof (chain)\npicking this:\n  \\<forall>j1\\<in>R.\n     \\<forall>j2\\<in>R.\n        j1 \\<noteq> j2 \\<longrightarrow> B j1 \\<inter> B j2 = {}", "have dis2: \"(\\<forall>i j. i \\<noteq> j \\<longrightarrow> (if i\\<in>R then B i else {}) \\<inter> (if j\\<in>R then B j else {})  = {})\""], ["proof (prove)\nusing this:\n  \\<forall>j1\\<in>R.\n     \\<forall>j2\\<in>R.\n        j1 \\<noteq> j2 \\<longrightarrow> B j1 \\<inter> B j2 = {}\n\ngoal (1 subgoal):\n 1. \\<forall>i j.\n       i \\<noteq> j \\<longrightarrow>\n       (if i \\<in> R then B i else {}) \\<inter>\n       (if j \\<in> R then B j else {}) =\n       {}", "by simp"], ["proof (state)\nthis:\n  \\<forall>i j.\n     i \\<noteq> j \\<longrightarrow>\n     (if i \\<in> R then B i else {}) \\<inter>\n     (if j \\<in> R then B j else {}) =\n     {}\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n    Measure.measure M (\\<Union> (B ` R))", "from meas"], ["proof (chain)\npicking this:\n  \\<forall>j\\<in>R. B j \\<in> measurable_sets M", "have meas2: \"range (\\<lambda>i. if i\\<in>R then B i else {}) \\<subseteq> measurable_sets M\""], ["proof (prove)\nusing this:\n  \\<forall>j\\<in>R. B j \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. range (\\<lambda>i. if i \\<in> R then B i else {})\n    \\<subseteq> measurable_sets M", "using ms"], ["proof (prove)\nusing this:\n  \\<forall>j\\<in>R. B j \\<in> measurable_sets M\n  measure_space M\n\ngoal (1 subgoal):\n 1. range (\\<lambda>i. if i \\<in> R then B i else {})\n    \\<subseteq> measurable_sets M", "by (auto simp add: measure_space_def sigma_algebra_def)"], ["proof (state)\nthis:\n  range (\\<lambda>i. if i \\<in> R then B i else {})\n  \\<subseteq> measurable_sets M\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n    Measure.measure M (\\<Union> (B ` R))", "hence \"\\<forall>i. (if i\\<in>R then B i else {})\\<in> measurable_sets M\""], ["proof (prove)\nusing this:\n  range (\\<lambda>i. if i \\<in> R then B i else {})\n  \\<subseteq> measurable_sets M\n\ngoal (1 subgoal):\n 1. \\<forall>i. (if i \\<in> R then B i else {}) \\<in> measurable_sets M", "by auto"], ["proof (state)\nthis:\n  \\<forall>i. (if i \\<in> R then B i else {}) \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n    Measure.measure M (\\<Union> (B ` R))", "with ms"], ["proof (chain)\npicking this:\n  measure_space M\n  \\<forall>i. (if i \\<in> R then B i else {}) \\<in> measurable_sets M", "have \"(\\<Union>i. if i\\<in>R then B i else {}) \\<in> measurable_sets M\""], ["proof (prove)\nusing this:\n  measure_space M\n  \\<forall>i. (if i \\<in> R then B i else {}) \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. (\\<Union>i. if i \\<in> R then B i else {}) \\<in> measurable_sets M", "by (auto simp add: measure_space_def sigma_algebra_def) (use eq in presburger)"], ["proof (state)\nthis:\n  (\\<Union>i. if i \\<in> R then B i else {}) \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n    Measure.measure M (\\<Union> (B ` R))", "with meas2 dis2"], ["proof (chain)\npicking this:\n  range (\\<lambda>i. if i \\<in> R then B i else {})\n  \\<subseteq> measurable_sets M\n  \\<forall>i j.\n     i \\<noteq> j \\<longrightarrow>\n     (if i \\<in> R then B i else {}) \\<inter>\n     (if j \\<in> R then B j else {}) =\n     {}\n  (\\<Union>i. if i \\<in> R then B i else {}) \\<in> measurable_sets M", "have \"(\\<lambda>n. measure M (if n \\<in> R then B n else {}))\n    sums measure M (\\<Union>i. if i\\<in>R then B i else {})\""], ["proof (prove)\nusing this:\n  range (\\<lambda>i. if i \\<in> R then B i else {})\n  \\<subseteq> measurable_sets M\n  \\<forall>i j.\n     i \\<noteq> j \\<longrightarrow>\n     (if i \\<in> R then B i else {}) \\<inter>\n     (if j \\<in> R then B j else {}) =\n     {}\n  (\\<Union>i. if i \\<in> R then B i else {}) \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n    Measure.measure M (\\<Union>i. if i \\<in> R then B i else {})", "using ms"], ["proof (prove)\nusing this:\n  range (\\<lambda>i. if i \\<in> R then B i else {})\n  \\<subseteq> measurable_sets M\n  \\<forall>i j.\n     i \\<noteq> j \\<longrightarrow>\n     (if i \\<in> R then B i else {}) \\<inter>\n     (if j \\<in> R then B j else {}) =\n     {}\n  (\\<Union>i. if i \\<in> R then B i else {}) \\<in> measurable_sets M\n  measure_space M\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n    Measure.measure M (\\<Union>i. if i \\<in> R then B i else {})", "by (simp add: measure_space_def countably_additive_def cong: SUP_cong_simp)"], ["proof (state)\nthis:\n  (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n  Measure.measure M (\\<Union>i. if i \\<in> R then B i else {})\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n    Measure.measure M (\\<Union> (B ` R))", "with eq"], ["proof (chain)\npicking this:\n  \\<Union> (B ` R) = (\\<Union>i. if i \\<in> R then B i else {})\n  (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n  Measure.measure M (\\<Union>i. if i \\<in> R then B i else {})", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Union> (B ` R) = (\\<Union>i. if i \\<in> R then B i else {})\n  (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n  Measure.measure M (\\<Union>i. if i \\<in> R then B i else {})\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n    Measure.measure M (\\<Union> (B ` R))", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n  Measure.measure M (\\<Union> (B ` R))\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "lemma sumr_sum:\n \"(\\<Sum>i=0..<k::nat. if i \\<in> R then f i else (0::real)) = (\\<Sum>i\\<in>(R\\<inter>{..<k}). f i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = 0..<k. if i \\<in> R then f i else 0) =\n    sum f (R \\<inter> {..<k})", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = 0..<k. if i \\<in> R then f i else 0) =\n    sum f (R \\<inter> {..<k})", "proof (induct k)"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<Sum>i = 0..<0. if i \\<in> R then f i else 0) =\n    sum f (R \\<inter> {..<0})\n 2. \\<And>k.\n       (\\<Sum>i = 0..<k. if i \\<in> R then f i else 0) =\n       sum f (R \\<inter> {..<k}) \\<Longrightarrow>\n       (\\<Sum>i = 0..<Suc k. if i \\<in> R then f i else 0) =\n       sum f (R \\<inter> {..<Suc k})", "case 0"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. (\\<Sum>i = 0..<0. if i \\<in> R then f i else 0) =\n    sum f (R \\<inter> {..<0})\n 2. \\<And>k.\n       (\\<Sum>i = 0..<k. if i \\<in> R then f i else 0) =\n       sum f (R \\<inter> {..<k}) \\<Longrightarrow>\n       (\\<Sum>i = 0..<Suc k. if i \\<in> R then f i else 0) =\n       sum f (R \\<inter> {..<Suc k})", "thus ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = 0..<0. if i \\<in> R then f i else 0) =\n    sum f (R \\<inter> {..<0})", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>i = 0..<0. if i \\<in> R then f i else 0) =\n  sum f (R \\<inter> {..<0})\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       (\\<Sum>i = 0..<k. if i \\<in> R then f i else 0) =\n       sum f (R \\<inter> {..<k}) \\<Longrightarrow>\n       (\\<Sum>i = 0..<Suc k. if i \\<in> R then f i else 0) =\n       sum f (R \\<inter> {..<Suc k})", "case (Suc l)"], ["proof (state)\nthis:\n  (\\<Sum>i = 0..<l. if i \\<in> R then f i else 0) =\n  sum f (R \\<inter> {..<l})\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       (\\<Sum>i = 0..<k. if i \\<in> R then f i else 0) =\n       sum f (R \\<inter> {..<k}) \\<Longrightarrow>\n       (\\<Sum>i = 0..<Suc k. if i \\<in> R then f i else 0) =\n       sum f (R \\<inter> {..<Suc k})", "hence \"(\\<Sum>i=0..<Suc l. if i \\<in> R then f i else 0) =  \n    (if l \\<in> R then f l else 0) + (\\<Sum>i\\<in>(R\\<inter>{..<l}). f i)\""], ["proof (prove)\nusing this:\n  (\\<Sum>i = 0..<l. if i \\<in> R then f i else 0) =\n  sum f (R \\<inter> {..<l})\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 0..<Suc l. if i \\<in> R then f i else 0) =\n    (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l})", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>i = 0..<Suc l. if i \\<in> R then f i else 0) =\n  (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l})\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       (\\<Sum>i = 0..<k. if i \\<in> R then f i else 0) =\n       sum f (R \\<inter> {..<k}) \\<Longrightarrow>\n       (\\<Sum>i = 0..<Suc k. if i \\<in> R then f i else 0) =\n       sum f (R \\<inter> {..<Suc k})", "also"], ["proof (state)\nthis:\n  (\\<Sum>i = 0..<Suc l. if i \\<in> R then f i else 0) =\n  (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l})\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       (\\<Sum>i = 0..<k. if i \\<in> R then f i else 0) =\n       sum f (R \\<inter> {..<k}) \\<Longrightarrow>\n       (\\<Sum>i = 0..<Suc k. if i \\<in> R then f i else 0) =\n       sum f (R \\<inter> {..<Suc k})", "have \"\\<dots> =  (\\<Sum>i\\<in>(R \\<inter> {..<Suc l}). f i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n    sum f (R \\<inter> {..<Suc l})", "proof (cases \"l \\<in> R\")"], ["proof (state)\ngoal (2 subgoals):\n 1. l \\<in> R \\<Longrightarrow>\n    (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n    sum f (R \\<inter> {..<Suc l})\n 2. l \\<notin> R \\<Longrightarrow>\n    (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n    sum f (R \\<inter> {..<Suc l})", "case True"], ["proof (state)\nthis:\n  l \\<in> R\n\ngoal (2 subgoals):\n 1. l \\<in> R \\<Longrightarrow>\n    (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n    sum f (R \\<inter> {..<Suc l})\n 2. l \\<notin> R \\<Longrightarrow>\n    (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n    sum f (R \\<inter> {..<Suc l})", "have \"l \\<notin> (R\\<inter>{..<l})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l \\<notin> R \\<inter> {..<l}", "by simp"], ["proof (state)\nthis:\n  l \\<notin> R \\<inter> {..<l}\n\ngoal (2 subgoals):\n 1. l \\<in> R \\<Longrightarrow>\n    (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n    sum f (R \\<inter> {..<Suc l})\n 2. l \\<notin> R \\<Longrightarrow>\n    (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n    sum f (R \\<inter> {..<Suc l})", "have \"f l + (\\<Sum>i\\<in>(R\\<inter>{..<l}). f i) = (\\<Sum>i\\<in>(insert l (R\\<inter>{..<l})). f i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f l + sum f (R \\<inter> {..<l}) = sum f (insert l (R \\<inter> {..<l}))", "by simp"], ["proof (state)\nthis:\n  f l + sum f (R \\<inter> {..<l}) = sum f (insert l (R \\<inter> {..<l}))\n\ngoal (2 subgoals):\n 1. l \\<in> R \\<Longrightarrow>\n    (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n    sum f (R \\<inter> {..<Suc l})\n 2. l \\<notin> R \\<Longrightarrow>\n    (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n    sum f (R \\<inter> {..<Suc l})", "also"], ["proof (state)\nthis:\n  f l + sum f (R \\<inter> {..<l}) = sum f (insert l (R \\<inter> {..<l}))\n\ngoal (2 subgoals):\n 1. l \\<in> R \\<Longrightarrow>\n    (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n    sum f (R \\<inter> {..<Suc l})\n 2. l \\<notin> R \\<Longrightarrow>\n    (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n    sum f (R \\<inter> {..<Suc l})", "from True"], ["proof (chain)\npicking this:\n  l \\<in> R", "have \"insert l (R\\<inter>{..<l}) = (R \\<inter> {..<Suc l})\""], ["proof (prove)\nusing this:\n  l \\<in> R\n\ngoal (1 subgoal):\n 1. insert l (R \\<inter> {..<l}) = R \\<inter> {..<Suc l}", "by (auto simp add: lessThan_Suc)"], ["proof (state)\nthis:\n  insert l (R \\<inter> {..<l}) = R \\<inter> {..<Suc l}\n\ngoal (2 subgoals):\n 1. l \\<in> R \\<Longrightarrow>\n    (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n    sum f (R \\<inter> {..<Suc l})\n 2. l \\<notin> R \\<Longrightarrow>\n    (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n    sum f (R \\<inter> {..<Suc l})", "finally"], ["proof (chain)\npicking this:\n  f l + sum f (R \\<inter> {..<l}) = sum f (R \\<inter> {..<Suc l})", "show ?thesis"], ["proof (prove)\nusing this:\n  f l + sum f (R \\<inter> {..<l}) = sum f (R \\<inter> {..<Suc l})\n\ngoal (1 subgoal):\n 1. (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n    sum f (R \\<inter> {..<Suc l})", "using True"], ["proof (prove)\nusing this:\n  f l + sum f (R \\<inter> {..<l}) = sum f (R \\<inter> {..<Suc l})\n  l \\<in> R\n\ngoal (1 subgoal):\n 1. (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n    sum f (R \\<inter> {..<Suc l})", "by simp"], ["proof (state)\nthis:\n  (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n  sum f (R \\<inter> {..<Suc l})\n\ngoal (1 subgoal):\n 1. l \\<notin> R \\<Longrightarrow>\n    (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n    sum f (R \\<inter> {..<Suc l})", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. l \\<notin> R \\<Longrightarrow>\n    (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n    sum f (R \\<inter> {..<Suc l})", "case False"], ["proof (state)\nthis:\n  l \\<notin> R\n\ngoal (1 subgoal):\n 1. l \\<notin> R \\<Longrightarrow>\n    (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n    sum f (R \\<inter> {..<Suc l})", "hence \"(R\\<inter>{..<l}) = (R \\<inter> {..<Suc l})\""], ["proof (prove)\nusing this:\n  l \\<notin> R\n\ngoal (1 subgoal):\n 1. R \\<inter> {..<l} = R \\<inter> {..<Suc l}", "by (auto simp add: lessThan_Suc)"], ["proof (state)\nthis:\n  R \\<inter> {..<l} = R \\<inter> {..<Suc l}\n\ngoal (1 subgoal):\n 1. l \\<notin> R \\<Longrightarrow>\n    (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n    sum f (R \\<inter> {..<Suc l})", "thus ?thesis"], ["proof (prove)\nusing this:\n  R \\<inter> {..<l} = R \\<inter> {..<Suc l}\n\ngoal (1 subgoal):\n 1. (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n    sum f (R \\<inter> {..<Suc l})", "by auto"], ["proof (state)\nthis:\n  (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n  sum f (R \\<inter> {..<Suc l})\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (if l \\<in> R then f l else 0) + sum f (R \\<inter> {..<l}) =\n  sum f (R \\<inter> {..<Suc l})\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       (\\<Sum>i = 0..<k. if i \\<in> R then f i else 0) =\n       sum f (R \\<inter> {..<k}) \\<Longrightarrow>\n       (\\<Sum>i = 0..<Suc k. if i \\<in> R then f i else 0) =\n       sum f (R \\<inter> {..<Suc k})", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>i = 0..<Suc l. if i \\<in> R then f i else 0) =\n  sum f (R \\<inter> {..<Suc l})", "show ?case"], ["proof (prove)\nusing this:\n  (\\<Sum>i = 0..<Suc l. if i \\<in> R then f i else 0) =\n  sum f (R \\<inter> {..<Suc l})\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 0..<Suc l. if i \\<in> R then f i else 0) =\n    sum f (R \\<inter> {..<Suc l})", "."], ["proof (state)\nthis:\n  (\\<Sum>i = 0..<Suc l. if i \\<in> R then f i else 0) =\n  sum f (R \\<inter> {..<Suc l})\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "lemma assumes ms: \"measure_space M\" and dis: \"\\<forall>j1\\<in>(R::nat set). \\<forall>j2\\<in>R. j1 \\<noteq> j2 \\<longrightarrow> (B j1) \\<inter> (B j2) = {}\"\n  and meas: \"\\<forall>j\\<in>R. B j \\<in> measurable_sets M\" and fin: \"finite R\"\n  shows measure_sum: \"measure M (\\<Union>i\\<in>R. B i) = (\\<Sum>j\\<in>R. measure M (B j))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "proof (cases \"R={}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "case False"], ["proof (state)\nthis:\n  R \\<noteq> {}\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "with fin"], ["proof (chain)\npicking this:\n  finite R\n  R \\<noteq> {}", "have leR: \"\\<forall>r\\<in>R. r  \\<le> Max R\""], ["proof (prove)\nusing this:\n  finite R\n  R \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<forall>r\\<in>R. r \\<le> Max R", "by simp"], ["proof (state)\nthis:\n  \\<forall>r\\<in>R. r \\<le> Max R\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "hence \"R = R \\<inter> {..Max R}\""], ["proof (prove)\nusing this:\n  \\<forall>r\\<in>R. r \\<le> Max R\n\ngoal (1 subgoal):\n 1. R = R \\<inter> {..Max R}", "by auto"], ["proof (state)\nthis:\n  R = R \\<inter> {..Max R}\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "also"], ["proof (state)\nthis:\n  R = R \\<inter> {..Max R}\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "have \"\\<dots> = R \\<inter> {..<Suc (Max R)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R \\<inter> {..Max R} = R \\<inter> {..<Suc (Max R)}", "by (simp add: lessThan_Suc_atMost[THEN sym])"], ["proof (state)\nthis:\n  R \\<inter> {..Max R} = R \\<inter> {..<Suc (Max R)}\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "finally"], ["proof (chain)\npicking this:\n  R = R \\<inter> {..<Suc (Max R)}", "have \"(\\<Sum>j\\<in>R. measure M (B j)) = (\\<Sum>j\\<in>R\\<inter> {..<Suc (Max R)} . measure M (B j))\""], ["proof (prove)\nusing this:\n  R = R \\<inter> {..<Suc (Max R)}\n\ngoal (1 subgoal):\n 1. (\\<Sum>j\\<in>R. Measure.measure M (B j)) =\n    (\\<Sum>j\\<in>R \\<inter> {..<Suc (Max R)}. Measure.measure M (B j))", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>R. Measure.measure M (B j)) =\n  (\\<Sum>j\\<in>R \\<inter> {..<Suc (Max R)}. Measure.measure M (B j))\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "also"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>R. Measure.measure M (B j)) =\n  (\\<Sum>j\\<in>R \\<inter> {..<Suc (Max R)}. Measure.measure M (B j))\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "have \"\\<dots> = (\\<Sum>x=0..<Suc(Max R). if x \\<in> R then measure M (B x) else 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>j\\<in>R \\<inter> {..<Suc (Max R)}. Measure.measure M (B j)) =\n    (\\<Sum>x = 0..<Suc (Max R).\n        if x \\<in> R then Measure.measure M (B x) else 0)", "by (rule sumr_sum[THEN sym])"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>R \\<inter> {..<Suc (Max R)}. Measure.measure M (B j)) =\n  (\\<Sum>x = 0..<Suc (Max R).\n      if x \\<in> R then Measure.measure M (B x) else 0)\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "also"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>R \\<inter> {..<Suc (Max R)}. Measure.measure M (B j)) =\n  (\\<Sum>x = 0..<Suc (Max R).\n      if x \\<in> R then Measure.measure M (B x) else 0)\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "{"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>R \\<inter> {..<Suc (Max R)}. Measure.measure M (B j)) =\n  (\\<Sum>x = 0..<Suc (Max R).\n      if x \\<in> R then Measure.measure M (B x) else 0)\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "fix x"], ["proof (state)\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "from ms"], ["proof (chain)\npicking this:\n  measure_space M", "have \"(if x \\<in> R then measure M (B x) else 0) = (measure M (if x\\<in>R then B x else {}))\""], ["proof (prove)\nusing this:\n  measure_space M\n\ngoal (1 subgoal):\n 1. (if x \\<in> R then Measure.measure M (B x) else 0) =\n    Measure.measure M (if x \\<in> R then B x else {})", "by (simp add: measure_space_def positive_def)"], ["proof (state)\nthis:\n  (if x \\<in> R then Measure.measure M (B x) else 0) =\n  Measure.measure M (if x \\<in> R then B x else {})\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "}"], ["proof (state)\nthis:\n  (if ?x2 \\<in> R then Measure.measure M (B ?x2) else 0) =\n  Measure.measure M (if ?x2 \\<in> R then B ?x2 else {})\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "hence \"\\<dots> = (\\<Sum>x=0..<Suc(Max R). measure M (if x\\<in>R then B x else {}))\""], ["proof (prove)\nusing this:\n  (if ?x2 \\<in> R then Measure.measure M (B ?x2) else 0) =\n  Measure.measure M (if ?x2 \\<in> R then B ?x2 else {})\n\ngoal (1 subgoal):\n 1. (\\<Sum>x = 0..<Suc (Max R).\n        if x \\<in> R then Measure.measure M (B x) else 0) =\n    (\\<Sum>x = 0..<Suc (Max R).\n        Measure.measure M (if x \\<in> R then B x else {}))", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>x = 0..<Suc (Max R).\n      if x \\<in> R then Measure.measure M (B x) else 0) =\n  (\\<Sum>x = 0..<Suc (Max R).\n      Measure.measure M (if x \\<in> R then B x else {}))\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "also"], ["proof (state)\nthis:\n  (\\<Sum>x = 0..<Suc (Max R).\n      if x \\<in> R then Measure.measure M (B x) else 0) =\n  (\\<Sum>x = 0..<Suc (Max R).\n      Measure.measure M (if x \\<in> R then B x else {}))\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "{"], ["proof (state)\nthis:\n  (\\<Sum>x = 0..<Suc (Max R).\n      if x \\<in> R then Measure.measure M (B x) else 0) =\n  (\\<Sum>x = 0..<Suc (Max R).\n      Measure.measure M (if x \\<in> R then B x else {}))\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "fix m"], ["proof (state)\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "assume \"Suc (Max R) \\<le> m\""], ["proof (state)\nthis:\n  Suc (Max R) \\<le> m\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "hence \"Max R < m\""], ["proof (prove)\nusing this:\n  Suc (Max R) \\<le> m\n\ngoal (1 subgoal):\n 1. Max R < m", "by simp"], ["proof (state)\nthis:\n  Max R < m\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "with leR"], ["proof (chain)\npicking this:\n  \\<forall>r\\<in>R. r \\<le> Max R\n  Max R < m", "have \"m\\<notin>R\""], ["proof (prove)\nusing this:\n  \\<forall>r\\<in>R. r \\<le> Max R\n  Max R < m\n\ngoal (1 subgoal):\n 1. m \\<notin> R", "by auto"], ["proof (state)\nthis:\n  m \\<notin> R\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "with ms"], ["proof (chain)\npicking this:\n  measure_space M\n  m \\<notin> R", "have \"measure M (if m\\<in>R then B m else {}) = 0\""], ["proof (prove)\nusing this:\n  measure_space M\n  m \\<notin> R\n\ngoal (1 subgoal):\n 1. Measure.measure M (if m \\<in> R then B m else {}) = 0", "by (simp add: measure_space_def positive_def)"], ["proof (state)\nthis:\n  Measure.measure M (if m \\<in> R then B m else {}) = 0\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "}"], ["proof (state)\nthis:\n  Suc (Max R) \\<le> ?m2 \\<Longrightarrow>\n  Measure.measure M (if ?m2 \\<in> R then B ?m2 else {}) = 0\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "hence \"\\<forall>m. (Suc (Max R)) \\<le> m \\<longrightarrow> measure M (if m\\<in>R then B m else {}) = 0\""], ["proof (prove)\nusing this:\n  Suc (Max R) \\<le> ?m2 \\<Longrightarrow>\n  Measure.measure M (if ?m2 \\<in> R then B ?m2 else {}) = 0\n\ngoal (1 subgoal):\n 1. \\<forall>m\\<ge>Suc (Max R).\n       Measure.measure M (if m \\<in> R then B m else {}) = 0", "by simp"], ["proof (state)\nthis:\n  \\<forall>m\\<ge>Suc (Max R).\n     Measure.measure M (if m \\<in> R then B m else {}) = 0\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "hence \"(\\<lambda>n. measure M (if n \\<in> R then B n else {})) sums (\\<Sum>x=0..<Suc(Max R). measure M (if x\\<in>R then B x else {}))\""], ["proof (prove)\nusing this:\n  \\<forall>m\\<ge>Suc (Max R).\n     Measure.measure M (if m \\<in> R then B m else {}) = 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n    (\\<Sum>x = 0..<Suc (Max R).\n        Measure.measure M (if x \\<in> R then B x else {}))", "by (intro sums_finite) auto"], ["proof (state)\nthis:\n  (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n  (\\<Sum>x = 0..<Suc (Max R).\n      Measure.measure M (if x \\<in> R then B x else {}))\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "hence \"(\\<Sum>x=0..<Suc(Max R). measure M (if x\\<in>R then B x else {})) = suminf (\\<lambda>n. measure M (if n \\<in> R then B n else {}))\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n  (\\<Sum>x = 0..<Suc (Max R).\n      Measure.measure M (if x \\<in> R then B x else {}))\n\ngoal (1 subgoal):\n 1. (\\<Sum>x = 0..<Suc (Max R).\n        Measure.measure M (if x \\<in> R then B x else {})) =\n    (\\<Sum>n. Measure.measure M (if n \\<in> R then B n else {}))", "by (rule sums_unique)"], ["proof (state)\nthis:\n  (\\<Sum>x = 0..<Suc (Max R).\n      Measure.measure M (if x \\<in> R then B x else {})) =\n  (\\<Sum>n. Measure.measure M (if n \\<in> R then B n else {}))\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "also"], ["proof (state)\nthis:\n  (\\<Sum>x = 0..<Suc (Max R).\n      Measure.measure M (if x \\<in> R then B x else {})) =\n  (\\<Sum>n. Measure.measure M (if n \\<in> R then B n else {}))\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "from ms dis meas"], ["proof (chain)\npicking this:\n  measure_space M\n  \\<forall>j1\\<in>R.\n     \\<forall>j2\\<in>R.\n        j1 \\<noteq> j2 \\<longrightarrow> B j1 \\<inter> B j2 = {}\n  \\<forall>j\\<in>R. B j \\<in> measurable_sets M", "have \"(\\<lambda>n. measure M (if n \\<in> R then B n else {})) sums measure M (\\<Union>i\\<in>R. B i)\""], ["proof (prove)\nusing this:\n  measure_space M\n  \\<forall>j1\\<in>R.\n     \\<forall>j2\\<in>R.\n        j1 \\<noteq> j2 \\<longrightarrow> B j1 \\<inter> B j2 = {}\n  \\<forall>j\\<in>R. B j \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n    Measure.measure M (\\<Union> (B ` R))", "by (rule measure_sums_UNION)"], ["proof (state)\nthis:\n  (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n  Measure.measure M (\\<Union> (B ` R))\n\ngoal (2 subgoals):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))\n 2. R \\<noteq> {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Sum>j\\<in>R. Measure.measure M (B j)) =\n  (\\<Sum>n. Measure.measure M (if n \\<in> R then B n else {}))\n  (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n  Measure.measure M (\\<Union> (B ` R))", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>j\\<in>R. Measure.measure M (B j)) =\n  (\\<Sum>n. Measure.measure M (if n \\<in> R then B n else {}))\n  (\\<lambda>n. Measure.measure M (if n \\<in> R then B n else {})) sums\n  Measure.measure M (\\<Union> (B ` R))\n\ngoal (1 subgoal):\n 1. Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "by (simp add: sums_unique)"], ["proof (state)\nthis:\n  Measure.measure M (\\<Union> (B ` R)) =\n  (\\<Sum>j\\<in>R. Measure.measure M (B j))\n\ngoal (1 subgoal):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "case True"], ["proof (state)\nthis:\n  R = {}\n\ngoal (1 subgoal):\n 1. R = {} \\<Longrightarrow>\n    Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "with ms"], ["proof (chain)\npicking this:\n  measure_space M\n  R = {}", "show ?thesis"], ["proof (prove)\nusing this:\n  measure_space M\n  R = {}\n\ngoal (1 subgoal):\n 1. Measure.measure M (\\<Union> (B ` R)) =\n    (\\<Sum>j\\<in>R. Measure.measure M (B j))", "by (simp add: measure_space_def positive_def)"], ["proof (state)\nthis:\n  Measure.measure M (\\<Union> (B ` R)) =\n  (\\<Sum>j\\<in>R. Measure.measure M (B j))\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "lemma assumes ms: \"measure_space M\" and un: \"(\\<Union>i\\<in>R. B i) = UNIV\" and \n  fin: \"finite (R::nat set)\" and dis: \"\\<forall>j1\\<in>R. \\<forall>j2\\<in>R. j1 \\<noteq> j2 \\<longrightarrow> (B j1) \\<inter> (B j2) = {}\"\n  and meas: \"\\<forall>j\\<in>R. B j \\<in> measurable_sets M\" and Ameas: \"A \\<in> measurable_sets M\"\n  shows measure_split: \"measure M A = (\\<Sum>j\\<in>R. measure M (A \\<inter> B j))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Measure.measure M A =\n    (\\<Sum>j\\<in>R. Measure.measure M (A \\<inter> B j))", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. Measure.measure M A =\n    (\\<Sum>j\\<in>R. Measure.measure M (A \\<inter> B j))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Measure.measure M A =\n    (\\<Sum>j\\<in>R. Measure.measure M (A \\<inter> B j))", "note ms"], ["proof (state)\nthis:\n  measure_space M\n\ngoal (1 subgoal):\n 1. Measure.measure M A =\n    (\\<Sum>j\\<in>R. Measure.measure M (A \\<inter> B j))", "moreover"], ["proof (state)\nthis:\n  measure_space M\n\ngoal (1 subgoal):\n 1. Measure.measure M A =\n    (\\<Sum>j\\<in>R. Measure.measure M (A \\<inter> B j))", "from dis"], ["proof (chain)\npicking this:\n  \\<forall>j1\\<in>R.\n     \\<forall>j2\\<in>R.\n        j1 \\<noteq> j2 \\<longrightarrow> B j1 \\<inter> B j2 = {}", "have \"\\<forall>j1\\<in>R. \\<forall>j2\\<in>R. j1 \\<noteq> j2 \\<longrightarrow> (A \\<inter> B j1) \\<inter> (A \\<inter> B j2) = {}\""], ["proof (prove)\nusing this:\n  \\<forall>j1\\<in>R.\n     \\<forall>j2\\<in>R.\n        j1 \\<noteq> j2 \\<longrightarrow> B j1 \\<inter> B j2 = {}\n\ngoal (1 subgoal):\n 1. \\<forall>j1\\<in>R.\n       \\<forall>j2\\<in>R.\n          j1 \\<noteq> j2 \\<longrightarrow>\n          A \\<inter> B j1 \\<inter> (A \\<inter> B j2) = {}", "by fast"], ["proof (state)\nthis:\n  \\<forall>j1\\<in>R.\n     \\<forall>j2\\<in>R.\n        j1 \\<noteq> j2 \\<longrightarrow>\n        A \\<inter> B j1 \\<inter> (A \\<inter> B j2) = {}\n\ngoal (1 subgoal):\n 1. Measure.measure M A =\n    (\\<Sum>j\\<in>R. Measure.measure M (A \\<inter> B j))", "moreover"], ["proof (state)\nthis:\n  \\<forall>j1\\<in>R.\n     \\<forall>j2\\<in>R.\n        j1 \\<noteq> j2 \\<longrightarrow>\n        A \\<inter> B j1 \\<inter> (A \\<inter> B j2) = {}\n\ngoal (1 subgoal):\n 1. Measure.measure M A =\n    (\\<Sum>j\\<in>R. Measure.measure M (A \\<inter> B j))", "from ms meas Ameas"], ["proof (chain)\npicking this:\n  measure_space M\n  \\<forall>j\\<in>R. B j \\<in> measurable_sets M\n  A \\<in> measurable_sets M", "have \"\\<forall>j\\<in>R. A \\<inter> B j \\<in> measurable_sets M\""], ["proof (prove)\nusing this:\n  measure_space M\n  \\<forall>j\\<in>R. B j \\<in> measurable_sets M\n  A \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. \\<forall>j\\<in>R. A \\<inter> B j \\<in> measurable_sets M", "by (simp add: measure_space_def sigma_algebra_inter)"], ["proof (state)\nthis:\n  \\<forall>j\\<in>R. A \\<inter> B j \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. Measure.measure M A =\n    (\\<Sum>j\\<in>R. Measure.measure M (A \\<inter> B j))", "moreover"], ["proof (state)\nthis:\n  \\<forall>j\\<in>R. A \\<inter> B j \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. Measure.measure M A =\n    (\\<Sum>j\\<in>R. Measure.measure M (A \\<inter> B j))", "note fin"], ["proof (state)\nthis:\n  finite R\n\ngoal (1 subgoal):\n 1. Measure.measure M A =\n    (\\<Sum>j\\<in>R. Measure.measure M (A \\<inter> B j))", "ultimately"], ["proof (chain)\npicking this:\n  measure_space M\n  \\<forall>j1\\<in>R.\n     \\<forall>j2\\<in>R.\n        j1 \\<noteq> j2 \\<longrightarrow>\n        A \\<inter> B j1 \\<inter> (A \\<inter> B j2) = {}\n  \\<forall>j\\<in>R. A \\<inter> B j \\<in> measurable_sets M\n  finite R", "have \"measure M (\\<Union>i\\<in>R. A \\<inter> B i) = (\\<Sum>j\\<in>R. measure M (A \\<inter> B j))\""], ["proof (prove)\nusing this:\n  measure_space M\n  \\<forall>j1\\<in>R.\n     \\<forall>j2\\<in>R.\n        j1 \\<noteq> j2 \\<longrightarrow>\n        A \\<inter> B j1 \\<inter> (A \\<inter> B j2) = {}\n  \\<forall>j\\<in>R. A \\<inter> B j \\<in> measurable_sets M\n  finite R\n\ngoal (1 subgoal):\n 1. Measure.measure M (\\<Union>i\\<in>R. A \\<inter> B i) =\n    (\\<Sum>j\\<in>R. Measure.measure M (A \\<inter> B j))", "by (rule measure_sum)"], ["proof (state)\nthis:\n  Measure.measure M (\\<Union>i\\<in>R. A \\<inter> B i) =\n  (\\<Sum>j\\<in>R. Measure.measure M (A \\<inter> B j))\n\ngoal (1 subgoal):\n 1. Measure.measure M A =\n    (\\<Sum>j\\<in>R. Measure.measure M (A \\<inter> B j))", "also"], ["proof (state)\nthis:\n  Measure.measure M (\\<Union>i\\<in>R. A \\<inter> B i) =\n  (\\<Sum>j\\<in>R. Measure.measure M (A \\<inter> B j))\n\ngoal (1 subgoal):\n 1. Measure.measure M A =\n    (\\<Sum>j\\<in>R. Measure.measure M (A \\<inter> B j))", "from un"], ["proof (chain)\npicking this:\n  \\<Union> (B ` R) = UNIV", "have \"A = (\\<Union>i\\<in>R. A \\<inter> B i)\""], ["proof (prove)\nusing this:\n  \\<Union> (B ` R) = UNIV\n\ngoal (1 subgoal):\n 1. A = (\\<Union>i\\<in>R. A \\<inter> B i)", "by auto"], ["proof (state)\nthis:\n  A = (\\<Union>i\\<in>R. A \\<inter> B i)\n\ngoal (1 subgoal):\n 1. Measure.measure M A =\n    (\\<Sum>j\\<in>R. Measure.measure M (A \\<inter> B j))", "ultimately"], ["proof (chain)\npicking this:\n  Measure.measure M (\\<Union>i\\<in>R. A \\<inter> B i) =\n  (\\<Sum>j\\<in>R. Measure.measure M (A \\<inter> B j))\n  A = (\\<Union>i\\<in>R. A \\<inter> B i)", "show ?thesis"], ["proof (prove)\nusing this:\n  Measure.measure M (\\<Union>i\\<in>R. A \\<inter> B i) =\n  (\\<Sum>j\\<in>R. Measure.measure M (A \\<inter> B j))\n  A = (\\<Union>i\\<in>R. A \\<inter> B i)\n\ngoal (1 subgoal):\n 1. Measure.measure M A =\n    (\\<Sum>j\\<in>R. Measure.measure M (A \\<inter> B j))", "by simp"], ["proof (state)\nthis:\n  Measure.measure M A = (\\<Sum>j\\<in>R. Measure.measure M (A \\<inter> B j))\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "lemma prod_encode_fst_inj: \"inj (\\<lambda>i. prod_encode(i,j))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inj (\\<lambda>i. prod_encode (i, j))", "using inj_prod_encode"], ["proof (prove)\nusing this:\n  inj_on prod_encode ?A\n\ngoal (1 subgoal):\n 1. inj (\\<lambda>i. prod_encode (i, j))", "by (unfold inj_on_def) blast"], ["", "lemma prod_encode_snd_inj: \"inj (\\<lambda>j. prod_encode(i,j))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inj (\\<lambda>j. prod_encode (i, j))", "using inj_prod_encode"], ["proof (prove)\nusing this:\n  inj_on prod_encode ?A\n\ngoal (1 subgoal):\n 1. inj (\\<lambda>j. prod_encode (i, j))", "by (unfold inj_on_def) blast"], ["", "(*>*)"], ["", "lemma assumes (*<*)ms:(*>*) \"measure_space M\" and (*<*)a:(*>*) \"a \\<in> sfis f M\" and (*<*)b:(*>*) \"b \\<in> sfis g M\"\n  shows sfis_present: \"\\<exists> z1 z2 C K. \n  f = (\\<lambda>t. \\<Sum>i\\<in>(K::nat set). z1 i * \\<chi> (C i) t) \\<and> g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \n  \\<and> a = (\\<Sum>i\\<in>K. z1 i * measure M (C i)) \\<and> b = (\\<Sum>i\\<in>K. z2 i * measure M (C i))\n  \\<and> finite K \\<and> (\\<forall>i\\<in>K. \\<forall>j\\<in>K. i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {})\n  \\<and> (\\<forall>i \\<in> K. C i \\<in> measurable_sets M) \\<and> (\\<Union>i\\<in>K. C i) = UNIV \n  \\<and> nonnegative z1 \\<and> nonnegative z2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>z1 z2 C K.\n       f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n       g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n       a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i)) \\<and>\n       b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i)) \\<and>\n       finite K \\<and>\n       (\\<forall>i\\<in>K.\n           \\<forall>j\\<in>K.\n              i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n       (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n       \\<Union> (C ` K) = UNIV \\<and> nonnegative z1 \\<and> nonnegative z2", "using a"], ["proof (prove)\nusing this:\n  a \\<in> sfis f M\n\ngoal (1 subgoal):\n 1. \\<exists>z1 z2 C K.\n       f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n       g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n       a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i)) \\<and>\n       b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i)) \\<and>\n       finite K \\<and>\n       (\\<forall>i\\<in>K.\n           \\<forall>j\\<in>K.\n              i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n       (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n       \\<Union> (C ` K) = UNIV \\<and> nonnegative z1 \\<and> nonnegative z2", "proof cases"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "case (base x A R)"], ["proof (state)\nthis:\n  a = (\\<Sum>i\\<in>R. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>R. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>R. A i \\<in> measurable_sets M\n  nonnegative x\n  finite R\n  \\<forall>i\\<in>R.\n     \\<forall>j\\<in>R. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` R) = UNIV\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "note base_x = this"], ["proof (state)\nthis:\n  a = (\\<Sum>i\\<in>R. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>R. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>R. A i \\<in> measurable_sets M\n  nonnegative x\n  finite R\n  \\<forall>i\\<in>R.\n     \\<forall>j\\<in>R. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` R) = UNIV\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>z1 z2 C K.\n       f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n       g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n       a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i)) \\<and>\n       b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i)) \\<and>\n       finite K \\<and>\n       (\\<forall>i\\<in>K.\n           \\<forall>j\\<in>K.\n              i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n       (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n       \\<Union> (C ` K) = UNIV \\<and> nonnegative z1 \\<and> nonnegative z2", "using b"], ["proof (prove)\nusing this:\n  b \\<in> sfis g M\n\ngoal (1 subgoal):\n 1. \\<exists>z1 z2 C K.\n       f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n       g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n       a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i)) \\<and>\n       b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i)) \\<and>\n       finite K \\<and>\n       (\\<forall>i\\<in>K.\n           \\<forall>j\\<in>K.\n              i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n       (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n       \\<Union> (C ` K) = UNIV \\<and> nonnegative z1 \\<and> nonnegative z2", "proof cases"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "case (base y B S)"], ["proof (state)\nthis:\n  b = (\\<Sum>i\\<in>S. y i * Measure.measure M (B i))\n  g = (\\<lambda>t. \\<Sum>i\\<in>S. y i * \\<chi> (B i) t)\n  \\<forall>i\\<in>S. B i \\<in> measurable_sets M\n  nonnegative y\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> B i \\<inter> B j = {}\n  \\<Union> (B ` S) = UNIV\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "with assms base_x"], ["proof (chain)\npicking this:\n  measure_space M\n  a \\<in> sfis f M\n  b \\<in> sfis g M\n  a = (\\<Sum>i\\<in>R. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>R. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>R. A i \\<in> measurable_sets M\n  nonnegative x\n  finite R\n  \\<forall>i\\<in>R.\n     \\<forall>j\\<in>R. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` R) = UNIV\n  b = (\\<Sum>i\\<in>S. y i * Measure.measure M (B i))\n  g = (\\<lambda>t. \\<Sum>i\\<in>S. y i * \\<chi> (B i) t)\n  \\<forall>i\\<in>S. B i \\<in> measurable_sets M\n  nonnegative y\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> B i \\<inter> B j = {}\n  \\<Union> (B ` S) = UNIV", "have ms: \"measure_space M\" \n      and f: \"f = (\\<lambda>t. \\<Sum>i\\<in>(R::nat set). x i * \\<chi> (A i) t)\"\n      and a: \"a = (\\<Sum>i\\<in>R. x i * measure M (A i))\" \n      and Ams: \"\\<forall>i \\<in> R. A i \\<in> measurable_sets M\" \n      and R: \"finite R\" and Adis: \"\\<forall>i\\<in>R. \\<forall>j\\<in>R. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\"\n      and Aun: \"(\\<Union>i\\<in>R. A i) = UNIV\" \n      and g: \"g = (\\<lambda>t. \\<Sum>i\\<in>(S::nat set). y i * \\<chi> (B i) t)\"\n      and b: \"b = (\\<Sum>j\\<in>S. y j * measure M (B j))\" \n      and Bms: \"\\<forall>i \\<in> S. B i \\<in> measurable_sets M\"\n      and S: \"finite S\" \n      and Bdis: \"\\<forall>i\\<in>S. \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> B i \\<inter> B j = {}\" \n      and Bun: \"(\\<Union>i\\<in>S. B i) = UNIV\" \n      and x: \"nonnegative x\" and y: \"nonnegative y\""], ["proof (prove)\nusing this:\n  measure_space M\n  a \\<in> sfis f M\n  b \\<in> sfis g M\n  a = (\\<Sum>i\\<in>R. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>R. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>R. A i \\<in> measurable_sets M\n  nonnegative x\n  finite R\n  \\<forall>i\\<in>R.\n     \\<forall>j\\<in>R. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` R) = UNIV\n  b = (\\<Sum>i\\<in>S. y i * Measure.measure M (B i))\n  g = (\\<lambda>t. \\<Sum>i\\<in>S. y i * \\<chi> (B i) t)\n  \\<forall>i\\<in>S. B i \\<in> measurable_sets M\n  nonnegative y\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> B i \\<inter> B j = {}\n  \\<Union> (B ` S) = UNIV\n\ngoal (1 subgoal):\n 1. ((measure_space M &&&\n      f = (\\<lambda>t. \\<Sum>i\\<in>R. x i * \\<chi> (A i) t) &&&\n      a = (\\<Sum>i\\<in>R. x i * Measure.measure M (A i))) &&&\n     (\\<forall>i\\<in>R. A i \\<in> measurable_sets M &&& finite R) &&&\n     \\<forall>i\\<in>R.\n        \\<forall>j\\<in>R.\n           i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {} &&&\n     \\<Union> (A ` R) = UNIV) &&&\n    ((g = (\\<lambda>t. \\<Sum>i\\<in>S. y i * \\<chi> (B i) t) &&&\n      b = (\\<Sum>j\\<in>S. y j * Measure.measure M (B j))) &&&\n     \\<forall>i\\<in>S. B i \\<in> measurable_sets M &&& finite S) &&&\n    (\\<forall>i\\<in>S.\n        \\<forall>j\\<in>S.\n           i \\<noteq> j \\<longrightarrow> B i \\<inter> B j = {} &&&\n     \\<Union> (B ` S) = UNIV) &&&\n    nonnegative x &&& nonnegative y", "by simp_all"], ["proof (state)\nthis:\n  measure_space M\n  f = (\\<lambda>t. \\<Sum>i\\<in>R. x i * \\<chi> (A i) t)\n  a = (\\<Sum>i\\<in>R. x i * Measure.measure M (A i))\n  \\<forall>i\\<in>R. A i \\<in> measurable_sets M\n  finite R\n  \\<forall>i\\<in>R.\n     \\<forall>j\\<in>R. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` R) = UNIV\n  g = (\\<lambda>t. \\<Sum>i\\<in>S. y i * \\<chi> (B i) t)\n  b = (\\<Sum>j\\<in>S. y j * Measure.measure M (B j))\n  \\<forall>i\\<in>S. B i \\<in> measurable_sets M\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> B i \\<inter> B j = {}\n  \\<Union> (B ` S) = UNIV\n  nonnegative x\n  nonnegative y\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "txt\\<open>\\nopagebreak\\<close>"], ["proof (state)\nthis:\n  measure_space M\n  f = (\\<lambda>t. \\<Sum>i\\<in>R. x i * \\<chi> (A i) t)\n  a = (\\<Sum>i\\<in>R. x i * Measure.measure M (A i))\n  \\<forall>i\\<in>R. A i \\<in> measurable_sets M\n  finite R\n  \\<forall>i\\<in>R.\n     \\<forall>j\\<in>R. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` R) = UNIV\n  g = (\\<lambda>t. \\<Sum>i\\<in>S. y i * \\<chi> (B i) t)\n  b = (\\<Sum>j\\<in>S. y j * Measure.measure M (B j))\n  \\<forall>i\\<in>S. B i \\<in> measurable_sets M\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> B i \\<inter> B j = {}\n  \\<Union> (B ` S) = UNIV\n  nonnegative x\n  nonnegative y\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "define C where \"C = (\\<lambda>(i,j). A i \\<inter> B j) \\<circ> prod_decode\""], ["proof (state)\nthis:\n  C = (\\<lambda>(i, j). A i \\<inter> B j) \\<circ> prod_decode\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "define z1 where \"z1 k = x (fst (prod_decode k))\" for k"], ["proof (state)\nthis:\n  z1 ?k = x (fst (prod_decode ?k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "define z2 where \"z2 k = y (snd (prod_decode k))\" for k"], ["proof (state)\nthis:\n  z2 ?k = y (snd (prod_decode ?k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "define K where \"K = {k. \\<exists>i\\<in>R. \\<exists>j\\<in>S. k = prod_encode (i,j)}\""], ["proof (state)\nthis:\n  K = {k. \\<exists>i\\<in>R. \\<exists>j\\<in>S. k = prod_encode (i, j)}\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "define G where \"G i = (\\<lambda>j. prod_encode (i,j)) ` S\" for i"], ["proof (state)\nthis:\n  G ?i = (\\<lambda>j. prod_encode (?i, j)) ` S\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "define H where \"H j = (\\<lambda>i. prod_encode (i,j)) ` R\" for j"], ["proof (state)\nthis:\n  H ?j = (\\<lambda>i. prod_encode (i, ?j)) ` R\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "{"], ["proof (state)\nthis:\n  H ?j = (\\<lambda>i. prod_encode (i, ?j)) ` R\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "fix t"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "from Bun S Bdis"], ["proof (chain)\npicking this:\n  \\<Union> (B ` S) = UNIV\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> B i \\<inter> B j = {}", "have \"\\<chi> (A i) t = (\\<Sum>j\\<in>S. \\<chi> (A i \\<inter> B j) t)\""], ["proof (prove)\nusing this:\n  \\<Union> (B ` S) = UNIV\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> B i \\<inter> B j = {}\n\ngoal (1 subgoal):\n 1. \\<chi> (A i) t = (\\<Sum>j\\<in>S. \\<chi> (A i \\<inter> B j) t)", "by (rule char_split)"], ["proof (state)\nthis:\n  \\<chi> (A i) t = (\\<Sum>j\\<in>S. \\<chi> (A i \\<inter> B j) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "hence \"x i * \\<chi> (A i) t = (\\<Sum>j\\<in>S. x i * \\<chi> (A i \\<inter> B j) t)\""], ["proof (prove)\nusing this:\n  \\<chi> (A i) t = (\\<Sum>j\\<in>S. \\<chi> (A i \\<inter> B j) t)\n\ngoal (1 subgoal):\n 1. x i * \\<chi> (A i) t =\n    (\\<Sum>j\\<in>S. x i * \\<chi> (A i \\<inter> B j) t)", "by (simp add: sum_distrib_left)"], ["proof (state)\nthis:\n  x i * \\<chi> (A i) t = (\\<Sum>j\\<in>S. x i * \\<chi> (A i \\<inter> B j) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "also"], ["proof (state)\nthis:\n  x i * \\<chi> (A i) t = (\\<Sum>j\\<in>S. x i * \\<chi> (A i \\<inter> B j) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "{"], ["proof (state)\nthis:\n  x i * \\<chi> (A i) t = (\\<Sum>j\\<in>S. x i * \\<chi> (A i \\<inter> B j) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "fix j"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "have \"S=S\" and \n            \"x i * \\<chi> (A i \\<inter> B j) t = (let k=prod_encode(i,j) in z1 k * \\<chi> (C k) t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S = S &&&\n    x i * \\<chi> (A i \\<inter> B j) t =\n    (let k = prod_encode (i, j) in z1 k * \\<chi> (C k) t)", "by (auto simp add: C_def z1_def Let_def)"], ["proof (state)\nthis:\n  S = S\n  x i * \\<chi> (A i \\<inter> B j) t =\n  (let k = prod_encode (i, j) in z1 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "}"], ["proof (state)\nthis:\n  S = S\n  x i * \\<chi> (A i \\<inter> B ?j2) t =\n  (let k = prod_encode (i, ?j2) in z1 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "hence \"\\<dots> = (\\<Sum>j\\<in>S. let k=prod_encode (i,j) in z1 k * \\<chi> (C k) t)\""], ["proof (prove)\nusing this:\n  S = S\n  x i * \\<chi> (A i \\<inter> B ?j2) t =\n  (let k = prod_encode (i, ?j2) in z1 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. (\\<Sum>j\\<in>S. x i * \\<chi> (A i \\<inter> B j) t) =\n    (\\<Sum>j\\<in>S. let k = prod_encode (i, j) in z1 k * \\<chi> (C k) t)", "by (rule sum.cong)"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>S. x i * \\<chi> (A i \\<inter> B j) t) =\n  (\\<Sum>j\\<in>S. let k = prod_encode (i, j) in z1 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "also"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>S. x i * \\<chi> (A i \\<inter> B j) t) =\n  (\\<Sum>j\\<in>S. let k = prod_encode (i, j) in z1 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "from S"], ["proof (chain)\npicking this:\n  finite S", "have \"\\<dots> = (\\<Sum>k\\<in>(G i). z1 k * \\<chi> (C k) t)\""], ["proof (prove)\nusing this:\n  finite S\n\ngoal (1 subgoal):\n 1. (\\<Sum>j\\<in>S. let k = prod_encode (i, j) in z1 k * \\<chi> (C k) t) =\n    (\\<Sum>k\\<in>G i. z1 k * \\<chi> (C k) t)", "by (simp add: G_def Let_def o_def\n                sum.reindex[OF subset_inj_on[OF prod_encode_snd_inj]])"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>S. let k = prod_encode (i, j) in z1 k * \\<chi> (C k) t) =\n  (\\<Sum>k\\<in>G i. z1 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "finally"], ["proof (chain)\npicking this:\n  x i * \\<chi> (A i) t = (\\<Sum>k\\<in>G i. z1 k * \\<chi> (C k) t)", "have eq: \"x i * \\<chi> (A i) t = (\\<Sum>k\\<in> G i. z1 k * \\<chi> (C k) t)\""], ["proof (prove)\nusing this:\n  x i * \\<chi> (A i) t = (\\<Sum>k\\<in>G i. z1 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. x i * \\<chi> (A i) t = (\\<Sum>k\\<in>G i. z1 k * \\<chi> (C k) t)", "."], ["proof (state)\nthis:\n  x i * \\<chi> (A i) t = (\\<Sum>k\\<in>G i. z1 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "(*Repeat with measure instead of char*)"], ["proof (state)\nthis:\n  x i * \\<chi> (A i) t = (\\<Sum>k\\<in>G i. z1 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "from S"], ["proof (chain)\npicking this:\n  finite S", "have G: \"finite (G i)\""], ["proof (prove)\nusing this:\n  finite S\n\ngoal (1 subgoal):\n 1. finite (G i)", "by (simp add: G_def)"], ["proof (state)\nthis:\n  finite (G i)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "{"], ["proof (state)\nthis:\n  finite (G i)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "fix k"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "assume \"k \\<in> G i\""], ["proof (state)\nthis:\n  k \\<in> G i\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "then"], ["proof (chain)\npicking this:\n  k \\<in> G i", "obtain j where kij: \"k=prod_encode (i,j)\""], ["proof (prove)\nusing this:\n  k \\<in> G i\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        k = prod_encode (i, j) \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp only: G_def)"], ["proof (state)\nthis:\n  k = prod_encode (i, j)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "{"], ["proof (state)\nthis:\n  k = prod_encode (i, j)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "fix i2"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "assume i2: \"i2 \\<noteq> i\""], ["proof (state)\nthis:\n  i2 \\<noteq> i\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "{"], ["proof (state)\nthis:\n  i2 \\<noteq> i\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "fix k2"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "assume \"k2 \\<in> G i2\""], ["proof (state)\nthis:\n  k2 \\<in> G i2\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "then"], ["proof (chain)\npicking this:\n  k2 \\<in> G i2", "obtain j2 where kij2: \"k2=prod_encode (i2,j2)\""], ["proof (prove)\nusing this:\n  k2 \\<in> G i2\n\ngoal (1 subgoal):\n 1. (\\<And>j2.\n        k2 = prod_encode (i2, j2) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (auto simp only: G_def)"], ["proof (state)\nthis:\n  k2 = prod_encode (i2, j2)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "from i2"], ["proof (chain)\npicking this:\n  i2 \\<noteq> i", "have \"(i2,j2) \\<noteq> (i,j)\" and \"(i2,j2) \\<in> UNIV\" \n                and \"(i,j) \\<in> UNIV\""], ["proof (prove)\nusing this:\n  i2 \\<noteq> i\n\ngoal (1 subgoal):\n 1. (i2, j2) \\<noteq> (i, j) &&& (i2, j2) \\<in> UNIV &&& (i, j) \\<in> UNIV", "by auto"], ["proof (state)\nthis:\n  (i2, j2) \\<noteq> (i, j)\n  (i2, j2) \\<in> UNIV\n  (i, j) \\<in> UNIV\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "with inj_prod_encode"], ["proof (chain)\npicking this:\n  inj_on prod_encode ?A\n  (i2, j2) \\<noteq> (i, j)\n  (i2, j2) \\<in> UNIV\n  (i, j) \\<in> UNIV", "have  \"prod_encode (i2,j2) \\<noteq> prod_encode (i,j)\""], ["proof (prove)\nusing this:\n  inj_on prod_encode ?A\n  (i2, j2) \\<noteq> (i, j)\n  (i2, j2) \\<in> UNIV\n  (i, j) \\<in> UNIV\n\ngoal (1 subgoal):\n 1. prod_encode (i2, j2) \\<noteq> prod_encode (i, j)", "by (rule inj_on_contraD)"], ["proof (state)\nthis:\n  prod_encode (i2, j2) \\<noteq> prod_encode (i, j)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "with kij kij2"], ["proof (chain)\npicking this:\n  k = prod_encode (i, j)\n  k2 = prod_encode (i2, j2)\n  prod_encode (i2, j2) \\<noteq> prod_encode (i, j)", "have \"k2 \\<noteq> k\""], ["proof (prove)\nusing this:\n  k = prod_encode (i, j)\n  k2 = prod_encode (i2, j2)\n  prod_encode (i2, j2) \\<noteq> prod_encode (i, j)\n\ngoal (1 subgoal):\n 1. k2 \\<noteq> k", "by fast"], ["proof (state)\nthis:\n  k2 \\<noteq> k\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "}"], ["proof (state)\nthis:\n  ?k2.2 \\<in> G i2 \\<Longrightarrow> ?k2.2 \\<noteq> k\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "hence \"k \\<notin> G i2\""], ["proof (prove)\nusing this:\n  ?k2.2 \\<in> G i2 \\<Longrightarrow> ?k2.2 \\<noteq> k\n\ngoal (1 subgoal):\n 1. k \\<notin> G i2", "by fast"], ["proof (state)\nthis:\n  k \\<notin> G i2\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "}"], ["proof (state)\nthis:\n  ?i2.2 \\<noteq> i \\<Longrightarrow> k \\<notin> G ?i2.2\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?k8 \\<in> G i; ?i2.5 \\<noteq> i\\<rbrakk>\n  \\<Longrightarrow> ?k8 \\<notin> G ?i2.5\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "hence \"\\<And>j. i \\<noteq> j \\<Longrightarrow> G i \\<inter> G j = {}\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?k8 \\<in> G i; ?i2.5 \\<noteq> i\\<rbrakk>\n  \\<Longrightarrow> ?k8 \\<notin> G ?i2.5\n\ngoal (1 subgoal):\n 1. \\<And>j. i \\<noteq> j \\<Longrightarrow> G i \\<inter> G j = {}", "by fast"], ["proof (state)\nthis:\n  i \\<noteq> ?j \\<Longrightarrow> G i \\<inter> G ?j = {}\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "note eq G this"], ["proof (state)\nthis:\n  x i * \\<chi> (A i) t = (\\<Sum>k\\<in>G i. z1 k * \\<chi> (C k) t)\n  finite (G i)\n  i \\<noteq> ?j \\<Longrightarrow> G i \\<inter> G ?j = {}\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "}"], ["proof (state)\nthis:\n  x ?i3 * \\<chi> (A ?i3) t = (\\<Sum>k\\<in>G ?i3. z1 k * \\<chi> (C k) t)\n  finite (G ?i3)\n  ?i3 \\<noteq> ?j \\<Longrightarrow> G ?i3 \\<inter> G ?j = {}\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "hence eq: \"\\<And>i. x i * \\<chi> (A i) t = (\\<Sum>k\\<in>G i. z1 k * \\<chi> (C k) t)\"\n        and G: \"\\<And>i. finite (G i)\" \n        and Gdis: \"\\<And>i j. i \\<noteq> j \\<Longrightarrow> G i \\<inter> G j = {}\""], ["proof (prove)\nusing this:\n  x ?i3 * \\<chi> (A ?i3) t = (\\<Sum>k\\<in>G ?i3. z1 k * \\<chi> (C k) t)\n  finite (G ?i3)\n  ?i3 \\<noteq> ?j \\<Longrightarrow> G ?i3 \\<inter> G ?j = {}\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        x i * \\<chi> (A i) t = (\\<Sum>k\\<in>G i. z1 k * \\<chi> (C k) t)) &&&\n    (\\<And>i. finite (G i)) &&&\n    (\\<And>i j. i \\<noteq> j \\<Longrightarrow> G i \\<inter> G j = {})", "."], ["proof (state)\nthis:\n  x ?i * \\<chi> (A ?i) t = (\\<Sum>k\\<in>G ?i. z1 k * \\<chi> (C k) t)\n  finite (G ?i)\n  ?i \\<noteq> ?j \\<Longrightarrow> G ?i \\<inter> G ?j = {}\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "{"], ["proof (state)\nthis:\n  x ?i * \\<chi> (A ?i) t = (\\<Sum>k\\<in>G ?i. z1 k * \\<chi> (C k) t)\n  finite (G ?i)\n  ?i \\<noteq> ?j \\<Longrightarrow> G ?i \\<inter> G ?j = {}\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "assume \"i\\<in>R\""], ["proof (state)\nthis:\n  i \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "with ms Bun S Bdis Bms Ams"], ["proof (chain)\npicking this:\n  measure_space M\n  \\<Union> (B ` S) = UNIV\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> B i \\<inter> B j = {}\n  \\<forall>i\\<in>S. B i \\<in> measurable_sets M\n  \\<forall>i\\<in>R. A i \\<in> measurable_sets M\n  i \\<in> R", "have \n          \"measure M (A i) = (\\<Sum>j\\<in>S. measure M (A i \\<inter> B j))\""], ["proof (prove)\nusing this:\n  measure_space M\n  \\<Union> (B ` S) = UNIV\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> B i \\<inter> B j = {}\n  \\<forall>i\\<in>S. B i \\<in> measurable_sets M\n  \\<forall>i\\<in>R. A i \\<in> measurable_sets M\n  i \\<in> R\n\ngoal (1 subgoal):\n 1. Measure.measure M (A i) =\n    (\\<Sum>j\\<in>S. Measure.measure M (A i \\<inter> B j))", "by (simp add: measure_split)"], ["proof (state)\nthis:\n  Measure.measure M (A i) =\n  (\\<Sum>j\\<in>S. Measure.measure M (A i \\<inter> B j))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "hence \"x i * measure M (A i) = (\\<Sum>j\\<in>S. x i * measure M (A i \\<inter> B j))\""], ["proof (prove)\nusing this:\n  Measure.measure M (A i) =\n  (\\<Sum>j\\<in>S. Measure.measure M (A i \\<inter> B j))\n\ngoal (1 subgoal):\n 1. x i * Measure.measure M (A i) =\n    (\\<Sum>j\\<in>S. x i * Measure.measure M (A i \\<inter> B j))", "by (simp add: sum_distrib_left)"], ["proof (state)\nthis:\n  x i * Measure.measure M (A i) =\n  (\\<Sum>j\\<in>S. x i * Measure.measure M (A i \\<inter> B j))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "also"], ["proof (state)\nthis:\n  x i * Measure.measure M (A i) =\n  (\\<Sum>j\\<in>S. x i * Measure.measure M (A i \\<inter> B j))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "{"], ["proof (state)\nthis:\n  x i * Measure.measure M (A i) =\n  (\\<Sum>j\\<in>S. x i * Measure.measure M (A i \\<inter> B j))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "fix j"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "have \"S=S\" and \"x i * measure M (A i \\<inter> B j) = \n            (let k=prod_encode(i,j) in z1 k * measure M (C k))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S = S &&&\n    x i * Measure.measure M (A i \\<inter> B j) =\n    (let k = prod_encode (i, j) in z1 k * Measure.measure M (C k))", "by (auto simp add: C_def z1_def Let_def)"], ["proof (state)\nthis:\n  S = S\n  x i * Measure.measure M (A i \\<inter> B j) =\n  (let k = prod_encode (i, j) in z1 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "}"], ["proof (state)\nthis:\n  S = S\n  x i * Measure.measure M (A i \\<inter> B ?j2) =\n  (let k = prod_encode (i, ?j2) in z1 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "hence \"\\<dots> = (\\<Sum>j\\<in>S. let k=prod_encode (i,j) in z1 k * measure M (C k))\""], ["proof (prove)\nusing this:\n  S = S\n  x i * Measure.measure M (A i \\<inter> B ?j2) =\n  (let k = prod_encode (i, ?j2) in z1 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. (\\<Sum>j\\<in>S. x i * Measure.measure M (A i \\<inter> B j)) =\n    (\\<Sum>j\\<in>S.\n       let k = prod_encode (i, j) in z1 k * Measure.measure M (C k))", "by (rule sum.cong)"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>S. x i * Measure.measure M (A i \\<inter> B j)) =\n  (\\<Sum>j\\<in>S.\n     let k = prod_encode (i, j) in z1 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "also"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>S. x i * Measure.measure M (A i \\<inter> B j)) =\n  (\\<Sum>j\\<in>S.\n     let k = prod_encode (i, j) in z1 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "from S"], ["proof (chain)\npicking this:\n  finite S", "have \"\\<dots> = (\\<Sum>k\\<in>(G i). z1 k * measure M (C k))\""], ["proof (prove)\nusing this:\n  finite S\n\ngoal (1 subgoal):\n 1. (\\<Sum>j\\<in>S.\n       let k = prod_encode (i, j) in z1 k * Measure.measure M (C k)) =\n    (\\<Sum>k\\<in>G i. z1 k * Measure.measure M (C k))", "by (simp add: G_def Let_def o_def\n                sum.reindex[OF subset_inj_on[OF prod_encode_snd_inj]])"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>S.\n     let k = prod_encode (i, j) in z1 k * Measure.measure M (C k)) =\n  (\\<Sum>k\\<in>G i. z1 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "finally"], ["proof (chain)\npicking this:\n  x i * Measure.measure M (A i) =\n  (\\<Sum>k\\<in>G i. z1 k * Measure.measure M (C k))", "have \n          \"x i * measure M (A i) = (\\<Sum>k\\<in>(G i). z1 k * measure M (C k))\""], ["proof (prove)\nusing this:\n  x i * Measure.measure M (A i) =\n  (\\<Sum>k\\<in>G i. z1 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. x i * Measure.measure M (A i) =\n    (\\<Sum>k\\<in>G i. z1 k * Measure.measure M (C k))", "."], ["proof (state)\nthis:\n  x i * Measure.measure M (A i) =\n  (\\<Sum>k\\<in>G i. z1 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "}"], ["proof (state)\nthis:\n  ?i2 \\<in> R \\<Longrightarrow>\n  x ?i2 * Measure.measure M (A ?i2) =\n  (\\<Sum>k\\<in>G ?i2. z1 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "with refl[of R]"], ["proof (chain)\npicking this:\n  R = R\n  ?i2 \\<in> R \\<Longrightarrow>\n  x ?i2 * Measure.measure M (A ?i2) =\n  (\\<Sum>k\\<in>G ?i2. z1 k * Measure.measure M (C k))", "have\n        \"(\\<Sum>i\\<in>R. x i * measure M (A i)) \n        = (\\<Sum>i\\<in>R. (\\<Sum>k\\<in>(G i). z1 k * measure M (C k)))\""], ["proof (prove)\nusing this:\n  R = R\n  ?i2 \\<in> R \\<Longrightarrow>\n  x ?i2 * Measure.measure M (A ?i2) =\n  (\\<Sum>k\\<in>G ?i2. z1 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>R. x i * Measure.measure M (A i)) =\n    (\\<Sum>i\\<in>R. \\<Sum>k\\<in>G i. z1 k * Measure.measure M (C k))", "by (rule sum.cong)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>R. x i * Measure.measure M (A i)) =\n  (\\<Sum>i\\<in>R. \\<Sum>k\\<in>G i. z1 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "with eq f a"], ["proof (chain)\npicking this:\n  x ?i * \\<chi> (A ?i) t = (\\<Sum>k\\<in>G ?i. z1 k * \\<chi> (C k) t)\n  f = (\\<lambda>t. \\<Sum>i\\<in>R. x i * \\<chi> (A i) t)\n  a = (\\<Sum>i\\<in>R. x i * Measure.measure M (A i))\n  (\\<Sum>i\\<in>R. x i * Measure.measure M (A i)) =\n  (\\<Sum>i\\<in>R. \\<Sum>k\\<in>G i. z1 k * Measure.measure M (C k))", "have \"f t = (\\<Sum>i\\<in>R. (\\<Sum>k\\<in>G i. z1 k * \\<chi> (C k) t))\"\n        and \"a = (\\<Sum>i\\<in>R. (\\<Sum>k\\<in>(G i). z1 k * measure M (C k)))\""], ["proof (prove)\nusing this:\n  x ?i * \\<chi> (A ?i) t = (\\<Sum>k\\<in>G ?i. z1 k * \\<chi> (C k) t)\n  f = (\\<lambda>t. \\<Sum>i\\<in>R. x i * \\<chi> (A i) t)\n  a = (\\<Sum>i\\<in>R. x i * Measure.measure M (A i))\n  (\\<Sum>i\\<in>R. x i * Measure.measure M (A i)) =\n  (\\<Sum>i\\<in>R. \\<Sum>k\\<in>G i. z1 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. f t = (\\<Sum>i\\<in>R. \\<Sum>k\\<in>G i. z1 k * \\<chi> (C k) t) &&&\n    a = (\\<Sum>i\\<in>R. \\<Sum>k\\<in>G i. z1 k * Measure.measure M (C k))", "by auto"], ["proof (state)\nthis:\n  f t = (\\<Sum>i\\<in>R. \\<Sum>k\\<in>G i. z1 k * \\<chi> (C k) t)\n  a = (\\<Sum>i\\<in>R. \\<Sum>k\\<in>G i. z1 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "also"], ["proof (state)\nthis:\n  f t = (\\<Sum>i\\<in>R. \\<Sum>k\\<in>G i. z1 k * \\<chi> (C k) t)\n  a = (\\<Sum>i\\<in>R. \\<Sum>k\\<in>G i. z1 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "have KG: \"K = (\\<Union>i\\<in>R. G i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. K = \\<Union> (G ` R)", "by (auto simp add: K_def G_def)"], ["proof (state)\nthis:\n  K = \\<Union> (G ` R)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "moreover"], ["proof (state)\nthis:\n  K = \\<Union> (G ` R)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "note G Gdis R"], ["proof (state)\nthis:\n  finite (G ?i)\n  ?i \\<noteq> ?j \\<Longrightarrow> G ?i \\<inter> G ?j = {}\n  finite R\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "ultimately"], ["proof (chain)\npicking this:\n  f t = (\\<Sum>i\\<in>R. \\<Sum>k\\<in>G i. z1 k * \\<chi> (C k) t)\n  a = (\\<Sum>i\\<in>R. \\<Sum>k\\<in>G i. z1 k * Measure.measure M (C k))\n  K = \\<Union> (G ` R)\n  finite (G ?i)\n  ?i \\<noteq> ?j \\<Longrightarrow> G ?i \\<inter> G ?j = {}\n  finite R", "have f: \"f t = (\\<Sum>k\\<in>K. z1 k * \\<chi> (C k) t)\" \n        and a: \"a = (\\<Sum>k\\<in>K. z1 k * measure M (C k))\""], ["proof (prove)\nusing this:\n  f t = (\\<Sum>i\\<in>R. \\<Sum>k\\<in>G i. z1 k * \\<chi> (C k) t)\n  a = (\\<Sum>i\\<in>R. \\<Sum>k\\<in>G i. z1 k * Measure.measure M (C k))\n  K = \\<Union> (G ` R)\n  finite (G ?i)\n  ?i \\<noteq> ?j \\<Longrightarrow> G ?i \\<inter> G ?j = {}\n  finite R\n\ngoal (1 subgoal):\n 1. f t = (\\<Sum>k\\<in>K. z1 k * \\<chi> (C k) t) &&&\n    a = (\\<Sum>k\\<in>K. z1 k * Measure.measure M (C k))", "by (auto simp add: sum.UNION_disjoint)"], ["proof (state)\nthis:\n  f t = (\\<Sum>k\\<in>K. z1 k * \\<chi> (C k) t)\n  a = (\\<Sum>k\\<in>K. z1 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "(*And now (almost) the same for g*)"], ["proof (state)\nthis:\n  f t = (\\<Sum>k\\<in>K. z1 k * \\<chi> (C k) t)\n  a = (\\<Sum>k\\<in>K. z1 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "{"], ["proof (state)\nthis:\n  f t = (\\<Sum>k\\<in>K. z1 k * \\<chi> (C k) t)\n  a = (\\<Sum>k\\<in>K. z1 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "fix j"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "from Aun R Adis"], ["proof (chain)\npicking this:\n  \\<Union> (A ` R) = UNIV\n  finite R\n  \\<forall>i\\<in>R.\n     \\<forall>j\\<in>R. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}", "have \"\\<chi> (B j) t = (\\<Sum>i\\<in>R. \\<chi> (B j \\<inter> A i) t)\""], ["proof (prove)\nusing this:\n  \\<Union> (A ` R) = UNIV\n  finite R\n  \\<forall>i\\<in>R.\n     \\<forall>j\\<in>R. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n\ngoal (1 subgoal):\n 1. \\<chi> (B j) t = (\\<Sum>i\\<in>R. \\<chi> (B j \\<inter> A i) t)", "by (rule char_split)"], ["proof (state)\nthis:\n  \\<chi> (B j) t = (\\<Sum>i\\<in>R. \\<chi> (B j \\<inter> A i) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "hence \"y j * \\<chi> (B j) t = (\\<Sum>i\\<in>R. y j * \\<chi> (A i \\<inter> B j) t)\""], ["proof (prove)\nusing this:\n  \\<chi> (B j) t = (\\<Sum>i\\<in>R. \\<chi> (B j \\<inter> A i) t)\n\ngoal (1 subgoal):\n 1. y j * \\<chi> (B j) t =\n    (\\<Sum>i\\<in>R. y j * \\<chi> (A i \\<inter> B j) t)", "by (simp add: sum_distrib_left Int_commute)"], ["proof (state)\nthis:\n  y j * \\<chi> (B j) t = (\\<Sum>i\\<in>R. y j * \\<chi> (A i \\<inter> B j) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "also"], ["proof (state)\nthis:\n  y j * \\<chi> (B j) t = (\\<Sum>i\\<in>R. y j * \\<chi> (A i \\<inter> B j) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "{"], ["proof (state)\nthis:\n  y j * \\<chi> (B j) t = (\\<Sum>i\\<in>R. y j * \\<chi> (A i \\<inter> B j) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "have \"R=R\" and \n            \"y j * \\<chi> (A i \\<inter> B j) t = (let k=prod_encode(i,j) in z2 k * \\<chi> (C k) t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R = R &&&\n    y j * \\<chi> (A i \\<inter> B j) t =\n    (let k = prod_encode (i, j) in z2 k * \\<chi> (C k) t)", "by (auto simp add: C_def z2_def Let_def)"], ["proof (state)\nthis:\n  R = R\n  y j * \\<chi> (A i \\<inter> B j) t =\n  (let k = prod_encode (i, j) in z2 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "}"], ["proof (state)\nthis:\n  R = R\n  y j * \\<chi> (A ?i2 \\<inter> B j) t =\n  (let k = prod_encode (?i2, j) in z2 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "hence \"\\<dots> = (\\<Sum>i\\<in>R. let k=prod_encode (i,j) in z2 k * \\<chi> (C k) t)\""], ["proof (prove)\nusing this:\n  R = R\n  y j * \\<chi> (A ?i2 \\<inter> B j) t =\n  (let k = prod_encode (?i2, j) in z2 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>R. y j * \\<chi> (A i \\<inter> B j) t) =\n    (\\<Sum>i\\<in>R. let k = prod_encode (i, j) in z2 k * \\<chi> (C k) t)", "by (rule sum.cong)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>R. y j * \\<chi> (A i \\<inter> B j) t) =\n  (\\<Sum>i\\<in>R. let k = prod_encode (i, j) in z2 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>R. y j * \\<chi> (A i \\<inter> B j) t) =\n  (\\<Sum>i\\<in>R. let k = prod_encode (i, j) in z2 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "from R"], ["proof (chain)\npicking this:\n  finite R", "have \"\\<dots> = (\\<Sum>k\\<in>(H j). z2 k * \\<chi> (C k) t)\""], ["proof (prove)\nusing this:\n  finite R\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>R. let k = prod_encode (i, j) in z2 k * \\<chi> (C k) t) =\n    (\\<Sum>k\\<in>H j. z2 k * \\<chi> (C k) t)", "by (simp add: H_def Let_def o_def\n                sum.reindex[OF subset_inj_on[OF prod_encode_fst_inj]])"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>R. let k = prod_encode (i, j) in z2 k * \\<chi> (C k) t) =\n  (\\<Sum>k\\<in>H j. z2 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "finally"], ["proof (chain)\npicking this:\n  y j * \\<chi> (B j) t = (\\<Sum>k\\<in>H j. z2 k * \\<chi> (C k) t)", "have eq: \"y j * \\<chi> (B j) t = (\\<Sum>k\\<in> H j. z2 k * \\<chi> (C k) t)\""], ["proof (prove)\nusing this:\n  y j * \\<chi> (B j) t = (\\<Sum>k\\<in>H j. z2 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. y j * \\<chi> (B j) t = (\\<Sum>k\\<in>H j. z2 k * \\<chi> (C k) t)", "."], ["proof (state)\nthis:\n  y j * \\<chi> (B j) t = (\\<Sum>k\\<in>H j. z2 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "from R"], ["proof (chain)\npicking this:\n  finite R", "have H: \"finite (H j)\""], ["proof (prove)\nusing this:\n  finite R\n\ngoal (1 subgoal):\n 1. finite (H j)", "by (simp add: H_def)"], ["proof (state)\nthis:\n  finite (H j)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "{"], ["proof (state)\nthis:\n  finite (H j)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "fix k"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "assume \"k \\<in> H j\""], ["proof (state)\nthis:\n  k \\<in> H j\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "then"], ["proof (chain)\npicking this:\n  k \\<in> H j", "obtain i where kij: \"k=prod_encode (i,j)\""], ["proof (prove)\nusing this:\n  k \\<in> H j\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        k = prod_encode (i, j) \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp only: H_def)"], ["proof (state)\nthis:\n  k = prod_encode (i, j)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "{"], ["proof (state)\nthis:\n  k = prod_encode (i, j)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "fix j2"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "assume j2: \"j2 \\<noteq> j\""], ["proof (state)\nthis:\n  j2 \\<noteq> j\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "{"], ["proof (state)\nthis:\n  j2 \\<noteq> j\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "fix k2"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "assume \"k2 \\<in> H j2\""], ["proof (state)\nthis:\n  k2 \\<in> H j2\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "then"], ["proof (chain)\npicking this:\n  k2 \\<in> H j2", "obtain i2 where kij2: \"k2=prod_encode (i2,j2)\""], ["proof (prove)\nusing this:\n  k2 \\<in> H j2\n\ngoal (1 subgoal):\n 1. (\\<And>i2.\n        k2 = prod_encode (i2, j2) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (auto simp only: H_def)"], ["proof (state)\nthis:\n  k2 = prod_encode (i2, j2)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "from j2"], ["proof (chain)\npicking this:\n  j2 \\<noteq> j", "have \"(i2,j2) \\<noteq> (i,j)\" and \"(i2,j2) \\<in> UNIV\" and \"(i,j) \\<in> UNIV\""], ["proof (prove)\nusing this:\n  j2 \\<noteq> j\n\ngoal (1 subgoal):\n 1. (i2, j2) \\<noteq> (i, j) &&& (i2, j2) \\<in> UNIV &&& (i, j) \\<in> UNIV", "by auto"], ["proof (state)\nthis:\n  (i2, j2) \\<noteq> (i, j)\n  (i2, j2) \\<in> UNIV\n  (i, j) \\<in> UNIV\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "with inj_prod_encode"], ["proof (chain)\npicking this:\n  inj_on prod_encode ?A\n  (i2, j2) \\<noteq> (i, j)\n  (i2, j2) \\<in> UNIV\n  (i, j) \\<in> UNIV", "have  \"prod_encode (i2,j2) \\<noteq> prod_encode (i,j)\""], ["proof (prove)\nusing this:\n  inj_on prod_encode ?A\n  (i2, j2) \\<noteq> (i, j)\n  (i2, j2) \\<in> UNIV\n  (i, j) \\<in> UNIV\n\ngoal (1 subgoal):\n 1. prod_encode (i2, j2) \\<noteq> prod_encode (i, j)", "by (rule inj_on_contraD)"], ["proof (state)\nthis:\n  prod_encode (i2, j2) \\<noteq> prod_encode (i, j)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "with kij kij2"], ["proof (chain)\npicking this:\n  k = prod_encode (i, j)\n  k2 = prod_encode (i2, j2)\n  prod_encode (i2, j2) \\<noteq> prod_encode (i, j)", "have \"k2 \\<noteq> k\""], ["proof (prove)\nusing this:\n  k = prod_encode (i, j)\n  k2 = prod_encode (i2, j2)\n  prod_encode (i2, j2) \\<noteq> prod_encode (i, j)\n\ngoal (1 subgoal):\n 1. k2 \\<noteq> k", "by fast"], ["proof (state)\nthis:\n  k2 \\<noteq> k\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "}"], ["proof (state)\nthis:\n  ?k2.2 \\<in> H j2 \\<Longrightarrow> ?k2.2 \\<noteq> k\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "hence \"k \\<notin> H j2\""], ["proof (prove)\nusing this:\n  ?k2.2 \\<in> H j2 \\<Longrightarrow> ?k2.2 \\<noteq> k\n\ngoal (1 subgoal):\n 1. k \\<notin> H j2", "by fast"], ["proof (state)\nthis:\n  k \\<notin> H j2\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "}"], ["proof (state)\nthis:\n  ?j2.2 \\<noteq> j \\<Longrightarrow> k \\<notin> H ?j2.2\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?k8 \\<in> H j; ?j2.5 \\<noteq> j\\<rbrakk>\n  \\<Longrightarrow> ?k8 \\<notin> H ?j2.5\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "hence \"\\<And>i. i \\<noteq> j \\<Longrightarrow>  H i \\<inter> H j = {}\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?k8 \\<in> H j; ?j2.5 \\<noteq> j\\<rbrakk>\n  \\<Longrightarrow> ?k8 \\<notin> H ?j2.5\n\ngoal (1 subgoal):\n 1. \\<And>i. i \\<noteq> j \\<Longrightarrow> H i \\<inter> H j = {}", "by fast"], ["proof (state)\nthis:\n  ?i \\<noteq> j \\<Longrightarrow> H ?i \\<inter> H j = {}\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "note eq H this"], ["proof (state)\nthis:\n  y j * \\<chi> (B j) t = (\\<Sum>k\\<in>H j. z2 k * \\<chi> (C k) t)\n  finite (H j)\n  ?i \\<noteq> j \\<Longrightarrow> H ?i \\<inter> H j = {}\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "}"], ["proof (state)\nthis:\n  y ?j3 * \\<chi> (B ?j3) t = (\\<Sum>k\\<in>H ?j3. z2 k * \\<chi> (C k) t)\n  finite (H ?j3)\n  ?i \\<noteq> ?j3 \\<Longrightarrow> H ?i \\<inter> H ?j3 = {}\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "hence eq: \"\\<And>j.  y j * \\<chi> (B j) t = (\\<Sum>k\\<in>H j. z2 k * \\<chi> (C k) t)\" \n        and H: \"\\<And>i. finite (H i)\"\n        and Hdis: \"\\<And>i j. i \\<noteq> j \\<Longrightarrow> H i \\<inter> H j = {}\""], ["proof (prove)\nusing this:\n  y ?j3 * \\<chi> (B ?j3) t = (\\<Sum>k\\<in>H ?j3. z2 k * \\<chi> (C k) t)\n  finite (H ?j3)\n  ?i \\<noteq> ?j3 \\<Longrightarrow> H ?i \\<inter> H ?j3 = {}\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        y j * \\<chi> (B j) t = (\\<Sum>k\\<in>H j. z2 k * \\<chi> (C k) t)) &&&\n    (\\<And>i. finite (H i)) &&&\n    (\\<And>i j. i \\<noteq> j \\<Longrightarrow> H i \\<inter> H j = {})", "."], ["proof (state)\nthis:\n  y ?j * \\<chi> (B ?j) t = (\\<Sum>k\\<in>H ?j. z2 k * \\<chi> (C k) t)\n  finite (H ?i)\n  ?i \\<noteq> ?j \\<Longrightarrow> H ?i \\<inter> H ?j = {}\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "from eq g"], ["proof (chain)\npicking this:\n  y ?j * \\<chi> (B ?j) t = (\\<Sum>k\\<in>H ?j. z2 k * \\<chi> (C k) t)\n  g = (\\<lambda>t. \\<Sum>i\\<in>S. y i * \\<chi> (B i) t)", "have \"g t = (\\<Sum>j\\<in>S. (\\<Sum>k\\<in>H j. z2 k * \\<chi> (C k) t))\""], ["proof (prove)\nusing this:\n  y ?j * \\<chi> (B ?j) t = (\\<Sum>k\\<in>H ?j. z2 k * \\<chi> (C k) t)\n  g = (\\<lambda>t. \\<Sum>i\\<in>S. y i * \\<chi> (B i) t)\n\ngoal (1 subgoal):\n 1. g t = (\\<Sum>j\\<in>S. \\<Sum>k\\<in>H j. z2 k * \\<chi> (C k) t)", "by simp"], ["proof (state)\nthis:\n  g t = (\\<Sum>j\\<in>S. \\<Sum>k\\<in>H j. z2 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "also"], ["proof (state)\nthis:\n  g t = (\\<Sum>j\\<in>S. \\<Sum>k\\<in>H j. z2 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "{"], ["proof (state)\nthis:\n  g t = (\\<Sum>j\\<in>S. \\<Sum>k\\<in>H j. z2 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "fix j"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "assume jS: \"j\\<in>S\""], ["proof (state)\nthis:\n  j \\<in> S\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "from ms Aun R Adis Ams Bms jS"], ["proof (chain)\npicking this:\n  measure_space M\n  \\<Union> (A ` R) = UNIV\n  finite R\n  \\<forall>i\\<in>R.\n     \\<forall>j\\<in>R. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<forall>i\\<in>R. A i \\<in> measurable_sets M\n  \\<forall>i\\<in>S. B i \\<in> measurable_sets M\n  j \\<in> S", "have \"measure M (B j) = \n          (\\<Sum>i\\<in>R. measure M (B j \\<inter> A i))\""], ["proof (prove)\nusing this:\n  measure_space M\n  \\<Union> (A ` R) = UNIV\n  finite R\n  \\<forall>i\\<in>R.\n     \\<forall>j\\<in>R. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<forall>i\\<in>R. A i \\<in> measurable_sets M\n  \\<forall>i\\<in>S. B i \\<in> measurable_sets M\n  j \\<in> S\n\ngoal (1 subgoal):\n 1. Measure.measure M (B j) =\n    (\\<Sum>i\\<in>R. Measure.measure M (B j \\<inter> A i))", "by (simp add: measure_split)"], ["proof (state)\nthis:\n  Measure.measure M (B j) =\n  (\\<Sum>i\\<in>R. Measure.measure M (B j \\<inter> A i))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "hence \"y j * measure M (B j) = (\\<Sum>i\\<in>R. y j * measure M (A i \\<inter> B j))\""], ["proof (prove)\nusing this:\n  Measure.measure M (B j) =\n  (\\<Sum>i\\<in>R. Measure.measure M (B j \\<inter> A i))\n\ngoal (1 subgoal):\n 1. y j * Measure.measure M (B j) =\n    (\\<Sum>i\\<in>R. y j * Measure.measure M (A i \\<inter> B j))", "by (simp add: sum_distrib_left Int_commute)"], ["proof (state)\nthis:\n  y j * Measure.measure M (B j) =\n  (\\<Sum>i\\<in>R. y j * Measure.measure M (A i \\<inter> B j))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "also"], ["proof (state)\nthis:\n  y j * Measure.measure M (B j) =\n  (\\<Sum>i\\<in>R. y j * Measure.measure M (A i \\<inter> B j))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "{"], ["proof (state)\nthis:\n  y j * Measure.measure M (B j) =\n  (\\<Sum>i\\<in>R. y j * Measure.measure M (A i \\<inter> B j))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "have \"R=R\" and \"y j * measure M (A i \\<inter> B j) = \n            (let k=prod_encode(i,j) in z2 k * measure M (C k))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R = R &&&\n    y j * Measure.measure M (A i \\<inter> B j) =\n    (let k = prod_encode (i, j) in z2 k * Measure.measure M (C k))", "by (auto simp add: C_def z2_def Let_def)"], ["proof (state)\nthis:\n  R = R\n  y j * Measure.measure M (A i \\<inter> B j) =\n  (let k = prod_encode (i, j) in z2 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "}"], ["proof (state)\nthis:\n  R = R\n  y j * Measure.measure M (A ?i2 \\<inter> B j) =\n  (let k = prod_encode (?i2, j) in z2 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "hence \"\\<dots> = (\\<Sum>i\\<in>R. let k=prod_encode(i,j) in z2 k * measure M (C k))\""], ["proof (prove)\nusing this:\n  R = R\n  y j * Measure.measure M (A ?i2 \\<inter> B j) =\n  (let k = prod_encode (?i2, j) in z2 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>R. y j * Measure.measure M (A i \\<inter> B j)) =\n    (\\<Sum>i\\<in>R.\n       let k = prod_encode (i, j) in z2 k * Measure.measure M (C k))", "by (rule sum.cong)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>R. y j * Measure.measure M (A i \\<inter> B j)) =\n  (\\<Sum>i\\<in>R.\n     let k = prod_encode (i, j) in z2 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>R. y j * Measure.measure M (A i \\<inter> B j)) =\n  (\\<Sum>i\\<in>R.\n     let k = prod_encode (i, j) in z2 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "from R"], ["proof (chain)\npicking this:\n  finite R", "have \"\\<dots> = (\\<Sum>k\\<in>(H j). z2 k * measure M (C k))\""], ["proof (prove)\nusing this:\n  finite R\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>R.\n       let k = prod_encode (i, j) in z2 k * Measure.measure M (C k)) =\n    (\\<Sum>k\\<in>H j. z2 k * Measure.measure M (C k))", "by (simp add: H_def Let_def o_def\n                sum.reindex[OF subset_inj_on[OF prod_encode_fst_inj]])"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>R.\n     let k = prod_encode (i, j) in z2 k * Measure.measure M (C k)) =\n  (\\<Sum>k\\<in>H j. z2 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "finally"], ["proof (chain)\npicking this:\n  y j * Measure.measure M (B j) =\n  (\\<Sum>k\\<in>H j. z2 k * Measure.measure M (C k))", "have eq2: \n          \"y j * measure M (B j) = (\\<Sum>k\\<in>(H j). z2 k * measure M (C k))\""], ["proof (prove)\nusing this:\n  y j * Measure.measure M (B j) =\n  (\\<Sum>k\\<in>H j. z2 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. y j * Measure.measure M (B j) =\n    (\\<Sum>k\\<in>H j. z2 k * Measure.measure M (C k))", "."], ["proof (state)\nthis:\n  y j * Measure.measure M (B j) =\n  (\\<Sum>k\\<in>H j. z2 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "}"], ["proof (state)\nthis:\n  ?j2 \\<in> S \\<Longrightarrow>\n  y ?j2 * Measure.measure M (B ?j2) =\n  (\\<Sum>k\\<in>H ?j2. z2 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "with refl"], ["proof (chain)\npicking this:\n  ?t = ?t\n  ?j2 \\<in> S \\<Longrightarrow>\n  y ?j2 * Measure.measure M (B ?j2) =\n  (\\<Sum>k\\<in>H ?j2. z2 k * Measure.measure M (C k))", "have \"(\\<Sum>j\\<in>S. y j * measure M (B j)) = (\\<Sum>j\\<in>S. (\\<Sum>k\\<in>(H j). z2 k * measure M (C k)))\""], ["proof (prove)\nusing this:\n  ?t = ?t\n  ?j2 \\<in> S \\<Longrightarrow>\n  y ?j2 * Measure.measure M (B ?j2) =\n  (\\<Sum>k\\<in>H ?j2. z2 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. (\\<Sum>j\\<in>S. y j * Measure.measure M (B j)) =\n    (\\<Sum>j\\<in>S. \\<Sum>k\\<in>H j. z2 k * Measure.measure M (C k))", "by (rule sum.cong)"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>S. y j * Measure.measure M (B j)) =\n  (\\<Sum>j\\<in>S. \\<Sum>k\\<in>H j. z2 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "with b"], ["proof (chain)\npicking this:\n  b = (\\<Sum>j\\<in>S. y j * Measure.measure M (B j))\n  (\\<Sum>j\\<in>S. y j * Measure.measure M (B j)) =\n  (\\<Sum>j\\<in>S. \\<Sum>k\\<in>H j. z2 k * Measure.measure M (C k))", "have \"b = (\\<Sum>j\\<in>S. (\\<Sum>k\\<in>(H j). z2 k * measure M (C k)))\""], ["proof (prove)\nusing this:\n  b = (\\<Sum>j\\<in>S. y j * Measure.measure M (B j))\n  (\\<Sum>j\\<in>S. y j * Measure.measure M (B j)) =\n  (\\<Sum>j\\<in>S. \\<Sum>k\\<in>H j. z2 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. b = (\\<Sum>j\\<in>S. \\<Sum>k\\<in>H j. z2 k * Measure.measure M (C k))", "by simp"], ["proof (state)\nthis:\n  b = (\\<Sum>j\\<in>S. \\<Sum>k\\<in>H j. z2 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "moreover"], ["proof (state)\nthis:\n  b = (\\<Sum>j\\<in>S. \\<Sum>k\\<in>H j. z2 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "have \"K = (\\<Union>j\\<in>S. H j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. K = \\<Union> (H ` S)", "by (auto simp add: K_def H_def)"], ["proof (state)\nthis:\n  K = \\<Union> (H ` S)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "moreover"], ["proof (state)\nthis:\n  K = \\<Union> (H ` S)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "note H Hdis S"], ["proof (state)\nthis:\n  finite (H ?i)\n  ?i \\<noteq> ?j \\<Longrightarrow> H ?i \\<inter> H ?j = {}\n  finite S\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "ultimately"], ["proof (chain)\npicking this:\n  g t = (\\<Sum>j\\<in>S. \\<Sum>k\\<in>H j. z2 k * \\<chi> (C k) t)\n  b = (\\<Sum>j\\<in>S. \\<Sum>k\\<in>H j. z2 k * Measure.measure M (C k))\n  K = \\<Union> (H ` S)\n  finite (H ?i)\n  ?i \\<noteq> ?j \\<Longrightarrow> H ?i \\<inter> H ?j = {}\n  finite S", "have g: \"g t = (\\<Sum>k\\<in>K. z2 k * \\<chi> (C k) t)\" and K: \"finite K\"\n        and b: \"b = (\\<Sum>k\\<in>K. z2 k * measure M (C k))\""], ["proof (prove)\nusing this:\n  g t = (\\<Sum>j\\<in>S. \\<Sum>k\\<in>H j. z2 k * \\<chi> (C k) t)\n  b = (\\<Sum>j\\<in>S. \\<Sum>k\\<in>H j. z2 k * Measure.measure M (C k))\n  K = \\<Union> (H ` S)\n  finite (H ?i)\n  ?i \\<noteq> ?j \\<Longrightarrow> H ?i \\<inter> H ?j = {}\n  finite S\n\ngoal (1 subgoal):\n 1. g t = (\\<Sum>k\\<in>K. z2 k * \\<chi> (C k) t) &&&\n    finite K &&& b = (\\<Sum>k\\<in>K. z2 k * Measure.measure M (C k))", "by (auto simp add: sum.UNION_disjoint)"], ["proof (state)\nthis:\n  g t = (\\<Sum>k\\<in>K. z2 k * \\<chi> (C k) t)\n  finite K\n  b = (\\<Sum>k\\<in>K. z2 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "{"], ["proof (state)\nthis:\n  g t = (\\<Sum>k\\<in>K. z2 k * \\<chi> (C k) t)\n  finite K\n  b = (\\<Sum>k\\<in>K. z2 k * Measure.measure M (C k))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "from Bun"], ["proof (chain)\npicking this:\n  \\<Union> (B ` S) = UNIV", "have \"(\\<Union>k\\<in>G i. C k) = A i\""], ["proof (prove)\nusing this:\n  \\<Union> (B ` S) = UNIV\n\ngoal (1 subgoal):\n 1. \\<Union> (C ` G i) = A i", "by (simp add: G_def C_def)"], ["proof (state)\nthis:\n  \\<Union> (C ` G i) = A i\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "}"], ["proof (state)\nthis:\n  \\<Union> (C ` G ?i2) = A ?i2\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "with Aun"], ["proof (chain)\npicking this:\n  \\<Union> (A ` R) = UNIV\n  \\<Union> (C ` G ?i2) = A ?i2", "have \"(\\<Union>i\\<in>R. (\\<Union>k\\<in>G i. C k)) = UNIV\""], ["proof (prove)\nusing this:\n  \\<Union> (A ` R) = UNIV\n  \\<Union> (C ` G ?i2) = A ?i2\n\ngoal (1 subgoal):\n 1. (\\<Union>i\\<in>R. \\<Union> (C ` G i)) = UNIV", "by simp"], ["proof (state)\nthis:\n  (\\<Union>i\\<in>R. \\<Union> (C ` G i)) = UNIV\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "hence \"(\\<Union>k\\<in>(\\<Union>i\\<in>R. G i). C k) = UNIV\""], ["proof (prove)\nusing this:\n  (\\<Union>i\\<in>R. \\<Union> (C ` G i)) = UNIV\n\ngoal (1 subgoal):\n 1. \\<Union> (C ` \\<Union> (G ` R)) = UNIV", "by simp"], ["proof (state)\nthis:\n  \\<Union> (C ` \\<Union> (G ` R)) = UNIV\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "with KG"], ["proof (chain)\npicking this:\n  K = \\<Union> (G ` R)\n  \\<Union> (C ` \\<Union> (G ` R)) = UNIV", "have Kun: \"(\\<Union>k\\<in>K. C k) = UNIV\""], ["proof (prove)\nusing this:\n  K = \\<Union> (G ` R)\n  \\<Union> (C ` \\<Union> (G ` R)) = UNIV\n\ngoal (1 subgoal):\n 1. \\<Union> (C ` K) = UNIV", "by simp"], ["proof (state)\nthis:\n  \\<Union> (C ` K) = UNIV\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "note f g a b Kun K"], ["proof (state)\nthis:\n  f t = (\\<Sum>k\\<in>K. z1 k * \\<chi> (C k) t)\n  g t = (\\<Sum>k\\<in>K. z2 k * \\<chi> (C k) t)\n  a = (\\<Sum>k\\<in>K. z1 k * Measure.measure M (C k))\n  b = (\\<Sum>k\\<in>K. z2 k * Measure.measure M (C k))\n  \\<Union> (C ` K) = UNIV\n  finite K\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "}"], ["proof (state)\nthis:\n  f ?t2 = (\\<Sum>k\\<in>K. z1 k * \\<chi> (C k) ?t2)\n  g ?t2 = (\\<Sum>k\\<in>K. z2 k * \\<chi> (C k) ?t2)\n  a = (\\<Sum>k\\<in>K. z1 k * Measure.measure M (C k))\n  b = (\\<Sum>k\\<in>K. z2 k * Measure.measure M (C k))\n  \\<Union> (C ` K) = UNIV\n  finite K\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "txt\\<open>\\nopagebreak\\<close>"], ["proof (state)\nthis:\n  f ?t2 = (\\<Sum>k\\<in>K. z1 k * \\<chi> (C k) ?t2)\n  g ?t2 = (\\<Sum>k\\<in>K. z2 k * \\<chi> (C k) ?t2)\n  a = (\\<Sum>k\\<in>K. z1 k * Measure.measure M (C k))\n  b = (\\<Sum>k\\<in>K. z2 k * Measure.measure M (C k))\n  \\<Union> (C ` K) = UNIV\n  finite K\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "hence f: \"f = (\\<lambda>t. (\\<Sum>k\\<in>K. z1 k * \\<chi> (C k) t))\" \n      and g: \"g = (\\<lambda>t. (\\<Sum>k\\<in>K. z2 k * \\<chi> (C k) t))\" \n      and a: \"a = (\\<Sum>k\\<in>K. z1 k * measure M (C k))\" \n      and b: \"b = (\\<Sum>k\\<in>K. z2 k * measure M (C k))\" \n      and Kun: \"\\<Union>(C ` K) = UNIV\" and K: \"finite K\""], ["proof (prove)\nusing this:\n  f ?t2 = (\\<Sum>k\\<in>K. z1 k * \\<chi> (C k) ?t2)\n  g ?t2 = (\\<Sum>k\\<in>K. z2 k * \\<chi> (C k) ?t2)\n  a = (\\<Sum>k\\<in>K. z1 k * Measure.measure M (C k))\n  b = (\\<Sum>k\\<in>K. z2 k * Measure.measure M (C k))\n  \\<Union> (C ` K) = UNIV\n  finite K\n\ngoal (1 subgoal):\n 1. (f = (\\<lambda>t. \\<Sum>k\\<in>K. z1 k * \\<chi> (C k) t) &&&\n     g = (\\<lambda>t. \\<Sum>k\\<in>K. z2 k * \\<chi> (C k) t) &&&\n     a = (\\<Sum>k\\<in>K. z1 k * Measure.measure M (C k))) &&&\n    b = (\\<Sum>k\\<in>K. z2 k * Measure.measure M (C k)) &&&\n    \\<Union> (C ` K) = UNIV &&& finite K", "by (auto simp add: ext)"], ["proof (state)\nthis:\n  f = (\\<lambda>t. \\<Sum>k\\<in>K. z1 k * \\<chi> (C k) t)\n  g = (\\<lambda>t. \\<Sum>k\\<in>K. z2 k * \\<chi> (C k) t)\n  a = (\\<Sum>k\\<in>K. z1 k * Measure.measure M (C k))\n  b = (\\<Sum>k\\<in>K. z2 k * Measure.measure M (C k))\n  \\<Union> (C ` K) = UNIV\n  finite K\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "note f g a b K"], ["proof (state)\nthis:\n  f = (\\<lambda>t. \\<Sum>k\\<in>K. z1 k * \\<chi> (C k) t)\n  g = (\\<lambda>t. \\<Sum>k\\<in>K. z2 k * \\<chi> (C k) t)\n  a = (\\<Sum>k\\<in>K. z1 k * Measure.measure M (C k))\n  b = (\\<Sum>k\\<in>K. z2 k * Measure.measure M (C k))\n  finite K\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "moreover"], ["proof (state)\nthis:\n  f = (\\<lambda>t. \\<Sum>k\\<in>K. z1 k * \\<chi> (C k) t)\n  g = (\\<lambda>t. \\<Sum>k\\<in>K. z2 k * \\<chi> (C k) t)\n  a = (\\<Sum>k\\<in>K. z1 k * Measure.measure M (C k))\n  b = (\\<Sum>k\\<in>K. z2 k * Measure.measure M (C k))\n  finite K\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "{"], ["proof (state)\nthis:\n  f = (\\<lambda>t. \\<Sum>k\\<in>K. z1 k * \\<chi> (C k) t)\n  g = (\\<lambda>t. \\<Sum>k\\<in>K. z2 k * \\<chi> (C k) t)\n  a = (\\<Sum>k\\<in>K. z1 k * Measure.measure M (C k))\n  b = (\\<Sum>k\\<in>K. z2 k * Measure.measure M (C k))\n  finite K\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "fix k1 k2"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "assume \"k1\\<in>K\" and \"k2\\<in>K\" and diff: \"k1 \\<noteq> k2\""], ["proof (state)\nthis:\n  k1 \\<in> K\n  k2 \\<in> K\n  k1 \\<noteq> k2\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "with K_def"], ["proof (chain)\npicking this:\n  K = {k. \\<exists>i\\<in>R. \\<exists>j\\<in>S. k = prod_encode (i, j)}\n  k1 \\<in> K\n  k2 \\<in> K\n  k1 \\<noteq> k2", "obtain i1 j1 i2 j2 where \n        RS: \"i1 \\<in> R \\<and> i2 \\<in> R \\<and> j1 \\<in> S \\<and> j2 \\<in> S\"\n        and k1: \"k1 = prod_encode (i1,j1)\" and k2: \"k2 = prod_encode (i2,j2)\""], ["proof (prove)\nusing this:\n  K = {k. \\<exists>i\\<in>R. \\<exists>j\\<in>S. k = prod_encode (i, j)}\n  k1 \\<in> K\n  k2 \\<in> K\n  k1 \\<noteq> k2\n\ngoal (1 subgoal):\n 1. (\\<And>i1 i2 j1 j2.\n        \\<lbrakk>i1 \\<in> R \\<and>\n                 i2 \\<in> R \\<and> j1 \\<in> S \\<and> j2 \\<in> S;\n         k1 = prod_encode (i1, j1); k2 = prod_encode (i2, j2)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  i1 \\<in> R \\<and> i2 \\<in> R \\<and> j1 \\<in> S \\<and> j2 \\<in> S\n  k1 = prod_encode (i1, j1)\n  k2 = prod_encode (i2, j2)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "with diff"], ["proof (chain)\npicking this:\n  k1 \\<noteq> k2\n  i1 \\<in> R \\<and> i2 \\<in> R \\<and> j1 \\<in> S \\<and> j2 \\<in> S\n  k1 = prod_encode (i1, j1)\n  k2 = prod_encode (i2, j2)", "have \"(i1,j1) \\<noteq> (i2,j2)\""], ["proof (prove)\nusing this:\n  k1 \\<noteq> k2\n  i1 \\<in> R \\<and> i2 \\<in> R \\<and> j1 \\<in> S \\<and> j2 \\<in> S\n  k1 = prod_encode (i1, j1)\n  k2 = prod_encode (i2, j2)\n\ngoal (1 subgoal):\n 1. (i1, j1) \\<noteq> (i2, j2)", "by auto"], ["proof (state)\nthis:\n  (i1, j1) \\<noteq> (i2, j2)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "with RS Adis Bdis k1 k2"], ["proof (chain)\npicking this:\n  i1 \\<in> R \\<and> i2 \\<in> R \\<and> j1 \\<in> S \\<and> j2 \\<in> S\n  \\<forall>i\\<in>R.\n     \\<forall>j\\<in>R. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> B i \\<inter> B j = {}\n  k1 = prod_encode (i1, j1)\n  k2 = prod_encode (i2, j2)\n  (i1, j1) \\<noteq> (i2, j2)", "have \"C k1 \\<inter> C k2 = {}\""], ["proof (prove)\nusing this:\n  i1 \\<in> R \\<and> i2 \\<in> R \\<and> j1 \\<in> S \\<and> j2 \\<in> S\n  \\<forall>i\\<in>R.\n     \\<forall>j\\<in>R. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> B i \\<inter> B j = {}\n  k1 = prod_encode (i1, j1)\n  k2 = prod_encode (i2, j2)\n  (i1, j1) \\<noteq> (i2, j2)\n\ngoal (1 subgoal):\n 1. C k1 \\<inter> C k2 = {}", "by (simp add: C_def) fast"], ["proof (state)\nthis:\n  C k1 \\<inter> C k2 = {}\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?k1.2 \\<in> K; ?k2.2 \\<in> K; ?k1.2 \\<noteq> ?k2.2\\<rbrakk>\n  \\<Longrightarrow> C ?k1.2 \\<inter> C ?k2.2 = {}\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>?k1.2 \\<in> K; ?k2.2 \\<in> K; ?k1.2 \\<noteq> ?k2.2\\<rbrakk>\n  \\<Longrightarrow> C ?k1.2 \\<inter> C ?k2.2 = {}\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "{"], ["proof (state)\nthis:\n  \\<lbrakk>?k1.2 \\<in> K; ?k2.2 \\<in> K; ?k1.2 \\<noteq> ?k2.2\\<rbrakk>\n  \\<Longrightarrow> C ?k1.2 \\<inter> C ?k2.2 = {}\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "fix k"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "assume \"k \\<in> K\""], ["proof (state)\nthis:\n  k \\<in> K\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "with K_def"], ["proof (chain)\npicking this:\n  K = {k. \\<exists>i\\<in>R. \\<exists>j\\<in>S. k = prod_encode (i, j)}\n  k \\<in> K", "obtain i j where R: \"i \\<in> R\" and S: \"j \\<in> S\"\n        and k: \"k = prod_encode (i,j)\""], ["proof (prove)\nusing this:\n  K = {k. \\<exists>i\\<in>R. \\<exists>j\\<in>S. k = prod_encode (i, j)}\n  k \\<in> K\n\ngoal (1 subgoal):\n 1. (\\<And>i j.\n        \\<lbrakk>i \\<in> R; j \\<in> S; k = prod_encode (i, j)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  i \\<in> R\n  j \\<in> S\n  k = prod_encode (i, j)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "with Ams Bms"], ["proof (chain)\npicking this:\n  \\<forall>i\\<in>R. A i \\<in> measurable_sets M\n  \\<forall>i\\<in>S. B i \\<in> measurable_sets M\n  i \\<in> R\n  j \\<in> S\n  k = prod_encode (i, j)", "have \"A i \\<in> measurable_sets M\" and \"B j \\<in> measurable_sets M\""], ["proof (prove)\nusing this:\n  \\<forall>i\\<in>R. A i \\<in> measurable_sets M\n  \\<forall>i\\<in>S. B i \\<in> measurable_sets M\n  i \\<in> R\n  j \\<in> S\n  k = prod_encode (i, j)\n\ngoal (1 subgoal):\n 1. A i \\<in> measurable_sets M &&& B j \\<in> measurable_sets M", "by auto"], ["proof (state)\nthis:\n  A i \\<in> measurable_sets M\n  B j \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "with ms"], ["proof (chain)\npicking this:\n  measure_space M\n  A i \\<in> measurable_sets M\n  B j \\<in> measurable_sets M", "have \"A i \\<inter> B j \\<in> measurable_sets M\""], ["proof (prove)\nusing this:\n  measure_space M\n  A i \\<in> measurable_sets M\n  B j \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. A i \\<inter> B j \\<in> measurable_sets M", "by (simp add: measure_space_def sigma_algebra_inter)"], ["proof (state)\nthis:\n  A i \\<inter> B j \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "with k"], ["proof (chain)\npicking this:\n  k = prod_encode (i, j)\n  A i \\<inter> B j \\<in> measurable_sets M", "have \"C k \\<in> measurable_sets M\""], ["proof (prove)\nusing this:\n  k = prod_encode (i, j)\n  A i \\<inter> B j \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. C k \\<in> measurable_sets M", "by (simp add: C_def)"], ["proof (state)\nthis:\n  C k \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "}"], ["proof (state)\nthis:\n  ?k2 \\<in> K \\<Longrightarrow> C ?k2 \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "moreover"], ["proof (state)\nthis:\n  ?k2 \\<in> K \\<Longrightarrow> C ?k2 \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "note Kun"], ["proof (state)\nthis:\n  \\<Union> (C ` K) = UNIV\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "moreover"], ["proof (state)\nthis:\n  \\<Union> (C ` K) = UNIV\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "from x"], ["proof (chain)\npicking this:\n  nonnegative x", "have \"nonnegative z1\""], ["proof (prove)\nusing this:\n  nonnegative x\n\ngoal (1 subgoal):\n 1. nonnegative z1", "by (simp add: z1_def nonnegative_def)"], ["proof (state)\nthis:\n  nonnegative z1\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "moreover"], ["proof (state)\nthis:\n  nonnegative z1\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "from y"], ["proof (chain)\npicking this:\n  nonnegative y", "have \"nonnegative z2\""], ["proof (prove)\nusing this:\n  nonnegative y\n\ngoal (1 subgoal):\n 1. nonnegative z2", "by (simp add: z2_def nonnegative_def)"], ["proof (state)\nthis:\n  nonnegative z2\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>b = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        g = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z1 z2 C K.\n                            f =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n                            g =\n                            (\\<lambda>t.\n                                \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n                            a =\n                            (\\<Sum>i\\<in>K.\n                               z1 i * Measure.measure M (C i)) \\<and>\n                            b =\n                            (\\<Sum>i\\<in>K.\n                               z2 i * Measure.measure M (C i)) \\<and>\n                            finite K \\<and>\n                            (\\<forall>i\\<in>K.\n                                \\<forall>j\\<in>K.\n                                   i \\<noteq> j \\<longrightarrow>\n                                   C i \\<inter> C j = {}) \\<and>\n                            (\\<forall>i\\<in>K.\n                                C i \\<in> measurable_sets M) \\<and>\n                            \\<Union> (C ` K) = UNIV \\<and>\n                            nonnegative z1 \\<and> nonnegative z2", "ultimately"], ["proof (chain)\npicking this:\n  f = (\\<lambda>t. \\<Sum>k\\<in>K. z1 k * \\<chi> (C k) t)\n  g = (\\<lambda>t. \\<Sum>k\\<in>K. z2 k * \\<chi> (C k) t)\n  a = (\\<Sum>k\\<in>K. z1 k * Measure.measure M (C k))\n  b = (\\<Sum>k\\<in>K. z2 k * Measure.measure M (C k))\n  finite K\n  \\<lbrakk>?k1.2 \\<in> K; ?k2.2 \\<in> K; ?k1.2 \\<noteq> ?k2.2\\<rbrakk>\n  \\<Longrightarrow> C ?k1.2 \\<inter> C ?k2.2 = {}\n  ?k2 \\<in> K \\<Longrightarrow> C ?k2 \\<in> measurable_sets M\n  \\<Union> (C ` K) = UNIV\n  nonnegative z1\n  nonnegative z2", "show ?thesis"], ["proof (prove)\nusing this:\n  f = (\\<lambda>t. \\<Sum>k\\<in>K. z1 k * \\<chi> (C k) t)\n  g = (\\<lambda>t. \\<Sum>k\\<in>K. z2 k * \\<chi> (C k) t)\n  a = (\\<Sum>k\\<in>K. z1 k * Measure.measure M (C k))\n  b = (\\<Sum>k\\<in>K. z2 k * Measure.measure M (C k))\n  finite K\n  \\<lbrakk>?k1.2 \\<in> K; ?k2.2 \\<in> K; ?k1.2 \\<noteq> ?k2.2\\<rbrakk>\n  \\<Longrightarrow> C ?k1.2 \\<inter> C ?k2.2 = {}\n  ?k2 \\<in> K \\<Longrightarrow> C ?k2 \\<in> measurable_sets M\n  \\<Union> (C ` K) = UNIV\n  nonnegative z1\n  nonnegative z2\n\ngoal (1 subgoal):\n 1. \\<exists>z1 z2 C K.\n       f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n       g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n       a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i)) \\<and>\n       b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i)) \\<and>\n       finite K \\<and>\n       (\\<forall>i\\<in>K.\n           \\<forall>j\\<in>K.\n              i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n       (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n       \\<Union> (C ` K) = UNIV \\<and> nonnegative z1 \\<and> nonnegative z2", "by blast"], ["proof (state)\nthis:\n  \\<exists>z1 z2 C K.\n     f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n     g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n     a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i)) \\<and>\n     b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i)) \\<and>\n     finite K \\<and>\n     (\\<forall>i\\<in>K.\n         \\<forall>j\\<in>K.\n            i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n     (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n     \\<Union> (C ` K) = UNIV \\<and> nonnegative z1 \\<and> nonnegative z2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>z1 z2 C K.\n     f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n     g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n     a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i)) \\<and>\n     b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i)) \\<and>\n     finite K \\<and>\n     (\\<forall>i\\<in>K.\n         \\<forall>j\\<in>K.\n            i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n     (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n     \\<Union> (C ` K) = UNIV \\<and> nonnegative z1 \\<and> nonnegative z2\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>Additivity and monotonicity are now almost obvious, the latter\n  trivially implying uniqueness.\\<close>"], ["", "lemma assumes ms: \"measure_space M\" and a: \"a \\<in> sfis f M\" and b: \"b \\<in> sfis g M\"\n  shows sfis_add: \"a+b \\<in> sfis (\\<lambda>w. f w + g w) M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "from assms"], ["proof (chain)\npicking this:\n  measure_space M\n  a \\<in> sfis f M\n  b \\<in> sfis g M", "have \n    \"\\<exists> z1 z2 C K. f = (\\<lambda>t. \\<Sum>i\\<in>(K::nat set). z1 i * \\<chi> (C i) t) \\<and> \n    g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and> a = (\\<Sum>i\\<in>K. z1 i * measure M (C i))\n    \\<and> b = (\\<Sum>i\\<in>K. z2 i * measure M (C i))\n    \\<and> finite K \\<and> (\\<forall>i\\<in>K. \\<forall>j\\<in>K. i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {})\n    \\<and> (\\<forall>i \\<in> K. C i \\<in> measurable_sets M) \\<and> (\\<Union>i\\<in>K. C i) = UNIV\n    \\<and> nonnegative z1 \\<and> nonnegative z2\""], ["proof (prove)\nusing this:\n  measure_space M\n  a \\<in> sfis f M\n  b \\<in> sfis g M\n\ngoal (1 subgoal):\n 1. \\<exists>z1 z2 C K.\n       f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n       g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n       a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i)) \\<and>\n       b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i)) \\<and>\n       finite K \\<and>\n       (\\<forall>i\\<in>K.\n           \\<forall>j\\<in>K.\n              i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n       (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n       \\<Union> (C ` K) = UNIV \\<and> nonnegative z1 \\<and> nonnegative z2", "by (rule sfis_present)"], ["proof (state)\nthis:\n  \\<exists>z1 z2 C K.\n     f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n     g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n     a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i)) \\<and>\n     b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i)) \\<and>\n     finite K \\<and>\n     (\\<forall>i\\<in>K.\n         \\<forall>j\\<in>K.\n            i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n     (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n     \\<Union> (C ` K) = UNIV \\<and> nonnegative z1 \\<and> nonnegative z2\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "then"], ["proof (chain)\npicking this:\n  \\<exists>z1 z2 C K.\n     f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n     g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n     a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i)) \\<and>\n     b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i)) \\<and>\n     finite K \\<and>\n     (\\<forall>i\\<in>K.\n         \\<forall>j\\<in>K.\n            i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n     (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n     \\<Union> (C ` K) = UNIV \\<and> nonnegative z1 \\<and> nonnegative z2", "obtain z1 z2 C K where f: \"f = (\\<lambda>t. \\<Sum>i\\<in>(K::nat set). z1 i * \\<chi> (C i) t)\" \n    and g: \"g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)\" \n    and a2: \"a = (\\<Sum>i\\<in>K. z1 i * measure M (C i))\"\n    and b2: \"b = (\\<Sum>i\\<in>K. z2 i * measure M (C i))\"\n    and CK: \"finite K \\<and> (\\<forall>i\\<in>K. \\<forall>j\\<in>K. i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and> \n    (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and> \\<Union>(C ` K) = UNIV\"\n    and z1: \"nonnegative z1\" and z2: \"nonnegative z2\""], ["proof (prove)\nusing this:\n  \\<exists>z1 z2 C K.\n     f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n     g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n     a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i)) \\<and>\n     b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i)) \\<and>\n     finite K \\<and>\n     (\\<forall>i\\<in>K.\n         \\<forall>j\\<in>K.\n            i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n     (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n     \\<Union> (C ` K) = UNIV \\<and> nonnegative z1 \\<and> nonnegative z2\n\ngoal (1 subgoal):\n 1. (\\<And>z1 C K z2.\n        \\<lbrakk>f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t);\n         g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t);\n         a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i));\n         b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i));\n         finite K \\<and>\n         (\\<forall>i\\<in>K.\n             \\<forall>j\\<in>K.\n                i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n         (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n         \\<Union> (C ` K) = UNIV;\n         nonnegative z1; nonnegative z2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t)\n  g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)\n  a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i))\n  b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i))\n  finite K \\<and>\n  (\\<forall>i\\<in>K.\n      \\<forall>j\\<in>K.\n         i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n  (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n  \\<Union> (C ` K) = UNIV\n  nonnegative z1\n  nonnegative z2\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "{"], ["proof (state)\nthis:\n  f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t)\n  g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)\n  a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i))\n  b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i))\n  finite K \\<and>\n  (\\<forall>i\\<in>K.\n      \\<forall>j\\<in>K.\n         i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n  (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n  \\<Union> (C ` K) = UNIV\n  nonnegative z1\n  nonnegative z2\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "fix t"], ["proof (state)\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "from f g"], ["proof (chain)\npicking this:\n  f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t)\n  g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)", "have \n      \"f t + g t = (\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) + (\\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)\""], ["proof (prove)\nusing this:\n  f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t)\n  g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. f t + g t =\n    (\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) +\n    (\\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)", "by simp"], ["proof (state)\nthis:\n  f t + g t =\n  (\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) +\n  (\\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "also"], ["proof (state)\nthis:\n  f t + g t =\n  (\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) +\n  (\\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "have \"\\<dots> = (\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t + z2 i * \\<chi> (C i) t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) +\n    (\\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) =\n    (\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t + z2 i * \\<chi> (C i) t)", "by (rule sum.distrib[THEN sym])"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) +\n  (\\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) =\n  (\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t + z2 i * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) +\n  (\\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) =\n  (\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t + z2 i * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "have \"\\<dots> = (\\<Sum>i\\<in>K. (z1 i + z2 i) * \\<chi> (C i) t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t + z2 i * \\<chi> (C i) t) =\n    (\\<Sum>i\\<in>K. (z1 i + z2 i) * \\<chi> (C i) t)", "by (simp add: distrib_right)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t + z2 i * \\<chi> (C i) t) =\n  (\\<Sum>i\\<in>K. (z1 i + z2 i) * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "finally"], ["proof (chain)\npicking this:\n  f t + g t = (\\<Sum>i\\<in>K. (z1 i + z2 i) * \\<chi> (C i) t)", "have \"f t + g t = (\\<Sum>i\\<in>K. (z1 i + z2 i) * \\<chi> (C i) t)\""], ["proof (prove)\nusing this:\n  f t + g t = (\\<Sum>i\\<in>K. (z1 i + z2 i) * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. f t + g t = (\\<Sum>i\\<in>K. (z1 i + z2 i) * \\<chi> (C i) t)", "."], ["proof (state)\nthis:\n  f t + g t = (\\<Sum>i\\<in>K. (z1 i + z2 i) * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "}"], ["proof (state)\nthis:\n  f ?t2 + g ?t2 = (\\<Sum>i\\<in>K. (z1 i + z2 i) * \\<chi> (C i) ?t2)\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "also"], ["proof (state)\nthis:\n  f ?t2 + g ?t2 = (\\<Sum>i\\<in>K. (z1 i + z2 i) * \\<chi> (C i) ?t2)\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "{"], ["proof (state)\nthis:\n  f ?t2 + g ?t2 = (\\<Sum>i\\<in>K. (z1 i + z2 i) * \\<chi> (C i) ?t2)\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "fix t"], ["proof (state)\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "from z1"], ["proof (chain)\npicking this:\n  nonnegative z1", "have \"0 \\<le> z1 t\""], ["proof (prove)\nusing this:\n  nonnegative z1\n\ngoal (1 subgoal):\n 1. 0 \\<le> z1 t", "by (simp add: nonnegative_def)"], ["proof (state)\nthis:\n  0 \\<le> z1 t\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "also"], ["proof (state)\nthis:\n  0 \\<le> z1 t\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "from z2"], ["proof (chain)\npicking this:\n  nonnegative z2", "have \"0 \\<le> z2 t\""], ["proof (prove)\nusing this:\n  nonnegative z2\n\ngoal (1 subgoal):\n 1. 0 \\<le> z2 t", "by (simp add: nonnegative_def)"], ["proof (state)\nthis:\n  0 \\<le> z2 t\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "ultimately"], ["proof (chain)\npicking this:\n  0 \\<le> z1 t\n  0 \\<le> z2 t", "have \"0 \\<le> z1 t + z2 t\""], ["proof (prove)\nusing this:\n  0 \\<le> z1 t\n  0 \\<le> z2 t\n\ngoal (1 subgoal):\n 1. 0 \\<le> z1 t + z2 t", "by (rule add_nonneg_nonneg)"], ["proof (state)\nthis:\n  0 \\<le> z1 t + z2 t\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "}"], ["proof (state)\nthis:\n  0 \\<le> z1 ?t2 + z2 ?t2\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "hence \"nonnegative (\\<lambda>w. z1 w + z2 w)\""], ["proof (prove)\nusing this:\n  0 \\<le> z1 ?t2 + z2 ?t2\n\ngoal (1 subgoal):\n 1. nonnegative (\\<lambda>w. z1 w + z2 w)", "by (simp add: nonnegative_def ext)"], ["proof (state)\nthis:\n  nonnegative (\\<lambda>w. z1 w + z2 w)\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "moreover"], ["proof (state)\nthis:\n  nonnegative (\\<lambda>w. z1 w + z2 w)\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "note CK"], ["proof (state)\nthis:\n  finite K \\<and>\n  (\\<forall>i\\<in>K.\n      \\<forall>j\\<in>K.\n         i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n  (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n  \\<Union> (C ` K) = UNIV\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "ultimately"], ["proof (chain)\npicking this:\n  f ?t2 + g ?t2 = (\\<Sum>i\\<in>K. (z1 i + z2 i) * \\<chi> (C i) ?t2)\n  nonnegative (\\<lambda>w. z1 w + z2 w)\n  finite K \\<and>\n  (\\<forall>i\\<in>K.\n      \\<forall>j\\<in>K.\n         i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n  (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n  \\<Union> (C ` K) = UNIV", "have \n    \"(\\<Sum>i\\<in>K. (z1 i + z2 i) * measure M (C i)) \\<in> sfis (\\<lambda>w. f w + g w) M\""], ["proof (prove)\nusing this:\n  f ?t2 + g ?t2 = (\\<Sum>i\\<in>K. (z1 i + z2 i) * \\<chi> (C i) ?t2)\n  nonnegative (\\<lambda>w. z1 w + z2 w)\n  finite K \\<and>\n  (\\<forall>i\\<in>K.\n      \\<forall>j\\<in>K.\n         i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n  (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n  \\<Union> (C ` K) = UNIV\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. (z1 i + z2 i) * Measure.measure M (C i))\n    \\<in> sfis (\\<lambda>w. f w + g w) M", "by (auto simp add: sfis.base)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>K. (z1 i + z2 i) * Measure.measure M (C i))\n  \\<in> sfis (\\<lambda>w. f w + g w) M\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>K. (z1 i + z2 i) * Measure.measure M (C i))\n  \\<in> sfis (\\<lambda>w. f w + g w) M\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "from a2 b2"], ["proof (chain)\npicking this:\n  a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i))\n  b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i))", "have \"a+b = (\\<Sum>i\\<in>K. (z1 i + z2 i) * measure M (C i))\""], ["proof (prove)\nusing this:\n  a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i))\n  b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i))\n\ngoal (1 subgoal):\n 1. a + b = (\\<Sum>i\\<in>K. (z1 i + z2 i) * Measure.measure M (C i))", "by (simp add: sum.distrib[THEN sym] distrib_right)"], ["proof (state)\nthis:\n  a + b = (\\<Sum>i\\<in>K. (z1 i + z2 i) * Measure.measure M (C i))\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Sum>i\\<in>K. (z1 i + z2 i) * Measure.measure M (C i))\n  \\<in> sfis (\\<lambda>w. f w + g w) M\n  a + b = (\\<Sum>i\\<in>K. (z1 i + z2 i) * Measure.measure M (C i))", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<in>K. (z1 i + z2 i) * Measure.measure M (C i))\n  \\<in> sfis (\\<lambda>w. f w + g w) M\n  a + b = (\\<Sum>i\\<in>K. (z1 i + z2 i) * Measure.measure M (C i))\n\ngoal (1 subgoal):\n 1. a + b \\<in> sfis (\\<lambda>w. f w + g w) M", "by simp"], ["proof (state)\nthis:\n  a + b \\<in> sfis (\\<lambda>w. f w + g w) M\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma assumes ms: \"measure_space M\" and a: \"a \\<in> sfis f M\" \n  and b: \"b \\<in> sfis g M\" and fg: \"f\\<le>g\"\n  shows sfis_mono: \"a \\<le> b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<le> b", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. a \\<le> b", "txt\\<open>\\nopagebreak\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. a \\<le> b", "from ms a b"], ["proof (chain)\npicking this:\n  measure_space M\n  a \\<in> sfis f M\n  b \\<in> sfis g M", "have \n    \"\\<exists> z1 z2 C K. f = (\\<lambda>t. \\<Sum>i\\<in>(K::nat set). z1 i * \\<chi> (C i) t) \\<and> \n    g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and> a = (\\<Sum>i\\<in>K. z1 i * measure M (C i))\n    \\<and> b = (\\<Sum>i\\<in>K. z2 i * measure M (C i))\n    \\<and> finite K \\<and> (\\<forall>i\\<in>K. \\<forall>j\\<in>K. i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {})\n    \\<and> (\\<forall>i \\<in> K. C i \\<in> measurable_sets M) \\<and> (\\<Union>i\\<in>K. C i) = UNIV\n    \\<and> nonnegative z1 \\<and> nonnegative z2\""], ["proof (prove)\nusing this:\n  measure_space M\n  a \\<in> sfis f M\n  b \\<in> sfis g M\n\ngoal (1 subgoal):\n 1. \\<exists>z1 z2 C K.\n       f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n       g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n       a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i)) \\<and>\n       b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i)) \\<and>\n       finite K \\<and>\n       (\\<forall>i\\<in>K.\n           \\<forall>j\\<in>K.\n              i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n       (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n       \\<Union> (C ` K) = UNIV \\<and> nonnegative z1 \\<and> nonnegative z2", "by (rule sfis_present)"], ["proof (state)\nthis:\n  \\<exists>z1 z2 C K.\n     f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n     g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n     a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i)) \\<and>\n     b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i)) \\<and>\n     finite K \\<and>\n     (\\<forall>i\\<in>K.\n         \\<forall>j\\<in>K.\n            i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n     (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n     \\<Union> (C ` K) = UNIV \\<and> nonnegative z1 \\<and> nonnegative z2\n\ngoal (1 subgoal):\n 1. a \\<le> b", "then"], ["proof (chain)\npicking this:\n  \\<exists>z1 z2 C K.\n     f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n     g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n     a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i)) \\<and>\n     b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i)) \\<and>\n     finite K \\<and>\n     (\\<forall>i\\<in>K.\n         \\<forall>j\\<in>K.\n            i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n     (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n     \\<Union> (C ` K) = UNIV \\<and> nonnegative z1 \\<and> nonnegative z2", "obtain z1 z2 C K where f: \"f = (\\<lambda>t. \\<Sum>i\\<in>(K::nat set). z1 i * \\<chi> (C i) t)\" \n    and g: \"g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)\" \n    and a2: \"a = (\\<Sum>i\\<in>K. z1 i * measure M (C i))\"\n    and b2: \"b = (\\<Sum>i\\<in>K. z2 i * measure M (C i))\"\n    and K: \"finite K\" and dis: \"(\\<forall>i\\<in>K. \\<forall>j\\<in>K. i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {})\" \n    and Cms: \"(\\<forall>i\\<in>K. C i \\<in> measurable_sets M)\" and Cun: \"\\<Union>(C ` K) = UNIV\""], ["proof (prove)\nusing this:\n  \\<exists>z1 z2 C K.\n     f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n     g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n     a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i)) \\<and>\n     b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i)) \\<and>\n     finite K \\<and>\n     (\\<forall>i\\<in>K.\n         \\<forall>j\\<in>K.\n            i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n     (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n     \\<Union> (C ` K) = UNIV \\<and> nonnegative z1 \\<and> nonnegative z2\n\ngoal (1 subgoal):\n 1. (\\<And>z1 C K z2.\n        \\<lbrakk>f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t);\n         g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t);\n         a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i));\n         b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i)); finite K;\n         \\<forall>i\\<in>K.\n            \\<forall>j\\<in>K.\n               i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {};\n         \\<forall>i\\<in>K. C i \\<in> measurable_sets M;\n         \\<Union> (C ` K) = UNIV\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t)\n  g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)\n  a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i))\n  b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i))\n  finite K\n  \\<forall>i\\<in>K.\n     \\<forall>j\\<in>K. i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}\n  \\<forall>i\\<in>K. C i \\<in> measurable_sets M\n  \\<Union> (C ` K) = UNIV\n\ngoal (1 subgoal):\n 1. a \\<le> b", "{"], ["proof (state)\nthis:\n  f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t)\n  g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)\n  a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i))\n  b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i))\n  finite K\n  \\<forall>i\\<in>K.\n     \\<forall>j\\<in>K. i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}\n  \\<forall>i\\<in>K. C i \\<in> measurable_sets M\n  \\<Union> (C ` K) = UNIV\n\ngoal (1 subgoal):\n 1. a \\<le> b", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. a \\<le> b", "assume iK: \"i \\<in> K\""], ["proof (state)\nthis:\n  i \\<in> K\n\ngoal (1 subgoal):\n 1. a \\<le> b", "{"], ["proof (state)\nthis:\n  i \\<in> K\n\ngoal (1 subgoal):\n 1. a \\<le> b", "assume \"C i \\<noteq> {}\""], ["proof (state)\nthis:\n  C i \\<noteq> {}\n\ngoal (1 subgoal):\n 1. a \\<le> b", "then"], ["proof (chain)\npicking this:\n  C i \\<noteq> {}", "obtain t where ti: \"t \\<in> C i\""], ["proof (prove)\nusing this:\n  C i \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>t. t \\<in> C i \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  t \\<in> C i\n\ngoal (1 subgoal):\n 1. a \\<le> b", "hence \"z1 i = z1 i * \\<chi> (C i) t\""], ["proof (prove)\nusing this:\n  t \\<in> C i\n\ngoal (1 subgoal):\n 1. z1 i = z1 i * \\<chi> (C i) t", "by (simp add: characteristic_function_def)"], ["proof (state)\nthis:\n  z1 i = z1 i * \\<chi> (C i) t\n\ngoal (1 subgoal):\n 1. a \\<le> b", "also"], ["proof (state)\nthis:\n  z1 i = z1 i * \\<chi> (C i) t\n\ngoal (1 subgoal):\n 1. a \\<le> b", "from dis iK ti"], ["proof (chain)\npicking this:\n  \\<forall>i\\<in>K.\n     \\<forall>j\\<in>K. i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}\n  i \\<in> K\n  t \\<in> C i", "have \"K-{i} = K-{i}\" \n        and \"\\<And>x. x \\<in> K-{i} \\<Longrightarrow> z1 x * \\<chi> (C x) t = 0\""], ["proof (prove)\nusing this:\n  \\<forall>i\\<in>K.\n     \\<forall>j\\<in>K. i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}\n  i \\<in> K\n  t \\<in> C i\n\ngoal (1 subgoal):\n 1. K - {i} = K - {i} &&&\n    (\\<And>x. x \\<in> K - {i} \\<Longrightarrow> z1 x * \\<chi> (C x) t = 0)", "by (auto simp add: characteristic_function_def)"], ["proof (state)\nthis:\n  K - {i} = K - {i}\n  ?x \\<in> K - {i} \\<Longrightarrow> z1 ?x * \\<chi> (C ?x) t = 0\n\ngoal (1 subgoal):\n 1. a \\<le> b", "hence \"0 = (\\<Sum>k\\<in>K-{i}. z1 k * \\<chi> (C k) t)\""], ["proof (prove)\nusing this:\n  K - {i} = K - {i}\n  ?x \\<in> K - {i} \\<Longrightarrow> z1 ?x * \\<chi> (C ?x) t = 0\n\ngoal (1 subgoal):\n 1. 0 = (\\<Sum>k\\<in>K - {i}. z1 k * \\<chi> (C k) t)", "by (simp only: sum.neutral_const sum.cong)"], ["proof (state)\nthis:\n  0 = (\\<Sum>k\\<in>K - {i}. z1 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. a \\<le> b", "with K iK"], ["proof (chain)\npicking this:\n  finite K\n  i \\<in> K\n  0 = (\\<Sum>k\\<in>K - {i}. z1 k * \\<chi> (C k) t)", "have \"z1 i * \\<chi> (C i) t = (\\<Sum>k\\<in>K. z1 k * \\<chi> (C k) t)\""], ["proof (prove)\nusing this:\n  finite K\n  i \\<in> K\n  0 = (\\<Sum>k\\<in>K - {i}. z1 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. z1 i * \\<chi> (C i) t = (\\<Sum>k\\<in>K. z1 k * \\<chi> (C k) t)", "by (simp add: sum_diff1)"], ["proof (state)\nthis:\n  z1 i * \\<chi> (C i) t = (\\<Sum>k\\<in>K. z1 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. a \\<le> b", "also"], ["proof (state)\nthis:\n  z1 i * \\<chi> (C i) t = (\\<Sum>k\\<in>K. z1 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. a \\<le> b", "from fg f g"], ["proof (chain)\npicking this:\n  f \\<le> g\n  f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t)\n  g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)", "have \"(\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<le> (\\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)\""], ["proof (prove)\nusing this:\n  f \\<le> g\n  f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t)\n  g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t)\n    \\<le> (\\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)", "by (simp add: le_fun_def)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t)\n  \\<le> (\\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. a \\<le> b", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t)\n  \\<le> (\\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. a \\<le> b", "from dis iK ti"], ["proof (chain)\npicking this:\n  \\<forall>i\\<in>K.\n     \\<forall>j\\<in>K. i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}\n  i \\<in> K\n  t \\<in> C i", "have \"K-{i} = K-{i}\" \n        and \"\\<And>x. x \\<in> K-{i} \\<Longrightarrow> z2 x * \\<chi> (C x) t = 0\""], ["proof (prove)\nusing this:\n  \\<forall>i\\<in>K.\n     \\<forall>j\\<in>K. i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}\n  i \\<in> K\n  t \\<in> C i\n\ngoal (1 subgoal):\n 1. K - {i} = K - {i} &&&\n    (\\<And>x. x \\<in> K - {i} \\<Longrightarrow> z2 x * \\<chi> (C x) t = 0)", "by (auto simp add: characteristic_function_def)"], ["proof (state)\nthis:\n  K - {i} = K - {i}\n  ?x \\<in> K - {i} \\<Longrightarrow> z2 ?x * \\<chi> (C ?x) t = 0\n\ngoal (1 subgoal):\n 1. a \\<le> b", "hence \"0 = (\\<Sum>k\\<in>K-{i}. z2 k * \\<chi> (C k) t)\""], ["proof (prove)\nusing this:\n  K - {i} = K - {i}\n  ?x \\<in> K - {i} \\<Longrightarrow> z2 ?x * \\<chi> (C ?x) t = 0\n\ngoal (1 subgoal):\n 1. 0 = (\\<Sum>k\\<in>K - {i}. z2 k * \\<chi> (C k) t)", "by (simp only: sum.neutral_const sum.cong)"], ["proof (state)\nthis:\n  0 = (\\<Sum>k\\<in>K - {i}. z2 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. a \\<le> b", "with K iK"], ["proof (chain)\npicking this:\n  finite K\n  i \\<in> K\n  0 = (\\<Sum>k\\<in>K - {i}. z2 k * \\<chi> (C k) t)", "have \"(\\<Sum>k\\<in>K. z2 k * \\<chi> (C k) t) = z2 i * \\<chi> (C i) t\""], ["proof (prove)\nusing this:\n  finite K\n  i \\<in> K\n  0 = (\\<Sum>k\\<in>K - {i}. z2 k * \\<chi> (C k) t)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<in>K. z2 k * \\<chi> (C k) t) = z2 i * \\<chi> (C i) t", "by (simp add: sum_diff1)"], ["proof (state)\nthis:\n  (\\<Sum>k\\<in>K. z2 k * \\<chi> (C k) t) = z2 i * \\<chi> (C i) t\n\ngoal (1 subgoal):\n 1. a \\<le> b", "also"], ["proof (state)\nthis:\n  (\\<Sum>k\\<in>K. z2 k * \\<chi> (C k) t) = z2 i * \\<chi> (C i) t\n\ngoal (1 subgoal):\n 1. a \\<le> b", "from ti"], ["proof (chain)\npicking this:\n  t \\<in> C i", "have \"\\<dots> = z2 i\""], ["proof (prove)\nusing this:\n  t \\<in> C i\n\ngoal (1 subgoal):\n 1. z2 i * \\<chi> (C i) t = z2 i", "by (simp add: characteristic_function_def)"], ["proof (state)\nthis:\n  z2 i * \\<chi> (C i) t = z2 i\n\ngoal (1 subgoal):\n 1. a \\<le> b", "finally"], ["proof (chain)\npicking this:\n  z1 i \\<le> z2 i", "have \"z1 i \\<le> z2 i\""], ["proof (prove)\nusing this:\n  z1 i \\<le> z2 i\n\ngoal (1 subgoal):\n 1. z1 i \\<le> z2 i", "."], ["proof (state)\nthis:\n  z1 i \\<le> z2 i\n\ngoal (1 subgoal):\n 1. a \\<le> b", "}"], ["proof (state)\nthis:\n  C i \\<noteq> {} \\<Longrightarrow> z1 i \\<le> z2 i\n\ngoal (1 subgoal):\n 1. a \\<le> b", "hence h: \"C i \\<noteq> {} \\<Longrightarrow> z1 i \\<le> z2 i\""], ["proof (prove)\nusing this:\n  C i \\<noteq> {} \\<Longrightarrow> z1 i \\<le> z2 i\n\ngoal (1 subgoal):\n 1. C i \\<noteq> {} \\<Longrightarrow> z1 i \\<le> z2 i", "."], ["proof (state)\nthis:\n  C i \\<noteq> {} \\<Longrightarrow> z1 i \\<le> z2 i\n\ngoal (1 subgoal):\n 1. a \\<le> b", "have \"z1 i * measure M (C i) \\<le> z2 i * measure M (C i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z1 i * Measure.measure M (C i) \\<le> z2 i * Measure.measure M (C i)", "proof (cases \"C i \\<noteq> {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. C i \\<noteq> {} \\<Longrightarrow>\n    z1 i * Measure.measure M (C i) \\<le> z2 i * Measure.measure M (C i)\n 2. \\<not> C i \\<noteq> {} \\<Longrightarrow>\n    z1 i * Measure.measure M (C i) \\<le> z2 i * Measure.measure M (C i)", "case False"], ["proof (state)\nthis:\n  \\<not> C i \\<noteq> {}\n\ngoal (2 subgoals):\n 1. C i \\<noteq> {} \\<Longrightarrow>\n    z1 i * Measure.measure M (C i) \\<le> z2 i * Measure.measure M (C i)\n 2. \\<not> C i \\<noteq> {} \\<Longrightarrow>\n    z1 i * Measure.measure M (C i) \\<le> z2 i * Measure.measure M (C i)", "with ms"], ["proof (chain)\npicking this:\n  measure_space M\n  \\<not> C i \\<noteq> {}", "show ?thesis"], ["proof (prove)\nusing this:\n  measure_space M\n  \\<not> C i \\<noteq> {}\n\ngoal (1 subgoal):\n 1. z1 i * Measure.measure M (C i) \\<le> z2 i * Measure.measure M (C i)", "by (auto simp add: measure_space_def positive_def)"], ["proof (state)\nthis:\n  z1 i * Measure.measure M (C i) \\<le> z2 i * Measure.measure M (C i)\n\ngoal (1 subgoal):\n 1. C i \\<noteq> {} \\<Longrightarrow>\n    z1 i * Measure.measure M (C i) \\<le> z2 i * Measure.measure M (C i)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. C i \\<noteq> {} \\<Longrightarrow>\n    z1 i * Measure.measure M (C i) \\<le> z2 i * Measure.measure M (C i)", "case True"], ["proof (state)\nthis:\n  C i \\<noteq> {}\n\ngoal (1 subgoal):\n 1. C i \\<noteq> {} \\<Longrightarrow>\n    z1 i * Measure.measure M (C i) \\<le> z2 i * Measure.measure M (C i)", "with h"], ["proof (chain)\npicking this:\n  C i \\<noteq> {} \\<Longrightarrow> z1 i \\<le> z2 i\n  C i \\<noteq> {}", "have \"z1 i \\<le> z2 i\""], ["proof (prove)\nusing this:\n  C i \\<noteq> {} \\<Longrightarrow> z1 i \\<le> z2 i\n  C i \\<noteq> {}\n\ngoal (1 subgoal):\n 1. z1 i \\<le> z2 i", "by fast"], ["proof (state)\nthis:\n  z1 i \\<le> z2 i\n\ngoal (1 subgoal):\n 1. C i \\<noteq> {} \\<Longrightarrow>\n    z1 i * Measure.measure M (C i) \\<le> z2 i * Measure.measure M (C i)", "also"], ["proof (state)\nthis:\n  z1 i \\<le> z2 i\n\ngoal (1 subgoal):\n 1. C i \\<noteq> {} \\<Longrightarrow>\n    z1 i * Measure.measure M (C i) \\<le> z2 i * Measure.measure M (C i)", "from iK ms Cms"], ["proof (chain)\npicking this:\n  i \\<in> K\n  measure_space M\n  \\<forall>i\\<in>K. C i \\<in> measurable_sets M", "have \"0 \\<le> measure M (C i)\""], ["proof (prove)\nusing this:\n  i \\<in> K\n  measure_space M\n  \\<forall>i\\<in>K. C i \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. 0 \\<le> Measure.measure M (C i)", "by (auto simp add: measure_space_def positive_def )"], ["proof (state)\nthis:\n  0 \\<le> Measure.measure M (C i)\n\ngoal (1 subgoal):\n 1. C i \\<noteq> {} \\<Longrightarrow>\n    z1 i * Measure.measure M (C i) \\<le> z2 i * Measure.measure M (C i)", "ultimately"], ["proof (chain)\npicking this:\n  z1 i \\<le> z2 i\n  0 \\<le> Measure.measure M (C i)", "show ?thesis"], ["proof (prove)\nusing this:\n  z1 i \\<le> z2 i\n  0 \\<le> Measure.measure M (C i)\n\ngoal (1 subgoal):\n 1. z1 i * Measure.measure M (C i) \\<le> z2 i * Measure.measure M (C i)", "by (simp add: mult_right_mono)"], ["proof (state)\nthis:\n  z1 i * Measure.measure M (C i) \\<le> z2 i * Measure.measure M (C i)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  z1 i * Measure.measure M (C i) \\<le> z2 i * Measure.measure M (C i)\n\ngoal (1 subgoal):\n 1. a \\<le> b", "}"], ["proof (state)\nthis:\n  ?i2 \\<in> K \\<Longrightarrow>\n  z1 ?i2 * Measure.measure M (C ?i2)\n  \\<le> z2 ?i2 * Measure.measure M (C ?i2)\n\ngoal (1 subgoal):\n 1. a \\<le> b", "with a2 b2"], ["proof (chain)\npicking this:\n  a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i))\n  b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i))\n  ?i2 \\<in> K \\<Longrightarrow>\n  z1 ?i2 * Measure.measure M (C ?i2)\n  \\<le> z2 ?i2 * Measure.measure M (C ?i2)", "show ?thesis"], ["proof (prove)\nusing this:\n  a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i))\n  b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i))\n  ?i2 \\<in> K \\<Longrightarrow>\n  z1 ?i2 * Measure.measure M (C ?i2)\n  \\<le> z2 ?i2 * Measure.measure M (C ?i2)\n\ngoal (1 subgoal):\n 1. a \\<le> b", "by (simp add: sum_mono)"], ["proof (state)\nthis:\n  a \\<le> b\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma sfis_unique: \n  assumes ms: \"measure_space M\" and a: \"a \\<in> sfis f M\" and b: \"b \\<in> sfis f M\"\n  shows \"a=b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a = b", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. a = b", "have \"f\\<le>f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<le> f", "by (simp add: le_fun_def)"], ["proof (state)\nthis:\n  f \\<le> f\n\ngoal (1 subgoal):\n 1. a = b", "with assms"], ["proof (chain)\npicking this:\n  measure_space M\n  a \\<in> sfis f M\n  b \\<in> sfis f M\n  f \\<le> f", "have \"a\\<le>b\" and \"b\\<le>a\""], ["proof (prove)\nusing this:\n  measure_space M\n  a \\<in> sfis f M\n  b \\<in> sfis f M\n  f \\<le> f\n\ngoal (1 subgoal):\n 1. a \\<le> b &&& b \\<le> a", "by (auto simp add: sfis_mono)"], ["proof (state)\nthis:\n  a \\<le> b\n  b \\<le> a\n\ngoal (1 subgoal):\n 1. a = b", "thus ?thesis"], ["proof (prove)\nusing this:\n  a \\<le> b\n  b \\<le> a\n\ngoal (1 subgoal):\n 1. a = b", "by simp"], ["proof (state)\nthis:\n  a = b\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The integral of characteristic functions, as well as the effect of\n  multiplication with a constant, follows directly from the\n    definition. Together with a generalization of the addition theorem\n    to sums, a less restrictive introduction rule emerges, making\n    normal forms obsolete. It is only valid in measure spaces though.\\<close>"], ["", "lemma sfis_char:\n  assumes ms: \"measure_space M\" and mA: \"A \\<in> measurable_sets M\" \n  shows \"measure M A \\<in> sfis \\<chi> A M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "define R :: \"nat \\<Rightarrow> 'a set\" where \"R i = (if i = 0 then A else if i=1 then -A else {})\" for i"], ["proof (state)\nthis:\n  R ?i = (if ?i = 0 then A else if ?i = 1 then - A else {})\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "define x :: \"nat \\<Rightarrow> real\" where \"x i = (if i = 0 then 1 else 0)\" for i"], ["proof (state)\nthis:\n  x ?i = (if ?i = 0 then 1 else 0)\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "define K :: \"nat set\" where \"K = {0,1}\""], ["proof (state)\nthis:\n  K = {0, 1}\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "from ms mA"], ["proof (chain)\npicking this:\n  measure_space M\n  A \\<in> measurable_sets M", "have Rms: \"\\<forall>i\\<in>K. R i \\<in> measurable_sets M\""], ["proof (prove)\nusing this:\n  measure_space M\n  A \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>K. R i \\<in> measurable_sets M", "by (simp add: K_def R_def measure_space_def sigma_algebra_def)"], ["proof (state)\nthis:\n  \\<forall>i\\<in>K. R i \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "have nn: \"nonnegative x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nonnegative x", "by (simp add: nonnegative_def x_def)"], ["proof (state)\nthis:\n  nonnegative x\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "have un: \"(\\<Union>i\\<in>K. R i) = UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> (R ` K) = UNIV", "by (simp add: R_def K_def)"], ["proof (state)\nthis:\n  \\<Union> (R ` K) = UNIV\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "have fin: \"finite K\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite K", "by (simp add: K_def)"], ["proof (state)\nthis:\n  finite K\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "have dis: \"\\<forall>j1\\<in>K. \\<forall>j2\\<in>K. j1 \\<noteq> j2 \\<longrightarrow> (R j1) \\<inter> (R j2) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>j1\\<in>K.\n       \\<forall>j2\\<in>K.\n          j1 \\<noteq> j2 \\<longrightarrow> R j1 \\<inter> R j2 = {}", "by (auto simp add: R_def K_def)"], ["proof (state)\nthis:\n  \\<forall>j1\\<in>K.\n     \\<forall>j2\\<in>K.\n        j1 \\<noteq> j2 \\<longrightarrow> R j1 \\<inter> R j2 = {}\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "{"], ["proof (state)\nthis:\n  \\<forall>j1\\<in>K.\n     \\<forall>j2\\<in>K.\n        j1 \\<noteq> j2 \\<longrightarrow> R j1 \\<inter> R j2 = {}\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "fix t"], ["proof (state)\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "from un fin dis"], ["proof (chain)\npicking this:\n  \\<Union> (R ` K) = UNIV\n  finite K\n  \\<forall>j1\\<in>K.\n     \\<forall>j2\\<in>K.\n        j1 \\<noteq> j2 \\<longrightarrow> R j1 \\<inter> R j2 = {}", "have \"\\<chi> A t = (\\<Sum>i\\<in>K. \\<chi> (A \\<inter> R i) t)\""], ["proof (prove)\nusing this:\n  \\<Union> (R ` K) = UNIV\n  finite K\n  \\<forall>j1\\<in>K.\n     \\<forall>j2\\<in>K.\n        j1 \\<noteq> j2 \\<longrightarrow> R j1 \\<inter> R j2 = {}\n\ngoal (1 subgoal):\n 1. \\<chi> A t = (\\<Sum>i\\<in>K. \\<chi> (A \\<inter> R i) t)", "by (rule char_split)"], ["proof (state)\nthis:\n  \\<chi> A t = (\\<Sum>i\\<in>K. \\<chi> (A \\<inter> R i) t)\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "also"], ["proof (state)\nthis:\n  \\<chi> A t = (\\<Sum>i\\<in>K. \\<chi> (A \\<inter> R i) t)\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "{"], ["proof (state)\nthis:\n  \\<chi> A t = (\\<Sum>i\\<in>K. \\<chi> (A \\<inter> R i) t)\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "have \"K=K\" and \"\\<chi> (A \\<inter> R i) t = x i * \\<chi> (R i) t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. K = K &&& \\<chi> (A \\<inter> R i) t = x i * \\<chi> (R i) t", "by (auto simp add: R_def x_def characteristic_function_def)"], ["proof (state)\nthis:\n  K = K\n  \\<chi> (A \\<inter> R i) t = x i * \\<chi> (R i) t\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "}"], ["proof (state)\nthis:\n  K = K\n  \\<chi> (A \\<inter> R ?i2) t = x ?i2 * \\<chi> (R ?i2) t\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "hence \"\\<dots> = (\\<Sum>i\\<in>K. x i * \\<chi> (R i) t)\""], ["proof (prove)\nusing this:\n  K = K\n  \\<chi> (A \\<inter> R ?i2) t = x ?i2 * \\<chi> (R ?i2) t\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. \\<chi> (A \\<inter> R i) t) =\n    (\\<Sum>i\\<in>K. x i * \\<chi> (R i) t)", "by (rule sum.cong)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>K. \\<chi> (A \\<inter> R i) t) =\n  (\\<Sum>i\\<in>K. x i * \\<chi> (R i) t)\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "finally"], ["proof (chain)\npicking this:\n  \\<chi> A t = (\\<Sum>i\\<in>K. x i * \\<chi> (R i) t)", "have \"\\<chi> A t = (\\<Sum>i\\<in>K. x i * \\<chi> (R i) t)\""], ["proof (prove)\nusing this:\n  \\<chi> A t = (\\<Sum>i\\<in>K. x i * \\<chi> (R i) t)\n\ngoal (1 subgoal):\n 1. \\<chi> A t = (\\<Sum>i\\<in>K. x i * \\<chi> (R i) t)", "."], ["proof (state)\nthis:\n  \\<chi> A t = (\\<Sum>i\\<in>K. x i * \\<chi> (R i) t)\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "}"], ["proof (state)\nthis:\n  \\<chi> A ?t2 = (\\<Sum>i\\<in>K. x i * \\<chi> (R i) ?t2)\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "hence \"\\<chi> A = (\\<lambda>t. \\<Sum>i\\<in>K. x i * \\<chi> (R i) t)\""], ["proof (prove)\nusing this:\n  \\<chi> A ?t2 = (\\<Sum>i\\<in>K. x i * \\<chi> (R i) ?t2)\n\ngoal (1 subgoal):\n 1. \\<chi> A = (\\<lambda>t. \\<Sum>i\\<in>K. x i * \\<chi> (R i) t)", "by (simp add: ext)"], ["proof (state)\nthis:\n  \\<chi> A = (\\<lambda>t. \\<Sum>i\\<in>K. x i * \\<chi> (R i) t)\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "from this Rms nn fin dis un"], ["proof (chain)\npicking this:\n  \\<chi> A = (\\<lambda>t. \\<Sum>i\\<in>K. x i * \\<chi> (R i) t)\n  \\<forall>i\\<in>K. R i \\<in> measurable_sets M\n  nonnegative x\n  finite K\n  \\<forall>j1\\<in>K.\n     \\<forall>j2\\<in>K.\n        j1 \\<noteq> j2 \\<longrightarrow> R j1 \\<inter> R j2 = {}\n  \\<Union> (R ` K) = UNIV", "have \"(\\<Sum>i\\<in>K. x i * measure M (R i)) \\<in> sfis \\<chi> A M\""], ["proof (prove)\nusing this:\n  \\<chi> A = (\\<lambda>t. \\<Sum>i\\<in>K. x i * \\<chi> (R i) t)\n  \\<forall>i\\<in>K. R i \\<in> measurable_sets M\n  nonnegative x\n  finite K\n  \\<forall>j1\\<in>K.\n     \\<forall>j2\\<in>K.\n        j1 \\<noteq> j2 \\<longrightarrow> R j1 \\<inter> R j2 = {}\n  \\<Union> (R ` K) = UNIV\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. x i * Measure.measure M (R i)) \\<in> sfis \\<chi> A M", "by (rule sfis.base)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>K. x i * Measure.measure M (R i)) \\<in> sfis \\<chi> A M\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>K. x i * Measure.measure M (R i)) \\<in> sfis \\<chi> A M\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "{"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>K. x i * Measure.measure M (R i)) \\<in> sfis \\<chi> A M\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "from ms"], ["proof (chain)\npicking this:\n  measure_space M", "have \"K=K\" and \"x i * measure M (R i) = measure M (A \\<inter> R i)\""], ["proof (prove)\nusing this:\n  measure_space M\n\ngoal (1 subgoal):\n 1. K = K &&&\n    x i * Measure.measure M (R i) = Measure.measure M (A \\<inter> R i)", "by (auto simp add: R_def x_def measure_space_def positive_def)"], ["proof (state)\nthis:\n  K = K\n  x i * Measure.measure M (R i) = Measure.measure M (A \\<inter> R i)\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "}"], ["proof (state)\nthis:\n  K = K\n  x ?i2 * Measure.measure M (R ?i2) = Measure.measure M (A \\<inter> R ?i2)\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "hence \"(\\<Sum>i\\<in>K. x i * measure M (R i)) = (\\<Sum>i\\<in>K. measure M (A \\<inter> R i))\""], ["proof (prove)\nusing this:\n  K = K\n  x ?i2 * Measure.measure M (R ?i2) = Measure.measure M (A \\<inter> R ?i2)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. x i * Measure.measure M (R i)) =\n    (\\<Sum>i\\<in>K. Measure.measure M (A \\<inter> R i))", "by (rule sum.cong)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>K. x i * Measure.measure M (R i)) =\n  (\\<Sum>i\\<in>K. Measure.measure M (A \\<inter> R i))\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>K. x i * Measure.measure M (R i)) =\n  (\\<Sum>i\\<in>K. Measure.measure M (A \\<inter> R i))\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "from ms un fin dis Rms mA"], ["proof (chain)\npicking this:\n  measure_space M\n  \\<Union> (R ` K) = UNIV\n  finite K\n  \\<forall>j1\\<in>K.\n     \\<forall>j2\\<in>K.\n        j1 \\<noteq> j2 \\<longrightarrow> R j1 \\<inter> R j2 = {}\n  \\<forall>i\\<in>K. R i \\<in> measurable_sets M\n  A \\<in> measurable_sets M", "have \"\\<dots> = measure M A\""], ["proof (prove)\nusing this:\n  measure_space M\n  \\<Union> (R ` K) = UNIV\n  finite K\n  \\<forall>j1\\<in>K.\n     \\<forall>j2\\<in>K.\n        j1 \\<noteq> j2 \\<longrightarrow> R j1 \\<inter> R j2 = {}\n  \\<forall>i\\<in>K. R i \\<in> measurable_sets M\n  A \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. Measure.measure M (A \\<inter> R i)) =\n    Measure.measure M A", "by (rule measure_split[THEN sym])"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>K. Measure.measure M (A \\<inter> R i)) = Measure.measure M A\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "finally"], ["proof (chain)\npicking this:\n  Measure.measure M A \\<in> sfis \\<chi> A M", "show ?thesis"], ["proof (prove)\nusing this:\n  Measure.measure M A \\<in> sfis \\<chi> A M\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "."], ["proof (state)\nthis:\n  Measure.measure M A \\<in> sfis \\<chi> A M\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)\n    (*Sums are always problematic, since they use informal notation\n    all the time.*)"], ["", "lemma sfis_times:\n  assumes a: \"a \\<in> sfis f M\" and z: \"0\\<le>z\"\n  shows \"z*a \\<in> sfis (\\<lambda>w. z*f w) M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z * a \\<in> sfis (\\<lambda>w. z * f w) M", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. z * a \\<in> sfis (\\<lambda>w. z * f w) M", "using a"], ["proof (prove)\nusing this:\n  a \\<in> sfis f M\n\ngoal (1 subgoal):\n 1. z * a \\<in> sfis (\\<lambda>w. z * f w) M", "proof cases"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> sfis (\\<lambda>w. z * f w) M", "case (base x A S)"], ["proof (state)\nthis:\n  a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative x\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> sfis (\\<lambda>w. z * f w) M", "{"], ["proof (state)\nthis:\n  a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative x\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> sfis (\\<lambda>w. z * f w) M", "fix t"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> sfis (\\<lambda>w. z * f w) M", "from base"], ["proof (chain)\npicking this:\n  a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative x\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV", "have \"z*f t = (\\<Sum>i\\<in>S. z * (x i * \\<chi> (A i) t))\""], ["proof (prove)\nusing this:\n  a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative x\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n\ngoal (1 subgoal):\n 1. z * f t = (\\<Sum>i\\<in>S. z * (x i * \\<chi> (A i) t))", "by (simp add: sum_distrib_left)"], ["proof (state)\nthis:\n  z * f t = (\\<Sum>i\\<in>S. z * (x i * \\<chi> (A i) t))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> sfis (\\<lambda>w. z * f w) M", "also"], ["proof (state)\nthis:\n  z * f t = (\\<Sum>i\\<in>S. z * (x i * \\<chi> (A i) t))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> sfis (\\<lambda>w. z * f w) M", "have \"\\<dots> = (\\<Sum>i\\<in>S. (z * x i) * \\<chi> (A i) t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>S. z * (x i * \\<chi> (A i) t)) =\n    (\\<Sum>i\\<in>S. z * x i * \\<chi> (A i) t)", "proof (rule sum.cong)"], ["proof (state)\ngoal (2 subgoals):\n 1. S = S\n 2. \\<And>xa.\n       xa \\<in> S \\<Longrightarrow>\n       z * (x xa * \\<chi> (A xa) t) = z * x xa * \\<chi> (A xa) t", "show \"S = S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S = S", ".."], ["proof (state)\nthis:\n  S = S\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> S \\<Longrightarrow>\n       z * (x xa * \\<chi> (A xa) t) = z * x xa * \\<chi> (A xa) t", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> S \\<Longrightarrow>\n       z * (x xa * \\<chi> (A xa) t) = z * x xa * \\<chi> (A xa) t", "show \"z * (x i * \\<chi> (A i) t) = (z * x i) * \\<chi> (A i) t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z * (x i * \\<chi> (A i) t) = z * x i * \\<chi> (A i) t", "by auto"], ["proof (state)\nthis:\n  z * (x i * \\<chi> (A i) t) = z * x i * \\<chi> (A i) t\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>S. z * (x i * \\<chi> (A i) t)) =\n  (\\<Sum>i\\<in>S. z * x i * \\<chi> (A i) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> sfis (\\<lambda>w. z * f w) M", "finally"], ["proof (chain)\npicking this:\n  z * f t = (\\<Sum>i\\<in>S. z * x i * \\<chi> (A i) t)", "have \"z * f t = (\\<Sum>i\\<in>S. z * x i * \\<chi> (A i) t)\""], ["proof (prove)\nusing this:\n  z * f t = (\\<Sum>i\\<in>S. z * x i * \\<chi> (A i) t)\n\ngoal (1 subgoal):\n 1. z * f t = (\\<Sum>i\\<in>S. z * x i * \\<chi> (A i) t)", "."], ["proof (state)\nthis:\n  z * f t = (\\<Sum>i\\<in>S. z * x i * \\<chi> (A i) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> sfis (\\<lambda>w. z * f w) M", "}"], ["proof (state)\nthis:\n  z * f ?t2 = (\\<Sum>i\\<in>S. z * x i * \\<chi> (A i) ?t2)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> sfis (\\<lambda>w. z * f w) M", "hence zf: \"(\\<lambda>w. z*f w) = (\\<lambda>t. \\<Sum>i\\<in>S. z * x i * \\<chi> (A i) t)\""], ["proof (prove)\nusing this:\n  z * f ?t2 = (\\<Sum>i\\<in>S. z * x i * \\<chi> (A i) ?t2)\n\ngoal (1 subgoal):\n 1. (\\<lambda>w. z * f w) =\n    (\\<lambda>t. \\<Sum>i\\<in>S. z * x i * \\<chi> (A i) t)", "by (simp add: ext)"], ["proof (state)\nthis:\n  (\\<lambda>w. z * f w) =\n  (\\<lambda>t. \\<Sum>i\\<in>S. z * x i * \\<chi> (A i) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> sfis (\\<lambda>w. z * f w) M", "from z base"], ["proof (chain)\npicking this:\n  0 \\<le> z\n  a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative x\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV", "have \"nonnegative (\\<lambda>w. z*x w)\""], ["proof (prove)\nusing this:\n  0 \\<le> z\n  a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative x\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n\ngoal (1 subgoal):\n 1. nonnegative (\\<lambda>w. z * x w)", "by (simp add: nonnegative_def zero_le_mult_iff)"], ["proof (state)\nthis:\n  nonnegative (\\<lambda>w. z * x w)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> sfis (\\<lambda>w. z * f w) M", "with base zf"], ["proof (chain)\npicking this:\n  a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative x\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n  (\\<lambda>w. z * f w) =\n  (\\<lambda>t. \\<Sum>i\\<in>S. z * x i * \\<chi> (A i) t)\n  nonnegative (\\<lambda>w. z * x w)", "have \"(\\<Sum>i\\<in>S. z * x i * measure M (A i)) \\<in> sfis (\\<lambda>w. z*f w) M\""], ["proof (prove)\nusing this:\n  a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative x\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n  (\\<lambda>w. z * f w) =\n  (\\<lambda>t. \\<Sum>i\\<in>S. z * x i * \\<chi> (A i) t)\n  nonnegative (\\<lambda>w. z * x w)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>S. z * x i * Measure.measure M (A i))\n    \\<in> sfis (\\<lambda>w. z * f w) M", "by (simp add: sfis.base)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>S. z * x i * Measure.measure M (A i))\n  \\<in> sfis (\\<lambda>w. z * f w) M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> sfis (\\<lambda>w. z * f w) M", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>S. z * x i * Measure.measure M (A i))\n  \\<in> sfis (\\<lambda>w. z * f w) M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> sfis (\\<lambda>w. z * f w) M", "have \"(\\<Sum>i\\<in>S. z * x i * measure M (A i)) = (\\<Sum>i\\<in>S. z * (x i * measure M (A i)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>S. z * x i * Measure.measure M (A i)) =\n    (\\<Sum>i\\<in>S. z * (x i * Measure.measure M (A i)))", "proof (rule sum.cong)"], ["proof (state)\ngoal (2 subgoals):\n 1. S = S\n 2. \\<And>xa.\n       xa \\<in> S \\<Longrightarrow>\n       z * x xa * Measure.measure M (A xa) =\n       z * (x xa * Measure.measure M (A xa))", "show \"S = S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S = S", ".."], ["proof (state)\nthis:\n  S = S\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> S \\<Longrightarrow>\n       z * x xa * Measure.measure M (A xa) =\n       z * (x xa * Measure.measure M (A xa))", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> S \\<Longrightarrow>\n       z * x xa * Measure.measure M (A xa) =\n       z * (x xa * Measure.measure M (A xa))", "show \"(z * x i) * measure M (A i) = z * (x i * measure M (A i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z * x i * Measure.measure M (A i) = z * (x i * Measure.measure M (A i))", "by auto"], ["proof (state)\nthis:\n  z * x i * Measure.measure M (A i) = z * (x i * Measure.measure M (A i))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>S. z * x i * Measure.measure M (A i)) =\n  (\\<Sum>i\\<in>S. z * (x i * Measure.measure M (A i)))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> sfis (\\<lambda>w. z * f w) M", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>S. z * x i * Measure.measure M (A i)) =\n  (\\<Sum>i\\<in>S. z * (x i * Measure.measure M (A i)))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> sfis (\\<lambda>w. z * f w) M", "from base"], ["proof (chain)\npicking this:\n  a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative x\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV", "have \"\\<dots> = z*a\""], ["proof (prove)\nusing this:\n  a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative x\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>S. z * (x i * Measure.measure M (A i))) = z * a", "by (simp add: sum_distrib_left)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>S. z * (x i * Measure.measure M (A i))) = z * a\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> sfis (\\<lambda>w. z * f w) M", "finally"], ["proof (chain)\npicking this:\n  z * a \\<in> sfis (\\<lambda>w. z * f w) M", "show ?thesis"], ["proof (prove)\nusing this:\n  z * a \\<in> sfis (\\<lambda>w. z * f w) M\n\ngoal (1 subgoal):\n 1. z * a \\<in> sfis (\\<lambda>w. z * f w) M", "."], ["proof (state)\nthis:\n  z * a \\<in> sfis (\\<lambda>w. z * f w) M\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "lemma assumes ms: \"measure_space M\" \n  and a: \"\\<forall>i\\<in>S. a i \\<in> sfis (f i) M\" and S: \"finite S\"\n  shows sfis_sum: \"(\\<Sum>i\\<in>S. a i) \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. f i t) M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum a S \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. f i t) M", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum a S \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. f i t) M", "using S a"], ["proof (prove)\nusing this:\n  finite S\n  \\<forall>i\\<in>S. a i \\<in> sfis (f i) M\n\ngoal (1 subgoal):\n 1. sum a S \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. f i t) M", "proof induct"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<forall>i\\<in>{}. a i \\<in> sfis (f i) M \\<Longrightarrow>\n    sum a {} \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>{}. f i t) M\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>i\\<in>F. a i \\<in> sfis (f i) M \\<Longrightarrow>\n        sum a F \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>F. f i t) M;\n        \\<forall>i\\<in>insert x F. a i \\<in> sfis (f i) M\\<rbrakk>\n       \\<Longrightarrow> sum a (insert x F)\n                         \\<in> sfis\n                                (\\<lambda>t. \\<Sum>i\\<in>insert x F. f i t)\n                                M", "case empty"], ["proof (state)\nthis:\n  \\<forall>i\\<in>{}. a i \\<in> sfis (f i) M\n\ngoal (2 subgoals):\n 1. \\<forall>i\\<in>{}. a i \\<in> sfis (f i) M \\<Longrightarrow>\n    sum a {} \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>{}. f i t) M\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>i\\<in>F. a i \\<in> sfis (f i) M \\<Longrightarrow>\n        sum a F \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>F. f i t) M;\n        \\<forall>i\\<in>insert x F. a i \\<in> sfis (f i) M\\<rbrakk>\n       \\<Longrightarrow> sum a (insert x F)\n                         \\<in> sfis\n                                (\\<lambda>t. \\<Sum>i\\<in>insert x F. f i t)\n                                M", "with ms"], ["proof (chain)\npicking this:\n  measure_space M\n  \\<forall>i\\<in>{}. a i \\<in> sfis (f i) M", "have \"measure M {} \\<in> sfis \\<chi> {} M\""], ["proof (prove)\nusing this:\n  measure_space M\n  \\<forall>i\\<in>{}. a i \\<in> sfis (f i) M\n\ngoal (1 subgoal):\n 1. Measure.measure M {} \\<in> sfis \\<chi> {} M", "by (simp add: measure_space_def sigma_algebra_def sfis_char)"], ["proof (state)\nthis:\n  Measure.measure M {} \\<in> sfis \\<chi> {} M\n\ngoal (2 subgoals):\n 1. \\<forall>i\\<in>{}. a i \\<in> sfis (f i) M \\<Longrightarrow>\n    sum a {} \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>{}. f i t) M\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>i\\<in>F. a i \\<in> sfis (f i) M \\<Longrightarrow>\n        sum a F \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>F. f i t) M;\n        \\<forall>i\\<in>insert x F. a i \\<in> sfis (f i) M\\<rbrakk>\n       \\<Longrightarrow> sum a (insert x F)\n                         \\<in> sfis\n                                (\\<lambda>t. \\<Sum>i\\<in>insert x F. f i t)\n                                M", "with ms"], ["proof (chain)\npicking this:\n  measure_space M\n  Measure.measure M {} \\<in> sfis \\<chi> {} M", "show ?case"], ["proof (prove)\nusing this:\n  measure_space M\n  Measure.measure M {} \\<in> sfis \\<chi> {} M\n\ngoal (1 subgoal):\n 1. sum a {} \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>{}. f i t) M", "by (simp add: sum.empty measure_space_def positive_def char_empty)"], ["proof (state)\nthis:\n  sum a {} \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>{}. f i t) M\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>i\\<in>F. a i \\<in> sfis (f i) M \\<Longrightarrow>\n        sum a F \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>F. f i t) M;\n        \\<forall>i\\<in>insert x F. a i \\<in> sfis (f i) M\\<rbrakk>\n       \\<Longrightarrow> sum a (insert x F)\n                         \\<in> sfis\n                                (\\<lambda>t. \\<Sum>i\\<in>insert x F. f i t)\n                                M", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>i\\<in>F. a i \\<in> sfis (f i) M \\<Longrightarrow>\n        sum a F \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>F. f i t) M;\n        \\<forall>i\\<in>insert x F. a i \\<in> sfis (f i) M\\<rbrakk>\n       \\<Longrightarrow> sum a (insert x F)\n                         \\<in> sfis\n                                (\\<lambda>t. \\<Sum>i\\<in>insert x F. f i t)\n                                M", "case (insert s S)"], ["proof (state)\nthis:\n  finite S\n  s \\<notin> S\n  \\<forall>i\\<in>S. a i \\<in> sfis (f i) M \\<Longrightarrow>\n  sum a S \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. f i t) M\n  \\<forall>i\\<in>insert s S. a i \\<in> sfis (f i) M\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>i\\<in>F. a i \\<in> sfis (f i) M \\<Longrightarrow>\n        sum a F \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>F. f i t) M;\n        \\<forall>i\\<in>insert x F. a i \\<in> sfis (f i) M\\<rbrakk>\n       \\<Longrightarrow> sum a (insert x F)\n                         \\<in> sfis\n                                (\\<lambda>t. \\<Sum>i\\<in>insert x F. f i t)\n                                M", "then"], ["proof (chain)\npicking this:\n  finite S\n  s \\<notin> S\n  \\<forall>i\\<in>S. a i \\<in> sfis (f i) M \\<Longrightarrow>\n  sum a S \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. f i t) M\n  \\<forall>i\\<in>insert s S. a i \\<in> sfis (f i) M", "have \"\\<And>t. (\\<Sum>i \\<in> insert s S. f i t) = f s t + (\\<Sum>i\\<in>S. f i t)\""], ["proof (prove)\nusing this:\n  finite S\n  s \\<notin> S\n  \\<forall>i\\<in>S. a i \\<in> sfis (f i) M \\<Longrightarrow>\n  sum a S \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. f i t) M\n  \\<forall>i\\<in>insert s S. a i \\<in> sfis (f i) M\n\ngoal (1 subgoal):\n 1. \\<And>t.\n       (\\<Sum>i\\<in>insert s S. f i t) = f s t + (\\<Sum>i\\<in>S. f i t)", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>insert s S. f i ?t) = f s ?t + (\\<Sum>i\\<in>S. f i ?t)\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>i\\<in>F. a i \\<in> sfis (f i) M \\<Longrightarrow>\n        sum a F \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>F. f i t) M;\n        \\<forall>i\\<in>insert x F. a i \\<in> sfis (f i) M\\<rbrakk>\n       \\<Longrightarrow> sum a (insert x F)\n                         \\<in> sfis\n                                (\\<lambda>t. \\<Sum>i\\<in>insert x F. f i t)\n                                M", "moreover"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>insert s S. f i ?t) = f s ?t + (\\<Sum>i\\<in>S. f i ?t)\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>i\\<in>F. a i \\<in> sfis (f i) M \\<Longrightarrow>\n        sum a F \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>F. f i t) M;\n        \\<forall>i\\<in>insert x F. a i \\<in> sfis (f i) M\\<rbrakk>\n       \\<Longrightarrow> sum a (insert x F)\n                         \\<in> sfis\n                                (\\<lambda>t. \\<Sum>i\\<in>insert x F. f i t)\n                                M", "from insert"], ["proof (chain)\npicking this:\n  finite S\n  s \\<notin> S\n  \\<forall>i\\<in>S. a i \\<in> sfis (f i) M \\<Longrightarrow>\n  sum a S \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. f i t) M\n  \\<forall>i\\<in>insert s S. a i \\<in> sfis (f i) M", "have \"(\\<Sum>i \\<in> insert s S. a i) = a s + (\\<Sum>i\\<in>S. a i)\""], ["proof (prove)\nusing this:\n  finite S\n  s \\<notin> S\n  \\<forall>i\\<in>S. a i \\<in> sfis (f i) M \\<Longrightarrow>\n  sum a S \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. f i t) M\n  \\<forall>i\\<in>insert s S. a i \\<in> sfis (f i) M\n\ngoal (1 subgoal):\n 1. sum a (insert s S) = a s + sum a S", "by simp"], ["proof (state)\nthis:\n  sum a (insert s S) = a s + sum a S\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>i\\<in>F. a i \\<in> sfis (f i) M \\<Longrightarrow>\n        sum a F \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>F. f i t) M;\n        \\<forall>i\\<in>insert x F. a i \\<in> sfis (f i) M\\<rbrakk>\n       \\<Longrightarrow> sum a (insert x F)\n                         \\<in> sfis\n                                (\\<lambda>t. \\<Sum>i\\<in>insert x F. f i t)\n                                M", "moreover"], ["proof (state)\nthis:\n  sum a (insert s S) = a s + sum a S\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>i\\<in>F. a i \\<in> sfis (f i) M \\<Longrightarrow>\n        sum a F \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>F. f i t) M;\n        \\<forall>i\\<in>insert x F. a i \\<in> sfis (f i) M\\<rbrakk>\n       \\<Longrightarrow> sum a (insert x F)\n                         \\<in> sfis\n                                (\\<lambda>t. \\<Sum>i\\<in>insert x F. f i t)\n                                M", "from insert"], ["proof (chain)\npicking this:\n  finite S\n  s \\<notin> S\n  \\<forall>i\\<in>S. a i \\<in> sfis (f i) M \\<Longrightarrow>\n  sum a S \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. f i t) M\n  \\<forall>i\\<in>insert s S. a i \\<in> sfis (f i) M", "have \"a s \\<in> sfis (f s) M\""], ["proof (prove)\nusing this:\n  finite S\n  s \\<notin> S\n  \\<forall>i\\<in>S. a i \\<in> sfis (f i) M \\<Longrightarrow>\n  sum a S \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. f i t) M\n  \\<forall>i\\<in>insert s S. a i \\<in> sfis (f i) M\n\ngoal (1 subgoal):\n 1. a s \\<in> sfis (f s) M", "by fast"], ["proof (state)\nthis:\n  a s \\<in> sfis (f s) M\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>i\\<in>F. a i \\<in> sfis (f i) M \\<Longrightarrow>\n        sum a F \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>F. f i t) M;\n        \\<forall>i\\<in>insert x F. a i \\<in> sfis (f i) M\\<rbrakk>\n       \\<Longrightarrow> sum a (insert x F)\n                         \\<in> sfis\n                                (\\<lambda>t. \\<Sum>i\\<in>insert x F. f i t)\n                                M", "moreover"], ["proof (state)\nthis:\n  a s \\<in> sfis (f s) M\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>i\\<in>F. a i \\<in> sfis (f i) M \\<Longrightarrow>\n        sum a F \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>F. f i t) M;\n        \\<forall>i\\<in>insert x F. a i \\<in> sfis (f i) M\\<rbrakk>\n       \\<Longrightarrow> sum a (insert x F)\n                         \\<in> sfis\n                                (\\<lambda>t. \\<Sum>i\\<in>insert x F. f i t)\n                                M", "from insert"], ["proof (chain)\npicking this:\n  finite S\n  s \\<notin> S\n  \\<forall>i\\<in>S. a i \\<in> sfis (f i) M \\<Longrightarrow>\n  sum a S \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. f i t) M\n  \\<forall>i\\<in>insert s S. a i \\<in> sfis (f i) M", "have \"(\\<Sum>i\\<in>S. a i) \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. f i t) M\""], ["proof (prove)\nusing this:\n  finite S\n  s \\<notin> S\n  \\<forall>i\\<in>S. a i \\<in> sfis (f i) M \\<Longrightarrow>\n  sum a S \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. f i t) M\n  \\<forall>i\\<in>insert s S. a i \\<in> sfis (f i) M\n\ngoal (1 subgoal):\n 1. sum a S \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. f i t) M", "by fast"], ["proof (state)\nthis:\n  sum a S \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. f i t) M\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>i\\<in>F. a i \\<in> sfis (f i) M \\<Longrightarrow>\n        sum a F \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>F. f i t) M;\n        \\<forall>i\\<in>insert x F. a i \\<in> sfis (f i) M\\<rbrakk>\n       \\<Longrightarrow> sum a (insert x F)\n                         \\<in> sfis\n                                (\\<lambda>t. \\<Sum>i\\<in>insert x F. f i t)\n                                M", "moreover"], ["proof (state)\nthis:\n  sum a S \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. f i t) M\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>i\\<in>F. a i \\<in> sfis (f i) M \\<Longrightarrow>\n        sum a F \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>F. f i t) M;\n        \\<forall>i\\<in>insert x F. a i \\<in> sfis (f i) M\\<rbrakk>\n       \\<Longrightarrow> sum a (insert x F)\n                         \\<in> sfis\n                                (\\<lambda>t. \\<Sum>i\\<in>insert x F. f i t)\n                                M", "note ms"], ["proof (state)\nthis:\n  measure_space M\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>i\\<in>F. a i \\<in> sfis (f i) M \\<Longrightarrow>\n        sum a F \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>F. f i t) M;\n        \\<forall>i\\<in>insert x F. a i \\<in> sfis (f i) M\\<rbrakk>\n       \\<Longrightarrow> sum a (insert x F)\n                         \\<in> sfis\n                                (\\<lambda>t. \\<Sum>i\\<in>insert x F. f i t)\n                                M", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Sum>i\\<in>insert s S. f i ?t) = f s ?t + (\\<Sum>i\\<in>S. f i ?t)\n  sum a (insert s S) = a s + sum a S\n  a s \\<in> sfis (f s) M\n  sum a S \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. f i t) M\n  measure_space M", "show ?case"], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<in>insert s S. f i ?t) = f s ?t + (\\<Sum>i\\<in>S. f i ?t)\n  sum a (insert s S) = a s + sum a S\n  a s \\<in> sfis (f s) M\n  sum a S \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. f i t) M\n  measure_space M\n\ngoal (1 subgoal):\n 1. sum a (insert s S)\n    \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>insert s S. f i t) M", "by (simp add: sfis_add ext)"], ["proof (state)\nthis:\n  sum a (insert s S)\n  \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>insert s S. f i t) M\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)\n\n(*The introduction rule without normal forms, only in measure_spaces*)"], ["", "lemma sfis_intro:\n  assumes ms: \"measure_space M\" and Ams: \"\\<forall>i \\<in> S. A i \\<in> measurable_sets M\" \n  and nn: \"nonnegative x\" and S: \"finite S\"\n  shows \"(\\<Sum>i\\<in>S. x i * measure M (A i)) \\<in> \n  sfis (\\<lambda>t. \\<Sum>i\\<in>(S::nat set). x i * \\<chi> (A i) t) M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n    \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t) M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n    \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t) M", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n    \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t) M", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n    \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t) M", "assume iS: \"i \\<in> S\""], ["proof (state)\nthis:\n  i \\<in> S\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n    \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t) M", "with ms Ams"], ["proof (chain)\npicking this:\n  measure_space M\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  i \\<in> S", "have \"measure M (A i) \\<in> sfis \\<chi> (A i) M\""], ["proof (prove)\nusing this:\n  measure_space M\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  i \\<in> S\n\ngoal (1 subgoal):\n 1. Measure.measure M (A i) \\<in> sfis \\<chi> (A i) M", "by (simp add: sfis_char)"], ["proof (state)\nthis:\n  Measure.measure M (A i) \\<in> sfis \\<chi> (A i) M\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n    \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t) M", "with nn"], ["proof (chain)\npicking this:\n  nonnegative x\n  Measure.measure M (A i) \\<in> sfis \\<chi> (A i) M", "have \"x i * measure M (A i) \\<in> sfis (\\<lambda>t. x i * \\<chi> (A i) t) M\""], ["proof (prove)\nusing this:\n  nonnegative x\n  Measure.measure M (A i) \\<in> sfis \\<chi> (A i) M\n\ngoal (1 subgoal):\n 1. x i * Measure.measure M (A i)\n    \\<in> sfis (\\<lambda>t. x i * \\<chi> (A i) t) M", "by (simp add: nonnegative_def sfis_times)"], ["proof (state)\nthis:\n  x i * Measure.measure M (A i)\n  \\<in> sfis (\\<lambda>t. x i * \\<chi> (A i) t) M\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n    \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t) M", "}"], ["proof (state)\nthis:\n  ?i2 \\<in> S \\<Longrightarrow>\n  x ?i2 * Measure.measure M (A ?i2)\n  \\<in> sfis (\\<lambda>t. x ?i2 * \\<chi> (A ?i2) t) M\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n    \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t) M", "with ms S"], ["proof (chain)\npicking this:\n  measure_space M\n  finite S\n  ?i2 \\<in> S \\<Longrightarrow>\n  x ?i2 * Measure.measure M (A ?i2)\n  \\<in> sfis (\\<lambda>t. x ?i2 * \\<chi> (A ?i2) t) M", "show ?thesis"], ["proof (prove)\nusing this:\n  measure_space M\n  finite S\n  ?i2 \\<in> S \\<Longrightarrow>\n  x ?i2 * Measure.measure M (A ?i2)\n  \\<in> sfis (\\<lambda>t. x ?i2 * \\<chi> (A ?i2) t) M\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n    \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t) M", "by (simp add: sfis_sum)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n  \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t) M\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>That is nearly all there is to know about simple function\n  integral sets. It will be useful anyway to have the next two facts\n  available.\\<close>"], ["", "lemma sfis_nn:\n  assumes f: \"a \\<in> sfis f M\"\n  shows \"nonnegative f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nonnegative f", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nonnegative f", "using f"], ["proof (prove)\nusing this:\n  a \\<in> sfis f M\n\ngoal (1 subgoal):\n 1. nonnegative f", "proof (cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> nonnegative f", "case (base x A S)"], ["proof (state)\nthis:\n  a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative x\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> nonnegative f", "{"], ["proof (state)\nthis:\n  a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative x\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> nonnegative f", "fix t"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> nonnegative f", "from base"], ["proof (chain)\npicking this:\n  a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative x\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV", "have \"\\<And>i. 0 \\<le> x i * \\<chi> (A i) t\""], ["proof (prove)\nusing this:\n  a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative x\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n\ngoal (1 subgoal):\n 1. \\<And>i. 0 \\<le> x i * \\<chi> (A i) t", "by (simp add: nonnegative_def characteristic_function_def)"], ["proof (state)\nthis:\n  0 \\<le> x ?i * \\<chi> (A ?i) t\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> nonnegative f", "with base"], ["proof (chain)\npicking this:\n  a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative x\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n  0 \\<le> x ?i * \\<chi> (A ?i) t", "have \"(\\<Sum>i\\<in>S. 0) \\<le> f t\""], ["proof (prove)\nusing this:\n  a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative x\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n  0 \\<le> x ?i * \\<chi> (A ?i) t\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>S. 0) \\<le> f t", "by (simp del: sum.neutral_const sum_constant add: sum_mono)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>S. 0) \\<le> f t\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> nonnegative f", "hence \"0 \\<le> f t\""], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<in>S. 0) \\<le> f t\n\ngoal (1 subgoal):\n 1. 0 \\<le> f t", "by simp"], ["proof (state)\nthis:\n  0 \\<le> f t\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> nonnegative f", "}"], ["proof (state)\nthis:\n  0 \\<le> f ?t2\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> nonnegative f", "thus ?thesis"], ["proof (prove)\nusing this:\n  0 \\<le> f ?t2\n\ngoal (1 subgoal):\n 1. nonnegative f", "by (simp add: nonnegative_def)"], ["proof (state)\nthis:\n  nonnegative f\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "lemma sum_rv:\n  assumes rvs: \"\\<forall>k\\<in>K. (f k) \\<in> rv M\" and ms: \"measure_space M\"\n  shows \"(\\<lambda>t. \\<Sum>k\\<in>K. f k t) \\<in> rv M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>t. \\<Sum>k\\<in>K. f k t) \\<in> rv M", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>t. \\<Sum>k\\<in>K. f k t) \\<in> rv M", "proof (cases \"finite K\")"], ["proof (state)\ngoal (2 subgoals):\n 1. finite K \\<Longrightarrow> (\\<lambda>t. \\<Sum>k\\<in>K. f k t) \\<in> rv M\n 2. infinite K \\<Longrightarrow>\n    (\\<lambda>t. \\<Sum>k\\<in>K. f k t) \\<in> rv M", "case False"], ["proof (state)\nthis:\n  infinite K\n\ngoal (2 subgoals):\n 1. finite K \\<Longrightarrow> (\\<lambda>t. \\<Sum>k\\<in>K. f k t) \\<in> rv M\n 2. infinite K \\<Longrightarrow>\n    (\\<lambda>t. \\<Sum>k\\<in>K. f k t) \\<in> rv M", "hence \"(\\<lambda>t. \\<Sum>k\\<in>K. f k t) = (\\<lambda>t. 0)\""], ["proof (prove)\nusing this:\n  infinite K\n\ngoal (1 subgoal):\n 1. (\\<lambda>t. \\<Sum>k\\<in>K. f k t) = (\\<lambda>t. 0)", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>t. \\<Sum>k\\<in>K. f k t) = (\\<lambda>t. 0)\n\ngoal (2 subgoals):\n 1. finite K \\<Longrightarrow> (\\<lambda>t. \\<Sum>k\\<in>K. f k t) \\<in> rv M\n 2. infinite K \\<Longrightarrow>\n    (\\<lambda>t. \\<Sum>k\\<in>K. f k t) \\<in> rv M", "with ms"], ["proof (chain)\npicking this:\n  measure_space M\n  (\\<lambda>t. \\<Sum>k\\<in>K. f k t) = (\\<lambda>t. 0)", "show ?thesis"], ["proof (prove)\nusing this:\n  measure_space M\n  (\\<lambda>t. \\<Sum>k\\<in>K. f k t) = (\\<lambda>t. 0)\n\ngoal (1 subgoal):\n 1. (\\<lambda>t. \\<Sum>k\\<in>K. f k t) \\<in> rv M", "by (simp add: const_rv)"], ["proof (state)\nthis:\n  (\\<lambda>t. \\<Sum>k\\<in>K. f k t) \\<in> rv M\n\ngoal (1 subgoal):\n 1. finite K \\<Longrightarrow> (\\<lambda>t. \\<Sum>k\\<in>K. f k t) \\<in> rv M", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. finite K \\<Longrightarrow> (\\<lambda>t. \\<Sum>k\\<in>K. f k t) \\<in> rv M", "case True"], ["proof (state)\nthis:\n  finite K\n\ngoal (1 subgoal):\n 1. finite K \\<Longrightarrow> (\\<lambda>t. \\<Sum>k\\<in>K. f k t) \\<in> rv M", "from this rvs"], ["proof (chain)\npicking this:\n  finite K\n  \\<forall>k\\<in>K. f k \\<in> rv M", "show ?thesis"], ["proof (prove)\nusing this:\n  finite K\n  \\<forall>k\\<in>K. f k \\<in> rv M\n\ngoal (1 subgoal):\n 1. (\\<lambda>t. \\<Sum>k\\<in>K. f k t) \\<in> rv M", "proof (induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<forall>k\\<in>{}. f k \\<in> rv M \\<Longrightarrow>\n    (\\<lambda>t. \\<Sum>k\\<in>{}. f k t) \\<in> rv M\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>k\\<in>F. f k \\<in> rv M \\<Longrightarrow>\n        (\\<lambda>t. \\<Sum>k\\<in>F. f k t) \\<in> rv M;\n        \\<forall>k\\<in>insert x F. f k \\<in> rv M\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>t. \\<Sum>k\\<in>insert x F. f k t)\n                         \\<in> rv M", "case empty"], ["proof (state)\nthis:\n  \\<forall>k\\<in>{}. f k \\<in> rv M\n\ngoal (2 subgoals):\n 1. \\<forall>k\\<in>{}. f k \\<in> rv M \\<Longrightarrow>\n    (\\<lambda>t. \\<Sum>k\\<in>{}. f k t) \\<in> rv M\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>k\\<in>F. f k \\<in> rv M \\<Longrightarrow>\n        (\\<lambda>t. \\<Sum>k\\<in>F. f k t) \\<in> rv M;\n        \\<forall>k\\<in>insert x F. f k \\<in> rv M\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>t. \\<Sum>k\\<in>insert x F. f k t)\n                         \\<in> rv M", "have \"(\\<lambda>t. \\<Sum>k\\<in>{}. f k t) = (\\<lambda>t. 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>t. \\<Sum>k\\<in>{}. f k t) = (\\<lambda>t. 0)", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>t. \\<Sum>k\\<in>{}. f k t) = (\\<lambda>t. 0)\n\ngoal (2 subgoals):\n 1. \\<forall>k\\<in>{}. f k \\<in> rv M \\<Longrightarrow>\n    (\\<lambda>t. \\<Sum>k\\<in>{}. f k t) \\<in> rv M\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>k\\<in>F. f k \\<in> rv M \\<Longrightarrow>\n        (\\<lambda>t. \\<Sum>k\\<in>F. f k t) \\<in> rv M;\n        \\<forall>k\\<in>insert x F. f k \\<in> rv M\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>t. \\<Sum>k\\<in>insert x F. f k t)\n                         \\<in> rv M", "with ms"], ["proof (chain)\npicking this:\n  measure_space M\n  (\\<lambda>t. \\<Sum>k\\<in>{}. f k t) = (\\<lambda>t. 0)", "show ?case"], ["proof (prove)\nusing this:\n  measure_space M\n  (\\<lambda>t. \\<Sum>k\\<in>{}. f k t) = (\\<lambda>t. 0)\n\ngoal (1 subgoal):\n 1. (\\<lambda>t. \\<Sum>k\\<in>{}. f k t) \\<in> rv M", "by (simp add: const_rv)"], ["proof (state)\nthis:\n  (\\<lambda>t. \\<Sum>k\\<in>{}. f k t) \\<in> rv M\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>k\\<in>F. f k \\<in> rv M \\<Longrightarrow>\n        (\\<lambda>t. \\<Sum>k\\<in>F. f k t) \\<in> rv M;\n        \\<forall>k\\<in>insert x F. f k \\<in> rv M\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>t. \\<Sum>k\\<in>insert x F. f k t)\n                         \\<in> rv M", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>k\\<in>F. f k \\<in> rv M \\<Longrightarrow>\n        (\\<lambda>t. \\<Sum>k\\<in>F. f k t) \\<in> rv M;\n        \\<forall>k\\<in>insert x F. f k \\<in> rv M\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>t. \\<Sum>k\\<in>insert x F. f k t)\n                         \\<in> rv M", "case (insert x F)"], ["proof (state)\nthis:\n  finite F\n  x \\<notin> F\n  \\<forall>k\\<in>F. f k \\<in> rv M \\<Longrightarrow>\n  (\\<lambda>t. \\<Sum>k\\<in>F. f k t) \\<in> rv M\n  \\<forall>k\\<in>insert x F. f k \\<in> rv M\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>k\\<in>F. f k \\<in> rv M \\<Longrightarrow>\n        (\\<lambda>t. \\<Sum>k\\<in>F. f k t) \\<in> rv M;\n        \\<forall>k\\<in>insert x F. f k \\<in> rv M\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>t. \\<Sum>k\\<in>insert x F. f k t)\n                         \\<in> rv M", "hence \"(\\<lambda>t. \\<Sum>k\\<in>insert x F. f k t) = (\\<lambda>t. f x t + (\\<Sum>k\\<in>F. f k t))\""], ["proof (prove)\nusing this:\n  finite F\n  x \\<notin> F\n  \\<forall>k\\<in>F. f k \\<in> rv M \\<Longrightarrow>\n  (\\<lambda>t. \\<Sum>k\\<in>F. f k t) \\<in> rv M\n  \\<forall>k\\<in>insert x F. f k \\<in> rv M\n\ngoal (1 subgoal):\n 1. (\\<lambda>t. \\<Sum>k\\<in>insert x F. f k t) =\n    (\\<lambda>t. f x t + (\\<Sum>k\\<in>F. f k t))", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>t. \\<Sum>k\\<in>insert x F. f k t) =\n  (\\<lambda>t. f x t + (\\<Sum>k\\<in>F. f k t))\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>k\\<in>F. f k \\<in> rv M \\<Longrightarrow>\n        (\\<lambda>t. \\<Sum>k\\<in>F. f k t) \\<in> rv M;\n        \\<forall>k\\<in>insert x F. f k \\<in> rv M\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>t. \\<Sum>k\\<in>insert x F. f k t)\n                         \\<in> rv M", "also"], ["proof (state)\nthis:\n  (\\<lambda>t. \\<Sum>k\\<in>insert x F. f k t) =\n  (\\<lambda>t. f x t + (\\<Sum>k\\<in>F. f k t))\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>k\\<in>F. f k \\<in> rv M \\<Longrightarrow>\n        (\\<lambda>t. \\<Sum>k\\<in>F. f k t) \\<in> rv M;\n        \\<forall>k\\<in>insert x F. f k \\<in> rv M\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>t. \\<Sum>k\\<in>insert x F. f k t)\n                         \\<in> rv M", "from insert"], ["proof (chain)\npicking this:\n  finite F\n  x \\<notin> F\n  \\<forall>k\\<in>F. f k \\<in> rv M \\<Longrightarrow>\n  (\\<lambda>t. \\<Sum>k\\<in>F. f k t) \\<in> rv M\n  \\<forall>k\\<in>insert x F. f k \\<in> rv M", "have \"f x \\<in> rv M\" and \"(\\<lambda>t. (\\<Sum>k\\<in>F. f k t)) \\<in> rv M\""], ["proof (prove)\nusing this:\n  finite F\n  x \\<notin> F\n  \\<forall>k\\<in>F. f k \\<in> rv M \\<Longrightarrow>\n  (\\<lambda>t. \\<Sum>k\\<in>F. f k t) \\<in> rv M\n  \\<forall>k\\<in>insert x F. f k \\<in> rv M\n\ngoal (1 subgoal):\n 1. f x \\<in> rv M &&& (\\<lambda>t. \\<Sum>k\\<in>F. f k t) \\<in> rv M", "by simp_all"], ["proof (state)\nthis:\n  f x \\<in> rv M\n  (\\<lambda>t. \\<Sum>k\\<in>F. f k t) \\<in> rv M\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>k\\<in>F. f k \\<in> rv M \\<Longrightarrow>\n        (\\<lambda>t. \\<Sum>k\\<in>F. f k t) \\<in> rv M;\n        \\<forall>k\\<in>insert x F. f k \\<in> rv M\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>t. \\<Sum>k\\<in>insert x F. f k t)\n                         \\<in> rv M", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>t. \\<Sum>k\\<in>insert x F. f k t) =\n  (\\<lambda>t. f x t + (\\<Sum>k\\<in>F. f k t))\n  f x \\<in> rv M\n  (\\<lambda>t. \\<Sum>k\\<in>F. f k t) \\<in> rv M", "show ?case"], ["proof (prove)\nusing this:\n  (\\<lambda>t. \\<Sum>k\\<in>insert x F. f k t) =\n  (\\<lambda>t. f x t + (\\<Sum>k\\<in>F. f k t))\n  f x \\<in> rv M\n  (\\<lambda>t. \\<Sum>k\\<in>F. f k t) \\<in> rv M\n\ngoal (1 subgoal):\n 1. (\\<lambda>t. \\<Sum>k\\<in>insert x F. f k t) \\<in> rv M", "by (simp add: rv_plus_rv)"], ["proof (state)\nthis:\n  (\\<lambda>t. \\<Sum>k\\<in>insert x F. f k t) \\<in> rv M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>t. \\<Sum>k\\<in>K. f k t) \\<in> rv M\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "lemma sfis_rv: \n  assumes ms: \"measure_space M\" and f: \"a \\<in> sfis f M\"\n  shows \"f \\<in> rv M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> rv M", "using f"], ["proof (prove)\nusing this:\n  a \\<in> sfis f M\n\ngoal (1 subgoal):\n 1. f \\<in> rv M", "proof (cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> f \\<in> rv M", "case (base x A S)"], ["proof (state)\nthis:\n  a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative x\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> f \\<in> rv M", "hence \"f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\""], ["proof (prove)\nusing this:\n  a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative x\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n\ngoal (1 subgoal):\n 1. f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)", "by simp"], ["proof (state)\nthis:\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> f \\<in> rv M", "also"], ["proof (state)\nthis:\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> f \\<in> rv M", "{"], ["proof (state)\nthis:\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> f \\<in> rv M", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> f \\<in> rv M", "assume \"i \\<in> S\""], ["proof (state)\nthis:\n  i \\<in> S\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> f \\<in> rv M", "with base"], ["proof (chain)\npicking this:\n  a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative x\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n  i \\<in> S", "have \"A i \\<in> measurable_sets M\""], ["proof (prove)\nusing this:\n  a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i))\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative x\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n  i \\<in> S\n\ngoal (1 subgoal):\n 1. A i \\<in> measurable_sets M", "by simp"], ["proof (state)\nthis:\n  A i \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> f \\<in> rv M", "with ms"], ["proof (chain)\npicking this:\n  measure_space M\n  A i \\<in> measurable_sets M", "have \"(\\<lambda>t. x i * \\<chi> (A i) t) \\<in> rv M\""], ["proof (prove)\nusing this:\n  measure_space M\n  A i \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. (\\<lambda>t. x i * \\<chi> (A i) t) \\<in> rv M", "by (simp add: char_rv const_rv rv_times_rv)"], ["proof (state)\nthis:\n  (\\<lambda>t. x i * \\<chi> (A i) t) \\<in> rv M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> f \\<in> rv M", "}"], ["proof (state)\nthis:\n  ?i2 \\<in> S \\<Longrightarrow>\n  (\\<lambda>t. x ?i2 * \\<chi> (A ?i2) t) \\<in> rv M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> f \\<in> rv M", "with ms"], ["proof (chain)\npicking this:\n  measure_space M\n  ?i2 \\<in> S \\<Longrightarrow>\n  (\\<lambda>t. x ?i2 * \\<chi> (A ?i2) t) \\<in> rv M", "have \"\\<dots> \\<in> rv M\""], ["proof (prove)\nusing this:\n  measure_space M\n  ?i2 \\<in> S \\<Longrightarrow>\n  (\\<lambda>t. x ?i2 * \\<chi> (A ?i2) t) \\<in> rv M\n\ngoal (1 subgoal):\n 1. (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t) \\<in> rv M", "by (simp add: sum_rv)"], ["proof (state)\nthis:\n  (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t) \\<in> rv M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>a = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> f \\<in> rv M", "ultimately"], ["proof (chain)\npicking this:\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n  (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t) \\<in> rv M", "show ?thesis"], ["proof (prove)\nusing this:\n  f = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t)\n  (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t) \\<in> rv M\n\ngoal (1 subgoal):\n 1. f \\<in> rv M", "by simp"], ["proof (state)\nthis:\n  f \\<in> rv M\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)(*>*)(*nonnegative function integral set*)(*>*)"], ["", "subsection \\<open>Nonnegative Functions\\<close>"], ["", "text \\<open>\n  \\label{nnfis}There is one more important fact about \\<open>sfis\\<close>, easily the\n  hardest one to see. It is about the relationship with monotone\n  convergence and paves the way for a sensible definition of \\<open>nnfis\\<close>, the nonnegative function integral sets, enabling\n  monotonicity and thus uniqueness. A reasonably concise formal proof could\n  fortunately be achieved in spite of the nontrivial ideas involved\n  --- compared for instance to the intuitive but hard-to-formalize\n  \\<open>sfis_present\\<close>. A small lemma is needed to ensure that the\n  inequation, which depends on an arbitrary $z$ strictly between\n  $0$ and $1$, carries over to $z=1$, thereby eliminating $z$ in the end.\\<close>"], ["", "lemma real_le_mult_sustain:\n  assumes zr: \"\\<And>z. \\<lbrakk>0<z; z<1\\<rbrakk> \\<Longrightarrow> z * r \\<le> y\"\n  shows \"r \\<le> (y::real)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<le> y", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<le> y", "proof (cases \"0<y\")"], ["proof (state)\ngoal (2 subgoals):\n 1. 0 < y \\<Longrightarrow> r \\<le> y\n 2. \\<not> 0 < y \\<Longrightarrow> r \\<le> y", "case False"], ["proof (state)\nthis:\n  \\<not> 0 < y\n\ngoal (2 subgoals):\n 1. 0 < y \\<Longrightarrow> r \\<le> y\n 2. \\<not> 0 < y \\<Longrightarrow> r \\<le> y", "have \"0<(1::real)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < 1", "by simp"], ["proof (state)\nthis:\n  0 < 1\n\ngoal (2 subgoals):\n 1. 0 < y \\<Longrightarrow> r \\<le> y\n 2. \\<not> 0 < y \\<Longrightarrow> r \\<le> y", "hence \"\\<exists>z::real. 0<z \\<and> z<1\""], ["proof (prove)\nusing this:\n  0 < 1\n\ngoal (1 subgoal):\n 1. \\<exists>z>0. z < 1", "by (rule dense)"], ["proof (state)\nthis:\n  \\<exists>z>0. z < 1\n\ngoal (2 subgoals):\n 1. 0 < y \\<Longrightarrow> r \\<le> y\n 2. \\<not> 0 < y \\<Longrightarrow> r \\<le> y", "then"], ["proof (chain)\npicking this:\n  \\<exists>z>0. z < 1", "obtain z::real where 0: \"0<z\" and 1: \"z<1\""], ["proof (prove)\nusing this:\n  \\<exists>z>0. z < 1\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>0 < z; z < 1\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fast"], ["proof (state)\nthis:\n  0 < z\n  z < 1\n\ngoal (2 subgoals):\n 1. 0 < y \\<Longrightarrow> r \\<le> y\n 2. \\<not> 0 < y \\<Longrightarrow> r \\<le> y", "with zr"], ["proof (chain)\npicking this:\n  \\<lbrakk>0 < ?z; ?z < 1\\<rbrakk> \\<Longrightarrow> ?z * r \\<le> y\n  0 < z\n  z < 1", "have a: \"z*r \\<le> y\""], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < ?z; ?z < 1\\<rbrakk> \\<Longrightarrow> ?z * r \\<le> y\n  0 < z\n  z < 1\n\ngoal (1 subgoal):\n 1. z * r \\<le> y", "by simp"], ["proof (state)\nthis:\n  z * r \\<le> y\n\ngoal (2 subgoals):\n 1. 0 < y \\<Longrightarrow> r \\<le> y\n 2. \\<not> 0 < y \\<Longrightarrow> r \\<le> y", "also"], ["proof (state)\nthis:\n  z * r \\<le> y\n\ngoal (2 subgoals):\n 1. 0 < y \\<Longrightarrow> r \\<le> y\n 2. \\<not> 0 < y \\<Longrightarrow> r \\<le> y", "from False"], ["proof (chain)\npicking this:\n  \\<not> 0 < y", "have \"y\\<le>0\""], ["proof (prove)\nusing this:\n  \\<not> 0 < y\n\ngoal (1 subgoal):\n 1. y \\<le> 0", "by simp"], ["proof (state)\nthis:\n  y \\<le> 0\n\ngoal (2 subgoals):\n 1. 0 < y \\<Longrightarrow> r \\<le> y\n 2. \\<not> 0 < y \\<Longrightarrow> r \\<le> y", "with a"], ["proof (chain)\npicking this:\n  z * r \\<le> y\n  y \\<le> 0", "have \"z*r \\<le> 0\""], ["proof (prove)\nusing this:\n  z * r \\<le> y\n  y \\<le> 0\n\ngoal (1 subgoal):\n 1. z * r \\<le> 0", "by simp"], ["proof (state)\nthis:\n  z * r \\<le> 0\n\ngoal (2 subgoals):\n 1. 0 < y \\<Longrightarrow> r \\<le> y\n 2. \\<not> 0 < y \\<Longrightarrow> r \\<le> y", "with 0 1"], ["proof (chain)\npicking this:\n  0 < z\n  z < 1\n  z * r \\<le> 0", "have z1: \"z\\<le>1\" and r0: \"r\\<le>0\""], ["proof (prove)\nusing this:\n  0 < z\n  z < 1\n  z * r \\<le> 0\n\ngoal (1 subgoal):\n 1. z \\<le> 1 &&& r \\<le> 0", "by (simp_all add: mult_le_0_iff)"], ["proof (state)\nthis:\n  z \\<le> 1\n  r \\<le> 0\n\ngoal (2 subgoals):\n 1. 0 < y \\<Longrightarrow> r \\<le> y\n 2. \\<not> 0 < y \\<Longrightarrow> r \\<le> y", "hence \"1*r \\<le> z*r\""], ["proof (prove)\nusing this:\n  z \\<le> 1\n  r \\<le> 0\n\ngoal (1 subgoal):\n 1. 1 * r \\<le> z * r", "by (rule mult_right_mono_neg)"], ["proof (state)\nthis:\n  1 * r \\<le> z * r\n\ngoal (2 subgoals):\n 1. 0 < y \\<Longrightarrow> r \\<le> y\n 2. \\<not> 0 < y \\<Longrightarrow> r \\<le> y", "ultimately"], ["proof (chain)\npicking this:\n  z * r \\<le> y\n  1 * r \\<le> z * r", "show \"r\\<le>y\""], ["proof (prove)\nusing this:\n  z * r \\<le> y\n  1 * r \\<le> z * r\n\ngoal (1 subgoal):\n 1. r \\<le> y", "by simp"], ["proof (state)\nthis:\n  r \\<le> y\n\ngoal (1 subgoal):\n 1. 0 < y \\<Longrightarrow> r \\<le> y", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. 0 < y \\<Longrightarrow> r \\<le> y", "case True"], ["proof (state)\nthis:\n  0 < y\n\ngoal (1 subgoal):\n 1. 0 < y \\<Longrightarrow> r \\<le> y", "{"], ["proof (state)\nthis:\n  0 < y\n\ngoal (1 subgoal):\n 1. 0 < y \\<Longrightarrow> r \\<le> y", "assume yr: \"y < r\""], ["proof (state)\nthis:\n  y < r\n\ngoal (1 subgoal):\n 1. 0 < y \\<Longrightarrow> r \\<le> y", "then"], ["proof (chain)\npicking this:\n  y < r", "have \"\\<exists>q. y<q \\<and> q<r\""], ["proof (prove)\nusing this:\n  y < r\n\ngoal (1 subgoal):\n 1. \\<exists>q>y. q < r", "by (rule dense)"], ["proof (state)\nthis:\n  \\<exists>q>y. q < r\n\ngoal (1 subgoal):\n 1. 0 < y \\<Longrightarrow> r \\<le> y", "then"], ["proof (chain)\npicking this:\n  \\<exists>q>y. q < r", "obtain q where yq: \"y<q\" and q: \"q<r\""], ["proof (prove)\nusing this:\n  \\<exists>q>y. q < r\n\ngoal (1 subgoal):\n 1. (\\<And>q.\n        \\<lbrakk>y < q; q < r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fast"], ["proof (state)\nthis:\n  y < q\n  q < r\n\ngoal (1 subgoal):\n 1. 0 < y \\<Longrightarrow> r \\<le> y", "from yr True"], ["proof (chain)\npicking this:\n  y < r\n  0 < y", "have r0: \"0<r\""], ["proof (prove)\nusing this:\n  y < r\n  0 < y\n\ngoal (1 subgoal):\n 1. 0 < r", "by simp"], ["proof (state)\nthis:\n  0 < r\n\ngoal (1 subgoal):\n 1. 0 < y \\<Longrightarrow> r \\<le> y", "with q"], ["proof (chain)\npicking this:\n  q < r\n  0 < r", "have \"q/r < 1\""], ["proof (prove)\nusing this:\n  q < r\n  0 < r\n\ngoal (1 subgoal):\n 1. q / r < 1", "by (simp add: pos_divide_less_eq)"], ["proof (state)\nthis:\n  q / r < 1\n\ngoal (1 subgoal):\n 1. 0 < y \\<Longrightarrow> r \\<le> y", "also"], ["proof (state)\nthis:\n  q / r < 1\n\ngoal (1 subgoal):\n 1. 0 < y \\<Longrightarrow> r \\<le> y", "from True yq r0"], ["proof (chain)\npicking this:\n  0 < y\n  y < q\n  0 < r", "have \"0<q/r\""], ["proof (prove)\nusing this:\n  0 < y\n  y < q\n  0 < r\n\ngoal (1 subgoal):\n 1. 0 < q / r", "by (simp add: zero_less_divide_iff)"], ["proof (state)\nthis:\n  0 < q / r\n\ngoal (1 subgoal):\n 1. 0 < y \\<Longrightarrow> r \\<le> y", "ultimately"], ["proof (chain)\npicking this:\n  q / r < 1\n  0 < q / r", "have \"(q/r)*r\\<le>y\""], ["proof (prove)\nusing this:\n  q / r < 1\n  0 < q / r\n\ngoal (1 subgoal):\n 1. q / r * r \\<le> y", "using zr"], ["proof (prove)\nusing this:\n  q / r < 1\n  0 < q / r\n  \\<lbrakk>0 < ?z; ?z < 1\\<rbrakk> \\<Longrightarrow> ?z * r \\<le> y\n\ngoal (1 subgoal):\n 1. q / r * r \\<le> y", "by force"], ["proof (state)\nthis:\n  q / r * r \\<le> y\n\ngoal (1 subgoal):\n 1. 0 < y \\<Longrightarrow> r \\<le> y", "with r0"], ["proof (chain)\npicking this:\n  0 < r\n  q / r * r \\<le> y", "have \"q\\<le>y\""], ["proof (prove)\nusing this:\n  0 < r\n  q / r * r \\<le> y\n\ngoal (1 subgoal):\n 1. q \\<le> y", "by simp"], ["proof (state)\nthis:\n  q \\<le> y\n\ngoal (1 subgoal):\n 1. 0 < y \\<Longrightarrow> r \\<le> y", "with yq"], ["proof (chain)\npicking this:\n  y < q\n  q \\<le> y", "have False"], ["proof (prove)\nusing this:\n  y < q\n  q \\<le> y\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. 0 < y \\<Longrightarrow> r \\<le> y", "}"], ["proof (state)\nthis:\n  y < r \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. 0 < y \\<Longrightarrow> r \\<le> y", "thus ?thesis"], ["proof (prove)\nusing this:\n  y < r \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. r \\<le> y", "by force"], ["proof (state)\nthis:\n  r \\<le> y\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "lemma sfis_mon_conv_mono: \n  assumes uf: \"u\\<up>f\" and xu: \"\\<And>n. x n \\<in> sfis (u n) M\" and xy: \"x\\<up>y\"\n    and sr: \"r \\<in> sfis s M\" and sf: \"s \\<le> f\" and ms: \"measure_space M\"\n  shows \"r \\<le> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<le> y", "(*This is Satz 11.1 in Bauer*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<le> y", "using sr"], ["proof (prove)\nusing this:\n  r \\<in> sfis s M\n\ngoal (1 subgoal):\n 1. r \\<le> y", "proof cases"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "case (base a A S)"], ["proof (state)\nthis:\n  r = (\\<Sum>i\\<in>S. a i * Measure.measure M (A i))\n  s = (\\<lambda>t. \\<Sum>i\\<in>S. a i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative a\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "note base_a = this"], ["proof (state)\nthis:\n  r = (\\<Sum>i\\<in>S. a i * Measure.measure M (A i))\n  s = (\\<lambda>t. \\<Sum>i\\<in>S. a i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative a\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "{"], ["proof (state)\nthis:\n  r = (\\<Sum>i\\<in>S. a i * Measure.measure M (A i))\n  s = (\\<lambda>t. \\<Sum>i\\<in>S. a i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative a\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "fix z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "assume znn: \"0<(z::real)\" and z1: \"z<1\""], ["proof (state)\nthis:\n  0 < z\n  z < 1\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "define B where \"B n = {w. z*s w \\<le> u n w}\" for n"], ["proof (state)\nthis:\n  B ?n = {w. z * s w \\<le> u ?n w}\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "{"], ["proof (state)\nthis:\n  B ?n = {w. z * s w \\<le> u ?n w}\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "note ms"], ["proof (state)\nthis:\n  measure_space M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "also"], ["proof (state)\nthis:\n  measure_space M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "from xu"], ["proof (chain)\npicking this:\n  x ?n \\<in> sfis (u ?n) M", "have xu: \"x n \\<in> sfis (u n) M\""], ["proof (prove)\nusing this:\n  x ?n \\<in> sfis (u ?n) M\n\ngoal (1 subgoal):\n 1. x n \\<in> sfis (u n) M", "."], ["proof (state)\nthis:\n  x n \\<in> sfis (u n) M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "hence nnu: \"nonnegative (u n)\""], ["proof (prove)\nusing this:\n  x n \\<in> sfis (u n) M\n\ngoal (1 subgoal):\n 1. nonnegative (u n)", "by (rule sfis_nn)"], ["proof (state)\nthis:\n  nonnegative (u n)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "from ms xu"], ["proof (chain)\npicking this:\n  measure_space M\n  x n \\<in> sfis (u n) M", "have \"u n \\<in> rv M\""], ["proof (prove)\nusing this:\n  measure_space M\n  x n \\<in> sfis (u n) M\n\ngoal (1 subgoal):\n 1. u n \\<in> rv M", "by (rule sfis_rv)"], ["proof (state)\nthis:\n  u n \\<in> rv M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "moreover"], ["proof (state)\nthis:\n  u n \\<in> rv M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "from ms sr"], ["proof (chain)\npicking this:\n  measure_space M\n  r \\<in> sfis s M", "have \"s \\<in> rv M\""], ["proof (prove)\nusing this:\n  measure_space M\n  r \\<in> sfis s M\n\ngoal (1 subgoal):\n 1. s \\<in> rv M", "by (rule sfis_rv)"], ["proof (state)\nthis:\n  s \\<in> rv M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "with ms"], ["proof (chain)\npicking this:\n  measure_space M\n  s \\<in> rv M", "have \"(\\<lambda>w. z*s w) \\<in> rv M\""], ["proof (prove)\nusing this:\n  measure_space M\n  s \\<in> rv M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w. z * s w) \\<in> rv M", "by (simp add: const_rv rv_times_rv)"], ["proof (state)\nthis:\n  (\\<lambda>w. z * s w) \\<in> rv M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "ultimately"], ["proof (chain)\npicking this:\n  measure_space M\n  u n \\<in> rv M\n  (\\<lambda>w. z * s w) \\<in> rv M", "have \"B n \\<in> measurable_sets M\""], ["proof (prove)\nusing this:\n  measure_space M\n  u n \\<in> rv M\n  (\\<lambda>w. z * s w) \\<in> rv M\n\ngoal (1 subgoal):\n 1. B n \\<in> measurable_sets M", "by (simp add: B_def rv_le_rv_measurable)"], ["proof (state)\nthis:\n  B n \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "with ms base"], ["proof (chain)\npicking this:\n  measure_space M\n  r = (\\<Sum>i\\<in>S. a i * Measure.measure M (A i))\n  s = (\\<lambda>t. \\<Sum>i\\<in>S. a i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative a\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n  B n \\<in> measurable_sets M", "have ABms: \"\\<forall>i\\<in>S. (A i \\<inter> B n) \\<in> measurable_sets M\""], ["proof (prove)\nusing this:\n  measure_space M\n  r = (\\<Sum>i\\<in>S. a i * Measure.measure M (A i))\n  s = (\\<lambda>t. \\<Sum>i\\<in>S. a i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative a\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n  B n \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>S. A i \\<inter> B n \\<in> measurable_sets M", "by (auto simp add: measure_space_def sigma_algebra_inter)"], ["proof (state)\nthis:\n  \\<forall>i\\<in>S. A i \\<inter> B n \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "from xu"], ["proof (chain)\npicking this:\n  x n \\<in> sfis (u n) M", "have \"z*(\\<Sum>i\\<in>S. a i * measure M (A i \\<inter> B n)) \\<le> x n\""], ["proof (prove)\nusing this:\n  x n \\<in> sfis (u n) M\n\ngoal (1 subgoal):\n 1. z * (\\<Sum>i\\<in>S. a i * Measure.measure M (A i \\<inter> B n))\n    \\<le> x n", "proof (cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa Aa Sa.\n       \\<lbrakk>x n = (\\<Sum>i\\<in>Sa. xa i * Measure.measure M (Aa i));\n        u n = (\\<lambda>t. \\<Sum>i\\<in>Sa. xa i * \\<chi> (Aa i) t);\n        \\<forall>i\\<in>Sa. Aa i \\<in> measurable_sets M; nonnegative xa;\n        finite Sa;\n        \\<forall>i\\<in>Sa.\n           \\<forall>j\\<in>Sa.\n              i \\<noteq> j \\<longrightarrow> Aa i \\<inter> Aa j = {};\n        \\<Union> (Aa ` Sa) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z *\n                         (\\<Sum>i\\<in>S.\n                            a i * Measure.measure M (A i \\<inter> B n))\n                         \\<le> x n", "case (base c C R)"], ["proof (state)\nthis:\n  x n = (\\<Sum>i\\<in>R. c i * Measure.measure M (C i))\n  u n = (\\<lambda>t. \\<Sum>i\\<in>R. c i * \\<chi> (C i) t)\n  \\<forall>i\\<in>R. C i \\<in> measurable_sets M\n  nonnegative c\n  finite R\n  \\<forall>i\\<in>R.\n     \\<forall>j\\<in>R. i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}\n  \\<Union> (C ` R) = UNIV\n\ngoal (1 subgoal):\n 1. \\<And>xa Aa Sa.\n       \\<lbrakk>x n = (\\<Sum>i\\<in>Sa. xa i * Measure.measure M (Aa i));\n        u n = (\\<lambda>t. \\<Sum>i\\<in>Sa. xa i * \\<chi> (Aa i) t);\n        \\<forall>i\\<in>Sa. Aa i \\<in> measurable_sets M; nonnegative xa;\n        finite Sa;\n        \\<forall>i\\<in>Sa.\n           \\<forall>j\\<in>Sa.\n              i \\<noteq> j \\<longrightarrow> Aa i \\<inter> Aa j = {};\n        \\<Union> (Aa ` Sa) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z *\n                         (\\<Sum>i\\<in>S.\n                            a i * Measure.measure M (A i \\<inter> B n))\n                         \\<le> x n", "{"], ["proof (state)\nthis:\n  x n = (\\<Sum>i\\<in>R. c i * Measure.measure M (C i))\n  u n = (\\<lambda>t. \\<Sum>i\\<in>R. c i * \\<chi> (C i) t)\n  \\<forall>i\\<in>R. C i \\<in> measurable_sets M\n  nonnegative c\n  finite R\n  \\<forall>i\\<in>R.\n     \\<forall>j\\<in>R. i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}\n  \\<Union> (C ` R) = UNIV\n\ngoal (1 subgoal):\n 1. \\<And>xa Aa Sa.\n       \\<lbrakk>x n = (\\<Sum>i\\<in>Sa. xa i * Measure.measure M (Aa i));\n        u n = (\\<lambda>t. \\<Sum>i\\<in>Sa. xa i * \\<chi> (Aa i) t);\n        \\<forall>i\\<in>Sa. Aa i \\<in> measurable_sets M; nonnegative xa;\n        finite Sa;\n        \\<forall>i\\<in>Sa.\n           \\<forall>j\\<in>Sa.\n              i \\<noteq> j \\<longrightarrow> Aa i \\<inter> Aa j = {};\n        \\<Union> (Aa ` Sa) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z *\n                         (\\<Sum>i\\<in>S.\n                            a i * Measure.measure M (A i \\<inter> B n))\n                         \\<le> x n", "fix t"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa Aa Sa.\n       \\<lbrakk>x n = (\\<Sum>i\\<in>Sa. xa i * Measure.measure M (Aa i));\n        u n = (\\<lambda>t. \\<Sum>i\\<in>Sa. xa i * \\<chi> (Aa i) t);\n        \\<forall>i\\<in>Sa. Aa i \\<in> measurable_sets M; nonnegative xa;\n        finite Sa;\n        \\<forall>i\\<in>Sa.\n           \\<forall>j\\<in>Sa.\n              i \\<noteq> j \\<longrightarrow> Aa i \\<inter> Aa j = {};\n        \\<Union> (Aa ` Sa) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z *\n                         (\\<Sum>i\\<in>S.\n                            a i * Measure.measure M (A i \\<inter> B n))\n                         \\<le> x n", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa Aa Sa.\n       \\<lbrakk>x n = (\\<Sum>i\\<in>Sa. xa i * Measure.measure M (Aa i));\n        u n = (\\<lambda>t. \\<Sum>i\\<in>Sa. xa i * \\<chi> (Aa i) t);\n        \\<forall>i\\<in>Sa. Aa i \\<in> measurable_sets M; nonnegative xa;\n        finite Sa;\n        \\<forall>i\\<in>Sa.\n           \\<forall>j\\<in>Sa.\n              i \\<noteq> j \\<longrightarrow> Aa i \\<inter> Aa j = {};\n        \\<Union> (Aa ` Sa) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z *\n                         (\\<Sum>i\\<in>S.\n                            a i * Measure.measure M (A i \\<inter> B n))\n                         \\<le> x n", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa Aa Sa.\n       \\<lbrakk>x n = (\\<Sum>i\\<in>Sa. xa i * Measure.measure M (Aa i));\n        u n = (\\<lambda>t. \\<Sum>i\\<in>Sa. xa i * \\<chi> (Aa i) t);\n        \\<forall>i\\<in>Sa. Aa i \\<in> measurable_sets M; nonnegative xa;\n        finite Sa;\n        \\<forall>i\\<in>Sa.\n           \\<forall>j\\<in>Sa.\n              i \\<noteq> j \\<longrightarrow> Aa i \\<inter> Aa j = {};\n        \\<Union> (Aa ` Sa) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z *\n                         (\\<Sum>i\\<in>S.\n                            a i * Measure.measure M (A i \\<inter> B n))\n                         \\<le> x n", "have \"S=S\" and \"a i * \\<chi> (A i \\<inter> B n) t = \\<chi> (B n) t * (a i * \\<chi> (A i) t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S = S &&&\n    a i * \\<chi> (A i \\<inter> B n) t =\n    \\<chi> (B n) t * (a i * \\<chi> (A i) t)", "by (auto simp add: characteristic_function_def)"], ["proof (state)\nthis:\n  S = S\n  a i * \\<chi> (A i \\<inter> B n) t =\n  \\<chi> (B n) t * (a i * \\<chi> (A i) t)\n\ngoal (1 subgoal):\n 1. \\<And>xa Aa Sa.\n       \\<lbrakk>x n = (\\<Sum>i\\<in>Sa. xa i * Measure.measure M (Aa i));\n        u n = (\\<lambda>t. \\<Sum>i\\<in>Sa. xa i * \\<chi> (Aa i) t);\n        \\<forall>i\\<in>Sa. Aa i \\<in> measurable_sets M; nonnegative xa;\n        finite Sa;\n        \\<forall>i\\<in>Sa.\n           \\<forall>j\\<in>Sa.\n              i \\<noteq> j \\<longrightarrow> Aa i \\<inter> Aa j = {};\n        \\<Union> (Aa ` Sa) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z *\n                         (\\<Sum>i\\<in>S.\n                            a i * Measure.measure M (A i \\<inter> B n))\n                         \\<le> x n", "}"], ["proof (state)\nthis:\n  S = S\n  a ?i2 * \\<chi> (A ?i2 \\<inter> B n) t =\n  \\<chi> (B n) t * (a ?i2 * \\<chi> (A ?i2) t)\n\ngoal (1 subgoal):\n 1. \\<And>xa Aa Sa.\n       \\<lbrakk>x n = (\\<Sum>i\\<in>Sa. xa i * Measure.measure M (Aa i));\n        u n = (\\<lambda>t. \\<Sum>i\\<in>Sa. xa i * \\<chi> (Aa i) t);\n        \\<forall>i\\<in>Sa. Aa i \\<in> measurable_sets M; nonnegative xa;\n        finite Sa;\n        \\<forall>i\\<in>Sa.\n           \\<forall>j\\<in>Sa.\n              i \\<noteq> j \\<longrightarrow> Aa i \\<inter> Aa j = {};\n        \\<Union> (Aa ` Sa) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z *\n                         (\\<Sum>i\\<in>S.\n                            a i * Measure.measure M (A i \\<inter> B n))\n                         \\<le> x n", "hence \"(\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) t) = \n            (\\<Sum>i\\<in>S. \\<chi> (B n) t * (a i * \\<chi> (A i) t))\""], ["proof (prove)\nusing this:\n  S = S\n  a ?i2 * \\<chi> (A ?i2 \\<inter> B n) t =\n  \\<chi> (B n) t * (a ?i2 * \\<chi> (A ?i2) t)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) t) =\n    (\\<Sum>i\\<in>S. \\<chi> (B n) t * (a i * \\<chi> (A i) t))", "by (rule sum.cong)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) t) =\n  (\\<Sum>i\\<in>S. \\<chi> (B n) t * (a i * \\<chi> (A i) t))\n\ngoal (1 subgoal):\n 1. \\<And>xa Aa Sa.\n       \\<lbrakk>x n = (\\<Sum>i\\<in>Sa. xa i * Measure.measure M (Aa i));\n        u n = (\\<lambda>t. \\<Sum>i\\<in>Sa. xa i * \\<chi> (Aa i) t);\n        \\<forall>i\\<in>Sa. Aa i \\<in> measurable_sets M; nonnegative xa;\n        finite Sa;\n        \\<forall>i\\<in>Sa.\n           \\<forall>j\\<in>Sa.\n              i \\<noteq> j \\<longrightarrow> Aa i \\<inter> Aa j = {};\n        \\<Union> (Aa ` Sa) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z *\n                         (\\<Sum>i\\<in>S.\n                            a i * Measure.measure M (A i \\<inter> B n))\n                         \\<le> x n", "hence \"z*(\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) t) = \n            z*(\\<Sum>i\\<in>S. \\<chi> (B n) t * (a i * \\<chi> (A i) t))\""], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) t) =\n  (\\<Sum>i\\<in>S. \\<chi> (B n) t * (a i * \\<chi> (A i) t))\n\ngoal (1 subgoal):\n 1. z * (\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) t) =\n    z * (\\<Sum>i\\<in>S. \\<chi> (B n) t * (a i * \\<chi> (A i) t))", "by simp"], ["proof (state)\nthis:\n  z * (\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) t) =\n  z * (\\<Sum>i\\<in>S. \\<chi> (B n) t * (a i * \\<chi> (A i) t))\n\ngoal (1 subgoal):\n 1. \\<And>xa Aa Sa.\n       \\<lbrakk>x n = (\\<Sum>i\\<in>Sa. xa i * Measure.measure M (Aa i));\n        u n = (\\<lambda>t. \\<Sum>i\\<in>Sa. xa i * \\<chi> (Aa i) t);\n        \\<forall>i\\<in>Sa. Aa i \\<in> measurable_sets M; nonnegative xa;\n        finite Sa;\n        \\<forall>i\\<in>Sa.\n           \\<forall>j\\<in>Sa.\n              i \\<noteq> j \\<longrightarrow> Aa i \\<inter> Aa j = {};\n        \\<Union> (Aa ` Sa) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z *\n                         (\\<Sum>i\\<in>S.\n                            a i * Measure.measure M (A i \\<inter> B n))\n                         \\<le> x n", "also"], ["proof (state)\nthis:\n  z * (\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) t) =\n  z * (\\<Sum>i\\<in>S. \\<chi> (B n) t * (a i * \\<chi> (A i) t))\n\ngoal (1 subgoal):\n 1. \\<And>xa Aa Sa.\n       \\<lbrakk>x n = (\\<Sum>i\\<in>Sa. xa i * Measure.measure M (Aa i));\n        u n = (\\<lambda>t. \\<Sum>i\\<in>Sa. xa i * \\<chi> (Aa i) t);\n        \\<forall>i\\<in>Sa. Aa i \\<in> measurable_sets M; nonnegative xa;\n        finite Sa;\n        \\<forall>i\\<in>Sa.\n           \\<forall>j\\<in>Sa.\n              i \\<noteq> j \\<longrightarrow> Aa i \\<inter> Aa j = {};\n        \\<Union> (Aa ` Sa) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z *\n                         (\\<Sum>i\\<in>S.\n                            a i * Measure.measure M (A i \\<inter> B n))\n                         \\<le> x n", "have \"\\<dots> = z * \\<chi> (B n) t * (\\<Sum>i\\<in>S. a i * \\<chi> (A i) t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z * (\\<Sum>i\\<in>S. \\<chi> (B n) t * (a i * \\<chi> (A i) t)) =\n    z * \\<chi> (B n) t * (\\<Sum>i\\<in>S. a i * \\<chi> (A i) t)", "by (simp add: sum_distrib_left[THEN sym])"], ["proof (state)\nthis:\n  z * (\\<Sum>i\\<in>S. \\<chi> (B n) t * (a i * \\<chi> (A i) t)) =\n  z * \\<chi> (B n) t * (\\<Sum>i\\<in>S. a i * \\<chi> (A i) t)\n\ngoal (1 subgoal):\n 1. \\<And>xa Aa Sa.\n       \\<lbrakk>x n = (\\<Sum>i\\<in>Sa. xa i * Measure.measure M (Aa i));\n        u n = (\\<lambda>t. \\<Sum>i\\<in>Sa. xa i * \\<chi> (Aa i) t);\n        \\<forall>i\\<in>Sa. Aa i \\<in> measurable_sets M; nonnegative xa;\n        finite Sa;\n        \\<forall>i\\<in>Sa.\n           \\<forall>j\\<in>Sa.\n              i \\<noteq> j \\<longrightarrow> Aa i \\<inter> Aa j = {};\n        \\<Union> (Aa ` Sa) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z *\n                         (\\<Sum>i\\<in>S.\n                            a i * Measure.measure M (A i \\<inter> B n))\n                         \\<le> x n", "also"], ["proof (state)\nthis:\n  z * (\\<Sum>i\\<in>S. \\<chi> (B n) t * (a i * \\<chi> (A i) t)) =\n  z * \\<chi> (B n) t * (\\<Sum>i\\<in>S. a i * \\<chi> (A i) t)\n\ngoal (1 subgoal):\n 1. \\<And>xa Aa Sa.\n       \\<lbrakk>x n = (\\<Sum>i\\<in>Sa. xa i * Measure.measure M (Aa i));\n        u n = (\\<lambda>t. \\<Sum>i\\<in>Sa. xa i * \\<chi> (Aa i) t);\n        \\<forall>i\\<in>Sa. Aa i \\<in> measurable_sets M; nonnegative xa;\n        finite Sa;\n        \\<forall>i\\<in>Sa.\n           \\<forall>j\\<in>Sa.\n              i \\<noteq> j \\<longrightarrow> Aa i \\<inter> Aa j = {};\n        \\<Union> (Aa ` Sa) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z *\n                         (\\<Sum>i\\<in>S.\n                            a i * Measure.measure M (A i \\<inter> B n))\n                         \\<le> x n", "from sr"], ["proof (chain)\npicking this:\n  r \\<in> sfis s M", "have \"nonnegative s\""], ["proof (prove)\nusing this:\n  r \\<in> sfis s M\n\ngoal (1 subgoal):\n 1. nonnegative s", "by (simp add: sfis_nn)"], ["proof (state)\nthis:\n  nonnegative s\n\ngoal (1 subgoal):\n 1. \\<And>xa Aa Sa.\n       \\<lbrakk>x n = (\\<Sum>i\\<in>Sa. xa i * Measure.measure M (Aa i));\n        u n = (\\<lambda>t. \\<Sum>i\\<in>Sa. xa i * \\<chi> (Aa i) t);\n        \\<forall>i\\<in>Sa. Aa i \\<in> measurable_sets M; nonnegative xa;\n        finite Sa;\n        \\<forall>i\\<in>Sa.\n           \\<forall>j\\<in>Sa.\n              i \\<noteq> j \\<longrightarrow> Aa i \\<inter> Aa j = {};\n        \\<Union> (Aa ` Sa) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z *\n                         (\\<Sum>i\\<in>S.\n                            a i * Measure.measure M (A i \\<inter> B n))\n                         \\<le> x n", "with nnu B_def base_a"], ["proof (chain)\npicking this:\n  nonnegative (u n)\n  B ?n = {w. z * s w \\<le> u ?n w}\n  r = (\\<Sum>i\\<in>S. a i * Measure.measure M (A i))\n  s = (\\<lambda>t. \\<Sum>i\\<in>S. a i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative a\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n  nonnegative s", "have \"z * \\<chi> (B n) t * (\\<Sum>i\\<in>S. a i * \\<chi> (A i) t) \\<le> u n t\""], ["proof (prove)\nusing this:\n  nonnegative (u n)\n  B ?n = {w. z * s w \\<le> u ?n w}\n  r = (\\<Sum>i\\<in>S. a i * Measure.measure M (A i))\n  s = (\\<lambda>t. \\<Sum>i\\<in>S. a i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative a\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n  nonnegative s\n\ngoal (1 subgoal):\n 1. z * \\<chi> (B n) t * (\\<Sum>i\\<in>S. a i * \\<chi> (A i) t) \\<le> u n t", "by (auto simp add: characteristic_function_def nonnegative_def)"], ["proof (state)\nthis:\n  z * \\<chi> (B n) t * (\\<Sum>i\\<in>S. a i * \\<chi> (A i) t) \\<le> u n t\n\ngoal (1 subgoal):\n 1. \\<And>xa Aa Sa.\n       \\<lbrakk>x n = (\\<Sum>i\\<in>Sa. xa i * Measure.measure M (Aa i));\n        u n = (\\<lambda>t. \\<Sum>i\\<in>Sa. xa i * \\<chi> (Aa i) t);\n        \\<forall>i\\<in>Sa. Aa i \\<in> measurable_sets M; nonnegative xa;\n        finite Sa;\n        \\<forall>i\\<in>Sa.\n           \\<forall>j\\<in>Sa.\n              i \\<noteq> j \\<longrightarrow> Aa i \\<inter> Aa j = {};\n        \\<Union> (Aa ` Sa) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z *\n                         (\\<Sum>i\\<in>S.\n                            a i * Measure.measure M (A i \\<inter> B n))\n                         \\<le> x n", "finally"], ["proof (chain)\npicking this:\n  z * (\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) t) \\<le> u n t", "have \"z*(\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) t) \\<le> u n t\""], ["proof (prove)\nusing this:\n  z * (\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) t) \\<le> u n t\n\ngoal (1 subgoal):\n 1. z * (\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) t) \\<le> u n t", "."], ["proof (state)\nthis:\n  z * (\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) t) \\<le> u n t\n\ngoal (1 subgoal):\n 1. \\<And>xa Aa Sa.\n       \\<lbrakk>x n = (\\<Sum>i\\<in>Sa. xa i * Measure.measure M (Aa i));\n        u n = (\\<lambda>t. \\<Sum>i\\<in>Sa. xa i * \\<chi> (Aa i) t);\n        \\<forall>i\\<in>Sa. Aa i \\<in> measurable_sets M; nonnegative xa;\n        finite Sa;\n        \\<forall>i\\<in>Sa.\n           \\<forall>j\\<in>Sa.\n              i \\<noteq> j \\<longrightarrow> Aa i \\<inter> Aa j = {};\n        \\<Union> (Aa ` Sa) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z *\n                         (\\<Sum>i\\<in>S.\n                            a i * Measure.measure M (A i \\<inter> B n))\n                         \\<le> x n", "}"], ["proof (state)\nthis:\n  z * (\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) ?t2) \\<le> u n ?t2\n\ngoal (1 subgoal):\n 1. \\<And>xa Aa Sa.\n       \\<lbrakk>x n = (\\<Sum>i\\<in>Sa. xa i * Measure.measure M (Aa i));\n        u n = (\\<lambda>t. \\<Sum>i\\<in>Sa. xa i * \\<chi> (Aa i) t);\n        \\<forall>i\\<in>Sa. Aa i \\<in> measurable_sets M; nonnegative xa;\n        finite Sa;\n        \\<forall>i\\<in>Sa.\n           \\<forall>j\\<in>Sa.\n              i \\<noteq> j \\<longrightarrow> Aa i \\<inter> Aa j = {};\n        \\<Union> (Aa ` Sa) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z *\n                         (\\<Sum>i\\<in>S.\n                            a i * Measure.measure M (A i \\<inter> B n))\n                         \\<le> x n", "also"], ["proof (state)\nthis:\n  z * (\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) ?t2) \\<le> u n ?t2\n\ngoal (1 subgoal):\n 1. \\<And>xa Aa Sa.\n       \\<lbrakk>x n = (\\<Sum>i\\<in>Sa. xa i * Measure.measure M (Aa i));\n        u n = (\\<lambda>t. \\<Sum>i\\<in>Sa. xa i * \\<chi> (Aa i) t);\n        \\<forall>i\\<in>Sa. Aa i \\<in> measurable_sets M; nonnegative xa;\n        finite Sa;\n        \\<forall>i\\<in>Sa.\n           \\<forall>j\\<in>Sa.\n              i \\<noteq> j \\<longrightarrow> Aa i \\<inter> Aa j = {};\n        \\<Union> (Aa ` Sa) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z *\n                         (\\<Sum>i\\<in>S.\n                            a i * Measure.measure M (A i \\<inter> B n))\n                         \\<le> x n", "from ms base_a znn ABms"], ["proof (chain)\npicking this:\n  measure_space M\n  r = (\\<Sum>i\\<in>S. a i * Measure.measure M (A i))\n  s = (\\<lambda>t. \\<Sum>i\\<in>S. a i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative a\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n  0 < z\n  \\<forall>i\\<in>S. A i \\<inter> B n \\<in> measurable_sets M", "have\n          \"z*(\\<Sum>i\\<in>S. a i * measure M (A i \\<inter> B n)) \\<in> \n          sfis (\\<lambda>t. z*(\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) t)) M\""], ["proof (prove)\nusing this:\n  measure_space M\n  r = (\\<Sum>i\\<in>S. a i * Measure.measure M (A i))\n  s = (\\<lambda>t. \\<Sum>i\\<in>S. a i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative a\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n  0 < z\n  \\<forall>i\\<in>S. A i \\<inter> B n \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. z * (\\<Sum>i\\<in>S. a i * Measure.measure M (A i \\<inter> B n))\n    \\<in> sfis\n           (\\<lambda>t.\n               z * (\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) t))\n           M", "by (simp add: sfis_intro sfis_times)"], ["proof (state)\nthis:\n  z * (\\<Sum>i\\<in>S. a i * Measure.measure M (A i \\<inter> B n))\n  \\<in> sfis\n         (\\<lambda>t.\n             z * (\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) t))\n         M\n\ngoal (1 subgoal):\n 1. \\<And>xa Aa Sa.\n       \\<lbrakk>x n = (\\<Sum>i\\<in>Sa. xa i * Measure.measure M (Aa i));\n        u n = (\\<lambda>t. \\<Sum>i\\<in>Sa. xa i * \\<chi> (Aa i) t);\n        \\<forall>i\\<in>Sa. Aa i \\<in> measurable_sets M; nonnegative xa;\n        finite Sa;\n        \\<forall>i\\<in>Sa.\n           \\<forall>j\\<in>Sa.\n              i \\<noteq> j \\<longrightarrow> Aa i \\<inter> Aa j = {};\n        \\<Union> (Aa ` Sa) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z *\n                         (\\<Sum>i\\<in>S.\n                            a i * Measure.measure M (A i \\<inter> B n))\n                         \\<le> x n", "moreover"], ["proof (state)\nthis:\n  z * (\\<Sum>i\\<in>S. a i * Measure.measure M (A i \\<inter> B n))\n  \\<in> sfis\n         (\\<lambda>t.\n             z * (\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) t))\n         M\n\ngoal (1 subgoal):\n 1. \\<And>xa Aa Sa.\n       \\<lbrakk>x n = (\\<Sum>i\\<in>Sa. xa i * Measure.measure M (Aa i));\n        u n = (\\<lambda>t. \\<Sum>i\\<in>Sa. xa i * \\<chi> (Aa i) t);\n        \\<forall>i\\<in>Sa. Aa i \\<in> measurable_sets M; nonnegative xa;\n        finite Sa;\n        \\<forall>i\\<in>Sa.\n           \\<forall>j\\<in>Sa.\n              i \\<noteq> j \\<longrightarrow> Aa i \\<inter> Aa j = {};\n        \\<Union> (Aa ` Sa) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z *\n                         (\\<Sum>i\\<in>S.\n                            a i * Measure.measure M (A i \\<inter> B n))\n                         \\<le> x n", "note xu ms"], ["proof (state)\nthis:\n  x n \\<in> sfis (u n) M\n  measure_space M\n\ngoal (1 subgoal):\n 1. \\<And>xa Aa Sa.\n       \\<lbrakk>x n = (\\<Sum>i\\<in>Sa. xa i * Measure.measure M (Aa i));\n        u n = (\\<lambda>t. \\<Sum>i\\<in>Sa. xa i * \\<chi> (Aa i) t);\n        \\<forall>i\\<in>Sa. Aa i \\<in> measurable_sets M; nonnegative xa;\n        finite Sa;\n        \\<forall>i\\<in>Sa.\n           \\<forall>j\\<in>Sa.\n              i \\<noteq> j \\<longrightarrow> Aa i \\<inter> Aa j = {};\n        \\<Union> (Aa ` Sa) = UNIV\\<rbrakk>\n       \\<Longrightarrow> z *\n                         (\\<Sum>i\\<in>S.\n                            a i * Measure.measure M (A i \\<inter> B n))\n                         \\<le> x n", "ultimately"], ["proof (chain)\npicking this:\n  z * (\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) ?t2) \\<le> u n ?t2\n  z * (\\<Sum>i\\<in>S. a i * Measure.measure M (A i \\<inter> B n))\n  \\<in> sfis\n         (\\<lambda>t.\n             z * (\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) t))\n         M\n  x n \\<in> sfis (u n) M\n  measure_space M", "show ?thesis"], ["proof (prove)\nusing this:\n  z * (\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) ?t2) \\<le> u n ?t2\n  z * (\\<Sum>i\\<in>S. a i * Measure.measure M (A i \\<inter> B n))\n  \\<in> sfis\n         (\\<lambda>t.\n             z * (\\<Sum>i\\<in>S. a i * \\<chi> (A i \\<inter> B n) t))\n         M\n  x n \\<in> sfis (u n) M\n  measure_space M\n\ngoal (1 subgoal):\n 1. z * (\\<Sum>i\\<in>S. a i * Measure.measure M (A i \\<inter> B n))\n    \\<le> x n", "by (simp add: sfis_mono le_fun_def)"], ["proof (state)\nthis:\n  z * (\\<Sum>i\\<in>S. a i * Measure.measure M (A i \\<inter> B n)) \\<le> x n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  z * (\\<Sum>i\\<in>S. a i * Measure.measure M (A i \\<inter> B n)) \\<le> x n\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "note this ABms"], ["proof (state)\nthis:\n  z * (\\<Sum>i\\<in>S. a i * Measure.measure M (A i \\<inter> B n)) \\<le> x n\n  \\<forall>i\\<in>S. A i \\<inter> B n \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "}"], ["proof (state)\nthis:\n  z * (\\<Sum>i\\<in>S. a i * Measure.measure M (A i \\<inter> B ?n2))\n  \\<le> x ?n2\n  \\<forall>i\\<in>S. A i \\<inter> B ?n2 \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "hence 1: \"\\<And>n. z * (\\<Sum>i\\<in>S. a i * measure M (A i \\<inter> B n)) \\<le> x n\"\n      and ABms: \"\\<And>n. \\<forall>i\\<in>S. A i \\<inter> B n \\<in> measurable_sets M\""], ["proof (prove)\nusing this:\n  z * (\\<Sum>i\\<in>S. a i * Measure.measure M (A i \\<inter> B ?n2))\n  \\<le> x ?n2\n  \\<forall>i\\<in>S. A i \\<inter> B ?n2 \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        z * (\\<Sum>i\\<in>S. a i * Measure.measure M (A i \\<inter> B n))\n        \\<le> x n) &&&\n    (\\<And>n. \\<forall>i\\<in>S. A i \\<inter> B n \\<in> measurable_sets M)", "."], ["proof (state)\nthis:\n  z * (\\<Sum>i\\<in>S. a i * Measure.measure M (A i \\<inter> B ?n))\n  \\<le> x ?n\n  \\<forall>i\\<in>S. A i \\<inter> B ?n \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "have Bun: \"(\\<lambda>n. B n)\\<up>UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B\\<up>UNIV", "proof (unfold mon_conv_set_def, rule)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<forall>n. B n \\<subseteq> B (Suc n)\n 2. UNIV = \\<Union> (range B)", "{"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<forall>n. B n \\<subseteq> B (Suc n)\n 2. UNIV = \\<Union> (range B)", "fix n"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<forall>n. B n \\<subseteq> B (Suc n)\n 2. UNIV = \\<Union> (range B)", "from uf"], ["proof (chain)\npicking this:\n  u\\<up>f", "have um: \"u n \\<le> u (Suc n)\""], ["proof (prove)\nusing this:\n  u\\<up>f\n\ngoal (1 subgoal):\n 1. u n \\<le> u (Suc n)", "by (simp add: mon_conv_real_fun_def)"], ["proof (state)\nthis:\n  u n \\<le> u (Suc n)\n\ngoal (2 subgoals):\n 1. \\<forall>n. B n \\<subseteq> B (Suc n)\n 2. UNIV = \\<Union> (range B)", "{"], ["proof (state)\nthis:\n  u n \\<le> u (Suc n)\n\ngoal (2 subgoals):\n 1. \\<forall>n. B n \\<subseteq> B (Suc n)\n 2. UNIV = \\<Union> (range B)", "fix w"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<forall>n. B n \\<subseteq> B (Suc n)\n 2. UNIV = \\<Union> (range B)", "assume \"z*s w \\<le> u n w\""], ["proof (state)\nthis:\n  z * s w \\<le> u n w\n\ngoal (2 subgoals):\n 1. \\<forall>n. B n \\<subseteq> B (Suc n)\n 2. UNIV = \\<Union> (range B)", "also"], ["proof (state)\nthis:\n  z * s w \\<le> u n w\n\ngoal (2 subgoals):\n 1. \\<forall>n. B n \\<subseteq> B (Suc n)\n 2. UNIV = \\<Union> (range B)", "from um"], ["proof (chain)\npicking this:\n  u n \\<le> u (Suc n)", "have \"u n w \\<le> u (Suc n) w\""], ["proof (prove)\nusing this:\n  u n \\<le> u (Suc n)\n\ngoal (1 subgoal):\n 1. u n w \\<le> u (Suc n) w", "by (simp add: le_fun_def)"], ["proof (state)\nthis:\n  u n w \\<le> u (Suc n) w\n\ngoal (2 subgoals):\n 1. \\<forall>n. B n \\<subseteq> B (Suc n)\n 2. UNIV = \\<Union> (range B)", "finally"], ["proof (chain)\npicking this:\n  z * s w \\<le> u (Suc n) w", "have \"z*s w \\<le> u (Suc n) w\""], ["proof (prove)\nusing this:\n  z * s w \\<le> u (Suc n) w\n\ngoal (1 subgoal):\n 1. z * s w \\<le> u (Suc n) w", "."], ["proof (state)\nthis:\n  z * s w \\<le> u (Suc n) w\n\ngoal (2 subgoals):\n 1. \\<forall>n. B n \\<subseteq> B (Suc n)\n 2. UNIV = \\<Union> (range B)", "}"], ["proof (state)\nthis:\n  z * s ?w2 \\<le> u n ?w2 \\<Longrightarrow> z * s ?w2 \\<le> u (Suc n) ?w2\n\ngoal (2 subgoals):\n 1. \\<forall>n. B n \\<subseteq> B (Suc n)\n 2. UNIV = \\<Union> (range B)", "hence \"B n \\<le> B (Suc n)\""], ["proof (prove)\nusing this:\n  z * s ?w2 \\<le> u n ?w2 \\<Longrightarrow> z * s ?w2 \\<le> u (Suc n) ?w2\n\ngoal (1 subgoal):\n 1. B n \\<subseteq> B (Suc n)", "by (auto simp add: B_def)"], ["proof (state)\nthis:\n  B n \\<subseteq> B (Suc n)\n\ngoal (2 subgoals):\n 1. \\<forall>n. B n \\<subseteq> B (Suc n)\n 2. UNIV = \\<Union> (range B)", "}"], ["proof (state)\nthis:\n  B ?n2 \\<subseteq> B (Suc ?n2)\n\ngoal (2 subgoals):\n 1. \\<forall>n. B n \\<subseteq> B (Suc n)\n 2. UNIV = \\<Union> (range B)", "thus \" \\<forall>n. B n \\<subseteq> B (Suc n)\""], ["proof (prove)\nusing this:\n  B ?n2 \\<subseteq> B (Suc ?n2)\n\ngoal (1 subgoal):\n 1. \\<forall>n. B n \\<subseteq> B (Suc n)", "by fast"], ["proof (state)\nthis:\n  \\<forall>n. B n \\<subseteq> B (Suc n)\n\ngoal (1 subgoal):\n 1. UNIV = \\<Union> (range B)", "{"], ["proof (state)\nthis:\n  \\<forall>n. B n \\<subseteq> B (Suc n)\n\ngoal (1 subgoal):\n 1. UNIV = \\<Union> (range B)", "fix t"], ["proof (state)\ngoal (1 subgoal):\n 1. UNIV = \\<Union> (range B)", "have \"\\<exists>n. z*s t \\<le> u n t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>n. z * s t \\<le> u n t", "proof (cases \"s t = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. s t = 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t\n 2. s t \\<noteq> 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t", "case True"], ["proof (state)\nthis:\n  s t = 0\n\ngoal (2 subgoals):\n 1. s t = 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t\n 2. s t \\<noteq> 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t", "fix n"], ["proof (state)\ngoal (2 subgoals):\n 1. s t = 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t\n 2. s t \\<noteq> 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t", "from True"], ["proof (chain)\npicking this:\n  s t = 0", "have \"z*s t = 0\""], ["proof (prove)\nusing this:\n  s t = 0\n\ngoal (1 subgoal):\n 1. z * s t = 0", "by simp"], ["proof (state)\nthis:\n  z * s t = 0\n\ngoal (2 subgoals):\n 1. s t = 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t\n 2. s t \\<noteq> 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t", "also"], ["proof (state)\nthis:\n  z * s t = 0\n\ngoal (2 subgoals):\n 1. s t = 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t\n 2. s t \\<noteq> 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t", "from xu"], ["proof (chain)\npicking this:\n  x ?n \\<in> sfis (u ?n) M", "have \"nonnegative (u n)\""], ["proof (prove)\nusing this:\n  x ?n \\<in> sfis (u ?n) M\n\ngoal (1 subgoal):\n 1. nonnegative (u n)", "by (rule sfis_nn)"], ["proof (state)\nthis:\n  nonnegative (u n)\n\ngoal (2 subgoals):\n 1. s t = 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t\n 2. s t \\<noteq> 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t", "hence \"0 \\<le> u n t\""], ["proof (prove)\nusing this:\n  nonnegative (u n)\n\ngoal (1 subgoal):\n 1. 0 \\<le> u n t", "by (simp add: nonnegative_def)"], ["proof (state)\nthis:\n  0 \\<le> u n t\n\ngoal (2 subgoals):\n 1. s t = 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t\n 2. s t \\<noteq> 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t", "finally"], ["proof (chain)\npicking this:\n  z * s t \\<le> u n t", "show ?thesis"], ["proof (prove)\nusing this:\n  z * s t \\<le> u n t\n\ngoal (1 subgoal):\n 1. \\<exists>n. z * s t \\<le> u n t", "by rule"], ["proof (state)\nthis:\n  \\<exists>n. z * s t \\<le> u n t\n\ngoal (1 subgoal):\n 1. s t \\<noteq> 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. s t \\<noteq> 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t", "case False"], ["proof (state)\nthis:\n  s t \\<noteq> 0\n\ngoal (1 subgoal):\n 1. s t \\<noteq> 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t", "from sr"], ["proof (chain)\npicking this:\n  r \\<in> sfis s M", "have \"nonnegative s\""], ["proof (prove)\nusing this:\n  r \\<in> sfis s M\n\ngoal (1 subgoal):\n 1. nonnegative s", "by(rule sfis_nn)"], ["proof (state)\nthis:\n  nonnegative s\n\ngoal (1 subgoal):\n 1. s t \\<noteq> 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t", "hence \"0 \\<le> s t\""], ["proof (prove)\nusing this:\n  nonnegative s\n\ngoal (1 subgoal):\n 1. 0 \\<le> s t", "by (simp add: nonnegative_def)"], ["proof (state)\nthis:\n  0 \\<le> s t\n\ngoal (1 subgoal):\n 1. s t \\<noteq> 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t", "with False"], ["proof (chain)\npicking this:\n  s t \\<noteq> 0\n  0 \\<le> s t", "have \"0 < s t\""], ["proof (prove)\nusing this:\n  s t \\<noteq> 0\n  0 \\<le> s t\n\ngoal (1 subgoal):\n 1. 0 < s t", "by arith"], ["proof (state)\nthis:\n  0 < s t\n\ngoal (1 subgoal):\n 1. s t \\<noteq> 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t", "with z1"], ["proof (chain)\npicking this:\n  z < 1\n  0 < s t", "have \"z*s t < 1*s t\""], ["proof (prove)\nusing this:\n  z < 1\n  0 < s t\n\ngoal (1 subgoal):\n 1. z * s t < 1 * s t", "by (simp only: mult_strict_right_mono)"], ["proof (state)\nthis:\n  z * s t < 1 * s t\n\ngoal (1 subgoal):\n 1. s t \\<noteq> 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t", "also"], ["proof (state)\nthis:\n  z * s t < 1 * s t\n\ngoal (1 subgoal):\n 1. s t \\<noteq> 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t", "from sf"], ["proof (chain)\npicking this:\n  s \\<le> f", "have \"\\<dots> \\<le> f t\""], ["proof (prove)\nusing this:\n  s \\<le> f\n\ngoal (1 subgoal):\n 1. 1 * s t \\<le> f t", "by (simp add: le_fun_def)"], ["proof (state)\nthis:\n  1 * s t \\<le> f t\n\ngoal (1 subgoal):\n 1. s t \\<noteq> 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t", "finally"], ["proof (chain)\npicking this:\n  z * s t < f t", "have \"z * s t < f t\""], ["proof (prove)\nusing this:\n  z * s t < f t\n\ngoal (1 subgoal):\n 1. z * s t < f t", "."], ["proof (state)\nthis:\n  z * s t < f t\n\ngoal (1 subgoal):\n 1. s t \\<noteq> 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t", "(*Next we have to prove that u grows beyond z*s t*)"], ["proof (state)\nthis:\n  z * s t < f t\n\ngoal (1 subgoal):\n 1. s t \\<noteq> 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t", "also"], ["proof (state)\nthis:\n  z * s t < f t\n\ngoal (1 subgoal):\n 1. s t \\<noteq> 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t", "from uf"], ["proof (chain)\npicking this:\n  u\\<up>f", "have \"(\\<lambda>m. u m t)\\<up>f t\""], ["proof (prove)\nusing this:\n  u\\<up>f\n\ngoal (1 subgoal):\n 1. (\\<lambda>m. u m t)\\<up>f t", "by (simp add: realfun_mon_conv_iff)"], ["proof (state)\nthis:\n  (\\<lambda>m. u m t)\\<up>f t\n\ngoal (1 subgoal):\n 1. s t \\<noteq> 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t", "ultimately"], ["proof (chain)\npicking this:\n  z * s t < f t\n  (\\<lambda>m. u m t)\\<up>f t", "have \"\\<exists>n.\\<forall>m. n\\<le>m \\<longrightarrow> z*s t < u m t\""], ["proof (prove)\nusing this:\n  z * s t < f t\n  (\\<lambda>m. u m t)\\<up>f t\n\ngoal (1 subgoal):\n 1. \\<exists>n. \\<forall>m\\<ge>n. z * s t < u m t", "by (simp add: real_mon_conv_outgrow)"], ["proof (state)\nthis:\n  \\<exists>n. \\<forall>m\\<ge>n. z * s t < u m t\n\ngoal (1 subgoal):\n 1. s t \\<noteq> 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t", "hence \"\\<exists>n. z*s t < u n t\""], ["proof (prove)\nusing this:\n  \\<exists>n. \\<forall>m\\<ge>n. z * s t < u m t\n\ngoal (1 subgoal):\n 1. \\<exists>n. z * s t < u n t", "by fast"], ["proof (state)\nthis:\n  \\<exists>n. z * s t < u n t\n\ngoal (1 subgoal):\n 1. s t \\<noteq> 0 \\<Longrightarrow> \\<exists>n. z * s t \\<le> u n t", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>n. z * s t < u n t\n\ngoal (1 subgoal):\n 1. \\<exists>n. z * s t \\<le> u n t", "by (auto simp add: order_less_le)"], ["proof (state)\nthis:\n  \\<exists>n. z * s t \\<le> u n t\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>n. z * s t \\<le> u n t\n\ngoal (1 subgoal):\n 1. UNIV = \\<Union> (range B)", "hence \"\\<exists>n. t \\<in> B n\""], ["proof (prove)\nusing this:\n  \\<exists>n. z * s t \\<le> u n t\n\ngoal (1 subgoal):\n 1. \\<exists>n. t \\<in> B n", "by (simp add: B_def)"], ["proof (state)\nthis:\n  \\<exists>n. t \\<in> B n\n\ngoal (1 subgoal):\n 1. UNIV = \\<Union> (range B)", "hence \"t \\<in> (\\<Union>n. B n)\""], ["proof (prove)\nusing this:\n  \\<exists>n. t \\<in> B n\n\ngoal (1 subgoal):\n 1. t \\<in> \\<Union> (range B)", "by fast"], ["proof (state)\nthis:\n  t \\<in> \\<Union> (range B)\n\ngoal (1 subgoal):\n 1. UNIV = \\<Union> (range B)", "}"], ["proof (state)\nthis:\n  ?t2 \\<in> \\<Union> (range B)\n\ngoal (1 subgoal):\n 1. UNIV = \\<Union> (range B)", "thus \"UNIV=(\\<Union>n. B n)\""], ["proof (prove)\nusing this:\n  ?t2 \\<in> \\<Union> (range B)\n\ngoal (1 subgoal):\n 1. UNIV = \\<Union> (range B)", "by fast"], ["proof (state)\nthis:\n  UNIV = \\<Union> (range B)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  B\\<up>UNIV\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "{"], ["proof (state)\nthis:\n  B\\<up>UNIV\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "fix j"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "assume jS: \"j \\<in> S\""], ["proof (state)\nthis:\n  j \\<in> S\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "note ms"], ["proof (state)\nthis:\n  measure_space M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "also"], ["proof (state)\nthis:\n  measure_space M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "from jS ABms"], ["proof (chain)\npicking this:\n  j \\<in> S\n  \\<forall>i\\<in>S. A i \\<inter> B ?n \\<in> measurable_sets M", "have \"\\<And>n. A j \\<inter> B n \\<in> measurable_sets M\""], ["proof (prove)\nusing this:\n  j \\<in> S\n  \\<forall>i\\<in>S. A i \\<inter> B ?n \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. \\<And>n. A j \\<inter> B n \\<in> measurable_sets M", "by auto"], ["proof (state)\nthis:\n  A j \\<inter> B ?n \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "moreover"], ["proof (state)\nthis:\n  A j \\<inter> B ?n \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "from Bun"], ["proof (chain)\npicking this:\n  B\\<up>UNIV", "have \"(\\<lambda>n. A j \\<inter> B n)\\<up>(A j)\""], ["proof (prove)\nusing this:\n  B\\<up>UNIV\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. A j \\<inter> B n)\\<up>A j", "by (auto simp add: mon_conv_set_def)"], ["proof (state)\nthis:\n  (\\<lambda>n. A j \\<inter> B n)\\<up>A j\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "ultimately"], ["proof (chain)\npicking this:\n  measure_space M\n  A j \\<inter> B ?n \\<in> measurable_sets M\n  (\\<lambda>n. A j \\<inter> B n)\\<up>A j", "have \"(\\<lambda>n. measure M (A j \\<inter> B n)) \\<longlonglongrightarrow> measure M (A j)\""], ["proof (prove)\nusing this:\n  measure_space M\n  A j \\<inter> B ?n \\<in> measurable_sets M\n  (\\<lambda>n. A j \\<inter> B n)\\<up>A j\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Measure.measure M (A j \\<inter> B n))\n    \\<longlonglongrightarrow> Measure.measure M (A j)", "by (rule measure_mon_conv)"], ["proof (state)\nthis:\n  (\\<lambda>n. Measure.measure M (A j \\<inter> B n))\n  \\<longlonglongrightarrow> Measure.measure M (A j)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "hence \"(\\<lambda>n. a j * measure M (A j \\<inter> B n)) \\<longlonglongrightarrow> a j * measure M (A j)\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. Measure.measure M (A j \\<inter> B n))\n  \\<longlonglongrightarrow> Measure.measure M (A j)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. a j * Measure.measure M (A j \\<inter> B n))\n    \\<longlonglongrightarrow> a j * Measure.measure M (A j)", "by (simp add: tendsto_const tendsto_mult)"], ["proof (state)\nthis:\n  (\\<lambda>n. a j * Measure.measure M (A j \\<inter> B n))\n  \\<longlonglongrightarrow> a j * Measure.measure M (A j)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "}"], ["proof (state)\nthis:\n  ?j2 \\<in> S \\<Longrightarrow>\n  (\\<lambda>n. a ?j2 * Measure.measure M (A ?j2 \\<inter> B n))\n  \\<longlonglongrightarrow> a ?j2 * Measure.measure M (A ?j2)\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "hence \"(\\<lambda>n. \\<Sum>j\\<in>S. a j * measure M (A j \\<inter> B n)) \n      \\<longlonglongrightarrow> (\\<Sum>j\\<in>S. a j * measure M (A j))\""], ["proof (prove)\nusing this:\n  ?j2 \\<in> S \\<Longrightarrow>\n  (\\<lambda>n. a ?j2 * Measure.measure M (A ?j2 \\<inter> B n))\n  \\<longlonglongrightarrow> a ?j2 * Measure.measure M (A ?j2)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. \\<Sum>j\\<in>S. a j * Measure.measure M (A j \\<inter> B n))\n    \\<longlonglongrightarrow> (\\<Sum>j\\<in>S. a j * Measure.measure M (A j))", "by (rule tendsto_sum)"], ["proof (state)\nthis:\n  (\\<lambda>n. \\<Sum>j\\<in>S. a j * Measure.measure M (A j \\<inter> B n))\n  \\<longlonglongrightarrow> (\\<Sum>j\\<in>S. a j * Measure.measure M (A j))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "hence \"(\\<lambda>n. z* (\\<Sum>j\\<in>S. a j * measure M (A j \\<inter> B n)))\n      \\<longlonglongrightarrow> z*(\\<Sum>j\\<in>S. a j * measure M (A j))\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. \\<Sum>j\\<in>S. a j * Measure.measure M (A j \\<inter> B n))\n  \\<longlonglongrightarrow> (\\<Sum>j\\<in>S. a j * Measure.measure M (A j))\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        z * (\\<Sum>j\\<in>S. a j * Measure.measure M (A j \\<inter> B n)))\n    \\<longlonglongrightarrow> z *\n                              (\\<Sum>j\\<in>S. a j * Measure.measure M (A j))", "by (simp add: tendsto_const tendsto_mult)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      z * (\\<Sum>j\\<in>S. a j * Measure.measure M (A j \\<inter> B n)))\n  \\<longlonglongrightarrow> z *\n                            (\\<Sum>j\\<in>S. a j * Measure.measure M (A j))\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "with 1 xy base"], ["proof (chain)\npicking this:\n  z * (\\<Sum>i\\<in>S. a i * Measure.measure M (A i \\<inter> B ?n))\n  \\<le> x ?n\n  x\\<up>y\n  r = (\\<Sum>i\\<in>S. a i * Measure.measure M (A i))\n  s = (\\<lambda>t. \\<Sum>i\\<in>S. a i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative a\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n  (\\<lambda>n.\n      z * (\\<Sum>j\\<in>S. a j * Measure.measure M (A j \\<inter> B n)))\n  \\<longlonglongrightarrow> z *\n                            (\\<Sum>j\\<in>S. a j * Measure.measure M (A j))", "have \"z*r \\<le> y\""], ["proof (prove)\nusing this:\n  z * (\\<Sum>i\\<in>S. a i * Measure.measure M (A i \\<inter> B ?n))\n  \\<le> x ?n\n  x\\<up>y\n  r = (\\<Sum>i\\<in>S. a i * Measure.measure M (A i))\n  s = (\\<lambda>t. \\<Sum>i\\<in>S. a i * \\<chi> (A i) t)\n  \\<forall>i\\<in>S. A i \\<in> measurable_sets M\n  nonnegative a\n  finite S\n  \\<forall>i\\<in>S.\n     \\<forall>j\\<in>S. i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {}\n  \\<Union> (A ` S) = UNIV\n  (\\<lambda>n.\n      z * (\\<Sum>j\\<in>S. a j * Measure.measure M (A j \\<inter> B n)))\n  \\<longlonglongrightarrow> z *\n                            (\\<Sum>j\\<in>S. a j * Measure.measure M (A j))\n\ngoal (1 subgoal):\n 1. z * r \\<le> y", "by (auto simp add: LIMSEQ_le mon_conv_real_def)"], ["proof (state)\nthis:\n  z * r \\<le> y\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "}"], ["proof (state)\nthis:\n  \\<lbrakk>0 < ?z2; ?z2 < 1\\<rbrakk> \\<Longrightarrow> ?z2 * r \\<le> y\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "hence zr: \"\\<And>z. 0 < z \\<Longrightarrow> z < 1 \\<Longrightarrow> z * r \\<le> y\""], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < ?z2; ?z2 < 1\\<rbrakk> \\<Longrightarrow> ?z2 * r \\<le> y\n\ngoal (1 subgoal):\n 1. \\<And>z. \\<lbrakk>0 < z; z < 1\\<rbrakk> \\<Longrightarrow> z * r \\<le> y", "."], ["proof (state)\nthis:\n  \\<lbrakk>0 < ?z; ?z < 1\\<rbrakk> \\<Longrightarrow> ?z * r \\<le> y\n\ngoal (1 subgoal):\n 1. \\<And>x A S.\n       \\<lbrakk>r = (\\<Sum>i\\<in>S. x i * Measure.measure M (A i));\n        s = (\\<lambda>t. \\<Sum>i\\<in>S. x i * \\<chi> (A i) t);\n        \\<forall>i\\<in>S. A i \\<in> measurable_sets M; nonnegative x;\n        finite S;\n        \\<forall>i\\<in>S.\n           \\<forall>j\\<in>S.\n              i \\<noteq> j \\<longrightarrow> A i \\<inter> A j = {};\n        \\<Union> (A ` S) = UNIV\\<rbrakk>\n       \\<Longrightarrow> r \\<le> y", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < ?z; ?z < 1\\<rbrakk> \\<Longrightarrow> ?z * r \\<le> y\n\ngoal (1 subgoal):\n 1. r \\<le> y", "by (rule real_le_mult_sustain)"], ["proof (state)\nthis:\n  r \\<le> y\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Now we are ready for the second step. The integral of a\n  monotone limit of functions is the limit of their\n  integrals. Note that this last limit has to exist in the\n  first place, since we decided not to use infinite values. Backed\n  by the last theorem and the preexisting knowledge about limits, the\n  usual basic properties are\n  straightforward.\\<close>"], ["", "inductive_set\n  nnfis:: \"('a \\<Rightarrow> real) \\<Rightarrow> ('a set set * ('a set \\<Rightarrow> real)) \\<Rightarrow> real set\"\n  for f :: \"'a \\<Rightarrow> real\" and M :: \"'a set set * ('a set \\<Rightarrow> real)\"\n  where\n  base: \"\\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>y\\<rbrakk> \\<Longrightarrow> y \\<in> nnfis f M\""], ["", "lemma sfis_nnfis:\n  assumes s: \"a \\<in> sfis f M\"\n  shows \"a \\<in> nnfis f M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in> nnfis f M", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in> nnfis f M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. a \\<in> nnfis f M", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. a \\<in> nnfis f M", "fix t"], ["proof (state)\ngoal (1 subgoal):\n 1. a \\<in> nnfis f M", "have \"(\\<lambda>n. f t)\\<up>f t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. f t)\\<up>f t", "by (simp add: mon_conv_real_def tendsto_const)"], ["proof (state)\nthis:\n  (\\<lambda>n. f t)\\<up>f t\n\ngoal (1 subgoal):\n 1. a \\<in> nnfis f M", "}"], ["proof (state)\nthis:\n  (\\<lambda>n. f ?t2)\\<up>f ?t2\n\ngoal (1 subgoal):\n 1. a \\<in> nnfis f M", "hence \"(\\<lambda>n. f)\\<up>f\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. f ?t2)\\<up>f ?t2\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. f)\\<up>f", "by (simp add: realfun_mon_conv_iff)"], ["proof (state)\nthis:\n  (\\<lambda>n. f)\\<up>f\n\ngoal (1 subgoal):\n 1. a \\<in> nnfis f M", "also"], ["proof (state)\nthis:\n  (\\<lambda>n. f)\\<up>f\n\ngoal (1 subgoal):\n 1. a \\<in> nnfis f M", "from s"], ["proof (chain)\npicking this:\n  a \\<in> sfis f M", "have \"\\<And>n. a \\<in> sfis f M\""], ["proof (prove)\nusing this:\n  a \\<in> sfis f M\n\ngoal (1 subgoal):\n 1. \\<And>n. a \\<in> sfis f M", "."], ["proof (state)\nthis:\n  a \\<in> sfis f M\n\ngoal (1 subgoal):\n 1. a \\<in> nnfis f M", "moreover"], ["proof (state)\nthis:\n  a \\<in> sfis f M\n\ngoal (1 subgoal):\n 1. a \\<in> nnfis f M", "have \"(\\<lambda>n. a)\\<up>a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. a)\\<up>a", "by (simp add: mon_conv_real_def tendsto_const)"], ["proof (state)\nthis:\n  (\\<lambda>n. a)\\<up>a\n\ngoal (1 subgoal):\n 1. a \\<in> nnfis f M", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>n. f)\\<up>f\n  a \\<in> sfis f M\n  (\\<lambda>n. a)\\<up>a", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>n. f)\\<up>f\n  a \\<in> sfis f M\n  (\\<lambda>n. a)\\<up>a\n\ngoal (1 subgoal):\n 1. a \\<in> nnfis f M", "by (rule nnfis.base)"], ["proof (state)\nthis:\n  a \\<in> nnfis f M\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "lemma nnfis_times: \n  assumes ms: \"measure_space M\" and a: \"a \\<in> nnfis f M\" and nn: \"0\\<le>z\"\n  shows \"z*a \\<in> nnfis (\\<lambda>w. z*f w) M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z * a \\<in> nnfis (\\<lambda>w. z * f w) M", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. z * a \\<in> nnfis (\\<lambda>w. z * f w) M", "using a"], ["proof (prove)\nusing this:\n  a \\<in> nnfis f M\n\ngoal (1 subgoal):\n 1. z * a \\<in> nnfis (\\<lambda>w. z * f w) M", "proof (cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> nnfis (\\<lambda>w. z * f w) M", "case (base u x)"], ["proof (state)\nthis:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> nnfis (\\<lambda>w. z * f w) M", "with nn"], ["proof (chain)\npicking this:\n  0 \\<le> z\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a", "have \"(\\<lambda>m w. z*u m w)\\<up>(\\<lambda>w. z*f w)\""], ["proof (prove)\nusing this:\n  0 \\<le> z\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n\ngoal (1 subgoal):\n 1. (\\<lambda>m w. z * u m w)\\<up>(\\<lambda>w. z * f w)", "by (simp add: realfun_mon_conv_times)"], ["proof (state)\nthis:\n  (\\<lambda>m w. z * u m w)\\<up>(\\<lambda>w. z * f w)\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> nnfis (\\<lambda>w. z * f w) M", "also"], ["proof (state)\nthis:\n  (\\<lambda>m w. z * u m w)\\<up>(\\<lambda>w. z * f w)\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> nnfis (\\<lambda>w. z * f w) M", "from nn base"], ["proof (chain)\npicking this:\n  0 \\<le> z\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a", "have \"\\<And>m. z*x m \\<in> sfis (\\<lambda>w. z*u m w) M\""], ["proof (prove)\nusing this:\n  0 \\<le> z\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n\ngoal (1 subgoal):\n 1. \\<And>m. z * x m \\<in> sfis (\\<lambda>w. z * u m w) M", "by (simp add: sfis_times)"], ["proof (state)\nthis:\n  z * x ?m \\<in> sfis (\\<lambda>w. z * u ?m w) M\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> nnfis (\\<lambda>w. z * f w) M", "moreover"], ["proof (state)\nthis:\n  z * x ?m \\<in> sfis (\\<lambda>w. z * u ?m w) M\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> nnfis (\\<lambda>w. z * f w) M", "from a nn base"], ["proof (chain)\npicking this:\n  a \\<in> nnfis f M\n  0 \\<le> z\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a", "have \"(\\<lambda>m. z*x m)\\<up>(z*a)\""], ["proof (prove)\nusing this:\n  a \\<in> nnfis f M\n  0 \\<le> z\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n\ngoal (1 subgoal):\n 1. (\\<lambda>m. z * x m)\\<up>z * a", "by (simp add: real_mon_conv_times)"], ["proof (state)\nthis:\n  (\\<lambda>m. z * x m)\\<up>z * a\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> nnfis (\\<lambda>w. z * f w) M", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>m w. z * u m w)\\<up>(\\<lambda>w. z * f w)\n  z * x ?m \\<in> sfis (\\<lambda>w. z * u ?m w) M\n  (\\<lambda>m. z * x m)\\<up>z * a", "have \"z*a \\<in> nnfis (\\<lambda>w. z*f w) M\""], ["proof (prove)\nusing this:\n  (\\<lambda>m w. z * u m w)\\<up>(\\<lambda>w. z * f w)\n  z * x ?m \\<in> sfis (\\<lambda>w. z * u ?m w) M\n  (\\<lambda>m. z * x m)\\<up>z * a\n\ngoal (1 subgoal):\n 1. z * a \\<in> nnfis (\\<lambda>w. z * f w) M", "by (rule nnfis.base)"], ["proof (state)\nthis:\n  z * a \\<in> nnfis (\\<lambda>w. z * f w) M\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> z * a \\<in> nnfis (\\<lambda>w. z * f w) M", "with base"], ["proof (chain)\npicking this:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n  z * a \\<in> nnfis (\\<lambda>w. z * f w) M", "show ?thesis"], ["proof (prove)\nusing this:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n  z * a \\<in> nnfis (\\<lambda>w. z * f w) M\n\ngoal (1 subgoal):\n 1. z * a \\<in> nnfis (\\<lambda>w. z * f w) M", "by simp"], ["proof (state)\nthis:\n  z * a \\<in> nnfis (\\<lambda>w. z * f w) M\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "lemma nnfis_add:\n  assumes ms: \"measure_space M\" and a: \"a \\<in> nnfis f M\" and b: \"b \\<in> nnfis g M\"\n  shows \"a+b \\<in> nnfis (\\<lambda>w. f w + g w) M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a + b \\<in> nnfis (\\<lambda>w. f w + g w) M", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. a + b \\<in> nnfis (\\<lambda>w. f w + g w) M", "using a"], ["proof (prove)\nusing this:\n  a \\<in> nnfis f M\n\ngoal (1 subgoal):\n 1. a + b \\<in> nnfis (\\<lambda>w. f w + g w) M", "proof (cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> a + b \\<in> nnfis (\\<lambda>w. f w + g w) M", "case (base u x)"], ["proof (state)\nthis:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> a + b \\<in> nnfis (\\<lambda>w. f w + g w) M", "note base_u = this"], ["proof (state)\nthis:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> a + b \\<in> nnfis (\\<lambda>w. f w + g w) M", "from b"], ["proof (chain)\npicking this:\n  b \\<in> nnfis g M", "show ?thesis"], ["proof (prove)\nusing this:\n  b \\<in> nnfis g M\n\ngoal (1 subgoal):\n 1. a + b \\<in> nnfis (\\<lambda>w. f w + g w) M", "proof cases"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> a + b \\<in> nnfis (\\<lambda>w. f w + g w) M", "case (base v r)"], ["proof (state)\nthis:\n  v\\<up>g\n  r ?n \\<in> sfis (v ?n) M\n  r\\<up>b\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> a + b \\<in> nnfis (\\<lambda>w. f w + g w) M", "with base_u"], ["proof (chain)\npicking this:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n  v\\<up>g\n  r ?n \\<in> sfis (v ?n) M\n  r\\<up>b", "have \"(\\<lambda>m w. u m w + v m w)\\<up>(\\<lambda>w. f w + g w)\""], ["proof (prove)\nusing this:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n  v\\<up>g\n  r ?n \\<in> sfis (v ?n) M\n  r\\<up>b\n\ngoal (1 subgoal):\n 1. (\\<lambda>m w. u m w + v m w)\\<up>(\\<lambda>w. f w + g w)", "by (simp add: realfun_mon_conv_add)"], ["proof (state)\nthis:\n  (\\<lambda>m w. u m w + v m w)\\<up>(\\<lambda>w. f w + g w)\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> a + b \\<in> nnfis (\\<lambda>w. f w + g w) M", "also"], ["proof (state)\nthis:\n  (\\<lambda>m w. u m w + v m w)\\<up>(\\<lambda>w. f w + g w)\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> a + b \\<in> nnfis (\\<lambda>w. f w + g w) M", "from ms base_u base"], ["proof (chain)\npicking this:\n  measure_space M\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n  v\\<up>g\n  r ?n \\<in> sfis (v ?n) M\n  r\\<up>b", "have \"\\<And>n. x n + r n \\<in> sfis (\\<lambda>w. u n w + v n w) M\""], ["proof (prove)\nusing this:\n  measure_space M\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n  v\\<up>g\n  r ?n \\<in> sfis (v ?n) M\n  r\\<up>b\n\ngoal (1 subgoal):\n 1. \\<And>n. x n + r n \\<in> sfis (\\<lambda>w. u n w + v n w) M", "by (simp add: sfis_add)"], ["proof (state)\nthis:\n  x ?n + r ?n \\<in> sfis (\\<lambda>w. u ?n w + v ?n w) M\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> a + b \\<in> nnfis (\\<lambda>w. f w + g w) M", "moreover"], ["proof (state)\nthis:\n  x ?n + r ?n \\<in> sfis (\\<lambda>w. u ?n w + v ?n w) M\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> a + b \\<in> nnfis (\\<lambda>w. f w + g w) M", "from ms base_u base"], ["proof (chain)\npicking this:\n  measure_space M\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n  v\\<up>g\n  r ?n \\<in> sfis (v ?n) M\n  r\\<up>b", "have \"(\\<lambda>m. x m + r m)\\<up>(a+b)\""], ["proof (prove)\nusing this:\n  measure_space M\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n  v\\<up>g\n  r ?n \\<in> sfis (v ?n) M\n  r\\<up>b\n\ngoal (1 subgoal):\n 1. (\\<lambda>m. x m + r m)\\<up>a + b", "by (simp add: real_mon_conv_add)"], ["proof (state)\nthis:\n  (\\<lambda>m. x m + r m)\\<up>a + b\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> a + b \\<in> nnfis (\\<lambda>w. f w + g w) M", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>m w. u m w + v m w)\\<up>(\\<lambda>w. f w + g w)\n  x ?n + r ?n \\<in> sfis (\\<lambda>w. u ?n w + v ?n w) M\n  (\\<lambda>m. x m + r m)\\<up>a + b", "have \"a+b \\<in> nnfis (\\<lambda>w. f w + g w) M\""], ["proof (prove)\nusing this:\n  (\\<lambda>m w. u m w + v m w)\\<up>(\\<lambda>w. f w + g w)\n  x ?n + r ?n \\<in> sfis (\\<lambda>w. u ?n w + v ?n w) M\n  (\\<lambda>m. x m + r m)\\<up>a + b\n\ngoal (1 subgoal):\n 1. a + b \\<in> nnfis (\\<lambda>w. f w + g w) M", "by (rule nnfis.base)"], ["proof (state)\nthis:\n  a + b \\<in> nnfis (\\<lambda>w. f w + g w) M\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> a + b \\<in> nnfis (\\<lambda>w. f w + g w) M", "with a b"], ["proof (chain)\npicking this:\n  a \\<in> nnfis f M\n  b \\<in> nnfis g M\n  a + b \\<in> nnfis (\\<lambda>w. f w + g w) M", "show ?thesis"], ["proof (prove)\nusing this:\n  a \\<in> nnfis f M\n  b \\<in> nnfis g M\n  a + b \\<in> nnfis (\\<lambda>w. f w + g w) M\n\ngoal (1 subgoal):\n 1. a + b \\<in> nnfis (\\<lambda>w. f w + g w) M", "by simp"], ["proof (state)\nthis:\n  a + b \\<in> nnfis (\\<lambda>w. f w + g w) M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  a + b \\<in> nnfis (\\<lambda>w. f w + g w) M\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "lemma assumes ms: \"measure_space M\" and a: \"a \\<in> nnfis f M\" \n  and b: \"b \\<in> nnfis g M\" and fg: \"f\\<le>g\"\n  shows nnfis_mono: \"a \\<le> b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<le> b", "using a"], ["proof (prove)\nusing this:\n  a \\<in> nnfis f M\n\ngoal (1 subgoal):\n 1. a \\<le> b", "proof (cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> a \\<le> b", "case (base u x)"], ["proof (state)\nthis:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> a \\<le> b", "note base_u = this"], ["proof (state)\nthis:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> a \\<le> b", "from b"], ["proof (chain)\npicking this:\n  b \\<in> nnfis g M", "show ?thesis"], ["proof (prove)\nusing this:\n  b \\<in> nnfis g M\n\ngoal (1 subgoal):\n 1. a \\<le> b", "proof (cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> a \\<le> b", "case (base v r)"], ["proof (state)\nthis:\n  v\\<up>g\n  r ?n \\<in> sfis (v ?n) M\n  r\\<up>b\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> a \\<le> b", "{"], ["proof (state)\nthis:\n  v\\<up>g\n  r ?n \\<in> sfis (v ?n) M\n  r\\<up>b\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> a \\<le> b", "fix m"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> a \\<le> b", "from base_u base"], ["proof (chain)\npicking this:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n  v\\<up>g\n  r ?n \\<in> sfis (v ?n) M\n  r\\<up>b", "have \"u m \\<le> f\""], ["proof (prove)\nusing this:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n  v\\<up>g\n  r ?n \\<in> sfis (v ?n) M\n  r\\<up>b\n\ngoal (1 subgoal):\n 1. u m \\<le> f", "by (simp add: realfun_mon_conv_le)"], ["proof (state)\nthis:\n  u m \\<le> f\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> a \\<le> b", "also"], ["proof (state)\nthis:\n  u m \\<le> f\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> a \\<le> b", "note fg"], ["proof (state)\nthis:\n  f \\<le> g\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> a \\<le> b", "finally"], ["proof (chain)\npicking this:\n  u m \\<le> g", "have \"u m \\<le> g\""], ["proof (prove)\nusing this:\n  u m \\<le> g\n\ngoal (1 subgoal):\n 1. u m \\<le> g", "."], ["proof (state)\nthis:\n  u m \\<le> g\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> a \\<le> b", "with ms base_u base"], ["proof (chain)\npicking this:\n  measure_space M\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n  v\\<up>g\n  r ?n \\<in> sfis (v ?n) M\n  r\\<up>b\n  u m \\<le> g", "have \"v\\<up>g\" and  \"\\<And>n. r n \\<in> sfis (v n) M\" and \"r\\<up>b\" \n          and \"x m \\<in> sfis (u m) M\" and \"u m \\<le> g\" and \"measure_space M\""], ["proof (prove)\nusing this:\n  measure_space M\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n  v\\<up>g\n  r ?n \\<in> sfis (v ?n) M\n  r\\<up>b\n  u m \\<le> g\n\ngoal (1 subgoal):\n 1. (v\\<up>g &&& (\\<And>n. r n \\<in> sfis (v n) M) &&& r\\<up>b) &&&\n    x m \\<in> sfis (u m) M &&& u m \\<le> g &&& measure_space M", "by simp_all"], ["proof (state)\nthis:\n  v\\<up>g\n  r ?n \\<in> sfis (v ?n) M\n  r\\<up>b\n  x m \\<in> sfis (u m) M\n  u m \\<le> g\n  measure_space M\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> a \\<le> b", "hence \"x m \\<le> b\""], ["proof (prove)\nusing this:\n  v\\<up>g\n  r ?n \\<in> sfis (v ?n) M\n  r\\<up>b\n  x m \\<in> sfis (u m) M\n  u m \\<le> g\n  measure_space M\n\ngoal (1 subgoal):\n 1. x m \\<le> b", "by (rule sfis_mon_conv_mono)"], ["proof (state)\nthis:\n  x m \\<le> b\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> a \\<le> b", "}"], ["proof (state)\nthis:\n  x ?m2 \\<le> b\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> a \\<le> b", "with ms base_u base"], ["proof (chain)\npicking this:\n  measure_space M\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n  v\\<up>g\n  r ?n \\<in> sfis (v ?n) M\n  r\\<up>b\n  x ?m2 \\<le> b", "show \"a \\<le> b\""], ["proof (prove)\nusing this:\n  measure_space M\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n  v\\<up>g\n  r ?n \\<in> sfis (v ?n) M\n  r\\<up>b\n  x ?m2 \\<le> b\n\ngoal (1 subgoal):\n 1. a \\<le> b", "by (auto simp add: mon_conv_real_def LIMSEQ_le_const2)"], ["proof (state)\nthis:\n  a \\<le> b\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  a \\<le> b\n\ngoal:\nNo subgoals!", "qed"], ["", "corollary nnfis_unique: \n  assumes ms: \"measure_space M\" and a: \"a \\<in> nnfis f M\" and b: \"b \\<in> nnfis f M\"\n  shows \"a=b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a = b", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. a = b", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. a = b", "have \"f\\<le>f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<le> f", ".."], ["proof (state)\nthis:\n  f \\<le> f\n\ngoal (1 subgoal):\n 1. a = b", "with assms"], ["proof (chain)\npicking this:\n  measure_space M\n  a \\<in> nnfis f M\n  b \\<in> nnfis f M\n  f \\<le> f", "have \"a\\<le>b\" and \"b\\<le>a\""], ["proof (prove)\nusing this:\n  measure_space M\n  a \\<in> nnfis f M\n  b \\<in> nnfis f M\n  f \\<le> f\n\ngoal (1 subgoal):\n 1. a \\<le> b &&& b \\<le> a", "by (auto simp add: nnfis_mono)"], ["proof (state)\nthis:\n  a \\<le> b\n  b \\<le> a\n\ngoal (1 subgoal):\n 1. a = b", "thus ?thesis"], ["proof (prove)\nusing this:\n  a \\<le> b\n  b \\<le> a\n\ngoal (1 subgoal):\n 1. a = b", "by simp"], ["proof (state)\nthis:\n  a = b\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "text\\<open>There is much more to prove about nonnegative integration. Next\n  up is a classic theorem by Beppo Levi, the monotone convergence\n  theorem. In essence, it says that the introduction rule for \\<open>nnfis\\<close> holds not only for sequences of simple functions, but for any\n  sequence of nonnegative integrable functions. It should be mentioned that this theorem cannot be\n  formulated for the Riemann integral. We prove it by\n  exhibiting a sequence of simple functions that converges to the same\n  limit as the original one and then applying the introduction\n  rule. \n\n  The construction and properties of the sequence are slightly intricate. By definition, for any $f_n$ in the original sequence,\n  there is a sequence $(u_{m n})_{m\\in\\mathbb{N}}$ of simple functions converging to it.   \n  The $n$th element of the new sequence is the upper closure of the\n  $n$th elements of the first $n$ sequences.\\<close>"], ["", "definition (*The upper closure?*)\n  upclose:: \"('a \\<Rightarrow> real) \\<Rightarrow> ('a \\<Rightarrow> real) \\<Rightarrow> ('a \\<Rightarrow> real)\" where\n  \"upclose f g = (\\<lambda>t. max (f t) (g t))\""], ["", "primrec\n  mon_upclose_help :: \"nat \\<Rightarrow> (nat \\<Rightarrow> nat \\<Rightarrow> 'a \\<Rightarrow> real) \\<Rightarrow> nat \\<Rightarrow> ('a \\<Rightarrow> real)\" (\"muh\") where\n  \"muh 0 u m = u m 0\"\n| \"muh (Suc n) u m = upclose (u m (Suc n)) (muh n u m)\""], ["", "definition\n  mon_upclose (*See Bauer p. 68*) :: \"(nat \\<Rightarrow> nat \\<Rightarrow> 'a \\<Rightarrow> real) \\<Rightarrow> nat \\<Rightarrow> ('a \\<Rightarrow> real)\" (\"mu\") where\n  \"mu u m = muh m u m\""], ["", "lemma sf_norm_help:\n  assumes fin: \"finite K\" and jK: \"j \\<in> K\" and tj: \"t \\<in> C j\" and iK: \"\\<forall>i\\<in>K-{j}. t \\<notin> C i\"\n  shows \"(\\<Sum>i\\<in>K. (z i) * \\<chi> (C i) t) = z j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. z i * \\<chi> (C i) t) = z j", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. z i * \\<chi> (C i) t) = z j", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. z i * \\<chi> (C i) t) = z j", "from jK"], ["proof (chain)\npicking this:\n  j \\<in> K", "have \"K = insert j (K-{j})\""], ["proof (prove)\nusing this:\n  j \\<in> K\n\ngoal (1 subgoal):\n 1. K = insert j (K - {j})", "by blast"], ["proof (state)\nthis:\n  K = insert j (K - {j})\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. z i * \\<chi> (C i) t) = z j", "moreover"], ["proof (state)\nthis:\n  K = insert j (K - {j})\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. z i * \\<chi> (C i) t) = z j", "from fin"], ["proof (chain)\npicking this:\n  finite K", "have finat2: \"finite (K-{j})\" and \"j \\<notin> (K-{j})\""], ["proof (prove)\nusing this:\n  finite K\n\ngoal (1 subgoal):\n 1. finite (K - {j}) &&& j \\<notin> K - {j}", "by simp_all"], ["proof (state)\nthis:\n  finite (K - {j})\n  j \\<notin> K - {j}\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. z i * \\<chi> (C i) t) = z j", "hence \"(\\<Sum>i\\<in>insert j (K-{j}). (z i) * \\<chi> (C i) t) = (z j * \\<chi> (C j) t) + (\\<Sum>i\\<in>K-{j}. (z i) * \\<chi> (C i) t)\""], ["proof (prove)\nusing this:\n  finite (K - {j})\n  j \\<notin> K - {j}\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>insert j (K - {j}). z i * \\<chi> (C i) t) =\n    z j * \\<chi> (C j) t + (\\<Sum>i\\<in>K - {j}. z i * \\<chi> (C i) t)", "by (rule sum.insert)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>insert j (K - {j}). z i * \\<chi> (C i) t) =\n  z j * \\<chi> (C j) t + (\\<Sum>i\\<in>K - {j}. z i * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. z i * \\<chi> (C i) t) = z j", "moreover"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>insert j (K - {j}). z i * \\<chi> (C i) t) =\n  z j * \\<chi> (C j) t + (\\<Sum>i\\<in>K - {j}. z i * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. z i * \\<chi> (C i) t) = z j", "from tj"], ["proof (chain)\npicking this:\n  t \\<in> C j", "have \"\\<dots> = z j + (\\<Sum>i\\<in>K-{j}. (z i) * \\<chi> (C i) t)\""], ["proof (prove)\nusing this:\n  t \\<in> C j\n\ngoal (1 subgoal):\n 1. z j * \\<chi> (C j) t + (\\<Sum>i\\<in>K - {j}. z i * \\<chi> (C i) t) =\n    z j + (\\<Sum>i\\<in>K - {j}. z i * \\<chi> (C i) t)", "by (simp add: characteristic_function_def)"], ["proof (state)\nthis:\n  z j * \\<chi> (C j) t + (\\<Sum>i\\<in>K - {j}. z i * \\<chi> (C i) t) =\n  z j + (\\<Sum>i\\<in>K - {j}. z i * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. z i * \\<chi> (C i) t) = z j", "moreover"], ["proof (state)\nthis:\n  z j * \\<chi> (C j) t + (\\<Sum>i\\<in>K - {j}. z i * \\<chi> (C i) t) =\n  z j + (\\<Sum>i\\<in>K - {j}. z i * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. z i * \\<chi> (C i) t) = z j", "{"], ["proof (state)\nthis:\n  z j * \\<chi> (C j) t + (\\<Sum>i\\<in>K - {j}. z i * \\<chi> (C i) t) =\n  z j + (\\<Sum>i\\<in>K - {j}. z i * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. z i * \\<chi> (C i) t) = z j", "from iK"], ["proof (chain)\npicking this:\n  \\<forall>i\\<in>K - {j}. t \\<notin> C i", "have \"\\<forall>i\\<in>K-{j}. (z i) * \\<chi> (C i) t = 0\""], ["proof (prove)\nusing this:\n  \\<forall>i\\<in>K - {j}. t \\<notin> C i\n\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>K - {j}. z i * \\<chi> (C i) t = 0", "by (auto simp add: characteristic_function_def)"], ["proof (state)\nthis:\n  \\<forall>i\\<in>K - {j}. z i * \\<chi> (C i) t = 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. z i * \\<chi> (C i) t) = z j", "}"], ["proof (state)\nthis:\n  \\<forall>i\\<in>K - {j}. z i * \\<chi> (C i) t = 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. z i * \\<chi> (C i) t) = z j", "hence \"\\<dots> = z j\""], ["proof (prove)\nusing this:\n  \\<forall>i\\<in>K - {j}. z i * \\<chi> (C i) t = 0\n\ngoal (1 subgoal):\n 1. z j + (\\<Sum>i\\<in>K - {j}. z i * \\<chi> (C i) t) = z j", "by (simp add:sum.neutral)"], ["proof (state)\nthis:\n  z j + (\\<Sum>i\\<in>K - {j}. z i * \\<chi> (C i) t) = z j\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. z i * \\<chi> (C i) t) = z j", "ultimately"], ["proof (chain)\npicking this:\n  K = insert j (K - {j})\n  (\\<Sum>i\\<in>insert j (K - {j}). z i * \\<chi> (C i) t) =\n  z j * \\<chi> (C j) t + (\\<Sum>i\\<in>K - {j}. z i * \\<chi> (C i) t)\n  z j * \\<chi> (C j) t + (\\<Sum>i\\<in>K - {j}. z i * \\<chi> (C i) t) =\n  z j + (\\<Sum>i\\<in>K - {j}. z i * \\<chi> (C i) t)\n  z j + (\\<Sum>i\\<in>K - {j}. z i * \\<chi> (C i) t) = z j", "show ?thesis"], ["proof (prove)\nusing this:\n  K = insert j (K - {j})\n  (\\<Sum>i\\<in>insert j (K - {j}). z i * \\<chi> (C i) t) =\n  z j * \\<chi> (C j) t + (\\<Sum>i\\<in>K - {j}. z i * \\<chi> (C i) t)\n  z j * \\<chi> (C j) t + (\\<Sum>i\\<in>K - {j}. z i * \\<chi> (C i) t) =\n  z j + (\\<Sum>i\\<in>K - {j}. z i * \\<chi> (C i) t)\n  z j + (\\<Sum>i\\<in>K - {j}. z i * \\<chi> (C i) t) = z j\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. z i * \\<chi> (C i) t) = z j", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>K. z i * \\<chi> (C i) t) = z j\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "lemma upclose_sfis: \n  assumes ms: \"measure_space M\" and f: \"a \\<in> sfis f M\" and g: \"b \\<in> sfis g M\" \n  shows \"\\<exists>c. c \\<in> sfis (upclose f g) M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "from assms"], ["proof (chain)\npicking this:\n  measure_space M\n  a \\<in> sfis f M\n  b \\<in> sfis g M", "have \n    \"\\<exists> z1 z2 C K. f = (\\<lambda>t. \\<Sum>i\\<in>(K::nat set). z1 i * \\<chi> (C i) t) \\<and> \n    g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and> a = (\\<Sum>i\\<in>K. z1 i * measure M (C i))\n    \\<and> b = (\\<Sum>i\\<in>K. z2 i * measure M (C i))\n    \\<and> finite K \\<and> (\\<forall>i\\<in>K. \\<forall>j\\<in>K. i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {})\n    \\<and> (\\<forall>i \\<in> K. C i \\<in> measurable_sets M) \\<and> (\\<Union>i\\<in>K. C i) = UNIV\n    \\<and> nonnegative z1 \\<and> nonnegative z2\""], ["proof (prove)\nusing this:\n  measure_space M\n  a \\<in> sfis f M\n  b \\<in> sfis g M\n\ngoal (1 subgoal):\n 1. \\<exists>z1 z2 C K.\n       f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n       g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n       a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i)) \\<and>\n       b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i)) \\<and>\n       finite K \\<and>\n       (\\<forall>i\\<in>K.\n           \\<forall>j\\<in>K.\n              i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n       (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n       \\<Union> (C ` K) = UNIV \\<and> nonnegative z1 \\<and> nonnegative z2", "by (rule sfis_present)"], ["proof (state)\nthis:\n  \\<exists>z1 z2 C K.\n     f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n     g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n     a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i)) \\<and>\n     b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i)) \\<and>\n     finite K \\<and>\n     (\\<forall>i\\<in>K.\n         \\<forall>j\\<in>K.\n            i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n     (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n     \\<Union> (C ` K) = UNIV \\<and> nonnegative z1 \\<and> nonnegative z2\n\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "then"], ["proof (chain)\npicking this:\n  \\<exists>z1 z2 C K.\n     f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n     g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n     a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i)) \\<and>\n     b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i)) \\<and>\n     finite K \\<and>\n     (\\<forall>i\\<in>K.\n         \\<forall>j\\<in>K.\n            i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n     (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n     \\<Union> (C ` K) = UNIV \\<and> nonnegative z1 \\<and> nonnegative z2", "obtain z1 z2 C K where f: \"f = (\\<lambda>t. \\<Sum>i\\<in>(K::nat set). z1 i * \\<chi> (C i) t)\" \n    and g: \"g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)\" \n    and a2: \"a = (\\<Sum>i\\<in>K. z1 i * measure M (C i))\"\n    and b2: \"b = (\\<Sum>i\\<in>K. z2 i * measure M (C i))\"\n    and CK: \"finite K \\<and> (\\<forall>i\\<in>K. \\<forall>j\\<in>K. i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and> \n    (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and> \\<Union>(C ` K) = UNIV\"\n    and z1: \"nonnegative z1\" and z2: \"nonnegative z2\""], ["proof (prove)\nusing this:\n  \\<exists>z1 z2 C K.\n     f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t) \\<and>\n     g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) \\<and>\n     a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i)) \\<and>\n     b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i)) \\<and>\n     finite K \\<and>\n     (\\<forall>i\\<in>K.\n         \\<forall>j\\<in>K.\n            i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n     (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n     \\<Union> (C ` K) = UNIV \\<and> nonnegative z1 \\<and> nonnegative z2\n\ngoal (1 subgoal):\n 1. (\\<And>z1 C K z2.\n        \\<lbrakk>f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t);\n         g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t);\n         a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i));\n         b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i));\n         finite K \\<and>\n         (\\<forall>i\\<in>K.\n             \\<forall>j\\<in>K.\n                i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n         (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n         \\<Union> (C ` K) = UNIV;\n         nonnegative z1; nonnegative z2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t)\n  g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)\n  a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i))\n  b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i))\n  finite K \\<and>\n  (\\<forall>i\\<in>K.\n      \\<forall>j\\<in>K.\n         i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n  (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n  \\<Union> (C ` K) = UNIV\n  nonnegative z1\n  nonnegative z2\n\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "{"], ["proof (state)\nthis:\n  f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t)\n  g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)\n  a = (\\<Sum>i\\<in>K. z1 i * Measure.measure M (C i))\n  b = (\\<Sum>i\\<in>K. z2 i * Measure.measure M (C i))\n  finite K \\<and>\n  (\\<forall>i\\<in>K.\n      \\<forall>j\\<in>K.\n         i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n  (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n  \\<Union> (C ` K) = UNIV\n  nonnegative z1\n  nonnegative z2\n\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "fix t"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "from CK"], ["proof (chain)\npicking this:\n  finite K \\<and>\n  (\\<forall>i\\<in>K.\n      \\<forall>j\\<in>K.\n         i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n  (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n  \\<Union> (C ` K) = UNIV", "obtain j where jK: \"j \\<in> K\" and tj: \"t \\<in> C j\""], ["proof (prove)\nusing this:\n  finite K \\<and>\n  (\\<forall>i\\<in>K.\n      \\<forall>j\\<in>K.\n         i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n  (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n  \\<Union> (C ` K) = UNIV\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<lbrakk>j \\<in> K; t \\<in> C j\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by force"], ["proof (state)\nthis:\n  j \\<in> K\n  t \\<in> C j\n\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "with CK"], ["proof (chain)\npicking this:\n  finite K \\<and>\n  (\\<forall>i\\<in>K.\n      \\<forall>j\\<in>K.\n         i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n  (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n  \\<Union> (C ` K) = UNIV\n  j \\<in> K\n  t \\<in> C j", "have iK: \"\\<forall>i\\<in>K-{j}. t \\<notin> C i\""], ["proof (prove)\nusing this:\n  finite K \\<and>\n  (\\<forall>i\\<in>K.\n      \\<forall>j\\<in>K.\n         i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n  (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n  \\<Union> (C ` K) = UNIV\n  j \\<in> K\n  t \\<in> C j\n\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>K - {j}. t \\<notin> C i", "by auto"], ["proof (state)\nthis:\n  \\<forall>i\\<in>K - {j}. t \\<notin> C i\n\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "from f and g"], ["proof (chain)\npicking this:\n  f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t)\n  g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)", "have \"max (f t) (g t) = max (\\<Sum>i\\<in>K. (z1 i) * \\<chi> (C i) t) (\\<Sum>i\\<in>K. (z2 i) * \\<chi> (C i) t)\""], ["proof (prove)\nusing this:\n  f = (\\<lambda>t. \\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t)\n  g = (\\<lambda>t. \\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. max (f t) (g t) =\n    max (\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t)\n     (\\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)", "by simp"], ["proof (state)\nthis:\n  max (f t) (g t) =\n  max (\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t)\n   (\\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "also"], ["proof (state)\nthis:\n  max (f t) (g t) =\n  max (\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t)\n   (\\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "from CK jK iK tj"], ["proof (chain)\npicking this:\n  finite K \\<and>\n  (\\<forall>i\\<in>K.\n      \\<forall>j\\<in>K.\n         i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n  (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n  \\<Union> (C ` K) = UNIV\n  j \\<in> K\n  \\<forall>i\\<in>K - {j}. t \\<notin> C i\n  t \\<in> C j", "have \"\\<dots> = max (z1 j) (z2 j)\""], ["proof (prove)\nusing this:\n  finite K \\<and>\n  (\\<forall>i\\<in>K.\n      \\<forall>j\\<in>K.\n         i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n  (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n  \\<Union> (C ` K) = UNIV\n  j \\<in> K\n  \\<forall>i\\<in>K - {j}. t \\<notin> C i\n  t \\<in> C j\n\ngoal (1 subgoal):\n 1. max (\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t)\n     (\\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) =\n    max (z1 j) (z2 j)", "by (simp add: sf_norm_help)"], ["proof (state)\nthis:\n  max (\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t)\n   (\\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) =\n  max (z1 j) (z2 j)\n\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "also"], ["proof (state)\nthis:\n  max (\\<Sum>i\\<in>K. z1 i * \\<chi> (C i) t)\n   (\\<Sum>i\\<in>K. z2 i * \\<chi> (C i) t) =\n  max (z1 j) (z2 j)\n\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "from CK jK iK tj"], ["proof (chain)\npicking this:\n  finite K \\<and>\n  (\\<forall>i\\<in>K.\n      \\<forall>j\\<in>K.\n         i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n  (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n  \\<Union> (C ` K) = UNIV\n  j \\<in> K\n  \\<forall>i\\<in>K - {j}. t \\<notin> C i\n  t \\<in> C j", "have \"\\<dots> = (\\<Sum>i\\<in>K. (max (z1 i) (z2 i)) * \\<chi> (C i) t)\""], ["proof (prove)\nusing this:\n  finite K \\<and>\n  (\\<forall>i\\<in>K.\n      \\<forall>j\\<in>K.\n         i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n  (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n  \\<Union> (C ` K) = UNIV\n  j \\<in> K\n  \\<forall>i\\<in>K - {j}. t \\<notin> C i\n  t \\<in> C j\n\ngoal (1 subgoal):\n 1. max (z1 j) (z2 j) = (\\<Sum>i\\<in>K. max (z1 i) (z2 i) * \\<chi> (C i) t)", "by (simp add: sf_norm_help)"], ["proof (state)\nthis:\n  max (z1 j) (z2 j) = (\\<Sum>i\\<in>K. max (z1 i) (z2 i) * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "finally"], ["proof (chain)\npicking this:\n  max (f t) (g t) = (\\<Sum>i\\<in>K. max (z1 i) (z2 i) * \\<chi> (C i) t)", "have \"max (f t) (g t) = (\\<Sum>i\\<in>K. max (z1 i) (z2 i) * \\<chi> (C i) t)\""], ["proof (prove)\nusing this:\n  max (f t) (g t) = (\\<Sum>i\\<in>K. max (z1 i) (z2 i) * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. max (f t) (g t) = (\\<Sum>i\\<in>K. max (z1 i) (z2 i) * \\<chi> (C i) t)", "."], ["proof (state)\nthis:\n  max (f t) (g t) = (\\<Sum>i\\<in>K. max (z1 i) (z2 i) * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "}"], ["proof (state)\nthis:\n  max (f ?t2) (g ?t2) =\n  (\\<Sum>i\\<in>K. max (z1 i) (z2 i) * \\<chi> (C i) ?t2)\n\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "hence \"upclose f g = (\\<lambda>t. (\\<Sum>i\\<in>K. max (z1 i) (z2 i) * \\<chi> (C i) t))\""], ["proof (prove)\nusing this:\n  max (f ?t2) (g ?t2) =\n  (\\<Sum>i\\<in>K. max (z1 i) (z2 i) * \\<chi> (C i) ?t2)\n\ngoal (1 subgoal):\n 1. upclose f g =\n    (\\<lambda>t. \\<Sum>i\\<in>K. max (z1 i) (z2 i) * \\<chi> (C i) t)", "by (simp add: upclose_def)"], ["proof (state)\nthis:\n  upclose f g =\n  (\\<lambda>t. \\<Sum>i\\<in>K. max (z1 i) (z2 i) * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "also"], ["proof (state)\nthis:\n  upclose f g =\n  (\\<lambda>t. \\<Sum>i\\<in>K. max (z1 i) (z2 i) * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "{"], ["proof (state)\nthis:\n  upclose f g =\n  (\\<lambda>t. \\<Sum>i\\<in>K. max (z1 i) (z2 i) * \\<chi> (C i) t)\n\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "from z1 z2"], ["proof (chain)\npicking this:\n  nonnegative z1\n  nonnegative z2", "have \"nonnegative (\\<lambda>i. max (z1 i) (z2 i))\""], ["proof (prove)\nusing this:\n  nonnegative z1\n  nonnegative z2\n\ngoal (1 subgoal):\n 1. nonnegative (\\<lambda>i. max (z1 i) (z2 i))", "by (simp add: nonnegative_def max_def)"], ["proof (state)\nthis:\n  nonnegative (\\<lambda>i. max (z1 i) (z2 i))\n\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "}"], ["proof (state)\nthis:\n  nonnegative (\\<lambda>i. max (z1 i) (z2 i))\n\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "with ms CK"], ["proof (chain)\npicking this:\n  measure_space M\n  finite K \\<and>\n  (\\<forall>i\\<in>K.\n      \\<forall>j\\<in>K.\n         i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n  (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n  \\<Union> (C ` K) = UNIV\n  nonnegative (\\<lambda>i. max (z1 i) (z2 i))", "have \"(\\<Sum>i\\<in>K. max (z1 i) (z2 i) * measure M (C i)) \\<in> sfis \\<dots> M\""], ["proof (prove)\nusing this:\n  measure_space M\n  finite K \\<and>\n  (\\<forall>i\\<in>K.\n      \\<forall>j\\<in>K.\n         i \\<noteq> j \\<longrightarrow> C i \\<inter> C j = {}) \\<and>\n  (\\<forall>i\\<in>K. C i \\<in> measurable_sets M) \\<and>\n  \\<Union> (C ` K) = UNIV\n  nonnegative (\\<lambda>i. max (z1 i) (z2 i))\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>K. max (z1 i) (z2 i) * Measure.measure M (C i))\n    \\<in> sfis\n           (\\<lambda>t. \\<Sum>i\\<in>K. max (z1 i) (z2 i) * \\<chi> (C i) t) M", "by (simp add: sfis_intro)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>K. max (z1 i) (z2 i) * Measure.measure M (C i))\n  \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>K. max (z1 i) (z2 i) * \\<chi> (C i) t)\n         M\n\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "ultimately"], ["proof (chain)\npicking this:\n  upclose f g =\n  (\\<lambda>t. \\<Sum>i\\<in>K. max (z1 i) (z2 i) * \\<chi> (C i) t)\n  (\\<Sum>i\\<in>K. max (z1 i) (z2 i) * Measure.measure M (C i))\n  \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>K. max (z1 i) (z2 i) * \\<chi> (C i) t)\n         M", "show ?thesis"], ["proof (prove)\nusing this:\n  upclose f g =\n  (\\<lambda>t. \\<Sum>i\\<in>K. max (z1 i) (z2 i) * \\<chi> (C i) t)\n  (\\<Sum>i\\<in>K. max (z1 i) (z2 i) * Measure.measure M (C i))\n  \\<in> sfis (\\<lambda>t. \\<Sum>i\\<in>K. max (z1 i) (z2 i) * \\<chi> (C i) t)\n         M\n\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (upclose f g) M", "by auto"], ["proof (state)\nthis:\n  \\<exists>c. c \\<in> sfis (upclose f g) M\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "lemma mu_sfis:\n  assumes u: \"\\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M\" and ms: \"measure_space M\"\n  shows \"\\<exists>c. \\<forall>m. c m \\<in> sfis (mu u m) M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>c. \\<forall>m. c m \\<in> sfis (mu u m) M", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>c. \\<forall>m. c m \\<in> sfis (mu u m) M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>c. \\<forall>m. c m \\<in> sfis (mu u m) M", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>c. \\<forall>m. c m \\<in> sfis (mu u m) M", "fix m"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>c. \\<forall>m. c m \\<in> sfis (mu u m) M", "from u ms"], ["proof (chain)\npicking this:\n  \\<exists>a. a \\<in> sfis (u ?m ?n) M\n  measure_space M", "have \"\\<And>n. \\<exists>c. c \\<in> sfis (muh m u n) M\""], ["proof (prove)\nusing this:\n  \\<exists>a. a \\<in> sfis (u ?m ?n) M\n  measure_space M\n\ngoal (1 subgoal):\n 1. \\<And>n. \\<exists>c. c \\<in> sfis (muh m u n) M", "proof (induct m)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>n.\n       \\<lbrakk>\\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n        measure_space M\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh 0 u n) M\n 2. \\<And>m n.\n       \\<lbrakk>\\<And>n.\n                   \\<lbrakk>\\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n                    measure_space M\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh m u n) M;\n        \\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n        measure_space M\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh (Suc m) u n) M", "case 0"], ["proof (state)\nthis:\n  \\<exists>a. a \\<in> sfis (u ?m ?n) M\n  measure_space M\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       \\<lbrakk>\\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n        measure_space M\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh 0 u n) M\n 2. \\<And>m n.\n       \\<lbrakk>\\<And>n.\n                   \\<lbrakk>\\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n                    measure_space M\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh m u n) M;\n        \\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n        measure_space M\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh (Suc m) u n) M", "from u"], ["proof (chain)\npicking this:\n  \\<exists>a. a \\<in> sfis (u ?m ?n) M", "show ?case"], ["proof (prove)\nusing this:\n  \\<exists>a. a \\<in> sfis (u ?m ?n) M\n\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (muh 0 u n) M", "by force"], ["proof (state)\nthis:\n  \\<exists>c. c \\<in> sfis (muh 0 u n) M\n\ngoal (1 subgoal):\n 1. \\<And>m n.\n       \\<lbrakk>\\<And>n.\n                   \\<lbrakk>\\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n                    measure_space M\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh m u n) M;\n        \\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n        measure_space M\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh (Suc m) u n) M", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>m n.\n       \\<lbrakk>\\<And>n.\n                   \\<lbrakk>\\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n                    measure_space M\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh m u n) M;\n        \\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n        measure_space M\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh (Suc m) u n) M", "case (Suc m)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n   measure_space M\\<rbrakk>\n  \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh m u ?n) M\n  \\<exists>a. a \\<in> sfis (u ?m ?n) M\n  measure_space M\n\ngoal (1 subgoal):\n 1. \\<And>m n.\n       \\<lbrakk>\\<And>n.\n                   \\<lbrakk>\\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n                    measure_space M\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh m u n) M;\n        \\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n        measure_space M\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh (Suc m) u n) M", "{"], ["proof (state)\nthis:\n  \\<lbrakk>\\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n   measure_space M\\<rbrakk>\n  \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh m u ?n) M\n  \\<exists>a. a \\<in> sfis (u ?m ?n) M\n  measure_space M\n\ngoal (1 subgoal):\n 1. \\<And>m n.\n       \\<lbrakk>\\<And>n.\n                   \\<lbrakk>\\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n                    measure_space M\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh m u n) M;\n        \\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n        measure_space M\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh (Suc m) u n) M", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>m n.\n       \\<lbrakk>\\<And>n.\n                   \\<lbrakk>\\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n                    measure_space M\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh m u n) M;\n        \\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n        measure_space M\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh (Suc m) u n) M", "from Suc"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n   measure_space M\\<rbrakk>\n  \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh m u ?n) M\n  \\<exists>a. a \\<in> sfis (u ?m ?n) M\n  measure_space M", "obtain a b where \"a \\<in> sfis (muh m u n) M\" and \"b \\<in> sfis (u n (Suc m)) M\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n   measure_space M\\<rbrakk>\n  \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh m u ?n) M\n  \\<exists>a. a \\<in> sfis (u ?m ?n) M\n  measure_space M\n\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        \\<lbrakk>a \\<in> sfis (muh m u n) M;\n         b \\<in> sfis (u n (Suc m)) M\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by force"], ["proof (state)\nthis:\n  a \\<in> sfis (muh m u n) M\n  b \\<in> sfis (u n (Suc m)) M\n\ngoal (1 subgoal):\n 1. \\<And>m n.\n       \\<lbrakk>\\<And>n.\n                   \\<lbrakk>\\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n                    measure_space M\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh m u n) M;\n        \\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n        measure_space M\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh (Suc m) u n) M", "with ms u"], ["proof (chain)\npicking this:\n  measure_space M\n  \\<exists>a. a \\<in> sfis (u ?m ?n) M\n  a \\<in> sfis (muh m u n) M\n  b \\<in> sfis (u n (Suc m)) M", "have \"\\<exists>a. a \\<in> sfis (muh (Suc m) u n) M\""], ["proof (prove)\nusing this:\n  measure_space M\n  \\<exists>a. a \\<in> sfis (u ?m ?n) M\n  a \\<in> sfis (muh m u n) M\n  b \\<in> sfis (u n (Suc m)) M\n\ngoal (1 subgoal):\n 1. \\<exists>a. a \\<in> sfis (muh (Suc m) u n) M", "by (simp add: upclose_sfis)"], ["proof (state)\nthis:\n  \\<exists>a. a \\<in> sfis (muh (Suc m) u n) M\n\ngoal (1 subgoal):\n 1. \\<And>m n.\n       \\<lbrakk>\\<And>n.\n                   \\<lbrakk>\\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n                    measure_space M\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh m u n) M;\n        \\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n        measure_space M\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh (Suc m) u n) M", "}"], ["proof (state)\nthis:\n  \\<exists>a. a \\<in> sfis (muh (Suc m) u ?na2) M\n\ngoal (1 subgoal):\n 1. \\<And>m n.\n       \\<lbrakk>\\<And>n.\n                   \\<lbrakk>\\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n                    measure_space M\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh m u n) M;\n        \\<And>m n. \\<exists>a. a \\<in> sfis (u m n) M;\n        measure_space M\\<rbrakk>\n       \\<Longrightarrow> \\<exists>c. c \\<in> sfis (muh (Suc m) u n) M", "thus ?case"], ["proof (prove)\nusing this:\n  \\<exists>a. a \\<in> sfis (muh (Suc m) u ?na2) M\n\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (muh (Suc m) u n) M", "by force"], ["proof (state)\nthis:\n  \\<exists>c. c \\<in> sfis (muh (Suc m) u n) M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>c. c \\<in> sfis (muh m u ?n) M\n\ngoal (1 subgoal):\n 1. \\<exists>c. \\<forall>m. c m \\<in> sfis (mu u m) M", "hence \"\\<exists>c. c \\<in> sfis (mu u m) M\""], ["proof (prove)\nusing this:\n  \\<exists>c. c \\<in> sfis (muh m u ?n) M\n\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<in> sfis (mu u m) M", "by (simp add: mon_upclose_def)"], ["proof (state)\nthis:\n  \\<exists>c. c \\<in> sfis (mu u m) M\n\ngoal (1 subgoal):\n 1. \\<exists>c. \\<forall>m. c m \\<in> sfis (mu u m) M", "}"], ["proof (state)\nthis:\n  \\<exists>c. c \\<in> sfis (mu u ?m2) M\n\ngoal (1 subgoal):\n 1. \\<exists>c. \\<forall>m. c m \\<in> sfis (mu u m) M", "hence \"\\<forall>m. \\<exists>c. c \\<in> sfis (mu u m) M\""], ["proof (prove)\nusing this:\n  \\<exists>c. c \\<in> sfis (mu u ?m2) M\n\ngoal (1 subgoal):\n 1. \\<forall>m. \\<exists>c. c \\<in> sfis (mu u m) M", "by simp"], ["proof (state)\nthis:\n  \\<forall>m. \\<exists>c. c \\<in> sfis (mu u m) M\n\ngoal (1 subgoal):\n 1. \\<exists>c. \\<forall>m. c m \\<in> sfis (mu u m) M", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>m. \\<exists>c. c \\<in> sfis (mu u m) M\n\ngoal (1 subgoal):\n 1. \\<exists>c. \\<forall>m. c m \\<in> sfis (mu u m) M", "by (rule choice)"], ["proof (state)\nthis:\n  \\<exists>c. \\<forall>m. c m \\<in> sfis (mu u m) M\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "lemma mu_help:\n  assumes uf: \"\\<And>n. (\\<lambda>m. u m n)\\<up>(f n)\" and fh: \"f\\<up>h\"\n  shows \"(mu u)\\<up>h\" and \"\\<And>n. mu u n \\<le> f n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mu u\\<up>h &&& (\\<And>n. mu u n \\<le> f n)", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. mu u\\<up>h\n 2. \\<And>n. mu u n \\<le> f n", "show mu_le: \"\\<And>n. mu u n \\<le> f n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. mu u n \\<le> f n", "proof (unfold mon_upclose_def)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n. muh n u n \\<le> f n", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n. muh n u n \\<le> f n", "show \"\\<And>m. muh n u m \\<le> f n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>m. muh n u m \\<le> f n", "proof (induct n)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>m. muh 0 u m \\<le> f 0\n 2. \\<And>n m.\n       (\\<And>m. muh n u m \\<le> f n) \\<Longrightarrow>\n       muh (Suc n) u m \\<le> f (Suc n)", "case (0 m)"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. \\<And>m. muh 0 u m \\<le> f 0\n 2. \\<And>n m.\n       (\\<And>m. muh n u m \\<le> f n) \\<Longrightarrow>\n       muh (Suc n) u m \\<le> f (Suc n)", "from uf"], ["proof (chain)\npicking this:\n  (\\<lambda>m. u m ?n)\\<up>f ?n", "have \"u m 0 \\<le> f 0\""], ["proof (prove)\nusing this:\n  (\\<lambda>m. u m ?n)\\<up>f ?n\n\ngoal (1 subgoal):\n 1. u m 0 \\<le> f 0", "by (rule realfun_mon_conv_le)"], ["proof (state)\nthis:\n  u m 0 \\<le> f 0\n\ngoal (2 subgoals):\n 1. \\<And>m. muh 0 u m \\<le> f 0\n 2. \\<And>n m.\n       (\\<And>m. muh n u m \\<le> f n) \\<Longrightarrow>\n       muh (Suc n) u m \\<le> f (Suc n)", "thus ?case"], ["proof (prove)\nusing this:\n  u m 0 \\<le> f 0\n\ngoal (1 subgoal):\n 1. muh 0 u m \\<le> f 0", "by simp"], ["proof (state)\nthis:\n  muh 0 u m \\<le> f 0\n\ngoal (1 subgoal):\n 1. \\<And>n m.\n       (\\<And>m. muh n u m \\<le> f n) \\<Longrightarrow>\n       muh (Suc n) u m \\<le> f (Suc n)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n m.\n       (\\<And>m. muh n u m \\<le> f n) \\<Longrightarrow>\n       muh (Suc n) u m \\<le> f (Suc n)", "case (Suc n m)"], ["proof (state)\nthis:\n  muh n u ?m \\<le> f n\n\ngoal (1 subgoal):\n 1. \\<And>n m.\n       (\\<And>m. muh n u m \\<le> f n) \\<Longrightarrow>\n       muh (Suc n) u m \\<le> f (Suc n)", "{"], ["proof (state)\nthis:\n  muh n u ?m \\<le> f n\n\ngoal (1 subgoal):\n 1. \\<And>n m.\n       (\\<And>m. muh n u m \\<le> f n) \\<Longrightarrow>\n       muh (Suc n) u m \\<le> f (Suc n)", "fix t"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n m.\n       (\\<And>m. muh n u m \\<le> f n) \\<Longrightarrow>\n       muh (Suc n) u m \\<le> f (Suc n)", "from Suc"], ["proof (chain)\npicking this:\n  muh n u ?m \\<le> f n", "have \"muh n u m t \\<le> f n t\""], ["proof (prove)\nusing this:\n  muh n u ?m \\<le> f n\n\ngoal (1 subgoal):\n 1. muh n u m t \\<le> f n t", "by (simp add: le_fun_def)"], ["proof (state)\nthis:\n  muh n u m t \\<le> f n t\n\ngoal (1 subgoal):\n 1. \\<And>n m.\n       (\\<And>m. muh n u m \\<le> f n) \\<Longrightarrow>\n       muh (Suc n) u m \\<le> f (Suc n)", "also"], ["proof (state)\nthis:\n  muh n u m t \\<le> f n t\n\ngoal (1 subgoal):\n 1. \\<And>n m.\n       (\\<And>m. muh n u m \\<le> f n) \\<Longrightarrow>\n       muh (Suc n) u m \\<le> f (Suc n)", "from fh"], ["proof (chain)\npicking this:\n  f\\<up>h", "have \"f n t \\<le> f (Suc n) t\""], ["proof (prove)\nusing this:\n  f\\<up>h\n\ngoal (1 subgoal):\n 1. f n t \\<le> f (Suc n) t", "by (simp add: realfun_mon_conv_iff mon_conv_real_def)"], ["proof (state)\nthis:\n  f n t \\<le> f (Suc n) t\n\ngoal (1 subgoal):\n 1. \\<And>n m.\n       (\\<And>m. muh n u m \\<le> f n) \\<Longrightarrow>\n       muh (Suc n) u m \\<le> f (Suc n)", "also"], ["proof (state)\nthis:\n  f n t \\<le> f (Suc n) t\n\ngoal (1 subgoal):\n 1. \\<And>n m.\n       (\\<And>m. muh n u m \\<le> f n) \\<Longrightarrow>\n       muh (Suc n) u m \\<le> f (Suc n)", "from uf"], ["proof (chain)\npicking this:\n  (\\<lambda>m. u m ?n)\\<up>f ?n", "have \"(\\<lambda>m. u m (Suc n) t)\\<up>(f (Suc n) t)\""], ["proof (prove)\nusing this:\n  (\\<lambda>m. u m ?n)\\<up>f ?n\n\ngoal (1 subgoal):\n 1. (\\<lambda>m. u m (Suc n) t)\\<up>f (Suc n) t", "by (simp add: realfun_mon_conv_iff)"], ["proof (state)\nthis:\n  (\\<lambda>m. u m (Suc n) t)\\<up>f (Suc n) t\n\ngoal (1 subgoal):\n 1. \\<And>n m.\n       (\\<And>m. muh n u m \\<le> f n) \\<Longrightarrow>\n       muh (Suc n) u m \\<le> f (Suc n)", "hence \"u m (Suc n) t \\<le> f (Suc n) t\""], ["proof (prove)\nusing this:\n  (\\<lambda>m. u m (Suc n) t)\\<up>f (Suc n) t\n\ngoal (1 subgoal):\n 1. u m (Suc n) t \\<le> f (Suc n) t", "by (rule real_mon_conv_le)"], ["proof (state)\nthis:\n  u m (Suc n) t \\<le> f (Suc n) t\n\ngoal (1 subgoal):\n 1. \\<And>n m.\n       (\\<And>m. muh n u m \\<le> f n) \\<Longrightarrow>\n       muh (Suc n) u m \\<le> f (Suc n)", "ultimately"], ["proof (chain)\npicking this:\n  muh n u m t \\<le> f (Suc n) t\n  u m (Suc n) t \\<le> f (Suc n) t", "have \"muh (Suc n) u m t \\<le> f (Suc n) t\""], ["proof (prove)\nusing this:\n  muh n u m t \\<le> f (Suc n) t\n  u m (Suc n) t \\<le> f (Suc n) t\n\ngoal (1 subgoal):\n 1. muh (Suc n) u m t \\<le> f (Suc n) t", "by (simp add: upclose_def)"], ["proof (state)\nthis:\n  muh (Suc n) u m t \\<le> f (Suc n) t\n\ngoal (1 subgoal):\n 1. \\<And>n m.\n       (\\<And>m. muh n u m \\<le> f n) \\<Longrightarrow>\n       muh (Suc n) u m \\<le> f (Suc n)", "}"], ["proof (state)\nthis:\n  muh (Suc n) u m ?t2 \\<le> f (Suc n) ?t2\n\ngoal (1 subgoal):\n 1. \\<And>n m.\n       (\\<And>m. muh n u m \\<le> f n) \\<Longrightarrow>\n       muh (Suc n) u m \\<le> f (Suc n)", "thus ?case"], ["proof (prove)\nusing this:\n  muh (Suc n) u m ?t2 \\<le> f (Suc n) ?t2\n\ngoal (1 subgoal):\n 1. muh (Suc n) u m \\<le> f (Suc n)", "by (simp add: le_fun_def)"], ["proof (state)\nthis:\n  muh (Suc n) u m \\<le> f (Suc n)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  muh n u ?m \\<le> f n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  mu u ?n \\<le> f ?n\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "(*isotony (?) of mu u is next to prove*)"], ["proof (state)\nthis:\n  mu u ?n \\<le> f ?n\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "{"], ["proof (state)\nthis:\n  mu u ?n \\<le> f ?n\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "fix t"], ["proof (state)\ngoal (1 subgoal):\n 1. mu u\\<up>h", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. mu u\\<up>h", "fix m n"], ["proof (state)\ngoal (1 subgoal):\n 1. mu u\\<up>h", "have \"muh n u m t \\<le> muh (Suc n) u m t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. muh n u m t \\<le> muh (Suc n) u m t", "by (simp add: upclose_def)"], ["proof (state)\nthis:\n  muh n u m t \\<le> muh (Suc n) u m t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "}"], ["proof (state)\nthis:\n  muh ?n2 u ?m2 t \\<le> muh (Suc ?n2) u ?m2 t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "hence pos1: \"\\<And>m n. muh n u m t \\<le> muh (Suc n) u m t\""], ["proof (prove)\nusing this:\n  muh ?n2 u ?m2 t \\<le> muh (Suc ?n2) u ?m2 t\n\ngoal (1 subgoal):\n 1. \\<And>m n. muh n u m t \\<le> muh (Suc n) u m t", "."], ["proof (state)\nthis:\n  muh ?n u ?m t \\<le> muh (Suc ?n) u ?m t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "from uf"], ["proof (chain)\npicking this:\n  (\\<lambda>m. u m ?n)\\<up>f ?n", "have uiso: \"\\<And>m n. u m n t \\<le> u (Suc m) n t\""], ["proof (prove)\nusing this:\n  (\\<lambda>m. u m ?n)\\<up>f ?n\n\ngoal (1 subgoal):\n 1. \\<And>m n. u m n t \\<le> u (Suc m) n t", "by (simp add: realfun_mon_conv_iff mon_conv_real_def)"], ["proof (state)\nthis:\n  u ?m ?n t \\<le> u (Suc ?m) ?n t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "have iso: \"\\<And>n. mu u n t \\<le> mu u (Suc n) t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. mu u n t \\<le> mu u (Suc n) t", "proof (unfold mon_upclose_def)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n. muh n u n t \\<le> muh (Suc n) u (Suc n) t", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n. muh n u n t \\<le> muh (Suc n) u (Suc n) t", "have \"\\<And>m. muh n u m t \\<le> muh n u (Suc m) t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>m. muh n u m t \\<le> muh n u (Suc m) t", "proof (induct n)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>m. muh 0 u m t \\<le> muh 0 u (Suc m) t\n 2. \\<And>n m.\n       (\\<And>m. muh n u m t \\<le> muh n u (Suc m) t) \\<Longrightarrow>\n       muh (Suc n) u m t \\<le> muh (Suc n) u (Suc m) t", "case 0"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. \\<And>m. muh 0 u m t \\<le> muh 0 u (Suc m) t\n 2. \\<And>n m.\n       (\\<And>m. muh n u m t \\<le> muh n u (Suc m) t) \\<Longrightarrow>\n       muh (Suc n) u m t \\<le> muh (Suc n) u (Suc m) t", "from uiso"], ["proof (chain)\npicking this:\n  u ?m ?n t \\<le> u (Suc ?m) ?n t", "show ?case"], ["proof (prove)\nusing this:\n  u ?m ?n t \\<le> u (Suc ?m) ?n t\n\ngoal (1 subgoal):\n 1. muh 0 u m t \\<le> muh 0 u (Suc m) t", "by (simp add: upclose_def le_max_iff_disj)"], ["proof (state)\nthis:\n  muh 0 u m t \\<le> muh 0 u (Suc m) t\n\ngoal (1 subgoal):\n 1. \\<And>n m.\n       (\\<And>m. muh n u m t \\<le> muh n u (Suc m) t) \\<Longrightarrow>\n       muh (Suc n) u m t \\<le> muh (Suc n) u (Suc m) t", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n m.\n       (\\<And>m. muh n u m t \\<le> muh n u (Suc m) t) \\<Longrightarrow>\n       muh (Suc n) u m t \\<le> muh (Suc n) u (Suc m) t", "case (Suc n m)"], ["proof (state)\nthis:\n  muh n u ?m t \\<le> muh n u (Suc ?m) t\n\ngoal (1 subgoal):\n 1. \\<And>n m.\n       (\\<And>m. muh n u m t \\<le> muh n u (Suc m) t) \\<Longrightarrow>\n       muh (Suc n) u m t \\<le> muh (Suc n) u (Suc m) t", "from Suc"], ["proof (chain)\npicking this:\n  muh n u ?m t \\<le> muh n u (Suc ?m) t", "have \"muh n u m t \\<le> muh n u (Suc m) t\""], ["proof (prove)\nusing this:\n  muh n u ?m t \\<le> muh n u (Suc ?m) t\n\ngoal (1 subgoal):\n 1. muh n u m t \\<le> muh n u (Suc m) t", "."], ["proof (state)\nthis:\n  muh n u m t \\<le> muh n u (Suc m) t\n\ngoal (1 subgoal):\n 1. \\<And>n m.\n       (\\<And>m. muh n u m t \\<le> muh n u (Suc m) t) \\<Longrightarrow>\n       muh (Suc n) u m t \\<le> muh (Suc n) u (Suc m) t", "also"], ["proof (state)\nthis:\n  muh n u m t \\<le> muh n u (Suc m) t\n\ngoal (1 subgoal):\n 1. \\<And>n m.\n       (\\<And>m. muh n u m t \\<le> muh n u (Suc m) t) \\<Longrightarrow>\n       muh (Suc n) u m t \\<le> muh (Suc n) u (Suc m) t", "from uiso"], ["proof (chain)\npicking this:\n  u ?m ?n t \\<le> u (Suc ?m) ?n t", "have \"u m (Suc n) t \\<le> u (Suc m) (Suc n) t\""], ["proof (prove)\nusing this:\n  u ?m ?n t \\<le> u (Suc ?m) ?n t\n\ngoal (1 subgoal):\n 1. u m (Suc n) t \\<le> u (Suc m) (Suc n) t", "."], ["proof (state)\nthis:\n  u m (Suc n) t \\<le> u (Suc m) (Suc n) t\n\ngoal (1 subgoal):\n 1. \\<And>n m.\n       (\\<And>m. muh n u m t \\<le> muh n u (Suc m) t) \\<Longrightarrow>\n       muh (Suc n) u m t \\<le> muh (Suc n) u (Suc m) t", "ultimately"], ["proof (chain)\npicking this:\n  muh n u m t \\<le> muh n u (Suc m) t\n  u m (Suc n) t \\<le> u (Suc m) (Suc n) t", "show ?case"], ["proof (prove)\nusing this:\n  muh n u m t \\<le> muh n u (Suc m) t\n  u m (Suc n) t \\<le> u (Suc m) (Suc n) t\n\ngoal (1 subgoal):\n 1. muh (Suc n) u m t \\<le> muh (Suc n) u (Suc m) t", "by (auto simp add: upclose_def le_max_iff_disj)"], ["proof (state)\nthis:\n  muh (Suc n) u m t \\<le> muh (Suc n) u (Suc m) t\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  muh n u ?m t \\<le> muh n u (Suc ?m) t\n\ngoal (1 subgoal):\n 1. \\<And>n. muh n u n t \\<le> muh (Suc n) u (Suc n) t", "note this [of n]"], ["proof (state)\nthis:\n  muh n u n t \\<le> muh n u (Suc n) t\n\ngoal (1 subgoal):\n 1. \\<And>n. muh n u n t \\<le> muh (Suc n) u (Suc n) t", "also"], ["proof (state)\nthis:\n  muh n u n t \\<le> muh n u (Suc n) t\n\ngoal (1 subgoal):\n 1. \\<And>n. muh n u n t \\<le> muh (Suc n) u (Suc n) t", "note pos1 [of n \"Suc n\"]"], ["proof (state)\nthis:\n  muh n u (Suc n) t \\<le> muh (Suc n) u (Suc n) t\n\ngoal (1 subgoal):\n 1. \\<And>n. muh n u n t \\<le> muh (Suc n) u (Suc n) t", "finally"], ["proof (chain)\npicking this:\n  muh n u n t \\<le> muh (Suc n) u (Suc n) t", "show \"muh n u n t \\<le> muh (Suc n) u (Suc n) t\""], ["proof (prove)\nusing this:\n  muh n u n t \\<le> muh (Suc n) u (Suc n) t\n\ngoal (1 subgoal):\n 1. muh n u n t \\<le> muh (Suc n) u (Suc n) t", "."], ["proof (state)\nthis:\n  muh n u n t \\<le> muh (Suc n) u (Suc n) t\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  mu u ?n t \\<le> mu u (Suc ?n) t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "also"], ["proof (state)\nthis:\n  mu u ?n t \\<le> mu u (Suc ?n) t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "{"], ["proof (state)\nthis:\n  mu u ?n t \\<le> mu u (Suc ?n) t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. mu u\\<up>h", "from mu_le [of n]"], ["proof (chain)\npicking this:\n  mu u n \\<le> f n", "have \"mu u n t \\<le> f n t\""], ["proof (prove)\nusing this:\n  mu u n \\<le> f n\n\ngoal (1 subgoal):\n 1. mu u n t \\<le> f n t", "by (simp add: le_fun_def)"], ["proof (state)\nthis:\n  mu u n t \\<le> f n t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "also"], ["proof (state)\nthis:\n  mu u n t \\<le> f n t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "from fh"], ["proof (chain)\npicking this:\n  f\\<up>h", "have \"(\\<lambda>n. f n t)\\<up>h t\""], ["proof (prove)\nusing this:\n  f\\<up>h\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. f n t)\\<up>h t", "by (simp add: realfun_mon_conv_iff)"], ["proof (state)\nthis:\n  (\\<lambda>n. f n t)\\<up>h t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "hence \"f n t \\<le> h t\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. f n t)\\<up>h t\n\ngoal (1 subgoal):\n 1. f n t \\<le> h t", "by (rule real_mon_conv_le)"], ["proof (state)\nthis:\n  f n t \\<le> h t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "finally"], ["proof (chain)\npicking this:\n  mu u n t \\<le> h t", "have \"mu u n t \\<le> h t\""], ["proof (prove)\nusing this:\n  mu u n t \\<le> h t\n\ngoal (1 subgoal):\n 1. mu u n t \\<le> h t", "."], ["proof (state)\nthis:\n  mu u n t \\<le> h t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "}"], ["proof (state)\nthis:\n  mu u ?n2 t \\<le> h t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "ultimately"], ["proof (chain)\npicking this:\n  mu u ?n t \\<le> mu u (Suc ?n) t\n  mu u ?n2 t \\<le> h t", "have \"\\<exists>l. (\\<lambda>n. mu u n t)\\<up>l \\<and> l \\<le> h t\""], ["proof (prove)\nusing this:\n  mu u ?n t \\<le> mu u (Suc ?n) t\n  mu u ?n2 t \\<le> h t\n\ngoal (1 subgoal):\n 1. \\<exists>l. (\\<lambda>n. mu u n t)\\<up>l \\<and> l \\<le> h t", "by (rule real_mon_conv_bound)"], ["proof (state)\nthis:\n  \\<exists>l. (\\<lambda>n. mu u n t)\\<up>l \\<and> l \\<le> h t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "then"], ["proof (chain)\npicking this:\n  \\<exists>l. (\\<lambda>n. mu u n t)\\<up>l \\<and> l \\<le> h t", "obtain l where \n      conv: \"(\\<lambda>n. mu u n t)\\<up>l\" and lh: \"l \\<le> h t\""], ["proof (prove)\nusing this:\n  \\<exists>l. (\\<lambda>n. mu u n t)\\<up>l \\<and> l \\<le> h t\n\ngoal (1 subgoal):\n 1. (\\<And>l.\n        \\<lbrakk>(\\<lambda>n. mu u n t)\\<up>l; l \\<le> h t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (force simp add: real_mon_conv_bound)"], ["proof (state)\nthis:\n  (\\<lambda>n. mu u n t)\\<up>l\n  l \\<le> h t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "{"], ["proof (state)\nthis:\n  (\\<lambda>n. mu u n t)\\<up>l\n  l \\<le> h t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "fix n::nat"], ["proof (state)\ngoal (1 subgoal):\n 1. mu u\\<up>h", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. mu u\\<up>h", "fix m"], ["proof (state)\ngoal (1 subgoal):\n 1. mu u\\<up>h", "assume le: \"n \\<le> m\""], ["proof (state)\nthis:\n  n \\<le> m\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "hence \"u m n t \\<le> mu u m t\""], ["proof (prove)\nusing this:\n  n \\<le> m\n\ngoal (1 subgoal):\n 1. u m n t \\<le> mu u m t", "proof (unfold mon_upclose_def)"], ["proof (state)\ngoal (1 subgoal):\n 1. n \\<le> m \\<Longrightarrow> u m n t \\<le> muh m u m t", "have \"u m n t \\<le> muh n u m t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. u m n t \\<le> muh n u m t", "by (induct n) (auto simp add: upclose_def le_max_iff_disj)"], ["proof (state)\nthis:\n  u m n t \\<le> muh n u m t\n\ngoal (1 subgoal):\n 1. n \\<le> m \\<Longrightarrow> u m n t \\<le> muh m u m t", "also"], ["proof (state)\nthis:\n  u m n t \\<le> muh n u m t\n\ngoal (1 subgoal):\n 1. n \\<le> m \\<Longrightarrow> u m n t \\<le> muh m u m t", "from pos1"], ["proof (chain)\npicking this:\n  muh ?n u ?m t \\<le> muh (Suc ?n) u ?m t", "have \"incseq (\\<lambda>n. muh n u m t)\""], ["proof (prove)\nusing this:\n  muh ?n u ?m t \\<le> muh (Suc ?n) u ?m t\n\ngoal (1 subgoal):\n 1. incseq (\\<lambda>n. muh n u m t)", "by (simp add: incseq_Suc_iff)"], ["proof (state)\nthis:\n  incseq (\\<lambda>n. muh n u m t)\n\ngoal (1 subgoal):\n 1. n \\<le> m \\<Longrightarrow> u m n t \\<le> muh m u m t", "hence \"muh n u m t \\<le> muh (n+(m-n)) u m t\""], ["proof (prove)\nusing this:\n  incseq (\\<lambda>n. muh n u m t)\n\ngoal (1 subgoal):\n 1. muh n u m t \\<le> muh (n + (m - n)) u m t", "unfolding incseq_def"], ["proof (prove)\nusing this:\n  \\<forall>ma n. ma \\<le> n \\<longrightarrow> muh ma u m t \\<le> muh n u m t\n\ngoal (1 subgoal):\n 1. muh n u m t \\<le> muh (n + (m - n)) u m t", "by simp"], ["proof (state)\nthis:\n  muh n u m t \\<le> muh (n + (m - n)) u m t\n\ngoal (1 subgoal):\n 1. n \\<le> m \\<Longrightarrow> u m n t \\<le> muh m u m t", "with le"], ["proof (chain)\npicking this:\n  n \\<le> m\n  muh n u m t \\<le> muh (n + (m - n)) u m t", "have \"muh n u m t \\<le> muh m u m t\""], ["proof (prove)\nusing this:\n  n \\<le> m\n  muh n u m t \\<le> muh (n + (m - n)) u m t\n\ngoal (1 subgoal):\n 1. muh n u m t \\<le> muh m u m t", "by simp"], ["proof (state)\nthis:\n  muh n u m t \\<le> muh m u m t\n\ngoal (1 subgoal):\n 1. n \\<le> m \\<Longrightarrow> u m n t \\<le> muh m u m t", "finally"], ["proof (chain)\npicking this:\n  u m n t \\<le> muh m u m t", "show \"u m n t \\<le> muh m u m t\""], ["proof (prove)\nusing this:\n  u m n t \\<le> muh m u m t\n\ngoal (1 subgoal):\n 1. u m n t \\<le> muh m u m t", "."], ["proof (state)\nthis:\n  u m n t \\<le> muh m u m t\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  u m n t \\<le> mu u m t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "}"], ["proof (state)\nthis:\n  n \\<le> ?m2 \\<Longrightarrow> u ?m2 n t \\<le> mu u ?m2 t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "hence \"\\<exists>N. \\<forall>m. N \\<le> m \\<longrightarrow> u m n t \\<le> mu u m t\""], ["proof (prove)\nusing this:\n  n \\<le> ?m2 \\<Longrightarrow> u ?m2 n t \\<le> mu u ?m2 t\n\ngoal (1 subgoal):\n 1. \\<exists>N. \\<forall>m\\<ge>N. u m n t \\<le> mu u m t", "by blast"], ["proof (state)\nthis:\n  \\<exists>N. \\<forall>m\\<ge>N. u m n t \\<le> mu u m t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "also"], ["proof (state)\nthis:\n  \\<exists>N. \\<forall>m\\<ge>N. u m n t \\<le> mu u m t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "from uf"], ["proof (chain)\npicking this:\n  (\\<lambda>m. u m ?n)\\<up>f ?n", "have \"(\\<lambda>m. u m n t) \\<longlonglongrightarrow> f n t\""], ["proof (prove)\nusing this:\n  (\\<lambda>m. u m ?n)\\<up>f ?n\n\ngoal (1 subgoal):\n 1. (\\<lambda>m. u m n t) \\<longlonglongrightarrow> f n t", "by (simp add: realfun_mon_conv_iff mon_conv_real_def)"], ["proof (state)\nthis:\n  (\\<lambda>m. u m n t) \\<longlonglongrightarrow> f n t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "moreover"], ["proof (state)\nthis:\n  (\\<lambda>m. u m n t) \\<longlonglongrightarrow> f n t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "from conv"], ["proof (chain)\npicking this:\n  (\\<lambda>n. mu u n t)\\<up>l", "have \"(\\<lambda>n. mu u n t) \\<longlonglongrightarrow> l\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. mu u n t)\\<up>l\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. mu u n t) \\<longlonglongrightarrow> l", "by (simp add: mon_conv_real_def)"], ["proof (state)\nthis:\n  (\\<lambda>n. mu u n t) \\<longlonglongrightarrow> l\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "ultimately"], ["proof (chain)\npicking this:\n  \\<exists>N. \\<forall>m\\<ge>N. u m n t \\<le> mu u m t\n  (\\<lambda>m. u m n t) \\<longlonglongrightarrow> f n t\n  (\\<lambda>n. mu u n t) \\<longlonglongrightarrow> l", "have \"f n t \\<le> l\""], ["proof (prove)\nusing this:\n  \\<exists>N. \\<forall>m\\<ge>N. u m n t \\<le> mu u m t\n  (\\<lambda>m. u m n t) \\<longlonglongrightarrow> f n t\n  (\\<lambda>n. mu u n t) \\<longlonglongrightarrow> l\n\ngoal (1 subgoal):\n 1. f n t \\<le> l", "by (simp add: LIMSEQ_le)"], ["proof (state)\nthis:\n  f n t \\<le> l\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "}"], ["proof (state)\nthis:\n  f ?n2 t \\<le> l\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "also"], ["proof (state)\nthis:\n  f ?n2 t \\<le> l\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "from fh"], ["proof (chain)\npicking this:\n  f\\<up>h", "have \"(\\<lambda>n. f n t) \\<longlonglongrightarrow> h t\""], ["proof (prove)\nusing this:\n  f\\<up>h\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. f n t) \\<longlonglongrightarrow> h t", "by (simp add: realfun_mon_conv_iff mon_conv_real_def)"], ["proof (state)\nthis:\n  (\\<lambda>n. f n t) \\<longlonglongrightarrow> h t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "ultimately"], ["proof (chain)\npicking this:\n  f ?n2 t \\<le> l\n  (\\<lambda>n. f n t) \\<longlonglongrightarrow> h t", "have \"h t \\<le> l\""], ["proof (prove)\nusing this:\n  f ?n2 t \\<le> l\n  (\\<lambda>n. f n t) \\<longlonglongrightarrow> h t\n\ngoal (1 subgoal):\n 1. h t \\<le> l", "by (simp add: LIMSEQ_le_const2)"], ["proof (state)\nthis:\n  h t \\<le> l\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "with lh"], ["proof (chain)\npicking this:\n  l \\<le> h t\n  h t \\<le> l", "have \"l = h t\""], ["proof (prove)\nusing this:\n  l \\<le> h t\n  h t \\<le> l\n\ngoal (1 subgoal):\n 1. l = h t", "by simp"], ["proof (state)\nthis:\n  l = h t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "with conv"], ["proof (chain)\npicking this:\n  (\\<lambda>n. mu u n t)\\<up>l\n  l = h t", "have \"(\\<lambda>n. mu u n t)\\<up>(h t)\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. mu u n t)\\<up>l\n  l = h t\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. mu u n t)\\<up>h t", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>n. mu u n t)\\<up>h t\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "}"], ["proof (state)\nthis:\n  (\\<lambda>n. mu u n ?t2)\\<up>h ?t2\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "with mon_upclose_def"], ["proof (chain)\npicking this:\n  mu ?u ?m = muh ?m ?u ?m\n  (\\<lambda>n. mu u n ?t2)\\<up>h ?t2", "show \"mu u\\<up>h\""], ["proof (prove)\nusing this:\n  mu ?u ?m = muh ?m ?u ?m\n  (\\<lambda>n. mu u n ?t2)\\<up>h ?t2\n\ngoal (1 subgoal):\n 1. mu u\\<up>h", "by (simp add: realfun_mon_conv_iff)"], ["proof (state)\nthis:\n  mu u\\<up>h\n\ngoal:\nNo subgoals!", "qed"], ["", "(* The Beppo Levi - Theorem *)"], ["", "theorem nnfis_mon_conv:\n  assumes fh: \"f\\<up>h\" and xf: \"\\<And>n. x n \\<in> nnfis (f n) M\" and xy: \"x\\<up>y\"\n  and ms: \"measure_space M\"\n  shows \"y \\<in> nnfis h M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "define u where \"u n = (SOME u. u\\<up>(f n) \\<and> (\\<forall>m. \\<exists>a. a \\<in> sfis (u m) M))\" for n"], ["proof (state)\nthis:\n  u ?n =\n  (SOME u. u\\<up>f ?n \\<and> (\\<forall>m. \\<exists>a. a \\<in> sfis (u m) M))\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "{"], ["proof (state)\nthis:\n  u ?n =\n  (SOME u. u\\<up>f ?n \\<and> (\\<forall>m. \\<exists>a. a \\<in> sfis (u m) M))\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "from xf[of n]"], ["proof (chain)\npicking this:\n  x n \\<in> nnfis (f n) M", "have \"\\<exists>u. u\\<up>(f n) \\<and> (\\<forall>m. \\<exists>a. a \\<in> sfis (u m) M)\" (is \"\\<exists>x. ?P x\")"], ["proof (prove)\nusing this:\n  x n \\<in> nnfis (f n) M\n\ngoal (1 subgoal):\n 1. \\<exists>u.\n       u\\<up>f n \\<and> (\\<forall>m. \\<exists>a. a \\<in> sfis (u m) M)", "proof (cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u xa.\n       \\<lbrakk>u\\<up>f n; \\<And>n. xa n \\<in> sfis (u n) M;\n        xa\\<up>x n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            u\\<up>f n \\<and>\n                            (\\<forall>m. \\<exists>a. a \\<in> sfis (u m) M)", "case (base r a)"], ["proof (state)\nthis:\n  r\\<up>f n\n  a ?n \\<in> sfis (r ?n) M\n  a\\<up>x n\n\ngoal (1 subgoal):\n 1. \\<And>u xa.\n       \\<lbrakk>u\\<up>f n; \\<And>n. xa n \\<in> sfis (u n) M;\n        xa\\<up>x n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            u\\<up>f n \\<and>\n                            (\\<forall>m. \\<exists>a. a \\<in> sfis (u m) M)", "hence \"r\\<up>(f n)\" and \"\\<And>m. \\<exists>a. a \\<in> sfis (r m) M\""], ["proof (prove)\nusing this:\n  r\\<up>f n\n  a ?n \\<in> sfis (r ?n) M\n  a\\<up>x n\n\ngoal (1 subgoal):\n 1. r\\<up>f n &&& (\\<And>m. \\<exists>a. a \\<in> sfis (r m) M)", "by auto"], ["proof (state)\nthis:\n  r\\<up>f n\n  \\<exists>a. a \\<in> sfis (r ?m) M\n\ngoal (1 subgoal):\n 1. \\<And>u xa.\n       \\<lbrakk>u\\<up>f n; \\<And>n. xa n \\<in> sfis (u n) M;\n        xa\\<up>x n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            u\\<up>f n \\<and>\n                            (\\<forall>m. \\<exists>a. a \\<in> sfis (u m) M)", "thus ?thesis"], ["proof (prove)\nusing this:\n  r\\<up>f n\n  \\<exists>a. a \\<in> sfis (r ?m) M\n\ngoal (1 subgoal):\n 1. \\<exists>u.\n       u\\<up>f n \\<and> (\\<forall>m. \\<exists>a. a \\<in> sfis (u m) M)", "by fast"], ["proof (state)\nthis:\n  \\<exists>u.\n     u\\<up>f n \\<and> (\\<forall>m. \\<exists>a. a \\<in> sfis (u m) M)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>u.\n     u\\<up>f n \\<and> (\\<forall>m. \\<exists>a. a \\<in> sfis (u m) M)\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "hence \"?P (SOME x. ?P x)\""], ["proof (prove)\nusing this:\n  \\<exists>u.\n     u\\<up>f n \\<and> (\\<forall>m. \\<exists>a. a \\<in> sfis (u m) M)\n\ngoal (1 subgoal):\n 1. (SOME x.\n        x\\<up>f n \\<and>\n        (\\<forall>m. \\<exists>a. a \\<in> sfis (x m) M))\\<up>f n \\<and>\n    (\\<forall>m.\n        \\<exists>a.\n           a \\<in> sfis\n                    ((SOME x.\n                         x\\<up>f n \\<and>\n                         (\\<forall>m. \\<exists>a. a \\<in> sfis (x m) M))\n                      m)\n                    M)", "by (rule someI_ex)"], ["proof (state)\nthis:\n  (SOME x.\n      x\\<up>f n \\<and>\n      (\\<forall>m. \\<exists>a. a \\<in> sfis (x m) M))\\<up>f n \\<and>\n  (\\<forall>m.\n      \\<exists>a.\n         a \\<in> sfis\n                  ((SOME x.\n                       x\\<up>f n \\<and>\n                       (\\<forall>m. \\<exists>a. a \\<in> sfis (x m) M))\n                    m)\n                  M)\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "with u_def"], ["proof (chain)\npicking this:\n  u ?n =\n  (SOME u. u\\<up>f ?n \\<and> (\\<forall>m. \\<exists>a. a \\<in> sfis (u m) M))\n  (SOME x.\n      x\\<up>f n \\<and>\n      (\\<forall>m. \\<exists>a. a \\<in> sfis (x m) M))\\<up>f n \\<and>\n  (\\<forall>m.\n      \\<exists>a.\n         a \\<in> sfis\n                  ((SOME x.\n                       x\\<up>f n \\<and>\n                       (\\<forall>m. \\<exists>a. a \\<in> sfis (x m) M))\n                    m)\n                  M)", "have \"?P (u n)\""], ["proof (prove)\nusing this:\n  u ?n =\n  (SOME u. u\\<up>f ?n \\<and> (\\<forall>m. \\<exists>a. a \\<in> sfis (u m) M))\n  (SOME x.\n      x\\<up>f n \\<and>\n      (\\<forall>m. \\<exists>a. a \\<in> sfis (x m) M))\\<up>f n \\<and>\n  (\\<forall>m.\n      \\<exists>a.\n         a \\<in> sfis\n                  ((SOME x.\n                       x\\<up>f n \\<and>\n                       (\\<forall>m. \\<exists>a. a \\<in> sfis (x m) M))\n                    m)\n                  M)\n\ngoal (1 subgoal):\n 1. u n\\<up>f n \\<and> (\\<forall>m. \\<exists>a. a \\<in> sfis (u n m) M)", "by simp"], ["proof (state)\nthis:\n  u n\\<up>f n \\<and> (\\<forall>m. \\<exists>a. a \\<in> sfis (u n m) M)\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "}"], ["proof (state)\nthis:\n  u ?n2\\<up>f ?n2 \\<and> (\\<forall>m. \\<exists>a. a \\<in> sfis (u ?n2 m) M)\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "also"], ["proof (state)\nthis:\n  u ?n2\\<up>f ?n2 \\<and> (\\<forall>m. \\<exists>a. a \\<in> sfis (u ?n2 m) M)\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "define urev where \"urev m n = u n m\" for m n"], ["proof (state)\nthis:\n  urev ?m ?n = u ?n ?m\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "ultimately"], ["proof (chain)\npicking this:\n  u ?n2\\<up>f ?n2 \\<and> (\\<forall>m. \\<exists>a. a \\<in> sfis (u ?n2 m) M)\n  urev ?m ?n = u ?n ?m", "have uf: \"\\<And>n. (\\<lambda>m. urev m n)\\<up>(f n)\" \n    and sf: \"\\<And>n m. \\<exists>a. a \\<in> sfis (urev m n) M\""], ["proof (prove)\nusing this:\n  u ?n2\\<up>f ?n2 \\<and> (\\<forall>m. \\<exists>a. a \\<in> sfis (u ?n2 m) M)\n  urev ?m ?n = u ?n ?m\n\ngoal (1 subgoal):\n 1. (\\<And>n. (\\<lambda>m. urev m n)\\<up>f n) &&&\n    (\\<And>n m. \\<exists>a. a \\<in> sfis (urev m n) M)", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>m. urev m ?n)\\<up>f ?n\n  \\<exists>a. a \\<in> sfis (urev ?m ?n) M\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "from uf fh"], ["proof (chain)\npicking this:\n  (\\<lambda>m. urev m ?n)\\<up>f ?n\n  f\\<up>h", "have up: \"mu urev\\<up>h\""], ["proof (prove)\nusing this:\n  (\\<lambda>m. urev m ?n)\\<up>f ?n\n  f\\<up>h\n\ngoal (1 subgoal):\n 1. mu urev\\<up>h", "by (rule mu_help)"], ["proof (state)\nthis:\n  mu urev\\<up>h\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "(*Could split the mu_help lemma in two*)"], ["proof (state)\nthis:\n  mu urev\\<up>h\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "from uf fh"], ["proof (chain)\npicking this:\n  (\\<lambda>m. urev m ?n)\\<up>f ?n\n  f\\<up>h", "have le: \"\\<And>n. mu urev n \\<le> f n\""], ["proof (prove)\nusing this:\n  (\\<lambda>m. urev m ?n)\\<up>f ?n\n  f\\<up>h\n\ngoal (1 subgoal):\n 1. \\<And>n. mu urev n \\<le> f n", "by (rule mu_help)"], ["proof (state)\nthis:\n  mu urev ?n \\<le> f ?n\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "from sf ms"], ["proof (chain)\npicking this:\n  \\<exists>a. a \\<in> sfis (urev ?m ?n) M\n  measure_space M", "obtain c where sf2: \"\\<And>m. c m \\<in> sfis (mu urev m) M\""], ["proof (prove)\nusing this:\n  \\<exists>a. a \\<in> sfis (urev ?m ?n) M\n  measure_space M\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        (\\<And>m. c m \\<in> sfis (mu urev m) M) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (force simp add: mu_sfis)"], ["proof (state)\nthis:\n  c ?m \\<in> sfis (mu urev ?m) M\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "{"], ["proof (state)\nthis:\n  c ?m \\<in> sfis (mu urev ?m) M\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "fix m"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "from sf2"], ["proof (chain)\npicking this:\n  c ?m \\<in> sfis (mu urev ?m) M", "have \"c m \\<in> nnfis (mu urev m) M\""], ["proof (prove)\nusing this:\n  c ?m \\<in> sfis (mu urev ?m) M\n\ngoal (1 subgoal):\n 1. c m \\<in> nnfis (mu urev m) M", "by (rule sfis_nnfis)"], ["proof (state)\nthis:\n  c m \\<in> nnfis (mu urev m) M\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "with ms le[of m] xf[of m]"], ["proof (chain)\npicking this:\n  measure_space M\n  mu urev m \\<le> f m\n  x m \\<in> nnfis (f m) M\n  c m \\<in> nnfis (mu urev m) M", "have \"c m \\<le> x m\""], ["proof (prove)\nusing this:\n  measure_space M\n  mu urev m \\<le> f m\n  x m \\<in> nnfis (f m) M\n  c m \\<in> nnfis (mu urev m) M\n\ngoal (1 subgoal):\n 1. c m \\<le> x m", "by (simp add: nnfis_mono)"], ["proof (state)\nthis:\n  c m \\<le> x m\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "}"], ["proof (state)\nthis:\n  c ?m2 \\<le> x ?m2\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "hence \"c \\<le> x\""], ["proof (prove)\nusing this:\n  c ?m2 \\<le> x ?m2\n\ngoal (1 subgoal):\n 1. c \\<le> x", "by (simp add: le_fun_def)"], ["proof (state)\nthis:\n  c \\<le> x\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "also"], ["proof (state)\nthis:\n  c \\<le> x\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "{"], ["proof (state)\nthis:\n  c \\<le> x\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "fix m"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "note ms"], ["proof (state)\nthis:\n  measure_space M\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "also"], ["proof (state)\nthis:\n  measure_space M\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "from up"], ["proof (chain)\npicking this:\n  mu urev\\<up>h", "have \"mu urev m \\<le> mu urev (Suc m)\""], ["proof (prove)\nusing this:\n  mu urev\\<up>h\n\ngoal (1 subgoal):\n 1. mu urev m \\<le> mu urev (Suc m)", "by (simp add: mon_conv_real_fun_def)"], ["proof (state)\nthis:\n  mu urev m \\<le> mu urev (Suc m)\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "moreover"], ["proof (state)\nthis:\n  mu urev m \\<le> mu urev (Suc m)\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "from sf2"], ["proof (chain)\npicking this:\n  c ?m \\<in> sfis (mu urev ?m) M", "have \"c m \\<in> sfis (mu urev m) M\" \n      and \"c (Suc m) \\<in> sfis (mu urev (Suc m)) M\""], ["proof (prove)\nusing this:\n  c ?m \\<in> sfis (mu urev ?m) M\n\ngoal (1 subgoal):\n 1. c m \\<in> sfis (mu urev m) M &&&\n    c (Suc m) \\<in> sfis (mu urev (Suc m)) M", "by fast+"], ["proof (state)\nthis:\n  c m \\<in> sfis (mu urev m) M\n  c (Suc m) \\<in> sfis (mu urev (Suc m)) M\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "ultimately"], ["proof (chain)\npicking this:\n  measure_space M\n  mu urev m \\<le> mu urev (Suc m)\n  c m \\<in> sfis (mu urev m) M\n  c (Suc m) \\<in> sfis (mu urev (Suc m)) M", "have \"c m \\<le> c (Suc m)\""], ["proof (prove)\nusing this:\n  measure_space M\n  mu urev m \\<le> mu urev (Suc m)\n  c m \\<in> sfis (mu urev m) M\n  c (Suc m) \\<in> sfis (mu urev (Suc m)) M\n\ngoal (1 subgoal):\n 1. c m \\<le> c (Suc m)", "by (simp add: sfis_mono)"], ["proof (state)\nthis:\n  c m \\<le> c (Suc m)\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "}"], ["proof (state)\nthis:\n  c ?m2 \\<le> c (Suc ?m2)\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "moreover"], ["proof (state)\nthis:\n  c ?m2 \\<le> c (Suc ?m2)\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "note xy"], ["proof (state)\nthis:\n  x\\<up>y\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "ultimately"], ["proof (chain)\npicking this:\n  c \\<le> x\n  c ?m2 \\<le> c (Suc ?m2)\n  x\\<up>y", "have \"\\<exists>l. c\\<up>l \\<and> l \\<le> y\""], ["proof (prove)\nusing this:\n  c \\<le> x\n  c ?m2 \\<le> c (Suc ?m2)\n  x\\<up>y\n\ngoal (1 subgoal):\n 1. \\<exists>l. c\\<up>l \\<and> l \\<le> y", "by (simp add: real_mon_conv_dom)"], ["proof (state)\nthis:\n  \\<exists>l. c\\<up>l \\<and> l \\<le> y\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "then"], ["proof (chain)\npicking this:\n  \\<exists>l. c\\<up>l \\<and> l \\<le> y", "obtain l where cl: \"c\\<up>l\" and ly: \"l \\<le> y\""], ["proof (prove)\nusing this:\n  \\<exists>l. c\\<up>l \\<and> l \\<le> y\n\ngoal (1 subgoal):\n 1. (\\<And>l.\n        \\<lbrakk>c\\<up>l; l \\<le> y\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fast"], ["proof (state)\nthis:\n  c\\<up>l\n  l \\<le> y\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "from up sf2 cl"], ["proof (chain)\npicking this:\n  mu urev\\<up>h\n  c ?m \\<in> sfis (mu urev ?m) M\n  c\\<up>l", "have int: \"l \\<in> nnfis h M\""], ["proof (prove)\nusing this:\n  mu urev\\<up>h\n  c ?m \\<in> sfis (mu urev ?m) M\n  c\\<up>l\n\ngoal (1 subgoal):\n 1. l \\<in> nnfis h M", "by (rule nnfis.base)"], ["proof (state)\nthis:\n  l \\<in> nnfis h M\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "{"], ["proof (state)\nthis:\n  l \\<in> nnfis h M\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "from fh"], ["proof (chain)\npicking this:\n  f\\<up>h", "have \"f n \\<le> h\""], ["proof (prove)\nusing this:\n  f\\<up>h\n\ngoal (1 subgoal):\n 1. f n \\<le> h", "by (rule realfun_mon_conv_le)"], ["proof (state)\nthis:\n  f n \\<le> h\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "with ms xf[of n] int"], ["proof (chain)\npicking this:\n  measure_space M\n  x n \\<in> nnfis (f n) M\n  l \\<in> nnfis h M\n  f n \\<le> h", "have \"x n \\<le> l\""], ["proof (prove)\nusing this:\n  measure_space M\n  x n \\<in> nnfis (f n) M\n  l \\<in> nnfis h M\n  f n \\<le> h\n\ngoal (1 subgoal):\n 1. x n \\<le> l", "by (rule nnfis_mono)"], ["proof (state)\nthis:\n  x n \\<le> l\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "}"], ["proof (state)\nthis:\n  x ?n2 \\<le> l\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "with xy"], ["proof (chain)\npicking this:\n  x\\<up>y\n  x ?n2 \\<le> l", "have \"y \\<le> l\""], ["proof (prove)\nusing this:\n  x\\<up>y\n  x ?n2 \\<le> l\n\ngoal (1 subgoal):\n 1. y \\<le> l", "by (auto simp add: mon_conv_real_def LIMSEQ_le_const2)"], ["proof (state)\nthis:\n  y \\<le> l\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "with ly"], ["proof (chain)\npicking this:\n  l \\<le> y\n  y \\<le> l", "have \"l=y\""], ["proof (prove)\nusing this:\n  l \\<le> y\n  y \\<le> l\n\ngoal (1 subgoal):\n 1. l = y", "by simp"], ["proof (state)\nthis:\n  l = y\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "with int"], ["proof (chain)\npicking this:\n  l \\<in> nnfis h M\n  l = y", "show ?thesis"], ["proof (prove)\nusing this:\n  l \\<in> nnfis h M\n  l = y\n\ngoal (1 subgoal):\n 1. y \\<in> nnfis h M", "by simp"], ["proof (state)\nthis:\n  y \\<in> nnfis h M\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>Establishing that only nonnegative functions may arise this way\n  is a triviality.\\<close>"], ["", "lemma nnfis_nn: assumes \"a \\<in> nnfis f M\"\n  shows \"nonnegative f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nonnegative f", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nonnegative f", "using assms"], ["proof (prove)\nusing this:\n  a \\<in> nnfis f M\n\ngoal (1 subgoal):\n 1. nonnegative f", "proof cases"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> nonnegative f", "case (base u x)"], ["proof (state)\nthis:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> nonnegative f", "{"], ["proof (state)\nthis:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> nonnegative f", "fix t"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> nonnegative f", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> nonnegative f", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> nonnegative f", "from base"], ["proof (chain)\npicking this:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a", "have \"x n \\<in> sfis (u n) M\""], ["proof (prove)\nusing this:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n\ngoal (1 subgoal):\n 1. x n \\<in> sfis (u n) M", "by fast"], ["proof (state)\nthis:\n  x n \\<in> sfis (u n) M\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> nonnegative f", "hence \"nonnegative (u n)\""], ["proof (prove)\nusing this:\n  x n \\<in> sfis (u n) M\n\ngoal (1 subgoal):\n 1. nonnegative (u n)", "by (rule sfis_nn)"], ["proof (state)\nthis:\n  nonnegative (u n)\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> nonnegative f", "hence \"0 \\<le> u n t\""], ["proof (prove)\nusing this:\n  nonnegative (u n)\n\ngoal (1 subgoal):\n 1. 0 \\<le> u n t", "by (simp add: nonnegative_def)"], ["proof (state)\nthis:\n  0 \\<le> u n t\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> nonnegative f", "}"], ["proof (state)\nthis:\n  0 \\<le> u ?n2 t\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> nonnegative f", "also"], ["proof (state)\nthis:\n  0 \\<le> u ?n2 t\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> nonnegative f", "from base"], ["proof (chain)\npicking this:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a", "have \"(\\<lambda>n. u n t)\\<longlonglongrightarrow>f t\""], ["proof (prove)\nusing this:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. u n t) \\<longlonglongrightarrow> f t", "by (simp add: realfun_mon_conv_iff mon_conv_real_def)"], ["proof (state)\nthis:\n  (\\<lambda>n. u n t) \\<longlonglongrightarrow> f t\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> nonnegative f", "ultimately"], ["proof (chain)\npicking this:\n  0 \\<le> u ?n2 t\n  (\\<lambda>n. u n t) \\<longlonglongrightarrow> f t", "have \"0 \\<le> f t\""], ["proof (prove)\nusing this:\n  0 \\<le> u ?n2 t\n  (\\<lambda>n. u n t) \\<longlonglongrightarrow> f t\n\ngoal (1 subgoal):\n 1. 0 \\<le> f t", "by (simp add: LIMSEQ_le_const)"], ["proof (state)\nthis:\n  0 \\<le> f t\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> nonnegative f", "}"], ["proof (state)\nthis:\n  0 \\<le> f ?t2\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> nonnegative f", "thus ?thesis"], ["proof (prove)\nusing this:\n  0 \\<le> f ?t2\n\ngoal (1 subgoal):\n 1. nonnegative f", "by (simp add: nonnegative_def)"], ["proof (state)\nthis:\n  nonnegative f\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)(*>*)"], ["", "subsection \\<open>Integrable Functions\\<close>"], ["", "text\\<open>\n  Before we take the final step of defining integrability and the\n  integral operator, we should first clarify what kind of functions we\n  are able to integrate up to now. It is easy to see that all nonnegative integrable\n  functions are random variables.\\<close>"], ["", "lemma assumes (*<*)ms:(*>*) \"measure_space M\" and (*<*)f:(*>*) \"a \\<in> nnfis f M\"\n  shows nnfis_rv: \"f \\<in> rv M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> rv M", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> rv M", "using f"], ["proof (prove)\nusing this:\n  a \\<in> nnfis f M\n\ngoal (1 subgoal):\n 1. f \\<in> rv M", "proof (cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> f \\<in> rv M", "case (base u x)"], ["proof (state)\nthis:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> f \\<in> rv M", "{"], ["proof (state)\nthis:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> f \\<in> rv M", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> f \\<in> rv M", "from base"], ["proof (chain)\npicking this:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a", "have \"x n \\<in> sfis (u n) M\""], ["proof (prove)\nusing this:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n\ngoal (1 subgoal):\n 1. x n \\<in> sfis (u n) M", "by simp"], ["proof (state)\nthis:\n  x n \\<in> sfis (u n) M\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> f \\<in> rv M", "with ms"], ["proof (chain)\npicking this:\n  measure_space M\n  x n \\<in> sfis (u n) M", "have \"u n \\<in> rv M\""], ["proof (prove)\nusing this:\n  measure_space M\n  x n \\<in> sfis (u n) M\n\ngoal (1 subgoal):\n 1. u n \\<in> rv M", "by (simp add: sfis_rv)"], ["proof (state)\nthis:\n  u n \\<in> rv M\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> f \\<in> rv M", "}"], ["proof (state)\nthis:\n  u ?n2 \\<in> rv M\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> f \\<in> rv M", "also"], ["proof (state)\nthis:\n  u ?n2 \\<in> rv M\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> f \\<in> rv M", "from base"], ["proof (chain)\npicking this:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a", "have \"u\\<up>f\""], ["proof (prove)\nusing this:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n\ngoal (1 subgoal):\n 1. u\\<up>f", "by simp"], ["proof (state)\nthis:\n  u\\<up>f\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>a\\<rbrakk>\n       \\<Longrightarrow> f \\<in> rv M", "ultimately"], ["proof (chain)\npicking this:\n  u ?n2 \\<in> rv M\n  u\\<up>f", "show ?thesis"], ["proof (prove)\nusing this:\n  u ?n2 \\<in> rv M\n  u\\<up>f\n\ngoal (1 subgoal):\n 1. f \\<in> rv M", "by (rule mon_conv_rv)"], ["proof (state)\nthis:\n  f \\<in> rv M\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "text\\<open>The converse does not hold of course, since there are measurable\n  functions whose integral is infinite. Regardless, it is possible to\n  approximate any measurable function using simple\n  step-functions. This means that all nonnegative random variables are quasi\n  integrable, as the property is sometimes called, and brings forth the fundamental\n  insight that a nonnegative function is integrable if and only if it is\n  measurable and the integrals of the simple functions that\n  approximate it converge monotonically. Technically, the proof is rather\n  complex, involving many properties of real numbers.\\<close>"], ["", "(*<*)"], ["", "declare zero_le_power [simp]"], ["", "(*>*)"], ["", "lemma assumes (*<*)ms:(*>*) \"measure_space M\" and (*<*)f(*>*): \"f \\<in> rv M\" and (*<*)nn:(*>*) \"nonnegative f\"\n  shows rv_mon_conv_sfis: \"\\<exists>u x. u\\<up>f \\<and> (\\<forall>n. x n \\<in> sfis (u n) M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>u x. u\\<up>f \\<and> (\\<forall>n. x n \\<in> sfis (u n) M)", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>u x. u\\<up>f \\<and> (\\<forall>n. x n \\<in> sfis (u n) M)", "proof (rule+)"], ["proof (state)\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "(*We don't need the greater case in the book, since our functions are real*)"], ["proof (state)\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "define A where \"A n i = {w. real i/(2::real)^n \\<le> f w} \\<inter> {w. f w < real (Suc i)/(2::real)^n}\" for n i"], ["proof (state)\nthis:\n  A ?n ?i =\n  {w. real ?i / 2 ^ ?n \\<le> f w} \\<inter> {w. f w < real (Suc ?i) / 2 ^ ?n}\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "define u where \"u n t = (\\<Sum>i\\<in>{..<(n*2^n)}-{0}. (real i/(2::real)^n)*\\<chi> (A n i) t)\"  for n t"], ["proof (state)\nthis:\n  u ?n ?t =\n  (\\<Sum>i\\<in>{..<?n * 2 ^ ?n} - {0}. real i / 2 ^ ?n * \\<chi> (A ?n i) ?t)\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "define x where \"x n = (\\<Sum>i\\<in>{..<(n*2^n)}-{0}. (real i/(2::real)^n)*measure M (A n i))\" for n"], ["proof (state)\nthis:\n  x ?n =\n  (\\<Sum>i\\<in>{..<?n * 2 ^ ?n} - {0}.\n     real i / 2 ^ ?n * Measure.measure M (A ?n i))\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "{"], ["proof (state)\nthis:\n  x ?n =\n  (\\<Sum>i\\<in>{..<?n * 2 ^ ?n} - {0}.\n     real i / 2 ^ ?n * Measure.measure M (A ?n i))\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "fix n"], ["proof (state)\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "note ms"], ["proof (state)\nthis:\n  measure_space M\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "also"], ["proof (state)\nthis:\n  measure_space M\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "{"], ["proof (state)\nthis:\n  measure_space M\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "fix i::nat"], ["proof (state)\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "from ms f"], ["proof (chain)\npicking this:\n  measure_space M\n  f \\<in> rv M", "have \"{w. real i/(2::real)^n \\<le> f w} \\<in> measurable_sets M\""], ["proof (prove)\nusing this:\n  measure_space M\n  f \\<in> rv M\n\ngoal (1 subgoal):\n 1. {w. real i / 2 ^ n \\<le> f w} \\<in> measurable_sets M", "by (simp_all add: rv_ge_iff)"], ["proof (state)\nthis:\n  {w. real i / 2 ^ n \\<le> f w} \\<in> measurable_sets M\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "also"], ["proof (state)\nthis:\n  {w. real i / 2 ^ n \\<le> f w} \\<in> measurable_sets M\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "from ms f"], ["proof (chain)\npicking this:\n  measure_space M\n  f \\<in> rv M", "have \"{w. f w < real (Suc i)/(2::real)^n} \\<in> measurable_sets M\""], ["proof (prove)\nusing this:\n  measure_space M\n  f \\<in> rv M\n\ngoal (1 subgoal):\n 1. {w. f w < real (Suc i) / 2 ^ n} \\<in> measurable_sets M", "by (simp add: rv_less_iff)"], ["proof (state)\nthis:\n  {w. f w < real (Suc i) / 2 ^ n} \\<in> measurable_sets M\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "moreover"], ["proof (state)\nthis:\n  {w. f w < real (Suc i) / 2 ^ n} \\<in> measurable_sets M\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "note  ms"], ["proof (state)\nthis:\n  measure_space M\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "ultimately"], ["proof (chain)\npicking this:\n  {w. real i / 2 ^ n \\<le> f w} \\<in> measurable_sets M\n  {w. f w < real (Suc i) / 2 ^ n} \\<in> measurable_sets M\n  measure_space M", "have \"A n i \\<in> measurable_sets M\""], ["proof (prove)\nusing this:\n  {w. real i / 2 ^ n \\<le> f w} \\<in> measurable_sets M\n  {w. f w < real (Suc i) / 2 ^ n} \\<in> measurable_sets M\n  measure_space M\n\ngoal (1 subgoal):\n 1. A n i \\<in> measurable_sets M", "by (simp add: A_def measure_space_def sigma_algebra_inter)"], ["proof (state)\nthis:\n  A n i \\<in> measurable_sets M\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "}"], ["proof (state)\nthis:\n  A n ?i2 \\<in> measurable_sets M\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "hence \"\\<forall>i\\<in>{..<(n*2^n)}-{0}. A n i \\<in> measurable_sets M\""], ["proof (prove)\nusing this:\n  A n ?i2 \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>{..<n * 2 ^ n} - {0}. A n i \\<in> measurable_sets M", "by fast"], ["proof (state)\nthis:\n  \\<forall>i\\<in>{..<n * 2 ^ n} - {0}. A n i \\<in> measurable_sets M\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "moreover"], ["proof (state)\nthis:\n  \\<forall>i\\<in>{..<n * 2 ^ n} - {0}. A n i \\<in> measurable_sets M\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "{"], ["proof (state)\nthis:\n  \\<forall>i\\<in>{..<n * 2 ^ n} - {0}. A n i \\<in> measurable_sets M\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "fix i::nat"], ["proof (state)\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "have \"0 \\<le> real i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> real i", "by simp"], ["proof (state)\nthis:\n  0 \\<le> real i\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "also"], ["proof (state)\nthis:\n  0 \\<le> real i\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "have \"0 \\<le> (2::real)^n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> 2 ^ n", "by simp"], ["proof (state)\nthis:\n  0 \\<le> 2 ^ n\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "ultimately"], ["proof (chain)\npicking this:\n  0 \\<le> real i\n  0 \\<le> 2 ^ n", "have \"0 \\<le> real i/(2::real)^n\""], ["proof (prove)\nusing this:\n  0 \\<le> real i\n  0 \\<le> 2 ^ n\n\ngoal (1 subgoal):\n 1. 0 \\<le> real i / 2 ^ n", "by (simp add: zero_le_divide_iff)"], ["proof (state)\nthis:\n  0 \\<le> real i / 2 ^ n\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "}"], ["proof (state)\nthis:\n  0 \\<le> real ?i2 / 2 ^ n\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "hence \"nonnegative (\\<lambda>i::nat. real i/(2::real)^n)\""], ["proof (prove)\nusing this:\n  0 \\<le> real ?i2 / 2 ^ n\n\ngoal (1 subgoal):\n 1. nonnegative (\\<lambda>i. real i / 2 ^ n)", "by (simp add: nonnegative_def)"], ["proof (state)\nthis:\n  nonnegative (\\<lambda>i. real i / 2 ^ n)\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "(*   This is a little stronger than it has to be, btw.. x i must only be nn for i in S *)"], ["proof (state)\nthis:\n  nonnegative (\\<lambda>i. real i / 2 ^ n)\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "moreover"], ["proof (state)\nthis:\n  nonnegative (\\<lambda>i. real i / 2 ^ n)\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "have \"finite ({..<(n*2^n)}-{0})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite ({..<n * 2 ^ n} - {0})", "by simp"], ["proof (state)\nthis:\n  finite ({..<n * 2 ^ n} - {0})\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "ultimately"], ["proof (chain)\npicking this:\n  measure_space M\n  \\<forall>i\\<in>{..<n * 2 ^ n} - {0}. A n i \\<in> measurable_sets M\n  nonnegative (\\<lambda>i. real i / 2 ^ n)\n  finite ({..<n * 2 ^ n} - {0})", "have \"x n \\<in> sfis (u n) M\""], ["proof (prove)\nusing this:\n  measure_space M\n  \\<forall>i\\<in>{..<n * 2 ^ n} - {0}. A n i \\<in> measurable_sets M\n  nonnegative (\\<lambda>i. real i / 2 ^ n)\n  finite ({..<n * 2 ^ n} - {0})\n\ngoal (1 subgoal):\n 1. x n \\<in> sfis (u n) M", "by (simp only: u_def [abs_def] x_def sfis_intro)"], ["proof (state)\nthis:\n  x n \\<in> sfis (u n) M\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "}"], ["proof (state)\nthis:\n  x ?n2 \\<in> sfis (u ?n2) M\n\ngoal (2 subgoals):\n 1. ?u\\<up>f\n 2. \\<forall>n. ?x2 n \\<in> sfis (?u n) M", "thus \"\\<forall>n. x n \\<in> sfis (u n) M\""], ["proof (prove)\nusing this:\n  x ?n2 \\<in> sfis (u ?n2) M\n\ngoal (1 subgoal):\n 1. \\<forall>n. x n \\<in> sfis (u n) M", "by simp"], ["proof (state)\nthis:\n  \\<forall>n. x n \\<in> sfis (u n) M\n\ngoal (1 subgoal):\n 1. (\\<lambda>n t.\n        \\<Sum>i\\<in>{..<n * 2 ^ n} - {0}.\n          real i / 2 ^ n *\n          \\<chi> ({w. real i / 2 ^ n \\<le> f w} \\<inter>\n                  {w. f w < real (Suc i) / 2 ^ n})\n           t)\\<up>f", "show \"u\\<up>f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. u\\<up>f", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. u\\<up>f", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. u\\<up>f", "fix t"], ["proof (state)\ngoal (1 subgoal):\n 1. u\\<up>f", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. u\\<up>f", "fix m i"], ["proof (state)\ngoal (1 subgoal):\n 1. u\\<up>f", "assume tai: \"t \\<in> A m i\" and iS: \"i \\<in> {..<(m*2^m)}\""], ["proof (state)\nthis:\n  t \\<in> A m i\n  i \\<in> {..<m * 2 ^ m}\n\ngoal (1 subgoal):\n 1. u\\<up>f", "have usum: \"u m t = (\\<Sum>j\\<in>{..<(m*2^m)}-{0}. real j / (2::real)^m * \\<chi> (A m j) t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. u m t =\n    (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0}. real j / 2 ^ m * \\<chi> (A m j) t)", "by (simp add: u_def)"], ["proof (state)\nthis:\n  u m t =\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0}. real j / 2 ^ m * \\<chi> (A m j) t)\n\ngoal (1 subgoal):\n 1. u\\<up>f", "{"], ["proof (state)\nthis:\n  u m t =\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0}. real j / 2 ^ m * \\<chi> (A m j) t)\n\ngoal (1 subgoal):\n 1. u\\<up>f", "fix j"], ["proof (state)\ngoal (1 subgoal):\n 1. u\\<up>f", "assume ne: \"i \\<noteq> j\""], ["proof (state)\nthis:\n  i \\<noteq> j\n\ngoal (1 subgoal):\n 1. u\\<up>f", "have \"t \\<notin> A m j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<notin> A m j", "proof (cases \"i < j\")"], ["proof (state)\ngoal (2 subgoals):\n 1. i < j \\<Longrightarrow> t \\<notin> A m j\n 2. \\<not> i < j \\<Longrightarrow> t \\<notin> A m j", "case True"], ["proof (state)\nthis:\n  i < j\n\ngoal (2 subgoals):\n 1. i < j \\<Longrightarrow> t \\<notin> A m j\n 2. \\<not> i < j \\<Longrightarrow> t \\<notin> A m j", "from tai"], ["proof (chain)\npicking this:\n  t \\<in> A m i", "have \"f t < real (Suc i) / (2::real)^m\""], ["proof (prove)\nusing this:\n  t \\<in> A m i\n\ngoal (1 subgoal):\n 1. f t < real (Suc i) / 2 ^ m", "by (simp add: A_def)"], ["proof (state)\nthis:\n  f t < real (Suc i) / 2 ^ m\n\ngoal (2 subgoals):\n 1. i < j \\<Longrightarrow> t \\<notin> A m j\n 2. \\<not> i < j \\<Longrightarrow> t \\<notin> A m j", "also"], ["proof (state)\nthis:\n  f t < real (Suc i) / 2 ^ m\n\ngoal (2 subgoals):\n 1. i < j \\<Longrightarrow> t \\<notin> A m j\n 2. \\<not> i < j \\<Longrightarrow> t \\<notin> A m j", "from True"], ["proof (chain)\npicking this:\n  i < j", "have \"real (Suc i)/(2::real)^m \\<le> real j/(2::real)^m\""], ["proof (prove)\nusing this:\n  i < j\n\ngoal (1 subgoal):\n 1. real (Suc i) / 2 ^ m \\<le> real j / 2 ^ m", "by (simp add: divide_inverse)"], ["proof (state)\nthis:\n  real (Suc i) / 2 ^ m \\<le> real j / 2 ^ m\n\ngoal (2 subgoals):\n 1. i < j \\<Longrightarrow> t \\<notin> A m j\n 2. \\<not> i < j \\<Longrightarrow> t \\<notin> A m j", "finally"], ["proof (chain)\npicking this:\n  f t < real j / 2 ^ m", "show ?thesis"], ["proof (prove)\nusing this:\n  f t < real j / 2 ^ m\n\ngoal (1 subgoal):\n 1. t \\<notin> A m j", "by (simp add: A_def)"], ["proof (state)\nthis:\n  t \\<notin> A m j\n\ngoal (1 subgoal):\n 1. \\<not> i < j \\<Longrightarrow> t \\<notin> A m j", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> i < j \\<Longrightarrow> t \\<notin> A m j", "case False"], ["proof (state)\nthis:\n  \\<not> i < j\n\ngoal (1 subgoal):\n 1. \\<not> i < j \\<Longrightarrow> t \\<notin> A m j", "with ne"], ["proof (chain)\npicking this:\n  i \\<noteq> j\n  \\<not> i < j", "have no: \"j<i\""], ["proof (prove)\nusing this:\n  i \\<noteq> j\n  \\<not> i < j\n\ngoal (1 subgoal):\n 1. j < i", "by arith"], ["proof (state)\nthis:\n  j < i\n\ngoal (1 subgoal):\n 1. \\<not> i < j \\<Longrightarrow> t \\<notin> A m j", "hence \"real (Suc j)/(2::real)^m \\<le> real i/(2::real)^m\""], ["proof (prove)\nusing this:\n  j < i\n\ngoal (1 subgoal):\n 1. real (Suc j) / 2 ^ m \\<le> real i / 2 ^ m", "by (simp add: divide_inverse)"], ["proof (state)\nthis:\n  real (Suc j) / 2 ^ m \\<le> real i / 2 ^ m\n\ngoal (1 subgoal):\n 1. \\<not> i < j \\<Longrightarrow> t \\<notin> A m j", "also"], ["proof (state)\nthis:\n  real (Suc j) / 2 ^ m \\<le> real i / 2 ^ m\n\ngoal (1 subgoal):\n 1. \\<not> i < j \\<Longrightarrow> t \\<notin> A m j", "from tai"], ["proof (chain)\npicking this:\n  t \\<in> A m i", "have \"real i / (2::real)^m \\<le> f t\""], ["proof (prove)\nusing this:\n  t \\<in> A m i\n\ngoal (1 subgoal):\n 1. real i / 2 ^ m \\<le> f t", "by (simp add: A_def)"], ["proof (state)\nthis:\n  real i / 2 ^ m \\<le> f t\n\ngoal (1 subgoal):\n 1. \\<not> i < j \\<Longrightarrow> t \\<notin> A m j", "finally"], ["proof (chain)\npicking this:\n  real (Suc j) / 2 ^ m \\<le> f t", "show ?thesis"], ["proof (prove)\nusing this:\n  real (Suc j) / 2 ^ m \\<le> f t\n\ngoal (1 subgoal):\n 1. t \\<notin> A m j", "by (simp add: A_def order_less_le)"], ["proof (state)\nthis:\n  t \\<notin> A m j\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  t \\<notin> A m j\n\ngoal (1 subgoal):\n 1. u\\<up>f", "}"], ["proof (state)\nthis:\n  i \\<noteq> ?j2 \\<Longrightarrow> t \\<notin> A m ?j2\n\ngoal (1 subgoal):\n 1. u\\<up>f", "hence \"\\<And>j. i \\<noteq> j \\<Longrightarrow> \\<chi> (A m j) t = 0\""], ["proof (prove)\nusing this:\n  i \\<noteq> ?j2 \\<Longrightarrow> t \\<notin> A m ?j2\n\ngoal (1 subgoal):\n 1. \\<And>j. i \\<noteq> j \\<Longrightarrow> \\<chi> (A m j) t = 0", "by (simp add: characteristic_function_def)"], ["proof (state)\nthis:\n  i \\<noteq> ?j \\<Longrightarrow> \\<chi> (A m ?j) t = 0\n\ngoal (1 subgoal):\n 1. u\\<up>f", "hence \"\\<And>j. j\\<in>{..<(m*2^m)}-{0}-{i} \\<Longrightarrow>  real j / (2::real)^m * \\<chi> (A m j) t = 0\""], ["proof (prove)\nusing this:\n  i \\<noteq> ?j \\<Longrightarrow> \\<chi> (A m ?j) t = 0\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       j \\<in> {..<m * 2 ^ m} - {0} - {i} \\<Longrightarrow>\n       real j / 2 ^ m * \\<chi> (A m j) t = 0", "by force"], ["proof (state)\nthis:\n  ?j \\<in> {..<m * 2 ^ m} - {0} - {i} \\<Longrightarrow>\n  real ?j / 2 ^ m * \\<chi> (A m ?j) t = 0\n\ngoal (1 subgoal):\n 1. u\\<up>f", "with refl"], ["proof (chain)\npicking this:\n  ?t = ?t\n  ?j \\<in> {..<m * 2 ^ m} - {0} - {i} \\<Longrightarrow>\n  real ?j / 2 ^ m * \\<chi> (A m ?j) t = 0", "have \"(\\<Sum>j\\<in>{..<(m*2^m)}-{0}-{i}. real j / (2::real)^m * \\<chi> (A m j) t) = \n          (\\<Sum>j\\<in>{..<(m*2^m)}-{0}-{i}. 0)\""], ["proof (prove)\nusing this:\n  ?t = ?t\n  ?j \\<in> {..<m * 2 ^ m} - {0} - {i} \\<Longrightarrow>\n  real ?j / 2 ^ m * \\<chi> (A m ?j) t = 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0} - {i}.\n       real j / 2 ^ m * \\<chi> (A m j) t) =\n    (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0} - {i}. 0)", "by (rule sum.cong)"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0} - {i}.\n     real j / 2 ^ m * \\<chi> (A m j) t) =\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0} - {i}. 0)\n\ngoal (1 subgoal):\n 1. u\\<up>f", "also"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0} - {i}.\n     real j / 2 ^ m * \\<chi> (A m j) t) =\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0} - {i}. 0)\n\ngoal (1 subgoal):\n 1. u\\<up>f", "have \"\\<dots> = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0} - {i}. 0) = 0", "by (rule sum.neutral_const)"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0} - {i}. 0) = 0\n\ngoal (1 subgoal):\n 1. u\\<up>f", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0} - {i}.\n     real j / 2 ^ m * \\<chi> (A m j) t) =\n  0", "have sum0: \"(\\<Sum>j\\<in>{..<(m*2^m)}-{0}-{i}. real j / (2::real)^m * \\<chi> (A m j) t) = 0\""], ["proof (prove)\nusing this:\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0} - {i}.\n     real j / 2 ^ m * \\<chi> (A m j) t) =\n  0\n\ngoal (1 subgoal):\n 1. (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0} - {i}.\n       real j / 2 ^ m * \\<chi> (A m j) t) =\n    0", "."], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0} - {i}.\n     real j / 2 ^ m * \\<chi> (A m j) t) =\n  0\n\ngoal (1 subgoal):\n 1. u\\<up>f", "have \"u m t = real i / (2::real)^m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. u m t = real i / 2 ^ m", "proof (cases \"i=0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. i = 0 \\<Longrightarrow> u m t = real i / 2 ^ m\n 2. i \\<noteq> 0 \\<Longrightarrow> u m t = real i / 2 ^ m", "case True"], ["proof (state)\nthis:\n  i = 0\n\ngoal (2 subgoals):\n 1. i = 0 \\<Longrightarrow> u m t = real i / 2 ^ m\n 2. i \\<noteq> 0 \\<Longrightarrow> u m t = real i / 2 ^ m", "hence \"i \\<notin> {..<(m*2^m)}-{0}\""], ["proof (prove)\nusing this:\n  i = 0\n\ngoal (1 subgoal):\n 1. i \\<notin> {..<m * 2 ^ m} - {0}", "by simp"], ["proof (state)\nthis:\n  i \\<notin> {..<m * 2 ^ m} - {0}\n\ngoal (2 subgoals):\n 1. i = 0 \\<Longrightarrow> u m t = real i / 2 ^ m\n 2. i \\<noteq> 0 \\<Longrightarrow> u m t = real i / 2 ^ m", "hence \"{..<(m*2^m)}-{0} = {..<(m*2^m)}-{0}-{i}\""], ["proof (prove)\nusing this:\n  i \\<notin> {..<m * 2 ^ m} - {0}\n\ngoal (1 subgoal):\n 1. {..<m * 2 ^ m} - {0} = {..<m * 2 ^ m} - {0} - {i}", "by simp"], ["proof (state)\nthis:\n  {..<m * 2 ^ m} - {0} = {..<m * 2 ^ m} - {0} - {i}\n\ngoal (2 subgoals):\n 1. i = 0 \\<Longrightarrow> u m t = real i / 2 ^ m\n 2. i \\<noteq> 0 \\<Longrightarrow> u m t = real i / 2 ^ m", "with usum sum0"], ["proof (chain)\npicking this:\n  u m t =\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0}. real j / 2 ^ m * \\<chi> (A m j) t)\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0} - {i}.\n     real j / 2 ^ m * \\<chi> (A m j) t) =\n  0\n  {..<m * 2 ^ m} - {0} = {..<m * 2 ^ m} - {0} - {i}", "have \"u m t = 0\""], ["proof (prove)\nusing this:\n  u m t =\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0}. real j / 2 ^ m * \\<chi> (A m j) t)\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0} - {i}.\n     real j / 2 ^ m * \\<chi> (A m j) t) =\n  0\n  {..<m * 2 ^ m} - {0} = {..<m * 2 ^ m} - {0} - {i}\n\ngoal (1 subgoal):\n 1. u m t = 0", "by simp"], ["proof (state)\nthis:\n  u m t = 0\n\ngoal (2 subgoals):\n 1. i = 0 \\<Longrightarrow> u m t = real i / 2 ^ m\n 2. i \\<noteq> 0 \\<Longrightarrow> u m t = real i / 2 ^ m", "also"], ["proof (state)\nthis:\n  u m t = 0\n\ngoal (2 subgoals):\n 1. i = 0 \\<Longrightarrow> u m t = real i / 2 ^ m\n 2. i \\<noteq> 0 \\<Longrightarrow> u m t = real i / 2 ^ m", "from True"], ["proof (chain)\npicking this:\n  i = 0", "have \"\\<dots> = real i / (2::real)^m * \\<chi> (A m i) t\""], ["proof (prove)\nusing this:\n  i = 0\n\ngoal (1 subgoal):\n 1. 0 = real i / 2 ^ m * \\<chi> (A m i) t", "by simp"], ["proof (state)\nthis:\n  0 = real i / 2 ^ m * \\<chi> (A m i) t\n\ngoal (2 subgoals):\n 1. i = 0 \\<Longrightarrow> u m t = real i / 2 ^ m\n 2. i \\<noteq> 0 \\<Longrightarrow> u m t = real i / 2 ^ m", "finally"], ["proof (chain)\npicking this:\n  u m t = real i / 2 ^ m * \\<chi> (A m i) t", "show ?thesis"], ["proof (prove)\nusing this:\n  u m t = real i / 2 ^ m * \\<chi> (A m i) t\n\ngoal (1 subgoal):\n 1. u m t = real i / 2 ^ m", "using tai"], ["proof (prove)\nusing this:\n  u m t = real i / 2 ^ m * \\<chi> (A m i) t\n  t \\<in> A m i\n\ngoal (1 subgoal):\n 1. u m t = real i / 2 ^ m", "by (simp add: characteristic_function_def)"], ["proof (state)\nthis:\n  u m t = real i / 2 ^ m\n\ngoal (1 subgoal):\n 1. i \\<noteq> 0 \\<Longrightarrow> u m t = real i / 2 ^ m", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. i \\<noteq> 0 \\<Longrightarrow> u m t = real i / 2 ^ m", "case False"], ["proof (state)\nthis:\n  i \\<noteq> 0\n\ngoal (1 subgoal):\n 1. i \\<noteq> 0 \\<Longrightarrow> u m t = real i / 2 ^ m", "with iS"], ["proof (chain)\npicking this:\n  i \\<in> {..<m * 2 ^ m}\n  i \\<noteq> 0", "have iS: \"i \\<in> {..<(m*2^m)}-{0}\""], ["proof (prove)\nusing this:\n  i \\<in> {..<m * 2 ^ m}\n  i \\<noteq> 0\n\ngoal (1 subgoal):\n 1. i \\<in> {..<m * 2 ^ m} - {0}", "by simp"], ["proof (state)\nthis:\n  i \\<in> {..<m * 2 ^ m} - {0}\n\ngoal (1 subgoal):\n 1. i \\<noteq> 0 \\<Longrightarrow> u m t = real i / 2 ^ m", "note usum"], ["proof (state)\nthis:\n  u m t =\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0}. real j / 2 ^ m * \\<chi> (A m j) t)\n\ngoal (1 subgoal):\n 1. i \\<noteq> 0 \\<Longrightarrow> u m t = real i / 2 ^ m", "also"], ["proof (state)\nthis:\n  u m t =\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0}. real j / 2 ^ m * \\<chi> (A m j) t)\n\ngoal (1 subgoal):\n 1. i \\<noteq> 0 \\<Longrightarrow> u m t = real i / 2 ^ m", "have fin: \"finite ({..<(m*2^m)}-{0}-{i})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite ({..<m * 2 ^ m} - {0} - {i})", "by simp"], ["proof (state)\nthis:\n  finite ({..<m * 2 ^ m} - {0} - {i})\n\ngoal (1 subgoal):\n 1. i \\<noteq> 0 \\<Longrightarrow> u m t = real i / 2 ^ m", "from iS"], ["proof (chain)\npicking this:\n  i \\<in> {..<m * 2 ^ m} - {0}", "have ins: \"{..<(m*2^m)}-{0} = insert i\n            ({..<(m*2^m)}-{0}-{i})\""], ["proof (prove)\nusing this:\n  i \\<in> {..<m * 2 ^ m} - {0}\n\ngoal (1 subgoal):\n 1. {..<m * 2 ^ m} - {0} = insert i ({..<m * 2 ^ m} - {0} - {i})", "by auto"], ["proof (state)\nthis:\n  {..<m * 2 ^ m} - {0} = insert i ({..<m * 2 ^ m} - {0} - {i})\n\ngoal (1 subgoal):\n 1. i \\<noteq> 0 \\<Longrightarrow> u m t = real i / 2 ^ m", "have \"i \\<notin> ({..<(m*2^m)}-{0}-{i})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i \\<notin> {..<m * 2 ^ m} - {0} - {i}", "by simp"], ["proof (state)\nthis:\n  i \\<notin> {..<m * 2 ^ m} - {0} - {i}\n\ngoal (1 subgoal):\n 1. i \\<noteq> 0 \\<Longrightarrow> u m t = real i / 2 ^ m", "with fin"], ["proof (chain)\npicking this:\n  finite ({..<m * 2 ^ m} - {0} - {i})\n  i \\<notin> {..<m * 2 ^ m} - {0} - {i}", "have \"(\\<Sum>j\\<in>insert i ({..<(m*2^m)}-{0}-{i}). real j / (2::real)^m * \\<chi> (A m j) t)\n            = real i / (2::real)^m * \\<chi> (A m i) t +\n            (\\<Sum>j\\<in>{..<(m*2^m)}-{0}-{i}. real j / (2::real)^m * \\<chi> (A m j) t)\""], ["proof (prove)\nusing this:\n  finite ({..<m * 2 ^ m} - {0} - {i})\n  i \\<notin> {..<m * 2 ^ m} - {0} - {i}\n\ngoal (1 subgoal):\n 1. (\\<Sum>j\\<in>insert i ({..<m * 2 ^ m} - {0} - {i}).\n       real j / 2 ^ m * \\<chi> (A m j) t) =\n    real i / 2 ^ m * \\<chi> (A m i) t +\n    (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0} - {i}.\n       real j / 2 ^ m * \\<chi> (A m j) t)", "by (rule sum.insert)"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>insert i ({..<m * 2 ^ m} - {0} - {i}).\n     real j / 2 ^ m * \\<chi> (A m j) t) =\n  real i / 2 ^ m * \\<chi> (A m i) t +\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0} - {i}.\n     real j / 2 ^ m * \\<chi> (A m j) t)\n\ngoal (1 subgoal):\n 1. i \\<noteq> 0 \\<Longrightarrow> u m t = real i / 2 ^ m", "with ins tai"], ["proof (chain)\npicking this:\n  {..<m * 2 ^ m} - {0} = insert i ({..<m * 2 ^ m} - {0} - {i})\n  t \\<in> A m i\n  (\\<Sum>j\\<in>insert i ({..<m * 2 ^ m} - {0} - {i}).\n     real j / 2 ^ m * \\<chi> (A m j) t) =\n  real i / 2 ^ m * \\<chi> (A m i) t +\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0} - {i}.\n     real j / 2 ^ m * \\<chi> (A m j) t)", "have \"(\\<Sum>j\\<in>{..<(m*2^m)}-{0}. real j / (2::real)^m * \\<chi> (A m j) t)\n            = real i / (2::real)^m +\n            (\\<Sum>j\\<in>{..<(m*2^m)}-{0}-{i}. real j / (2::real)^m * \\<chi> (A m j) t)\""], ["proof (prove)\nusing this:\n  {..<m * 2 ^ m} - {0} = insert i ({..<m * 2 ^ m} - {0} - {i})\n  t \\<in> A m i\n  (\\<Sum>j\\<in>insert i ({..<m * 2 ^ m} - {0} - {i}).\n     real j / 2 ^ m * \\<chi> (A m j) t) =\n  real i / 2 ^ m * \\<chi> (A m i) t +\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0} - {i}.\n     real j / 2 ^ m * \\<chi> (A m j) t)\n\ngoal (1 subgoal):\n 1. (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0}. real j / 2 ^ m * \\<chi> (A m j) t) =\n    real i / 2 ^ m +\n    (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0} - {i}.\n       real j / 2 ^ m * \\<chi> (A m j) t)", "by (simp add: characteristic_function_def)"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0}. real j / 2 ^ m * \\<chi> (A m j) t) =\n  real i / 2 ^ m +\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0} - {i}.\n     real j / 2 ^ m * \\<chi> (A m j) t)\n\ngoal (1 subgoal):\n 1. i \\<noteq> 0 \\<Longrightarrow> u m t = real i / 2 ^ m", "also"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0}. real j / 2 ^ m * \\<chi> (A m j) t) =\n  real i / 2 ^ m +\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0} - {i}.\n     real j / 2 ^ m * \\<chi> (A m j) t)\n\ngoal (1 subgoal):\n 1. i \\<noteq> 0 \\<Longrightarrow> u m t = real i / 2 ^ m", "note sum0"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>{..<m * 2 ^ m} - {0} - {i}.\n     real j / 2 ^ m * \\<chi> (A m j) t) =\n  0\n\ngoal (1 subgoal):\n 1. i \\<noteq> 0 \\<Longrightarrow> u m t = real i / 2 ^ m", "finally"], ["proof (chain)\npicking this:\n  u m t = real i / 2 ^ m + 0", "show ?thesis"], ["proof (prove)\nusing this:\n  u m t = real i / 2 ^ m + 0\n\ngoal (1 subgoal):\n 1. u m t = real i / 2 ^ m", "by simp"], ["proof (state)\nthis:\n  u m t = real i / 2 ^ m\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  u m t = real i / 2 ^ m\n\ngoal (1 subgoal):\n 1. u\\<up>f", "}"], ["proof (state)\nthis:\n  \\<lbrakk>t \\<in> A ?m2 ?i2; ?i2 \\<in> {..<?m2 * 2 ^ ?m2}\\<rbrakk>\n  \\<Longrightarrow> u ?m2 t = real ?i2 / 2 ^ ?m2\n\ngoal (1 subgoal):\n 1. u\\<up>f", "hence disj: \"\\<And>m i. \\<lbrakk>t \\<in> A m i; i \\<in> {..<m * 2 ^ m}\\<rbrakk> \n        \\<Longrightarrow> u m t = real i / (2::real)^m\""], ["proof (prove)\nusing this:\n  \\<lbrakk>t \\<in> A ?m2 ?i2; ?i2 \\<in> {..<?m2 * 2 ^ ?m2}\\<rbrakk>\n  \\<Longrightarrow> u ?m2 t = real ?i2 / 2 ^ ?m2\n\ngoal (1 subgoal):\n 1. \\<And>m i.\n       \\<lbrakk>t \\<in> A m i; i \\<in> {..<m * 2 ^ m}\\<rbrakk>\n       \\<Longrightarrow> u m t = real i / 2 ^ m", "."], ["proof (state)\nthis:\n  \\<lbrakk>t \\<in> A ?m ?i; ?i \\<in> {..<?m * 2 ^ ?m}\\<rbrakk>\n  \\<Longrightarrow> u ?m t = real ?i / 2 ^ ?m\n\ngoal (1 subgoal):\n 1. u\\<up>f", "{"], ["proof (state)\nthis:\n  \\<lbrakk>t \\<in> A ?m ?i; ?i \\<in> {..<?m * 2 ^ ?m}\\<rbrakk>\n  \\<Longrightarrow> u ?m t = real ?i / 2 ^ ?m\n\ngoal (1 subgoal):\n 1. u\\<up>f", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. u\\<up>f", "define a where \"a = (f t)*(2::real)^n\""], ["proof (state)\nthis:\n  a = f t * 2 ^ n\n\ngoal (1 subgoal):\n 1. u\\<up>f", "define i where \"i = (LEAST i. a < real (i::nat)) - 1\""], ["proof (state)\nthis:\n  i = (LEAST i. a < real i) - 1\n\ngoal (1 subgoal):\n 1. u\\<up>f", "from nn"], ["proof (chain)\npicking this:\n  nonnegative f", "have \"0 \\<le> a\""], ["proof (prove)\nusing this:\n  nonnegative f\n\ngoal (1 subgoal):\n 1. 0 \\<le> a", "by (simp add: zero_le_mult_iff a_def nonnegative_def)"], ["proof (state)\nthis:\n  0 \\<le> a\n\ngoal (1 subgoal):\n 1. u\\<up>f", "also"], ["proof (state)\nthis:\n  0 \\<le> a\n\ngoal (1 subgoal):\n 1. u\\<up>f", "have \"\\<exists>i. a < real (i::nat)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>i. a < real i", "by (rule reals_Archimedean2)"], ["proof (state)\nthis:\n  \\<exists>i. a < real i\n\ngoal (1 subgoal):\n 1. u\\<up>f", "then"], ["proof (chain)\npicking this:\n  \\<exists>i. a < real i", "obtain k where \"a < real (k::nat)\""], ["proof (prove)\nusing this:\n  \\<exists>i. a < real i\n\ngoal (1 subgoal):\n 1. (\\<And>k. a < real k \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by fast"], ["proof (state)\nthis:\n  a < real k\n\ngoal (1 subgoal):\n 1. u\\<up>f", "hence less: \"a < real (LEAST i. a < real (i::nat))\""], ["proof (prove)\nusing this:\n  a < real k\n\ngoal (1 subgoal):\n 1. a < real (LEAST i. a < real i)", "by (rule LeastI)"], ["proof (state)\nthis:\n  a < real (LEAST i. a < real i)\n\ngoal (1 subgoal):\n 1. u\\<up>f", "finally"], ["proof (chain)\npicking this:\n  0 < real (LEAST i. a < real i)", "have \"0 < (LEAST i. a < real (i::nat))\""], ["proof (prove)\nusing this:\n  0 < real (LEAST i. a < real i)\n\ngoal (1 subgoal):\n 1. 0 < (LEAST i. a < real i)", "by simp"], ["proof (state)\nthis:\n  0 < (LEAST i. a < real i)\n\ngoal (1 subgoal):\n 1. u\\<up>f", "hence min: \"(LEAST i. a < real (i::nat)) - 1 < (LEAST i. a < real (i::nat))\""], ["proof (prove)\nusing this:\n  0 < (LEAST i. a < real i)\n\ngoal (1 subgoal):\n 1. (LEAST i. a < real i) - 1 < (LEAST i. a < real i)", "by arith"], ["proof (state)\nthis:\n  (LEAST i. a < real i) - 1 < (LEAST i. a < real i)\n\ngoal (1 subgoal):\n 1. u\\<up>f", "hence \"\\<not> (a < real ((LEAST i. a < real (i::nat)) - 1))\""], ["proof (prove)\nusing this:\n  (LEAST i. a < real i) - 1 < (LEAST i. a < real i)\n\ngoal (1 subgoal):\n 1. \\<not> a < real ((LEAST i. a < real i) - 1)", "by (rule not_less_Least)"], ["proof (state)\nthis:\n  \\<not> a < real ((LEAST i. a < real i) - 1)\n\ngoal (1 subgoal):\n 1. u\\<up>f", "hence ia: \"real i \\<le> a\""], ["proof (prove)\nusing this:\n  \\<not> a < real ((LEAST i. a < real i) - 1)\n\ngoal (1 subgoal):\n 1. real i \\<le> a", "by (auto simp add: i_def order_less_le)"], ["proof (state)\nthis:\n  real i \\<le> a\n\ngoal (1 subgoal):\n 1. u\\<up>f", "from min less"], ["proof (chain)\npicking this:\n  (LEAST i. a < real i) - 1 < (LEAST i. a < real i)\n  a < real (LEAST i. a < real i)", "have ai: \"a < real (Suc i)\""], ["proof (prove)\nusing this:\n  (LEAST i. a < real i) - 1 < (LEAST i. a < real i)\n  a < real (LEAST i. a < real i)\n\ngoal (1 subgoal):\n 1. a < real (Suc i)", "by (simp add: i_def)"], ["proof (state)\nthis:\n  a < real (Suc i)\n\ngoal (1 subgoal):\n 1. u\\<up>f", "from ia"], ["proof (chain)\npicking this:\n  real i \\<le> a", "have ia2: \"real i / (2::real)^n \\<le> f t\""], ["proof (prove)\nusing this:\n  real i \\<le> a\n\ngoal (1 subgoal):\n 1. real i / 2 ^ n \\<le> f t", "by (simp add: a_def pos_divide_le_eq)"], ["proof (state)\nthis:\n  real i / 2 ^ n \\<le> f t\n\ngoal (1 subgoal):\n 1. u\\<up>f", "also"], ["proof (state)\nthis:\n  real i / 2 ^ n \\<le> f t\n\ngoal (1 subgoal):\n 1. u\\<up>f", "from ai"], ["proof (chain)\npicking this:\n  a < real (Suc i)", "have ai2: \"f t < real (Suc i) / (2::real)^n\""], ["proof (prove)\nusing this:\n  a < real (Suc i)\n\ngoal (1 subgoal):\n 1. f t < real (Suc i) / 2 ^ n", "by (simp add: a_def pos_less_divide_eq[THEN sym])"], ["proof (state)\nthis:\n  f t < real (Suc i) / 2 ^ n\n\ngoal (1 subgoal):\n 1. u\\<up>f", "ultimately"], ["proof (chain)\npicking this:\n  real i / 2 ^ n \\<le> f t\n  f t < real (Suc i) / 2 ^ n", "have tA: \"t \\<in> A n i\""], ["proof (prove)\nusing this:\n  real i / 2 ^ n \\<le> f t\n  f t < real (Suc i) / 2 ^ n\n\ngoal (1 subgoal):\n 1. t \\<in> A n i", "by (simp add: A_def)"], ["proof (state)\nthis:\n  t \\<in> A n i\n\ngoal (1 subgoal):\n 1. u\\<up>f", "{"], ["proof (state)\nthis:\n  t \\<in> A n i\n\ngoal (1 subgoal):\n 1. u\\<up>f", "assume ftn: \"f t < real n\""], ["proof (state)\nthis:\n  f t < real n\n\ngoal (1 subgoal):\n 1. u\\<up>f", "from ia a_def"], ["proof (chain)\npicking this:\n  real i \\<le> a\n  a = f t * 2 ^ n", "have \"real i \\<le> f t * (2::real)^n\""], ["proof (prove)\nusing this:\n  real i \\<le> a\n  a = f t * 2 ^ n\n\ngoal (1 subgoal):\n 1. real i \\<le> f t * 2 ^ n", "by simp"], ["proof (state)\nthis:\n  real i \\<le> f t * 2 ^ n\n\ngoal (1 subgoal):\n 1. u\\<up>f", "also"], ["proof (state)\nthis:\n  real i \\<le> f t * 2 ^ n\n\ngoal (1 subgoal):\n 1. u\\<up>f", "from ftn"], ["proof (chain)\npicking this:\n  f t < real n", "have \"f t * (2::real)^n < real n * (2::real)^n\""], ["proof (prove)\nusing this:\n  f t < real n\n\ngoal (1 subgoal):\n 1. f t * 2 ^ n < real n * 2 ^ n", "by simp"], ["proof (state)\nthis:\n  f t * 2 ^ n < real n * 2 ^ n\n\ngoal (1 subgoal):\n 1. u\\<up>f", "finally"], ["proof (chain)\npicking this:\n  real i < real n * 2 ^ n", "have ni: \"i < n * 2 ^ n\""], ["proof (prove)\nusing this:\n  real i < real n * 2 ^ n\n\ngoal (1 subgoal):\n 1. i < n * 2 ^ n", "by (simp add: of_nat_less_iff[symmetric, where 'a=real])"], ["proof (state)\nthis:\n  i < n * 2 ^ n\n\ngoal (1 subgoal):\n 1. u\\<up>f", "with tA"], ["proof (chain)\npicking this:\n  t \\<in> A n i\n  i < n * 2 ^ n", "have un: \"u n t = real i / (2::real)^n\""], ["proof (prove)\nusing this:\n  t \\<in> A n i\n  i < n * 2 ^ n\n\ngoal (1 subgoal):\n 1. u n t = real i / 2 ^ n", "using disj"], ["proof (prove)\nusing this:\n  t \\<in> A n i\n  i < n * 2 ^ n\n  \\<lbrakk>t \\<in> A ?m ?i; ?i \\<in> {..<?m * 2 ^ ?m}\\<rbrakk>\n  \\<Longrightarrow> u ?m t = real ?i / 2 ^ ?m\n\ngoal (1 subgoal):\n 1. u n t = real i / 2 ^ n", "by simp"], ["proof (state)\nthis:\n  u n t = real i / 2 ^ n\n\ngoal (1 subgoal):\n 1. u\\<up>f", "with ia2"], ["proof (chain)\npicking this:\n  real i / 2 ^ n \\<le> f t\n  u n t = real i / 2 ^ n", "have lef: \"u n t \\<le> f t\""], ["proof (prove)\nusing this:\n  real i / 2 ^ n \\<le> f t\n  u n t = real i / 2 ^ n\n\ngoal (1 subgoal):\n 1. u n t \\<le> f t", "by simp"], ["proof (state)\nthis:\n  u n t \\<le> f t\n\ngoal (1 subgoal):\n 1. u\\<up>f", "from un"], ["proof (chain)\npicking this:\n  u n t = real i / 2 ^ n", "have \"real (i+1) / (2::real)^n = (real i + real (1::nat))/(2::real)^n\""], ["proof (prove)\nusing this:\n  u n t = real i / 2 ^ n\n\ngoal (1 subgoal):\n 1. real (i + 1) / 2 ^ n = (real i + real 1) / 2 ^ n", "by (simp only: of_nat_add)"], ["proof (state)\nthis:\n  real (i + 1) / 2 ^ n = (real i + real 1) / 2 ^ n\n\ngoal (1 subgoal):\n 1. u\\<up>f", "with un ai2"], ["proof (chain)\npicking this:\n  u n t = real i / 2 ^ n\n  f t < real (Suc i) / 2 ^ n\n  real (i + 1) / 2 ^ n = (real i + real 1) / 2 ^ n", "have fless: \"f t < u n t + 1/(2::real)^n\""], ["proof (prove)\nusing this:\n  u n t = real i / 2 ^ n\n  f t < real (Suc i) / 2 ^ n\n  real (i + 1) / 2 ^ n = (real i + real 1) / 2 ^ n\n\ngoal (1 subgoal):\n 1. f t < u n t + 1 / 2 ^ n", "by (simp add: add_divide_distrib)"], ["proof (state)\nthis:\n  f t < u n t + 1 / 2 ^ n\n\ngoal (1 subgoal):\n 1. u\\<up>f", "have uSuc: \"u n t \\<le> u (Suc n) t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. u n t \\<le> u (Suc n) t", "proof (cases \"f t < real (2*i+1) / (2*(2::real)^n)\")"], ["proof (state)\ngoal (2 subgoals):\n 1. f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t\n 2. \\<not> f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t", "case True"], ["proof (state)\nthis:\n  f t < real (2 * i + 1) / (2 * 2 ^ n)\n\ngoal (2 subgoals):\n 1. f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t\n 2. \\<not> f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t", "from ia2"], ["proof (chain)\npicking this:\n  real i / 2 ^ n \\<le> f t", "have \"real (2*i)/(2::real)^(n+1) \\<le> f t\""], ["proof (prove)\nusing this:\n  real i / 2 ^ n \\<le> f t\n\ngoal (1 subgoal):\n 1. real (2 * i) / 2 ^ (n + 1) \\<le> f t", "by simp"], ["proof (state)\nthis:\n  real (2 * i) / 2 ^ (n + 1) \\<le> f t\n\ngoal (2 subgoals):\n 1. f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t\n 2. \\<not> f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t", "with True"], ["proof (chain)\npicking this:\n  f t < real (2 * i + 1) / (2 * 2 ^ n)\n  real (2 * i) / 2 ^ (n + 1) \\<le> f t", "have tA2: \"t \\<in> A (n+1) (2*i)\""], ["proof (prove)\nusing this:\n  f t < real (2 * i + 1) / (2 * 2 ^ n)\n  real (2 * i) / 2 ^ (n + 1) \\<le> f t\n\ngoal (1 subgoal):\n 1. t \\<in> A (n + 1) (2 * i)", "by (simp add: A_def)"], ["proof (state)\nthis:\n  t \\<in> A (n + 1) (2 * i)\n\ngoal (2 subgoals):\n 1. f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t\n 2. \\<not> f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t", "from ni"], ["proof (chain)\npicking this:\n  i < n * 2 ^ n", "have \"2*i < (n+1)*(2^(n+1))\""], ["proof (prove)\nusing this:\n  i < n * 2 ^ n\n\ngoal (1 subgoal):\n 1. 2 * i < (n + 1) * 2 ^ (n + 1)", "by simp"], ["proof (state)\nthis:\n  2 * i < (n + 1) * 2 ^ (n + 1)\n\ngoal (2 subgoals):\n 1. f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t\n 2. \\<not> f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t", "with tA2"], ["proof (chain)\npicking this:\n  t \\<in> A (n + 1) (2 * i)\n  2 * i < (n + 1) * 2 ^ (n + 1)", "have \"u (n+1) t = real i / (2::real)^n\""], ["proof (prove)\nusing this:\n  t \\<in> A (n + 1) (2 * i)\n  2 * i < (n + 1) * 2 ^ (n + 1)\n\ngoal (1 subgoal):\n 1. u (n + 1) t = real i / 2 ^ n", "using disj"], ["proof (prove)\nusing this:\n  t \\<in> A (n + 1) (2 * i)\n  2 * i < (n + 1) * 2 ^ (n + 1)\n  \\<lbrakk>t \\<in> A ?m ?i; ?i \\<in> {..<?m * 2 ^ ?m}\\<rbrakk>\n  \\<Longrightarrow> u ?m t = real ?i / 2 ^ ?m\n\ngoal (1 subgoal):\n 1. u (n + 1) t = real i / 2 ^ n", "by simp"], ["proof (state)\nthis:\n  u (n + 1) t = real i / 2 ^ n\n\ngoal (2 subgoals):\n 1. f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t\n 2. \\<not> f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t", "with un"], ["proof (chain)\npicking this:\n  u n t = real i / 2 ^ n\n  u (n + 1) t = real i / 2 ^ n", "show ?thesis"], ["proof (prove)\nusing this:\n  u n t = real i / 2 ^ n\n  u (n + 1) t = real i / 2 ^ n\n\ngoal (1 subgoal):\n 1. u n t \\<le> u (Suc n) t", "by simp"], ["proof (state)\nthis:\n  u n t \\<le> u (Suc n) t\n\ngoal (1 subgoal):\n 1. \\<not> f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t", "case False"], ["proof (state)\nthis:\n  \\<not> f t < real (2 * i + 1) / (2 * 2 ^ n)\n\ngoal (1 subgoal):\n 1. \\<not> f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t", "have \"(2::real) \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 \\<noteq> 0", "by simp"], ["proof (state)\nthis:\n  2 \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<not> f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t", "hence \"real (2*(Suc i)) / ((2::real)^(Suc n)) = real (Suc i) / (2::real)^n\""], ["proof (prove)\nusing this:\n  2 \\<noteq> 0\n\ngoal (1 subgoal):\n 1. real (2 * Suc i) / 2 ^ Suc n = real (Suc i) / 2 ^ n", "by (metis mult_divide_mult_cancel_left_if power_Suc of_nat_mult of_nat_numeral)"], ["proof (state)\nthis:\n  real (2 * Suc i) / 2 ^ Suc n = real (Suc i) / 2 ^ n\n\ngoal (1 subgoal):\n 1. \\<not> f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t", "with ai2"], ["proof (chain)\npicking this:\n  f t < real (Suc i) / 2 ^ n\n  real (2 * Suc i) / 2 ^ Suc n = real (Suc i) / 2 ^ n", "have \"f t < real (2*(Suc i)) / (2::real)^(n+1)\""], ["proof (prove)\nusing this:\n  f t < real (Suc i) / 2 ^ n\n  real (2 * Suc i) / 2 ^ Suc n = real (Suc i) / 2 ^ n\n\ngoal (1 subgoal):\n 1. f t < real (2 * Suc i) / 2 ^ (n + 1)", "by simp"], ["proof (state)\nthis:\n  f t < real (2 * Suc i) / 2 ^ (n + 1)\n\ngoal (1 subgoal):\n 1. \\<not> f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t", "with False"], ["proof (chain)\npicking this:\n  \\<not> f t < real (2 * i + 1) / (2 * 2 ^ n)\n  f t < real (2 * Suc i) / 2 ^ (n + 1)", "have tA2: \"t \\<in> A (n+1) (2*i+1)\""], ["proof (prove)\nusing this:\n  \\<not> f t < real (2 * i + 1) / (2 * 2 ^ n)\n  f t < real (2 * Suc i) / 2 ^ (n + 1)\n\ngoal (1 subgoal):\n 1. t \\<in> A (n + 1) (2 * i + 1)", "by (simp add: A_def)"], ["proof (state)\nthis:\n  t \\<in> A (n + 1) (2 * i + 1)\n\ngoal (1 subgoal):\n 1. \\<not> f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t", "from ni"], ["proof (chain)\npicking this:\n  i < n * 2 ^ n", "have \"2*i+1 < (n+1)*(2^(n+1))\""], ["proof (prove)\nusing this:\n  i < n * 2 ^ n\n\ngoal (1 subgoal):\n 1. 2 * i + 1 < (n + 1) * 2 ^ (n + 1)", "by simp"], ["proof (state)\nthis:\n  2 * i + 1 < (n + 1) * 2 ^ (n + 1)\n\ngoal (1 subgoal):\n 1. \\<not> f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t", "with tA2"], ["proof (chain)\npicking this:\n  t \\<in> A (n + 1) (2 * i + 1)\n  2 * i + 1 < (n + 1) * 2 ^ (n + 1)", "have \"u (Suc n) t = real (2*i+1) / (2 * (2::real)^n)\""], ["proof (prove)\nusing this:\n  t \\<in> A (n + 1) (2 * i + 1)\n  2 * i + 1 < (n + 1) * 2 ^ (n + 1)\n\ngoal (1 subgoal):\n 1. u (Suc n) t = real (2 * i + 1) / (2 * 2 ^ n)", "using disj"], ["proof (prove)\nusing this:\n  t \\<in> A (n + 1) (2 * i + 1)\n  2 * i + 1 < (n + 1) * 2 ^ (n + 1)\n  \\<lbrakk>t \\<in> A ?m ?i; ?i \\<in> {..<?m * 2 ^ ?m}\\<rbrakk>\n  \\<Longrightarrow> u ?m t = real ?i / 2 ^ ?m\n\ngoal (1 subgoal):\n 1. u (Suc n) t = real (2 * i + 1) / (2 * 2 ^ n)", "by simp"], ["proof (state)\nthis:\n  u (Suc n) t = real (2 * i + 1) / (2 * 2 ^ n)\n\ngoal (1 subgoal):\n 1. \\<not> f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t", "also"], ["proof (state)\nthis:\n  u (Suc n) t = real (2 * i + 1) / (2 * 2 ^ n)\n\ngoal (1 subgoal):\n 1. \\<not> f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t", "have \"\\<dots> = (real (2*i) + real (1::nat))/ (2 * (2::real)^n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (2 * i + 1) / (2 * 2 ^ n) = (real (2 * i) + real 1) / (2 * 2 ^ n)", "by (simp only: of_nat_add)"], ["proof (state)\nthis:\n  real (2 * i + 1) / (2 * 2 ^ n) = (real (2 * i) + real 1) / (2 * 2 ^ n)\n\ngoal (1 subgoal):\n 1. \\<not> f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t", "also"], ["proof (state)\nthis:\n  real (2 * i + 1) / (2 * 2 ^ n) = (real (2 * i) + real 1) / (2 * 2 ^ n)\n\ngoal (1 subgoal):\n 1. \\<not> f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t", "have \"\\<dots> = real i / (2::real)^n + real (1::nat) / (2 * (2::real)^n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real (2 * i) + real 1) / (2 * 2 ^ n) =\n    real i / 2 ^ n + real 1 / (2 * 2 ^ n)", "by (simp add: add_divide_distrib)"], ["proof (state)\nthis:\n  (real (2 * i) + real 1) / (2 * 2 ^ n) =\n  real i / 2 ^ n + real 1 / (2 * 2 ^ n)\n\ngoal (1 subgoal):\n 1. \\<not> f t < real (2 * i + 1) / (2 * 2 ^ n) \\<Longrightarrow>\n    u n t \\<le> u (Suc n) t", "finally"], ["proof (chain)\npicking this:\n  u (Suc n) t = real i / 2 ^ n + real 1 / (2 * 2 ^ n)", "show ?thesis"], ["proof (prove)\nusing this:\n  u (Suc n) t = real i / 2 ^ n + real 1 / (2 * 2 ^ n)\n\ngoal (1 subgoal):\n 1. u n t \\<le> u (Suc n) t", "using un"], ["proof (prove)\nusing this:\n  u (Suc n) t = real i / 2 ^ n + real 1 / (2 * 2 ^ n)\n  u n t = real i / 2 ^ n\n\ngoal (1 subgoal):\n 1. u n t \\<le> u (Suc n) t", "by (simp add: zero_le_divide_iff)"], ["proof (state)\nthis:\n  u n t \\<le> u (Suc n) t\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  u n t \\<le> u (Suc n) t\n\ngoal (1 subgoal):\n 1. u\\<up>f", "note this lef fless"], ["proof (state)\nthis:\n  u n t \\<le> u (Suc n) t\n  u n t \\<le> f t\n  f t < u n t + 1 / 2 ^ n\n\ngoal (1 subgoal):\n 1. u\\<up>f", "}"], ["proof (state)\nthis:\n  f t < real n \\<Longrightarrow> u n t \\<le> u (Suc n) t\n  f t < real n \\<Longrightarrow> u n t \\<le> f t\n  f t < real n \\<Longrightarrow> f t < u n t + 1 / 2 ^ n\n\ngoal (1 subgoal):\n 1. u\\<up>f", "hence uSuc: \"f t < real n \\<Longrightarrow> u n t \\<le> u (Suc n) t\" \n          and lef:  \"f t < real n \\<Longrightarrow> u n t \\<le> f t\"\n          and fless:\"f t < real n \\<Longrightarrow> f t < u n t + 1 / (2::real)^n\""], ["proof (prove)\nusing this:\n  f t < real n \\<Longrightarrow> u n t \\<le> u (Suc n) t\n  f t < real n \\<Longrightarrow> u n t \\<le> f t\n  f t < real n \\<Longrightarrow> f t < u n t + 1 / 2 ^ n\n\ngoal (1 subgoal):\n 1. (f t < real n \\<Longrightarrow> u n t \\<le> u (Suc n) t) &&&\n    (f t < real n \\<Longrightarrow> u n t \\<le> f t) &&&\n    (f t < real n \\<Longrightarrow> f t < u n t + 1 / 2 ^ n)", "by auto"], ["proof (state)\nthis:\n  f t < real n \\<Longrightarrow> u n t \\<le> u (Suc n) t\n  f t < real n \\<Longrightarrow> u n t \\<le> f t\n  f t < real n \\<Longrightarrow> f t < u n t + 1 / 2 ^ n\n\ngoal (1 subgoal):\n 1. u\\<up>f", "have \"u n t \\<le> u (Suc n) t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. u n t \\<le> u (Suc n) t", "proof (cases \"real n \\<le> f t\")"], ["proof (state)\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "case True"], ["proof (state)\nthis:\n  real n \\<le> f t\n\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "{"], ["proof (state)\nthis:\n  real n \\<le> f t\n\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "fix i"], ["proof (state)\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "assume \"i \\<in> {..<(n*2^n)}-{0}\""], ["proof (state)\nthis:\n  i \\<in> {..<n * 2 ^ n} - {0}\n\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "hence \"Suc i \\<le> n*2^n\""], ["proof (prove)\nusing this:\n  i \\<in> {..<n * 2 ^ n} - {0}\n\ngoal (1 subgoal):\n 1. Suc i \\<le> n * 2 ^ n", "by simp"], ["proof (state)\nthis:\n  Suc i \\<le> n * 2 ^ n\n\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "hence mult: \"real (Suc i) \\<le> real n * (2::real)^n\""], ["proof (prove)\nusing this:\n  Suc i \\<le> n * 2 ^ n\n\ngoal (1 subgoal):\n 1. real (Suc i) \\<le> real n * 2 ^ n", "by (simp add: of_nat_le_iff[symmetric, where 'a=real])"], ["proof (state)\nthis:\n  real (Suc i) \\<le> real n * 2 ^ n\n\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "have \"0 < (2::real)^n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < 2 ^ n", "by simp"], ["proof (state)\nthis:\n  0 < 2 ^ n\n\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "with mult"], ["proof (chain)\npicking this:\n  real (Suc i) \\<le> real n * 2 ^ n\n  0 < 2 ^ n", "have \"real (Suc i) / (2::real)^n \\<le> real n\""], ["proof (prove)\nusing this:\n  real (Suc i) \\<le> real n * 2 ^ n\n  0 < 2 ^ n\n\ngoal (1 subgoal):\n 1. real (Suc i) / 2 ^ n \\<le> real n", "by (simp add: pos_divide_le_eq)"], ["proof (state)\nthis:\n  real (Suc i) / 2 ^ n \\<le> real n\n\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "also"], ["proof (state)\nthis:\n  real (Suc i) / 2 ^ n \\<le> real n\n\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "note True"], ["proof (state)\nthis:\n  real n \\<le> f t\n\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "finally"], ["proof (chain)\npicking this:\n  real (Suc i) / 2 ^ n \\<le> f t", "have \"\\<not> f t <  real (Suc i) / (2::real)^n\""], ["proof (prove)\nusing this:\n  real (Suc i) / 2 ^ n \\<le> f t\n\ngoal (1 subgoal):\n 1. \\<not> f t < real (Suc i) / 2 ^ n", "by (simp add: order_less_le)"], ["proof (state)\nthis:\n  \\<not> f t < real (Suc i) / 2 ^ n\n\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "hence \"t \\<notin> A n i\""], ["proof (prove)\nusing this:\n  \\<not> f t < real (Suc i) / 2 ^ n\n\ngoal (1 subgoal):\n 1. t \\<notin> A n i", "by (simp add: A_def)"], ["proof (state)\nthis:\n  t \\<notin> A n i\n\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "hence \"(real i/(2::real)^n)*\\<chi> (A n i) t = 0\""], ["proof (prove)\nusing this:\n  t \\<notin> A n i\n\ngoal (1 subgoal):\n 1. real i / 2 ^ n * \\<chi> (A n i) t = 0", "by (simp add: characteristic_function_def)"], ["proof (state)\nthis:\n  real i / 2 ^ n * \\<chi> (A n i) t = 0\n\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "}"], ["proof (state)\nthis:\n  ?ia2 \\<in> {..<n * 2 ^ n} - {0} \\<Longrightarrow>\n  real ?ia2 / 2 ^ n * \\<chi> (A n ?ia2) t = 0\n\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "with refl"], ["proof (chain)\npicking this:\n  ?t = ?t\n  ?ia2 \\<in> {..<n * 2 ^ n} - {0} \\<Longrightarrow>\n  real ?ia2 / 2 ^ n * \\<chi> (A n ?ia2) t = 0", "have \"(\\<Sum>i\\<in>{..<n * 2 ^ n} - {0}. real i / (2::real)^n * \\<chi> (A n i) t)\n            = (\\<Sum>i\\<in>{..<n * 2 ^ n} - {0}. 0)\""], ["proof (prove)\nusing this:\n  ?t = ?t\n  ?ia2 \\<in> {..<n * 2 ^ n} - {0} \\<Longrightarrow>\n  real ?ia2 / 2 ^ n * \\<chi> (A n ?ia2) t = 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>{..<n * 2 ^ n} - {0}. real i / 2 ^ n * \\<chi> (A n i) t) =\n    (\\<Sum>i\\<in>{..<n * 2 ^ n} - {0}. 0)", "by (rule sum.cong)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>{..<n * 2 ^ n} - {0}. real i / 2 ^ n * \\<chi> (A n i) t) =\n  (\\<Sum>i\\<in>{..<n * 2 ^ n} - {0}. 0)\n\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "hence \"u n t = 0\""], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<in>{..<n * 2 ^ n} - {0}. real i / 2 ^ n * \\<chi> (A n i) t) =\n  (\\<Sum>i\\<in>{..<n * 2 ^ n} - {0}. 0)\n\ngoal (1 subgoal):\n 1. u n t = 0", "by (simp add: u_def)"], ["proof (state)\nthis:\n  u n t = 0\n\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "also"], ["proof (state)\nthis:\n  u n t = 0\n\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "{"], ["proof (state)\nthis:\n  u n t = 0\n\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "fix m"], ["proof (state)\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "have \"0 \\<le> u m t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> u m t", "by (simp add: u_def characteristic_function_def zero_le_divide_iff sum_nonneg)"], ["proof (state)\nthis:\n  0 \\<le> u m t\n\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "}"], ["proof (state)\nthis:\n  0 \\<le> u ?m2 t\n\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "hence \"0 \\<le> u (Suc n) t\""], ["proof (prove)\nusing this:\n  0 \\<le> u ?m2 t\n\ngoal (1 subgoal):\n 1. 0 \\<le> u (Suc n) t", "."], ["proof (state)\nthis:\n  0 \\<le> u (Suc n) t\n\ngoal (2 subgoals):\n 1. real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t\n 2. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "finally"], ["proof (chain)\npicking this:\n  u n t \\<le> u (Suc n) t", "show ?thesis"], ["proof (prove)\nusing this:\n  u n t \\<le> u (Suc n) t\n\ngoal (1 subgoal):\n 1. u n t \\<le> u (Suc n) t", "."], ["proof (state)\nthis:\n  u n t \\<le> u (Suc n) t\n\ngoal (1 subgoal):\n 1. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "case False"], ["proof (state)\nthis:\n  \\<not> real n \\<le> f t\n\ngoal (1 subgoal):\n 1. \\<not> real n \\<le> f t \\<Longrightarrow> u n t \\<le> u (Suc n) t", "with uSuc"], ["proof (chain)\npicking this:\n  f t < real n \\<Longrightarrow> u n t \\<le> u (Suc n) t\n  \\<not> real n \\<le> f t", "show ?thesis"], ["proof (prove)\nusing this:\n  f t < real n \\<Longrightarrow> u n t \\<le> u (Suc n) t\n  \\<not> real n \\<le> f t\n\ngoal (1 subgoal):\n 1. u n t \\<le> u (Suc n) t", "by simp"], ["proof (state)\nthis:\n  u n t \\<le> u (Suc n) t\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  u n t \\<le> u (Suc n) t\n\ngoal (1 subgoal):\n 1. u\\<up>f", "note this lef fless"], ["proof (state)\nthis:\n  u n t \\<le> u (Suc n) t\n  f t < real n \\<Longrightarrow> u n t \\<le> f t\n  f t < real n \\<Longrightarrow> f t < u n t + 1 / 2 ^ n\n\ngoal (1 subgoal):\n 1. u\\<up>f", "}"], ["proof (state)\nthis:\n  u ?n2 t \\<le> u (Suc ?n2) t\n  f t < real ?n2 \\<Longrightarrow> u ?n2 t \\<le> f t\n  f t < real ?n2 \\<Longrightarrow> f t < u ?n2 t + 1 / 2 ^ ?n2\n\ngoal (1 subgoal):\n 1. u\\<up>f", "hence uSuc: \"\\<And>n. u n t \\<le> u (Suc n) t\" \n        and lef:  \"\\<And>n. f t < real n \\<Longrightarrow> u n t \\<le> f t\"\n        and fless:\"\\<And>n. f t < real n \\<Longrightarrow> f t < u n t + 1 / (2::real)^n\""], ["proof (prove)\nusing this:\n  u ?n2 t \\<le> u (Suc ?n2) t\n  f t < real ?n2 \\<Longrightarrow> u ?n2 t \\<le> f t\n  f t < real ?n2 \\<Longrightarrow> f t < u ?n2 t + 1 / 2 ^ ?n2\n\ngoal (1 subgoal):\n 1. (\\<And>n. u n t \\<le> u (Suc n) t) &&&\n    (\\<And>n. f t < real n \\<Longrightarrow> u n t \\<le> f t) &&&\n    (\\<And>n. f t < real n \\<Longrightarrow> f t < u n t + 1 / 2 ^ n)", "by auto"], ["proof (state)\nthis:\n  u ?n t \\<le> u (Suc ?n) t\n  f t < real ?n \\<Longrightarrow> u ?n t \\<le> f t\n  f t < real ?n \\<Longrightarrow> f t < u ?n t + 1 / 2 ^ ?n\n\ngoal (1 subgoal):\n 1. u\\<up>f", "have \"\\<exists>n0::nat. f t < real n0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>n0. f t < real n0", "by (rule reals_Archimedean2)"], ["proof (state)\nthis:\n  \\<exists>n0. f t < real n0\n\ngoal (1 subgoal):\n 1. u\\<up>f", "then"], ["proof (chain)\npicking this:\n  \\<exists>n0. f t < real n0", "obtain n0::nat where \"f t < real n0\""], ["proof (prove)\nusing this:\n  \\<exists>n0. f t < real n0\n\ngoal (1 subgoal):\n 1. (\\<And>n0. f t < real n0 \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  f t < real n0\n\ngoal (1 subgoal):\n 1. u\\<up>f", "also"], ["proof (state)\nthis:\n  f t < real n0\n\ngoal (1 subgoal):\n 1. u\\<up>f", "have \"\\<And>n. real n0 \\<le> real (n+n0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. real n0 \\<le> real (n + n0)", "by simp"], ["proof (state)\nthis:\n  real n0 \\<le> real (?n + n0)\n\ngoal (1 subgoal):\n 1. u\\<up>f", "finally"], ["proof (chain)\npicking this:\n  f t < real (?n1 + n0)", "have pro: \"\\<And>n. f t < real (n + n0)\""], ["proof (prove)\nusing this:\n  f t < real (?n1 + n0)\n\ngoal (1 subgoal):\n 1. \\<And>n. f t < real (n + n0)", "."], ["proof (state)\nthis:\n  f t < real (?n + n0)\n\ngoal (1 subgoal):\n 1. u\\<up>f", "hence 2: \"\\<And>n. u (n+n0) t \\<le> f t\""], ["proof (prove)\nusing this:\n  f t < real (?n + n0)\n\ngoal (1 subgoal):\n 1. \\<And>n. u (n + n0) t \\<le> f t", "using lef"], ["proof (prove)\nusing this:\n  f t < real (?n + n0)\n  f t < real ?n \\<Longrightarrow> u ?n t \\<le> f t\n\ngoal (1 subgoal):\n 1. \\<And>n. u (n + n0) t \\<le> f t", "by simp"], ["proof (state)\nthis:\n  u (?n + n0) t \\<le> f t\n\ngoal (1 subgoal):\n 1. u\\<up>f", "from uSuc"], ["proof (chain)\npicking this:\n  u ?n t \\<le> u (Suc ?n) t", "have 1: \"\\<And>n. u (n+n0) t \\<le> u (Suc n + n0) t\""], ["proof (prove)\nusing this:\n  u ?n t \\<le> u (Suc ?n) t\n\ngoal (1 subgoal):\n 1. \\<And>n. u (n + n0) t \\<le> u (Suc n + n0) t", "by simp"], ["proof (state)\nthis:\n  u (?n + n0) t \\<le> u (Suc ?n + n0) t\n\ngoal (1 subgoal):\n 1. u\\<up>f", "from 1 2"], ["proof (chain)\npicking this:\n  u (?n + n0) t \\<le> u (Suc ?n + n0) t\n  u (?n + n0) t \\<le> f t", "have \"\\<exists>c. (\\<lambda>n. u (n+n0) t)\\<up>c \\<and> c \\<le> f t\""], ["proof (prove)\nusing this:\n  u (?n + n0) t \\<le> u (Suc ?n + n0) t\n  u (?n + n0) t \\<le> f t\n\ngoal (1 subgoal):\n 1. \\<exists>c. (\\<lambda>n. u (n + n0) t)\\<up>c \\<and> c \\<le> f t", "by (rule real_mon_conv_bound)"], ["proof (state)\nthis:\n  \\<exists>c. (\\<lambda>n. u (n + n0) t)\\<up>c \\<and> c \\<le> f t\n\ngoal (1 subgoal):\n 1. u\\<up>f", "with uSuc"], ["proof (chain)\npicking this:\n  u ?n t \\<le> u (Suc ?n) t\n  \\<exists>c. (\\<lambda>n. u (n + n0) t)\\<up>c \\<and> c \\<le> f t", "obtain c where n0mc: \"(\\<lambda>n. u (n+n0) t)\\<up>c\" and cle: \"c \\<le> f t\""], ["proof (prove)\nusing this:\n  u ?n t \\<le> u (Suc ?n) t\n  \\<exists>c. (\\<lambda>n. u (n + n0) t)\\<up>c \\<and> c \\<le> f t\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>(\\<lambda>n. u (n + n0) t)\\<up>c; c \\<le> f t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fast"], ["proof (state)\nthis:\n  (\\<lambda>n. u (n + n0) t)\\<up>c\n  c \\<le> f t\n\ngoal (1 subgoal):\n 1. u\\<up>f", "from n0mc"], ["proof (chain)\npicking this:\n  (\\<lambda>n. u (n + n0) t)\\<up>c", "have \"(\\<lambda>n. u (n+n0) t) \\<longlonglongrightarrow> c\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. u (n + n0) t)\\<up>c\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. u (n + n0) t) \\<longlonglongrightarrow> c", "by (simp add: mon_conv_real_def)"], ["proof (state)\nthis:\n  (\\<lambda>n. u (n + n0) t) \\<longlonglongrightarrow> c\n\ngoal (1 subgoal):\n 1. u\\<up>f", "hence lim: \"(\\<lambda>n. u n t) \\<longlonglongrightarrow> c\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. u (n + n0) t) \\<longlonglongrightarrow> c\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. u n t) \\<longlonglongrightarrow> c", "by (subst limseq_shift_iff[THEN sym])"], ["proof (state)\nthis:\n  (\\<lambda>n. u n t) \\<longlonglongrightarrow> c\n\ngoal (1 subgoal):\n 1. u\\<up>f", "have \"\\<forall>y. \\<exists>N. \\<forall>n. N \\<le> n \\<longrightarrow> y < (2::real)^n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>y. \\<exists>N. \\<forall>n\\<ge>N. y < 2 ^ n", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y. \\<exists>N. \\<forall>n\\<ge>N. y < 2 ^ n", "fix y::real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y. \\<exists>N. \\<forall>n\\<ge>N. y < 2 ^ n", "have \"\\<exists>N::nat. y < real N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>N. y < real N", "by (rule reals_Archimedean2)"], ["proof (state)\nthis:\n  \\<exists>N. y < real N\n\ngoal (1 subgoal):\n 1. \\<And>y. \\<exists>N. \\<forall>n\\<ge>N. y < 2 ^ n", "then"], ["proof (chain)\npicking this:\n  \\<exists>N. y < real N", "obtain N::nat where 1: \"y < real N\""], ["proof (prove)\nusing this:\n  \\<exists>N. y < real N\n\ngoal (1 subgoal):\n 1. (\\<And>N. y < real N \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by fast"], ["proof (state)\nthis:\n  y < real N\n\ngoal (1 subgoal):\n 1. \\<And>y. \\<exists>N. \\<forall>n\\<ge>N. y < 2 ^ n", "{"], ["proof (state)\nthis:\n  y < real N\n\ngoal (1 subgoal):\n 1. \\<And>y. \\<exists>N. \\<forall>n\\<ge>N. y < 2 ^ n", "fix n::nat"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y. \\<exists>N. \\<forall>n\\<ge>N. y < 2 ^ n", "note 1"], ["proof (state)\nthis:\n  y < real N\n\ngoal (1 subgoal):\n 1. \\<And>y. \\<exists>N. \\<forall>n\\<ge>N. y < 2 ^ n", "also"], ["proof (state)\nthis:\n  y < real N\n\ngoal (1 subgoal):\n 1. \\<And>y. \\<exists>N. \\<forall>n\\<ge>N. y < 2 ^ n", "assume \"N \\<le> n\""], ["proof (state)\nthis:\n  N \\<le> n\n\ngoal (1 subgoal):\n 1. \\<And>y. \\<exists>N. \\<forall>n\\<ge>N. y < 2 ^ n", "also"], ["proof (state)\nthis:\n  N \\<le> n\n\ngoal (1 subgoal):\n 1. \\<And>y. \\<exists>N. \\<forall>n\\<ge>N. y < 2 ^ n", "have \"real n < (2::real)^n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real n < 2 ^ n", "by (rule of_nat_less_two_power)"], ["proof (state)\nthis:\n  real n < 2 ^ n\n\ngoal (1 subgoal):\n 1. \\<And>y. \\<exists>N. \\<forall>n\\<ge>N. y < 2 ^ n", "finally"], ["proof (chain)\npicking this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow> real x \\<le> real y) \\<Longrightarrow>\n  y < 2 ^ n", "have \"y < 2 ^ n\""], ["proof (prove)\nusing this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow> real x \\<le> real y) \\<Longrightarrow>\n  y < 2 ^ n\n\ngoal (1 subgoal):\n 1. y < 2 ^ n", "by simp"], ["proof (state)\nthis:\n  y < 2 ^ n\n\ngoal (1 subgoal):\n 1. \\<And>y. \\<exists>N. \\<forall>n\\<ge>N. y < 2 ^ n", "}"], ["proof (state)\nthis:\n  N \\<le> ?n2 \\<Longrightarrow> y < 2 ^ ?n2\n\ngoal (1 subgoal):\n 1. \\<And>y. \\<exists>N. \\<forall>n\\<ge>N. y < 2 ^ n", "thus \"\\<exists>N. \\<forall>n. N \\<le> n \\<longrightarrow> y < (2::real)^n\""], ["proof (prove)\nusing this:\n  N \\<le> ?n2 \\<Longrightarrow> y < 2 ^ ?n2\n\ngoal (1 subgoal):\n 1. \\<exists>N. \\<forall>n\\<ge>N. y < 2 ^ n", "by blast"], ["proof (state)\nthis:\n  \\<exists>N. \\<forall>n\\<ge>N. y < 2 ^ n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>y. \\<exists>N. \\<forall>n\\<ge>N. y < 2 ^ n\n\ngoal (1 subgoal):\n 1. u\\<up>f", "hence \"(\\<lambda>n. inverse ((2::real)^n)) \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  \\<forall>y. \\<exists>N. \\<forall>n\\<ge>N. y < 2 ^ n\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. inverse (2 ^ n)) \\<longlonglongrightarrow> 0", "by (intro LIMSEQ_inverse_zero) auto"], ["proof (state)\nthis:\n  (\\<lambda>n. inverse (2 ^ n)) \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. u\\<up>f", "with lim"], ["proof (chain)\npicking this:\n  (\\<lambda>n. u n t) \\<longlonglongrightarrow> c\n  (\\<lambda>n. inverse (2 ^ n)) \\<longlonglongrightarrow> 0", "have \"(\\<lambda>n. u n t + inverse ((2::real)^n)) \\<longlonglongrightarrow> c+0\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. u n t) \\<longlonglongrightarrow> c\n  (\\<lambda>n. inverse (2 ^ n)) \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. u n t + inverse (2 ^ n)) \\<longlonglongrightarrow> c + 0", "by (rule tendsto_add)"], ["proof (state)\nthis:\n  (\\<lambda>n. u n t + inverse (2 ^ n)) \\<longlonglongrightarrow> c + 0\n\ngoal (1 subgoal):\n 1. u\\<up>f", "hence \"(\\<lambda>n. u n t + 1/(2::real)^n) \\<longlonglongrightarrow> c\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. u n t + inverse (2 ^ n)) \\<longlonglongrightarrow> c + 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. u n t + 1 / 2 ^ n) \\<longlonglongrightarrow> c", "by (simp add: divide_inverse)"], ["proof (state)\nthis:\n  (\\<lambda>n. u n t + 1 / 2 ^ n) \\<longlonglongrightarrow> c\n\ngoal (1 subgoal):\n 1. u\\<up>f", "hence \"(\\<lambda>n. u (n+n0) t + 1/(2::real)^(n+n0)) \\<longlonglongrightarrow> c\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. u n t + 1 / 2 ^ n) \\<longlonglongrightarrow> c\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. u (n + n0) t + 1 / 2 ^ (n + n0))\n    \\<longlonglongrightarrow> c", "by (subst limseq_shift_iff)"], ["proof (state)\nthis:\n  (\\<lambda>n. u (n + n0) t + 1 / 2 ^ (n + n0)) \\<longlonglongrightarrow> c\n\ngoal (1 subgoal):\n 1. u\\<up>f", "also"], ["proof (state)\nthis:\n  (\\<lambda>n. u (n + n0) t + 1 / 2 ^ (n + n0)) \\<longlonglongrightarrow> c\n\ngoal (1 subgoal):\n 1. u\\<up>f", "from pro fless"], ["proof (chain)\npicking this:\n  f t < real (?n + n0)\n  f t < real ?n \\<Longrightarrow> f t < u ?n t + 1 / 2 ^ ?n", "have \"\\<And>n. f t \\<le> u (n+n0) t + 1 / 2 ^ (n+n0)\""], ["proof (prove)\nusing this:\n  f t < real (?n + n0)\n  f t < real ?n \\<Longrightarrow> f t < u ?n t + 1 / 2 ^ ?n\n\ngoal (1 subgoal):\n 1. \\<And>n. f t \\<le> u (n + n0) t + 1 / 2 ^ (n + n0)", "by (simp add: order_le_less)"], ["proof (state)\nthis:\n  f t \\<le> u (?n + n0) t + 1 / 2 ^ (?n + n0)\n\ngoal (1 subgoal):\n 1. u\\<up>f", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>n. u (n + n0) t + 1 / 2 ^ (n + n0)) \\<longlonglongrightarrow> c\n  f t \\<le> u (?n + n0) t + 1 / 2 ^ (?n + n0)", "have \"f t \\<le> c\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. u (n + n0) t + 1 / 2 ^ (n + n0)) \\<longlonglongrightarrow> c\n  f t \\<le> u (?n + n0) t + 1 / 2 ^ (?n + n0)\n\ngoal (1 subgoal):\n 1. f t \\<le> c", "by (simp add: LIMSEQ_le_const)"], ["proof (state)\nthis:\n  f t \\<le> c\n\ngoal (1 subgoal):\n 1. u\\<up>f", "with cle"], ["proof (chain)\npicking this:\n  c \\<le> f t\n  f t \\<le> c", "have \"c = f t\""], ["proof (prove)\nusing this:\n  c \\<le> f t\n  f t \\<le> c\n\ngoal (1 subgoal):\n 1. c = f t", "by simp"], ["proof (state)\nthis:\n  c = f t\n\ngoal (1 subgoal):\n 1. u\\<up>f", "with lim"], ["proof (chain)\npicking this:\n  (\\<lambda>n. u n t) \\<longlonglongrightarrow> c\n  c = f t", "have \"(\\<lambda>n. u n t) \\<longlonglongrightarrow> f t\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. u n t) \\<longlonglongrightarrow> c\n  c = f t\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. u n t) \\<longlonglongrightarrow> f t", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>n. u n t) \\<longlonglongrightarrow> f t\n\ngoal (1 subgoal):\n 1. u\\<up>f", "with uSuc"], ["proof (chain)\npicking this:\n  u ?n t \\<le> u (Suc ?n) t\n  (\\<lambda>n. u n t) \\<longlonglongrightarrow> f t", "have \"(\\<lambda>n. u n t)\\<up> f t\""], ["proof (prove)\nusing this:\n  u ?n t \\<le> u (Suc ?n) t\n  (\\<lambda>n. u n t) \\<longlonglongrightarrow> f t\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. u n t)\\<up>f t", "by (simp add: mon_conv_real_def)"], ["proof (state)\nthis:\n  (\\<lambda>n. u n t)\\<up>f t\n\ngoal (1 subgoal):\n 1. u\\<up>f", "}"], ["proof (state)\nthis:\n  (\\<lambda>n. u n ?t2)\\<up>f ?t2\n\ngoal (1 subgoal):\n 1. u\\<up>f", "thus ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>n. u n ?t2)\\<up>f ?t2\n\ngoal (1 subgoal):\n 1. u\\<up>f", "by (simp add: realfun_mon_conv_iff)"], ["proof (state)\nthis:\n  u\\<up>f\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  u\\<up>f\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "text\\<open>The following dominated convergence theorem is an easy\n  corollary. It can be effectively applied to show integrability.\\<close>"], ["", "corollary assumes ms: \"measure_space M\" and f: \"f \\<in> rv M\" \n  and b: \"b \\<in> nnfis g M\" and fg: \"f\\<le>g\" and nn: \"nonnegative f\"  \n  shows nnfis_dom_conv: \"\\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "using b"], ["proof (prove)\nusing this:\n  b \\<in> nnfis g M\n\ngoal (1 subgoal):\n 1. \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "proof (cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "case (base v r)"], ["proof (state)\nthis:\n  v\\<up>g\n  r ?n \\<in> sfis (v ?n) M\n  r\\<up>b\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "from ms f nn"], ["proof (chain)\npicking this:\n  measure_space M\n  f \\<in> rv M\n  nonnegative f", "have \"\\<exists>u x. u\\<up>f \\<and> (\\<forall>n. x n \\<in> sfis (u n) M)\""], ["proof (prove)\nusing this:\n  measure_space M\n  f \\<in> rv M\n  nonnegative f\n\ngoal (1 subgoal):\n 1. \\<exists>u x. u\\<up>f \\<and> (\\<forall>n. x n \\<in> sfis (u n) M)", "by (rule rv_mon_conv_sfis)"], ["proof (state)\nthis:\n  \\<exists>u x. u\\<up>f \\<and> (\\<forall>n. x n \\<in> sfis (u n) M)\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "then"], ["proof (chain)\npicking this:\n  \\<exists>u x. u\\<up>f \\<and> (\\<forall>n. x n \\<in> sfis (u n) M)", "obtain u x where uf: \"u\\<up>f\" and xu: \"\\<And>n. x n \\<in> sfis (u n) M\""], ["proof (prove)\nusing this:\n  \\<exists>u x. u\\<up>f \\<and> (\\<forall>n. x n \\<in> sfis (u n) M)\n\ngoal (1 subgoal):\n 1. (\\<And>u x.\n        \\<lbrakk>u\\<up>f; \\<And>n. x n \\<in> sfis (u n) M\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fast"], ["proof (state)\nthis:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "{"], ["proof (state)\nthis:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "from uf"], ["proof (chain)\npicking this:\n  u\\<up>f", "have \"u n \\<le> f\""], ["proof (prove)\nusing this:\n  u\\<up>f\n\ngoal (1 subgoal):\n 1. u n \\<le> f", "by (rule realfun_mon_conv_le)"], ["proof (state)\nthis:\n  u n \\<le> f\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "also"], ["proof (state)\nthis:\n  u n \\<le> f\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "note fg"], ["proof (state)\nthis:\n  f \\<le> g\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "also"], ["proof (state)\nthis:\n  f \\<le> g\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "from xu"], ["proof (chain)\npicking this:\n  x ?n \\<in> sfis (u ?n) M", "have \"x n \\<in> nnfis (u n) M\""], ["proof (prove)\nusing this:\n  x ?n \\<in> sfis (u ?n) M\n\ngoal (1 subgoal):\n 1. x n \\<in> nnfis (u n) M", "by (rule sfis_nnfis)"], ["proof (state)\nthis:\n  x n \\<in> nnfis (u n) M\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "moreover"], ["proof (state)\nthis:\n  x n \\<in> nnfis (u n) M\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "note b ms"], ["proof (state)\nthis:\n  b \\<in> nnfis g M\n  measure_space M\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "ultimately"], ["proof (chain)\npicking this:\n  u n \\<le> g\n  x n \\<in> nnfis (u n) M\n  b \\<in> nnfis g M\n  measure_space M", "have le: \"x n \\<le> b\""], ["proof (prove)\nusing this:\n  u n \\<le> g\n  x n \\<in> nnfis (u n) M\n  b \\<in> nnfis g M\n  measure_space M\n\ngoal (1 subgoal):\n 1. x n \\<le> b", "by (simp add: nnfis_mono)"], ["proof (state)\nthis:\n  x n \\<le> b\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "from uf"], ["proof (chain)\npicking this:\n  u\\<up>f", "have \"u n \\<le> u (Suc n)\""], ["proof (prove)\nusing this:\n  u\\<up>f\n\ngoal (1 subgoal):\n 1. u n \\<le> u (Suc n)", "by (simp only: mon_conv_real_fun_def)"], ["proof (state)\nthis:\n  u n \\<le> u (Suc n)\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "with ms xu[of n] xu[of \"Suc n\"]"], ["proof (chain)\npicking this:\n  measure_space M\n  x n \\<in> sfis (u n) M\n  x (Suc n) \\<in> sfis (u (Suc n)) M\n  u n \\<le> u (Suc n)", "have \"x n \\<le> x (Suc n)\""], ["proof (prove)\nusing this:\n  measure_space M\n  x n \\<in> sfis (u n) M\n  x (Suc n) \\<in> sfis (u (Suc n)) M\n  u n \\<le> u (Suc n)\n\ngoal (1 subgoal):\n 1. x n \\<le> x (Suc n)", "by (simp add: sfis_mono)"], ["proof (state)\nthis:\n  x n \\<le> x (Suc n)\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "note this le"], ["proof (state)\nthis:\n  x n \\<le> x (Suc n)\n  x n \\<le> b\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "}"], ["proof (state)\nthis:\n  x ?n2 \\<le> x (Suc ?n2)\n  x ?n2 \\<le> b\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "hence \"\\<exists>a. x\\<up>a \\<and> a \\<le> b\""], ["proof (prove)\nusing this:\n  x ?n2 \\<le> x (Suc ?n2)\n  x ?n2 \\<le> b\n\ngoal (1 subgoal):\n 1. \\<exists>a. x\\<up>a \\<and> a \\<le> b", "by (rule real_mon_conv_bound)"], ["proof (state)\nthis:\n  \\<exists>a. x\\<up>a \\<and> a \\<le> b\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "then"], ["proof (chain)\npicking this:\n  \\<exists>a. x\\<up>a \\<and> a \\<le> b", "obtain a where xa: \"x\\<up>a\" and ab: \"a \\<le> b\""], ["proof (prove)\nusing this:\n  \\<exists>a. x\\<up>a \\<and> a \\<le> b\n\ngoal (1 subgoal):\n 1. (\\<And>a.\n        \\<lbrakk>x\\<up>a; a \\<le> b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x\\<up>a\n  a \\<le> b\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "from uf xu xa"], ["proof (chain)\npicking this:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a", "have \"a \\<in> nnfis f M\""], ["proof (prove)\nusing this:\n  u\\<up>f\n  x ?n \\<in> sfis (u ?n) M\n  x\\<up>a\n\ngoal (1 subgoal):\n 1. a \\<in> nnfis f M", "by (rule nnfis.base)"], ["proof (state)\nthis:\n  a \\<in> nnfis f M\n\ngoal (1 subgoal):\n 1. \\<And>u x.\n       \\<lbrakk>u\\<up>g; \\<And>n. x n \\<in> sfis (u n) M; x\\<up>b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "with ab"], ["proof (chain)\npicking this:\n  a \\<le> b\n  a \\<in> nnfis f M", "show ?thesis"], ["proof (prove)\nusing this:\n  a \\<le> b\n  a \\<in> nnfis f M\n\ngoal (1 subgoal):\n 1. \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b", "by fast"], ["proof (state)\nthis:\n  \\<exists>a. a \\<in> nnfis f M \\<and> a \\<le> b\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>Speaking all the time about integrability, it is time to define\n  it at last.\\<close>"], ["", "definition\n  integrable:: \"('a \\<Rightarrow> real) \\<Rightarrow> ('a set set * ('a set \\<Rightarrow> real)) \\<Rightarrow> bool\" where\n  (*We could also demand that f be in rv M, but measurability is already ensured \n  by construction of the integral/nn_integrable functions*)\n  \"integrable f M \\<longleftrightarrow> measure_space M \\<and> \n  (\\<exists>x. x \\<in> nnfis (pp f) M) \\<and> (\\<exists>y. y \\<in> nnfis (np f) M)\""], ["", "definition\n  integral:: \"('a \\<Rightarrow> real) \\<Rightarrow> ('a set set * ('a set \\<Rightarrow> real)) \\<Rightarrow> real\" (\"\\<integral> _ \\<partial>_\"(*<*)[60,61] 110(*>*)) where\n  \"integrable f M \\<Longrightarrow> \\<integral> f \\<partial>M = (THE i. i \\<in> nnfis (pp f) M) -\n  (THE j. j \\<in> nnfis (np f) M)\""], ["", "text\\<open>So the final step is done, the integral defined. The theorems\n  we are already used to prove from the\n  earlier stages are still missing. Only now there are always two properties to be\n  shown: integrability and the value of the integral. Isabelle makes\n  it possible two have both goals in a single theorem, so that the\n  user may derive the statement he desires. Two useful lemmata follow. They\n  help lifting nonnegative function integral sets to integrals\n  proper. Notice how the dominated convergence theorem from above is\n  employed in the latter.\\<close>"], ["", "lemma nnfis_integral:\n  assumes nn: \"a \\<in> nnfis f M\" and ms: \"measure_space M\"\n  shows \"integrable f M\" and \"\\<integral> f \\<partial> M = a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable f M &&& \\<integral> f \\<partial>M = a", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. integrable f M\n 2. \\<integral> f \\<partial>M = a", "from nn"], ["proof (chain)\npicking this:\n  a \\<in> nnfis f M", "have \"nonnegative f\""], ["proof (prove)\nusing this:\n  a \\<in> nnfis f M\n\ngoal (1 subgoal):\n 1. nonnegative f", "by (rule nnfis_nn)"], ["proof (state)\nthis:\n  nonnegative f\n\ngoal (2 subgoals):\n 1. integrable f M\n 2. \\<integral> f \\<partial>M = a", "hence \"pp f = f\" and 0: \"np f = (\\<lambda>t. 0)\""], ["proof (prove)\nusing this:\n  nonnegative f\n\ngoal (1 subgoal):\n 1. pp f = f &&& np f = (\\<lambda>t. 0)", "by (auto simp add: nn_pp_np)"], ["proof (state)\nthis:\n  pp f = f\n  np f = (\\<lambda>t. 0)\n\ngoal (2 subgoals):\n 1. integrable f M\n 2. \\<integral> f \\<partial>M = a", "with nn"], ["proof (chain)\npicking this:\n  a \\<in> nnfis f M\n  pp f = f\n  np f = (\\<lambda>t. 0)", "have a: \"a \\<in> nnfis (pp f) M\""], ["proof (prove)\nusing this:\n  a \\<in> nnfis f M\n  pp f = f\n  np f = (\\<lambda>t. 0)\n\ngoal (1 subgoal):\n 1. a \\<in> nnfis (pp f) M", "by simp"], ["proof (state)\nthis:\n  a \\<in> nnfis (pp f) M\n\ngoal (2 subgoals):\n 1. integrable f M\n 2. \\<integral> f \\<partial>M = a", "have \"0\\<le>(0::real)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> 0", "by (rule order_refl)"], ["proof (state)\nthis:\n  0 \\<le> 0\n\ngoal (2 subgoals):\n 1. integrable f M\n 2. \\<integral> f \\<partial>M = a", "with ms nn"], ["proof (chain)\npicking this:\n  measure_space M\n  a \\<in> nnfis f M\n  0 \\<le> 0", "have \"0*a \\<in> nnfis (\\<lambda>t. 0*f t) M\""], ["proof (prove)\nusing this:\n  measure_space M\n  a \\<in> nnfis f M\n  0 \\<le> 0\n\ngoal (1 subgoal):\n 1. 0 * a \\<in> nnfis (\\<lambda>t. 0 * f t) M", "by (rule nnfis_times)"], ["proof (state)\nthis:\n  0 * a \\<in> nnfis (\\<lambda>t. 0 * f t) M\n\ngoal (2 subgoals):\n 1. integrable f M\n 2. \\<integral> f \\<partial>M = a", "with 0"], ["proof (chain)\npicking this:\n  np f = (\\<lambda>t. 0)\n  0 * a \\<in> nnfis (\\<lambda>t. 0 * f t) M", "have 02: \"0 \\<in> nnfis (np f) M\""], ["proof (prove)\nusing this:\n  np f = (\\<lambda>t. 0)\n  0 * a \\<in> nnfis (\\<lambda>t. 0 * f t) M\n\ngoal (1 subgoal):\n 1. 0 \\<in> nnfis (np f) M", "by simp"], ["proof (state)\nthis:\n  0 \\<in> nnfis (np f) M\n\ngoal (2 subgoals):\n 1. integrable f M\n 2. \\<integral> f \\<partial>M = a", "with ms a"], ["proof (chain)\npicking this:\n  measure_space M\n  a \\<in> nnfis (pp f) M\n  0 \\<in> nnfis (np f) M", "show \"integrable f M\""], ["proof (prove)\nusing this:\n  measure_space M\n  a \\<in> nnfis (pp f) M\n  0 \\<in> nnfis (np f) M\n\ngoal (1 subgoal):\n 1. integrable f M", "by (auto simp add: integrable_def)"], ["proof (state)\nthis:\n  integrable f M\n\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M = a", "also"], ["proof (state)\nthis:\n  integrable f M\n\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M = a", "from a ms"], ["proof (chain)\npicking this:\n  a \\<in> nnfis (pp f) M\n  measure_space M", "have \"(THE i. i \\<in> nnfis (pp f) M) = a\""], ["proof (prove)\nusing this:\n  a \\<in> nnfis (pp f) M\n  measure_space M\n\ngoal (1 subgoal):\n 1. (THE i. i \\<in> nnfis (pp f) M) = a", "by (auto simp add: nnfis_unique)"], ["proof (state)\nthis:\n  (THE i. i \\<in> nnfis (pp f) M) = a\n\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M = a", "moreover"], ["proof (state)\nthis:\n  (THE i. i \\<in> nnfis (pp f) M) = a\n\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M = a", "from 02 ms"], ["proof (chain)\npicking this:\n  0 \\<in> nnfis (np f) M\n  measure_space M", "have \"(THE i. i \\<in> nnfis (np f) M) = 0\""], ["proof (prove)\nusing this:\n  0 \\<in> nnfis (np f) M\n  measure_space M\n\ngoal (1 subgoal):\n 1. (THE i. i \\<in> nnfis (np f) M) = 0", "by (auto simp add: nnfis_unique)"], ["proof (state)\nthis:\n  (THE i. i \\<in> nnfis (np f) M) = 0\n\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M = a", "ultimately"], ["proof (chain)\npicking this:\n  integrable f M\n  (THE i. i \\<in> nnfis (pp f) M) = a\n  (THE i. i \\<in> nnfis (np f) M) = 0", "show \"\\<integral> f \\<partial> M = a\""], ["proof (prove)\nusing this:\n  integrable f M\n  (THE i. i \\<in> nnfis (pp f) M) = a\n  (THE i. i \\<in> nnfis (np f) M) = 0\n\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M = a", "by (simp add: integral_def)"], ["proof (state)\nthis:\n  \\<integral> f \\<partial>M = a\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma nnfis_minus_nnfis_integral:\n  assumes a: \"a \\<in> nnfis f M\" and b: \"b \\<in> nnfis g M\"\n  and ms: \"measure_space M\"\n  shows \"integrable (\\<lambda>t. f t - g t) M\" and \"\\<integral> (\\<lambda>t. f t - g t) \\<partial> M = a - b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (\\<lambda>t. f t - g t) M &&&\n    \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t - g t) M\n 2. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "from ms a b"], ["proof (chain)\npicking this:\n  measure_space M\n  a \\<in> nnfis f M\n  b \\<in> nnfis g M", "have \"(\\<lambda>t. f t - g t) \\<in> rv M\""], ["proof (prove)\nusing this:\n  measure_space M\n  a \\<in> nnfis f M\n  b \\<in> nnfis g M\n\ngoal (1 subgoal):\n 1. (\\<lambda>t. f t - g t) \\<in> rv M", "by (auto simp only: nnfis_rv rv_minus_rv)"], ["proof (state)\nthis:\n  (\\<lambda>t. f t - g t) \\<in> rv M\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t - g t) M\n 2. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "hence prv: \"pp (\\<lambda>t. f t - g t) \\<in> rv M\" and nrv: \" np (\\<lambda>t. f t - g t) \\<in> rv M\""], ["proof (prove)\nusing this:\n  (\\<lambda>t. f t - g t) \\<in> rv M\n\ngoal (1 subgoal):\n 1. pp (\\<lambda>t. f t - g t) \\<in> rv M &&&\n    np (\\<lambda>t. f t - g t) \\<in> rv M", "by (auto simp only: pp_np_rv)"], ["proof (state)\nthis:\n  pp (\\<lambda>t. f t - g t) \\<in> rv M\n  np (\\<lambda>t. f t - g t) \\<in> rv M\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t - g t) M\n 2. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "have nnp: \"nonnegative (pp (\\<lambda>t. f t - g t))\" \n    and nnn: \"nonnegative (np (\\<lambda>t. f t - g t))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nonnegative (pp (\\<lambda>t. f t - g t)) &&&\n    nonnegative (np (\\<lambda>t. f t - g t))", "by (simp_all add: nonnegative_def positive_part_def negative_part_def)"], ["proof (state)\nthis:\n  nonnegative (pp (\\<lambda>t. f t - g t))\n  nonnegative (np (\\<lambda>t. f t - g t))\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t - g t) M\n 2. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "from ms a b"], ["proof (chain)\npicking this:\n  measure_space M\n  a \\<in> nnfis f M\n  b \\<in> nnfis g M", "have fg: \"a+b \\<in> nnfis (\\<lambda>t. f t + g t) M\""], ["proof (prove)\nusing this:\n  measure_space M\n  a \\<in> nnfis f M\n  b \\<in> nnfis g M\n\ngoal (1 subgoal):\n 1. a + b \\<in> nnfis (\\<lambda>t. f t + g t) M", "by (rule nnfis_add)"], ["proof (state)\nthis:\n  a + b \\<in> nnfis (\\<lambda>t. f t + g t) M\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t - g t) M\n 2. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "from a b"], ["proof (chain)\npicking this:\n  a \\<in> nnfis f M\n  b \\<in> nnfis g M", "have nnf: \"nonnegative f\" and nng: \"nonnegative g\""], ["proof (prove)\nusing this:\n  a \\<in> nnfis f M\n  b \\<in> nnfis g M\n\ngoal (1 subgoal):\n 1. nonnegative f &&& nonnegative g", "by (simp_all only: nnfis_nn)"], ["proof (state)\nthis:\n  nonnegative f\n  nonnegative g\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t - g t) M\n 2. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "{"], ["proof (state)\nthis:\n  nonnegative f\n  nonnegative g\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t - g t) M\n 2. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "fix t"], ["proof (state)\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t - g t) M\n 2. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "from nnf nng"], ["proof (chain)\npicking this:\n  nonnegative f\n  nonnegative g", "have \"0 \\<le> f t\" and \"0 \\<le> g t\""], ["proof (prove)\nusing this:\n  nonnegative f\n  nonnegative g\n\ngoal (1 subgoal):\n 1. 0 \\<le> f t &&& 0 \\<le> g t", "by (simp_all add: nonnegative_def)"], ["proof (state)\nthis:\n  0 \\<le> f t\n  0 \\<le> g t\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t - g t) M\n 2. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "hence \"(pp (\\<lambda>t. f t - g t)) t \\<le> f t + g t\" and \"(np (\\<lambda>t. f t - g t)) t \\<le> f t + g t\""], ["proof (prove)\nusing this:\n  0 \\<le> f t\n  0 \\<le> g t\n\ngoal (1 subgoal):\n 1. pp (\\<lambda>t. f t - g t) t \\<le> f t + g t &&&\n    np (\\<lambda>t. f t - g t) t \\<le> f t + g t", "by (simp_all add: positive_part_def negative_part_def)"], ["proof (state)\nthis:\n  pp (\\<lambda>t. f t - g t) t \\<le> f t + g t\n  np (\\<lambda>t. f t - g t) t \\<le> f t + g t\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t - g t) M\n 2. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "}"], ["proof (state)\nthis:\n  pp (\\<lambda>t. f t - g t) ?t2 \\<le> f ?t2 + g ?t2\n  np (\\<lambda>t. f t - g t) ?t2 \\<le> f ?t2 + g ?t2\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t - g t) M\n 2. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "hence \"(pp (\\<lambda>t. f t - g t)) \\<le> (\\<lambda>t. f t + g t)\" \n    and \"(np (\\<lambda>t. f t - g t)) \\<le> (\\<lambda>t. f t + g t)\""], ["proof (prove)\nusing this:\n  pp (\\<lambda>t. f t - g t) ?t2 \\<le> f ?t2 + g ?t2\n  np (\\<lambda>t. f t - g t) ?t2 \\<le> f ?t2 + g ?t2\n\ngoal (1 subgoal):\n 1. pp (\\<lambda>t. f t - g t) \\<le> (\\<lambda>t. f t + g t) &&&\n    np (\\<lambda>t. f t - g t) \\<le> (\\<lambda>t. f t + g t)", "by (simp_all add: le_fun_def)"], ["proof (state)\nthis:\n  pp (\\<lambda>t. f t - g t) \\<le> (\\<lambda>t. f t + g t)\n  np (\\<lambda>t. f t - g t) \\<le> (\\<lambda>t. f t + g t)\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t - g t) M\n 2. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "with fg nnf nng prv nrv nnp nnn ms"], ["proof (chain)\npicking this:\n  a + b \\<in> nnfis (\\<lambda>t. f t + g t) M\n  nonnegative f\n  nonnegative g\n  pp (\\<lambda>t. f t - g t) \\<in> rv M\n  np (\\<lambda>t. f t - g t) \\<in> rv M\n  nonnegative (pp (\\<lambda>t. f t - g t))\n  nonnegative (np (\\<lambda>t. f t - g t))\n  measure_space M\n  pp (\\<lambda>t. f t - g t) \\<le> (\\<lambda>t. f t + g t)\n  np (\\<lambda>t. f t - g t) \\<le> (\\<lambda>t. f t + g t)", "have \"\\<exists>l. l \\<in> nnfis (pp (\\<lambda>t. f t - g t)) M \\<and> l \\<le> a+b\"\n    and \"\\<exists>k. k \\<in> nnfis (np (\\<lambda>t. f t - g t)) M \\<and> k \\<le> a+b\""], ["proof (prove)\nusing this:\n  a + b \\<in> nnfis (\\<lambda>t. f t + g t) M\n  nonnegative f\n  nonnegative g\n  pp (\\<lambda>t. f t - g t) \\<in> rv M\n  np (\\<lambda>t. f t - g t) \\<in> rv M\n  nonnegative (pp (\\<lambda>t. f t - g t))\n  nonnegative (np (\\<lambda>t. f t - g t))\n  measure_space M\n  pp (\\<lambda>t. f t - g t) \\<le> (\\<lambda>t. f t + g t)\n  np (\\<lambda>t. f t - g t) \\<le> (\\<lambda>t. f t + g t)\n\ngoal (1 subgoal):\n 1. \\<exists>l.\n       l \\<in> nnfis (pp (\\<lambda>t. f t - g t)) M \\<and> l \\<le> a + b &&&\n    \\<exists>k.\n       k \\<in> nnfis (np (\\<lambda>t. f t - g t)) M \\<and> k \\<le> a + b", "by (auto simp only: nnfis_dom_conv)"], ["proof (state)\nthis:\n  \\<exists>l.\n     l \\<in> nnfis (pp (\\<lambda>t. f t - g t)) M \\<and> l \\<le> a + b\n  \\<exists>k.\n     k \\<in> nnfis (np (\\<lambda>t. f t - g t)) M \\<and> k \\<le> a + b\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t - g t) M\n 2. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "then"], ["proof (chain)\npicking this:\n  \\<exists>l.\n     l \\<in> nnfis (pp (\\<lambda>t. f t - g t)) M \\<and> l \\<le> a + b\n  \\<exists>k.\n     k \\<in> nnfis (np (\\<lambda>t. f t - g t)) M \\<and> k \\<le> a + b", "obtain l k where l: \"l \\<in> nnfis (pp (\\<lambda>t. f t - g t)) M\" \n    and k: \"k \\<in> nnfis (np (\\<lambda>t. f t - g t)) M\""], ["proof (prove)\nusing this:\n  \\<exists>l.\n     l \\<in> nnfis (pp (\\<lambda>t. f t - g t)) M \\<and> l \\<le> a + b\n  \\<exists>k.\n     k \\<in> nnfis (np (\\<lambda>t. f t - g t)) M \\<and> k \\<le> a + b\n\ngoal (1 subgoal):\n 1. (\\<And>l k.\n        \\<lbrakk>l \\<in> nnfis (pp (\\<lambda>t. f t - g t)) M;\n         k \\<in> nnfis (np (\\<lambda>t. f t - g t)) M\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  l \\<in> nnfis (pp (\\<lambda>t. f t - g t)) M\n  k \\<in> nnfis (np (\\<lambda>t. f t - g t)) M\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t - g t) M\n 2. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "with ms"], ["proof (chain)\npicking this:\n  measure_space M\n  l \\<in> nnfis (pp (\\<lambda>t. f t - g t)) M\n  k \\<in> nnfis (np (\\<lambda>t. f t - g t)) M", "show i: \"integrable (\\<lambda>t. f t - g t) M\""], ["proof (prove)\nusing this:\n  measure_space M\n  l \\<in> nnfis (pp (\\<lambda>t. f t - g t)) M\n  k \\<in> nnfis (np (\\<lambda>t. f t - g t)) M\n\ngoal (1 subgoal):\n 1. integrable (\\<lambda>t. f t - g t) M", "by (auto simp add: integrable_def)"], ["proof (state)\nthis:\n  integrable (\\<lambda>t. f t - g t) M\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "{"], ["proof (state)\nthis:\n  integrable (\\<lambda>t. f t - g t) M\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "fix t"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "have \"f t - g t = (pp (\\<lambda>t. f t - g t)) t - (np (\\<lambda>t. f t - g t)) t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f t - g t = pp (\\<lambda>t. f t - g t) t - np (\\<lambda>t. f t - g t) t", "by (rule f_plus_minus)"], ["proof (state)\nthis:\n  f t - g t = pp (\\<lambda>t. f t - g t) t - np (\\<lambda>t. f t - g t) t\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "hence \"f t + (np (\\<lambda>t. f t - g t)) t = g t + (pp (\\<lambda>t. f t - g t)) t\""], ["proof (prove)\nusing this:\n  f t - g t = pp (\\<lambda>t. f t - g t) t - np (\\<lambda>t. f t - g t) t\n\ngoal (1 subgoal):\n 1. f t + np (\\<lambda>t. f t - g t) t = g t + pp (\\<lambda>t. f t - g t) t", "by arith"], ["proof (state)\nthis:\n  f t + np (\\<lambda>t. f t - g t) t = g t + pp (\\<lambda>t. f t - g t) t\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "}"], ["proof (state)\nthis:\n  f ?t2 + np (\\<lambda>t. f t - g t) ?t2 =\n  g ?t2 + pp (\\<lambda>t. f t - g t) ?t2\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "hence \"(\\<lambda>t. f t + (np (\\<lambda>t. f t - g t)) t) = \n    (\\<lambda>t. g t + (pp (\\<lambda>t. f t - g t)) t)\""], ["proof (prove)\nusing this:\n  f ?t2 + np (\\<lambda>t. f t - g t) ?t2 =\n  g ?t2 + pp (\\<lambda>t. f t - g t) ?t2\n\ngoal (1 subgoal):\n 1. (\\<lambda>t. f t + np (\\<lambda>t. f t - g t) t) =\n    (\\<lambda>t. g t + pp (\\<lambda>t. f t - g t) t)", "by (rule ext)"], ["proof (state)\nthis:\n  (\\<lambda>t. f t + np (\\<lambda>t. f t - g t) t) =\n  (\\<lambda>t. g t + pp (\\<lambda>t. f t - g t) t)\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "also"], ["proof (state)\nthis:\n  (\\<lambda>t. f t + np (\\<lambda>t. f t - g t) t) =\n  (\\<lambda>t. g t + pp (\\<lambda>t. f t - g t) t)\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "from ms a k b l"], ["proof (chain)\npicking this:\n  measure_space M\n  a \\<in> nnfis f M\n  k \\<in> nnfis (np (\\<lambda>t. f t - g t)) M\n  b \\<in> nnfis g M\n  l \\<in> nnfis (pp (\\<lambda>t. f t - g t)) M", "have \"a+k \\<in> nnfis (\\<lambda>t. f t + (np (\\<lambda>t. f t - g t)) t) M\"\n    and \"b+l \\<in> nnfis (\\<lambda>t. g t + (pp (\\<lambda>t. f t - g t)) t) M\""], ["proof (prove)\nusing this:\n  measure_space M\n  a \\<in> nnfis f M\n  k \\<in> nnfis (np (\\<lambda>t. f t - g t)) M\n  b \\<in> nnfis g M\n  l \\<in> nnfis (pp (\\<lambda>t. f t - g t)) M\n\ngoal (1 subgoal):\n 1. a + k \\<in> nnfis (\\<lambda>t. f t + np (\\<lambda>t. f t - g t) t) M &&&\n    b + l \\<in> nnfis (\\<lambda>t. g t + pp (\\<lambda>t. f t - g t) t) M", "by (auto simp add: nnfis_add)"], ["proof (state)\nthis:\n  a + k \\<in> nnfis (\\<lambda>t. f t + np (\\<lambda>t. f t - g t) t) M\n  b + l \\<in> nnfis (\\<lambda>t. g t + pp (\\<lambda>t. f t - g t) t) M\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "moreover"], ["proof (state)\nthis:\n  a + k \\<in> nnfis (\\<lambda>t. f t + np (\\<lambda>t. f t - g t) t) M\n  b + l \\<in> nnfis (\\<lambda>t. g t + pp (\\<lambda>t. f t - g t) t) M\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "note ms"], ["proof (state)\nthis:\n  measure_space M\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>t. f t + np (\\<lambda>t. f t - g t) t) =\n  (\\<lambda>t. g t + pp (\\<lambda>t. f t - g t) t)\n  a + k \\<in> nnfis (\\<lambda>t. f t + np (\\<lambda>t. f t - g t) t) M\n  b + l \\<in> nnfis (\\<lambda>t. g t + pp (\\<lambda>t. f t - g t) t) M\n  measure_space M", "have \"a+k = b+l\""], ["proof (prove)\nusing this:\n  (\\<lambda>t. f t + np (\\<lambda>t. f t - g t) t) =\n  (\\<lambda>t. g t + pp (\\<lambda>t. f t - g t) t)\n  a + k \\<in> nnfis (\\<lambda>t. f t + np (\\<lambda>t. f t - g t) t) M\n  b + l \\<in> nnfis (\\<lambda>t. g t + pp (\\<lambda>t. f t - g t) t) M\n  measure_space M\n\ngoal (1 subgoal):\n 1. a + k = b + l", "by (simp add: nnfis_unique)"], ["proof (state)\nthis:\n  a + k = b + l\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "hence \"l-k=a-b\""], ["proof (prove)\nusing this:\n  a + k = b + l\n\ngoal (1 subgoal):\n 1. l - k = a - b", "by arith"], ["proof (state)\nthis:\n  l - k = a - b\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "also"], ["proof (state)\nthis:\n  l - k = a - b\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "from k l ms"], ["proof (chain)\npicking this:\n  k \\<in> nnfis (np (\\<lambda>t. f t - g t)) M\n  l \\<in> nnfis (pp (\\<lambda>t. f t - g t)) M\n  measure_space M", "have \"(THE i. i \\<in> nnfis (pp (\\<lambda>t. f t - g t)) M) = l\"\n    and \"(THE i. i \\<in> nnfis (np (\\<lambda>t. f t - g t)) M) = k\""], ["proof (prove)\nusing this:\n  k \\<in> nnfis (np (\\<lambda>t. f t - g t)) M\n  l \\<in> nnfis (pp (\\<lambda>t. f t - g t)) M\n  measure_space M\n\ngoal (1 subgoal):\n 1. (THE i. i \\<in> nnfis (pp (\\<lambda>t. f t - g t)) M) = l &&&\n    (THE i. i \\<in> nnfis (np (\\<lambda>t. f t - g t)) M) = k", "by (auto simp add: nnfis_unique)"], ["proof (state)\nthis:\n  (THE i. i \\<in> nnfis (pp (\\<lambda>t. f t - g t)) M) = l\n  (THE i. i \\<in> nnfis (np (\\<lambda>t. f t - g t)) M) = k\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "moreover"], ["proof (state)\nthis:\n  (THE i. i \\<in> nnfis (pp (\\<lambda>t. f t - g t)) M) = l\n  (THE i. i \\<in> nnfis (np (\\<lambda>t. f t - g t)) M) = k\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "note i"], ["proof (state)\nthis:\n  integrable (\\<lambda>t. f t - g t) M\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "ultimately"], ["proof (chain)\npicking this:\n  l - k = a - b\n  (THE i. i \\<in> nnfis (pp (\\<lambda>t. f t - g t)) M) = l\n  (THE i. i \\<in> nnfis (np (\\<lambda>t. f t - g t)) M) = k\n  integrable (\\<lambda>t. f t - g t) M", "show \"\\<integral> (\\<lambda>t. f t - g t) \\<partial> M = a - b\""], ["proof (prove)\nusing this:\n  l - k = a - b\n  (THE i. i \\<in> nnfis (pp (\\<lambda>t. f t - g t)) M) = l\n  (THE i. i \\<in> nnfis (np (\\<lambda>t. f t - g t)) M) = k\n  integrable (\\<lambda>t. f t - g t) M\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b", "by (simp add: integral_def)"], ["proof (state)\nthis:\n  \\<integral> (\\<lambda>t. f t - g t) \\<partial>M = a - b\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>Armed with these, the standard integral behavior should not be\n  hard to derive. Mind that integrability always implies a\n  measure space, just like random variables did in \\ref{sec:realrandvar}.\\<close>"], ["", "theorem assumes (*<*)int:(*>*) \"integrable f M\"\n  shows integrable_rv: \"f \\<in> rv M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> rv M", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> rv M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. f \\<in> rv M", "from int"], ["proof (chain)\npicking this:\n  integrable f M", "have \"pp f \\<in> rv M \\<and> np f \\<in> rv M\""], ["proof (prove)\nusing this:\n  integrable f M\n\ngoal (1 subgoal):\n 1. pp f \\<in> rv M \\<and> np f \\<in> rv M", "by (auto simp add: integrable_def nnfis_rv)"], ["proof (state)\nthis:\n  pp f \\<in> rv M \\<and> np f \\<in> rv M\n\ngoal (1 subgoal):\n 1. f \\<in> rv M", "thus ?thesis"], ["proof (prove)\nusing this:\n  pp f \\<in> rv M \\<and> np f \\<in> rv M\n\ngoal (1 subgoal):\n 1. f \\<in> rv M", "by (simp add: pp_np_rv_iff[THEN sym])"], ["proof (state)\nthis:\n  f \\<in> rv M\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "theorem integral_char: \n  assumes ms: \"measure_space M\" and mA: \"A \\<in> measurable_sets M\" \n  shows \"\\<integral> \\<chi> A \\<partial> M = measure M A\" and \"integrable \\<chi> A M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral> \\<chi> A \\<partial>M = Measure.measure M A &&&\n    integrable \\<chi> A M", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral> \\<chi> A \\<partial>M = Measure.measure M A &&&\n    integrable \\<chi> A M", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<integral> \\<chi> A \\<partial>M = Measure.measure M A\n 2. integrable \\<chi> A M", "from ms mA"], ["proof (chain)\npicking this:\n  measure_space M\n  A \\<in> measurable_sets M", "have \"measure M A \\<in> sfis \\<chi> A M\""], ["proof (prove)\nusing this:\n  measure_space M\n  A \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> sfis \\<chi> A M", "by (rule sfis_char)"], ["proof (state)\nthis:\n  Measure.measure M A \\<in> sfis \\<chi> A M\n\ngoal (2 subgoals):\n 1. \\<integral> \\<chi> A \\<partial>M = Measure.measure M A\n 2. integrable \\<chi> A M", "hence nnfis: \"measure M A \\<in> nnfis \\<chi> A M\""], ["proof (prove)\nusing this:\n  Measure.measure M A \\<in> sfis \\<chi> A M\n\ngoal (1 subgoal):\n 1. Measure.measure M A \\<in> nnfis \\<chi> A M", "by (rule sfis_nnfis)"], ["proof (state)\nthis:\n  Measure.measure M A \\<in> nnfis \\<chi> A M\n\ngoal (2 subgoals):\n 1. \\<integral> \\<chi> A \\<partial>M = Measure.measure M A\n 2. integrable \\<chi> A M", "from this and ms"], ["proof (chain)\npicking this:\n  Measure.measure M A \\<in> nnfis \\<chi> A M\n  measure_space M", "show \"\\<integral> \\<chi> A \\<partial> M = measure M A\""], ["proof (prove)\nusing this:\n  Measure.measure M A \\<in> nnfis \\<chi> A M\n  measure_space M\n\ngoal (1 subgoal):\n 1. \\<integral> \\<chi> A \\<partial>M = Measure.measure M A", "by (rule nnfis_integral)"], ["proof (state)\nthis:\n  \\<integral> \\<chi> A \\<partial>M = Measure.measure M A\n\ngoal (1 subgoal):\n 1. integrable \\<chi> A M", "from nnfis and ms"], ["proof (chain)\npicking this:\n  Measure.measure M A \\<in> nnfis \\<chi> A M\n  measure_space M", "show \"integrable \\<chi> A M\""], ["proof (prove)\nusing this:\n  Measure.measure M A \\<in> nnfis \\<chi> A M\n  measure_space M\n\ngoal (1 subgoal):\n 1. integrable \\<chi> A M", "by (rule nnfis_integral)"], ["proof (state)\nthis:\n  integrable \\<chi> A M\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "theorem integral_add:\n  assumes f: \"integrable f M\" and g: \"integrable g M\"\n  shows \"integrable (\\<lambda>t. f t + g t) M\"\n  and \"\\<integral> (\\<lambda>t. f t + g t) \\<partial>M = \\<integral> f \\<partial>M + \\<integral> g \\<partial>M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (\\<lambda>t. f t + g t) M &&&\n    \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t + g t) M\n 2. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "define u where \"u = (\\<lambda>t. pp f t + pp g t)\""], ["proof (state)\nthis:\n  u = (\\<lambda>t. pp f t + pp g t)\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t + g t) M\n 2. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "define v where \"v = (\\<lambda>t. np f t + np g t)\""], ["proof (state)\nthis:\n  v = (\\<lambda>t. np f t + np g t)\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t + g t) M\n 2. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "from f"], ["proof (chain)\npicking this:\n  integrable f M", "obtain pf nf where pf: \"pf \\<in> nnfis (pp f) M\" \n    and nf: \"nf \\<in> nnfis (np f) M\" and ms: \"measure_space M\""], ["proof (prove)\nusing this:\n  integrable f M\n\ngoal (1 subgoal):\n 1. (\\<And>pf nf.\n        \\<lbrakk>pf \\<in> nnfis (pp f) M; nf \\<in> nnfis (np f) M;\n         measure_space M\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp add: integrable_def)"], ["proof (state)\nthis:\n  pf \\<in> nnfis (pp f) M\n  nf \\<in> nnfis (np f) M\n  measure_space M\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t + g t) M\n 2. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "from g"], ["proof (chain)\npicking this:\n  integrable g M", "obtain pg ng where pg: \"pg \\<in> nnfis (pp g) M\"\n    and ng: \"ng \\<in> nnfis (np g) M\""], ["proof (prove)\nusing this:\n  integrable g M\n\ngoal (1 subgoal):\n 1. (\\<And>pg ng.\n        \\<lbrakk>pg \\<in> nnfis (pp g) M; ng \\<in> nnfis (np g) M\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp add: integrable_def)"], ["proof (state)\nthis:\n  pg \\<in> nnfis (pp g) M\n  ng \\<in> nnfis (np g) M\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t + g t) M\n 2. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "from ms pf pg u_def"], ["proof (chain)\npicking this:\n  measure_space M\n  pf \\<in> nnfis (pp f) M\n  pg \\<in> nnfis (pp g) M\n  u = (\\<lambda>t. pp f t + pp g t)", "have\n    u: \"pf+pg \\<in> nnfis u M\""], ["proof (prove)\nusing this:\n  measure_space M\n  pf \\<in> nnfis (pp f) M\n  pg \\<in> nnfis (pp g) M\n  u = (\\<lambda>t. pp f t + pp g t)\n\ngoal (1 subgoal):\n 1. pf + pg \\<in> nnfis u M", "by (simp add: nnfis_add)"], ["proof (state)\nthis:\n  pf + pg \\<in> nnfis u M\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t + g t) M\n 2. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "from ms nf ng v_def"], ["proof (chain)\npicking this:\n  measure_space M\n  nf \\<in> nnfis (np f) M\n  ng \\<in> nnfis (np g) M\n  v = (\\<lambda>t. np f t + np g t)", "have\n    v: \"nf+ng \\<in> nnfis v M\""], ["proof (prove)\nusing this:\n  measure_space M\n  nf \\<in> nnfis (np f) M\n  ng \\<in> nnfis (np g) M\n  v = (\\<lambda>t. np f t + np g t)\n\ngoal (1 subgoal):\n 1. nf + ng \\<in> nnfis v M", "by (simp add: nnfis_add)"], ["proof (state)\nthis:\n  nf + ng \\<in> nnfis v M\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t + g t) M\n 2. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "{"], ["proof (state)\nthis:\n  nf + ng \\<in> nnfis v M\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t + g t) M\n 2. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "fix  t"], ["proof (state)\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t + g t) M\n 2. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "from u_def v_def"], ["proof (chain)\npicking this:\n  u = (\\<lambda>t. pp f t + pp g t)\n  v = (\\<lambda>t. np f t + np g t)", "have \"f t + g t = u t - v t\""], ["proof (prove)\nusing this:\n  u = (\\<lambda>t. pp f t + pp g t)\n  v = (\\<lambda>t. np f t + np g t)\n\ngoal (1 subgoal):\n 1. f t + g t = u t - v t", "by (simp add: positive_part_def negative_part_def)"], ["proof (state)\nthis:\n  f t + g t = u t - v t\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t + g t) M\n 2. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "}"], ["proof (state)\nthis:\n  f ?t2 + g ?t2 = u ?t2 - v ?t2\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t + g t) M\n 2. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "hence uvf: \"(\\<lambda>t. u t - v t) = (\\<lambda>t. f t + g t)\""], ["proof (prove)\nusing this:\n  f ?t2 + g ?t2 = u ?t2 - v ?t2\n\ngoal (1 subgoal):\n 1. (\\<lambda>t. u t - v t) = (\\<lambda>t. f t + g t)", "by (simp add: ext)"], ["proof (state)\nthis:\n  (\\<lambda>t. u t - v t) = (\\<lambda>t. f t + g t)\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t + g t) M\n 2. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "from u v ms"], ["proof (chain)\npicking this:\n  pf + pg \\<in> nnfis u M\n  nf + ng \\<in> nnfis v M\n  measure_space M", "have \"integrable (\\<lambda>t. u t - v t) M\""], ["proof (prove)\nusing this:\n  pf + pg \\<in> nnfis u M\n  nf + ng \\<in> nnfis v M\n  measure_space M\n\ngoal (1 subgoal):\n 1. integrable (\\<lambda>t. u t - v t) M", "by (rule nnfis_minus_nnfis_integral)"], ["proof (state)\nthis:\n  integrable (\\<lambda>t. u t - v t) M\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. f t + g t) M\n 2. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "with u_def v_def uvf"], ["proof (chain)\npicking this:\n  u = (\\<lambda>t. pp f t + pp g t)\n  v = (\\<lambda>t. np f t + np g t)\n  (\\<lambda>t. u t - v t) = (\\<lambda>t. f t + g t)\n  integrable (\\<lambda>t. u t - v t) M", "show \"integrable (\\<lambda>t. f t + g t) M\""], ["proof (prove)\nusing this:\n  u = (\\<lambda>t. pp f t + pp g t)\n  v = (\\<lambda>t. np f t + np g t)\n  (\\<lambda>t. u t - v t) = (\\<lambda>t. f t + g t)\n  integrable (\\<lambda>t. u t - v t) M\n\ngoal (1 subgoal):\n 1. integrable (\\<lambda>t. f t + g t) M", "by simp"], ["proof (state)\nthis:\n  integrable (\\<lambda>t. f t + g t) M\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "from pf nf ms"], ["proof (chain)\npicking this:\n  pf \\<in> nnfis (pp f) M\n  nf \\<in> nnfis (np f) M\n  measure_space M", "have \"\\<integral> (\\<lambda>t. pp f t - np f t) \\<partial>M = pf-nf\""], ["proof (prove)\nusing this:\n  pf \\<in> nnfis (pp f) M\n  nf \\<in> nnfis (np f) M\n  measure_space M\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. pp f t - np f t) \\<partial>M = pf - nf", "by (rule nnfis_minus_nnfis_integral)"], ["proof (state)\nthis:\n  \\<integral> (\\<lambda>t. pp f t - np f t) \\<partial>M = pf - nf\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "hence \"\\<integral> f \\<partial>M = pf-nf\""], ["proof (prove)\nusing this:\n  \\<integral> (\\<lambda>t. pp f t - np f t) \\<partial>M = pf - nf\n\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M = pf - nf", "by (simp add: f_plus_minus[THEN sym])"], ["proof (state)\nthis:\n  \\<integral> f \\<partial>M = pf - nf\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "also"], ["proof (state)\nthis:\n  \\<integral> f \\<partial>M = pf - nf\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "from pg ng ms"], ["proof (chain)\npicking this:\n  pg \\<in> nnfis (pp g) M\n  ng \\<in> nnfis (np g) M\n  measure_space M", "have \"\\<integral> (\\<lambda>t. pp g t - np g t) \\<partial>M = pg-ng\""], ["proof (prove)\nusing this:\n  pg \\<in> nnfis (pp g) M\n  ng \\<in> nnfis (np g) M\n  measure_space M\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. pp g t - np g t) \\<partial>M = pg - ng", "by (rule nnfis_minus_nnfis_integral)"], ["proof (state)\nthis:\n  \\<integral> (\\<lambda>t. pp g t - np g t) \\<partial>M = pg - ng\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "hence \"\\<integral> g \\<partial>M = pg-ng\""], ["proof (prove)\nusing this:\n  \\<integral> (\\<lambda>t. pp g t - np g t) \\<partial>M = pg - ng\n\ngoal (1 subgoal):\n 1. \\<integral> g \\<partial>M = pg - ng", "by (simp add: f_plus_minus[THEN sym])"], ["proof (state)\nthis:\n  \\<integral> g \\<partial>M = pg - ng\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "moreover"], ["proof (state)\nthis:\n  \\<integral> g \\<partial>M = pg - ng\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "from u v ms"], ["proof (chain)\npicking this:\n  pf + pg \\<in> nnfis u M\n  nf + ng \\<in> nnfis v M\n  measure_space M", "have \"\\<integral> (\\<lambda>t. u t - v t) \\<partial>M = pf + pg - (nf + ng)\""], ["proof (prove)\nusing this:\n  pf + pg \\<in> nnfis u M\n  nf + ng \\<in> nnfis v M\n  measure_space M\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. u t - v t) \\<partial>M = pf + pg - (nf + ng)", "by (rule nnfis_minus_nnfis_integral)"], ["proof (state)\nthis:\n  \\<integral> (\\<lambda>t. u t - v t) \\<partial>M = pf + pg - (nf + ng)\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "with uvf"], ["proof (chain)\npicking this:\n  (\\<lambda>t. u t - v t) = (\\<lambda>t. f t + g t)\n  \\<integral> (\\<lambda>t. u t - v t) \\<partial>M = pf + pg - (nf + ng)", "have \"\\<integral> (\\<lambda>t. f t + g t) \\<partial>M = pf-nf + pg-ng\""], ["proof (prove)\nusing this:\n  (\\<lambda>t. u t - v t) = (\\<lambda>t. f t + g t)\n  \\<integral> (\\<lambda>t. u t - v t) \\<partial>M = pf + pg - (nf + ng)\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M = pf - nf + pg - ng", "by simp"], ["proof (state)\nthis:\n  \\<integral> (\\<lambda>t. f t + g t) \\<partial>M = pf - nf + pg - ng\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "ultimately"], ["proof (chain)\npicking this:\n  \\<integral> f \\<partial>M = pf - nf\n  \\<integral> g \\<partial>M = pg - ng\n  \\<integral> (\\<lambda>t. f t + g t) \\<partial>M = pf - nf + pg - ng", "show \"\\<integral> (\\<lambda>t. f t + g t) \\<partial>M = \\<integral> f \\<partial>M + \\<integral> g \\<partial>M\""], ["proof (prove)\nusing this:\n  \\<integral> f \\<partial>M = pf - nf\n  \\<integral> g \\<partial>M = pg - ng\n  \\<integral> (\\<lambda>t. f t + g t) \\<partial>M = pf - nf + pg - ng\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n    \\<integral> f \\<partial>M + \\<integral> g \\<partial>M", "by simp"], ["proof (state)\nthis:\n  \\<integral> (\\<lambda>t. f t + g t) \\<partial>M =\n  \\<integral> f \\<partial>M + \\<integral> g \\<partial>M\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem integral_mono:\n  assumes f: \"integrable f M\"    \n  and g: \"integrable g M\"  and fg: \"f\\<le>g\"\n  shows \"\\<integral> f \\<partial>M \\<le> \\<integral> g \\<partial>M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M \\<le> \\<integral> g \\<partial>M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M \\<le> \\<integral> g \\<partial>M", "from f"], ["proof (chain)\npicking this:\n  integrable f M", "obtain pf nf where pf: \"pf \\<in> nnfis (pp f) M\" \n    and nf: \"nf \\<in> nnfis (np f) M\" and ms: \"measure_space M\""], ["proof (prove)\nusing this:\n  integrable f M\n\ngoal (1 subgoal):\n 1. (\\<And>pf nf.\n        \\<lbrakk>pf \\<in> nnfis (pp f) M; nf \\<in> nnfis (np f) M;\n         measure_space M\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp add: integrable_def)"], ["proof (state)\nthis:\n  pf \\<in> nnfis (pp f) M\n  nf \\<in> nnfis (np f) M\n  measure_space M\n\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M \\<le> \\<integral> g \\<partial>M", "from g"], ["proof (chain)\npicking this:\n  integrable g M", "obtain pg ng where pg: \"pg \\<in> nnfis (pp g) M\"\n    and ng: \"ng \\<in> nnfis (np g) M\""], ["proof (prove)\nusing this:\n  integrable g M\n\ngoal (1 subgoal):\n 1. (\\<And>pg ng.\n        \\<lbrakk>pg \\<in> nnfis (pp g) M; ng \\<in> nnfis (np g) M\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp add: integrable_def)"], ["proof (state)\nthis:\n  pg \\<in> nnfis (pp g) M\n  ng \\<in> nnfis (np g) M\n\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M \\<le> \\<integral> g \\<partial>M", "{"], ["proof (state)\nthis:\n  pg \\<in> nnfis (pp g) M\n  ng \\<in> nnfis (np g) M\n\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M \\<le> \\<integral> g \\<partial>M", "fix t"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M \\<le> \\<integral> g \\<partial>M", "from fg"], ["proof (chain)\npicking this:\n  f \\<le> g", "have \"f t \\<le> g t\""], ["proof (prove)\nusing this:\n  f \\<le> g\n\ngoal (1 subgoal):\n 1. f t \\<le> g t", "by (simp add: le_fun_def)"], ["proof (state)\nthis:\n  f t \\<le> g t\n\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M \\<le> \\<integral> g \\<partial>M", "hence \"pp f t \\<le> pp g t\" and \"np g t \\<le> np f t\""], ["proof (prove)\nusing this:\n  f t \\<le> g t\n\ngoal (1 subgoal):\n 1. pp f t \\<le> pp g t &&& np g t \\<le> np f t", "by (auto simp add: positive_part_def negative_part_def)"], ["proof (state)\nthis:\n  pp f t \\<le> pp g t\n  np g t \\<le> np f t\n\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M \\<le> \\<integral> g \\<partial>M", "}"], ["proof (state)\nthis:\n  pp f ?t2 \\<le> pp g ?t2\n  np g ?t2 \\<le> np f ?t2\n\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M \\<le> \\<integral> g \\<partial>M", "hence \"pp f \\<le> pp g\" and \"np g \\<le> np f\""], ["proof (prove)\nusing this:\n  pp f ?t2 \\<le> pp g ?t2\n  np g ?t2 \\<le> np f ?t2\n\ngoal (1 subgoal):\n 1. pp f \\<le> pp g &&& np g \\<le> np f", "by (simp_all add: le_fun_def)"], ["proof (state)\nthis:\n  pp f \\<le> pp g\n  np g \\<le> np f\n\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M \\<le> \\<integral> g \\<partial>M", "with ms pf pg ng nf"], ["proof (chain)\npicking this:\n  measure_space M\n  pf \\<in> nnfis (pp f) M\n  pg \\<in> nnfis (pp g) M\n  ng \\<in> nnfis (np g) M\n  nf \\<in> nnfis (np f) M\n  pp f \\<le> pp g\n  np g \\<le> np f", "have \"pf \\<le> pg\" and \"ng \\<le> nf\""], ["proof (prove)\nusing this:\n  measure_space M\n  pf \\<in> nnfis (pp f) M\n  pg \\<in> nnfis (pp g) M\n  ng \\<in> nnfis (np g) M\n  nf \\<in> nnfis (np f) M\n  pp f \\<le> pp g\n  np g \\<le> np f\n\ngoal (1 subgoal):\n 1. pf \\<le> pg &&& ng \\<le> nf", "by (simp_all add: nnfis_mono)"], ["proof (state)\nthis:\n  pf \\<le> pg\n  ng \\<le> nf\n\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M \\<le> \\<integral> g \\<partial>M", "also"], ["proof (state)\nthis:\n  pf \\<le> pg\n  ng \\<le> nf\n\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M \\<le> \\<integral> g \\<partial>M", "from ms pf pg ng nf"], ["proof (chain)\npicking this:\n  measure_space M\n  pf \\<in> nnfis (pp f) M\n  pg \\<in> nnfis (pp g) M\n  ng \\<in> nnfis (np g) M\n  nf \\<in> nnfis (np f) M", "have \"(THE i. i \\<in> nnfis (pp f) M) = pf\"\n    and \"(THE i. i \\<in> nnfis (np f) M) = nf\"\n    and \"(THE i. i \\<in> nnfis (pp g) M) = pg\"\n    and \"(THE i. i \\<in> nnfis (np g) M) = ng\""], ["proof (prove)\nusing this:\n  measure_space M\n  pf \\<in> nnfis (pp f) M\n  pg \\<in> nnfis (pp g) M\n  ng \\<in> nnfis (np g) M\n  nf \\<in> nnfis (np f) M\n\ngoal (1 subgoal):\n 1. ((THE i. i \\<in> nnfis (pp f) M) = pf &&&\n     (THE i. i \\<in> nnfis (np f) M) = nf) &&&\n    (THE i. i \\<in> nnfis (pp g) M) = pg &&&\n    (THE i. i \\<in> nnfis (np g) M) = ng", "by (auto simp add: nnfis_unique)"], ["proof (state)\nthis:\n  (THE i. i \\<in> nnfis (pp f) M) = pf\n  (THE i. i \\<in> nnfis (np f) M) = nf\n  (THE i. i \\<in> nnfis (pp g) M) = pg\n  (THE i. i \\<in> nnfis (np g) M) = ng\n\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M \\<le> \\<integral> g \\<partial>M", "with f g"], ["proof (chain)\npicking this:\n  integrable f M\n  integrable g M\n  (THE i. i \\<in> nnfis (pp f) M) = pf\n  (THE i. i \\<in> nnfis (np f) M) = nf\n  (THE i. i \\<in> nnfis (pp g) M) = pg\n  (THE i. i \\<in> nnfis (np g) M) = ng", "have \"\\<integral> f \\<partial>M = pf - nf\"\n    and \"\\<integral> g \\<partial>M = pg - ng\""], ["proof (prove)\nusing this:\n  integrable f M\n  integrable g M\n  (THE i. i \\<in> nnfis (pp f) M) = pf\n  (THE i. i \\<in> nnfis (np f) M) = nf\n  (THE i. i \\<in> nnfis (pp g) M) = pg\n  (THE i. i \\<in> nnfis (np g) M) = ng\n\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M = pf - nf &&&\n    \\<integral> g \\<partial>M = pg - ng", "by (auto simp add: integral_def)"], ["proof (state)\nthis:\n  \\<integral> f \\<partial>M = pf - nf\n  \\<integral> g \\<partial>M = pg - ng\n\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M \\<le> \\<integral> g \\<partial>M", "ultimately"], ["proof (chain)\npicking this:\n  pf \\<le> pg\n  ng \\<le> nf\n  \\<integral> f \\<partial>M = pf - nf\n  \\<integral> g \\<partial>M = pg - ng", "show ?thesis"], ["proof (prove)\nusing this:\n  pf \\<le> pg\n  ng \\<le> nf\n  \\<integral> f \\<partial>M = pf - nf\n  \\<integral> g \\<partial>M = pg - ng\n\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M \\<le> \\<integral> g \\<partial>M", "by simp"], ["proof (state)\nthis:\n  \\<integral> f \\<partial>M \\<le> \\<integral> g \\<partial>M\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem integral_times:\n  assumes int: \"integrable f M\"\n  shows \"integrable (\\<lambda>t. a*f t) M\" and \"\\<integral> (\\<lambda>t. a*f t) \\<partial>M = a*\\<integral> f \\<partial>M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (\\<lambda>t. a * f t) M &&&\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (\\<lambda>t. a * f t) M &&&\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. a * f t) M\n 2. \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "from int"], ["proof (chain)\npicking this:\n  integrable f M", "have \"\\<integral> f \\<partial>M = (THE i. i \\<in> nnfis (pp f) M) -\n  (THE j. j \\<in> nnfis (np f) M)\""], ["proof (prove)\nusing this:\n  integrable f M\n\ngoal (1 subgoal):\n 1. \\<integral> f \\<partial>M =\n    (THE i. i \\<in> nnfis (pp f) M) - (THE j. j \\<in> nnfis (np f) M)", "by (simp only: integral_def)"], ["proof (state)\nthis:\n  \\<integral> f \\<partial>M =\n  (THE i. i \\<in> nnfis (pp f) M) - (THE j. j \\<in> nnfis (np f) M)\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. a * f t) M\n 2. \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "also"], ["proof (state)\nthis:\n  \\<integral> f \\<partial>M =\n  (THE i. i \\<in> nnfis (pp f) M) - (THE j. j \\<in> nnfis (np f) M)\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. a * f t) M\n 2. \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "from int"], ["proof (chain)\npicking this:\n  integrable f M", "obtain k l where k: \"k \\<in> nnfis (pp f) M\"\n    and l: \"l \\<in> nnfis (np f) M\" and ms: \"measure_space M\""], ["proof (prove)\nusing this:\n  integrable f M\n\ngoal (1 subgoal):\n 1. (\\<And>k l.\n        \\<lbrakk>k \\<in> nnfis (pp f) M; l \\<in> nnfis (np f) M;\n         measure_space M\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp add: integrable_def)"], ["proof (state)\nthis:\n  k \\<in> nnfis (pp f) M\n  l \\<in> nnfis (np f) M\n  measure_space M\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. a * f t) M\n 2. \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "from k l ms"], ["proof (chain)\npicking this:\n  k \\<in> nnfis (pp f) M\n  l \\<in> nnfis (np f) M\n  measure_space M", "have \"(THE i. i \\<in> nnfis (pp f) M) = k\"\n    and \"(THE i. i \\<in> nnfis (np f) M) = l\""], ["proof (prove)\nusing this:\n  k \\<in> nnfis (pp f) M\n  l \\<in> nnfis (np f) M\n  measure_space M\n\ngoal (1 subgoal):\n 1. (THE i. i \\<in> nnfis (pp f) M) = k &&&\n    (THE i. i \\<in> nnfis (np f) M) = l", "by (auto simp add: nnfis_unique)"], ["proof (state)\nthis:\n  (THE i. i \\<in> nnfis (pp f) M) = k\n  (THE i. i \\<in> nnfis (np f) M) = l\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. a * f t) M\n 2. \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "with int"], ["proof (chain)\npicking this:\n  integrable f M\n  (THE i. i \\<in> nnfis (pp f) M) = k\n  (THE i. i \\<in> nnfis (np f) M) = l", "have uni: \"k-l = \\<integral> f \\<partial>M\""], ["proof (prove)\nusing this:\n  integrable f M\n  (THE i. i \\<in> nnfis (pp f) M) = k\n  (THE i. i \\<in> nnfis (np f) M) = l\n\ngoal (1 subgoal):\n 1. k - l = \\<integral> f \\<partial>M", "by (simp add: integral_def)"], ["proof (state)\nthis:\n  k - l = \\<integral> f \\<partial>M\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. a * f t) M\n 2. \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "have \"integrable (\\<lambda>t. a*f t) M \\<and> \\<integral> (\\<lambda>t. a*f t) \\<partial>M = a*\\<integral> f \\<partial>M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "proof (cases \"0\\<le>a\")"], ["proof (state)\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "case True"], ["proof (state)\nthis:\n  0 \\<le> a\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "hence pp: \"pp (\\<lambda>t. a * f t) = (\\<lambda>t. a * pp f t)\" and np: \"np (\\<lambda>t. a * f t) = (\\<lambda>t. a * np f t)\""], ["proof (prove)\nusing this:\n  0 \\<le> a\n\ngoal (1 subgoal):\n 1. pp (\\<lambda>t. a * f t) = (\\<lambda>t. a * pp f t) &&&\n    np (\\<lambda>t. a * f t) = (\\<lambda>t. a * np f t)", "by (auto simp add: real_pp_np_pos_times)"], ["proof (state)\nthis:\n  pp (\\<lambda>t. a * f t) = (\\<lambda>t. a * pp f t)\n  np (\\<lambda>t. a * f t) = (\\<lambda>t. a * np f t)\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "from ms k True"], ["proof (chain)\npicking this:\n  measure_space M\n  k \\<in> nnfis (pp f) M\n  0 \\<le> a", "have \"a*k \\<in> nnfis (\\<lambda>t. a * pp f t) M\""], ["proof (prove)\nusing this:\n  measure_space M\n  k \\<in> nnfis (pp f) M\n  0 \\<le> a\n\ngoal (1 subgoal):\n 1. a * k \\<in> nnfis (\\<lambda>t. a * pp f t) M", "by (rule nnfis_times)"], ["proof (state)\nthis:\n  a * k \\<in> nnfis (\\<lambda>t. a * pp f t) M\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "with pp"], ["proof (chain)\npicking this:\n  pp (\\<lambda>t. a * f t) = (\\<lambda>t. a * pp f t)\n  a * k \\<in> nnfis (\\<lambda>t. a * pp f t) M", "have 1: \"a*k \\<in> nnfis (pp (\\<lambda>t. a * f t)) M\""], ["proof (prove)\nusing this:\n  pp (\\<lambda>t. a * f t) = (\\<lambda>t. a * pp f t)\n  a * k \\<in> nnfis (\\<lambda>t. a * pp f t) M\n\ngoal (1 subgoal):\n 1. a * k \\<in> nnfis (pp (\\<lambda>t. a * f t)) M", "by simp"], ["proof (state)\nthis:\n  a * k \\<in> nnfis (pp (\\<lambda>t. a * f t)) M\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "from np ms l True"], ["proof (chain)\npicking this:\n  np (\\<lambda>t. a * f t) = (\\<lambda>t. a * np f t)\n  measure_space M\n  l \\<in> nnfis (np f) M\n  0 \\<le> a", "have 2: \"a*l \\<in> nnfis (np (\\<lambda>t. a * f t)) M\""], ["proof (prove)\nusing this:\n  np (\\<lambda>t. a * f t) = (\\<lambda>t. a * np f t)\n  measure_space M\n  l \\<in> nnfis (np f) M\n  0 \\<le> a\n\ngoal (1 subgoal):\n 1. a * l \\<in> nnfis (np (\\<lambda>t. a * f t)) M", "by (simp add: nnfis_times)"], ["proof (state)\nthis:\n  a * l \\<in> nnfis (np (\\<lambda>t. a * f t)) M\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "from ms 1 2"], ["proof (chain)\npicking this:\n  measure_space M\n  a * k \\<in> nnfis (pp (\\<lambda>t. a * f t)) M\n  a * l \\<in> nnfis (np (\\<lambda>t. a * f t)) M", "have i: \"integrable (\\<lambda>t. a*f t) M\""], ["proof (prove)\nusing this:\n  measure_space M\n  a * k \\<in> nnfis (pp (\\<lambda>t. a * f t)) M\n  a * l \\<in> nnfis (np (\\<lambda>t. a * f t)) M\n\ngoal (1 subgoal):\n 1. integrable (\\<lambda>t. a * f t) M", "by (auto simp add: integrable_def)"], ["proof (state)\nthis:\n  integrable (\\<lambda>t. a * f t) M\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "also"], ["proof (state)\nthis:\n  integrable (\\<lambda>t. a * f t) M\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "from 1 ms"], ["proof (chain)\npicking this:\n  a * k \\<in> nnfis (pp (\\<lambda>t. a * f t)) M\n  measure_space M", "have \"(THE i. i \\<in> nnfis (pp (\\<lambda>t. a * f t)) M) = a*k\""], ["proof (prove)\nusing this:\n  a * k \\<in> nnfis (pp (\\<lambda>t. a * f t)) M\n  measure_space M\n\ngoal (1 subgoal):\n 1. (THE i. i \\<in> nnfis (pp (\\<lambda>t. a * f t)) M) = a * k", "by (auto simp add: nnfis_unique)"], ["proof (state)\nthis:\n  (THE i. i \\<in> nnfis (pp (\\<lambda>t. a * f t)) M) = a * k\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "moreover"], ["proof (state)\nthis:\n  (THE i. i \\<in> nnfis (pp (\\<lambda>t. a * f t)) M) = a * k\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "from 2 ms"], ["proof (chain)\npicking this:\n  a * l \\<in> nnfis (np (\\<lambda>t. a * f t)) M\n  measure_space M", "have \"(THE i. i \\<in> nnfis (np (\\<lambda>t. a * f t)) M) = a*l\""], ["proof (prove)\nusing this:\n  a * l \\<in> nnfis (np (\\<lambda>t. a * f t)) M\n  measure_space M\n\ngoal (1 subgoal):\n 1. (THE i. i \\<in> nnfis (np (\\<lambda>t. a * f t)) M) = a * l", "by (auto simp add: nnfis_unique)"], ["proof (state)\nthis:\n  (THE i. i \\<in> nnfis (np (\\<lambda>t. a * f t)) M) = a * l\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "ultimately"], ["proof (chain)\npicking this:\n  integrable (\\<lambda>t. a * f t) M\n  (THE i. i \\<in> nnfis (pp (\\<lambda>t. a * f t)) M) = a * k\n  (THE i. i \\<in> nnfis (np (\\<lambda>t. a * f t)) M) = a * l", "have \"\\<integral> (\\<lambda>t. a*f t) \\<partial>M = a*k-a*l\""], ["proof (prove)\nusing this:\n  integrable (\\<lambda>t. a * f t) M\n  (THE i. i \\<in> nnfis (pp (\\<lambda>t. a * f t)) M) = a * k\n  (THE i. i \\<in> nnfis (np (\\<lambda>t. a * f t)) M) = a * l\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. a * f t) \\<partial>M = a * k - a * l", "by (simp add: integral_def)"], ["proof (state)\nthis:\n  \\<integral> (\\<lambda>t. a * f t) \\<partial>M = a * k - a * l\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "also"], ["proof (state)\nthis:\n  \\<integral> (\\<lambda>t. a * f t) \\<partial>M = a * k - a * l\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "have \"\\<dots> = a*(k-l)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a * k - a * l = a * (k - l)", "by (simp add: right_diff_distrib)"], ["proof (state)\nthis:\n  a * k - a * l = a * (k - l)\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "also"], ["proof (state)\nthis:\n  a * k - a * l = a * (k - l)\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "note uni"], ["proof (state)\nthis:\n  k - l = \\<integral> f \\<partial>M\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "also"], ["proof (state)\nthis:\n  k - l = \\<integral> f \\<partial>M\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "note i"], ["proof (state)\nthis:\n  integrable (\\<lambda>t. a * f t) M\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "ultimately"], ["proof (chain)\npicking this:\n  \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n  a * \\<integral> f \\<partial>M\n  integrable (\\<lambda>t. a * f t) M", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n  a * \\<integral> f \\<partial>M\n  integrable (\\<lambda>t. a * f t) M\n\ngoal (1 subgoal):\n 1. integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "by simp"], ["proof (state)\nthis:\n  integrable (\\<lambda>t. a * f t) M \\<and>\n  \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n  a * \\<integral> f \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "case False"], ["proof (state)\nthis:\n  \\<not> 0 \\<le> a\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "hence pp: \"pp (\\<lambda>t. a*f t) = (\\<lambda>t. -a*np f t)\" and np: \"np (\\<lambda>t. a*f t) = (\\<lambda>t. -a*pp f t)\""], ["proof (prove)\nusing this:\n  \\<not> 0 \\<le> a\n\ngoal (1 subgoal):\n 1. pp (\\<lambda>t. a * f t) = (\\<lambda>t. - a * np f t) &&&\n    np (\\<lambda>t. a * f t) = (\\<lambda>t. - a * pp f t)", "by (auto simp add: real_pp_np_neg_times)"], ["proof (state)\nthis:\n  pp (\\<lambda>t. a * f t) = (\\<lambda>t. - a * np f t)\n  np (\\<lambda>t. a * f t) = (\\<lambda>t. - a * pp f t)\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "from False"], ["proof (chain)\npicking this:\n  \\<not> 0 \\<le> a", "have le: \"0 \\<le> -a\""], ["proof (prove)\nusing this:\n  \\<not> 0 \\<le> a\n\ngoal (1 subgoal):\n 1. 0 \\<le> - a", "by simp"], ["proof (state)\nthis:\n  0 \\<le> - a\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "with ms l"], ["proof (chain)\npicking this:\n  measure_space M\n  l \\<in> nnfis (np f) M\n  0 \\<le> - a", "have \"-a*l \\<in> nnfis (\\<lambda>t. -a * np f t) M\""], ["proof (prove)\nusing this:\n  measure_space M\n  l \\<in> nnfis (np f) M\n  0 \\<le> - a\n\ngoal (1 subgoal):\n 1. - a * l \\<in> nnfis (\\<lambda>t. - a * np f t) M", "by (rule nnfis_times)"], ["proof (state)\nthis:\n  - a * l \\<in> nnfis (\\<lambda>t. - a * np f t) M\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "with pp"], ["proof (chain)\npicking this:\n  pp (\\<lambda>t. a * f t) = (\\<lambda>t. - a * np f t)\n  - a * l \\<in> nnfis (\\<lambda>t. - a * np f t) M", "have 1: \"-a*l \\<in> nnfis (pp (\\<lambda>t. a * f t)) M\""], ["proof (prove)\nusing this:\n  pp (\\<lambda>t. a * f t) = (\\<lambda>t. - a * np f t)\n  - a * l \\<in> nnfis (\\<lambda>t. - a * np f t) M\n\ngoal (1 subgoal):\n 1. - a * l \\<in> nnfis (pp (\\<lambda>t. a * f t)) M", "by simp"], ["proof (state)\nthis:\n  - a * l \\<in> nnfis (pp (\\<lambda>t. a * f t)) M\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "from ms k le"], ["proof (chain)\npicking this:\n  measure_space M\n  k \\<in> nnfis (pp f) M\n  0 \\<le> - a", "have \"-a*k \\<in> nnfis (\\<lambda>t. -a * pp f t) M\""], ["proof (prove)\nusing this:\n  measure_space M\n  k \\<in> nnfis (pp f) M\n  0 \\<le> - a\n\ngoal (1 subgoal):\n 1. - a * k \\<in> nnfis (\\<lambda>t. - a * pp f t) M", "by (rule nnfis_times)"], ["proof (state)\nthis:\n  - a * k \\<in> nnfis (\\<lambda>t. - a * pp f t) M\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "with np"], ["proof (chain)\npicking this:\n  np (\\<lambda>t. a * f t) = (\\<lambda>t. - a * pp f t)\n  - a * k \\<in> nnfis (\\<lambda>t. - a * pp f t) M", "have 2: \"-a*k \\<in> nnfis (np (\\<lambda>t. a * f t)) M\""], ["proof (prove)\nusing this:\n  np (\\<lambda>t. a * f t) = (\\<lambda>t. - a * pp f t)\n  - a * k \\<in> nnfis (\\<lambda>t. - a * pp f t) M\n\ngoal (1 subgoal):\n 1. - a * k \\<in> nnfis (np (\\<lambda>t. a * f t)) M", "by simp"], ["proof (state)\nthis:\n  - a * k \\<in> nnfis (np (\\<lambda>t. a * f t)) M\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "from ms 1 2"], ["proof (chain)\npicking this:\n  measure_space M\n  - a * l \\<in> nnfis (pp (\\<lambda>t. a * f t)) M\n  - a * k \\<in> nnfis (np (\\<lambda>t. a * f t)) M", "have i: \"integrable (\\<lambda>t. a*f t) M\""], ["proof (prove)\nusing this:\n  measure_space M\n  - a * l \\<in> nnfis (pp (\\<lambda>t. a * f t)) M\n  - a * k \\<in> nnfis (np (\\<lambda>t. a * f t)) M\n\ngoal (1 subgoal):\n 1. integrable (\\<lambda>t. a * f t) M", "by (auto simp add: integrable_def)"], ["proof (state)\nthis:\n  integrable (\\<lambda>t. a * f t) M\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "also"], ["proof (state)\nthis:\n  integrable (\\<lambda>t. a * f t) M\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "from 1 ms"], ["proof (chain)\npicking this:\n  - a * l \\<in> nnfis (pp (\\<lambda>t. a * f t)) M\n  measure_space M", "have \"(THE i. i \\<in> nnfis (pp (\\<lambda>t. a * f t)) M) = -a*l\""], ["proof (prove)\nusing this:\n  - a * l \\<in> nnfis (pp (\\<lambda>t. a * f t)) M\n  measure_space M\n\ngoal (1 subgoal):\n 1. (THE i. i \\<in> nnfis (pp (\\<lambda>t. a * f t)) M) = - a * l", "by (auto simp add: nnfis_unique)"], ["proof (state)\nthis:\n  (THE i. i \\<in> nnfis (pp (\\<lambda>t. a * f t)) M) = - a * l\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "moreover"], ["proof (state)\nthis:\n  (THE i. i \\<in> nnfis (pp (\\<lambda>t. a * f t)) M) = - a * l\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "from 2 ms"], ["proof (chain)\npicking this:\n  - a * k \\<in> nnfis (np (\\<lambda>t. a * f t)) M\n  measure_space M", "have \"(THE i. i \\<in> nnfis (np (\\<lambda>t. a * f t)) M) = -a*k\""], ["proof (prove)\nusing this:\n  - a * k \\<in> nnfis (np (\\<lambda>t. a * f t)) M\n  measure_space M\n\ngoal (1 subgoal):\n 1. (THE i. i \\<in> nnfis (np (\\<lambda>t. a * f t)) M) = - a * k", "by (auto simp add: nnfis_unique)"], ["proof (state)\nthis:\n  (THE i. i \\<in> nnfis (np (\\<lambda>t. a * f t)) M) = - a * k\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "ultimately"], ["proof (chain)\npicking this:\n  integrable (\\<lambda>t. a * f t) M\n  (THE i. i \\<in> nnfis (pp (\\<lambda>t. a * f t)) M) = - a * l\n  (THE i. i \\<in> nnfis (np (\\<lambda>t. a * f t)) M) = - a * k", "have \"\\<integral> (\\<lambda>t. a*f t) \\<partial>M = -a*l-(-a*k)\""], ["proof (prove)\nusing this:\n  integrable (\\<lambda>t. a * f t) M\n  (THE i. i \\<in> nnfis (pp (\\<lambda>t. a * f t)) M) = - a * l\n  (THE i. i \\<in> nnfis (np (\\<lambda>t. a * f t)) M) = - a * k\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. a * f t) \\<partial>M = - a * l - - a * k", "by (simp add: integral_def)"], ["proof (state)\nthis:\n  \\<integral> (\\<lambda>t. a * f t) \\<partial>M = - a * l - - a * k\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "also"], ["proof (state)\nthis:\n  \\<integral> (\\<lambda>t. a * f t) \\<partial>M = - a * l - - a * k\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "have \"\\<dots> = a*(k-l)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - a * l - - a * k = a * (k - l)", "by (simp add: right_diff_distrib)"], ["proof (state)\nthis:\n  - a * l - - a * k = a * (k - l)\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "also"], ["proof (state)\nthis:\n  - a * l - - a * k = a * (k - l)\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "note uni"], ["proof (state)\nthis:\n  k - l = \\<integral> f \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "also"], ["proof (state)\nthis:\n  k - l = \\<integral> f \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "note i"], ["proof (state)\nthis:\n  integrable (\\<lambda>t. a * f t) M\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "ultimately"], ["proof (chain)\npicking this:\n  \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n  a * \\<integral> f \\<partial>M\n  integrable (\\<lambda>t. a * f t) M", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n  a * \\<integral> f \\<partial>M\n  integrable (\\<lambda>t. a * f t) M\n\ngoal (1 subgoal):\n 1. integrable (\\<lambda>t. a * f t) M \\<and>\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "by simp"], ["proof (state)\nthis:\n  integrable (\\<lambda>t. a * f t) M \\<and>\n  \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n  a * \\<integral> f \\<partial>M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  integrable (\\<lambda>t. a * f t) M \\<and>\n  \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n  a * \\<integral> f \\<partial>M\n\ngoal (2 subgoals):\n 1. integrable (\\<lambda>t. a * f t) M\n 2. \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "thus \"integrable (\\<lambda>t. a*f t) M\" and \"\\<integral> (\\<lambda>t. a*f t) \\<partial>M = a*\\<integral> f \\<partial>M\""], ["proof (prove)\nusing this:\n  integrable (\\<lambda>t. a * f t) M \\<and>\n  \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n  a * \\<integral> f \\<partial>M\n\ngoal (1 subgoal):\n 1. integrable (\\<lambda>t. a * f t) M &&&\n    \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n    a * \\<integral> f \\<partial>M", "by simp_all"], ["proof (state)\nthis:\n  integrable (\\<lambda>t. a * f t) M\n  \\<integral> (\\<lambda>t. a * f t) \\<partial>M =\n  a * \\<integral> f \\<partial>M\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)\n\n(* Left out for lack of time   \n   \ntheorem sf_integral: \n  assumes M: \"measure_space M\" and f: \"f = (\\<lambda>t. \\<Sum>i\\<in>(S::nat set). x i * \\<chi> (A i) t)\"\n  and A: \"\\<forall>i\\<in>S. A i \\<in> measurable_sets M\" and S: \"finite S\"\n  shows \"\\<integral> f \\<partial> M = (\\<Sum>i\\<in>S. x i * measure M (A i))\" \n  and \"integrable f M\"\n  oops\n  \nconstdefs\n  The probabilistic Quantifiers as in Hurd: p. 53 could be defined as a special case of this\nalmost_everywhere:: \"('a set set * ('a set \\<Rightarrow> real)) \\<Rightarrow> ('a \\<Rightarrow> bool) \\<Rightarrow> bool\" (\"_-a.e. _\")\n\"M-a.e. P == measure_space M \\<and> (\\<exists>N. N \\<in> measurable_sets M \\<and> measure M N = 0 \\<and> (\\<forall>w \\<in> -N. P w))\"\n\ntheorem assumes ae0: \"M-a.e. (\\<lambda>w. f w = 0)\" \n  shows ae0_nn_integ: \"\\<integral> f \\<partial> M = 0\"\n  oops\n\ntheorem  assumes \"integrable f M\" and \"integrable g M\" and \"M-a.e. (\\<lambda>w. f w \\<le> g w)\"\n  shows ae_integ_monotone: \"\\<integral> f \\<partial> M \\<le> \\<integral> g \\<partial> M\"\n  oops\n\ntheorem assumes aeq: \"M-a.e. (\\<lambda>w. f w = g w)\" \n  shows aeq_nn_integ: \"integrable f M \\<Longrightarrow> \\<integral> f \\<partial> M = \\<integral> g \\<partial> M\"\n  oops\n *)"], ["", "text\\<open>To try out our definitions in an application, only one more\n  theorem is missing. The famous Markov--Chebyshev inequation is not\n  difficult to arrive at using the basic integral properties.\\<close>"], ["", "theorem assumes int: \"integrable f M\" and a: \"0<a\" and intp: \"integrable (\\<lambda>x. \\<bar>f x\\<bar> ^ n) M\"\n  shows markov_ineq: \"law M f {a..} \\<le>  \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / (a^n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. law M f {a..}\n    \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / a ^ n", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. law M f {a..}\n    \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / a ^ n", "from int"], ["proof (chain)\npicking this:\n  integrable f M", "have rv: \"f \\<in> rv M\""], ["proof (prove)\nusing this:\n  integrable f M\n\ngoal (1 subgoal):\n 1. f \\<in> rv M", "by (rule integrable_rv)"], ["proof (state)\nthis:\n  f \\<in> rv M\n\ngoal (1 subgoal):\n 1. law M f {a..}\n    \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / a ^ n", "hence ms: \"measure_space M\""], ["proof (prove)\nusing this:\n  f \\<in> rv M\n\ngoal (1 subgoal):\n 1. measure_space M", "by (simp add: rv_def)"], ["proof (state)\nthis:\n  measure_space M\n\ngoal (1 subgoal):\n 1. law M f {a..}\n    \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / a ^ n", "from ms rv"], ["proof (chain)\npicking this:\n  measure_space M\n  f \\<in> rv M", "have ams: \"{w. a \\<le> f w} \\<in> measurable_sets M\""], ["proof (prove)\nusing this:\n  measure_space M\n  f \\<in> rv M\n\ngoal (1 subgoal):\n 1. {w. a \\<le> f w} \\<in> measurable_sets M", "by (simp add: rv_ge_iff)"], ["proof (state)\nthis:\n  {w. a \\<le> f w} \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. law M f {a..}\n    \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / a ^ n", "from rv"], ["proof (chain)\npicking this:\n  f \\<in> rv M", "have \"(a^n)*law M f {a..} = (a^n)*measure M {w. a \\<le> f w}\""], ["proof (prove)\nusing this:\n  f \\<in> rv M\n\ngoal (1 subgoal):\n 1. a ^ n * law M f {a..} = a ^ n * Measure.measure M {w. a \\<le> f w}", "by (simp add: distribution_def vimage_def)"], ["proof (state)\nthis:\n  a ^ n * law M f {a..} = a ^ n * Measure.measure M {w. a \\<le> f w}\n\ngoal (1 subgoal):\n 1. law M f {a..}\n    \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / a ^ n", "also"], ["proof (state)\nthis:\n  a ^ n * law M f {a..} = a ^ n * Measure.measure M {w. a \\<le> f w}\n\ngoal (1 subgoal):\n 1. law M f {a..}\n    \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / a ^ n", "from ms ams"], ["proof (chain)\npicking this:\n  measure_space M\n  {w. a \\<le> f w} \\<in> measurable_sets M", "have int2: \"integrable \\<chi> {w. a \\<le> f w} M\" \n    and eq2: \"\\<dots> = (a^n)*\\<integral> \\<chi> {w. a \\<le> f w} \\<partial> M\""], ["proof (prove)\nusing this:\n  measure_space M\n  {w. a \\<le> f w} \\<in> measurable_sets M\n\ngoal (1 subgoal):\n 1. integrable \\<chi> {w. a \\<le> f w} M &&&\n    a ^ n * Measure.measure M {w. a \\<le> f w} =\n    a ^ n * \\<integral> \\<chi> {w. a \\<le> f w} \\<partial>M", "by (auto simp add: integral_char)"], ["proof (state)\nthis:\n  integrable \\<chi> {w. a \\<le> f w} M\n  a ^ n * Measure.measure M {w. a \\<le> f w} =\n  a ^ n * \\<integral> \\<chi> {w. a \\<le> f w} \\<partial>M\n\ngoal (1 subgoal):\n 1. law M f {a..}\n    \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / a ^ n", "note eq2"], ["proof (state)\nthis:\n  a ^ n * Measure.measure M {w. a \\<le> f w} =\n  a ^ n * \\<integral> \\<chi> {w. a \\<le> f w} \\<partial>M\n\ngoal (1 subgoal):\n 1. law M f {a..}\n    \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / a ^ n", "also"], ["proof (state)\nthis:\n  a ^ n * Measure.measure M {w. a \\<le> f w} =\n  a ^ n * \\<integral> \\<chi> {w. a \\<le> f w} \\<partial>M\n\ngoal (1 subgoal):\n 1. law M f {a..}\n    \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / a ^ n", "from int2"], ["proof (chain)\npicking this:\n  integrable \\<chi> {w. a \\<le> f w} M", "have int3: \"integrable (\\<lambda>t. (a^n)*\\<chi> {w. a \\<le> f w} t) M\" \n    and eq3: \"\\<dots> = \\<integral> (\\<lambda>t. (a^n)*\\<chi> {w. a \\<le> f w} t) \\<partial> M\""], ["proof (prove)\nusing this:\n  integrable \\<chi> {w. a \\<le> f w} M\n\ngoal (1 subgoal):\n 1. integrable (\\<lambda>t. a ^ n * \\<chi> {w. a \\<le> f w} t) M &&&\n    a ^ n * \\<integral> \\<chi> {w. a \\<le> f w} \\<partial>M =\n    \\<integral> (\\<lambda>t. a ^ n * \\<chi> {w. a \\<le> f w} t) \\<partial>M", "by (auto simp add: integral_times)"], ["proof (state)\nthis:\n  integrable (\\<lambda>t. a ^ n * \\<chi> {w. a \\<le> f w} t) M\n  a ^ n * \\<integral> \\<chi> {w. a \\<le> f w} \\<partial>M =\n  \\<integral> (\\<lambda>t. a ^ n * \\<chi> {w. a \\<le> f w} t) \\<partial>M\n\ngoal (1 subgoal):\n 1. law M f {a..}\n    \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / a ^ n", "note eq3"], ["proof (state)\nthis:\n  a ^ n * \\<integral> \\<chi> {w. a \\<le> f w} \\<partial>M =\n  \\<integral> (\\<lambda>t. a ^ n * \\<chi> {w. a \\<le> f w} t) \\<partial>M\n\ngoal (1 subgoal):\n 1. law M f {a..}\n    \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / a ^ n", "also"], ["proof (state)\nthis:\n  a ^ n * \\<integral> \\<chi> {w. a \\<le> f w} \\<partial>M =\n  \\<integral> (\\<lambda>t. a ^ n * \\<chi> {w. a \\<le> f w} t) \\<partial>M\n\ngoal (1 subgoal):\n 1. law M f {a..}\n    \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / a ^ n", "{"], ["proof (state)\nthis:\n  a ^ n * \\<integral> \\<chi> {w. a \\<le> f w} \\<partial>M =\n  \\<integral> (\\<lambda>t. a ^ n * \\<chi> {w. a \\<le> f w} t) \\<partial>M\n\ngoal (1 subgoal):\n 1. law M f {a..}\n    \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / a ^ n", "fix t"], ["proof (state)\ngoal (1 subgoal):\n 1. law M f {a..}\n    \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / a ^ n", "from a"], ["proof (chain)\npicking this:\n  0 < a", "have \"(a^n)*\\<chi> {w. a \\<le> f w} t \\<le> \\<bar>f t\\<bar> ^ n\""], ["proof (prove)\nusing this:\n  0 < a\n\ngoal (1 subgoal):\n 1. a ^ n * \\<chi> {w. a \\<le> f w} t \\<le> \\<bar>f t\\<bar> ^ n", "proof (cases \"a \\<le> f t\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>0 < a; a \\<le> f t\\<rbrakk>\n    \\<Longrightarrow> a ^ n * \\<chi> {w. a \\<le> f w} t\n                      \\<le> \\<bar>f t\\<bar> ^ n\n 2. \\<lbrakk>0 < a; \\<not> a \\<le> f t\\<rbrakk>\n    \\<Longrightarrow> a ^ n * \\<chi> {w. a \\<le> f w} t\n                      \\<le> \\<bar>f t\\<bar> ^ n", "case False"], ["proof (state)\nthis:\n  \\<not> a \\<le> f t\n\ngoal (2 subgoals):\n 1. \\<lbrakk>0 < a; a \\<le> f t\\<rbrakk>\n    \\<Longrightarrow> a ^ n * \\<chi> {w. a \\<le> f w} t\n                      \\<le> \\<bar>f t\\<bar> ^ n\n 2. \\<lbrakk>0 < a; \\<not> a \\<le> f t\\<rbrakk>\n    \\<Longrightarrow> a ^ n * \\<chi> {w. a \\<le> f w} t\n                      \\<le> \\<bar>f t\\<bar> ^ n", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<not> a \\<le> f t\n\ngoal (1 subgoal):\n 1. a ^ n * \\<chi> {w. a \\<le> f w} t \\<le> \\<bar>f t\\<bar> ^ n", "by (simp add: characteristic_function_def)"], ["proof (state)\nthis:\n  a ^ n * \\<chi> {w. a \\<le> f w} t \\<le> \\<bar>f t\\<bar> ^ n\n\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < a; a \\<le> f t\\<rbrakk>\n    \\<Longrightarrow> a ^ n * \\<chi> {w. a \\<le> f w} t\n                      \\<le> \\<bar>f t\\<bar> ^ n", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < a; a \\<le> f t\\<rbrakk>\n    \\<Longrightarrow> a ^ n * \\<chi> {w. a \\<le> f w} t\n                      \\<le> \\<bar>f t\\<bar> ^ n", "case True"], ["proof (state)\nthis:\n  a \\<le> f t\n\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < a; a \\<le> f t\\<rbrakk>\n    \\<Longrightarrow> a ^ n * \\<chi> {w. a \\<le> f w} t\n                      \\<le> \\<bar>f t\\<bar> ^ n", "with a"], ["proof (chain)\npicking this:\n  0 < a\n  a \\<le> f t", "have \"a ^ n \\<le> (f t)^ n\""], ["proof (prove)\nusing this:\n  0 < a\n  a \\<le> f t\n\ngoal (1 subgoal):\n 1. a ^ n \\<le> f t ^ n", "by (simp add: power_mono)"], ["proof (state)\nthis:\n  a ^ n \\<le> f t ^ n\n\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < a; a \\<le> f t\\<rbrakk>\n    \\<Longrightarrow> a ^ n * \\<chi> {w. a \\<le> f w} t\n                      \\<le> \\<bar>f t\\<bar> ^ n", "also"], ["proof (state)\nthis:\n  a ^ n \\<le> f t ^ n\n\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < a; a \\<le> f t\\<rbrakk>\n    \\<Longrightarrow> a ^ n * \\<chi> {w. a \\<le> f w} t\n                      \\<le> \\<bar>f t\\<bar> ^ n", "have \"(f t)^ n \\<le> \\<bar>(f t) ^ n\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f t ^ n \\<le> \\<bar>f t ^ n\\<bar>", "by arith"], ["proof (state)\nthis:\n  f t ^ n \\<le> \\<bar>f t ^ n\\<bar>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < a; a \\<le> f t\\<rbrakk>\n    \\<Longrightarrow> a ^ n * \\<chi> {w. a \\<le> f w} t\n                      \\<le> \\<bar>f t\\<bar> ^ n", "hence \"(f t)^ n \\<le> \\<bar>f t\\<bar> ^ n\""], ["proof (prove)\nusing this:\n  f t ^ n \\<le> \\<bar>f t ^ n\\<bar>\n\ngoal (1 subgoal):\n 1. f t ^ n \\<le> \\<bar>f t\\<bar> ^ n", "by (simp add: power_abs)"], ["proof (state)\nthis:\n  f t ^ n \\<le> \\<bar>f t\\<bar> ^ n\n\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < a; a \\<le> f t\\<rbrakk>\n    \\<Longrightarrow> a ^ n * \\<chi> {w. a \\<le> f w} t\n                      \\<le> \\<bar>f t\\<bar> ^ n", "finally"], ["proof (chain)\npicking this:\n  a ^ n \\<le> \\<bar>f t\\<bar> ^ n", "show ?thesis"], ["proof (prove)\nusing this:\n  a ^ n \\<le> \\<bar>f t\\<bar> ^ n\n\ngoal (1 subgoal):\n 1. a ^ n * \\<chi> {w. a \\<le> f w} t \\<le> \\<bar>f t\\<bar> ^ n", "by (simp add: characteristic_function_def)"], ["proof (state)\nthis:\n  a ^ n * \\<chi> {w. a \\<le> f w} t \\<le> \\<bar>f t\\<bar> ^ n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  a ^ n * \\<chi> {w. a \\<le> f w} t \\<le> \\<bar>f t\\<bar> ^ n\n\ngoal (1 subgoal):\n 1. law M f {a..}\n    \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / a ^ n", "}"], ["proof (state)\nthis:\n  a ^ n * \\<chi> {w. a \\<le> f w} ?t2 \\<le> \\<bar>f ?t2\\<bar> ^ n\n\ngoal (1 subgoal):\n 1. law M f {a..}\n    \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / a ^ n", "with int3 intp"], ["proof (chain)\npicking this:\n  integrable (\\<lambda>t. a ^ n * \\<chi> {w. a \\<le> f w} t) M\n  integrable (\\<lambda>x. \\<bar>f x\\<bar> ^ n) M\n  a ^ n * \\<chi> {w. a \\<le> f w} ?t2 \\<le> \\<bar>f ?t2\\<bar> ^ n", "have \"\\<dots> \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M\""], ["proof (prove)\nusing this:\n  integrable (\\<lambda>t. a ^ n * \\<chi> {w. a \\<le> f w} t) M\n  integrable (\\<lambda>x. \\<bar>f x\\<bar> ^ n) M\n  a ^ n * \\<chi> {w. a \\<le> f w} ?t2 \\<le> \\<bar>f ?t2\\<bar> ^ n\n\ngoal (1 subgoal):\n 1. \\<integral> (\\<lambda>t. a ^ n * \\<chi> {w. a \\<le> f w} t) \\<partial>M\n    \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M", "by (simp add: le_fun_def integral_mono)"], ["proof (state)\nthis:\n  \\<integral> (\\<lambda>t. a ^ n * \\<chi> {w. a \\<le> f w} t) \\<partial>M\n  \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M\n\ngoal (1 subgoal):\n 1. law M f {a..}\n    \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / a ^ n", "also"], ["proof (state)\nthis:\n  \\<integral> (\\<lambda>t. a ^ n * \\<chi> {w. a \\<le> f w} t) \\<partial>M\n  \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M\n\ngoal (1 subgoal):\n 1. law M f {a..}\n    \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / a ^ n", "from a"], ["proof (chain)\npicking this:\n  0 < a", "have \"0 < a^n\""], ["proof (prove)\nusing this:\n  0 < a\n\ngoal (1 subgoal):\n 1. 0 < a ^ n", "by (rule zero_less_power)"], ["proof (state)\nthis:\n  0 < a ^ n\n\ngoal (1 subgoal):\n 1. law M f {a..}\n    \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / a ^ n", "ultimately"], ["proof (chain)\npicking this:\n  a ^ n * law M f {a..}\n  \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M\n  0 < a ^ n", "show ?thesis"], ["proof (prove)\nusing this:\n  a ^ n * law M f {a..}\n  \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M\n  0 < a ^ n\n\ngoal (1 subgoal):\n 1. law M f {a..}\n    \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / a ^ n", "by (simp add: pos_le_divide_eq mult.commute)"], ["proof (state)\nthis:\n  law M f {a..}\n  \\<le> \\<integral> (\\<lambda>x. \\<bar>f x\\<bar> ^ n) \\<partial>M / a ^ n\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}