{"file_name": "/home/qj213/afp-2021-10-22/thys/Groebner_Bases/Confluence.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Groebner_Bases", "problem_names": ["lemma wfp_on_imp_wfP:\n  assumes \"wfp_on r A\"\n  shows \"wfP (\\<lambda>x y. r x y \\<and> x \\<in> A \\<and> y \\<in> A)\" (is \"wfP ?r\")", "lemma wfp_onI_min:\n  assumes \"\\<And>x Q. x \\<in> Q \\<Longrightarrow> Q \\<subseteq> A \\<Longrightarrow> \\<exists>z\\<in>Q. \\<forall>y\\<in>A. r y z \\<longrightarrow> y \\<notin> Q\"\n  shows \"wfp_on r A\"", "lemma wfp_onE_min:\n  assumes \"wfp_on r A\" and \"x \\<in> Q\" and \"Q \\<subseteq> A\"\n  obtains z where \"z \\<in> Q\" and \"\\<And>y. r y z \\<Longrightarrow> y \\<notin> Q\"", "lemma wfp_onI_chain: \"\\<not> (\\<exists>f. \\<forall>i. f i \\<in> A \\<and> r (f (Suc i)) (f i)) \\<Longrightarrow> wfp_on r A\"", "lemma finite_minimalE:\n  assumes \"finite A\" and \"A \\<noteq> {}\" and \"irreflp rel\" and \"transp rel\"\n  obtains a where \"a \\<in> A\" and \"\\<And>b. rel b a \\<Longrightarrow> b \\<notin> A\"", "lemma wfp_on_finite:\n  assumes \"irreflp rel\" and \"transp rel\" and \"finite A\"\n  shows \"wfp_on rel A\"", "lemma dw_closedI [intro]:\n  assumes \"\\<And>a b. a \\<in> A \\<Longrightarrow> a \\<rightarrow> b \\<Longrightarrow> b \\<in> A\"\n  shows \"dw_closed A\"", "lemma dw_closedD:\n  assumes \"dw_closed A\" and \"a \\<in> A\" and \"a \\<rightarrow> b\"\n  shows \"b \\<in> A\"", "lemma dw_closed_rtrancl:\n  assumes \"dw_closed A\" and \"a \\<in> A\" and \"a \\<rightarrow>\\<^sup>* b\"\n  shows \"b \\<in> A\"", "lemma dw_closed_empty: \"dw_closed {}\"", "lemma dw_closed_UNIV: \"dw_closed UNIV\"", "lemma rtc_rtranclI:\n  assumes \"a \\<rightarrow>\\<^sup>* b\"\n  shows \"(a, b) \\<in> relset\\<^sup>*\"", "lemma final_NF: \"(is_final a) = (a \\<in> NF relset)\"", "lemma sc_symcl: \"(a \\<leftrightarrow> b) = ((a, b) \\<in> relset\\<^sup>\\<leftrightarrow>)\"", "lemma srtc_conversion: \"(a \\<leftrightarrow>\\<^sup>* b) = ((a, b) \\<in> relset\\<^sup>\\<leftrightarrow>\\<^sup>*)\"", "lemma cs_join: \"(a \\<down>\\<^sup>* b) = ((a, b) \\<in> relset\\<^sup>\\<down>)\"", "lemma confluent_CR: \"is_confluent = CR relset\"", "lemma ChurchRosser_conversion: \"is_ChurchRosser = (relset\\<^sup>\\<leftrightarrow>\\<^sup>* \\<subseteq> relset\\<^sup>\\<down>)\"", "lemma loc_confluent_WCR:\n  shows \"is_loc_confluent = WCR relset\"", "lemma wf_converse:\n  shows \"(wfP r^--1) = (wf (relset\\<inverse>))\"", "lemma wf_SN:\n  shows \"(wfP r^--1) = (SN relset)\"", "lemma rtrancl_is_final:\n  assumes \"a \\<rightarrow>\\<^sup>* b\" and \"is_final a\"\n  shows \"a = b\"", "lemma cs_refl:\n  shows \"x \\<down>\\<^sup>* x\"", "lemma cs_sym:\n  assumes \"x \\<down>\\<^sup>* y\"\n  shows \"y \\<down>\\<^sup>* x\"", "lemma rtc_implies_cs:\n  assumes \"x \\<rightarrow>\\<^sup>* y\"\n  shows \"x \\<down>\\<^sup>* y\"", "lemma rtc_implies_srtc:\n  assumes \"a \\<rightarrow>\\<^sup>* b\"\n  shows \"a \\<leftrightarrow>\\<^sup>* b\"", "lemma srtc_symmetric:\n  assumes \"a \\<leftrightarrow>\\<^sup>* b\"\n  shows \"b \\<leftrightarrow>\\<^sup>* a\"", "lemma srtc_transitive:\n  assumes \"a \\<leftrightarrow>\\<^sup>* b\" and \"b \\<leftrightarrow>\\<^sup>* c\"\n  shows \"a \\<leftrightarrow>\\<^sup>* c\"", "lemma cs_implies_srtc:\n  assumes \"a \\<down>\\<^sup>* b\"\n  shows \"a \\<leftrightarrow>\\<^sup>* b\"", "lemma confluence_equiv_ChurchRosser: \"is_confluent = is_ChurchRosser\"", "lemma ChurchRosser_unique_final:\n  assumes \"is_ChurchRosser\" and \"a \\<rightarrow>\\<^sup>* b1\" and \"a \\<rightarrow>\\<^sup>* b2\" and \"is_final b1\" and \"is_final b2\"\n  shows \"b1 = b2\"", "lemma wf_on_imp_nf_ex:\n  assumes \"wfp_on ((\\<rightarrow>)\\<inverse>\\<inverse>) A\" and \"dw_closed A\" and \"a \\<in> A\"\n  obtains b where \"a \\<rightarrow>\\<^sup>* b\" and \"is_final b\"", "lemma unique_nf_imp_confluence_on:\n  assumes major: \"\\<And>a b1 b2. a \\<in> A \\<Longrightarrow> (a \\<rightarrow>\\<^sup>* b1) \\<Longrightarrow> (a \\<rightarrow>\\<^sup>* b2) \\<Longrightarrow> is_final b1 \\<Longrightarrow> is_final b2 \\<Longrightarrow> b1 = b2\"\n    and wf: \"wfp_on ((\\<rightarrow>)\\<inverse>\\<inverse>) A\" and dw: \"dw_closed A\"\n  shows \"is_confluent_on A\"", "lemma cbelow_on_first_below:\n  assumes \"cbelow_on A ord z rel a b\"\n  shows \"ord a z\"", "lemma cbelow_on_second_below:\n  assumes \"cbelow_on A ord z rel a b\"\n  shows \"ord b z\"", "lemma cbelow_on_first_in:\n  assumes \"cbelow_on A ord z rel a b\"\n  shows \"a \\<in> A\"", "lemma cbelow_on_second_in:\n  assumes \"cbelow_on A ord z rel a b\"\n  shows \"b \\<in> A\"", "lemma cbelow_on_intro [intro]:\n  assumes main: \"cbelow_on A ord z rel a b\" and \"c \\<in> A\" and \"rel b c\" and \"ord c z\"\n  shows \"cbelow_on A ord z rel a c\"", "lemma cbelow_on_induct [consumes 1, case_names base step]:\n  assumes a: \"cbelow_on A ord z rel a b\"\n    and base: \"a \\<in> A \\<Longrightarrow> ord a z \\<Longrightarrow> P a\"\n    and ind: \"\\<And>b c. [| cbelow_on A ord z rel a b; rel b c; c \\<in> A; ord c z; P b |] ==> P c\"\n  shows \"P b\"", "lemma cbelow_on_symmetric:\n  assumes main: \"cbelow_on A ord z rel a b\" and \"symp rel\"\n  shows \"cbelow_on A ord z rel b a\"", "lemma cbelow_on_transitive:\n  assumes \"cbelow_on A ord z rel a b\" and \"cbelow_on A ord z rel b c\"\n  shows \"cbelow_on A ord z rel a c\"", "lemma cbelow_on_mono:\n  assumes \"cbelow_on A ord z rel a b\" and \"A \\<subseteq> B\"\n  shows \"cbelow_on B ord z rel a b\"", "lemma relation_refines:\n  assumes \"a \\<rightarrow> b\"\n  shows \"ord b a\"", "lemma relation_wf: \"wfp_on (\\<rightarrow>)\\<inverse>\\<inverse> A\"", "lemma rtc_implies_cbelow_on:\n  assumes \"dw_closed A\" and main: \"a \\<rightarrow>\\<^sup>* b\" and \"a \\<in> A\" and \"ord a c\"\n  shows \"cbelow_on A ord c (\\<leftrightarrow>) a b\"", "lemma cs_implies_cbelow_on:\n  assumes \"dw_closed A\" and \"a \\<down>\\<^sup>* b\" and \"a \\<in> A\" and \"b \\<in> A\" and \"ord a c\" and \"ord b c\"\n  shows \"cbelow_on A ord c (\\<leftrightarrow>) a b\"", "lemma loc_connectivity_implies_confluence:\n  assumes \"is_loc_connective_on A ord (\\<rightarrow>)\" and \"dw_closed A\"\n  shows \"is_confluent_on A\"", "theorem loc_connectivity_equiv_ChurchRosser:\n  assumes \"relation_order r ord UNIV\"\n  shows \"relation.is_ChurchRosser r = is_loc_connective_on UNIV ord r\""], "translations": [["", "lemma wfp_on_imp_wfP:\n  assumes \"wfp_on r A\"\n  shows \"wfP (\\<lambda>x y. r x y \\<and> x \\<in> A \\<and> y \\<in> A)\" (is \"wfP ?r\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. wfP (\\<lambda>x y. r x y \\<and> x \\<in> A \\<and> y \\<in> A)", "proof (simp add: wfP_def wf_def, intro allI impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P x.\n       \\<forall>x.\n          (\\<forall>y.\n              r y x \\<and> y \\<in> A \\<and> x \\<in> A \\<longrightarrow>\n              P y) \\<longrightarrow>\n          P x \\<Longrightarrow>\n       P x", "fix P x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P x.\n       \\<forall>x.\n          (\\<forall>y.\n              r y x \\<and> y \\<in> A \\<and> x \\<in> A \\<longrightarrow>\n              P y) \\<longrightarrow>\n          P x \\<Longrightarrow>\n       P x", "assume \"\\<forall>x. (\\<forall>y. r y x \\<and> y \\<in> A \\<and> x \\<in> A \\<longrightarrow> P y) \\<longrightarrow> P x\""], ["proof (state)\nthis:\n  \\<forall>x.\n     (\\<forall>y.\n         r y x \\<and> y \\<in> A \\<and> x \\<in> A \\<longrightarrow>\n         P y) \\<longrightarrow>\n     P x\n\ngoal (1 subgoal):\n 1. \\<And>P x.\n       \\<forall>x.\n          (\\<forall>y.\n              r y x \\<and> y \\<in> A \\<and> x \\<in> A \\<longrightarrow>\n              P y) \\<longrightarrow>\n          P x \\<Longrightarrow>\n       P x", "hence *: \"\\<And>x. (\\<And>y. x \\<in> A \\<Longrightarrow> y \\<in> A \\<Longrightarrow> r y x \\<Longrightarrow> P y) \\<Longrightarrow> P x\""], ["proof (prove)\nusing this:\n  \\<forall>x.\n     (\\<forall>y.\n         r y x \\<and> y \\<in> A \\<and> x \\<in> A \\<longrightarrow>\n         P y) \\<longrightarrow>\n     P x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<And>y.\n           \\<lbrakk>x \\<in> A; y \\<in> A; r y x\\<rbrakk>\n           \\<Longrightarrow> P y) \\<Longrightarrow>\n       P x", "by blast"], ["proof (state)\nthis:\n  (\\<And>y.\n      \\<lbrakk>?x \\<in> A; y \\<in> A; r y ?x\\<rbrakk>\n      \\<Longrightarrow> P y) \\<Longrightarrow>\n  P ?x\n\ngoal (1 subgoal):\n 1. \\<And>P x.\n       \\<forall>x.\n          (\\<forall>y.\n              r y x \\<and> y \\<in> A \\<and> x \\<in> A \\<longrightarrow>\n              P y) \\<longrightarrow>\n          P x \\<Longrightarrow>\n       P x", "from assms"], ["proof (chain)\npicking this:\n  wfp_on r A", "have **: \"\\<And>a. a \\<in> A \\<Longrightarrow> (\\<And>x. x \\<in> A \\<Longrightarrow> (\\<And>y. y \\<in> A \\<Longrightarrow> r y x \\<Longrightarrow> P y) \\<Longrightarrow> P x) \\<Longrightarrow> P a\""], ["proof (prove)\nusing this:\n  wfp_on r A\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       \\<lbrakk>a \\<in> A;\n        \\<And>x.\n           \\<lbrakk>x \\<in> A;\n            \\<And>y.\n               \\<lbrakk>y \\<in> A; r y x\\<rbrakk>\n               \\<Longrightarrow> P y\\<rbrakk>\n           \\<Longrightarrow> P x\\<rbrakk>\n       \\<Longrightarrow> P a", "by (rule wfp_on_induct) blast+"], ["proof (state)\nthis:\n  \\<lbrakk>?a \\<in> A;\n   \\<And>x.\n      \\<lbrakk>x \\<in> A;\n       \\<And>y.\n          \\<lbrakk>y \\<in> A; r y x\\<rbrakk> \\<Longrightarrow> P y\\<rbrakk>\n      \\<Longrightarrow> P x\\<rbrakk>\n  \\<Longrightarrow> P ?a\n\ngoal (1 subgoal):\n 1. \\<And>P x.\n       \\<forall>x.\n          (\\<forall>y.\n              r y x \\<and> y \\<in> A \\<and> x \\<in> A \\<longrightarrow>\n              P y) \\<longrightarrow>\n          P x \\<Longrightarrow>\n       P x", "show \"P x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P x", "proof (cases \"x \\<in> A\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> A \\<Longrightarrow> P x\n 2. x \\<notin> A \\<Longrightarrow> P x", "case True"], ["proof (state)\nthis:\n  x \\<in> A\n\ngoal (2 subgoals):\n 1. x \\<in> A \\<Longrightarrow> P x\n 2. x \\<notin> A \\<Longrightarrow> P x", "from this *"], ["proof (chain)\npicking this:\n  x \\<in> A\n  (\\<And>y.\n      \\<lbrakk>?x \\<in> A; y \\<in> A; r y ?x\\<rbrakk>\n      \\<Longrightarrow> P y) \\<Longrightarrow>\n  P ?x", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<in> A\n  (\\<And>y.\n      \\<lbrakk>?x \\<in> A; y \\<in> A; r y ?x\\<rbrakk>\n      \\<Longrightarrow> P y) \\<Longrightarrow>\n  P ?x\n\ngoal (1 subgoal):\n 1. P x", "by (rule **)"], ["proof (state)\nthis:\n  P x\n\ngoal (1 subgoal):\n 1. x \\<notin> A \\<Longrightarrow> P x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<notin> A \\<Longrightarrow> P x", "case False"], ["proof (state)\nthis:\n  x \\<notin> A\n\ngoal (1 subgoal):\n 1. x \\<notin> A \\<Longrightarrow> P x", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. P x", "proof (rule *)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y.\n       \\<lbrakk>x \\<in> A; y \\<in> A; r y x\\<rbrakk> \\<Longrightarrow> P y", "fix y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y.\n       \\<lbrakk>x \\<in> A; y \\<in> A; r y x\\<rbrakk> \\<Longrightarrow> P y", "assume \"x \\<in> A\""], ["proof (state)\nthis:\n  x \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       \\<lbrakk>x \\<in> A; y \\<in> A; r y x\\<rbrakk> \\<Longrightarrow> P y", "with False"], ["proof (chain)\npicking this:\n  x \\<notin> A\n  x \\<in> A", "show \"P y\""], ["proof (prove)\nusing this:\n  x \\<notin> A\n  x \\<in> A\n\ngoal (1 subgoal):\n 1. P y", ".."], ["proof (state)\nthis:\n  P y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma wfp_onI_min:\n  assumes \"\\<And>x Q. x \\<in> Q \\<Longrightarrow> Q \\<subseteq> A \\<Longrightarrow> \\<exists>z\\<in>Q. \\<forall>y\\<in>A. r y z \\<longrightarrow> y \\<notin> Q\"\n  shows \"wfp_on r A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wfp_on r A", "proof (intro inductive_on_imp_wfp_on minimal_imp_inductive_on allI impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q x.\n       x \\<in> Q \\<and> Q \\<subseteq> A \\<Longrightarrow>\n       \\<exists>z\\<in>Q. \\<forall>y. r y z \\<longrightarrow> y \\<notin> Q", "fix Q x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q x.\n       x \\<in> Q \\<and> Q \\<subseteq> A \\<Longrightarrow>\n       \\<exists>z\\<in>Q. \\<forall>y. r y z \\<longrightarrow> y \\<notin> Q", "assume \"x \\<in> Q \\<and> Q \\<subseteq> A\""], ["proof (state)\nthis:\n  x \\<in> Q \\<and> Q \\<subseteq> A\n\ngoal (1 subgoal):\n 1. \\<And>Q x.\n       x \\<in> Q \\<and> Q \\<subseteq> A \\<Longrightarrow>\n       \\<exists>z\\<in>Q. \\<forall>y. r y z \\<longrightarrow> y \\<notin> Q", "hence \"x \\<in> Q\" and \"Q \\<subseteq> A\""], ["proof (prove)\nusing this:\n  x \\<in> Q \\<and> Q \\<subseteq> A\n\ngoal (1 subgoal):\n 1. x \\<in> Q &&& Q \\<subseteq> A", "by simp_all"], ["proof (state)\nthis:\n  x \\<in> Q\n  Q \\<subseteq> A\n\ngoal (1 subgoal):\n 1. \\<And>Q x.\n       x \\<in> Q \\<and> Q \\<subseteq> A \\<Longrightarrow>\n       \\<exists>z\\<in>Q. \\<forall>y. r y z \\<longrightarrow> y \\<notin> Q", "hence \"\\<exists>z\\<in>Q. \\<forall>y\\<in>A. r y z \\<longrightarrow> y \\<notin> Q\""], ["proof (prove)\nusing this:\n  x \\<in> Q\n  Q \\<subseteq> A\n\ngoal (1 subgoal):\n 1. \\<exists>z\\<in>Q. \\<forall>y\\<in>A. r y z \\<longrightarrow> y \\<notin> Q", "by (rule assms)"], ["proof (state)\nthis:\n  \\<exists>z\\<in>Q. \\<forall>y\\<in>A. r y z \\<longrightarrow> y \\<notin> Q\n\ngoal (1 subgoal):\n 1. \\<And>Q x.\n       x \\<in> Q \\<and> Q \\<subseteq> A \\<Longrightarrow>\n       \\<exists>z\\<in>Q. \\<forall>y. r y z \\<longrightarrow> y \\<notin> Q", "then"], ["proof (chain)\npicking this:\n  \\<exists>z\\<in>Q. \\<forall>y\\<in>A. r y z \\<longrightarrow> y \\<notin> Q", "obtain z where \"z \\<in> Q\" and 1: \"\\<And>y. y \\<in> A \\<Longrightarrow> r y z \\<Longrightarrow> y \\<notin> Q\""], ["proof (prove)\nusing this:\n  \\<exists>z\\<in>Q. \\<forall>y\\<in>A. r y z \\<longrightarrow> y \\<notin> Q\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>z \\<in> Q;\n         \\<And>y.\n            \\<lbrakk>y \\<in> A; r y z\\<rbrakk>\n            \\<Longrightarrow> y \\<notin> Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  z \\<in> Q\n  \\<lbrakk>?y \\<in> A; r ?y z\\<rbrakk> \\<Longrightarrow> ?y \\<notin> Q\n\ngoal (1 subgoal):\n 1. \\<And>Q x.\n       x \\<in> Q \\<and> Q \\<subseteq> A \\<Longrightarrow>\n       \\<exists>z\\<in>Q. \\<forall>y. r y z \\<longrightarrow> y \\<notin> Q", "show \"\\<exists>z\\<in>Q. \\<forall>y. r y z \\<longrightarrow> y \\<notin> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>z\\<in>Q. \\<forall>y. r y z \\<longrightarrow> y \\<notin> Q", "proof (intro bexI allI impI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>y. r y ?z \\<Longrightarrow> y \\<notin> Q\n 2. ?z \\<in> Q", "fix y"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>y. r y ?z \\<Longrightarrow> y \\<notin> Q\n 2. ?z \\<in> Q", "assume \"r y z\""], ["proof (state)\nthis:\n  r y z\n\ngoal (2 subgoals):\n 1. \\<And>y. r y ?z \\<Longrightarrow> y \\<notin> Q\n 2. ?z \\<in> Q", "show \"y \\<notin> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<notin> Q", "proof (cases \"y \\<in> A\")"], ["proof (state)\ngoal (2 subgoals):\n 1. y \\<in> A \\<Longrightarrow> y \\<notin> Q\n 2. y \\<notin> A \\<Longrightarrow> y \\<notin> Q", "case True"], ["proof (state)\nthis:\n  y \\<in> A\n\ngoal (2 subgoals):\n 1. y \\<in> A \\<Longrightarrow> y \\<notin> Q\n 2. y \\<notin> A \\<Longrightarrow> y \\<notin> Q", "thus ?thesis"], ["proof (prove)\nusing this:\n  y \\<in> A\n\ngoal (1 subgoal):\n 1. y \\<notin> Q", "using \\<open>r y z\\<close>"], ["proof (prove)\nusing this:\n  y \\<in> A\n  r y z\n\ngoal (1 subgoal):\n 1. y \\<notin> Q", "by (rule 1)"], ["proof (state)\nthis:\n  y \\<notin> Q\n\ngoal (1 subgoal):\n 1. y \\<notin> A \\<Longrightarrow> y \\<notin> Q", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<notin> A \\<Longrightarrow> y \\<notin> Q", "case False"], ["proof (state)\nthis:\n  y \\<notin> A\n\ngoal (1 subgoal):\n 1. y \\<notin> A \\<Longrightarrow> y \\<notin> Q", "with \\<open>Q \\<subseteq> A\\<close>"], ["proof (chain)\npicking this:\n  Q \\<subseteq> A\n  y \\<notin> A", "show ?thesis"], ["proof (prove)\nusing this:\n  Q \\<subseteq> A\n  y \\<notin> A\n\ngoal (1 subgoal):\n 1. y \\<notin> Q", "by blast"], ["proof (state)\nthis:\n  y \\<notin> Q\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  y \\<notin> Q\n\ngoal (1 subgoal):\n 1. z \\<in> Q", "qed fact"], ["proof (state)\nthis:\n  \\<exists>z\\<in>Q. \\<forall>y. r y z \\<longrightarrow> y \\<notin> Q\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma wfp_onE_min:\n  assumes \"wfp_on r A\" and \"x \\<in> Q\" and \"Q \\<subseteq> A\"\n  obtains z where \"z \\<in> Q\" and \"\\<And>y. r y z \\<Longrightarrow> y \\<notin> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>z \\<in> Q;\n         \\<And>y. r y z \\<Longrightarrow> y \\<notin> Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using wfp_on_imp_minimal[OF assms(1)] assms(2, 3)"], ["proof (prove)\nusing this:\n  \\<forall>Q x.\n     x \\<in> Q \\<and> Q \\<subseteq> A \\<longrightarrow>\n     (\\<exists>z\\<in>Q. \\<forall>y. r y z \\<longrightarrow> y \\<notin> Q)\n  x \\<in> Q\n  Q \\<subseteq> A\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>z \\<in> Q;\n         \\<And>y. r y z \\<Longrightarrow> y \\<notin> Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["", "lemma wfp_onI_chain: \"\\<not> (\\<exists>f. \\<forall>i. f i \\<in> A \\<and> r (f (Suc i)) (f i)) \\<Longrightarrow> wfp_on r A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<nexists>f.\n       \\<forall>i. f i \\<in> A \\<and> r (f (Suc i)) (f i) \\<Longrightarrow>\n    wfp_on r A", "by (simp add: wfp_on_def)"], ["", "lemma finite_minimalE:\n  assumes \"finite A\" and \"A \\<noteq> {}\" and \"irreflp rel\" and \"transp rel\"\n  obtains a where \"a \\<in> A\" and \"\\<And>b. rel b a \\<Longrightarrow> b \\<notin> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a.\n        \\<lbrakk>a \\<in> A;\n         \\<And>b. rel b a \\<Longrightarrow> b \\<notin> A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms(1, 2)"], ["proof (prove)\nusing this:\n  finite A\n  A \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>a.\n        \\<lbrakk>a \\<in> A;\n         \\<And>b. rel b a \\<Longrightarrow> b \\<notin> A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof (induct arbitrary: thesis)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>thesis.\n       \\<lbrakk>\\<And>a.\n                   \\<lbrakk>a \\<in> {};\n                    \\<And>b.\n                       rel b a \\<Longrightarrow> b \\<notin> {}\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        {} \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. \\<And>x F thesis.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>thesis.\n           \\<lbrakk>\\<And>a.\n                       \\<lbrakk>a \\<in> F;\n                        \\<And>b.\n                           rel b a \\<Longrightarrow> b \\<notin> F\\<rbrakk>\n                       \\<Longrightarrow> thesis;\n            F \\<noteq> {}\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        \\<And>a.\n           \\<lbrakk>a \\<in> insert x F;\n            \\<And>b.\n               rel b a \\<Longrightarrow> b \\<notin> insert x F\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        insert x F \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> thesis", "case empty"], ["proof (state)\nthis:\n  \\<lbrakk>?a \\<in> {};\n   \\<And>b. rel b ?a \\<Longrightarrow> b \\<notin> {}\\<rbrakk>\n  \\<Longrightarrow> thesis\n  {} \\<noteq> {}\n\ngoal (2 subgoals):\n 1. \\<And>thesis.\n       \\<lbrakk>\\<And>a.\n                   \\<lbrakk>a \\<in> {};\n                    \\<And>b.\n                       rel b a \\<Longrightarrow> b \\<notin> {}\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        {} \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. \\<And>x F thesis.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>thesis.\n           \\<lbrakk>\\<And>a.\n                       \\<lbrakk>a \\<in> F;\n                        \\<And>b.\n                           rel b a \\<Longrightarrow> b \\<notin> F\\<rbrakk>\n                       \\<Longrightarrow> thesis;\n            F \\<noteq> {}\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        \\<And>a.\n           \\<lbrakk>a \\<in> insert x F;\n            \\<And>b.\n               rel b a \\<Longrightarrow> b \\<notin> insert x F\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        insert x F \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> thesis", "from empty(2)"], ["proof (chain)\npicking this:\n  {} \\<noteq> {}", "show ?case"], ["proof (prove)\nusing this:\n  {} \\<noteq> {}\n\ngoal (1 subgoal):\n 1. thesis", "by simp"], ["proof (state)\nthis:\n  thesis\n\ngoal (1 subgoal):\n 1. \\<And>x F thesis.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>thesis.\n           \\<lbrakk>\\<And>a.\n                       \\<lbrakk>a \\<in> F;\n                        \\<And>b.\n                           rel b a \\<Longrightarrow> b \\<notin> F\\<rbrakk>\n                       \\<Longrightarrow> thesis;\n            F \\<noteq> {}\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        \\<And>a.\n           \\<lbrakk>a \\<in> insert x F;\n            \\<And>b.\n               rel b a \\<Longrightarrow> b \\<notin> insert x F\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        insert x F \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> thesis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x F thesis.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>thesis.\n           \\<lbrakk>\\<And>a.\n                       \\<lbrakk>a \\<in> F;\n                        \\<And>b.\n                           rel b a \\<Longrightarrow> b \\<notin> F\\<rbrakk>\n                       \\<Longrightarrow> thesis;\n            F \\<noteq> {}\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        \\<And>a.\n           \\<lbrakk>a \\<in> insert x F;\n            \\<And>b.\n               rel b a \\<Longrightarrow> b \\<notin> insert x F\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        insert x F \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> thesis", "case (insert a A)"], ["proof (state)\nthis:\n  finite A\n  a \\<notin> A\n  \\<lbrakk>\\<And>a.\n              \\<lbrakk>a \\<in> A;\n               \\<And>b. rel b a \\<Longrightarrow> b \\<notin> A\\<rbrakk>\n              \\<Longrightarrow> ?thesis;\n   A \\<noteq> {}\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  \\<lbrakk>?a \\<in> insert a A;\n   \\<And>b. rel b ?a \\<Longrightarrow> b \\<notin> insert a A\\<rbrakk>\n  \\<Longrightarrow> thesis\n  insert a A \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<And>x F thesis.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>thesis.\n           \\<lbrakk>\\<And>a.\n                       \\<lbrakk>a \\<in> F;\n                        \\<And>b.\n                           rel b a \\<Longrightarrow> b \\<notin> F\\<rbrakk>\n                       \\<Longrightarrow> thesis;\n            F \\<noteq> {}\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        \\<And>a.\n           \\<lbrakk>a \\<in> insert x F;\n            \\<And>b.\n               rel b a \\<Longrightarrow> b \\<notin> insert x F\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        insert x F \\<noteq> {}\\<rbrakk>\n       \\<Longrightarrow> thesis", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof (cases \"A = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. A = {} \\<Longrightarrow> thesis\n 2. A \\<noteq> {} \\<Longrightarrow> thesis", "case True"], ["proof (state)\nthis:\n  A = {}\n\ngoal (2 subgoals):\n 1. A = {} \\<Longrightarrow> thesis\n 2. A \\<noteq> {} \\<Longrightarrow> thesis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof (rule insert(4))"], ["proof (state)\ngoal (2 subgoals):\n 1. ?a \\<in> insert a A\n 2. \\<And>b. rel b ?a \\<Longrightarrow> b \\<notin> insert a A", "fix b"], ["proof (state)\ngoal (2 subgoals):\n 1. ?a \\<in> insert a A\n 2. \\<And>b. rel b ?a \\<Longrightarrow> b \\<notin> insert a A", "assume \"rel b a\""], ["proof (state)\nthis:\n  rel b a\n\ngoal (2 subgoals):\n 1. ?a \\<in> insert a A\n 2. \\<And>b. rel b ?a \\<Longrightarrow> b \\<notin> insert a A", "with assms(3)"], ["proof (chain)\npicking this:\n  irreflp rel\n  rel b a", "show \"b \\<notin> insert a A\""], ["proof (prove)\nusing this:\n  irreflp rel\n  rel b a\n\ngoal (1 subgoal):\n 1. b \\<notin> insert a A", "by (auto simp: True irreflp_def)"], ["proof (state)\nthis:\n  b \\<notin> insert a A\n\ngoal (1 subgoal):\n 1. a \\<in> insert a A", "qed simp"], ["proof (state)\nthis:\n  thesis\n\ngoal (1 subgoal):\n 1. A \\<noteq> {} \\<Longrightarrow> thesis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. A \\<noteq> {} \\<Longrightarrow> thesis", "case False"], ["proof (state)\nthis:\n  A \\<noteq> {}\n\ngoal (1 subgoal):\n 1. A \\<noteq> {} \\<Longrightarrow> thesis", "with insert(3)"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<And>a.\n              \\<lbrakk>a \\<in> A;\n               \\<And>b. rel b a \\<Longrightarrow> b \\<notin> A\\<rbrakk>\n              \\<Longrightarrow> ?thesis;\n   A \\<noteq> {}\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  A \\<noteq> {}", "obtain z where \"z \\<in> A\" and *: \"\\<And>b. rel b z \\<Longrightarrow> b \\<notin> A\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>a.\n              \\<lbrakk>a \\<in> A;\n               \\<And>b. rel b a \\<Longrightarrow> b \\<notin> A\\<rbrakk>\n              \\<Longrightarrow> ?thesis;\n   A \\<noteq> {}\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  A \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>z \\<in> A;\n         \\<And>b. rel b z \\<Longrightarrow> b \\<notin> A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  z \\<in> A\n  rel ?b z \\<Longrightarrow> ?b \\<notin> A\n\ngoal (1 subgoal):\n 1. A \\<noteq> {} \\<Longrightarrow> thesis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof (cases \"rel a z\")"], ["proof (state)\ngoal (2 subgoals):\n 1. rel a z \\<Longrightarrow> thesis\n 2. \\<not> rel a z \\<Longrightarrow> thesis", "case True"], ["proof (state)\nthis:\n  rel a z\n\ngoal (2 subgoals):\n 1. rel a z \\<Longrightarrow> thesis\n 2. \\<not> rel a z \\<Longrightarrow> thesis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof (rule insert(4))"], ["proof (state)\ngoal (2 subgoals):\n 1. ?a \\<in> insert a A\n 2. \\<And>b. rel b ?a \\<Longrightarrow> b \\<notin> insert a A", "fix b"], ["proof (state)\ngoal (2 subgoals):\n 1. ?a \\<in> insert a A\n 2. \\<And>b. rel b ?a \\<Longrightarrow> b \\<notin> insert a A", "assume \"rel b a\""], ["proof (state)\nthis:\n  rel b a\n\ngoal (2 subgoals):\n 1. ?a \\<in> insert a A\n 2. \\<And>b. rel b ?a \\<Longrightarrow> b \\<notin> insert a A", "with assms(4)"], ["proof (chain)\npicking this:\n  transp rel\n  rel b a", "have \"rel b z\""], ["proof (prove)\nusing this:\n  transp rel\n  rel b a\n\ngoal (1 subgoal):\n 1. rel b z", "using \\<open>rel a z\\<close>"], ["proof (prove)\nusing this:\n  transp rel\n  rel b a\n  rel a z\n\ngoal (1 subgoal):\n 1. rel b z", "by (rule transpD)"], ["proof (state)\nthis:\n  rel b z\n\ngoal (2 subgoals):\n 1. ?a \\<in> insert a A\n 2. \\<And>b. rel b ?a \\<Longrightarrow> b \\<notin> insert a A", "hence \"b \\<notin> A\""], ["proof (prove)\nusing this:\n  rel b z\n\ngoal (1 subgoal):\n 1. b \\<notin> A", "by (rule *)"], ["proof (state)\nthis:\n  b \\<notin> A\n\ngoal (2 subgoals):\n 1. ?a \\<in> insert a A\n 2. \\<And>b. rel b ?a \\<Longrightarrow> b \\<notin> insert a A", "moreover"], ["proof (state)\nthis:\n  b \\<notin> A\n\ngoal (2 subgoals):\n 1. ?a \\<in> insert a A\n 2. \\<And>b. rel b ?a \\<Longrightarrow> b \\<notin> insert a A", "from \\<open>rel b a\\<close> assms(3)"], ["proof (chain)\npicking this:\n  rel b a\n  irreflp rel", "have \"b \\<noteq> a\""], ["proof (prove)\nusing this:\n  rel b a\n  irreflp rel\n\ngoal (1 subgoal):\n 1. b \\<noteq> a", "by (auto simp: irreflp_def)"], ["proof (state)\nthis:\n  b \\<noteq> a\n\ngoal (2 subgoals):\n 1. ?a \\<in> insert a A\n 2. \\<And>b. rel b ?a \\<Longrightarrow> b \\<notin> insert a A", "ultimately"], ["proof (chain)\npicking this:\n  b \\<notin> A\n  b \\<noteq> a", "show \"b \\<notin> insert a A\""], ["proof (prove)\nusing this:\n  b \\<notin> A\n  b \\<noteq> a\n\ngoal (1 subgoal):\n 1. b \\<notin> insert a A", "by simp"], ["proof (state)\nthis:\n  b \\<notin> insert a A\n\ngoal (1 subgoal):\n 1. a \\<in> insert a A", "qed simp"], ["proof (state)\nthis:\n  thesis\n\ngoal (1 subgoal):\n 1. \\<not> rel a z \\<Longrightarrow> thesis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> rel a z \\<Longrightarrow> thesis", "case False"], ["proof (state)\nthis:\n  \\<not> rel a z\n\ngoal (1 subgoal):\n 1. \\<not> rel a z \\<Longrightarrow> thesis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof (rule insert(4))"], ["proof (state)\ngoal (2 subgoals):\n 1. ?a \\<in> insert a A\n 2. \\<And>b. rel b ?a \\<Longrightarrow> b \\<notin> insert a A", "fix b"], ["proof (state)\ngoal (2 subgoals):\n 1. ?a \\<in> insert a A\n 2. \\<And>b. rel b ?a \\<Longrightarrow> b \\<notin> insert a A", "assume \"rel b z\""], ["proof (state)\nthis:\n  rel b z\n\ngoal (2 subgoals):\n 1. ?a \\<in> insert a A\n 2. \\<And>b. rel b ?a \\<Longrightarrow> b \\<notin> insert a A", "hence \"b \\<notin> A\""], ["proof (prove)\nusing this:\n  rel b z\n\ngoal (1 subgoal):\n 1. b \\<notin> A", "by (rule *)"], ["proof (state)\nthis:\n  b \\<notin> A\n\ngoal (2 subgoals):\n 1. ?a \\<in> insert a A\n 2. \\<And>b. rel b ?a \\<Longrightarrow> b \\<notin> insert a A", "moreover"], ["proof (state)\nthis:\n  b \\<notin> A\n\ngoal (2 subgoals):\n 1. ?a \\<in> insert a A\n 2. \\<And>b. rel b ?a \\<Longrightarrow> b \\<notin> insert a A", "from \\<open>rel b z\\<close> False"], ["proof (chain)\npicking this:\n  rel b z\n  \\<not> rel a z", "have \"b \\<noteq> a\""], ["proof (prove)\nusing this:\n  rel b z\n  \\<not> rel a z\n\ngoal (1 subgoal):\n 1. b \\<noteq> a", "by blast"], ["proof (state)\nthis:\n  b \\<noteq> a\n\ngoal (2 subgoals):\n 1. ?a \\<in> insert a A\n 2. \\<And>b. rel b ?a \\<Longrightarrow> b \\<notin> insert a A", "ultimately"], ["proof (chain)\npicking this:\n  b \\<notin> A\n  b \\<noteq> a", "show \"b \\<notin> insert a A\""], ["proof (prove)\nusing this:\n  b \\<notin> A\n  b \\<noteq> a\n\ngoal (1 subgoal):\n 1. b \\<notin> insert a A", "by simp"], ["proof (state)\nthis:\n  b \\<notin> insert a A\n\ngoal (1 subgoal):\n 1. z \\<in> insert a A", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. z \\<in> insert a A", "from \\<open>z \\<in> A\\<close>"], ["proof (chain)\npicking this:\n  z \\<in> A", "show \"z \\<in> insert a A\""], ["proof (prove)\nusing this:\n  z \\<in> A\n\ngoal (1 subgoal):\n 1. z \\<in> insert a A", "by simp"], ["proof (state)\nthis:\n  z \\<in> insert a A\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma wfp_on_finite:\n  assumes \"irreflp rel\" and \"transp rel\" and \"finite A\"\n  shows \"wfp_on rel A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wfp_on rel A", "proof (rule wfp_onI_min)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x Q.\n       \\<lbrakk>x \\<in> Q; Q \\<subseteq> A\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z\\<in>Q.\n                            \\<forall>y\\<in>A.\n                               rel y z \\<longrightarrow> y \\<notin> Q", "fix x Q"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x Q.\n       \\<lbrakk>x \\<in> Q; Q \\<subseteq> A\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z\\<in>Q.\n                            \\<forall>y\\<in>A.\n                               rel y z \\<longrightarrow> y \\<notin> Q", "assume \"x \\<in> Q\" and \"Q \\<subseteq> A\""], ["proof (state)\nthis:\n  x \\<in> Q\n  Q \\<subseteq> A\n\ngoal (1 subgoal):\n 1. \\<And>x Q.\n       \\<lbrakk>x \\<in> Q; Q \\<subseteq> A\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z\\<in>Q.\n                            \\<forall>y\\<in>A.\n                               rel y z \\<longrightarrow> y \\<notin> Q", "from this(2) assms(3)"], ["proof (chain)\npicking this:\n  Q \\<subseteq> A\n  finite A", "have \"finite Q\""], ["proof (prove)\nusing this:\n  Q \\<subseteq> A\n  finite A\n\ngoal (1 subgoal):\n 1. finite Q", "by (rule finite_subset)"], ["proof (state)\nthis:\n  finite Q\n\ngoal (1 subgoal):\n 1. \\<And>x Q.\n       \\<lbrakk>x \\<in> Q; Q \\<subseteq> A\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z\\<in>Q.\n                            \\<forall>y\\<in>A.\n                               rel y z \\<longrightarrow> y \\<notin> Q", "moreover"], ["proof (state)\nthis:\n  finite Q\n\ngoal (1 subgoal):\n 1. \\<And>x Q.\n       \\<lbrakk>x \\<in> Q; Q \\<subseteq> A\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z\\<in>Q.\n                            \\<forall>y\\<in>A.\n                               rel y z \\<longrightarrow> y \\<notin> Q", "from \\<open>x \\<in> Q\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> Q", "have \"Q \\<noteq> {}\""], ["proof (prove)\nusing this:\n  x \\<in> Q\n\ngoal (1 subgoal):\n 1. Q \\<noteq> {}", "by blast"], ["proof (state)\nthis:\n  Q \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<And>x Q.\n       \\<lbrakk>x \\<in> Q; Q \\<subseteq> A\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z\\<in>Q.\n                            \\<forall>y\\<in>A.\n                               rel y z \\<longrightarrow> y \\<notin> Q", "ultimately"], ["proof (chain)\npicking this:\n  finite Q\n  Q \\<noteq> {}", "obtain z where \"z \\<in> Q\" and \"\\<And>y. rel y z \\<Longrightarrow> y \\<notin> Q\""], ["proof (prove)\nusing this:\n  finite Q\n  Q \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>z \\<in> Q;\n         \\<And>y. rel y z \\<Longrightarrow> y \\<notin> Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms(1, 2)"], ["proof (prove)\nusing this:\n  finite Q\n  Q \\<noteq> {}\n  irreflp rel\n  transp rel\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>z \\<in> Q;\n         \\<And>y. rel y z \\<Longrightarrow> y \\<notin> Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule finite_minimalE) blast"], ["proof (state)\nthis:\n  z \\<in> Q\n  rel ?y z \\<Longrightarrow> ?y \\<notin> Q\n\ngoal (1 subgoal):\n 1. \\<And>x Q.\n       \\<lbrakk>x \\<in> Q; Q \\<subseteq> A\\<rbrakk>\n       \\<Longrightarrow> \\<exists>z\\<in>Q.\n                            \\<forall>y\\<in>A.\n                               rel y z \\<longrightarrow> y \\<notin> Q", "thus \"\\<exists>z\\<in>Q. \\<forall>y\\<in>A. rel y z \\<longrightarrow> y \\<notin> Q\""], ["proof (prove)\nusing this:\n  z \\<in> Q\n  rel ?y z \\<Longrightarrow> ?y \\<notin> Q\n\ngoal (1 subgoal):\n 1. \\<exists>z\\<in>Q.\n       \\<forall>y\\<in>A. rel y z \\<longrightarrow> y \\<notin> Q", "by blast"], ["proof (state)\nthis:\n  \\<exists>z\\<in>Q. \\<forall>y\\<in>A. rel y z \\<longrightarrow> y \\<notin> Q\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Relations\\<close>"], ["", "locale relation = fixes r::\"'a \\<Rightarrow> 'a \\<Rightarrow> bool\" (infixl \"\\<rightarrow>\" 50)\nbegin"], ["", "abbreviation rtc::\"'a \\<Rightarrow> 'a \\<Rightarrow> bool\" (infixl \"\\<rightarrow>\\<^sup>*\" 50)\n  where \"rtc a b \\<equiv> r\\<^sup>*\\<^sup>* a b\""], ["", "abbreviation sc::\"'a \\<Rightarrow> 'a \\<Rightarrow> bool\" (infixl \"\\<leftrightarrow>\" 50)\n  where \"sc a b \\<equiv> a \\<rightarrow> b \\<or> b \\<rightarrow> a\""], ["", "definition is_final::\"'a \\<Rightarrow> bool\" where\n  \"is_final a \\<equiv> \\<not> (\\<exists>b. r a b)\""], ["", "definition srtc::\"'a \\<Rightarrow> 'a \\<Rightarrow> bool\" (infixl \"\\<leftrightarrow>\\<^sup>*\" 50) where\n  \"srtc a b \\<equiv> sc\\<^sup>*\\<^sup>* a b\""], ["", "definition cs::\"'a \\<Rightarrow> 'a \\<Rightarrow> bool\" (infixl \"\\<down>\\<^sup>*\" 50) where\n  \"cs a b \\<equiv> (\\<exists>s. (a \\<rightarrow>\\<^sup>* s) \\<and> (b \\<rightarrow>\\<^sup>* s))\""], ["", "definition is_confluent_on :: \"'a set \\<Rightarrow> bool\"\n  where \"is_confluent_on A \\<longleftrightarrow> (\\<forall>a\\<in>A. \\<forall>b1 b2. (a \\<rightarrow>\\<^sup>* b1 \\<and> a \\<rightarrow>\\<^sup>* b2) \\<longrightarrow> b1 \\<down>\\<^sup>* b2)\""], ["", "definition is_confluent :: bool\n  where \"is_confluent \\<equiv> is_confluent_on UNIV\""], ["", "definition is_loc_confluent :: bool\n  where \"is_loc_confluent \\<equiv> (\\<forall>a b1 b2. (a \\<rightarrow> b1 \\<and> a \\<rightarrow> b2) \\<longrightarrow> b1 \\<down>\\<^sup>* b2)\""], ["", "definition is_ChurchRosser :: bool\n  where \"is_ChurchRosser \\<equiv> (\\<forall>a b. a \\<leftrightarrow>\\<^sup>* b \\<longrightarrow> a \\<down>\\<^sup>* b)\""], ["", "definition dw_closed :: \"'a set \\<Rightarrow> bool\"\n  where \"dw_closed A \\<longleftrightarrow> (\\<forall>a\\<in>A. \\<forall>b. a \\<rightarrow> b \\<longrightarrow> b \\<in> A)\""], ["", "lemma dw_closedI [intro]:\n  assumes \"\\<And>a b. a \\<in> A \\<Longrightarrow> a \\<rightarrow> b \\<Longrightarrow> b \\<in> A\"\n  shows \"dw_closed A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dw_closed A", "unfolding dw_closed_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>a\\<in>A.\n       \\<forall>b. a \\<rightarrow> b \\<longrightarrow> b \\<in> A", "using assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?a \\<in> A; ?a \\<rightarrow> ?b\\<rbrakk>\n  \\<Longrightarrow> ?b \\<in> A\n\ngoal (1 subgoal):\n 1. \\<forall>a\\<in>A.\n       \\<forall>b. a \\<rightarrow> b \\<longrightarrow> b \\<in> A", "by auto"], ["", "lemma dw_closedD:\n  assumes \"dw_closed A\" and \"a \\<in> A\" and \"a \\<rightarrow> b\"\n  shows \"b \\<in> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b \\<in> A", "using assms"], ["proof (prove)\nusing this:\n  dw_closed A\n  a \\<in> A\n  a \\<rightarrow> b\n\ngoal (1 subgoal):\n 1. b \\<in> A", "unfolding dw_closed_def"], ["proof (prove)\nusing this:\n  \\<forall>a\\<in>A.\n     \\<forall>b. a \\<rightarrow> b \\<longrightarrow> b \\<in> A\n  a \\<in> A\n  a \\<rightarrow> b\n\ngoal (1 subgoal):\n 1. b \\<in> A", "by auto"], ["", "lemma dw_closed_rtrancl:\n  assumes \"dw_closed A\" and \"a \\<in> A\" and \"a \\<rightarrow>\\<^sup>* b\"\n  shows \"b \\<in> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b \\<in> A", "using assms(3)"], ["proof (prove)\nusing this:\n  a \\<rightarrow>\\<^sup>* b\n\ngoal (1 subgoal):\n 1. b \\<in> A", "proof (induct b)"], ["proof (state)\ngoal (2 subgoals):\n 1. a \\<in> A\n 2. \\<And>y z.\n       \\<lbrakk>a \\<rightarrow>\\<^sup>* y; y \\<rightarrow> z;\n        y \\<in> A\\<rbrakk>\n       \\<Longrightarrow> z \\<in> A", "case base"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. a \\<in> A\n 2. \\<And>y z.\n       \\<lbrakk>a \\<rightarrow>\\<^sup>* y; y \\<rightarrow> z;\n        y \\<in> A\\<rbrakk>\n       \\<Longrightarrow> z \\<in> A", "from assms(2)"], ["proof (chain)\npicking this:\n  a \\<in> A", "show ?case"], ["proof (prove)\nusing this:\n  a \\<in> A\n\ngoal (1 subgoal):\n 1. a \\<in> A", "."], ["proof (state)\nthis:\n  a \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>a \\<rightarrow>\\<^sup>* y; y \\<rightarrow> z;\n        y \\<in> A\\<rbrakk>\n       \\<Longrightarrow> z \\<in> A", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>a \\<rightarrow>\\<^sup>* y; y \\<rightarrow> z;\n        y \\<in> A\\<rbrakk>\n       \\<Longrightarrow> z \\<in> A", "case (step y z)"], ["proof (state)\nthis:\n  a \\<rightarrow>\\<^sup>* y\n  y \\<rightarrow> z\n  y \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>a \\<rightarrow>\\<^sup>* y; y \\<rightarrow> z;\n        y \\<in> A\\<rbrakk>\n       \\<Longrightarrow> z \\<in> A", "from assms(1) step(3) step(2)"], ["proof (chain)\npicking this:\n  dw_closed A\n  y \\<in> A\n  y \\<rightarrow> z", "show ?case"], ["proof (prove)\nusing this:\n  dw_closed A\n  y \\<in> A\n  y \\<rightarrow> z\n\ngoal (1 subgoal):\n 1. z \\<in> A", "by (rule dw_closedD)"], ["proof (state)\nthis:\n  z \\<in> A\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma dw_closed_empty: \"dw_closed {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dw_closed {}", "by (rule, simp)"], ["", "lemma dw_closed_UNIV: \"dw_closed UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dw_closed UNIV", "by (rule, intro UNIV_I)"], ["", "subsection \\<open>Setup for Connection to Theory @{theory \"Abstract-Rewriting.Abstract_Rewriting\"}\\<close>"], ["", "abbreviation (input) relset::\"('a * 'a) set\" where\n  \"relset \\<equiv> {(x, y). x \\<rightarrow> y}\""], ["", "lemma rtc_rtranclI:\n  assumes \"a \\<rightarrow>\\<^sup>* b\"\n  shows \"(a, b) \\<in> relset\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>*", "using assms"], ["proof (prove)\nusing this:\n  a \\<rightarrow>\\<^sup>* b\n\ngoal (1 subgoal):\n 1. (a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>*", "by (simp only: Enum.rtranclp_rtrancl_eq)"], ["", "lemma final_NF: \"(is_final a) = (a \\<in> NF relset)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_final a = (a \\<in> NF {(x, y). x \\<rightarrow> y})", "unfolding is_final_def NF_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<nexists>b. a \\<rightarrow> b) =\n    (a \\<in> {a. {(x, y). x \\<rightarrow> y} `` {a} = {}})", "by simp"], ["", "lemma sc_symcl: \"(a \\<leftrightarrow> b) = ((a, b) \\<in> relset\\<^sup>\\<leftrightarrow>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a \\<leftrightarrow> b) =\n    ((a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>)", "by simp"], ["", "lemma srtc_conversion: \"(a \\<leftrightarrow>\\<^sup>* b) = ((a, b) \\<in> relset\\<^sup>\\<leftrightarrow>\\<^sup>*)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a \\<leftrightarrow>\\<^sup>* b) =\n    ((a, b)\n     \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>\\<^sup>*)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (a \\<leftrightarrow>\\<^sup>* b) =\n    ((a, b)\n     \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>\\<^sup>*)", "have \"{(a, b). (a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>} = {(a, b). a \\<rightarrow> b}\\<^sup>\\<leftrightarrow>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(a, b).\n     (a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>} =\n    {(a, b). a \\<rightarrow> b}\\<^sup>\\<leftrightarrow>", "by auto"], ["proof (state)\nthis:\n  {(a, b).\n   (a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>} =\n  {(a, b). a \\<rightarrow> b}\\<^sup>\\<leftrightarrow>\n\ngoal (1 subgoal):\n 1. (a \\<leftrightarrow>\\<^sup>* b) =\n    ((a, b)\n     \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>\\<^sup>*)", "thus ?thesis"], ["proof (prove)\nusing this:\n  {(a, b).\n   (a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>} =\n  {(a, b). a \\<rightarrow> b}\\<^sup>\\<leftrightarrow>\n\ngoal (1 subgoal):\n 1. (a \\<leftrightarrow>\\<^sup>* b) =\n    ((a, b)\n     \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>\\<^sup>*)", "unfolding srtc_def conversion_def sc_symcl Enum.rtranclp_rtrancl_eq"], ["proof (prove)\nusing this:\n  {(a, b).\n   (a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>} =\n  {(a, b). a \\<rightarrow> b}\\<^sup>\\<leftrightarrow>\n\ngoal (1 subgoal):\n 1. ((a, b)\n     \\<in> {(a, b).\n            (a, b)\n            \\<in> {(x, y).\n                   x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>}\\<^sup>*) =\n    ((a, b)\n     \\<in> ({(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>)\\<^sup>*)", "by simp"], ["proof (state)\nthis:\n  (a \\<leftrightarrow>\\<^sup>* b) =\n  ((a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>\\<^sup>*)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma cs_join: \"(a \\<down>\\<^sup>* b) = ((a, b) \\<in> relset\\<^sup>\\<down>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a \\<down>\\<^sup>* b) =\n    ((a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<down>)", "unfolding cs_def join_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>s.\n        a \\<rightarrow>\\<^sup>* s \\<and> b \\<rightarrow>\\<^sup>* s) =\n    ((a, b)\n     \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>* O\n           ({(x, y). x \\<rightarrow> y}\\<inverse>)\\<^sup>*)", "by (auto simp add: Enum.rtranclp_rtrancl_eq rtrancl_converse)"], ["", "lemma confluent_CR: \"is_confluent = CR relset\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_confluent = CR {(x, y). x \\<rightarrow> y}", "by (auto simp add: is_confluent_def is_confluent_on_def CR_defs Enum.rtranclp_rtrancl_eq cs_join)"], ["", "lemma ChurchRosser_conversion: \"is_ChurchRosser = (relset\\<^sup>\\<leftrightarrow>\\<^sup>* \\<subseteq> relset\\<^sup>\\<down>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_ChurchRosser =\n    ({(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>\\<^sup>*\n     \\<subseteq> {(x, y). x \\<rightarrow> y}\\<^sup>\\<down>)", "by (auto simp add: is_ChurchRosser_def cs_join srtc_conversion)"], ["", "lemma loc_confluent_WCR:\n  shows \"is_loc_confluent = WCR relset\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_loc_confluent = WCR {(x, y). x \\<rightarrow> y}", "unfolding is_loc_confluent_def WCR_defs"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>a b1 b2.\n        a \\<rightarrow> b1 \\<and> a \\<rightarrow> b2 \\<longrightarrow>\n        b1 \\<down>\\<^sup>* b2) =\n    (\\<forall>a\\<in>UNIV.\n        \\<forall>b c.\n           (a, b) \\<in> {(x, y). x \\<rightarrow> y} \\<and>\n           (a, c) \\<in> {(x, y). x \\<rightarrow> y} \\<longrightarrow>\n           (b, c) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<down>)", "by (auto simp add: cs_join)"], ["", "lemma wf_converse:\n  shows \"(wfP r^--1) = (wf (relset\\<inverse>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wfP (\\<rightarrow>)\\<inverse>\\<inverse> =\n    wf ({(x, y). x \\<rightarrow> y}\\<inverse>)", "unfolding wfP_def converse_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. wf {(x, y). (\\<rightarrow>)\\<inverse>\\<inverse> x y} =\n    wf {(x, y).\n        (\\<lambda>x xa.\n            (x, xa) \\<in> {(x, y). x \\<rightarrow> y})\\<inverse>\\<inverse>\n         x y}", "by simp"], ["", "lemma wf_SN:\n  shows \"(wfP r^--1) = (SN relset)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wfP (\\<rightarrow>)\\<inverse>\\<inverse> = SN {(x, y). x \\<rightarrow> y}", "unfolding wf_converse wf_iff_no_infinite_down_chain SN_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<nexists>f.\n        \\<forall>i.\n           (f (Suc i), f i) \\<in> {(x, y). x \\<rightarrow> y}\\<inverse>) =\n    (\\<nexists>f.\n        f 0 \\<in> UNIV \\<and>\n        (\\<forall>i. (f i, f (Suc i)) \\<in> {(x, y). x \\<rightarrow> y}))", "by auto"], ["", "subsection \\<open>Simple Lemmas\\<close>"], ["", "lemma rtrancl_is_final:\n  assumes \"a \\<rightarrow>\\<^sup>* b\" and \"is_final a\"\n  shows \"a = b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a = b", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. a = b", "from rtranclpD[OF \\<open>a \\<rightarrow>\\<^sup>* b\\<close>]"], ["proof (chain)\npicking this:\n  a = b \\<or> a \\<noteq> b \\<and> (\\<rightarrow>)\\<^sup>+\\<^sup>+ a b", "show ?thesis"], ["proof (prove)\nusing this:\n  a = b \\<or> a \\<noteq> b \\<and> (\\<rightarrow>)\\<^sup>+\\<^sup>+ a b\n\ngoal (1 subgoal):\n 1. a = b", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. a = b \\<Longrightarrow> a = b\n 2. a \\<noteq> b \\<and>\n    (\\<rightarrow>)\\<^sup>+\\<^sup>+ a b \\<Longrightarrow>\n    a = b", "assume \"a \\<noteq> b \\<and> (\\<rightarrow>)\\<^sup>+\\<^sup>+ a b\""], ["proof (state)\nthis:\n  a \\<noteq> b \\<and> (\\<rightarrow>)\\<^sup>+\\<^sup>+ a b\n\ngoal (2 subgoals):\n 1. a = b \\<Longrightarrow> a = b\n 2. a \\<noteq> b \\<and>\n    (\\<rightarrow>)\\<^sup>+\\<^sup>+ a b \\<Longrightarrow>\n    a = b", "hence \"(\\<rightarrow>)\\<^sup>+\\<^sup>+ a b\""], ["proof (prove)\nusing this:\n  a \\<noteq> b \\<and> (\\<rightarrow>)\\<^sup>+\\<^sup>+ a b\n\ngoal (1 subgoal):\n 1. (\\<rightarrow>)\\<^sup>+\\<^sup>+ a b", "by simp"], ["proof (state)\nthis:\n  (\\<rightarrow>)\\<^sup>+\\<^sup>+ a b\n\ngoal (2 subgoals):\n 1. a = b \\<Longrightarrow> a = b\n 2. a \\<noteq> b \\<and>\n    (\\<rightarrow>)\\<^sup>+\\<^sup>+ a b \\<Longrightarrow>\n    a = b", "from \\<open>is_final a\\<close> final_NF"], ["proof (chain)\npicking this:\n  is_final a\n  is_final ?a = (?a \\<in> NF {(x, y). x \\<rightarrow> y})", "have \"a \\<in> NF relset\""], ["proof (prove)\nusing this:\n  is_final a\n  is_final ?a = (?a \\<in> NF {(x, y). x \\<rightarrow> y})\n\ngoal (1 subgoal):\n 1. a \\<in> NF {(x, y). x \\<rightarrow> y}", "by simp"], ["proof (state)\nthis:\n  a \\<in> NF {(x, y). x \\<rightarrow> y}\n\ngoal (2 subgoals):\n 1. a = b \\<Longrightarrow> a = b\n 2. a \\<noteq> b \\<and>\n    (\\<rightarrow>)\\<^sup>+\\<^sup>+ a b \\<Longrightarrow>\n    a = b", "from NF_no_trancl_step[OF this]"], ["proof (chain)\npicking this:\n  \\<forall>b. (a, b) \\<notin> {(x, y). x \\<rightarrow> y}\\<^sup>+", "have \"(a, b) \\<notin> {(x, y). x \\<rightarrow> y}\\<^sup>+\""], ["proof (prove)\nusing this:\n  \\<forall>b. (a, b) \\<notin> {(x, y). x \\<rightarrow> y}\\<^sup>+\n\ngoal (1 subgoal):\n 1. (a, b) \\<notin> {(x, y). x \\<rightarrow> y}\\<^sup>+", ".."], ["proof (state)\nthis:\n  (a, b) \\<notin> {(x, y). x \\<rightarrow> y}\\<^sup>+\n\ngoal (2 subgoals):\n 1. a = b \\<Longrightarrow> a = b\n 2. a \\<noteq> b \\<and>\n    (\\<rightarrow>)\\<^sup>+\\<^sup>+ a b \\<Longrightarrow>\n    a = b", "thus ?thesis"], ["proof (prove)\nusing this:\n  (a, b) \\<notin> {(x, y). x \\<rightarrow> y}\\<^sup>+\n\ngoal (1 subgoal):\n 1. a = b", "using \\<open>(\\<rightarrow>)\\<^sup>+\\<^sup>+ a b\\<close>"], ["proof (prove)\nusing this:\n  (a, b) \\<notin> {(x, y). x \\<rightarrow> y}\\<^sup>+\n  (\\<rightarrow>)\\<^sup>+\\<^sup>+ a b\n\ngoal (1 subgoal):\n 1. a = b", "unfolding tranclp_unfold"], ["proof (prove)\nusing this:\n  (a, b) \\<notin> {(x, y). x \\<rightarrow> y}\\<^sup>+\n  (a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>+\n\ngoal (1 subgoal):\n 1. a = b", ".."], ["proof (state)\nthis:\n  a = b\n\ngoal (1 subgoal):\n 1. a = b \\<Longrightarrow> a = b", "qed"], ["proof (state)\nthis:\n  a = b\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma cs_refl:\n  shows \"x \\<down>\\<^sup>* x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<down>\\<^sup>* x", "unfolding cs_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>s. x \\<rightarrow>\\<^sup>* s \\<and> x \\<rightarrow>\\<^sup>* s", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<rightarrow>\\<^sup>* ?s \\<and> x \\<rightarrow>\\<^sup>* ?s", "show \"x \\<rightarrow>\\<^sup>* x \\<and> x \\<rightarrow>\\<^sup>* x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<rightarrow>\\<^sup>* x \\<and> x \\<rightarrow>\\<^sup>* x", "by simp"], ["proof (state)\nthis:\n  x \\<rightarrow>\\<^sup>* x \\<and> x \\<rightarrow>\\<^sup>* x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma cs_sym:\n  assumes \"x \\<down>\\<^sup>* y\"\n  shows \"y \\<down>\\<^sup>* x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<down>\\<^sup>* x", "using assms"], ["proof (prove)\nusing this:\n  x \\<down>\\<^sup>* y\n\ngoal (1 subgoal):\n 1. y \\<down>\\<^sup>* x", "unfolding cs_def"], ["proof (prove)\nusing this:\n  \\<exists>s. x \\<rightarrow>\\<^sup>* s \\<and> y \\<rightarrow>\\<^sup>* s\n\ngoal (1 subgoal):\n 1. \\<exists>s. y \\<rightarrow>\\<^sup>* s \\<and> x \\<rightarrow>\\<^sup>* s", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       x \\<rightarrow>\\<^sup>* xa \\<and>\n       y \\<rightarrow>\\<^sup>* xa \\<Longrightarrow>\n       \\<exists>s.\n          y \\<rightarrow>\\<^sup>* s \\<and> x \\<rightarrow>\\<^sup>* s", "fix z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       x \\<rightarrow>\\<^sup>* xa \\<and>\n       y \\<rightarrow>\\<^sup>* xa \\<Longrightarrow>\n       \\<exists>s.\n          y \\<rightarrow>\\<^sup>* s \\<and> x \\<rightarrow>\\<^sup>* s", "assume a: \"x \\<rightarrow>\\<^sup>* z \\<and> y \\<rightarrow>\\<^sup>* z\""], ["proof (state)\nthis:\n  x \\<rightarrow>\\<^sup>* z \\<and> y \\<rightarrow>\\<^sup>* z\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       x \\<rightarrow>\\<^sup>* xa \\<and>\n       y \\<rightarrow>\\<^sup>* xa \\<Longrightarrow>\n       \\<exists>s.\n          y \\<rightarrow>\\<^sup>* s \\<and> x \\<rightarrow>\\<^sup>* s", "show \"\\<exists>s. y \\<rightarrow>\\<^sup>* s \\<and> x \\<rightarrow>\\<^sup>* s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>s. y \\<rightarrow>\\<^sup>* s \\<and> x \\<rightarrow>\\<^sup>* s", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<rightarrow>\\<^sup>* ?s \\<and> x \\<rightarrow>\\<^sup>* ?s", "from a"], ["proof (chain)\npicking this:\n  x \\<rightarrow>\\<^sup>* z \\<and> y \\<rightarrow>\\<^sup>* z", "show \"y \\<rightarrow>\\<^sup>* z \\<and> x \\<rightarrow>\\<^sup>* z\""], ["proof (prove)\nusing this:\n  x \\<rightarrow>\\<^sup>* z \\<and> y \\<rightarrow>\\<^sup>* z\n\ngoal (1 subgoal):\n 1. y \\<rightarrow>\\<^sup>* z \\<and> x \\<rightarrow>\\<^sup>* z", "by simp"], ["proof (state)\nthis:\n  y \\<rightarrow>\\<^sup>* z \\<and> x \\<rightarrow>\\<^sup>* z\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>s. y \\<rightarrow>\\<^sup>* s \\<and> x \\<rightarrow>\\<^sup>* s\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma rtc_implies_cs:\n  assumes \"x \\<rightarrow>\\<^sup>* y\"\n  shows \"x \\<down>\\<^sup>* y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<down>\\<^sup>* y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<down>\\<^sup>* y", "from joinI_left[OF rtc_rtranclI[OF assms]] cs_join"], ["proof (chain)\npicking this:\n  (x, y) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<down>\n  (?a \\<down>\\<^sup>* ?b) =\n  ((?a, ?b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<down>)", "show ?thesis"], ["proof (prove)\nusing this:\n  (x, y) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<down>\n  (?a \\<down>\\<^sup>* ?b) =\n  ((?a, ?b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<down>)\n\ngoal (1 subgoal):\n 1. x \\<down>\\<^sup>* y", "by simp"], ["proof (state)\nthis:\n  x \\<down>\\<^sup>* y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma rtc_implies_srtc:\n  assumes \"a \\<rightarrow>\\<^sup>* b\"\n  shows \"a \\<leftrightarrow>\\<^sup>* b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<leftrightarrow>\\<^sup>* b", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. a \\<leftrightarrow>\\<^sup>* b", "from conversionI'[OF rtc_rtranclI[OF assms]] srtc_conversion"], ["proof (chain)\npicking this:\n  (a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (?a \\<leftrightarrow>\\<^sup>* ?b) =\n  ((?a, ?b)\n   \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>\\<^sup>*)", "show ?thesis"], ["proof (prove)\nusing this:\n  (a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (?a \\<leftrightarrow>\\<^sup>* ?b) =\n  ((?a, ?b)\n   \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>\\<^sup>*)\n\ngoal (1 subgoal):\n 1. a \\<leftrightarrow>\\<^sup>* b", "by simp"], ["proof (state)\nthis:\n  a \\<leftrightarrow>\\<^sup>* b\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma srtc_symmetric:\n  assumes \"a \\<leftrightarrow>\\<^sup>* b\"\n  shows \"b \\<leftrightarrow>\\<^sup>* a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b \\<leftrightarrow>\\<^sup>* a", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. b \\<leftrightarrow>\\<^sup>* a", "from symD[OF conversion_sym[of relset], of a b] assms srtc_conversion"], ["proof (chain)\npicking this:\n  (a, b)\n  \\<in> {(x, y).\n         x \\<rightarrow>\n         y}\\<^sup>\\<leftrightarrow>\\<^sup>* \\<Longrightarrow>\n  (b, a) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>\\<^sup>*\n  a \\<leftrightarrow>\\<^sup>* b\n  (?a \\<leftrightarrow>\\<^sup>* ?b) =\n  ((?a, ?b)\n   \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>\\<^sup>*)", "show ?thesis"], ["proof (prove)\nusing this:\n  (a, b)\n  \\<in> {(x, y).\n         x \\<rightarrow>\n         y}\\<^sup>\\<leftrightarrow>\\<^sup>* \\<Longrightarrow>\n  (b, a) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>\\<^sup>*\n  a \\<leftrightarrow>\\<^sup>* b\n  (?a \\<leftrightarrow>\\<^sup>* ?b) =\n  ((?a, ?b)\n   \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>\\<^sup>*)\n\ngoal (1 subgoal):\n 1. b \\<leftrightarrow>\\<^sup>* a", "by simp"], ["proof (state)\nthis:\n  b \\<leftrightarrow>\\<^sup>* a\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma srtc_transitive:\n  assumes \"a \\<leftrightarrow>\\<^sup>* b\" and \"b \\<leftrightarrow>\\<^sup>* c\"\n  shows \"a \\<leftrightarrow>\\<^sup>* c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<leftrightarrow>\\<^sup>* c", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. a \\<leftrightarrow>\\<^sup>* c", "from rtranclp_trans[of \"(\\<leftrightarrow>)\" a b c] assms"], ["proof (chain)\npicking this:\n  \\<lbrakk>(\\<leftrightarrow>)\\<^sup>*\\<^sup>* a b;\n   (\\<leftrightarrow>)\\<^sup>*\\<^sup>* b c\\<rbrakk>\n  \\<Longrightarrow> (\\<leftrightarrow>)\\<^sup>*\\<^sup>* a c\n  a \\<leftrightarrow>\\<^sup>* b\n  b \\<leftrightarrow>\\<^sup>* c", "show \"a \\<leftrightarrow>\\<^sup>* c\""], ["proof (prove)\nusing this:\n  \\<lbrakk>(\\<leftrightarrow>)\\<^sup>*\\<^sup>* a b;\n   (\\<leftrightarrow>)\\<^sup>*\\<^sup>* b c\\<rbrakk>\n  \\<Longrightarrow> (\\<leftrightarrow>)\\<^sup>*\\<^sup>* a c\n  a \\<leftrightarrow>\\<^sup>* b\n  b \\<leftrightarrow>\\<^sup>* c\n\ngoal (1 subgoal):\n 1. a \\<leftrightarrow>\\<^sup>* c", "unfolding srtc_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>(\\<leftrightarrow>)\\<^sup>*\\<^sup>* a b;\n   (\\<leftrightarrow>)\\<^sup>*\\<^sup>* b c\\<rbrakk>\n  \\<Longrightarrow> (\\<leftrightarrow>)\\<^sup>*\\<^sup>* a c\n  (\\<leftrightarrow>)\\<^sup>*\\<^sup>* a b\n  (\\<leftrightarrow>)\\<^sup>*\\<^sup>* b c\n\ngoal (1 subgoal):\n 1. (\\<leftrightarrow>)\\<^sup>*\\<^sup>* a c", "."], ["proof (state)\nthis:\n  a \\<leftrightarrow>\\<^sup>* c\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma cs_implies_srtc:\n  assumes \"a \\<down>\\<^sup>* b\"\n  shows \"a \\<leftrightarrow>\\<^sup>* b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<leftrightarrow>\\<^sup>* b", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. a \\<leftrightarrow>\\<^sup>* b", "from assms cs_join"], ["proof (chain)\npicking this:\n  a \\<down>\\<^sup>* b\n  (?a \\<down>\\<^sup>* ?b) =\n  ((?a, ?b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<down>)", "have \"(a, b) \\<in> relset\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  a \\<down>\\<^sup>* b\n  (?a \\<down>\\<^sup>* ?b) =\n  ((?a, ?b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<down>)\n\ngoal (1 subgoal):\n 1. (a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<down>", "by simp"], ["proof (state)\nthis:\n  (a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. a \\<leftrightarrow>\\<^sup>* b", "hence \"(a, b) \\<in> relset\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\nusing this:\n  (a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>\\<^sup>*", "using join_imp_conversion"], ["proof (prove)\nusing this:\n  (a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<down>\n  ?r\\<^sup>\\<down> \\<subseteq> ?r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. a \\<leftrightarrow>\\<^sup>* b", "thus ?thesis"], ["proof (prove)\nusing this:\n  (a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. a \\<leftrightarrow>\\<^sup>* b", "using srtc_conversion"], ["proof (prove)\nusing this:\n  (a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (?a \\<leftrightarrow>\\<^sup>* ?b) =\n  ((?a, ?b)\n   \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>\\<leftrightarrow>\\<^sup>*)\n\ngoal (1 subgoal):\n 1. a \\<leftrightarrow>\\<^sup>* b", "by simp"], ["proof (state)\nthis:\n  a \\<leftrightarrow>\\<^sup>* b\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma confluence_equiv_ChurchRosser: \"is_confluent = is_ChurchRosser\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_confluent = is_ChurchRosser", "by (simp only: ChurchRosser_conversion confluent_CR, fact CR_iff_conversion_imp_join)"], ["", "corollary confluence_implies_ChurchRosser:\n  assumes is_confluent\n  shows is_ChurchRosser"], ["proof (prove)\ngoal (1 subgoal):\n 1. is_ChurchRosser", "using assms"], ["proof (prove)\nusing this:\n  is_confluent\n\ngoal (1 subgoal):\n 1. is_ChurchRosser", "by (simp only: confluence_equiv_ChurchRosser)"], ["", "lemma ChurchRosser_unique_final:\n  assumes \"is_ChurchRosser\" and \"a \\<rightarrow>\\<^sup>* b1\" and \"a \\<rightarrow>\\<^sup>* b2\" and \"is_final b1\" and \"is_final b2\"\n  shows \"b1 = b2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b1 = b2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. b1 = b2", "from \\<open>is_ChurchRosser\\<close> confluence_equiv_ChurchRosser confluent_CR"], ["proof (chain)\npicking this:\n  is_ChurchRosser\n  is_confluent = is_ChurchRosser\n  is_confluent = CR {(x, y). x \\<rightarrow> y}", "have \"CR relset\""], ["proof (prove)\nusing this:\n  is_ChurchRosser\n  is_confluent = is_ChurchRosser\n  is_confluent = CR {(x, y). x \\<rightarrow> y}\n\ngoal (1 subgoal):\n 1. CR {(x, y). x \\<rightarrow> y}", "by simp"], ["proof (state)\nthis:\n  CR {(x, y). x \\<rightarrow> y}\n\ngoal (1 subgoal):\n 1. b1 = b2", "from CR_imp_UNF[OF this] assms"], ["proof (chain)\npicking this:\n  UNF {(x, y). x \\<rightarrow> y}\n  is_ChurchRosser\n  a \\<rightarrow>\\<^sup>* b1\n  a \\<rightarrow>\\<^sup>* b2\n  is_final b1\n  is_final b2", "show ?thesis"], ["proof (prove)\nusing this:\n  UNF {(x, y). x \\<rightarrow> y}\n  is_ChurchRosser\n  a \\<rightarrow>\\<^sup>* b1\n  a \\<rightarrow>\\<^sup>* b2\n  is_final b1\n  is_final b2\n\ngoal (1 subgoal):\n 1. b1 = b2", "unfolding UNF_defs normalizability_def"], ["proof (prove)\nusing this:\n  \\<forall>a\\<in>UNIV.\n     \\<forall>b c.\n        (a, b)\n        \\<in> {(a, b).\n               (a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>* \\<and>\n               b \\<in> NF {(x, y). x \\<rightarrow> y}} \\<and>\n        (a, c)\n        \\<in> {(a, b).\n               (a, b) \\<in> {(x, y). x \\<rightarrow> y}\\<^sup>* \\<and>\n               b \\<in> NF {(x, y). x \\<rightarrow> y}} \\<longrightarrow>\n        b = c\n  is_ChurchRosser\n  a \\<rightarrow>\\<^sup>* b1\n  a \\<rightarrow>\\<^sup>* b2\n  is_final b1\n  is_final b2\n\ngoal (1 subgoal):\n 1. b1 = b2", "by (auto simp add: Enum.rtranclp_rtrancl_eq final_NF)"], ["proof (state)\nthis:\n  b1 = b2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma wf_on_imp_nf_ex:\n  assumes \"wfp_on ((\\<rightarrow>)\\<inverse>\\<inverse>) A\" and \"dw_closed A\" and \"a \\<in> A\"\n  obtains b where \"a \\<rightarrow>\\<^sup>* b\" and \"is_final b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>a \\<rightarrow>\\<^sup>* b; is_final b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>a \\<rightarrow>\\<^sup>* b; is_final b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "let ?A = \"{b\\<in>A. a \\<rightarrow>\\<^sup>* b}\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>a \\<rightarrow>\\<^sup>* b; is_final b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "note assms(1)"], ["proof (state)\nthis:\n  wfp_on (\\<rightarrow>)\\<inverse>\\<inverse> A\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>a \\<rightarrow>\\<^sup>* b; is_final b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "moreover"], ["proof (state)\nthis:\n  wfp_on (\\<rightarrow>)\\<inverse>\\<inverse> A\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>a \\<rightarrow>\\<^sup>* b; is_final b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from assms(3)"], ["proof (chain)\npicking this:\n  a \\<in> A", "have \"a \\<in> ?A\""], ["proof (prove)\nusing this:\n  a \\<in> A\n\ngoal (1 subgoal):\n 1. a \\<in> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}", "by simp"], ["proof (state)\nthis:\n  a \\<in> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>a \\<rightarrow>\\<^sup>* b; is_final b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "moreover"], ["proof (state)\nthis:\n  a \\<in> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>a \\<rightarrow>\\<^sup>* b; is_final b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have \"?A \\<subseteq> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {b \\<in> A. a \\<rightarrow>\\<^sup>* b} \\<subseteq> A", "by auto"], ["proof (state)\nthis:\n  {b \\<in> A. a \\<rightarrow>\\<^sup>* b} \\<subseteq> A\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>a \\<rightarrow>\\<^sup>* b; is_final b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "ultimately"], ["proof (chain)\npicking this:\n  wfp_on (\\<rightarrow>)\\<inverse>\\<inverse> A\n  a \\<in> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}\n  {b \\<in> A. a \\<rightarrow>\\<^sup>* b} \\<subseteq> A", "show ?thesis"], ["proof (prove)\nusing this:\n  wfp_on (\\<rightarrow>)\\<inverse>\\<inverse> A\n  a \\<in> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}\n  {b \\<in> A. a \\<rightarrow>\\<^sup>* b} \\<subseteq> A\n\ngoal (1 subgoal):\n 1. thesis", "proof (rule wfp_onE_min)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>z.\n       \\<lbrakk>z \\<in> {b \\<in> A. a \\<rightarrow>\\<^sup>* b};\n        \\<And>y.\n           (\\<rightarrow>)\\<inverse>\\<inverse> y z \\<Longrightarrow>\n           y \\<notin> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}\\<rbrakk>\n       \\<Longrightarrow> thesis", "fix z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>z.\n       \\<lbrakk>z \\<in> {b \\<in> A. a \\<rightarrow>\\<^sup>* b};\n        \\<And>y.\n           (\\<rightarrow>)\\<inverse>\\<inverse> y z \\<Longrightarrow>\n           y \\<notin> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}\\<rbrakk>\n       \\<Longrightarrow> thesis", "assume \"z \\<in> ?A\" and \"\\<And>y. (\\<rightarrow>)\\<inverse>\\<inverse> y z \\<Longrightarrow> y \\<notin> ?A\""], ["proof (state)\nthis:\n  z \\<in> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}\n  (\\<rightarrow>)\\<inverse>\\<inverse> ?y z \\<Longrightarrow>\n  ?y \\<notin> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}\n\ngoal (1 subgoal):\n 1. \\<And>z.\n       \\<lbrakk>z \\<in> {b \\<in> A. a \\<rightarrow>\\<^sup>* b};\n        \\<And>y.\n           (\\<rightarrow>)\\<inverse>\\<inverse> y z \\<Longrightarrow>\n           y \\<notin> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}\\<rbrakk>\n       \\<Longrightarrow> thesis", "from this(2)"], ["proof (chain)\npicking this:\n  (\\<rightarrow>)\\<inverse>\\<inverse> ?y z \\<Longrightarrow>\n  ?y \\<notin> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}", "have *: \"\\<And>y. z \\<rightarrow> y \\<Longrightarrow> y \\<notin> ?A\""], ["proof (prove)\nusing this:\n  (\\<rightarrow>)\\<inverse>\\<inverse> ?y z \\<Longrightarrow>\n  ?y \\<notin> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       z \\<rightarrow> y \\<Longrightarrow>\n       y \\<notin> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}", "by simp"], ["proof (state)\nthis:\n  z \\<rightarrow> ?y \\<Longrightarrow>\n  ?y \\<notin> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}\n\ngoal (1 subgoal):\n 1. \\<And>z.\n       \\<lbrakk>z \\<in> {b \\<in> A. a \\<rightarrow>\\<^sup>* b};\n        \\<And>y.\n           (\\<rightarrow>)\\<inverse>\\<inverse> y z \\<Longrightarrow>\n           y \\<notin> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}\\<rbrakk>\n       \\<Longrightarrow> thesis", "from \\<open>z \\<in> ?A\\<close>"], ["proof (chain)\npicking this:\n  z \\<in> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}", "have \"z \\<in> A\" and \"a \\<rightarrow>\\<^sup>* z\""], ["proof (prove)\nusing this:\n  z \\<in> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}\n\ngoal (1 subgoal):\n 1. z \\<in> A &&& a \\<rightarrow>\\<^sup>* z", "by simp_all"], ["proof (state)\nthis:\n  z \\<in> A\n  a \\<rightarrow>\\<^sup>* z\n\ngoal (1 subgoal):\n 1. \\<And>z.\n       \\<lbrakk>z \\<in> {b \\<in> A. a \\<rightarrow>\\<^sup>* b};\n        \\<And>y.\n           (\\<rightarrow>)\\<inverse>\\<inverse> y z \\<Longrightarrow>\n           y \\<notin> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}\\<rbrakk>\n       \\<Longrightarrow> thesis", "show thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof (rule, fact)"], ["proof (state)\ngoal (1 subgoal):\n 1. is_final z", "show \"is_final z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_final z", "unfolding is_final_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<nexists>b. z \\<rightarrow> b", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>b. z \\<rightarrow> b \\<Longrightarrow> False", "assume \"\\<exists>y. z \\<rightarrow> y\""], ["proof (state)\nthis:\n  \\<exists>y. z \\<rightarrow> y\n\ngoal (1 subgoal):\n 1. \\<exists>b. z \\<rightarrow> b \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<exists>y. z \\<rightarrow> y", "obtain y where \"z \\<rightarrow> y\""], ["proof (prove)\nusing this:\n  \\<exists>y. z \\<rightarrow> y\n\ngoal (1 subgoal):\n 1. (\\<And>y. z \\<rightarrow> y \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  z \\<rightarrow> y\n\ngoal (1 subgoal):\n 1. \\<exists>b. z \\<rightarrow> b \\<Longrightarrow> False", "hence \"y \\<notin> ?A\""], ["proof (prove)\nusing this:\n  z \\<rightarrow> y\n\ngoal (1 subgoal):\n 1. y \\<notin> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}", "by (rule *)"], ["proof (state)\nthis:\n  y \\<notin> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}\n\ngoal (1 subgoal):\n 1. \\<exists>b. z \\<rightarrow> b \\<Longrightarrow> False", "moreover"], ["proof (state)\nthis:\n  y \\<notin> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}\n\ngoal (1 subgoal):\n 1. \\<exists>b. z \\<rightarrow> b \\<Longrightarrow> False", "from assms(2) \\<open>z \\<in> A\\<close> \\<open>z \\<rightarrow> y\\<close>"], ["proof (chain)\npicking this:\n  dw_closed A\n  z \\<in> A\n  z \\<rightarrow> y", "have \"y \\<in> A\""], ["proof (prove)\nusing this:\n  dw_closed A\n  z \\<in> A\n  z \\<rightarrow> y\n\ngoal (1 subgoal):\n 1. y \\<in> A", "by (rule dw_closedD)"], ["proof (state)\nthis:\n  y \\<in> A\n\ngoal (1 subgoal):\n 1. \\<exists>b. z \\<rightarrow> b \\<Longrightarrow> False", "ultimately"], ["proof (chain)\npicking this:\n  y \\<notin> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}\n  y \\<in> A", "have \"\\<not> (a \\<rightarrow>\\<^sup>* y)\""], ["proof (prove)\nusing this:\n  y \\<notin> {b \\<in> A. a \\<rightarrow>\\<^sup>* b}\n  y \\<in> A\n\ngoal (1 subgoal):\n 1. \\<not> a \\<rightarrow>\\<^sup>* y", "by simp"], ["proof (state)\nthis:\n  \\<not> a \\<rightarrow>\\<^sup>* y\n\ngoal (1 subgoal):\n 1. \\<exists>b. z \\<rightarrow> b \\<Longrightarrow> False", "with rtranclp_trans[OF \\<open>a \\<rightarrow>\\<^sup>* z\\<close>, of y] \\<open>z \\<rightarrow> y\\<close>"], ["proof (chain)\npicking this:\n  z \\<rightarrow>\\<^sup>* y \\<Longrightarrow> a \\<rightarrow>\\<^sup>* y\n  z \\<rightarrow> y\n  \\<not> a \\<rightarrow>\\<^sup>* y", "show False"], ["proof (prove)\nusing this:\n  z \\<rightarrow>\\<^sup>* y \\<Longrightarrow> a \\<rightarrow>\\<^sup>* y\n  z \\<rightarrow> y\n  \\<not> a \\<rightarrow>\\<^sup>* y\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  is_final z\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma unique_nf_imp_confluence_on:\n  assumes major: \"\\<And>a b1 b2. a \\<in> A \\<Longrightarrow> (a \\<rightarrow>\\<^sup>* b1) \\<Longrightarrow> (a \\<rightarrow>\\<^sup>* b2) \\<Longrightarrow> is_final b1 \\<Longrightarrow> is_final b2 \\<Longrightarrow> b1 = b2\"\n    and wf: \"wfp_on ((\\<rightarrow>)\\<inverse>\\<inverse>) A\" and dw: \"dw_closed A\"\n  shows \"is_confluent_on A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_confluent_on A", "unfolding is_confluent_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>a\\<in>A.\n       \\<forall>b1 b2.\n          a \\<rightarrow>\\<^sup>* b1 \\<and>\n          a \\<rightarrow>\\<^sup>* b2 \\<longrightarrow>\n          b1 \\<down>\\<^sup>* b2", "proof (intro ballI allI impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>a \\<in> A;\n        a \\<rightarrow>\\<^sup>* b1 \\<and>\n        a \\<rightarrow>\\<^sup>* b2\\<rbrakk>\n       \\<Longrightarrow> b1 \\<down>\\<^sup>* b2", "fix a b1 b2"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>a \\<in> A;\n        a \\<rightarrow>\\<^sup>* b1 \\<and>\n        a \\<rightarrow>\\<^sup>* b2\\<rbrakk>\n       \\<Longrightarrow> b1 \\<down>\\<^sup>* b2", "assume \"a \\<rightarrow>\\<^sup>* b1 \\<and> a \\<rightarrow>\\<^sup>* b2\""], ["proof (state)\nthis:\n  a \\<rightarrow>\\<^sup>* b1 \\<and> a \\<rightarrow>\\<^sup>* b2\n\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>a \\<in> A;\n        a \\<rightarrow>\\<^sup>* b1 \\<and>\n        a \\<rightarrow>\\<^sup>* b2\\<rbrakk>\n       \\<Longrightarrow> b1 \\<down>\\<^sup>* b2", "hence \"a \\<rightarrow>\\<^sup>* b1\" and \"a \\<rightarrow>\\<^sup>* b2\""], ["proof (prove)\nusing this:\n  a \\<rightarrow>\\<^sup>* b1 \\<and> a \\<rightarrow>\\<^sup>* b2\n\ngoal (1 subgoal):\n 1. a \\<rightarrow>\\<^sup>* b1 &&& a \\<rightarrow>\\<^sup>* b2", "by simp_all"], ["proof (state)\nthis:\n  a \\<rightarrow>\\<^sup>* b1\n  a \\<rightarrow>\\<^sup>* b2\n\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>a \\<in> A;\n        a \\<rightarrow>\\<^sup>* b1 \\<and>\n        a \\<rightarrow>\\<^sup>* b2\\<rbrakk>\n       \\<Longrightarrow> b1 \\<down>\\<^sup>* b2", "assume \"a \\<in> A\""], ["proof (state)\nthis:\n  a \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>a \\<in> A;\n        a \\<rightarrow>\\<^sup>* b1 \\<and>\n        a \\<rightarrow>\\<^sup>* b2\\<rbrakk>\n       \\<Longrightarrow> b1 \\<down>\\<^sup>* b2", "from dw this \\<open>a \\<rightarrow>\\<^sup>* b1\\<close>"], ["proof (chain)\npicking this:\n  dw_closed A\n  a \\<in> A\n  a \\<rightarrow>\\<^sup>* b1", "have \"b1 \\<in> A\""], ["proof (prove)\nusing this:\n  dw_closed A\n  a \\<in> A\n  a \\<rightarrow>\\<^sup>* b1\n\ngoal (1 subgoal):\n 1. b1 \\<in> A", "by (rule dw_closed_rtrancl)"], ["proof (state)\nthis:\n  b1 \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>a \\<in> A;\n        a \\<rightarrow>\\<^sup>* b1 \\<and>\n        a \\<rightarrow>\\<^sup>* b2\\<rbrakk>\n       \\<Longrightarrow> b1 \\<down>\\<^sup>* b2", "from wf dw this"], ["proof (chain)\npicking this:\n  wfp_on (\\<rightarrow>)\\<inverse>\\<inverse> A\n  dw_closed A\n  b1 \\<in> A", "obtain c1 where \"b1 \\<rightarrow>\\<^sup>* c1\" and \"is_final c1\""], ["proof (prove)\nusing this:\n  wfp_on (\\<rightarrow>)\\<inverse>\\<inverse> A\n  dw_closed A\n  b1 \\<in> A\n\ngoal (1 subgoal):\n 1. (\\<And>c1.\n        \\<lbrakk>b1 \\<rightarrow>\\<^sup>* c1; is_final c1\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule wf_on_imp_nf_ex)"], ["proof (state)\nthis:\n  b1 \\<rightarrow>\\<^sup>* c1\n  is_final c1\n\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>a \\<in> A;\n        a \\<rightarrow>\\<^sup>* b1 \\<and>\n        a \\<rightarrow>\\<^sup>* b2\\<rbrakk>\n       \\<Longrightarrow> b1 \\<down>\\<^sup>* b2", "from dw \\<open>a \\<in> A\\<close> \\<open>a \\<rightarrow>\\<^sup>* b2\\<close>"], ["proof (chain)\npicking this:\n  dw_closed A\n  a \\<in> A\n  a \\<rightarrow>\\<^sup>* b2", "have \"b2 \\<in> A\""], ["proof (prove)\nusing this:\n  dw_closed A\n  a \\<in> A\n  a \\<rightarrow>\\<^sup>* b2\n\ngoal (1 subgoal):\n 1. b2 \\<in> A", "by (rule dw_closed_rtrancl)"], ["proof (state)\nthis:\n  b2 \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>a \\<in> A;\n        a \\<rightarrow>\\<^sup>* b1 \\<and>\n        a \\<rightarrow>\\<^sup>* b2\\<rbrakk>\n       \\<Longrightarrow> b1 \\<down>\\<^sup>* b2", "from wf dw this"], ["proof (chain)\npicking this:\n  wfp_on (\\<rightarrow>)\\<inverse>\\<inverse> A\n  dw_closed A\n  b2 \\<in> A", "obtain c2 where \"b2 \\<rightarrow>\\<^sup>* c2\" and \"is_final c2\""], ["proof (prove)\nusing this:\n  wfp_on (\\<rightarrow>)\\<inverse>\\<inverse> A\n  dw_closed A\n  b2 \\<in> A\n\ngoal (1 subgoal):\n 1. (\\<And>c2.\n        \\<lbrakk>b2 \\<rightarrow>\\<^sup>* c2; is_final c2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule wf_on_imp_nf_ex)"], ["proof (state)\nthis:\n  b2 \\<rightarrow>\\<^sup>* c2\n  is_final c2\n\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>a \\<in> A;\n        a \\<rightarrow>\\<^sup>* b1 \\<and>\n        a \\<rightarrow>\\<^sup>* b2\\<rbrakk>\n       \\<Longrightarrow> b1 \\<down>\\<^sup>* b2", "have \"c1 = c2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c1 = c2", "by (rule major, fact, rule rtranclp_trans[OF \\<open>a \\<rightarrow>\\<^sup>* b1\\<close>], fact, rule rtranclp_trans[OF \\<open>a \\<rightarrow>\\<^sup>* b2\\<close>], fact+)"], ["proof (state)\nthis:\n  c1 = c2\n\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>a \\<in> A;\n        a \\<rightarrow>\\<^sup>* b1 \\<and>\n        a \\<rightarrow>\\<^sup>* b2\\<rbrakk>\n       \\<Longrightarrow> b1 \\<down>\\<^sup>* b2", "show \"b1 \\<down>\\<^sup>* b2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b1 \\<down>\\<^sup>* b2", "unfolding cs_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>s. b1 \\<rightarrow>\\<^sup>* s \\<and> b2 \\<rightarrow>\\<^sup>* s", "proof (intro exI, intro conjI)"], ["proof (state)\ngoal (2 subgoals):\n 1. b1 \\<rightarrow>\\<^sup>* ?s\n 2. b2 \\<rightarrow>\\<^sup>* ?s", "show \"b1 \\<rightarrow>\\<^sup>* c1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b1 \\<rightarrow>\\<^sup>* c1", "by fact"], ["proof (state)\nthis:\n  b1 \\<rightarrow>\\<^sup>* c1\n\ngoal (1 subgoal):\n 1. b2 \\<rightarrow>\\<^sup>* c1", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. b2 \\<rightarrow>\\<^sup>* c1", "show \"b2 \\<rightarrow>\\<^sup>* c1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b2 \\<rightarrow>\\<^sup>* c1", "unfolding \\<open>c1 = c2\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. b2 \\<rightarrow>\\<^sup>* c2", "by fact"], ["proof (state)\nthis:\n  b2 \\<rightarrow>\\<^sup>* c1\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  b1 \\<down>\\<^sup>* b2\n\ngoal:\nNo subgoals!", "qed"], ["", "corollary wf_imp_nf_ex:\n  assumes \"wfP ((\\<rightarrow>)\\<inverse>\\<inverse>)\"\n  obtains b where \"a \\<rightarrow>\\<^sup>* b\" and \"is_final b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>a \\<rightarrow>\\<^sup>* b; is_final b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>a \\<rightarrow>\\<^sup>* b; is_final b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from assms"], ["proof (chain)\npicking this:\n  wfP (\\<rightarrow>)\\<inverse>\\<inverse>", "have \"wfp_on (r^--1) UNIV\""], ["proof (prove)\nusing this:\n  wfP (\\<rightarrow>)\\<inverse>\\<inverse>\n\ngoal (1 subgoal):\n 1. wfp_on (\\<rightarrow>)\\<inverse>\\<inverse> UNIV", "by simp"], ["proof (state)\nthis:\n  wfp_on (\\<rightarrow>)\\<inverse>\\<inverse> UNIV\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>a \\<rightarrow>\\<^sup>* b; is_final b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "moreover"], ["proof (state)\nthis:\n  wfp_on (\\<rightarrow>)\\<inverse>\\<inverse> UNIV\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>a \\<rightarrow>\\<^sup>* b; is_final b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "note dw_closed_UNIV"], ["proof (state)\nthis:\n  dw_closed UNIV\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>a \\<rightarrow>\\<^sup>* b; is_final b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "moreover"], ["proof (state)\nthis:\n  dw_closed UNIV\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>a \\<rightarrow>\\<^sup>* b; is_final b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have \"a \\<in> UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in> UNIV", ".."], ["proof (state)\nthis:\n  a \\<in> UNIV\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>a \\<rightarrow>\\<^sup>* b; is_final b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "ultimately"], ["proof (chain)\npicking this:\n  wfp_on (\\<rightarrow>)\\<inverse>\\<inverse> UNIV\n  dw_closed UNIV\n  a \\<in> UNIV", "obtain b where \"a \\<rightarrow>\\<^sup>* b\" and \"is_final b\""], ["proof (prove)\nusing this:\n  wfp_on (\\<rightarrow>)\\<inverse>\\<inverse> UNIV\n  dw_closed UNIV\n  a \\<in> UNIV\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>a \\<rightarrow>\\<^sup>* b; is_final b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule wf_on_imp_nf_ex)"], ["proof (state)\nthis:\n  a \\<rightarrow>\\<^sup>* b\n  is_final b\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>a \\<rightarrow>\\<^sup>* b; is_final b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "thus ?thesis"], ["proof (prove)\nusing this:\n  a \\<rightarrow>\\<^sup>* b\n  is_final b\n\ngoal (1 subgoal):\n 1. thesis", ".."], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "corollary unique_nf_imp_confluence:\n  assumes \"\\<And>a b1 b2. (a \\<rightarrow>\\<^sup>* b1) \\<Longrightarrow> (a \\<rightarrow>\\<^sup>* b2) \\<Longrightarrow> is_final b1 \\<Longrightarrow> is_final b2 \\<Longrightarrow> b1 = b2\"\n    and \"wfP ((\\<rightarrow>)\\<inverse>\\<inverse>)\"\n  shows \"is_confluent\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_confluent", "unfolding is_confluent_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. is_confluent_on UNIV", "by (rule unique_nf_imp_confluence_on, erule assms(1), assumption+, simp add: assms(2), fact dw_closed_UNIV)"], ["", "end"], ["", "(*relation*)"], ["", "subsection \\<open>Advanced Results and the Generalized Newman Lemma\\<close>"], ["", "definition relbelow_on :: \"'a set \\<Rightarrow> ('a \\<Rightarrow> 'a \\<Rightarrow> bool) \\<Rightarrow> 'a \\<Rightarrow> ('a \\<Rightarrow> 'a \\<Rightarrow> bool) \\<Rightarrow> ('a \\<Rightarrow> 'a \\<Rightarrow> bool)\"\n  where \"relbelow_on A ord z rel a b \\<equiv> (a \\<in> A \\<and> b \\<in> A \\<and> rel a b \\<and> ord a z \\<and> ord b z)\""], ["", "definition cbelow_on_1 :: \"'a set \\<Rightarrow> ('a \\<Rightarrow> 'a \\<Rightarrow> bool) \\<Rightarrow> 'a \\<Rightarrow> ('a \\<Rightarrow> 'a \\<Rightarrow> bool) \\<Rightarrow> ('a \\<Rightarrow> 'a \\<Rightarrow> bool)\"\n  where \"cbelow_on_1 A ord z rel \\<equiv> (relbelow_on A ord z rel)\\<^sup>+\\<^sup>+\""], ["", "definition cbelow_on :: \"'a set \\<Rightarrow> ('a \\<Rightarrow> 'a \\<Rightarrow> bool) \\<Rightarrow> 'a \\<Rightarrow> ('a \\<Rightarrow> 'a \\<Rightarrow> bool) \\<Rightarrow> ('a \\<Rightarrow> 'a \\<Rightarrow> bool)\"\n  where \"cbelow_on A ord z rel a b \\<equiv> (a = b \\<and> b \\<in> A \\<and> ord b z) \\<or> cbelow_on_1 A ord z rel a b\""], ["", "text \\<open>Note that @{const cbelow_on} cannot be defined as the reflexive-transitive closure of\n  @{const relbelow_on}, since it is in general not reflexive!\\<close>"], ["", "definition is_loc_connective_on :: \"'a set \\<Rightarrow> ('a \\<Rightarrow> 'a \\<Rightarrow> bool) \\<Rightarrow> ('a \\<Rightarrow> 'a \\<Rightarrow> bool) \\<Rightarrow> bool\"\n  where \"is_loc_connective_on A ord r \\<longleftrightarrow> (\\<forall>a\\<in>A. \\<forall>b1 b2. r a b1 \\<and> r a b2 \\<longrightarrow> cbelow_on A ord a (relation.sc r) b1 b2)\""], ["", "text \\<open>Note that @{const wfp_on} is @{emph \\<open>not\\<close>} the same as @{const SN_on}, since in the definition\n  of @{const SN_on} only the @{emph \\<open>first\\<close>} element of the chain must be in the set.\\<close>"], ["", "lemma cbelow_on_first_below:\n  assumes \"cbelow_on A ord z rel a b\"\n  shows \"ord a z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ord a z", "using assms"], ["proof (prove)\nusing this:\n  cbelow_on A ord z rel a b\n\ngoal (1 subgoal):\n 1. ord a z", "unfolding cbelow_on_def"], ["proof (prove)\nusing this:\n  a = b \\<and> b \\<in> A \\<and> ord b z \\<or> cbelow_on_1 A ord z rel a b\n\ngoal (1 subgoal):\n 1. ord a z", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. a = b \\<and> b \\<in> A \\<and> ord b z \\<Longrightarrow> ord a z\n 2. cbelow_on_1 A ord z rel a b \\<Longrightarrow> ord a z", "assume \"cbelow_on_1 A ord z rel a b\""], ["proof (state)\nthis:\n  cbelow_on_1 A ord z rel a b\n\ngoal (2 subgoals):\n 1. a = b \\<and> b \\<in> A \\<and> ord b z \\<Longrightarrow> ord a z\n 2. cbelow_on_1 A ord z rel a b \\<Longrightarrow> ord a z", "thus \"ord a z\""], ["proof (prove)\nusing this:\n  cbelow_on_1 A ord z rel a b\n\ngoal (1 subgoal):\n 1. ord a z", "unfolding cbelow_on_1_def"], ["proof (prove)\nusing this:\n  (relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a b\n\ngoal (1 subgoal):\n 1. ord a z", "by (induct rule: tranclp_induct, simp add: relbelow_on_def)"], ["proof (state)\nthis:\n  ord a z\n\ngoal (1 subgoal):\n 1. a = b \\<and> b \\<in> A \\<and> ord b z \\<Longrightarrow> ord a z", "qed simp"], ["", "lemma cbelow_on_second_below:\n  assumes \"cbelow_on A ord z rel a b\"\n  shows \"ord b z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ord b z", "using assms"], ["proof (prove)\nusing this:\n  cbelow_on A ord z rel a b\n\ngoal (1 subgoal):\n 1. ord b z", "unfolding cbelow_on_def"], ["proof (prove)\nusing this:\n  a = b \\<and> b \\<in> A \\<and> ord b z \\<or> cbelow_on_1 A ord z rel a b\n\ngoal (1 subgoal):\n 1. ord b z", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. a = b \\<and> b \\<in> A \\<and> ord b z \\<Longrightarrow> ord b z\n 2. cbelow_on_1 A ord z rel a b \\<Longrightarrow> ord b z", "assume \"cbelow_on_1 A ord z rel a b\""], ["proof (state)\nthis:\n  cbelow_on_1 A ord z rel a b\n\ngoal (2 subgoals):\n 1. a = b \\<and> b \\<in> A \\<and> ord b z \\<Longrightarrow> ord b z\n 2. cbelow_on_1 A ord z rel a b \\<Longrightarrow> ord b z", "thus \"ord b z\""], ["proof (prove)\nusing this:\n  cbelow_on_1 A ord z rel a b\n\ngoal (1 subgoal):\n 1. ord b z", "unfolding cbelow_on_1_def"], ["proof (prove)\nusing this:\n  (relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a b\n\ngoal (1 subgoal):\n 1. ord b z", "by (induct rule: tranclp_induct, simp_all add: relbelow_on_def)"], ["proof (state)\nthis:\n  ord b z\n\ngoal (1 subgoal):\n 1. a = b \\<and> b \\<in> A \\<and> ord b z \\<Longrightarrow> ord b z", "qed simp"], ["", "lemma cbelow_on_first_in:\n  assumes \"cbelow_on A ord z rel a b\"\n  shows \"a \\<in> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in> A", "using assms"], ["proof (prove)\nusing this:\n  cbelow_on A ord z rel a b\n\ngoal (1 subgoal):\n 1. a \\<in> A", "unfolding cbelow_on_def"], ["proof (prove)\nusing this:\n  a = b \\<and> b \\<in> A \\<and> ord b z \\<or> cbelow_on_1 A ord z rel a b\n\ngoal (1 subgoal):\n 1. a \\<in> A", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. a = b \\<and> b \\<in> A \\<and> ord b z \\<Longrightarrow> a \\<in> A\n 2. cbelow_on_1 A ord z rel a b \\<Longrightarrow> a \\<in> A", "assume \"cbelow_on_1 A ord z rel a b\""], ["proof (state)\nthis:\n  cbelow_on_1 A ord z rel a b\n\ngoal (2 subgoals):\n 1. a = b \\<and> b \\<in> A \\<and> ord b z \\<Longrightarrow> a \\<in> A\n 2. cbelow_on_1 A ord z rel a b \\<Longrightarrow> a \\<in> A", "thus ?thesis"], ["proof (prove)\nusing this:\n  cbelow_on_1 A ord z rel a b\n\ngoal (1 subgoal):\n 1. a \\<in> A", "unfolding cbelow_on_1_def"], ["proof (prove)\nusing this:\n  (relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a b\n\ngoal (1 subgoal):\n 1. a \\<in> A", "by (induct rule: tranclp_induct, simp add: relbelow_on_def)"], ["proof (state)\nthis:\n  a \\<in> A\n\ngoal (1 subgoal):\n 1. a = b \\<and> b \\<in> A \\<and> ord b z \\<Longrightarrow> a \\<in> A", "qed simp"], ["", "lemma cbelow_on_second_in:\n  assumes \"cbelow_on A ord z rel a b\"\n  shows \"b \\<in> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b \\<in> A", "using assms"], ["proof (prove)\nusing this:\n  cbelow_on A ord z rel a b\n\ngoal (1 subgoal):\n 1. b \\<in> A", "unfolding cbelow_on_def"], ["proof (prove)\nusing this:\n  a = b \\<and> b \\<in> A \\<and> ord b z \\<or> cbelow_on_1 A ord z rel a b\n\ngoal (1 subgoal):\n 1. b \\<in> A", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. a = b \\<and> b \\<in> A \\<and> ord b z \\<Longrightarrow> b \\<in> A\n 2. cbelow_on_1 A ord z rel a b \\<Longrightarrow> b \\<in> A", "assume \"cbelow_on_1 A ord z rel a b\""], ["proof (state)\nthis:\n  cbelow_on_1 A ord z rel a b\n\ngoal (2 subgoals):\n 1. a = b \\<and> b \\<in> A \\<and> ord b z \\<Longrightarrow> b \\<in> A\n 2. cbelow_on_1 A ord z rel a b \\<Longrightarrow> b \\<in> A", "thus ?thesis"], ["proof (prove)\nusing this:\n  cbelow_on_1 A ord z rel a b\n\ngoal (1 subgoal):\n 1. b \\<in> A", "unfolding cbelow_on_1_def"], ["proof (prove)\nusing this:\n  (relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a b\n\ngoal (1 subgoal):\n 1. b \\<in> A", "by (induct rule: tranclp_induct, simp_all add: relbelow_on_def)"], ["proof (state)\nthis:\n  b \\<in> A\n\ngoal (1 subgoal):\n 1. a = b \\<and> b \\<in> A \\<and> ord b z \\<Longrightarrow> b \\<in> A", "qed simp"], ["", "lemma cbelow_on_intro [intro]:\n  assumes main: \"cbelow_on A ord z rel a b\" and \"c \\<in> A\" and \"rel b c\" and \"ord c z\"\n  shows \"cbelow_on A ord z rel a c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cbelow_on A ord z rel a c", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. cbelow_on A ord z rel a c", "from main"], ["proof (chain)\npicking this:\n  cbelow_on A ord z rel a b", "have \"b \\<in> A\""], ["proof (prove)\nusing this:\n  cbelow_on A ord z rel a b\n\ngoal (1 subgoal):\n 1. b \\<in> A", "by (rule cbelow_on_second_in)"], ["proof (state)\nthis:\n  b \\<in> A\n\ngoal (1 subgoal):\n 1. cbelow_on A ord z rel a c", "from main"], ["proof (chain)\npicking this:\n  cbelow_on A ord z rel a b", "show ?thesis"], ["proof (prove)\nusing this:\n  cbelow_on A ord z rel a b\n\ngoal (1 subgoal):\n 1. cbelow_on A ord z rel a c", "unfolding cbelow_on_def"], ["proof (prove)\nusing this:\n  a = b \\<and> b \\<in> A \\<and> ord b z \\<or> cbelow_on_1 A ord z rel a b\n\ngoal (1 subgoal):\n 1. a = c \\<and> c \\<in> A \\<and> ord c z \\<or> cbelow_on_1 A ord z rel a c", "proof (intro disjI2)"], ["proof (state)\ngoal (1 subgoal):\n 1. a = b \\<and> b \\<in> A \\<and> ord b z \\<or>\n    cbelow_on_1 A ord z rel a b \\<Longrightarrow>\n    cbelow_on_1 A ord z rel a c", "assume cases: \"(a = b \\<and> b \\<in> A \\<and> ord b z) \\<or> cbelow_on_1 A ord z rel a b\""], ["proof (state)\nthis:\n  a = b \\<and> b \\<in> A \\<and> ord b z \\<or> cbelow_on_1 A ord z rel a b\n\ngoal (1 subgoal):\n 1. a = b \\<and> b \\<in> A \\<and> ord b z \\<or>\n    cbelow_on_1 A ord z rel a b \\<Longrightarrow>\n    cbelow_on_1 A ord z rel a c", "from \\<open>b \\<in> A\\<close> \\<open>c \\<in> A\\<close> \\<open>rel b c\\<close> \\<open>ord c z\\<close> cbelow_on_second_below[OF main]"], ["proof (chain)\npicking this:\n  b \\<in> A\n  c \\<in> A\n  rel b c\n  ord c z\n  ord b z", "have bc: \"relbelow_on A ord z rel b c\""], ["proof (prove)\nusing this:\n  b \\<in> A\n  c \\<in> A\n  rel b c\n  ord c z\n  ord b z\n\ngoal (1 subgoal):\n 1. relbelow_on A ord z rel b c", "by (simp add: relbelow_on_def)"], ["proof (state)\nthis:\n  relbelow_on A ord z rel b c\n\ngoal (1 subgoal):\n 1. a = b \\<and> b \\<in> A \\<and> ord b z \\<or>\n    cbelow_on_1 A ord z rel a b \\<Longrightarrow>\n    cbelow_on_1 A ord z rel a c", "from cases"], ["proof (chain)\npicking this:\n  a = b \\<and> b \\<in> A \\<and> ord b z \\<or> cbelow_on_1 A ord z rel a b", "show \"cbelow_on_1 A ord z rel a c\""], ["proof (prove)\nusing this:\n  a = b \\<and> b \\<in> A \\<and> ord b z \\<or> cbelow_on_1 A ord z rel a b\n\ngoal (1 subgoal):\n 1. cbelow_on_1 A ord z rel a c", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. a = b \\<and> b \\<in> A \\<and> ord b z \\<Longrightarrow>\n    cbelow_on_1 A ord z rel a c\n 2. cbelow_on_1 A ord z rel a b \\<Longrightarrow>\n    cbelow_on_1 A ord z rel a c", "assume \"a = b \\<and> b \\<in> A \\<and> ord b z\""], ["proof (state)\nthis:\n  a = b \\<and> b \\<in> A \\<and> ord b z\n\ngoal (2 subgoals):\n 1. a = b \\<and> b \\<in> A \\<and> ord b z \\<Longrightarrow>\n    cbelow_on_1 A ord z rel a c\n 2. cbelow_on_1 A ord z rel a b \\<Longrightarrow>\n    cbelow_on_1 A ord z rel a c", "from this bc"], ["proof (chain)\npicking this:\n  a = b \\<and> b \\<in> A \\<and> ord b z\n  relbelow_on A ord z rel b c", "have \"relbelow_on A ord z rel a c\""], ["proof (prove)\nusing this:\n  a = b \\<and> b \\<in> A \\<and> ord b z\n  relbelow_on A ord z rel b c\n\ngoal (1 subgoal):\n 1. relbelow_on A ord z rel a c", "by simp"], ["proof (state)\nthis:\n  relbelow_on A ord z rel a c\n\ngoal (2 subgoals):\n 1. a = b \\<and> b \\<in> A \\<and> ord b z \\<Longrightarrow>\n    cbelow_on_1 A ord z rel a c\n 2. cbelow_on_1 A ord z rel a b \\<Longrightarrow>\n    cbelow_on_1 A ord z rel a c", "thus ?thesis"], ["proof (prove)\nusing this:\n  relbelow_on A ord z rel a c\n\ngoal (1 subgoal):\n 1. cbelow_on_1 A ord z rel a c", "by (simp add: cbelow_on_1_def)"], ["proof (state)\nthis:\n  cbelow_on_1 A ord z rel a c\n\ngoal (1 subgoal):\n 1. cbelow_on_1 A ord z rel a b \\<Longrightarrow>\n    cbelow_on_1 A ord z rel a c", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. cbelow_on_1 A ord z rel a b \\<Longrightarrow>\n    cbelow_on_1 A ord z rel a c", "assume \"cbelow_on_1 A ord z rel a b\""], ["proof (state)\nthis:\n  cbelow_on_1 A ord z rel a b\n\ngoal (1 subgoal):\n 1. cbelow_on_1 A ord z rel a b \\<Longrightarrow>\n    cbelow_on_1 A ord z rel a c", "from this bc"], ["proof (chain)\npicking this:\n  cbelow_on_1 A ord z rel a b\n  relbelow_on A ord z rel b c", "show ?thesis"], ["proof (prove)\nusing this:\n  cbelow_on_1 A ord z rel a b\n  relbelow_on A ord z rel b c\n\ngoal (1 subgoal):\n 1. cbelow_on_1 A ord z rel a c", "unfolding cbelow_on_1_def"], ["proof (prove)\nusing this:\n  (relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a b\n  relbelow_on A ord z rel b c\n\ngoal (1 subgoal):\n 1. (relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a c", "by (rule tranclp.intros(2))"], ["proof (state)\nthis:\n  cbelow_on_1 A ord z rel a c\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  cbelow_on_1 A ord z rel a c\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  cbelow_on A ord z rel a c\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma cbelow_on_induct [consumes 1, case_names base step]:\n  assumes a: \"cbelow_on A ord z rel a b\"\n    and base: \"a \\<in> A \\<Longrightarrow> ord a z \\<Longrightarrow> P a\"\n    and ind: \"\\<And>b c. [| cbelow_on A ord z rel a b; rel b c; c \\<in> A; ord c z; P b |] ==> P c\"\n  shows \"P b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P b", "using a"], ["proof (prove)\nusing this:\n  cbelow_on A ord z rel a b\n\ngoal (1 subgoal):\n 1. P b", "unfolding cbelow_on_def"], ["proof (prove)\nusing this:\n  a = b \\<and> b \\<in> A \\<and> ord b z \\<or> cbelow_on_1 A ord z rel a b\n\ngoal (1 subgoal):\n 1. P b", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. a = b \\<and> b \\<in> A \\<and> ord b z \\<Longrightarrow> P b\n 2. cbelow_on_1 A ord z rel a b \\<Longrightarrow> P b", "assume \"a = b \\<and> b \\<in> A \\<and> ord b z\""], ["proof (state)\nthis:\n  a = b \\<and> b \\<in> A \\<and> ord b z\n\ngoal (2 subgoals):\n 1. a = b \\<and> b \\<in> A \\<and> ord b z \\<Longrightarrow> P b\n 2. cbelow_on_1 A ord z rel a b \\<Longrightarrow> P b", "from this base"], ["proof (chain)\npicking this:\n  a = b \\<and> b \\<in> A \\<and> ord b z\n  \\<lbrakk>a \\<in> A; ord a z\\<rbrakk> \\<Longrightarrow> P a", "show \"P b\""], ["proof (prove)\nusing this:\n  a = b \\<and> b \\<in> A \\<and> ord b z\n  \\<lbrakk>a \\<in> A; ord a z\\<rbrakk> \\<Longrightarrow> P a\n\ngoal (1 subgoal):\n 1. P b", "by simp"], ["proof (state)\nthis:\n  P b\n\ngoal (1 subgoal):\n 1. cbelow_on_1 A ord z rel a b \\<Longrightarrow> P b", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. cbelow_on_1 A ord z rel a b \\<Longrightarrow> P b", "assume \"cbelow_on_1 A ord z rel a b\""], ["proof (state)\nthis:\n  cbelow_on_1 A ord z rel a b\n\ngoal (1 subgoal):\n 1. cbelow_on_1 A ord z rel a b \\<Longrightarrow> P b", "thus \"P b\""], ["proof (prove)\nusing this:\n  cbelow_on_1 A ord z rel a b\n\ngoal (1 subgoal):\n 1. P b", "unfolding cbelow_on_1_def"], ["proof (prove)\nusing this:\n  (relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a b\n\ngoal (1 subgoal):\n 1. P b", "proof (induct x\\<equiv>a b)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>b. relbelow_on A ord z rel a b \\<Longrightarrow> P b\n 2. \\<And>b c.\n       \\<lbrakk>(relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a b; P b;\n        relbelow_on A ord z rel b c\\<rbrakk>\n       \\<Longrightarrow> P c", "fix b"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>b. relbelow_on A ord z rel a b \\<Longrightarrow> P b\n 2. \\<And>b c.\n       \\<lbrakk>(relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a b; P b;\n        relbelow_on A ord z rel b c\\<rbrakk>\n       \\<Longrightarrow> P c", "assume \"relbelow_on A ord z rel a b\""], ["proof (state)\nthis:\n  relbelow_on A ord z rel a b\n\ngoal (2 subgoals):\n 1. \\<And>b. relbelow_on A ord z rel a b \\<Longrightarrow> P b\n 2. \\<And>b c.\n       \\<lbrakk>(relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a b; P b;\n        relbelow_on A ord z rel b c\\<rbrakk>\n       \\<Longrightarrow> P c", "hence \"rel a b\" and \"a \\<in> A\" and \"b \\<in> A\" and \"ord a z\" and \"ord b z\""], ["proof (prove)\nusing this:\n  relbelow_on A ord z rel a b\n\ngoal (1 subgoal):\n 1. (rel a b &&& a \\<in> A) &&& b \\<in> A &&& ord a z &&& ord b z", "by (simp_all add: relbelow_on_def)"], ["proof (state)\nthis:\n  rel a b\n  a \\<in> A\n  b \\<in> A\n  ord a z\n  ord b z\n\ngoal (2 subgoals):\n 1. \\<And>b. relbelow_on A ord z rel a b \\<Longrightarrow> P b\n 2. \\<And>b c.\n       \\<lbrakk>(relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a b; P b;\n        relbelow_on A ord z rel b c\\<rbrakk>\n       \\<Longrightarrow> P c", "hence \"cbelow_on A ord z rel a a\""], ["proof (prove)\nusing this:\n  rel a b\n  a \\<in> A\n  b \\<in> A\n  ord a z\n  ord b z\n\ngoal (1 subgoal):\n 1. cbelow_on A ord z rel a a", "by (simp add: cbelow_on_def)"], ["proof (state)\nthis:\n  cbelow_on A ord z rel a a\n\ngoal (2 subgoals):\n 1. \\<And>b. relbelow_on A ord z rel a b \\<Longrightarrow> P b\n 2. \\<And>b c.\n       \\<lbrakk>(relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a b; P b;\n        relbelow_on A ord z rel b c\\<rbrakk>\n       \\<Longrightarrow> P c", "from this \\<open>rel a b\\<close> \\<open>b \\<in> A\\<close> \\<open>ord b z\\<close> base[OF \\<open>a \\<in> A\\<close> \\<open>ord a z\\<close>]"], ["proof (chain)\npicking this:\n  cbelow_on A ord z rel a a\n  rel a b\n  b \\<in> A\n  ord b z\n  P a", "show \"P b\""], ["proof (prove)\nusing this:\n  cbelow_on A ord z rel a a\n  rel a b\n  b \\<in> A\n  ord b z\n  P a\n\ngoal (1 subgoal):\n 1. P b", "by (rule ind)"], ["proof (state)\nthis:\n  P b\n\ngoal (1 subgoal):\n 1. \\<And>b c.\n       \\<lbrakk>(relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a b; P b;\n        relbelow_on A ord z rel b c\\<rbrakk>\n       \\<Longrightarrow> P c", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>b c.\n       \\<lbrakk>(relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a b; P b;\n        relbelow_on A ord z rel b c\\<rbrakk>\n       \\<Longrightarrow> P c", "fix b c"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>b c.\n       \\<lbrakk>(relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a b; P b;\n        relbelow_on A ord z rel b c\\<rbrakk>\n       \\<Longrightarrow> P c", "assume IH: \"(relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a b\" and \"P b\" and \"relbelow_on A ord z rel b c\""], ["proof (state)\nthis:\n  (relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a b\n  P b\n  relbelow_on A ord z rel b c\n\ngoal (1 subgoal):\n 1. \\<And>b c.\n       \\<lbrakk>(relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a b; P b;\n        relbelow_on A ord z rel b c\\<rbrakk>\n       \\<Longrightarrow> P c", "hence \"rel b c\" and \"b \\<in> A\" and \"c \\<in> A\" and \"ord b z\" and \"ord c z\""], ["proof (prove)\nusing this:\n  (relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a b\n  P b\n  relbelow_on A ord z rel b c\n\ngoal (1 subgoal):\n 1. (rel b c &&& b \\<in> A) &&& c \\<in> A &&& ord b z &&& ord c z", "by (simp_all add: relbelow_on_def)"], ["proof (state)\nthis:\n  rel b c\n  b \\<in> A\n  c \\<in> A\n  ord b z\n  ord c z\n\ngoal (1 subgoal):\n 1. \\<And>b c.\n       \\<lbrakk>(relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a b; P b;\n        relbelow_on A ord z rel b c\\<rbrakk>\n       \\<Longrightarrow> P c", "from IH"], ["proof (chain)\npicking this:\n  (relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a b", "have \"cbelow_on A ord z rel a b\""], ["proof (prove)\nusing this:\n  (relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a b\n\ngoal (1 subgoal):\n 1. cbelow_on A ord z rel a b", "by (simp add: cbelow_on_def cbelow_on_1_def)"], ["proof (state)\nthis:\n  cbelow_on A ord z rel a b\n\ngoal (1 subgoal):\n 1. \\<And>b c.\n       \\<lbrakk>(relbelow_on A ord z rel)\\<^sup>+\\<^sup>+ a b; P b;\n        relbelow_on A ord z rel b c\\<rbrakk>\n       \\<Longrightarrow> P c", "from this \\<open>rel b c\\<close> \\<open>c \\<in> A\\<close> \\<open>ord c z\\<close> \\<open>P b\\<close>"], ["proof (chain)\npicking this:\n  cbelow_on A ord z rel a b\n  rel b c\n  c \\<in> A\n  ord c z\n  P b", "show \"P c\""], ["proof (prove)\nusing this:\n  cbelow_on A ord z rel a b\n  rel b c\n  c \\<in> A\n  ord c z\n  P b\n\ngoal (1 subgoal):\n 1. P c", "by (rule ind)"], ["proof (state)\nthis:\n  P c\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P b\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma cbelow_on_symmetric:\n  assumes main: \"cbelow_on A ord z rel a b\" and \"symp rel\"\n  shows \"cbelow_on A ord z rel b a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cbelow_on A ord z rel b a", "using main"], ["proof (prove)\nusing this:\n  cbelow_on A ord z rel a b\n\ngoal (1 subgoal):\n 1. cbelow_on A ord z rel b a", "unfolding cbelow_on_def"], ["proof (prove)\nusing this:\n  a = b \\<and> b \\<in> A \\<and> ord b z \\<or> cbelow_on_1 A ord z rel a b\n\ngoal (1 subgoal):\n 1. b = a \\<and> a \\<in> A \\<and> ord a z \\<or> cbelow_on_1 A ord z rel b a", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. a = b \\<and> b \\<in> A \\<and> ord b z \\<Longrightarrow>\n    b = a \\<and> a \\<in> A \\<and> ord a z \\<or> cbelow_on_1 A ord z rel b a\n 2. cbelow_on_1 A ord z rel a b \\<Longrightarrow>\n    b = a \\<and> a \\<in> A \\<and> ord a z \\<or> cbelow_on_1 A ord z rel b a", "assume a1: \"a = b \\<and> b \\<in> A \\<and> ord b z\""], ["proof (state)\nthis:\n  a = b \\<and> b \\<in> A \\<and> ord b z\n\ngoal (2 subgoals):\n 1. a = b \\<and> b \\<in> A \\<and> ord b z \\<Longrightarrow>\n    b = a \\<and> a \\<in> A \\<and> ord a z \\<or> cbelow_on_1 A ord z rel b a\n 2. cbelow_on_1 A ord z rel a b \\<Longrightarrow>\n    b = a \\<and> a \\<in> A \\<and> ord a z \\<or> cbelow_on_1 A ord z rel b a", "show \"b = a \\<and> a \\<in> A \\<and> ord a z \\<or> cbelow_on_1 A ord z rel b a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b = a \\<and> a \\<in> A \\<and> ord a z \\<or> cbelow_on_1 A ord z rel b a", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. b = a \\<and> a \\<in> A \\<and> ord a z", "from a1"], ["proof (chain)\npicking this:\n  a = b \\<and> b \\<in> A \\<and> ord b z", "show \"b = a \\<and> a \\<in> A \\<and> ord a z\""], ["proof (prove)\nusing this:\n  a = b \\<and> b \\<in> A \\<and> ord b z\n\ngoal (1 subgoal):\n 1. b = a \\<and> a \\<in> A \\<and> ord a z", "by simp"], ["proof (state)\nthis:\n  b = a \\<and> a \\<in> A \\<and> ord a z\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  b = a \\<and> a \\<in> A \\<and> ord a z \\<or> cbelow_on_1 A ord z rel b a\n\ngoal (1 subgoal):\n 1. cbelow_on_1 A ord z rel a b \\<Longrightarrow>\n    b = a \\<and> a \\<in> A \\<and> ord a z \\<or> cbelow_on_1 A ord z rel b a", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. cbelow_on_1 A ord z rel a b \\<Longrightarrow>\n    b = a \\<and> a \\<in> A \\<and> ord a z \\<or> cbelow_on_1 A ord z rel b a", "assume a2: \"cbelow_on_1 A ord z rel a b\""], ["proof (state)\nthis:\n  cbelow_on_1 A ord z rel a b\n\ngoal (1 subgoal):\n 1. cbelow_on_1 A ord z rel a b \\<Longrightarrow>\n    b = a \\<and> a \\<in> A \\<and> ord a z \\<or> cbelow_on_1 A ord z rel b a", "show \"b = a \\<and> a \\<in> A \\<and> ord a z \\<or> cbelow_on_1 A ord z rel b a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b = a \\<and> a \\<in> A \\<and> ord a z \\<or> cbelow_on_1 A ord z rel b a", "proof (rule disjI2)"], ["proof (state)\ngoal (1 subgoal):\n 1. cbelow_on_1 A ord z rel b a", "from \\<open>symp rel\\<close>"], ["proof (chain)\npicking this:\n  symp rel", "have \"symp (relbelow_on A ord z rel)\""], ["proof (prove)\nusing this:\n  symp rel\n\ngoal (1 subgoal):\n 1. symp (relbelow_on A ord z rel)", "unfolding symp_def"], ["proof (prove)\nusing this:\n  \\<forall>x y. rel x y \\<longrightarrow> rel y x\n\ngoal (1 subgoal):\n 1. \\<forall>x y.\n       relbelow_on A ord z rel x y \\<longrightarrow>\n       relbelow_on A ord z rel y x", "proof (intro allI impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>\\<forall>x y. rel x y \\<longrightarrow> rel y x;\n        relbelow_on A ord z rel x y\\<rbrakk>\n       \\<Longrightarrow> relbelow_on A ord z rel y x", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>\\<forall>x y. rel x y \\<longrightarrow> rel y x;\n        relbelow_on A ord z rel x y\\<rbrakk>\n       \\<Longrightarrow> relbelow_on A ord z rel y x", "assume rel_sym: \"\\<forall>x y. rel x y \\<longrightarrow> rel y x\""], ["proof (state)\nthis:\n  \\<forall>x y. rel x y \\<longrightarrow> rel y x\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>\\<forall>x y. rel x y \\<longrightarrow> rel y x;\n        relbelow_on A ord z rel x y\\<rbrakk>\n       \\<Longrightarrow> relbelow_on A ord z rel y x", "assume \"relbelow_on A ord z rel x y\""], ["proof (state)\nthis:\n  relbelow_on A ord z rel x y\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>\\<forall>x y. rel x y \\<longrightarrow> rel y x;\n        relbelow_on A ord z rel x y\\<rbrakk>\n       \\<Longrightarrow> relbelow_on A ord z rel y x", "hence \"rel x y\" and \"x \\<in> A\" and \"y \\<in> A\" and \"ord x z\" and \"ord y z\""], ["proof (prove)\nusing this:\n  relbelow_on A ord z rel x y\n\ngoal (1 subgoal):\n 1. (rel x y &&& x \\<in> A) &&& y \\<in> A &&& ord x z &&& ord y z", "by (simp_all add: relbelow_on_def)"], ["proof (state)\nthis:\n  rel x y\n  x \\<in> A\n  y \\<in> A\n  ord x z\n  ord y z\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>\\<forall>x y. rel x y \\<longrightarrow> rel y x;\n        relbelow_on A ord z rel x y\\<rbrakk>\n       \\<Longrightarrow> relbelow_on A ord z rel y x", "show \"relbelow_on A ord z rel y x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. relbelow_on A ord z rel y x", "unfolding relbelow_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<in> A \\<and> x \\<in> A \\<and> rel y x \\<and> ord y z \\<and> ord x z", "proof (intro conjI)"], ["proof (state)\ngoal (5 subgoals):\n 1. y \\<in> A\n 2. x \\<in> A\n 3. rel y x\n 4. ord y z\n 5. ord x z", "from rel_sym \\<open>rel x y\\<close>"], ["proof (chain)\npicking this:\n  \\<forall>x y. rel x y \\<longrightarrow> rel y x\n  rel x y", "show \"rel y x\""], ["proof (prove)\nusing this:\n  \\<forall>x y. rel x y \\<longrightarrow> rel y x\n  rel x y\n\ngoal (1 subgoal):\n 1. rel y x", "by simp"], ["proof (state)\nthis:\n  rel y x\n\ngoal (4 subgoals):\n 1. y \\<in> A\n 2. x \\<in> A\n 3. ord y z\n 4. ord x z", "qed fact+"], ["proof (state)\nthis:\n  relbelow_on A ord z rel y x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  symp (relbelow_on A ord z rel)\n\ngoal (1 subgoal):\n 1. cbelow_on_1 A ord z rel b a", "from sym_trancl[to_pred, OF this] a2"], ["proof (chain)\npicking this:\n  symp (relbelow_on A ord z rel)\\<^sup>+\\<^sup>+\n  cbelow_on_1 A ord z rel a b", "show \"cbelow_on_1 A ord z rel b a\""], ["proof (prove)\nusing this:\n  symp (relbelow_on A ord z rel)\\<^sup>+\\<^sup>+\n  cbelow_on_1 A ord z rel a b\n\ngoal (1 subgoal):\n 1. cbelow_on_1 A ord z rel b a", "by (simp add: symp_def cbelow_on_1_def)"], ["proof (state)\nthis:\n  cbelow_on_1 A ord z rel b a\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  b = a \\<and> a \\<in> A \\<and> ord a z \\<or> cbelow_on_1 A ord z rel b a\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma cbelow_on_transitive:\n  assumes \"cbelow_on A ord z rel a b\" and \"cbelow_on A ord z rel b c\"\n  shows \"cbelow_on A ord z rel a c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cbelow_on A ord z rel a c", "proof (induct rule: cbelow_on_induct[OF \\<open>cbelow_on A ord z rel b c\\<close>])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>b \\<in> A; ord b z\\<rbrakk>\n    \\<Longrightarrow> cbelow_on A ord z rel a b\n 2. \\<And>ba c.\n       \\<lbrakk>cbelow_on A ord z rel b ba; rel ba c; c \\<in> A; ord c z;\n        cbelow_on A ord z rel a ba\\<rbrakk>\n       \\<Longrightarrow> cbelow_on A ord z rel a c", "from \\<open>cbelow_on A ord z rel a b\\<close>"], ["proof (chain)\npicking this:\n  cbelow_on A ord z rel a b", "show \"cbelow_on A ord z rel a b\""], ["proof (prove)\nusing this:\n  cbelow_on A ord z rel a b\n\ngoal (1 subgoal):\n 1. cbelow_on A ord z rel a b", "."], ["proof (state)\nthis:\n  cbelow_on A ord z rel a b\n\ngoal (1 subgoal):\n 1. \\<And>ba c.\n       \\<lbrakk>cbelow_on A ord z rel b ba; rel ba c; c \\<in> A; ord c z;\n        cbelow_on A ord z rel a ba\\<rbrakk>\n       \\<Longrightarrow> cbelow_on A ord z rel a c", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>ba c.\n       \\<lbrakk>cbelow_on A ord z rel b ba; rel ba c; c \\<in> A; ord c z;\n        cbelow_on A ord z rel a ba\\<rbrakk>\n       \\<Longrightarrow> cbelow_on A ord z rel a c", "fix c0 c"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>ba c.\n       \\<lbrakk>cbelow_on A ord z rel b ba; rel ba c; c \\<in> A; ord c z;\n        cbelow_on A ord z rel a ba\\<rbrakk>\n       \\<Longrightarrow> cbelow_on A ord z rel a c", "assume \"cbelow_on A ord z rel b c0\" and \"rel c0 c\" and \"c \\<in> A\" and \"ord c z\" and \"cbelow_on A ord z rel a c0\""], ["proof (state)\nthis:\n  cbelow_on A ord z rel b c0\n  rel c0 c\n  c \\<in> A\n  ord c z\n  cbelow_on A ord z rel a c0\n\ngoal (1 subgoal):\n 1. \\<And>ba c.\n       \\<lbrakk>cbelow_on A ord z rel b ba; rel ba c; c \\<in> A; ord c z;\n        cbelow_on A ord z rel a ba\\<rbrakk>\n       \\<Longrightarrow> cbelow_on A ord z rel a c", "show \"cbelow_on A ord z rel a c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cbelow_on A ord z rel a c", "by (rule, fact+)"], ["proof (state)\nthis:\n  cbelow_on A ord z rel a c\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma cbelow_on_mono:\n  assumes \"cbelow_on A ord z rel a b\" and \"A \\<subseteq> B\"\n  shows \"cbelow_on B ord z rel a b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cbelow_on B ord z rel a b", "using assms(1)"], ["proof (prove)\nusing this:\n  cbelow_on A ord z rel a b\n\ngoal (1 subgoal):\n 1. cbelow_on B ord z rel a b", "proof (induct rule: cbelow_on_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>a \\<in> A; ord a z\\<rbrakk>\n    \\<Longrightarrow> cbelow_on B ord z rel a a\n 2. \\<And>b c.\n       \\<lbrakk>cbelow_on A ord z rel a b; rel b c; c \\<in> A; ord c z;\n        cbelow_on B ord z rel a b\\<rbrakk>\n       \\<Longrightarrow> cbelow_on B ord z rel a c", "case base"], ["proof (state)\nthis:\n  a \\<in> A\n  ord a z\n\ngoal (2 subgoals):\n 1. \\<lbrakk>a \\<in> A; ord a z\\<rbrakk>\n    \\<Longrightarrow> cbelow_on B ord z rel a a\n 2. \\<And>b c.\n       \\<lbrakk>cbelow_on A ord z rel a b; rel b c; c \\<in> A; ord c z;\n        cbelow_on B ord z rel a b\\<rbrakk>\n       \\<Longrightarrow> cbelow_on B ord z rel a c", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. cbelow_on B ord z rel a a", "by (simp add: cbelow_on_def, intro disjI1 conjI, rule, fact+)"], ["proof (state)\nthis:\n  cbelow_on B ord z rel a a\n\ngoal (1 subgoal):\n 1. \\<And>b c.\n       \\<lbrakk>cbelow_on A ord z rel a b; rel b c; c \\<in> A; ord c z;\n        cbelow_on B ord z rel a b\\<rbrakk>\n       \\<Longrightarrow> cbelow_on B ord z rel a c", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>b c.\n       \\<lbrakk>cbelow_on A ord z rel a b; rel b c; c \\<in> A; ord c z;\n        cbelow_on B ord z rel a b\\<rbrakk>\n       \\<Longrightarrow> cbelow_on B ord z rel a c", "case (step b c)"], ["proof (state)\nthis:\n  cbelow_on A ord z rel a b\n  rel b c\n  c \\<in> A\n  ord c z\n  cbelow_on B ord z rel a b\n\ngoal (1 subgoal):\n 1. \\<And>b c.\n       \\<lbrakk>cbelow_on A ord z rel a b; rel b c; c \\<in> A; ord c z;\n        cbelow_on B ord z rel a b\\<rbrakk>\n       \\<Longrightarrow> cbelow_on B ord z rel a c", "from step(3) assms(2)"], ["proof (chain)\npicking this:\n  c \\<in> A\n  A \\<subseteq> B", "have \"c \\<in> B\""], ["proof (prove)\nusing this:\n  c \\<in> A\n  A \\<subseteq> B\n\ngoal (1 subgoal):\n 1. c \\<in> B", ".."], ["proof (state)\nthis:\n  c \\<in> B\n\ngoal (1 subgoal):\n 1. \\<And>b c.\n       \\<lbrakk>cbelow_on A ord z rel a b; rel b c; c \\<in> A; ord c z;\n        cbelow_on B ord z rel a b\\<rbrakk>\n       \\<Longrightarrow> cbelow_on B ord z rel a c", "from step(5) this step(2) step (4)"], ["proof (chain)\npicking this:\n  cbelow_on B ord z rel a b\n  c \\<in> B\n  rel b c\n  ord c z", "show ?case"], ["proof (prove)\nusing this:\n  cbelow_on B ord z rel a b\n  c \\<in> B\n  rel b c\n  ord c z\n\ngoal (1 subgoal):\n 1. cbelow_on B ord z rel a c", ".."], ["proof (state)\nthis:\n  cbelow_on B ord z rel a c\n\ngoal:\nNo subgoals!", "qed"], ["", "locale relation_order = relation +\n  fixes ord::\"'a \\<Rightarrow> 'a \\<Rightarrow> bool\"\n  fixes A::\"'a set\"\n  assumes trans: \"ord x y \\<Longrightarrow> ord y z \\<Longrightarrow> ord x z\"\n  assumes wf: \"wfp_on ord A\"\n  assumes refines: \"(\\<rightarrow>) \\<le> ord\\<inverse>\\<inverse>\"\nbegin"], ["", "lemma relation_refines:\n  assumes \"a \\<rightarrow> b\"\n  shows \"ord b a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ord b a", "using refines assms"], ["proof (prove)\nusing this:\n  (\\<rightarrow>) \\<le> ord\\<inverse>\\<inverse>\n  a \\<rightarrow> b\n\ngoal (1 subgoal):\n 1. ord b a", "by auto"], ["", "lemma relation_wf: \"wfp_on (\\<rightarrow>)\\<inverse>\\<inverse> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wfp_on (\\<rightarrow>)\\<inverse>\\<inverse> A", "using subset_refl _ wf"], ["proof (prove)\nusing this:\n  ?A \\<subseteq> ?A\n  PROP ?psi \\<Longrightarrow> PROP ?psi\n  wfp_on ord A\n\ngoal (1 subgoal):\n 1. wfp_on (\\<rightarrow>)\\<inverse>\\<inverse> A", "proof (rule wfp_on_mono)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> A; y \\<in> A;\n        (\\<rightarrow>)\\<inverse>\\<inverse> x y\\<rbrakk>\n       \\<Longrightarrow> ord x y", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> A; y \\<in> A;\n        (\\<rightarrow>)\\<inverse>\\<inverse> x y\\<rbrakk>\n       \\<Longrightarrow> ord x y", "assume \"(\\<rightarrow>)\\<inverse>\\<inverse> x y\""], ["proof (state)\nthis:\n  (\\<rightarrow>)\\<inverse>\\<inverse> x y\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> A; y \\<in> A;\n        (\\<rightarrow>)\\<inverse>\\<inverse> x y\\<rbrakk>\n       \\<Longrightarrow> ord x y", "hence \"y \\<rightarrow> x\""], ["proof (prove)\nusing this:\n  (\\<rightarrow>)\\<inverse>\\<inverse> x y\n\ngoal (1 subgoal):\n 1. y \\<rightarrow> x", "by simp"], ["proof (state)\nthis:\n  y \\<rightarrow> x\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> A; y \\<in> A;\n        (\\<rightarrow>)\\<inverse>\\<inverse> x y\\<rbrakk>\n       \\<Longrightarrow> ord x y", "with refines"], ["proof (chain)\npicking this:\n  (\\<rightarrow>) \\<le> ord\\<inverse>\\<inverse>\n  y \\<rightarrow> x", "have \"(ord)\\<inverse>\\<inverse> y x\""], ["proof (prove)\nusing this:\n  (\\<rightarrow>) \\<le> ord\\<inverse>\\<inverse>\n  y \\<rightarrow> x\n\ngoal (1 subgoal):\n 1. ord\\<inverse>\\<inverse> y x", ".."], ["proof (state)\nthis:\n  ord\\<inverse>\\<inverse> y x\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> A; y \\<in> A;\n        (\\<rightarrow>)\\<inverse>\\<inverse> x y\\<rbrakk>\n       \\<Longrightarrow> ord x y", "thus \"ord x y\""], ["proof (prove)\nusing this:\n  ord\\<inverse>\\<inverse> y x\n\ngoal (1 subgoal):\n 1. ord x y", "by simp"], ["proof (state)\nthis:\n  ord x y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma rtc_implies_cbelow_on:\n  assumes \"dw_closed A\" and main: \"a \\<rightarrow>\\<^sup>* b\" and \"a \\<in> A\" and \"ord a c\"\n  shows \"cbelow_on A ord c (\\<leftrightarrow>) a b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cbelow_on A ord c (\\<leftrightarrow>) a b", "using main"], ["proof (prove)\nusing this:\n  a \\<rightarrow>\\<^sup>* b\n\ngoal (1 subgoal):\n 1. cbelow_on A ord c (\\<leftrightarrow>) a b", "proof (induct rule: rtranclp_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. cbelow_on A ord c (\\<leftrightarrow>) a a\n 2. \\<And>y z.\n       \\<lbrakk>a \\<rightarrow>\\<^sup>* y; y \\<rightarrow> z;\n        cbelow_on A ord c (\\<leftrightarrow>) a y\\<rbrakk>\n       \\<Longrightarrow> cbelow_on A ord c (\\<leftrightarrow>) a z", "from assms(3) assms(4)"], ["proof (chain)\npicking this:\n  a \\<in> A\n  ord a c", "show \"cbelow_on A ord c (\\<leftrightarrow>) a a\""], ["proof (prove)\nusing this:\n  a \\<in> A\n  ord a c\n\ngoal (1 subgoal):\n 1. cbelow_on A ord c (\\<leftrightarrow>) a a", "by (simp add: cbelow_on_def)"], ["proof (state)\nthis:\n  cbelow_on A ord c (\\<leftrightarrow>) a a\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>a \\<rightarrow>\\<^sup>* y; y \\<rightarrow> z;\n        cbelow_on A ord c (\\<leftrightarrow>) a y\\<rbrakk>\n       \\<Longrightarrow> cbelow_on A ord c (\\<leftrightarrow>) a z", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>a \\<rightarrow>\\<^sup>* y; y \\<rightarrow> z;\n        cbelow_on A ord c (\\<leftrightarrow>) a y\\<rbrakk>\n       \\<Longrightarrow> cbelow_on A ord c (\\<leftrightarrow>) a z", "fix b0 b"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>a \\<rightarrow>\\<^sup>* y; y \\<rightarrow> z;\n        cbelow_on A ord c (\\<leftrightarrow>) a y\\<rbrakk>\n       \\<Longrightarrow> cbelow_on A ord c (\\<leftrightarrow>) a z", "assume \"a \\<rightarrow>\\<^sup>* b0\" and \"b0 \\<rightarrow> b\" and IH: \"cbelow_on A ord c (\\<leftrightarrow>) a b0\""], ["proof (state)\nthis:\n  a \\<rightarrow>\\<^sup>* b0\n  b0 \\<rightarrow> b\n  cbelow_on A ord c (\\<leftrightarrow>) a b0\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>a \\<rightarrow>\\<^sup>* y; y \\<rightarrow> z;\n        cbelow_on A ord c (\\<leftrightarrow>) a y\\<rbrakk>\n       \\<Longrightarrow> cbelow_on A ord c (\\<leftrightarrow>) a z", "from assms(1) assms(3) \\<open>a \\<rightarrow>\\<^sup>* b0\\<close>"], ["proof (chain)\npicking this:\n  dw_closed A\n  a \\<in> A\n  a \\<rightarrow>\\<^sup>* b0", "have \"b0 \\<in> A\""], ["proof (prove)\nusing this:\n  dw_closed A\n  a \\<in> A\n  a \\<rightarrow>\\<^sup>* b0\n\ngoal (1 subgoal):\n 1. b0 \\<in> A", "by (rule dw_closed_rtrancl)"], ["proof (state)\nthis:\n  b0 \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>a \\<rightarrow>\\<^sup>* y; y \\<rightarrow> z;\n        cbelow_on A ord c (\\<leftrightarrow>) a y\\<rbrakk>\n       \\<Longrightarrow> cbelow_on A ord c (\\<leftrightarrow>) a z", "from assms(1) this \\<open>b0 \\<rightarrow> b\\<close>"], ["proof (chain)\npicking this:\n  dw_closed A\n  b0 \\<in> A\n  b0 \\<rightarrow> b", "have \"b \\<in> A\""], ["proof (prove)\nusing this:\n  dw_closed A\n  b0 \\<in> A\n  b0 \\<rightarrow> b\n\ngoal (1 subgoal):\n 1. b \\<in> A", "by (rule dw_closedD)"], ["proof (state)\nthis:\n  b \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>a \\<rightarrow>\\<^sup>* y; y \\<rightarrow> z;\n        cbelow_on A ord c (\\<leftrightarrow>) a y\\<rbrakk>\n       \\<Longrightarrow> cbelow_on A ord c (\\<leftrightarrow>) a z", "show \"cbelow_on A ord c (\\<leftrightarrow>) a b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cbelow_on A ord c (\\<leftrightarrow>) a b", "proof"], ["proof (state)\ngoal (4 subgoals):\n 1. cbelow_on A ord c (\\<leftrightarrow>) a ?b\n 2. b \\<in> A\n 3. ?b \\<leftrightarrow> b\n 4. ord b c", "from \\<open>b0 \\<rightarrow> b\\<close>"], ["proof (chain)\npicking this:\n  b0 \\<rightarrow> b", "show \"b0 \\<leftrightarrow> b\""], ["proof (prove)\nusing this:\n  b0 \\<rightarrow> b\n\ngoal (1 subgoal):\n 1. b0 \\<leftrightarrow> b", "by simp"], ["proof (state)\nthis:\n  b0 \\<leftrightarrow> b\n\ngoal (3 subgoals):\n 1. cbelow_on A ord c (\\<leftrightarrow>) a b0\n 2. b \\<in> A\n 3. ord b c", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. cbelow_on A ord c (\\<leftrightarrow>) a b0\n 2. b \\<in> A\n 3. ord b c", "from relation_refines[OF \\<open>b0 \\<rightarrow> b\\<close>] cbelow_on_second_below[OF IH]"], ["proof (chain)\npicking this:\n  ord b b0\n  ord b0 c", "show \"ord b c\""], ["proof (prove)\nusing this:\n  ord b b0\n  ord b0 c\n\ngoal (1 subgoal):\n 1. ord b c", "by (rule trans)"], ["proof (state)\nthis:\n  ord b c\n\ngoal (2 subgoals):\n 1. cbelow_on A ord c (\\<leftrightarrow>) a b0\n 2. b \\<in> A", "qed fact+"], ["proof (state)\nthis:\n  cbelow_on A ord c (\\<leftrightarrow>) a b\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma cs_implies_cbelow_on:\n  assumes \"dw_closed A\" and \"a \\<down>\\<^sup>* b\" and \"a \\<in> A\" and \"b \\<in> A\" and \"ord a c\" and \"ord b c\"\n  shows \"cbelow_on A ord c (\\<leftrightarrow>) a b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cbelow_on A ord c (\\<leftrightarrow>) a b", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. cbelow_on A ord c (\\<leftrightarrow>) a b", "from \\<open>a \\<down>\\<^sup>* b\\<close>"], ["proof (chain)\npicking this:\n  a \\<down>\\<^sup>* b", "obtain s where \"a \\<rightarrow>\\<^sup>* s\" and \"b \\<rightarrow>\\<^sup>* s\""], ["proof (prove)\nusing this:\n  a \\<down>\\<^sup>* b\n\ngoal (1 subgoal):\n 1. (\\<And>s.\n        \\<lbrakk>a \\<rightarrow>\\<^sup>* s;\n         b \\<rightarrow>\\<^sup>* s\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding cs_def"], ["proof (prove)\nusing this:\n  \\<exists>s. a \\<rightarrow>\\<^sup>* s \\<and> b \\<rightarrow>\\<^sup>* s\n\ngoal (1 subgoal):\n 1. (\\<And>s.\n        \\<lbrakk>a \\<rightarrow>\\<^sup>* s;\n         b \\<rightarrow>\\<^sup>* s\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  a \\<rightarrow>\\<^sup>* s\n  b \\<rightarrow>\\<^sup>* s\n\ngoal (1 subgoal):\n 1. cbelow_on A ord c (\\<leftrightarrow>) a b", "have sym: \"symp (\\<leftrightarrow>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. symp (\\<leftrightarrow>)", "unfolding symp_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x y.\n       x \\<leftrightarrow> y \\<longrightarrow> y \\<leftrightarrow> x", "proof (intro allI, intro impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y. x \\<leftrightarrow> y \\<Longrightarrow> y \\<leftrightarrow> x", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y. x \\<leftrightarrow> y \\<Longrightarrow> y \\<leftrightarrow> x", "assume \"x \\<leftrightarrow> y\""], ["proof (state)\nthis:\n  x \\<leftrightarrow> y\n\ngoal (1 subgoal):\n 1. \\<And>x y. x \\<leftrightarrow> y \\<Longrightarrow> y \\<leftrightarrow> x", "thus \"y \\<leftrightarrow> x\""], ["proof (prove)\nusing this:\n  x \\<leftrightarrow> y\n\ngoal (1 subgoal):\n 1. y \\<leftrightarrow> x", "by auto"], ["proof (state)\nthis:\n  y \\<leftrightarrow> x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  symp (\\<leftrightarrow>)\n\ngoal (1 subgoal):\n 1. cbelow_on A ord c (\\<leftrightarrow>) a b", "from assms(1) \\<open>a \\<rightarrow>\\<^sup>* s\\<close> assms(3) assms(5)"], ["proof (chain)\npicking this:\n  dw_closed A\n  a \\<rightarrow>\\<^sup>* s\n  a \\<in> A\n  ord a c", "have \"cbelow_on A ord c (\\<leftrightarrow>) a s\""], ["proof (prove)\nusing this:\n  dw_closed A\n  a \\<rightarrow>\\<^sup>* s\n  a \\<in> A\n  ord a c\n\ngoal (1 subgoal):\n 1. cbelow_on A ord c (\\<leftrightarrow>) a s", "by (rule rtc_implies_cbelow_on)"], ["proof (state)\nthis:\n  cbelow_on A ord c (\\<leftrightarrow>) a s\n\ngoal (1 subgoal):\n 1. cbelow_on A ord c (\\<leftrightarrow>) a b", "also"], ["proof (state)\nthis:\n  cbelow_on A ord c (\\<leftrightarrow>) a s\n\ngoal (1 subgoal):\n 1. cbelow_on A ord c (\\<leftrightarrow>) a b", "have \"cbelow_on A ord c (\\<leftrightarrow>) s b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cbelow_on A ord c (\\<leftrightarrow>) s b", "proof (rule cbelow_on_symmetric)"], ["proof (state)\ngoal (2 subgoals):\n 1. cbelow_on A ord c (\\<leftrightarrow>) b s\n 2. symp (\\<leftrightarrow>)", "from assms(1) \\<open>b \\<rightarrow>\\<^sup>* s\\<close> assms(4) assms(6)"], ["proof (chain)\npicking this:\n  dw_closed A\n  b \\<rightarrow>\\<^sup>* s\n  b \\<in> A\n  ord b c", "show \"cbelow_on A ord c (\\<leftrightarrow>) b s\""], ["proof (prove)\nusing this:\n  dw_closed A\n  b \\<rightarrow>\\<^sup>* s\n  b \\<in> A\n  ord b c\n\ngoal (1 subgoal):\n 1. cbelow_on A ord c (\\<leftrightarrow>) b s", "by (rule rtc_implies_cbelow_on)"], ["proof (state)\nthis:\n  cbelow_on A ord c (\\<leftrightarrow>) b s\n\ngoal (1 subgoal):\n 1. symp (\\<leftrightarrow>)", "qed fact"], ["proof (state)\nthis:\n  cbelow_on A ord c (\\<leftrightarrow>) s b\n\ngoal (1 subgoal):\n 1. cbelow_on A ord c (\\<leftrightarrow>) a b", "finally(cbelow_on_transitive)"], ["proof (chain)\npicking this:\n  cbelow_on A ord c (\\<leftrightarrow>) a b", "show ?thesis"], ["proof (prove)\nusing this:\n  cbelow_on A ord c (\\<leftrightarrow>) a b\n\ngoal (1 subgoal):\n 1. cbelow_on A ord c (\\<leftrightarrow>) a b", "."], ["proof (state)\nthis:\n  cbelow_on A ord c (\\<leftrightarrow>) a b\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The generalized Newman lemma, taken from @{cite Winkler1983}:\\<close>"], ["", "lemma loc_connectivity_implies_confluence:\n  assumes \"is_loc_connective_on A ord (\\<rightarrow>)\" and \"dw_closed A\"\n  shows \"is_confluent_on A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_confluent_on A", "using assms(1)"], ["proof (prove)\nusing this:\n  is_loc_connective_on A ord (\\<rightarrow>)\n\ngoal (1 subgoal):\n 1. is_confluent_on A", "unfolding is_loc_connective_on_def is_confluent_on_def"], ["proof (prove)\nusing this:\n  \\<forall>a\\<in>A.\n     \\<forall>b1 b2.\n        a \\<rightarrow> b1 \\<and> a \\<rightarrow> b2 \\<longrightarrow>\n        cbelow_on A ord a (\\<leftrightarrow>) b1 b2\n\ngoal (1 subgoal):\n 1. \\<forall>a\\<in>A.\n       \\<forall>b1 b2.\n          a \\<rightarrow>\\<^sup>* b1 \\<and>\n          a \\<rightarrow>\\<^sup>* b2 \\<longrightarrow>\n          b1 \\<down>\\<^sup>* b2", "proof (intro ballI allI impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>\\<forall>a\\<in>A.\n                   \\<forall>b1 b2.\n                      a \\<rightarrow> b1 \\<and>\n                      a \\<rightarrow> b2 \\<longrightarrow>\n                      cbelow_on A ord a (\\<leftrightarrow>) b1 b2;\n        a \\<in> A;\n        a \\<rightarrow>\\<^sup>* b1 \\<and>\n        a \\<rightarrow>\\<^sup>* b2\\<rbrakk>\n       \\<Longrightarrow> b1 \\<down>\\<^sup>* b2", "fix z x y::'a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>\\<forall>a\\<in>A.\n                   \\<forall>b1 b2.\n                      a \\<rightarrow> b1 \\<and>\n                      a \\<rightarrow> b2 \\<longrightarrow>\n                      cbelow_on A ord a (\\<leftrightarrow>) b1 b2;\n        a \\<in> A;\n        a \\<rightarrow>\\<^sup>* b1 \\<and>\n        a \\<rightarrow>\\<^sup>* b2\\<rbrakk>\n       \\<Longrightarrow> b1 \\<down>\\<^sup>* b2", "assume \"\\<forall>a\\<in>A. \\<forall>b1 b2. a \\<rightarrow> b1 \\<and> a \\<rightarrow> b2 \\<longrightarrow> cbelow_on A ord a (\\<leftrightarrow>) b1 b2\""], ["proof (state)\nthis:\n  \\<forall>a\\<in>A.\n     \\<forall>b1 b2.\n        a \\<rightarrow> b1 \\<and> a \\<rightarrow> b2 \\<longrightarrow>\n        cbelow_on A ord a (\\<leftrightarrow>) b1 b2\n\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>\\<forall>a\\<in>A.\n                   \\<forall>b1 b2.\n                      a \\<rightarrow> b1 \\<and>\n                      a \\<rightarrow> b2 \\<longrightarrow>\n                      cbelow_on A ord a (\\<leftrightarrow>) b1 b2;\n        a \\<in> A;\n        a \\<rightarrow>\\<^sup>* b1 \\<and>\n        a \\<rightarrow>\\<^sup>* b2\\<rbrakk>\n       \\<Longrightarrow> b1 \\<down>\\<^sup>* b2", "hence A: \"\\<And>a b1 b2. a \\<in> A \\<Longrightarrow> a \\<rightarrow> b1 \\<Longrightarrow> a \\<rightarrow> b2 \\<Longrightarrow> cbelow_on A ord a (\\<leftrightarrow>) b1 b2\""], ["proof (prove)\nusing this:\n  \\<forall>a\\<in>A.\n     \\<forall>b1 b2.\n        a \\<rightarrow> b1 \\<and> a \\<rightarrow> b2 \\<longrightarrow>\n        cbelow_on A ord a (\\<leftrightarrow>) b1 b2\n\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>a \\<in> A; a \\<rightarrow> b1; a \\<rightarrow> b2\\<rbrakk>\n       \\<Longrightarrow> cbelow_on A ord a (\\<leftrightarrow>) b1 b2", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk>?a \\<in> A; ?a \\<rightarrow> ?b1.0;\n   ?a \\<rightarrow> ?b2.0\\<rbrakk>\n  \\<Longrightarrow> cbelow_on A ord ?a (\\<leftrightarrow>) ?b1.0 ?b2.0\n\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>\\<forall>a\\<in>A.\n                   \\<forall>b1 b2.\n                      a \\<rightarrow> b1 \\<and>\n                      a \\<rightarrow> b2 \\<longrightarrow>\n                      cbelow_on A ord a (\\<leftrightarrow>) b1 b2;\n        a \\<in> A;\n        a \\<rightarrow>\\<^sup>* b1 \\<and>\n        a \\<rightarrow>\\<^sup>* b2\\<rbrakk>\n       \\<Longrightarrow> b1 \\<down>\\<^sup>* b2", "assume \"z \\<in> A\" and \"z \\<rightarrow>\\<^sup>* x \\<and> z \\<rightarrow>\\<^sup>* y\""], ["proof (state)\nthis:\n  z \\<in> A\n  z \\<rightarrow>\\<^sup>* x \\<and> z \\<rightarrow>\\<^sup>* y\n\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>\\<forall>a\\<in>A.\n                   \\<forall>b1 b2.\n                      a \\<rightarrow> b1 \\<and>\n                      a \\<rightarrow> b2 \\<longrightarrow>\n                      cbelow_on A ord a (\\<leftrightarrow>) b1 b2;\n        a \\<in> A;\n        a \\<rightarrow>\\<^sup>* b1 \\<and>\n        a \\<rightarrow>\\<^sup>* b2\\<rbrakk>\n       \\<Longrightarrow> b1 \\<down>\\<^sup>* b2", "with wf"], ["proof (chain)\npicking this:\n  wfp_on ord A\n  z \\<in> A\n  z \\<rightarrow>\\<^sup>* x \\<and> z \\<rightarrow>\\<^sup>* y", "show \"x \\<down>\\<^sup>* y\""], ["proof (prove)\nusing this:\n  wfp_on ord A\n  z \\<in> A\n  z \\<rightarrow>\\<^sup>* x \\<and> z \\<rightarrow>\\<^sup>* y\n\ngoal (1 subgoal):\n 1. x \\<down>\\<^sup>* y", "proof (induct z arbitrary: x y rule: wfp_on_induct)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y x ya.\n       \\<lbrakk>y \\<in> A;\n        \\<And>x xa ya.\n           \\<lbrakk>x \\<in> A; ord x y;\n            x \\<rightarrow>\\<^sup>* xa \\<and>\n            x \\<rightarrow>\\<^sup>* ya\\<rbrakk>\n           \\<Longrightarrow> xa \\<down>\\<^sup>* ya;\n        y \\<rightarrow>\\<^sup>* x \\<and> y \\<rightarrow>\\<^sup>* ya\\<rbrakk>\n       \\<Longrightarrow> x \\<down>\\<^sup>* ya", "fix z x y::'a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y x ya.\n       \\<lbrakk>y \\<in> A;\n        \\<And>x xa ya.\n           \\<lbrakk>x \\<in> A; ord x y;\n            x \\<rightarrow>\\<^sup>* xa \\<and>\n            x \\<rightarrow>\\<^sup>* ya\\<rbrakk>\n           \\<Longrightarrow> xa \\<down>\\<^sup>* ya;\n        y \\<rightarrow>\\<^sup>* x \\<and> y \\<rightarrow>\\<^sup>* ya\\<rbrakk>\n       \\<Longrightarrow> x \\<down>\\<^sup>* ya", "assume IH: \"\\<And>z0 x0 y0. z0 \\<in> A \\<Longrightarrow> ord z0 z \\<Longrightarrow> z0 \\<rightarrow>\\<^sup>* x0 \\<and> z0 \\<rightarrow>\\<^sup>* y0 \\<Longrightarrow> x0 \\<down>\\<^sup>* y0\"\n      and \"z \\<rightarrow>\\<^sup>* x \\<and> z \\<rightarrow>\\<^sup>* y\""], ["proof (state)\nthis:\n  \\<lbrakk>?z0.0 \\<in> A; ord ?z0.0 z;\n   ?z0.0 \\<rightarrow>\\<^sup>* ?x0.0 \\<and>\n   ?z0.0 \\<rightarrow>\\<^sup>* ?y0.0\\<rbrakk>\n  \\<Longrightarrow> ?x0.0 \\<down>\\<^sup>* ?y0.0\n  z \\<rightarrow>\\<^sup>* x \\<and> z \\<rightarrow>\\<^sup>* y\n\ngoal (1 subgoal):\n 1. \\<And>y x ya.\n       \\<lbrakk>y \\<in> A;\n        \\<And>x xa ya.\n           \\<lbrakk>x \\<in> A; ord x y;\n            x \\<rightarrow>\\<^sup>* xa \\<and>\n            x \\<rightarrow>\\<^sup>* ya\\<rbrakk>\n           \\<Longrightarrow> xa \\<down>\\<^sup>* ya;\n        y \\<rightarrow>\\<^sup>* x \\<and> y \\<rightarrow>\\<^sup>* ya\\<rbrakk>\n       \\<Longrightarrow> x \\<down>\\<^sup>* ya", "hence \"z \\<rightarrow>\\<^sup>* x\" and \"z \\<rightarrow>\\<^sup>* y\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?z0.0 \\<in> A; ord ?z0.0 z;\n   ?z0.0 \\<rightarrow>\\<^sup>* ?x0.0 \\<and>\n   ?z0.0 \\<rightarrow>\\<^sup>* ?y0.0\\<rbrakk>\n  \\<Longrightarrow> ?x0.0 \\<down>\\<^sup>* ?y0.0\n  z \\<rightarrow>\\<^sup>* x \\<and> z \\<rightarrow>\\<^sup>* y\n\ngoal (1 subgoal):\n 1. z \\<rightarrow>\\<^sup>* x &&& z \\<rightarrow>\\<^sup>* y", "by auto"], ["proof (state)\nthis:\n  z \\<rightarrow>\\<^sup>* x\n  z \\<rightarrow>\\<^sup>* y\n\ngoal (1 subgoal):\n 1. \\<And>y x ya.\n       \\<lbrakk>y \\<in> A;\n        \\<And>x xa ya.\n           \\<lbrakk>x \\<in> A; ord x y;\n            x \\<rightarrow>\\<^sup>* xa \\<and>\n            x \\<rightarrow>\\<^sup>* ya\\<rbrakk>\n           \\<Longrightarrow> xa \\<down>\\<^sup>* ya;\n        y \\<rightarrow>\\<^sup>* x \\<and> y \\<rightarrow>\\<^sup>* ya\\<rbrakk>\n       \\<Longrightarrow> x \\<down>\\<^sup>* ya", "assume \"z \\<in> A\""], ["proof (state)\nthis:\n  z \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>y x ya.\n       \\<lbrakk>y \\<in> A;\n        \\<And>x xa ya.\n           \\<lbrakk>x \\<in> A; ord x y;\n            x \\<rightarrow>\\<^sup>* xa \\<and>\n            x \\<rightarrow>\\<^sup>* ya\\<rbrakk>\n           \\<Longrightarrow> xa \\<down>\\<^sup>* ya;\n        y \\<rightarrow>\\<^sup>* x \\<and> y \\<rightarrow>\\<^sup>* ya\\<rbrakk>\n       \\<Longrightarrow> x \\<down>\\<^sup>* ya", "from converse_rtranclpE[OF \\<open>z \\<rightarrow>\\<^sup>* x\\<close>]"], ["proof (chain)\npicking this:\n  \\<lbrakk>z = x \\<Longrightarrow> ?P;\n   \\<And>y.\n      \\<lbrakk>z \\<rightarrow> y; y \\<rightarrow>\\<^sup>* x\\<rbrakk>\n      \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P", "obtain x1 where \"x = z \\<or> (z \\<rightarrow> x1 \\<and> x1 \\<rightarrow>\\<^sup>* x)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>z = x \\<Longrightarrow> ?P;\n   \\<And>y.\n      \\<lbrakk>z \\<rightarrow> y; y \\<rightarrow>\\<^sup>* x\\<rbrakk>\n      \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n\ngoal (1 subgoal):\n 1. (\\<And>x1.\n        x = z \\<or>\n        z \\<rightarrow> x1 \\<and>\n        x1 \\<rightarrow>\\<^sup>* x \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x = z \\<or> z \\<rightarrow> x1 \\<and> x1 \\<rightarrow>\\<^sup>* x\n\ngoal (1 subgoal):\n 1. \\<And>y x ya.\n       \\<lbrakk>y \\<in> A;\n        \\<And>x xa ya.\n           \\<lbrakk>x \\<in> A; ord x y;\n            x \\<rightarrow>\\<^sup>* xa \\<and>\n            x \\<rightarrow>\\<^sup>* ya\\<rbrakk>\n           \\<Longrightarrow> xa \\<down>\\<^sup>* ya;\n        y \\<rightarrow>\\<^sup>* x \\<and> y \\<rightarrow>\\<^sup>* ya\\<rbrakk>\n       \\<Longrightarrow> x \\<down>\\<^sup>* ya", "thus \"x \\<down>\\<^sup>* y\""], ["proof (prove)\nusing this:\n  x = z \\<or> z \\<rightarrow> x1 \\<and> x1 \\<rightarrow>\\<^sup>* x\n\ngoal (1 subgoal):\n 1. x \\<down>\\<^sup>* y", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. x = z \\<Longrightarrow> x \\<down>\\<^sup>* y\n 2. z \\<rightarrow> x1 \\<and> x1 \\<rightarrow>\\<^sup>* x \\<Longrightarrow>\n    x \\<down>\\<^sup>* y", "assume \"x = z\""], ["proof (state)\nthis:\n  x = z\n\ngoal (2 subgoals):\n 1. x = z \\<Longrightarrow> x \\<down>\\<^sup>* y\n 2. z \\<rightarrow> x1 \\<and> x1 \\<rightarrow>\\<^sup>* x \\<Longrightarrow>\n    x \\<down>\\<^sup>* y", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<down>\\<^sup>* y", "unfolding cs_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>s. x \\<rightarrow>\\<^sup>* s \\<and> y \\<rightarrow>\\<^sup>* s", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<rightarrow>\\<^sup>* ?s \\<and> y \\<rightarrow>\\<^sup>* ?s", "from \\<open>x = z\\<close> \\<open>z \\<rightarrow>\\<^sup>* y\\<close>"], ["proof (chain)\npicking this:\n  x = z\n  z \\<rightarrow>\\<^sup>* y", "show \"x \\<rightarrow>\\<^sup>* y \\<and> y \\<rightarrow>\\<^sup>* y\""], ["proof (prove)\nusing this:\n  x = z\n  z \\<rightarrow>\\<^sup>* y\n\ngoal (1 subgoal):\n 1. x \\<rightarrow>\\<^sup>* y \\<and> y \\<rightarrow>\\<^sup>* y", "by simp"], ["proof (state)\nthis:\n  x \\<rightarrow>\\<^sup>* y \\<and> y \\<rightarrow>\\<^sup>* y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x \\<down>\\<^sup>* y\n\ngoal (1 subgoal):\n 1. z \\<rightarrow> x1 \\<and> x1 \\<rightarrow>\\<^sup>* x \\<Longrightarrow>\n    x \\<down>\\<^sup>* y", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. z \\<rightarrow> x1 \\<and> x1 \\<rightarrow>\\<^sup>* x \\<Longrightarrow>\n    x \\<down>\\<^sup>* y", "assume \"z \\<rightarrow> x1 \\<and> x1 \\<rightarrow>\\<^sup>* x\""], ["proof (state)\nthis:\n  z \\<rightarrow> x1 \\<and> x1 \\<rightarrow>\\<^sup>* x\n\ngoal (1 subgoal):\n 1. z \\<rightarrow> x1 \\<and> x1 \\<rightarrow>\\<^sup>* x \\<Longrightarrow>\n    x \\<down>\\<^sup>* y", "hence \"z \\<rightarrow> x1\" and \"x1 \\<rightarrow>\\<^sup>* x\""], ["proof (prove)\nusing this:\n  z \\<rightarrow> x1 \\<and> x1 \\<rightarrow>\\<^sup>* x\n\ngoal (1 subgoal):\n 1. z \\<rightarrow> x1 &&& x1 \\<rightarrow>\\<^sup>* x", "by auto"], ["proof (state)\nthis:\n  z \\<rightarrow> x1\n  x1 \\<rightarrow>\\<^sup>* x\n\ngoal (1 subgoal):\n 1. z \\<rightarrow> x1 \\<and> x1 \\<rightarrow>\\<^sup>* x \\<Longrightarrow>\n    x \\<down>\\<^sup>* y", "from assms(2) \\<open>z \\<in> A\\<close> this(1)"], ["proof (chain)\npicking this:\n  dw_closed A\n  z \\<in> A\n  z \\<rightarrow> x1", "have \"x1 \\<in> A\""], ["proof (prove)\nusing this:\n  dw_closed A\n  z \\<in> A\n  z \\<rightarrow> x1\n\ngoal (1 subgoal):\n 1. x1 \\<in> A", "by (rule dw_closedD)"], ["proof (state)\nthis:\n  x1 \\<in> A\n\ngoal (1 subgoal):\n 1. z \\<rightarrow> x1 \\<and> x1 \\<rightarrow>\\<^sup>* x \\<Longrightarrow>\n    x \\<down>\\<^sup>* y", "from converse_rtranclpE[OF \\<open>z \\<rightarrow>\\<^sup>* y\\<close>]"], ["proof (chain)\npicking this:\n  \\<lbrakk>z = y \\<Longrightarrow> ?P;\n   \\<And>y.\n      \\<lbrakk>z \\<rightarrow> y; y \\<rightarrow>\\<^sup>* y\\<rbrakk>\n      \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P", "obtain y1 where \"y = z \\<or> (z \\<rightarrow> y1 \\<and> y1 \\<rightarrow>\\<^sup>* y)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>z = y \\<Longrightarrow> ?P;\n   \\<And>y.\n      \\<lbrakk>z \\<rightarrow> y; y \\<rightarrow>\\<^sup>* y\\<rbrakk>\n      \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n\ngoal (1 subgoal):\n 1. (\\<And>y1.\n        y = z \\<or>\n        z \\<rightarrow> y1 \\<and>\n        y1 \\<rightarrow>\\<^sup>* y \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  y = z \\<or> z \\<rightarrow> y1 \\<and> y1 \\<rightarrow>\\<^sup>* y\n\ngoal (1 subgoal):\n 1. z \\<rightarrow> x1 \\<and> x1 \\<rightarrow>\\<^sup>* x \\<Longrightarrow>\n    x \\<down>\\<^sup>* y", "thus ?thesis"], ["proof (prove)\nusing this:\n  y = z \\<or> z \\<rightarrow> y1 \\<and> y1 \\<rightarrow>\\<^sup>* y\n\ngoal (1 subgoal):\n 1. x \\<down>\\<^sup>* y", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. y = z \\<Longrightarrow> x \\<down>\\<^sup>* y\n 2. z \\<rightarrow> y1 \\<and> y1 \\<rightarrow>\\<^sup>* y \\<Longrightarrow>\n    x \\<down>\\<^sup>* y", "assume \"y = z\""], ["proof (state)\nthis:\n  y = z\n\ngoal (2 subgoals):\n 1. y = z \\<Longrightarrow> x \\<down>\\<^sup>* y\n 2. z \\<rightarrow> y1 \\<and> y1 \\<rightarrow>\\<^sup>* y \\<Longrightarrow>\n    x \\<down>\\<^sup>* y", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<down>\\<^sup>* y", "unfolding cs_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>s. x \\<rightarrow>\\<^sup>* s \\<and> y \\<rightarrow>\\<^sup>* s", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<rightarrow>\\<^sup>* ?s \\<and> y \\<rightarrow>\\<^sup>* ?s", "from \\<open>y = z\\<close> \\<open>z \\<rightarrow>\\<^sup>* x\\<close>"], ["proof (chain)\npicking this:\n  y = z\n  z \\<rightarrow>\\<^sup>* x", "show \"x \\<rightarrow>\\<^sup>* x \\<and> y \\<rightarrow>\\<^sup>* x\""], ["proof (prove)\nusing this:\n  y = z\n  z \\<rightarrow>\\<^sup>* x\n\ngoal (1 subgoal):\n 1. x \\<rightarrow>\\<^sup>* x \\<and> y \\<rightarrow>\\<^sup>* x", "by simp"], ["proof (state)\nthis:\n  x \\<rightarrow>\\<^sup>* x \\<and> y \\<rightarrow>\\<^sup>* x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x \\<down>\\<^sup>* y\n\ngoal (1 subgoal):\n 1. z \\<rightarrow> y1 \\<and> y1 \\<rightarrow>\\<^sup>* y \\<Longrightarrow>\n    x \\<down>\\<^sup>* y", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. z \\<rightarrow> y1 \\<and> y1 \\<rightarrow>\\<^sup>* y \\<Longrightarrow>\n    x \\<down>\\<^sup>* y", "assume \"z \\<rightarrow> y1 \\<and> y1 \\<rightarrow>\\<^sup>* y\""], ["proof (state)\nthis:\n  z \\<rightarrow> y1 \\<and> y1 \\<rightarrow>\\<^sup>* y\n\ngoal (1 subgoal):\n 1. z \\<rightarrow> y1 \\<and> y1 \\<rightarrow>\\<^sup>* y \\<Longrightarrow>\n    x \\<down>\\<^sup>* y", "hence \"z \\<rightarrow> y1\" and \"y1 \\<rightarrow>\\<^sup>* y\""], ["proof (prove)\nusing this:\n  z \\<rightarrow> y1 \\<and> y1 \\<rightarrow>\\<^sup>* y\n\ngoal (1 subgoal):\n 1. z \\<rightarrow> y1 &&& y1 \\<rightarrow>\\<^sup>* y", "by auto"], ["proof (state)\nthis:\n  z \\<rightarrow> y1\n  y1 \\<rightarrow>\\<^sup>* y\n\ngoal (1 subgoal):\n 1. z \\<rightarrow> y1 \\<and> y1 \\<rightarrow>\\<^sup>* y \\<Longrightarrow>\n    x \\<down>\\<^sup>* y", "from assms(2) \\<open>z \\<in> A\\<close> this(1)"], ["proof (chain)\npicking this:\n  dw_closed A\n  z \\<in> A\n  z \\<rightarrow> y1", "have \"y1 \\<in> A\""], ["proof (prove)\nusing this:\n  dw_closed A\n  z \\<in> A\n  z \\<rightarrow> y1\n\ngoal (1 subgoal):\n 1. y1 \\<in> A", "by (rule dw_closedD)"], ["proof (state)\nthis:\n  y1 \\<in> A\n\ngoal (1 subgoal):\n 1. z \\<rightarrow> y1 \\<and> y1 \\<rightarrow>\\<^sup>* y \\<Longrightarrow>\n    x \\<down>\\<^sup>* y", "have \"x1 \\<down>\\<^sup>* y1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x1 \\<down>\\<^sup>* y1", "proof (induct rule: cbelow_on_induct[OF A[OF \\<open>z \\<in> A\\<close> \\<open>z \\<rightarrow> x1\\<close> \\<open>z \\<rightarrow> y1\\<close>]])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>x1 \\<in> A; ord x1 z\\<rbrakk>\n    \\<Longrightarrow> x1 \\<down>\\<^sup>* x1\n 2. \\<And>b c.\n       \\<lbrakk>cbelow_on A ord z (\\<leftrightarrow>) x1 b;\n        b \\<leftrightarrow> c; c \\<in> A; ord c z;\n        x1 \\<down>\\<^sup>* b\\<rbrakk>\n       \\<Longrightarrow> x1 \\<down>\\<^sup>* c", "from cs_refl[of x1]"], ["proof (chain)\npicking this:\n  x1 \\<down>\\<^sup>* x1", "show \"x1 \\<down>\\<^sup>* x1\""], ["proof (prove)\nusing this:\n  x1 \\<down>\\<^sup>* x1\n\ngoal (1 subgoal):\n 1. x1 \\<down>\\<^sup>* x1", "."], ["proof (state)\nthis:\n  x1 \\<down>\\<^sup>* x1\n\ngoal (1 subgoal):\n 1. \\<And>b c.\n       \\<lbrakk>cbelow_on A ord z (\\<leftrightarrow>) x1 b;\n        b \\<leftrightarrow> c; c \\<in> A; ord c z;\n        x1 \\<down>\\<^sup>* b\\<rbrakk>\n       \\<Longrightarrow> x1 \\<down>\\<^sup>* c", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>b c.\n       \\<lbrakk>cbelow_on A ord z (\\<leftrightarrow>) x1 b;\n        b \\<leftrightarrow> c; c \\<in> A; ord c z;\n        x1 \\<down>\\<^sup>* b\\<rbrakk>\n       \\<Longrightarrow> x1 \\<down>\\<^sup>* c", "fix b c"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>b c.\n       \\<lbrakk>cbelow_on A ord z (\\<leftrightarrow>) x1 b;\n        b \\<leftrightarrow> c; c \\<in> A; ord c z;\n        x1 \\<down>\\<^sup>* b\\<rbrakk>\n       \\<Longrightarrow> x1 \\<down>\\<^sup>* c", "assume \"cbelow_on A ord z (\\<leftrightarrow>) x1 b\" and \"b \\<leftrightarrow> c\" and \"c \\<in> A\" and \"ord c z\" and \"x1 \\<down>\\<^sup>* b\""], ["proof (state)\nthis:\n  cbelow_on A ord z (\\<leftrightarrow>) x1 b\n  b \\<leftrightarrow> c\n  c \\<in> A\n  ord c z\n  x1 \\<down>\\<^sup>* b\n\ngoal (1 subgoal):\n 1. \\<And>b c.\n       \\<lbrakk>cbelow_on A ord z (\\<leftrightarrow>) x1 b;\n        b \\<leftrightarrow> c; c \\<in> A; ord c z;\n        x1 \\<down>\\<^sup>* b\\<rbrakk>\n       \\<Longrightarrow> x1 \\<down>\\<^sup>* c", "from this(1)"], ["proof (chain)\npicking this:\n  cbelow_on A ord z (\\<leftrightarrow>) x1 b", "have \"b \\<in> A\""], ["proof (prove)\nusing this:\n  cbelow_on A ord z (\\<leftrightarrow>) x1 b\n\ngoal (1 subgoal):\n 1. b \\<in> A", "by (rule cbelow_on_second_in)"], ["proof (state)\nthis:\n  b \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>b c.\n       \\<lbrakk>cbelow_on A ord z (\\<leftrightarrow>) x1 b;\n        b \\<leftrightarrow> c; c \\<in> A; ord c z;\n        x1 \\<down>\\<^sup>* b\\<rbrakk>\n       \\<Longrightarrow> x1 \\<down>\\<^sup>* c", "from \\<open>x1 \\<down>\\<^sup>* b\\<close>"], ["proof (chain)\npicking this:\n  x1 \\<down>\\<^sup>* b", "obtain w1 where \"x1 \\<rightarrow>\\<^sup>* w1\" and \"b \\<rightarrow>\\<^sup>* w1\""], ["proof (prove)\nusing this:\n  x1 \\<down>\\<^sup>* b\n\ngoal (1 subgoal):\n 1. (\\<And>w1.\n        \\<lbrakk>x1 \\<rightarrow>\\<^sup>* w1;\n         b \\<rightarrow>\\<^sup>* w1\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding cs_def"], ["proof (prove)\nusing this:\n  \\<exists>s. x1 \\<rightarrow>\\<^sup>* s \\<and> b \\<rightarrow>\\<^sup>* s\n\ngoal (1 subgoal):\n 1. (\\<And>w1.\n        \\<lbrakk>x1 \\<rightarrow>\\<^sup>* w1;\n         b \\<rightarrow>\\<^sup>* w1\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x1 \\<rightarrow>\\<^sup>* w1\n  b \\<rightarrow>\\<^sup>* w1\n\ngoal (1 subgoal):\n 1. \\<And>b c.\n       \\<lbrakk>cbelow_on A ord z (\\<leftrightarrow>) x1 b;\n        b \\<leftrightarrow> c; c \\<in> A; ord c z;\n        x1 \\<down>\\<^sup>* b\\<rbrakk>\n       \\<Longrightarrow> x1 \\<down>\\<^sup>* c", "from \\<open>b \\<leftrightarrow> c\\<close>"], ["proof (chain)\npicking this:\n  b \\<leftrightarrow> c", "show \"x1 \\<down>\\<^sup>* c\""], ["proof (prove)\nusing this:\n  b \\<leftrightarrow> c\n\ngoal (1 subgoal):\n 1. x1 \\<down>\\<^sup>* c", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. b \\<rightarrow> c \\<Longrightarrow> x1 \\<down>\\<^sup>* c\n 2. c \\<rightarrow> b \\<Longrightarrow> x1 \\<down>\\<^sup>* c", "assume \"b \\<rightarrow> c\""], ["proof (state)\nthis:\n  b \\<rightarrow> c\n\ngoal (2 subgoals):\n 1. b \\<rightarrow> c \\<Longrightarrow> x1 \\<down>\\<^sup>* c\n 2. c \\<rightarrow> b \\<Longrightarrow> x1 \\<down>\\<^sup>* c", "hence \"b \\<rightarrow>\\<^sup>* c\""], ["proof (prove)\nusing this:\n  b \\<rightarrow> c\n\ngoal (1 subgoal):\n 1. b \\<rightarrow>\\<^sup>* c", "by simp"], ["proof (state)\nthis:\n  b \\<rightarrow>\\<^sup>* c\n\ngoal (2 subgoals):\n 1. b \\<rightarrow> c \\<Longrightarrow> x1 \\<down>\\<^sup>* c\n 2. c \\<rightarrow> b \\<Longrightarrow> x1 \\<down>\\<^sup>* c", "from \\<open>cbelow_on A ord z (\\<leftrightarrow>) x1 b\\<close>"], ["proof (chain)\npicking this:\n  cbelow_on A ord z (\\<leftrightarrow>) x1 b", "have \"ord b z\""], ["proof (prove)\nusing this:\n  cbelow_on A ord z (\\<leftrightarrow>) x1 b\n\ngoal (1 subgoal):\n 1. ord b z", "by (rule cbelow_on_second_below)"], ["proof (state)\nthis:\n  ord b z\n\ngoal (2 subgoals):\n 1. b \\<rightarrow> c \\<Longrightarrow> x1 \\<down>\\<^sup>* c\n 2. c \\<rightarrow> b \\<Longrightarrow> x1 \\<down>\\<^sup>* c", "from IH[OF \\<open>b \\<in> A\\<close> this] \\<open>b \\<rightarrow>\\<^sup>* c\\<close> \\<open>b \\<rightarrow>\\<^sup>* w1\\<close>"], ["proof (chain)\npicking this:\n  b \\<rightarrow>\\<^sup>* ?x0.0 \\<and>\n  b \\<rightarrow>\\<^sup>* ?y0.0 \\<Longrightarrow>\n  ?x0.0 \\<down>\\<^sup>* ?y0.0\n  b \\<rightarrow>\\<^sup>* c\n  b \\<rightarrow>\\<^sup>* w1", "have \"c \\<down>\\<^sup>* w1\""], ["proof (prove)\nusing this:\n  b \\<rightarrow>\\<^sup>* ?x0.0 \\<and>\n  b \\<rightarrow>\\<^sup>* ?y0.0 \\<Longrightarrow>\n  ?x0.0 \\<down>\\<^sup>* ?y0.0\n  b \\<rightarrow>\\<^sup>* c\n  b \\<rightarrow>\\<^sup>* w1\n\ngoal (1 subgoal):\n 1. c \\<down>\\<^sup>* w1", "by simp"], ["proof (state)\nthis:\n  c \\<down>\\<^sup>* w1\n\ngoal (2 subgoals):\n 1. b \\<rightarrow> c \\<Longrightarrow> x1 \\<down>\\<^sup>* c\n 2. c \\<rightarrow> b \\<Longrightarrow> x1 \\<down>\\<^sup>* c", "then"], ["proof (chain)\npicking this:\n  c \\<down>\\<^sup>* w1", "obtain w2 where \"c \\<rightarrow>\\<^sup>* w2\" and \"w1 \\<rightarrow>\\<^sup>* w2\""], ["proof (prove)\nusing this:\n  c \\<down>\\<^sup>* w1\n\ngoal (1 subgoal):\n 1. (\\<And>w2.\n        \\<lbrakk>c \\<rightarrow>\\<^sup>* w2;\n         w1 \\<rightarrow>\\<^sup>* w2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding cs_def"], ["proof (prove)\nusing this:\n  \\<exists>s. c \\<rightarrow>\\<^sup>* s \\<and> w1 \\<rightarrow>\\<^sup>* s\n\ngoal (1 subgoal):\n 1. (\\<And>w2.\n        \\<lbrakk>c \\<rightarrow>\\<^sup>* w2;\n         w1 \\<rightarrow>\\<^sup>* w2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  c \\<rightarrow>\\<^sup>* w2\n  w1 \\<rightarrow>\\<^sup>* w2\n\ngoal (2 subgoals):\n 1. b \\<rightarrow> c \\<Longrightarrow> x1 \\<down>\\<^sup>* c\n 2. c \\<rightarrow> b \\<Longrightarrow> x1 \\<down>\\<^sup>* c", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. x1 \\<down>\\<^sup>* c", "unfolding cs_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>s. x1 \\<rightarrow>\\<^sup>* s \\<and> c \\<rightarrow>\\<^sup>* s", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. x1 \\<rightarrow>\\<^sup>* ?s \\<and> c \\<rightarrow>\\<^sup>* ?s", "from rtranclp_trans[OF \\<open>x1 \\<rightarrow>\\<^sup>* w1\\<close> \\<open>w1 \\<rightarrow>\\<^sup>* w2\\<close>] \\<open>c \\<rightarrow>\\<^sup>* w2\\<close>"], ["proof (chain)\npicking this:\n  x1 \\<rightarrow>\\<^sup>* w2\n  c \\<rightarrow>\\<^sup>* w2", "show \"x1 \\<rightarrow>\\<^sup>* w2 \\<and> c \\<rightarrow>\\<^sup>* w2\""], ["proof (prove)\nusing this:\n  x1 \\<rightarrow>\\<^sup>* w2\n  c \\<rightarrow>\\<^sup>* w2\n\ngoal (1 subgoal):\n 1. x1 \\<rightarrow>\\<^sup>* w2 \\<and> c \\<rightarrow>\\<^sup>* w2", "by simp"], ["proof (state)\nthis:\n  x1 \\<rightarrow>\\<^sup>* w2 \\<and> c \\<rightarrow>\\<^sup>* w2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x1 \\<down>\\<^sup>* c\n\ngoal (1 subgoal):\n 1. c \\<rightarrow> b \\<Longrightarrow> x1 \\<down>\\<^sup>* c", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. c \\<rightarrow> b \\<Longrightarrow> x1 \\<down>\\<^sup>* c", "assume \"c \\<rightarrow> b\""], ["proof (state)\nthis:\n  c \\<rightarrow> b\n\ngoal (1 subgoal):\n 1. c \\<rightarrow> b \\<Longrightarrow> x1 \\<down>\\<^sup>* c", "hence \"c \\<rightarrow>\\<^sup>* b\""], ["proof (prove)\nusing this:\n  c \\<rightarrow> b\n\ngoal (1 subgoal):\n 1. c \\<rightarrow>\\<^sup>* b", "by simp"], ["proof (state)\nthis:\n  c \\<rightarrow>\\<^sup>* b\n\ngoal (1 subgoal):\n 1. c \\<rightarrow> b \\<Longrightarrow> x1 \\<down>\\<^sup>* c", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. x1 \\<down>\\<^sup>* c", "unfolding cs_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>s. x1 \\<rightarrow>\\<^sup>* s \\<and> c \\<rightarrow>\\<^sup>* s", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. x1 \\<rightarrow>\\<^sup>* ?s \\<and> c \\<rightarrow>\\<^sup>* ?s", "from rtranclp_trans[OF \\<open>c \\<rightarrow>\\<^sup>* b\\<close> \\<open>b \\<rightarrow>\\<^sup>* w1\\<close>] \\<open>x1 \\<rightarrow>\\<^sup>* w1\\<close>"], ["proof (chain)\npicking this:\n  c \\<rightarrow>\\<^sup>* w1\n  x1 \\<rightarrow>\\<^sup>* w1", "show \"x1 \\<rightarrow>\\<^sup>* w1 \\<and> c \\<rightarrow>\\<^sup>* w1\""], ["proof (prove)\nusing this:\n  c \\<rightarrow>\\<^sup>* w1\n  x1 \\<rightarrow>\\<^sup>* w1\n\ngoal (1 subgoal):\n 1. x1 \\<rightarrow>\\<^sup>* w1 \\<and> c \\<rightarrow>\\<^sup>* w1", "by simp"], ["proof (state)\nthis:\n  x1 \\<rightarrow>\\<^sup>* w1 \\<and> c \\<rightarrow>\\<^sup>* w1\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x1 \\<down>\\<^sup>* c\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x1 \\<down>\\<^sup>* c\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x1 \\<down>\\<^sup>* y1\n\ngoal (1 subgoal):\n 1. z \\<rightarrow> y1 \\<and> y1 \\<rightarrow>\\<^sup>* y \\<Longrightarrow>\n    x \\<down>\\<^sup>* y", "then"], ["proof (chain)\npicking this:\n  x1 \\<down>\\<^sup>* y1", "obtain w1 where \"x1 \\<rightarrow>\\<^sup>* w1\" and \"y1 \\<rightarrow>\\<^sup>* w1\""], ["proof (prove)\nusing this:\n  x1 \\<down>\\<^sup>* y1\n\ngoal (1 subgoal):\n 1. (\\<And>w1.\n        \\<lbrakk>x1 \\<rightarrow>\\<^sup>* w1;\n         y1 \\<rightarrow>\\<^sup>* w1\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding cs_def"], ["proof (prove)\nusing this:\n  \\<exists>s. x1 \\<rightarrow>\\<^sup>* s \\<and> y1 \\<rightarrow>\\<^sup>* s\n\ngoal (1 subgoal):\n 1. (\\<And>w1.\n        \\<lbrakk>x1 \\<rightarrow>\\<^sup>* w1;\n         y1 \\<rightarrow>\\<^sup>* w1\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x1 \\<rightarrow>\\<^sup>* w1\n  y1 \\<rightarrow>\\<^sup>* w1\n\ngoal (1 subgoal):\n 1. z \\<rightarrow> y1 \\<and> y1 \\<rightarrow>\\<^sup>* y \\<Longrightarrow>\n    x \\<down>\\<^sup>* y", "from IH[OF \\<open>x1 \\<in> A\\<close> relation_refines[OF \\<open>z \\<rightarrow> x1\\<close>]] \\<open>x1 \\<rightarrow>\\<^sup>* x\\<close> \\<open>x1 \\<rightarrow>\\<^sup>* w1\\<close>"], ["proof (chain)\npicking this:\n  x1 \\<rightarrow>\\<^sup>* ?x0.0 \\<and>\n  x1 \\<rightarrow>\\<^sup>* ?y0.0 \\<Longrightarrow>\n  ?x0.0 \\<down>\\<^sup>* ?y0.0\n  x1 \\<rightarrow>\\<^sup>* x\n  x1 \\<rightarrow>\\<^sup>* w1", "have \"x \\<down>\\<^sup>* w1\""], ["proof (prove)\nusing this:\n  x1 \\<rightarrow>\\<^sup>* ?x0.0 \\<and>\n  x1 \\<rightarrow>\\<^sup>* ?y0.0 \\<Longrightarrow>\n  ?x0.0 \\<down>\\<^sup>* ?y0.0\n  x1 \\<rightarrow>\\<^sup>* x\n  x1 \\<rightarrow>\\<^sup>* w1\n\ngoal (1 subgoal):\n 1. x \\<down>\\<^sup>* w1", "by simp"], ["proof (state)\nthis:\n  x \\<down>\\<^sup>* w1\n\ngoal (1 subgoal):\n 1. z \\<rightarrow> y1 \\<and> y1 \\<rightarrow>\\<^sup>* y \\<Longrightarrow>\n    x \\<down>\\<^sup>* y", "then"], ["proof (chain)\npicking this:\n  x \\<down>\\<^sup>* w1", "obtain v where \"x \\<rightarrow>\\<^sup>* v\" and \"w1 \\<rightarrow>\\<^sup>* v\""], ["proof (prove)\nusing this:\n  x \\<down>\\<^sup>* w1\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>x \\<rightarrow>\\<^sup>* v;\n         w1 \\<rightarrow>\\<^sup>* v\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding cs_def"], ["proof (prove)\nusing this:\n  \\<exists>s. x \\<rightarrow>\\<^sup>* s \\<and> w1 \\<rightarrow>\\<^sup>* s\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>x \\<rightarrow>\\<^sup>* v;\n         w1 \\<rightarrow>\\<^sup>* v\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x \\<rightarrow>\\<^sup>* v\n  w1 \\<rightarrow>\\<^sup>* v\n\ngoal (1 subgoal):\n 1. z \\<rightarrow> y1 \\<and> y1 \\<rightarrow>\\<^sup>* y \\<Longrightarrow>\n    x \\<down>\\<^sup>* y", "from IH[OF \\<open>y1 \\<in> A\\<close> relation_refines[OF \\<open>z \\<rightarrow> y1\\<close>]]\n             rtranclp_trans[OF \\<open>y1 \\<rightarrow>\\<^sup>* w1\\<close> \\<open>w1 \\<rightarrow>\\<^sup>* v\\<close>] \\<open>y1 \\<rightarrow>\\<^sup>* y\\<close>"], ["proof (chain)\npicking this:\n  y1 \\<rightarrow>\\<^sup>* ?x0.0 \\<and>\n  y1 \\<rightarrow>\\<^sup>* ?y0.0 \\<Longrightarrow>\n  ?x0.0 \\<down>\\<^sup>* ?y0.0\n  y1 \\<rightarrow>\\<^sup>* v\n  y1 \\<rightarrow>\\<^sup>* y", "have \"v \\<down>\\<^sup>* y\""], ["proof (prove)\nusing this:\n  y1 \\<rightarrow>\\<^sup>* ?x0.0 \\<and>\n  y1 \\<rightarrow>\\<^sup>* ?y0.0 \\<Longrightarrow>\n  ?x0.0 \\<down>\\<^sup>* ?y0.0\n  y1 \\<rightarrow>\\<^sup>* v\n  y1 \\<rightarrow>\\<^sup>* y\n\ngoal (1 subgoal):\n 1. v \\<down>\\<^sup>* y", "by simp"], ["proof (state)\nthis:\n  v \\<down>\\<^sup>* y\n\ngoal (1 subgoal):\n 1. z \\<rightarrow> y1 \\<and> y1 \\<rightarrow>\\<^sup>* y \\<Longrightarrow>\n    x \\<down>\\<^sup>* y", "then"], ["proof (chain)\npicking this:\n  v \\<down>\\<^sup>* y", "obtain w where \"v \\<rightarrow>\\<^sup>* w\" and \"y \\<rightarrow>\\<^sup>* w\""], ["proof (prove)\nusing this:\n  v \\<down>\\<^sup>* y\n\ngoal (1 subgoal):\n 1. (\\<And>w.\n        \\<lbrakk>v \\<rightarrow>\\<^sup>* w;\n         y \\<rightarrow>\\<^sup>* w\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding cs_def"], ["proof (prove)\nusing this:\n  \\<exists>s. v \\<rightarrow>\\<^sup>* s \\<and> y \\<rightarrow>\\<^sup>* s\n\ngoal (1 subgoal):\n 1. (\\<And>w.\n        \\<lbrakk>v \\<rightarrow>\\<^sup>* w;\n         y \\<rightarrow>\\<^sup>* w\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  v \\<rightarrow>\\<^sup>* w\n  y \\<rightarrow>\\<^sup>* w\n\ngoal (1 subgoal):\n 1. z \\<rightarrow> y1 \\<and> y1 \\<rightarrow>\\<^sup>* y \\<Longrightarrow>\n    x \\<down>\\<^sup>* y", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<down>\\<^sup>* y", "unfolding cs_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>s. x \\<rightarrow>\\<^sup>* s \\<and> y \\<rightarrow>\\<^sup>* s", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<rightarrow>\\<^sup>* ?s \\<and> y \\<rightarrow>\\<^sup>* ?s", "from rtranclp_trans[OF \\<open>x \\<rightarrow>\\<^sup>* v\\<close> \\<open>v \\<rightarrow>\\<^sup>* w\\<close>] \\<open>y \\<rightarrow>\\<^sup>* w\\<close>"], ["proof (chain)\npicking this:\n  x \\<rightarrow>\\<^sup>* w\n  y \\<rightarrow>\\<^sup>* w", "show \"x \\<rightarrow>\\<^sup>* w \\<and> y \\<rightarrow>\\<^sup>* w\""], ["proof (prove)\nusing this:\n  x \\<rightarrow>\\<^sup>* w\n  y \\<rightarrow>\\<^sup>* w\n\ngoal (1 subgoal):\n 1. x \\<rightarrow>\\<^sup>* w \\<and> y \\<rightarrow>\\<^sup>* w", "by simp"], ["proof (state)\nthis:\n  x \\<rightarrow>\\<^sup>* w \\<and> y \\<rightarrow>\\<^sup>* w\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x \\<down>\\<^sup>* y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x \\<down>\\<^sup>* y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x \\<down>\\<^sup>* y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x \\<down>\\<^sup>* y\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "(* relation_order *)"], ["", "theorem loc_connectivity_equiv_ChurchRosser:\n  assumes \"relation_order r ord UNIV\"\n  shows \"relation.is_ChurchRosser r = is_loc_connective_on UNIV ord r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. relation.is_ChurchRosser r = is_loc_connective_on UNIV ord r", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. relation.is_ChurchRosser r \\<Longrightarrow>\n    is_loc_connective_on UNIV ord r\n 2. is_loc_connective_on UNIV ord r \\<Longrightarrow>\n    relation.is_ChurchRosser r", "assume \"relation.is_ChurchRosser r\""], ["proof (state)\nthis:\n  relation.is_ChurchRosser r\n\ngoal (2 subgoals):\n 1. relation.is_ChurchRosser r \\<Longrightarrow>\n    is_loc_connective_on UNIV ord r\n 2. is_loc_connective_on UNIV ord r \\<Longrightarrow>\n    relation.is_ChurchRosser r", "show \"is_loc_connective_on UNIV ord r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_loc_connective_on UNIV ord r", "unfolding is_loc_connective_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>a\\<in>UNIV.\n       \\<forall>b1 b2.\n          r a b1 \\<and> r a b2 \\<longrightarrow>\n          cbelow_on UNIV ord a (\\<lambda>a b. r a b \\<or> r b a) b1 b2", "proof (intro ballI allI impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>a \\<in> UNIV; r a b1 \\<and> r a b2\\<rbrakk>\n       \\<Longrightarrow> cbelow_on UNIV ord a\n                          (\\<lambda>a b. r a b \\<or> r b a) b1 b2", "fix a b1 b2"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>a \\<in> UNIV; r a b1 \\<and> r a b2\\<rbrakk>\n       \\<Longrightarrow> cbelow_on UNIV ord a\n                          (\\<lambda>a b. r a b \\<or> r b a) b1 b2", "assume \"r a b1 \\<and> r a b2\""], ["proof (state)\nthis:\n  r a b1 \\<and> r a b2\n\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>a \\<in> UNIV; r a b1 \\<and> r a b2\\<rbrakk>\n       \\<Longrightarrow> cbelow_on UNIV ord a\n                          (\\<lambda>a b. r a b \\<or> r b a) b1 b2", "hence \"r a b1\" and \"r a b2\""], ["proof (prove)\nusing this:\n  r a b1 \\<and> r a b2\n\ngoal (1 subgoal):\n 1. r a b1 &&& r a b2", "by simp_all"], ["proof (state)\nthis:\n  r a b1\n  r a b2\n\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>a \\<in> UNIV; r a b1 \\<and> r a b2\\<rbrakk>\n       \\<Longrightarrow> cbelow_on UNIV ord a\n                          (\\<lambda>a b. r a b \\<or> r b a) b1 b2", "hence \"r\\<^sup>*\\<^sup>* a b1\" and \"r\\<^sup>*\\<^sup>* a b2\""], ["proof (prove)\nusing this:\n  r a b1\n  r a b2\n\ngoal (1 subgoal):\n 1. r\\<^sup>*\\<^sup>* a b1 &&& r\\<^sup>*\\<^sup>* a b2", "by simp_all"], ["proof (state)\nthis:\n  r\\<^sup>*\\<^sup>* a b1\n  r\\<^sup>*\\<^sup>* a b2\n\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>a \\<in> UNIV; r a b1 \\<and> r a b2\\<rbrakk>\n       \\<Longrightarrow> cbelow_on UNIV ord a\n                          (\\<lambda>a b. r a b \\<or> r b a) b1 b2", "from relation.rtc_implies_srtc[OF \\<open>r\\<^sup>*\\<^sup>* a b1\\<close>]"], ["proof (chain)\npicking this:\n  relation.srtc r a b1", "have \"relation.srtc r b1 a\""], ["proof (prove)\nusing this:\n  relation.srtc r a b1\n\ngoal (1 subgoal):\n 1. relation.srtc r b1 a", "by (rule relation.srtc_symmetric)"], ["proof (state)\nthis:\n  relation.srtc r b1 a\n\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>a \\<in> UNIV; r a b1 \\<and> r a b2\\<rbrakk>\n       \\<Longrightarrow> cbelow_on UNIV ord a\n                          (\\<lambda>a b. r a b \\<or> r b a) b1 b2", "from relation.srtc_transitive[OF this relation.rtc_implies_srtc[OF \\<open>r\\<^sup>*\\<^sup>* a b2\\<close>]]"], ["proof (chain)\npicking this:\n  relation.srtc r b1 b2", "have \"relation.srtc r b1 b2\""], ["proof (prove)\nusing this:\n  relation.srtc r b1 b2\n\ngoal (1 subgoal):\n 1. relation.srtc r b1 b2", "."], ["proof (state)\nthis:\n  relation.srtc r b1 b2\n\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>a \\<in> UNIV; r a b1 \\<and> r a b2\\<rbrakk>\n       \\<Longrightarrow> cbelow_on UNIV ord a\n                          (\\<lambda>a b. r a b \\<or> r b a) b1 b2", "with \\<open>relation.is_ChurchRosser r\\<close>"], ["proof (chain)\npicking this:\n  relation.is_ChurchRosser r\n  relation.srtc r b1 b2", "have \"relation.cs r b1 b2\""], ["proof (prove)\nusing this:\n  relation.is_ChurchRosser r\n  relation.srtc r b1 b2\n\ngoal (1 subgoal):\n 1. relation.cs r b1 b2", "by (simp add: relation.is_ChurchRosser_def)"], ["proof (state)\nthis:\n  relation.cs r b1 b2\n\ngoal (1 subgoal):\n 1. \\<And>a b1 b2.\n       \\<lbrakk>a \\<in> UNIV; r a b1 \\<and> r a b2\\<rbrakk>\n       \\<Longrightarrow> cbelow_on UNIV ord a\n                          (\\<lambda>a b. r a b \\<or> r b a) b1 b2", "from relation_order.cs_implies_cbelow_on[OF assms relation.dw_closed_UNIV this]\n      relation_order.relation_refines[OF assms, of a] \\<open>r a b1\\<close> \\<open>r a b2\\<close>"], ["proof (chain)\npicking this:\n  \\<lbrakk>b1 \\<in> UNIV; b2 \\<in> UNIV; ord b1 ?c; ord b2 ?c\\<rbrakk>\n  \\<Longrightarrow> cbelow_on UNIV ord ?c (\\<lambda>a b. r a b \\<or> r b a)\n                     b1 b2\n  r a ?b \\<Longrightarrow> ord ?b a\n  r a b1\n  r a b2", "show \"cbelow_on UNIV ord a (relation.sc r) b1 b2\""], ["proof (prove)\nusing this:\n  \\<lbrakk>b1 \\<in> UNIV; b2 \\<in> UNIV; ord b1 ?c; ord b2 ?c\\<rbrakk>\n  \\<Longrightarrow> cbelow_on UNIV ord ?c (\\<lambda>a b. r a b \\<or> r b a)\n                     b1 b2\n  r a ?b \\<Longrightarrow> ord ?b a\n  r a b1\n  r a b2\n\ngoal (1 subgoal):\n 1. cbelow_on UNIV ord a (\\<lambda>a b. r a b \\<or> r b a) b1 b2", "by simp"], ["proof (state)\nthis:\n  cbelow_on UNIV ord a (\\<lambda>a b. r a b \\<or> r b a) b1 b2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  is_loc_connective_on UNIV ord r\n\ngoal (1 subgoal):\n 1. is_loc_connective_on UNIV ord r \\<Longrightarrow>\n    relation.is_ChurchRosser r", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. is_loc_connective_on UNIV ord r \\<Longrightarrow>\n    relation.is_ChurchRosser r", "assume \"is_loc_connective_on UNIV ord r\""], ["proof (state)\nthis:\n  is_loc_connective_on UNIV ord r\n\ngoal (1 subgoal):\n 1. is_loc_connective_on UNIV ord r \\<Longrightarrow>\n    relation.is_ChurchRosser r", "from assms this relation.dw_closed_UNIV"], ["proof (chain)\npicking this:\n  relation_order r ord UNIV\n  is_loc_connective_on UNIV ord r\n  relation.dw_closed ?r UNIV", "have \"relation.is_confluent_on r UNIV\""], ["proof (prove)\nusing this:\n  relation_order r ord UNIV\n  is_loc_connective_on UNIV ord r\n  relation.dw_closed ?r UNIV\n\ngoal (1 subgoal):\n 1. relation.is_confluent_on r UNIV", "by (rule relation_order.loc_connectivity_implies_confluence)"], ["proof (state)\nthis:\n  relation.is_confluent_on r UNIV\n\ngoal (1 subgoal):\n 1. is_loc_connective_on UNIV ord r \\<Longrightarrow>\n    relation.is_ChurchRosser r", "hence \"relation.is_confluent r\""], ["proof (prove)\nusing this:\n  relation.is_confluent_on r UNIV\n\ngoal (1 subgoal):\n 1. relation.is_confluent r", "by (simp only: relation.is_confluent_def)"], ["proof (state)\nthis:\n  relation.is_confluent r\n\ngoal (1 subgoal):\n 1. is_loc_connective_on UNIV ord r \\<Longrightarrow>\n    relation.is_ChurchRosser r", "thus \"relation.is_ChurchRosser r\""], ["proof (prove)\nusing this:\n  relation.is_confluent r\n\ngoal (1 subgoal):\n 1. relation.is_ChurchRosser r", "by (simp add: relation.confluence_equiv_ChurchRosser)"], ["proof (state)\nthis:\n  relation.is_ChurchRosser r\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}