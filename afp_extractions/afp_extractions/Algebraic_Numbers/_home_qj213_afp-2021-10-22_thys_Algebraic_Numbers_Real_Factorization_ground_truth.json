{"file_name": "/home/qj213/afp-2021-10-22/thys/Algebraic_Numbers/Real_Factorization.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Algebraic_Numbers", "problem_names": ["lemma delete_cnj_length[termination_simp]: \"length (delete_cnj x i yjs) \\<le> length yjs\"", "lemma monic_imp_nonzero: \"monic x \\<Longrightarrow> x \\<noteq> 0\" for x :: \"'a :: semiring_1 poly\"", "lemma delete_cnj: assumes \n  \"order x (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) \\<ge> si\" \"si \\<noteq> 0\"\n  shows \"(\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ si * (\\<Prod>(x, i)\\<leftarrow>delete_cnj x si xis. [:- x, 1:] ^ Suc i)\"", "lemma factorize_real_poly: assumes fp: \"factorize_real_poly p = Some (c,qis)\"\n  shows \n  \"p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i)\" \n  \"(q,j) \\<in> set qis \\<Longrightarrow> irreducible q \\<and> j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1,2}\""], "translations": [["", "lemma delete_cnj_length[termination_simp]: \"length (delete_cnj x i yjs) \\<le> length yjs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. length (delete_cnj x i yjs) \\<le> length yjs", "by (induct x i yjs rule: delete_cnj.induct, auto)"], ["", "fun complex_roots_to_real_factorization :: \"(complex \\<times> nat) list \\<Rightarrow> (real poly \\<times> nat)list\" where\n  \"complex_roots_to_real_factorization [] = []\"\n| \"complex_roots_to_real_factorization ((x,i) # xs) = (if x \\<in> \\<real> then \n    ([:-(Re x),1:],Suc i) # complex_roots_to_real_factorization xs else \n    let xx = cnj x; ys = delete_cnj xx (Suc i) xs; p = map_poly Re ([:-x,1:] * [:-xx,1:])\n    in (p,Suc i) # complex_roots_to_real_factorization ys)\""], ["", "definition factorize_real_poly :: \"real poly \\<Rightarrow> (real \\<times> (real poly \\<times> nat) list) option\" where\n  \"factorize_real_poly p \\<equiv> map_option \n    (\\<lambda> (c,ris). (Re c, complex_roots_to_real_factorization ris)) \n    (factorize_complex_main (map_poly of_real p))\""], ["", "lemma monic_imp_nonzero: \"monic x \\<Longrightarrow> x \\<noteq> 0\" for x :: \"'a :: semiring_1 poly\""], ["proof (prove)\ngoal (1 subgoal):\n 1. monic x \\<Longrightarrow> x \\<noteq> 0", "by auto"], ["", "lemma delete_cnj: assumes \n  \"order x (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) \\<ge> si\" \"si \\<noteq> 0\"\n  shows \"(\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ si * (\\<Prod>(x, i)\\<leftarrow>delete_cnj x si xis. [:- x, 1:] ^ Suc i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ si *\n    (\\<Prod>(x, i)\\<leftarrow>delete_cnj x si xis. [:- x, 1:] ^ Suc i)", "using assms"], ["proof (prove)\nusing this:\n  si \\<le> order x (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)\n  si \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ si *\n    (\\<Prod>(x, i)\\<leftarrow>delete_cnj x si xis. [:- x, 1:] ^ Suc i)", "proof (induct x si xis rule: delete_cnj.induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x i y j yjs.\n       \\<lbrakk>\\<lbrakk>x = y; Suc j \\<noteq> i; \\<not> i < Suc j;\n                 i - Suc j\n                 \\<le> order x\n                        (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n                 i - Suc j \\<noteq> 0\\<rbrakk>\n                \\<Longrightarrow> (\\<Prod>(x,\ni)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                                  [:- x, 1:] ^ (i - Suc j) *\n                                  (\\<Prod>(x,\ni)\\<leftarrow>delete_cnj x (i - Suc j) yjs. [:- x, 1:] ^ Suc i);\n        \\<lbrakk>x \\<noteq> y;\n         i \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n         i \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> (\\<Prod>(x,\n                              i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                          [:- x, 1:] ^ i *\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>delete_cnj x i\n       yjs. [:- x, 1:] ^ Suc i);\n        i \\<le> order x\n                 (\\<Prod>(x,\n                     i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i);\n        i \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x,\n                             i)\\<leftarrow>(y, j) #\n     yjs. [:- x, 1:] ^ Suc i) =\n                         [:- x, 1:] ^ i *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj x i\n      ((y, j) # yjs). [:- x, 1:] ^ Suc i)\n 2. \\<And>uu_ uv_.\n       \\<lbrakk>uv_\n                \\<le> order uu_\n                       (\\<Prod>(x, i)\\<leftarrow>[]. [:- x, 1:] ^ Suc i);\n        uv_ \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x, i)\\<leftarrow>[]. [:- x, 1:] ^ Suc i) =\n                         [:- uu_, 1:] ^ uv_ *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj uu_ uv_\n      []. [:- x, 1:] ^ Suc i)", "case (2 x si)"], ["proof (state)\nthis:\n  si \\<le> order x\n            (\\<Prod>a\\<leftarrow>[]. case a of\n                                     (x, i) \\<Rightarrow>\n [:- x, 1:] ^ Suc i)\n  si \\<noteq> 0\n\ngoal (2 subgoals):\n 1. \\<And>x i y j yjs.\n       \\<lbrakk>\\<lbrakk>x = y; Suc j \\<noteq> i; \\<not> i < Suc j;\n                 i - Suc j\n                 \\<le> order x\n                        (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n                 i - Suc j \\<noteq> 0\\<rbrakk>\n                \\<Longrightarrow> (\\<Prod>(x,\ni)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                                  [:- x, 1:] ^ (i - Suc j) *\n                                  (\\<Prod>(x,\ni)\\<leftarrow>delete_cnj x (i - Suc j) yjs. [:- x, 1:] ^ Suc i);\n        \\<lbrakk>x \\<noteq> y;\n         i \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n         i \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> (\\<Prod>(x,\n                              i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                          [:- x, 1:] ^ i *\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>delete_cnj x i\n       yjs. [:- x, 1:] ^ Suc i);\n        i \\<le> order x\n                 (\\<Prod>(x,\n                     i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i);\n        i \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x,\n                             i)\\<leftarrow>(y, j) #\n     yjs. [:- x, 1:] ^ Suc i) =\n                         [:- x, 1:] ^ i *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj x i\n      ((y, j) # yjs). [:- x, 1:] ^ Suc i)\n 2. \\<And>uu_ uv_.\n       \\<lbrakk>uv_\n                \\<le> order uu_\n                       (\\<Prod>(x, i)\\<leftarrow>[]. [:- x, 1:] ^ Suc i);\n        uv_ \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x, i)\\<leftarrow>[]. [:- x, 1:] ^ Suc i) =\n                         [:- uu_, 1:] ^ uv_ *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj uu_ uv_\n      []. [:- x, 1:] ^ Suc i)", "hence \"order x 1 \\<ge> 1\""], ["proof (prove)\nusing this:\n  si \\<le> order x\n            (\\<Prod>a\\<leftarrow>[]. case a of\n                                     (x, i) \\<Rightarrow>\n [:- x, 1:] ^ Suc i)\n  si \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 1 \\<le> order x 1", "by auto"], ["proof (state)\nthis:\n  1 \\<le> order x 1\n\ngoal (2 subgoals):\n 1. \\<And>x i y j yjs.\n       \\<lbrakk>\\<lbrakk>x = y; Suc j \\<noteq> i; \\<not> i < Suc j;\n                 i - Suc j\n                 \\<le> order x\n                        (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n                 i - Suc j \\<noteq> 0\\<rbrakk>\n                \\<Longrightarrow> (\\<Prod>(x,\ni)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                                  [:- x, 1:] ^ (i - Suc j) *\n                                  (\\<Prod>(x,\ni)\\<leftarrow>delete_cnj x (i - Suc j) yjs. [:- x, 1:] ^ Suc i);\n        \\<lbrakk>x \\<noteq> y;\n         i \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n         i \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> (\\<Prod>(x,\n                              i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                          [:- x, 1:] ^ i *\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>delete_cnj x i\n       yjs. [:- x, 1:] ^ Suc i);\n        i \\<le> order x\n                 (\\<Prod>(x,\n                     i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i);\n        i \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x,\n                             i)\\<leftarrow>(y, j) #\n     yjs. [:- x, 1:] ^ Suc i) =\n                         [:- x, 1:] ^ i *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj x i\n      ((y, j) # yjs). [:- x, 1:] ^ Suc i)\n 2. \\<And>uu_ uv_.\n       \\<lbrakk>uv_\n                \\<le> order uu_\n                       (\\<Prod>(x, i)\\<leftarrow>[]. [:- x, 1:] ^ Suc i);\n        uv_ \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x, i)\\<leftarrow>[]. [:- x, 1:] ^ Suc i) =\n                         [:- uu_, 1:] ^ uv_ *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj uu_ uv_\n      []. [:- x, 1:] ^ Suc i)", "hence \"[:-x,1:]^1 dvd 1\""], ["proof (prove)\nusing this:\n  1 \\<le> order x 1\n\ngoal (1 subgoal):\n 1. is_unit ([:- x, 1:] ^ 1)", "unfolding order_divides"], ["proof (prove)\nusing this:\n  1 \\<le> order x 1\n\ngoal (1 subgoal):\n 1. 1 = 0 \\<or> 1 \\<le> order x 1", "by simp"], ["proof (state)\nthis:\n  is_unit ([:- x, 1:] ^ 1)\n\ngoal (2 subgoals):\n 1. \\<And>x i y j yjs.\n       \\<lbrakk>\\<lbrakk>x = y; Suc j \\<noteq> i; \\<not> i < Suc j;\n                 i - Suc j\n                 \\<le> order x\n                        (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n                 i - Suc j \\<noteq> 0\\<rbrakk>\n                \\<Longrightarrow> (\\<Prod>(x,\ni)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                                  [:- x, 1:] ^ (i - Suc j) *\n                                  (\\<Prod>(x,\ni)\\<leftarrow>delete_cnj x (i - Suc j) yjs. [:- x, 1:] ^ Suc i);\n        \\<lbrakk>x \\<noteq> y;\n         i \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n         i \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> (\\<Prod>(x,\n                              i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                          [:- x, 1:] ^ i *\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>delete_cnj x i\n       yjs. [:- x, 1:] ^ Suc i);\n        i \\<le> order x\n                 (\\<Prod>(x,\n                     i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i);\n        i \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x,\n                             i)\\<leftarrow>(y, j) #\n     yjs. [:- x, 1:] ^ Suc i) =\n                         [:- x, 1:] ^ i *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj x i\n      ((y, j) # yjs). [:- x, 1:] ^ Suc i)\n 2. \\<And>uu_ uv_.\n       \\<lbrakk>uv_\n                \\<le> order uu_\n                       (\\<Prod>(x, i)\\<leftarrow>[]. [:- x, 1:] ^ Suc i);\n        uv_ \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x, i)\\<leftarrow>[]. [:- x, 1:] ^ Suc i) =\n                         [:- uu_, 1:] ^ uv_ *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj uu_ uv_\n      []. [:- x, 1:] ^ Suc i)", "from power_le_dvd[OF this, of 1] \\<open>si \\<noteq> 0\\<close>"], ["proof (chain)\npicking this:\n  1 \\<le> 1 \\<Longrightarrow> is_unit ([:- x, 1:] ^ 1)\n  si \\<noteq> 0", "have \"[:- x, 1:] dvd 1\""], ["proof (prove)\nusing this:\n  1 \\<le> 1 \\<Longrightarrow> is_unit ([:- x, 1:] ^ 1)\n  si \\<noteq> 0\n\ngoal (1 subgoal):\n 1. is_unit [:- x, 1:]", "by simp"], ["proof (state)\nthis:\n  is_unit [:- x, 1:]\n\ngoal (2 subgoals):\n 1. \\<And>x i y j yjs.\n       \\<lbrakk>\\<lbrakk>x = y; Suc j \\<noteq> i; \\<not> i < Suc j;\n                 i - Suc j\n                 \\<le> order x\n                        (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n                 i - Suc j \\<noteq> 0\\<rbrakk>\n                \\<Longrightarrow> (\\<Prod>(x,\ni)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                                  [:- x, 1:] ^ (i - Suc j) *\n                                  (\\<Prod>(x,\ni)\\<leftarrow>delete_cnj x (i - Suc j) yjs. [:- x, 1:] ^ Suc i);\n        \\<lbrakk>x \\<noteq> y;\n         i \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n         i \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> (\\<Prod>(x,\n                              i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                          [:- x, 1:] ^ i *\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>delete_cnj x i\n       yjs. [:- x, 1:] ^ Suc i);\n        i \\<le> order x\n                 (\\<Prod>(x,\n                     i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i);\n        i \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x,\n                             i)\\<leftarrow>(y, j) #\n     yjs. [:- x, 1:] ^ Suc i) =\n                         [:- x, 1:] ^ i *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj x i\n      ((y, j) # yjs). [:- x, 1:] ^ Suc i)\n 2. \\<And>uu_ uv_.\n       \\<lbrakk>uv_\n                \\<le> order uu_\n                       (\\<Prod>(x, i)\\<leftarrow>[]. [:- x, 1:] ^ Suc i);\n        uv_ \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x, i)\\<leftarrow>[]. [:- x, 1:] ^ Suc i) =\n                         [:- uu_, 1:] ^ uv_ *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj uu_ uv_\n      []. [:- x, 1:] ^ Suc i)", "from divides_degree[OF this]"], ["proof (chain)\npicking this:\n  degree [:- x, 1:] \\<le> degree 1 \\<or> 1 = 0", "show ?case"], ["proof (prove)\nusing this:\n  degree [:- x, 1:] \\<le> degree 1 \\<or> 1 = 0\n\ngoal (1 subgoal):\n 1. (\\<Prod>a\\<leftarrow>[]. case a of\n                             (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ si *\n    (\\<Prod>a\\<leftarrow>delete_cnj x si\n                          []. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "by auto"], ["proof (state)\nthis:\n  (\\<Prod>a\\<leftarrow>[]. case a of\n                           (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  [:- x, 1:] ^ si *\n  (\\<Prod>a\\<leftarrow>delete_cnj x si\n                        []. case a of\n                            (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. \\<And>x i y j yjs.\n       \\<lbrakk>\\<lbrakk>x = y; Suc j \\<noteq> i; \\<not> i < Suc j;\n                 i - Suc j\n                 \\<le> order x\n                        (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n                 i - Suc j \\<noteq> 0\\<rbrakk>\n                \\<Longrightarrow> (\\<Prod>(x,\ni)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                                  [:- x, 1:] ^ (i - Suc j) *\n                                  (\\<Prod>(x,\ni)\\<leftarrow>delete_cnj x (i - Suc j) yjs. [:- x, 1:] ^ Suc i);\n        \\<lbrakk>x \\<noteq> y;\n         i \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n         i \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> (\\<Prod>(x,\n                              i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                          [:- x, 1:] ^ i *\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>delete_cnj x i\n       yjs. [:- x, 1:] ^ Suc i);\n        i \\<le> order x\n                 (\\<Prod>(x,\n                     i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i);\n        i \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x,\n                             i)\\<leftarrow>(y, j) #\n     yjs. [:- x, 1:] ^ Suc i) =\n                         [:- x, 1:] ^ i *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj x i\n      ((y, j) # yjs). [:- x, 1:] ^ Suc i)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x i y j yjs.\n       \\<lbrakk>\\<lbrakk>x = y; Suc j \\<noteq> i; \\<not> i < Suc j;\n                 i - Suc j\n                 \\<le> order x\n                        (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n                 i - Suc j \\<noteq> 0\\<rbrakk>\n                \\<Longrightarrow> (\\<Prod>(x,\ni)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                                  [:- x, 1:] ^ (i - Suc j) *\n                                  (\\<Prod>(x,\ni)\\<leftarrow>delete_cnj x (i - Suc j) yjs. [:- x, 1:] ^ Suc i);\n        \\<lbrakk>x \\<noteq> y;\n         i \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n         i \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> (\\<Prod>(x,\n                              i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                          [:- x, 1:] ^ i *\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>delete_cnj x i\n       yjs. [:- x, 1:] ^ Suc i);\n        i \\<le> order x\n                 (\\<Prod>(x,\n                     i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i);\n        i \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x,\n                             i)\\<leftarrow>(y, j) #\n     yjs. [:- x, 1:] ^ Suc i) =\n                         [:- x, 1:] ^ i *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj x i\n      ((y, j) # yjs). [:- x, 1:] ^ Suc i)", "case (1 x i y j yjs)"], ["proof (state)\nthis:\n  \\<lbrakk>x = y; Suc j \\<noteq> i; \\<not> i < Suc j;\n   i - Suc j\n   \\<le> order x\n          (\\<Prod>a\\<leftarrow>yjs. case a of\n                                    (x, i) \\<Rightarrow>\n[:- x, 1:] ^ Suc i);\n   i - Suc j \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> (\\<Prod>a\\<leftarrow>yjs. case a of\n        (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n                    [:- x, 1:] ^ (i - Suc j) *\n                    (\\<Prod>a\\<leftarrow>delete_cnj x (i - Suc j)\n    yjs. case a of (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n  \\<lbrakk>x \\<noteq> y;\n   i \\<le> order x\n            (\\<Prod>a\\<leftarrow>yjs. case a of\n(x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i);\n   i \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> (\\<Prod>a\\<leftarrow>yjs. case a of\n        (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n                    [:- x, 1:] ^ i *\n                    (\\<Prod>a\\<leftarrow>delete_cnj x i\n    yjs. case a of (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n  i \\<le> order x\n           (\\<Prod>a\\<leftarrow>(y, j) #\n                                yjs. case a of\n                                     (x, i) \\<Rightarrow>\n [:- x, 1:] ^ Suc i)\n  i \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<And>x i y j yjs.\n       \\<lbrakk>\\<lbrakk>x = y; Suc j \\<noteq> i; \\<not> i < Suc j;\n                 i - Suc j\n                 \\<le> order x\n                        (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n                 i - Suc j \\<noteq> 0\\<rbrakk>\n                \\<Longrightarrow> (\\<Prod>(x,\ni)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                                  [:- x, 1:] ^ (i - Suc j) *\n                                  (\\<Prod>(x,\ni)\\<leftarrow>delete_cnj x (i - Suc j) yjs. [:- x, 1:] ^ Suc i);\n        \\<lbrakk>x \\<noteq> y;\n         i \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n         i \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> (\\<Prod>(x,\n                              i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                          [:- x, 1:] ^ i *\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>delete_cnj x i\n       yjs. [:- x, 1:] ^ Suc i);\n        i \\<le> order x\n                 (\\<Prod>(x,\n                     i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i);\n        i \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x,\n                             i)\\<leftarrow>(y, j) #\n     yjs. [:- x, 1:] ^ Suc i) =\n                         [:- x, 1:] ^ i *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj x i\n      ((y, j) # yjs). [:- x, 1:] ^ Suc i)", "note IH = 1(1-2)"], ["proof (state)\nthis:\n  \\<lbrakk>x = y; Suc j \\<noteq> i; \\<not> i < Suc j;\n   i - Suc j\n   \\<le> order x\n          (\\<Prod>a\\<leftarrow>yjs. case a of\n                                    (x, i) \\<Rightarrow>\n[:- x, 1:] ^ Suc i);\n   i - Suc j \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> (\\<Prod>a\\<leftarrow>yjs. case a of\n        (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n                    [:- x, 1:] ^ (i - Suc j) *\n                    (\\<Prod>a\\<leftarrow>delete_cnj x (i - Suc j)\n    yjs. case a of (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n  \\<lbrakk>x \\<noteq> y;\n   i \\<le> order x\n            (\\<Prod>a\\<leftarrow>yjs. case a of\n(x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i);\n   i \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> (\\<Prod>a\\<leftarrow>yjs. case a of\n        (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n                    [:- x, 1:] ^ i *\n                    (\\<Prod>a\\<leftarrow>delete_cnj x i\n    yjs. case a of (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. \\<And>x i y j yjs.\n       \\<lbrakk>\\<lbrakk>x = y; Suc j \\<noteq> i; \\<not> i < Suc j;\n                 i - Suc j\n                 \\<le> order x\n                        (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n                 i - Suc j \\<noteq> 0\\<rbrakk>\n                \\<Longrightarrow> (\\<Prod>(x,\ni)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                                  [:- x, 1:] ^ (i - Suc j) *\n                                  (\\<Prod>(x,\ni)\\<leftarrow>delete_cnj x (i - Suc j) yjs. [:- x, 1:] ^ Suc i);\n        \\<lbrakk>x \\<noteq> y;\n         i \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n         i \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> (\\<Prod>(x,\n                              i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                          [:- x, 1:] ^ i *\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>delete_cnj x i\n       yjs. [:- x, 1:] ^ Suc i);\n        i \\<le> order x\n                 (\\<Prod>(x,\n                     i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i);\n        i \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x,\n                             i)\\<leftarrow>(y, j) #\n     yjs. [:- x, 1:] ^ Suc i) =\n                         [:- x, 1:] ^ i *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj x i\n      ((y, j) # yjs). [:- x, 1:] ^ Suc i)", "let ?yj = \"[:-y,1:]^Suc j\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x i y j yjs.\n       \\<lbrakk>\\<lbrakk>x = y; Suc j \\<noteq> i; \\<not> i < Suc j;\n                 i - Suc j\n                 \\<le> order x\n                        (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n                 i - Suc j \\<noteq> 0\\<rbrakk>\n                \\<Longrightarrow> (\\<Prod>(x,\ni)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                                  [:- x, 1:] ^ (i - Suc j) *\n                                  (\\<Prod>(x,\ni)\\<leftarrow>delete_cnj x (i - Suc j) yjs. [:- x, 1:] ^ Suc i);\n        \\<lbrakk>x \\<noteq> y;\n         i \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n         i \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> (\\<Prod>(x,\n                              i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                          [:- x, 1:] ^ i *\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>delete_cnj x i\n       yjs. [:- x, 1:] ^ Suc i);\n        i \\<le> order x\n                 (\\<Prod>(x,\n                     i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i);\n        i \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x,\n                             i)\\<leftarrow>(y, j) #\n     yjs. [:- x, 1:] ^ Suc i) =\n                         [:- x, 1:] ^ i *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj x i\n      ((y, j) # yjs). [:- x, 1:] ^ Suc i)", "let ?yjs = \"(\\<Prod>(x,i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x i y j yjs.\n       \\<lbrakk>\\<lbrakk>x = y; Suc j \\<noteq> i; \\<not> i < Suc j;\n                 i - Suc j\n                 \\<le> order x\n                        (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n                 i - Suc j \\<noteq> 0\\<rbrakk>\n                \\<Longrightarrow> (\\<Prod>(x,\ni)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                                  [:- x, 1:] ^ (i - Suc j) *\n                                  (\\<Prod>(x,\ni)\\<leftarrow>delete_cnj x (i - Suc j) yjs. [:- x, 1:] ^ Suc i);\n        \\<lbrakk>x \\<noteq> y;\n         i \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n         i \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> (\\<Prod>(x,\n                              i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                          [:- x, 1:] ^ i *\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>delete_cnj x i\n       yjs. [:- x, 1:] ^ Suc i);\n        i \\<le> order x\n                 (\\<Prod>(x,\n                     i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i);\n        i \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x,\n                             i)\\<leftarrow>(y, j) #\n     yjs. [:- x, 1:] ^ Suc i) =\n                         [:- x, 1:] ^ i *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj x i\n      ((y, j) # yjs). [:- x, 1:] ^ Suc i)", "let ?x = \"[: - x, 1 :]\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x i y j yjs.\n       \\<lbrakk>\\<lbrakk>x = y; Suc j \\<noteq> i; \\<not> i < Suc j;\n                 i - Suc j\n                 \\<le> order x\n                        (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n                 i - Suc j \\<noteq> 0\\<rbrakk>\n                \\<Longrightarrow> (\\<Prod>(x,\ni)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                                  [:- x, 1:] ^ (i - Suc j) *\n                                  (\\<Prod>(x,\ni)\\<leftarrow>delete_cnj x (i - Suc j) yjs. [:- x, 1:] ^ Suc i);\n        \\<lbrakk>x \\<noteq> y;\n         i \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n         i \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> (\\<Prod>(x,\n                              i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                          [:- x, 1:] ^ i *\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>delete_cnj x i\n       yjs. [:- x, 1:] ^ Suc i);\n        i \\<le> order x\n                 (\\<Prod>(x,\n                     i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i);\n        i \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x,\n                             i)\\<leftarrow>(y, j) #\n     yjs. [:- x, 1:] ^ Suc i) =\n                         [:- x, 1:] ^ i *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj x i\n      ((y, j) # yjs). [:- x, 1:] ^ Suc i)", "let ?xi = \"?x ^ i\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x i y j yjs.\n       \\<lbrakk>\\<lbrakk>x = y; Suc j \\<noteq> i; \\<not> i < Suc j;\n                 i - Suc j\n                 \\<le> order x\n                        (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n                 i - Suc j \\<noteq> 0\\<rbrakk>\n                \\<Longrightarrow> (\\<Prod>(x,\ni)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                                  [:- x, 1:] ^ (i - Suc j) *\n                                  (\\<Prod>(x,\ni)\\<leftarrow>delete_cnj x (i - Suc j) yjs. [:- x, 1:] ^ Suc i);\n        \\<lbrakk>x \\<noteq> y;\n         i \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n         i \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> (\\<Prod>(x,\n                              i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                          [:- x, 1:] ^ i *\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>delete_cnj x i\n       yjs. [:- x, 1:] ^ Suc i);\n        i \\<le> order x\n                 (\\<Prod>(x,\n                     i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i);\n        i \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x,\n                             i)\\<leftarrow>(y, j) #\n     yjs. [:- x, 1:] ^ Suc i) =\n                         [:- x, 1:] ^ i *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj x i\n      ((y, j) # yjs). [:- x, 1:] ^ Suc i)", "have \"monic (\\<Prod>(x,i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. monic (\\<Prod>(x, i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i)", "by (rule monic_prod_list_pow)"], ["proof (state)\nthis:\n  monic (\\<Prod>(x, i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. \\<And>x i y j yjs.\n       \\<lbrakk>\\<lbrakk>x = y; Suc j \\<noteq> i; \\<not> i < Suc j;\n                 i - Suc j\n                 \\<le> order x\n                        (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n                 i - Suc j \\<noteq> 0\\<rbrakk>\n                \\<Longrightarrow> (\\<Prod>(x,\ni)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                                  [:- x, 1:] ^ (i - Suc j) *\n                                  (\\<Prod>(x,\ni)\\<leftarrow>delete_cnj x (i - Suc j) yjs. [:- x, 1:] ^ Suc i);\n        \\<lbrakk>x \\<noteq> y;\n         i \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n         i \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> (\\<Prod>(x,\n                              i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                          [:- x, 1:] ^ i *\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>delete_cnj x i\n       yjs. [:- x, 1:] ^ Suc i);\n        i \\<le> order x\n                 (\\<Prod>(x,\n                     i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i);\n        i \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x,\n                             i)\\<leftarrow>(y, j) #\n     yjs. [:- x, 1:] ^ Suc i) =\n                         [:- x, 1:] ^ i *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj x i\n      ((y, j) # yjs). [:- x, 1:] ^ Suc i)", "then"], ["proof (chain)\npicking this:\n  monic (\\<Prod>(x, i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i)", "have \"monic (?yj * ?yjs)\""], ["proof (prove)\nusing this:\n  monic (\\<Prod>(x, i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. monic\n     ([:- y, 1:] ^ Suc j *\n      (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i))", "by simp"], ["proof (state)\nthis:\n  monic\n   ([:- y, 1:] ^ Suc j * (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i))\n\ngoal (1 subgoal):\n 1. \\<And>x i y j yjs.\n       \\<lbrakk>\\<lbrakk>x = y; Suc j \\<noteq> i; \\<not> i < Suc j;\n                 i - Suc j\n                 \\<le> order x\n                        (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n                 i - Suc j \\<noteq> 0\\<rbrakk>\n                \\<Longrightarrow> (\\<Prod>(x,\ni)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                                  [:- x, 1:] ^ (i - Suc j) *\n                                  (\\<Prod>(x,\ni)\\<leftarrow>delete_cnj x (i - Suc j) yjs. [:- x, 1:] ^ Suc i);\n        \\<lbrakk>x \\<noteq> y;\n         i \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n         i \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> (\\<Prod>(x,\n                              i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                          [:- x, 1:] ^ i *\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>delete_cnj x i\n       yjs. [:- x, 1:] ^ Suc i);\n        i \\<le> order x\n                 (\\<Prod>(x,\n                     i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i);\n        i \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x,\n                             i)\\<leftarrow>(y, j) #\n     yjs. [:- x, 1:] ^ Suc i) =\n                         [:- x, 1:] ^ i *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj x i\n      ((y, j) # yjs). [:- x, 1:] ^ Suc i)", "from monic_imp_nonzero[OF this]"], ["proof (chain)\npicking this:\n  [:- y, 1:] ^ Suc j *\n  (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) \\<noteq>\n  0", "have yy0: \"?yj * ?yjs \\<noteq> 0\""], ["proof (prove)\nusing this:\n  [:- y, 1:] ^ Suc j *\n  (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) \\<noteq>\n  0\n\ngoal (1 subgoal):\n 1. [:- y, 1:] ^ Suc j *\n    (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) \\<noteq>\n    0", "by auto"], ["proof (state)\nthis:\n  [:- y, 1:] ^ Suc j *\n  (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) \\<noteq>\n  0\n\ngoal (1 subgoal):\n 1. \\<And>x i y j yjs.\n       \\<lbrakk>\\<lbrakk>x = y; Suc j \\<noteq> i; \\<not> i < Suc j;\n                 i - Suc j\n                 \\<le> order x\n                        (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n                 i - Suc j \\<noteq> 0\\<rbrakk>\n                \\<Longrightarrow> (\\<Prod>(x,\ni)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                                  [:- x, 1:] ^ (i - Suc j) *\n                                  (\\<Prod>(x,\ni)\\<leftarrow>delete_cnj x (i - Suc j) yjs. [:- x, 1:] ^ Suc i);\n        \\<lbrakk>x \\<noteq> y;\n         i \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n         i \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> (\\<Prod>(x,\n                              i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                          [:- x, 1:] ^ i *\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>delete_cnj x i\n       yjs. [:- x, 1:] ^ Suc i);\n        i \\<le> order x\n                 (\\<Prod>(x,\n                     i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i);\n        i \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x,\n                             i)\\<leftarrow>(y, j) #\n     yjs. [:- x, 1:] ^ Suc i) =\n                         [:- x, 1:] ^ i *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj x i\n      ((y, j) # yjs). [:- x, 1:] ^ Suc i)", "have id: \"(\\<Prod>(x,i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i) = ?yj * ?yjs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Prod>(x, i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i) =\n    [:- y, 1:] ^ Suc j * (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)", "by simp"], ["proof (state)\nthis:\n  (\\<Prod>(x, i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i) =\n  [:- y, 1:] ^ Suc j * (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. \\<And>x i y j yjs.\n       \\<lbrakk>\\<lbrakk>x = y; Suc j \\<noteq> i; \\<not> i < Suc j;\n                 i - Suc j\n                 \\<le> order x\n                        (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n                 i - Suc j \\<noteq> 0\\<rbrakk>\n                \\<Longrightarrow> (\\<Prod>(x,\ni)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                                  [:- x, 1:] ^ (i - Suc j) *\n                                  (\\<Prod>(x,\ni)\\<leftarrow>delete_cnj x (i - Suc j) yjs. [:- x, 1:] ^ Suc i);\n        \\<lbrakk>x \\<noteq> y;\n         i \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n         i \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> (\\<Prod>(x,\n                              i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                          [:- x, 1:] ^ i *\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>delete_cnj x i\n       yjs. [:- x, 1:] ^ Suc i);\n        i \\<le> order x\n                 (\\<Prod>(x,\n                     i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i);\n        i \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x,\n                             i)\\<leftarrow>(y, j) #\n     yjs. [:- x, 1:] ^ Suc i) =\n                         [:- x, 1:] ^ i *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj x i\n      ((y, j) # yjs). [:- x, 1:] ^ Suc i)", "from 1(3-)"], ["proof (chain)\npicking this:\n  i \\<le> order x\n           (\\<Prod>a\\<leftarrow>(y, j) #\n                                yjs. case a of\n                                     (x, i) \\<Rightarrow>\n [:- x, 1:] ^ Suc i)\n  i \\<noteq> 0", "have ord: \"i \\<le> order x (?yj * ?yjs)\" and i: \"i \\<noteq> 0\""], ["proof (prove)\nusing this:\n  i \\<le> order x\n           (\\<Prod>a\\<leftarrow>(y, j) #\n                                yjs. case a of\n                                     (x, i) \\<Rightarrow>\n [:- x, 1:] ^ Suc i)\n  i \\<noteq> 0\n\ngoal (1 subgoal):\n 1. i \\<le> order x\n             ([:- y, 1:] ^ Suc j *\n              (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)) &&&\n    i \\<noteq> 0", "unfolding id"], ["proof (prove)\nusing this:\n  i \\<le> order x\n           ([:- y, 1:] ^ Suc j *\n            (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i))\n  i \\<noteq> 0\n\ngoal (1 subgoal):\n 1. i \\<le> order x\n             ([:- y, 1:] ^ Suc j *\n              (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)) &&&\n    i \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  i \\<le> order x\n           ([:- y, 1:] ^ Suc j *\n            (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i))\n  i \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<And>x i y j yjs.\n       \\<lbrakk>\\<lbrakk>x = y; Suc j \\<noteq> i; \\<not> i < Suc j;\n                 i - Suc j\n                 \\<le> order x\n                        (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n                 i - Suc j \\<noteq> 0\\<rbrakk>\n                \\<Longrightarrow> (\\<Prod>(x,\ni)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                                  [:- x, 1:] ^ (i - Suc j) *\n                                  (\\<Prod>(x,\ni)\\<leftarrow>delete_cnj x (i - Suc j) yjs. [:- x, 1:] ^ Suc i);\n        \\<lbrakk>x \\<noteq> y;\n         i \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n         i \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> (\\<Prod>(x,\n                              i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                          [:- x, 1:] ^ i *\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>delete_cnj x i\n       yjs. [:- x, 1:] ^ Suc i);\n        i \\<le> order x\n                 (\\<Prod>(x,\n                     i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i);\n        i \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x,\n                             i)\\<leftarrow>(y, j) #\n     yjs. [:- x, 1:] ^ Suc i) =\n                         [:- x, 1:] ^ i *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj x i\n      ((y, j) # yjs). [:- x, 1:] ^ Suc i)", "from ord[unfolded order_mult[OF yy0]]"], ["proof (chain)\npicking this:\n  i \\<le> order x ([:- y, 1:] ^ Suc j) +\n          order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)", "have ord: \"i \\<le> order x ?yj + order x ?yjs\""], ["proof (prove)\nusing this:\n  i \\<le> order x ([:- y, 1:] ^ Suc j) +\n          order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. i \\<le> order x ([:- y, 1:] ^ Suc j) +\n            order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)", "."], ["proof (state)\nthis:\n  i \\<le> order x ([:- y, 1:] ^ Suc j) +\n          order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. \\<And>x i y j yjs.\n       \\<lbrakk>\\<lbrakk>x = y; Suc j \\<noteq> i; \\<not> i < Suc j;\n                 i - Suc j\n                 \\<le> order x\n                        (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n                 i - Suc j \\<noteq> 0\\<rbrakk>\n                \\<Longrightarrow> (\\<Prod>(x,\ni)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                                  [:- x, 1:] ^ (i - Suc j) *\n                                  (\\<Prod>(x,\ni)\\<leftarrow>delete_cnj x (i - Suc j) yjs. [:- x, 1:] ^ Suc i);\n        \\<lbrakk>x \\<noteq> y;\n         i \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n         i \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> (\\<Prod>(x,\n                              i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                          [:- x, 1:] ^ i *\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>delete_cnj x i\n       yjs. [:- x, 1:] ^ Suc i);\n        i \\<le> order x\n                 (\\<Prod>(x,\n                     i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i);\n        i \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x,\n                             i)\\<leftarrow>(y, j) #\n     yjs. [:- x, 1:] ^ Suc i) =\n                         [:- x, 1:] ^ i *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj x i\n      ((y, j) # yjs). [:- x, 1:] ^ Suc i)", "from this[unfolded order_linear_power']"], ["proof (chain)\npicking this:\n  i \\<le> (if - y = - x then Suc j else 0) +\n          order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)", "have ord: \"i \\<le> (if y = x then Suc j else 0) + order x ?yjs\""], ["proof (prove)\nusing this:\n  i \\<le> (if - y = - x then Suc j else 0) +\n          order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. i \\<le> (if y = x then Suc j else 0) +\n            order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)", "by simp"], ["proof (state)\nthis:\n  i \\<le> (if y = x then Suc j else 0) +\n          order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. \\<And>x i y j yjs.\n       \\<lbrakk>\\<lbrakk>x = y; Suc j \\<noteq> i; \\<not> i < Suc j;\n                 i - Suc j\n                 \\<le> order x\n                        (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n                 i - Suc j \\<noteq> 0\\<rbrakk>\n                \\<Longrightarrow> (\\<Prod>(x,\ni)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                                  [:- x, 1:] ^ (i - Suc j) *\n                                  (\\<Prod>(x,\ni)\\<leftarrow>delete_cnj x (i - Suc j) yjs. [:- x, 1:] ^ Suc i);\n        \\<lbrakk>x \\<noteq> y;\n         i \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i);\n         i \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> (\\<Prod>(x,\n                              i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n                          [:- x, 1:] ^ i *\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>delete_cnj x i\n       yjs. [:- x, 1:] ^ Suc i);\n        i \\<le> order x\n                 (\\<Prod>(x,\n                     i)\\<leftarrow>(y, j) # yjs. [:- x, 1:] ^ Suc i);\n        i \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> (\\<Prod>(x,\n                             i)\\<leftarrow>(y, j) #\n     yjs. [:- x, 1:] ^ Suc i) =\n                         [:- x, 1:] ^ i *\n                         (\\<Prod>(x,\n                             i)\\<leftarrow>delete_cnj x i\n      ((y, j) # yjs). [:- x, 1:] ^ Suc i)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "proof (cases \"x = y\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n 2. x \\<noteq> y \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "case False"], ["proof (state)\nthis:\n  x \\<noteq> y\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n 2. x \\<noteq> y \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "from ord False"], ["proof (chain)\npicking this:\n  i \\<le> (if y = x then Suc j else 0) +\n          order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)\n  x \\<noteq> y", "have \"i \\<le> order x ?yjs\""], ["proof (prove)\nusing this:\n  i \\<le> (if y = x then Suc j else 0) +\n          order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. i \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)", "by simp"], ["proof (state)\nthis:\n  i \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n 2. x \\<noteq> y \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "note IH = IH(2)[OF False this i]"], ["proof (state)\nthis:\n  (\\<Prod>a\\<leftarrow>yjs. case a of\n                            (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  [:- x, 1:] ^ i *\n  (\\<Prod>a\\<leftarrow>delete_cnj x i\n                        yjs. case a of\n                             (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n 2. x \\<noteq> y \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "from False"], ["proof (chain)\npicking this:\n  x \\<noteq> y", "have del: \"delete_cnj x i ((y, j) # yjs) = (y,j) # delete_cnj x i yjs\""], ["proof (prove)\nusing this:\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. delete_cnj x i ((y, j) # yjs) = (y, j) # delete_cnj x i yjs", "by simp"], ["proof (state)\nthis:\n  delete_cnj x i ((y, j) # yjs) = (y, j) # delete_cnj x i yjs\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n 2. x \\<noteq> y \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "unfolding del id IH"], ["proof (prove)\ngoal (1 subgoal):\n 1. [:- y, 1:] ^ Suc j *\n    ([:- x, 1:] ^ i *\n     (\\<Prod>(x, i)\\<leftarrow>delete_cnj x i yjs. [:- x, 1:] ^ Suc i)) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         delete_cnj x i\n                          yjs. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "by (simp add: ac_simps)"], ["proof (state)\nthis:\n  (\\<Prod>a\\<leftarrow>(y, j) #\n                       yjs. case a of\n                            (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  [:- x, 1:] ^ i *\n  (\\<Prod>a\\<leftarrow>delete_cnj x i\n                        ((y, j) #\n                         yjs). case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. x = y \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x = y \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "case True"], ["proof (state)\nthis:\n  x = y\n\ngoal (1 subgoal):\n 1. x = y \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "note xy = this"], ["proof (state)\nthis:\n  x = y\n\ngoal (1 subgoal):\n 1. x = y \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "note IH = IH(1)[OF True]"], ["proof (state)\nthis:\n  \\<lbrakk>Suc j \\<noteq> i; \\<not> i < Suc j;\n   i - Suc j\n   \\<le> order x\n          (\\<Prod>a\\<leftarrow>yjs. case a of\n                                    (x, i) \\<Rightarrow>\n[:- x, 1:] ^ Suc i);\n   i - Suc j \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> (\\<Prod>a\\<leftarrow>yjs. case a of\n        (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n                    [:- x, 1:] ^ (i - Suc j) *\n                    (\\<Prod>a\\<leftarrow>delete_cnj x (i - Suc j)\n    yjs. case a of (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. x = y \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "proof (cases \"Suc j \\<ge> i\")"], ["proof (state)\ngoal (2 subgoals):\n 1. i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n 2. \\<not> i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "case False"], ["proof (state)\nthis:\n  \\<not> i \\<le> Suc j\n\ngoal (2 subgoals):\n 1. i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n 2. \\<not> i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "from ord"], ["proof (chain)\npicking this:\n  i \\<le> (if y = x then Suc j else 0) +\n          order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)", "have ord: \"i - Suc j \\<le> order x ?yjs\""], ["proof (prove)\nusing this:\n  i \\<le> (if y = x then Suc j else 0) +\n          order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. i - Suc j\n    \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)", "unfolding xy"], ["proof (prove)\nusing this:\n  i \\<le> (if y = y then Suc j else 0) +\n          order y (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. i - Suc j\n    \\<le> order y (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)", "by simp"], ["proof (state)\nthis:\n  i - Suc j \\<le> order x (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i)\n\ngoal (2 subgoals):\n 1. i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n 2. \\<not> i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "have \"?xi = ?x ^ (Suc j + (i - Suc j))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [:- x, 1:] ^ i = [:- x, 1:] ^ (Suc j + (i - Suc j))", "using False"], ["proof (prove)\nusing this:\n  \\<not> i \\<le> Suc j\n\ngoal (1 subgoal):\n 1. [:- x, 1:] ^ i = [:- x, 1:] ^ (Suc j + (i - Suc j))", "by simp"], ["proof (state)\nthis:\n  [:- x, 1:] ^ i = [:- x, 1:] ^ (Suc j + (i - Suc j))\n\ngoal (2 subgoals):\n 1. i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n 2. \\<not> i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "also"], ["proof (state)\nthis:\n  [:- x, 1:] ^ i = [:- x, 1:] ^ (Suc j + (i - Suc j))\n\ngoal (2 subgoals):\n 1. i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n 2. \\<not> i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "have \"\\<dots> = ?x ^ Suc j * ?x ^ (i - Suc j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [:- x, 1:] ^ (Suc j + (i - Suc j)) =\n    [:- x, 1:] ^ Suc j * [:- x, 1:] ^ (i - Suc j)", "unfolding power_add"], ["proof (prove)\ngoal (1 subgoal):\n 1. [:- x, 1:] ^ Suc j * [:- x, 1:] ^ (i - Suc j) =\n    [:- x, 1:] ^ Suc j * [:- x, 1:] ^ (i - Suc j)", "by simp"], ["proof (state)\nthis:\n  [:- x, 1:] ^ (Suc j + (i - Suc j)) =\n  [:- x, 1:] ^ Suc j * [:- x, 1:] ^ (i - Suc j)\n\ngoal (2 subgoals):\n 1. i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n 2. \\<not> i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "finally"], ["proof (chain)\npicking this:\n  [:- x, 1:] ^ i = [:- x, 1:] ^ Suc j * [:- x, 1:] ^ (i - Suc j)", "have xi: \"?xi = ?x ^ Suc j * ?x ^ (i - Suc j)\""], ["proof (prove)\nusing this:\n  [:- x, 1:] ^ i = [:- x, 1:] ^ Suc j * [:- x, 1:] ^ (i - Suc j)\n\ngoal (1 subgoal):\n 1. [:- x, 1:] ^ i = [:- x, 1:] ^ Suc j * [:- x, 1:] ^ (i - Suc j)", "."], ["proof (state)\nthis:\n  [:- x, 1:] ^ i = [:- x, 1:] ^ Suc j * [:- x, 1:] ^ (i - Suc j)\n\ngoal (2 subgoals):\n 1. i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n 2. \\<not> i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "from False"], ["proof (chain)\npicking this:\n  \\<not> i \\<le> Suc j", "have \"Suc j \\<noteq> i\" \"\\<not> i < Suc j\" \"i - Suc j \\<noteq> 0\""], ["proof (prove)\nusing this:\n  \\<not> i \\<le> Suc j\n\ngoal (1 subgoal):\n 1. Suc j \\<noteq> i &&& \\<not> i < Suc j &&& i - Suc j \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  Suc j \\<noteq> i\n  \\<not> i < Suc j\n  i - Suc j \\<noteq> 0\n\ngoal (2 subgoals):\n 1. i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n 2. \\<not> i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "note IH = IH[OF this(1,2) ord this(3)]"], ["proof (state)\nthis:\n  (\\<Prod>a\\<leftarrow>yjs. case a of\n                            (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  [:- x, 1:] ^ (i - Suc j) *\n  (\\<Prod>a\\<leftarrow>delete_cnj x (i - Suc j)\n                        yjs. case a of\n                             (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n\ngoal (2 subgoals):\n 1. i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n 2. \\<not> i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "from xy False"], ["proof (chain)\npicking this:\n  x = y\n  \\<not> i \\<le> Suc j", "have del: \"delete_cnj x i ((y, j) # yjs) = delete_cnj x (i - Suc j) yjs\""], ["proof (prove)\nusing this:\n  x = y\n  \\<not> i \\<le> Suc j\n\ngoal (1 subgoal):\n 1. delete_cnj x i ((y, j) # yjs) = delete_cnj x (i - Suc j) yjs", "by auto"], ["proof (state)\nthis:\n  delete_cnj x i ((y, j) # yjs) = delete_cnj x (i - Suc j) yjs\n\ngoal (2 subgoals):\n 1. i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n 2. \\<not> i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "unfolding del id"], ["proof (prove)\ngoal (1 subgoal):\n 1. [:- y, 1:] ^ Suc j *\n    (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x (i - Suc j)\n                          yjs. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "unfolding IH xi"], ["proof (prove)\ngoal (1 subgoal):\n 1. [:- y, 1:] ^ Suc j *\n    ([:- x, 1:] ^ (i - Suc j) *\n     (\\<Prod>(x,\n         i)\\<leftarrow>delete_cnj x (i - Suc j) yjs. [:- x, 1:] ^ Suc i)) =\n    [:- x, 1:] ^ Suc j * [:- x, 1:] ^ (i - Suc j) *\n    (\\<Prod>a\\<leftarrow>delete_cnj x (i - Suc j)\n                          yjs. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "unfolding xy"], ["proof (prove)\ngoal (1 subgoal):\n 1. [:- y, 1:] ^ Suc j *\n    ([:- y, 1:] ^ (i - Suc j) *\n     (\\<Prod>(x,\n         i)\\<leftarrow>delete_cnj y (i - Suc j) yjs. [:- x, 1:] ^ Suc i)) =\n    [:- y, 1:] ^ Suc j * [:- y, 1:] ^ (i - Suc j) *\n    (\\<Prod>a\\<leftarrow>delete_cnj y (i - Suc j)\n                          yjs. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "by simp"], ["proof (state)\nthis:\n  (\\<Prod>a\\<leftarrow>(y, j) #\n                       yjs. case a of\n                            (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  [:- x, 1:] ^ i *\n  (\\<Prod>a\\<leftarrow>delete_cnj x i\n                        ((y, j) #\n                         yjs). case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "case True"], ["proof (state)\nthis:\n  i \\<le> Suc j\n\ngoal (1 subgoal):\n 1. i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "hence \"Suc j = i \\<or> i < Suc j\""], ["proof (prove)\nusing this:\n  i \\<le> Suc j\n\ngoal (1 subgoal):\n 1. Suc j = i \\<or> i < Suc j", "by auto"], ["proof (state)\nthis:\n  Suc j = i \\<or> i < Suc j\n\ngoal (1 subgoal):\n 1. i \\<le> Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "thus ?thesis"], ["proof (prove)\nusing this:\n  Suc j = i \\<or> i < Suc j\n\ngoal (1 subgoal):\n 1. (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. Suc j = i \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n 2. i < Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "assume i: \"Suc j = i\""], ["proof (state)\nthis:\n  Suc j = i\n\ngoal (2 subgoals):\n 1. Suc j = i \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n 2. i < Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "from xy i"], ["proof (chain)\npicking this:\n  x = y\n  Suc j = i", "have del: \"delete_cnj x i ((y, j) # yjs) = yjs\""], ["proof (prove)\nusing this:\n  x = y\n  Suc j = i\n\ngoal (1 subgoal):\n 1. delete_cnj x i ((y, j) # yjs) = yjs", "by simp"], ["proof (state)\nthis:\n  delete_cnj x i ((y, j) # yjs) = yjs\n\ngoal (2 subgoals):\n 1. Suc j = i \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n 2. i < Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "unfolding id del"], ["proof (prove)\ngoal (1 subgoal):\n 1. [:- y, 1:] ^ Suc j *\n    (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "unfolding xy i"], ["proof (prove)\ngoal (1 subgoal):\n 1. [:- y, 1:] ^ i * (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n    [:- y, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "by simp"], ["proof (state)\nthis:\n  (\\<Prod>a\\<leftarrow>(y, j) #\n                       yjs. case a of\n                            (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  [:- x, 1:] ^ i *\n  (\\<Prod>a\\<leftarrow>delete_cnj x i\n                        ((y, j) #\n                         yjs). case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. i < Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. i < Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "assume ij: \"i < Suc j\""], ["proof (state)\nthis:\n  i < Suc j\n\ngoal (1 subgoal):\n 1. i < Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "with xy i"], ["proof (chain)\npicking this:\n  x = y\n  i \\<noteq> 0\n  i < Suc j", "have del: \"delete_cnj x i ((y, j) # yjs) = (y, j - i) # yjs\""], ["proof (prove)\nusing this:\n  x = y\n  i \\<noteq> 0\n  i < Suc j\n\ngoal (1 subgoal):\n 1. delete_cnj x i ((y, j) # yjs) = (y, j - i) # yjs", "by simp"], ["proof (state)\nthis:\n  delete_cnj x i ((y, j) # yjs) = (y, j - i) # yjs\n\ngoal (1 subgoal):\n 1. i < Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "from ij"], ["proof (chain)\npicking this:\n  i < Suc j", "have idd: \"Suc j = i + Suc (j - i)\""], ["proof (prove)\nusing this:\n  i < Suc j\n\ngoal (1 subgoal):\n 1. Suc j = i + Suc (j - i)", "by simp"], ["proof (state)\nthis:\n  Suc j = i + Suc (j - i)\n\ngoal (1 subgoal):\n 1. i < Suc j \\<Longrightarrow>\n    (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Prod>a\\<leftarrow>(y, j) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>delete_cnj x i\n                          ((y, j) #\n                           yjs). case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "unfolding id del"], ["proof (prove)\ngoal (1 subgoal):\n 1. [:- y, 1:] ^ Suc j *\n    (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>(y, j - i) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "unfolding xy idd power_add"], ["proof (prove)\ngoal (1 subgoal):\n 1. [:- y, 1:] ^ i * [:- y, 1:] ^ Suc (j - i) *\n    (\\<Prod>(x, i)\\<leftarrow>yjs. [:- x, 1:] ^ Suc i) =\n    [:- y, 1:] ^ i *\n    (\\<Prod>a\\<leftarrow>(y, j - i) #\n                         yjs. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "by simp"], ["proof (state)\nthis:\n  (\\<Prod>a\\<leftarrow>(y, j) #\n                       yjs. case a of\n                            (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  [:- x, 1:] ^ i *\n  (\\<Prod>a\\<leftarrow>delete_cnj x i\n                        ((y, j) #\n                         yjs). case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Prod>a\\<leftarrow>(y, j) #\n                       yjs. case a of\n                            (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  [:- x, 1:] ^ i *\n  (\\<Prod>a\\<leftarrow>delete_cnj x i\n                        ((y, j) #\n                         yjs). case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Prod>a\\<leftarrow>(y, j) #\n                       yjs. case a of\n                            (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  [:- x, 1:] ^ i *\n  (\\<Prod>a\\<leftarrow>delete_cnj x i\n                        ((y, j) #\n                         yjs). case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Prod>a\\<leftarrow>(y, j) #\n                       yjs. case a of\n                            (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  [:- x, 1:] ^ i *\n  (\\<Prod>a\\<leftarrow>delete_cnj x i\n                        ((y, j) #\n                         yjs). case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma factorize_real_poly: assumes fp: \"factorize_real_poly p = Some (c,qis)\"\n  shows \n  \"p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i)\" \n  \"(q,j) \\<in> set qis \\<Longrightarrow> irreducible q \\<and> j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1,2}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) &&&\n    ((q, j) \\<in> set qis \\<Longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i)\n 2. (q, j) \\<in> set qis \\<Longrightarrow>\n    irreducible q \\<and>\n    j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2}", "interpret map_poly_inj_idom_hom of_real"], ["proof (prove)\ngoal (1 subgoal):\n 1. map_poly_inj_idom_hom of_real", ".."], ["proof (state)\ngoal (2 subgoals):\n 1. p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i)\n 2. (q, j) \\<in> set qis \\<Longrightarrow>\n    irreducible q \\<and>\n    j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2}", "have \"(p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i)) \\<and> ((q,j) \\<in> set qis \\<longrightarrow> irreducible q \\<and> j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1,2})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "proof (cases \"p = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. p = 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n 2. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "case True"], ["proof (state)\nthis:\n  p = 0\n\ngoal (2 subgoals):\n 1. p = 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n 2. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"factorize_real_poly p = Some (0,[])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. factorize_real_poly p = Some (0, [])", "unfolding True"], ["proof (prove)\ngoal (1 subgoal):\n 1. factorize_real_poly 0 = Some (0, [])", "by (simp add: factorize_real_poly_def factorize_complex_main_def yun_factorization_def)"], ["proof (state)\nthis:\n  factorize_real_poly p = Some (0, [])\n\ngoal (2 subgoals):\n 1. p = 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n 2. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "with fp"], ["proof (chain)\npicking this:\n  factorize_real_poly p = Some (c, qis)\n  factorize_real_poly p = Some (0, [])", "have id: \"c = 0\" \"qis = []\""], ["proof (prove)\nusing this:\n  factorize_real_poly p = Some (c, qis)\n  factorize_real_poly p = Some (0, [])\n\ngoal (1 subgoal):\n 1. c = 0 &&& qis = []", "by auto"], ["proof (state)\nthis:\n  c = 0\n  qis = []\n\ngoal (2 subgoals):\n 1. p = 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n 2. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "thus ?thesis"], ["proof (prove)\nusing this:\n  c = 0\n  qis = []\n\ngoal (1 subgoal):\n 1. p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "unfolding True"], ["proof (prove)\nusing this:\n  c = 0\n  qis = []\n\ngoal (1 subgoal):\n 1. 0 = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "by simp"], ["proof (state)\nthis:\n  p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n  ((q, j) \\<in> set qis \\<longrightarrow>\n   irreducible q \\<and>\n   j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "case False"], ["proof (state)\nthis:\n  p \\<noteq> 0\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "note p0 = this"], ["proof (state)\nthis:\n  p \\<noteq> 0\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "let ?c = complex_of_real"], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "let ?rp = \"map_poly Re\""], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "let ?cp = \"map_poly ?c\""], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "let ?p = \"?cp p\""], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "from fp[unfolded factorize_real_poly_def]"], ["proof (chain)\npicking this:\n  map_option\n   (\\<lambda>(c, ris). (Re c, complex_roots_to_real_factorization ris))\n   (factorize_complex_main (map_poly complex_of_real p)) =\n  Some (c, qis)", "obtain d xis where fp: \"factorize_complex_main ?p = Some (d,xis)\"\n      and c: \"c = Re d\" and qis: \"qis = complex_roots_to_real_factorization xis\""], ["proof (prove)\nusing this:\n  map_option\n   (\\<lambda>(c, ris). (Re c, complex_roots_to_real_factorization ris))\n   (factorize_complex_main (map_poly complex_of_real p)) =\n  Some (c, qis)\n\ngoal (1 subgoal):\n 1. (\\<And>d xis.\n        \\<lbrakk>factorize_complex_main (map_poly complex_of_real p) =\n                 Some (d, xis);\n         c = Re d; qis = complex_roots_to_real_factorization xis\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  factorize_complex_main (map_poly complex_of_real p) = Some (d, xis)\n  c = Re d\n  qis = complex_roots_to_real_factorization xis\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "from factorize_complex_main[OF fp]"], ["proof (chain)\npicking this:\n  map_poly complex_of_real p =\n  smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)", "have p: \"?p = smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)\" \n      (is \"_ = smult d ?q\")"], ["proof (prove)\nusing this:\n  map_poly complex_of_real p =\n  smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. map_poly complex_of_real p =\n    smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)", "."], ["proof (state)\nthis:\n  map_poly complex_of_real p =\n  smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "from arg_cong[OF this, of \"\\<lambda> p. coeff p (degree p)\"]"], ["proof (chain)\npicking this:\n  lead_coeff (map_poly complex_of_real p) =\n  lead_coeff (smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))", "have \"coeff ?p (degree ?p) = coeff (smult d ?q) (degree (smult d ?q))\""], ["proof (prove)\nusing this:\n  lead_coeff (map_poly complex_of_real p) =\n  lead_coeff (smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n\ngoal (1 subgoal):\n 1. lead_coeff (map_poly complex_of_real p) =\n    lead_coeff (smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))", "."], ["proof (state)\nthis:\n  lead_coeff (map_poly complex_of_real p) =\n  lead_coeff (smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "also"], ["proof (state)\nthis:\n  lead_coeff (map_poly complex_of_real p) =\n  lead_coeff (smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"coeff ?p (degree ?p) = ?c (coeff p (degree p))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lead_coeff (map_poly complex_of_real p) = complex_of_real (lead_coeff p)", "by simp"], ["proof (state)\nthis:\n  lead_coeff (map_poly complex_of_real p) = complex_of_real (lead_coeff p)\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "also"], ["proof (state)\nthis:\n  lead_coeff (map_poly complex_of_real p) = complex_of_real (lead_coeff p)\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"coeff (smult d ?q) (degree (smult d ?q)) = d * coeff ?q (degree ?q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lead_coeff\n     (smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)) =\n    d * lead_coeff (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)", "by simp"], ["proof (state)\nthis:\n  lead_coeff (smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)) =\n  d * lead_coeff (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "also"], ["proof (state)\nthis:\n  lead_coeff (smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)) =\n  d * lead_coeff (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"monic ?q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. monic (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)", "by (rule monic_prod_list_pow)"], ["proof (state)\nthis:\n  monic (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "finally"], ["proof (chain)\npicking this:\n  complex_of_real (lead_coeff p) = d * 1", "have d: \"d = ?c (coeff p (degree p))\""], ["proof (prove)\nusing this:\n  complex_of_real (lead_coeff p) = d * 1\n\ngoal (1 subgoal):\n 1. d = complex_of_real (lead_coeff p)", "by auto"], ["proof (state)\nthis:\n  d = complex_of_real (lead_coeff p)\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "from arg_cong[OF this, of Re, folded c]"], ["proof (chain)\npicking this:\n  c = Re (complex_of_real (lead_coeff p))", "have c: \"c = coeff p (degree p)\""], ["proof (prove)\nusing this:\n  c = Re (complex_of_real (lead_coeff p))\n\ngoal (1 subgoal):\n 1. c = lead_coeff p", "by auto"], ["proof (state)\nthis:\n  c = lead_coeff p\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"set (coeffs ?p) \\<subseteq> \\<real>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set (coeffs (map_poly complex_of_real p)) \\<subseteq> \\<real>", "by auto"], ["proof (state)\nthis:\n  set (coeffs (map_poly complex_of_real p)) \\<subseteq> \\<real>\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "with p"], ["proof (chain)\npicking this:\n  map_poly complex_of_real p =\n  smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)\n  set (coeffs (map_poly complex_of_real p)) \\<subseteq> \\<real>", "have q': \"set (coeffs (smult d ?q)) \\<subseteq> \\<real>\""], ["proof (prove)\nusing this:\n  map_poly complex_of_real p =\n  smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)\n  set (coeffs (map_poly complex_of_real p)) \\<subseteq> \\<real>\n\ngoal (1 subgoal):\n 1. set (coeffs\n          (smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)))\n    \\<subseteq> \\<real>", "by auto"], ["proof (state)\nthis:\n  set (coeffs (smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)))\n  \\<subseteq> \\<real>\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "from d p0"], ["proof (chain)\npicking this:\n  d = complex_of_real (lead_coeff p)\n  p \\<noteq> 0", "have d0: \"d \\<noteq> 0\""], ["proof (prove)\nusing this:\n  d = complex_of_real (lead_coeff p)\n  p \\<noteq> 0\n\ngoal (1 subgoal):\n 1. d \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  d \\<noteq> 0\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"smult d ?q = [:d:] * ?q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n    [:d:] * (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)", "by auto"], ["proof (state)\nthis:\n  smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n  [:d:] * (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "from real_poly_factor[OF q'[unfolded this]] d0 d"], ["proof (chain)\npicking this:\n  \\<lbrakk>set (coeffs [:d:]) \\<subseteq> \\<real>; [:d:] \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> set (coeffs\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n                    \\<subseteq> \\<real>\n  d \\<noteq> 0\n  d = complex_of_real (lead_coeff p)", "have q: \"set (coeffs ?q) \\<subseteq> \\<real>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>set (coeffs [:d:]) \\<subseteq> \\<real>; [:d:] \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> set (coeffs\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n                    \\<subseteq> \\<real>\n  d \\<noteq> 0\n  d = complex_of_real (lead_coeff p)\n\ngoal (1 subgoal):\n 1. set (coeffs (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n    \\<subseteq> \\<real>", "by auto"], ["proof (state)\nthis:\n  set (coeffs (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n  \\<subseteq> \\<real>\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"p = ?rp ?p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p = map_poly Re (map_poly complex_of_real p)", "by (rule sym, subst map_poly_map_poly, force, rule map_poly_idI, auto)"], ["proof (state)\nthis:\n  p = map_poly Re (map_poly complex_of_real p)\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "also"], ["proof (state)\nthis:\n  p = map_poly Re (map_poly complex_of_real p)\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"\\<dots> = ?rp (smult d ?q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map_poly Re (map_poly complex_of_real p) =\n    map_poly Re (smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))", "unfolding p"], ["proof (prove)\ngoal (1 subgoal):\n 1. map_poly Re\n     (smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)) =\n    map_poly Re (smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))", ".."], ["proof (state)\nthis:\n  map_poly Re (map_poly complex_of_real p) =\n  map_poly Re (smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "also"], ["proof (state)\nthis:\n  map_poly Re (map_poly complex_of_real p) =\n  map_poly Re (smult d (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"?q = ?cp (?rp ?q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n    map_poly complex_of_real\n     (map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))", "by (rule sym, rule map_poly_of_real_Re, insert q, auto)"], ["proof (state)\nthis:\n  (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n  map_poly complex_of_real\n   (map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "also"], ["proof (state)\nthis:\n  (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n  map_poly complex_of_real\n   (map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"d = ?c c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. d = complex_of_real c", "unfolding d c"], ["proof (prove)\ngoal (1 subgoal):\n 1. complex_of_real (lead_coeff p) = complex_of_real (lead_coeff p)", ".."], ["proof (state)\nthis:\n  d = complex_of_real c\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "also"], ["proof (state)\nthis:\n  d = complex_of_real c\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"smult (?c c) (?cp (?rp ?q)) = ?cp (smult c (?rp ?q))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. smult (complex_of_real c)\n     (map_poly complex_of_real\n       (map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))) =\n    map_poly complex_of_real\n     (smult c\n       (map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)))", "by (simp add: hom_distribs)"], ["proof (state)\nthis:\n  smult (complex_of_real c)\n   (map_poly complex_of_real\n     (map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))) =\n  map_poly complex_of_real\n   (smult c\n     (map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)))\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "also"], ["proof (state)\nthis:\n  smult (complex_of_real c)\n   (map_poly complex_of_real\n     (map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))) =\n  map_poly complex_of_real\n   (smult c\n     (map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)))\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"?rp \\<dots> = smult c (?rp ?q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map_poly Re\n     (map_poly complex_of_real\n       (smult c\n         (map_poly Re\n           (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)))) =\n    smult c (map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))", "by (subst map_poly_map_poly, force, rule map_poly_idI, auto)"], ["proof (state)\nthis:\n  map_poly Re\n   (map_poly complex_of_real\n     (smult c\n       (map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)))) =\n  smult c (map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "finally"], ["proof (chain)\npicking this:\n  p =\n  smult c (map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))", "have p: \"p = smult c (?rp ?q)\""], ["proof (prove)\nusing this:\n  p =\n  smult c (map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n\ngoal (1 subgoal):\n 1. p =\n    smult c (map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))", "."], ["proof (state)\nthis:\n  p =\n  smult c (map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "let ?fact = complex_roots_to_real_factorization"], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"?rp ?q = (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n      ((q, j) \\<in> set qis \\<longrightarrow> irreducible q \\<and> j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n    (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "using q"], ["proof (prove)\nusing this:\n  set (coeffs (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n  \\<subseteq> \\<real>\n\ngoal (1 subgoal):\n 1. map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n    (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "unfolding qis"], ["proof (prove)\nusing this:\n  set (coeffs (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n  \\<subseteq> \\<real>\n\ngoal (1 subgoal):\n 1. map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n    (\\<Prod>(q,\n        i)\\<leftarrow>complex_roots_to_real_factorization xis. q ^ i) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization xis) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "proof (induct xis rule: complex_roots_to_real_factorization.induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. set (coeffs (\\<Prod>(x, i)\\<leftarrow>[]. [:- x, 1:] ^ Suc i))\n    \\<subseteq> \\<real> \\<Longrightarrow>\n    map_poly Re (\\<Prod>(x, i)\\<leftarrow>[]. [:- x, 1:] ^ Suc i) =\n    (\\<Prod>(x,\n        y)\\<leftarrow>complex_roots_to_real_factorization []. x ^ y) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization []) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n 2. \\<And>x i xs.\n       \\<lbrakk>\\<lbrakk>x \\<in> \\<real>;\n                 set (coeffs\n                       (\\<Prod>(x, i)\\<leftarrow>xs. [:- x, 1:] ^ Suc i))\n                 \\<subseteq> \\<real>\\<rbrakk>\n                \\<Longrightarrow> map_poly Re\n                                   (\\<Prod>(x,\n i)\\<leftarrow>xs. [:- x, 1:] ^ Suc i) =\n                                  (\\<Prod>(x,\ny)\\<leftarrow>complex_roots_to_real_factorization xs. x ^ y) \\<and>\n                                  ((q, j)\n                                   \\<in> set\n    (complex_roots_to_real_factorization xs) \\<longrightarrow>\n                                   irreducible q \\<and>\n                                   j \\<noteq> 0 \\<and>\n                                   monic q \\<and> degree q \\<in> {1, 2});\n        \\<And>xa xb xc.\n           \\<lbrakk>x \\<notin> \\<real>; xa = cnj x;\n            xb = delete_cnj xa (Suc i) xs;\n            xc = map_poly Re ([:- x, 1:] * [:- xa, 1:]);\n            set (coeffs (\\<Prod>(x, i)\\<leftarrow>xb. [:- x, 1:] ^ Suc i))\n            \\<subseteq> \\<real>\\<rbrakk>\n           \\<Longrightarrow> map_poly Re\n                              (\\<Prod>(x,\n                                  i)\\<leftarrow>xb. [:- x, 1:] ^ Suc i) =\n                             (\\<Prod>(x,\n                                 y)\\<leftarrow>complex_roots_to_real_factorization\n          xb. x ^ y) \\<and>\n                             ((q, j)\n                              \\<in> set (complex_roots_to_real_factorization\n    xb) \\<longrightarrow>\n                              irreducible q \\<and>\n                              j \\<noteq> 0 \\<and>\n                              monic q \\<and> degree q \\<in> {1, 2});\n        set (coeffs\n              (\\<Prod>(x, i)\\<leftarrow>(x, i) # xs. [:- x, 1:] ^ Suc i))\n        \\<subseteq> \\<real>\\<rbrakk>\n       \\<Longrightarrow> map_poly Re\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>(x, i) #\n      xs. [:- x, 1:] ^ Suc i) =\n                         (\\<Prod>(x,\n                             y)\\<leftarrow>complex_roots_to_real_factorization\n      ((x, i) # xs). x ^ y) \\<and>\n                         ((q, j)\n                          \\<in> set (complex_roots_to_real_factorization\n((x, i) # xs)) \\<longrightarrow>\n                          irreducible q \\<and>\n                          j \\<noteq> 0 \\<and>\n                          monic q \\<and> degree q \\<in> {1, 2})", "case 1"], ["proof (state)\nthis:\n  set (coeffs\n        (\\<Prod>a\\<leftarrow>[]. case a of\n                                 (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i))\n  \\<subseteq> \\<real>\n\ngoal (2 subgoals):\n 1. set (coeffs (\\<Prod>(x, i)\\<leftarrow>[]. [:- x, 1:] ^ Suc i))\n    \\<subseteq> \\<real> \\<Longrightarrow>\n    map_poly Re (\\<Prod>(x, i)\\<leftarrow>[]. [:- x, 1:] ^ Suc i) =\n    (\\<Prod>(x,\n        y)\\<leftarrow>complex_roots_to_real_factorization []. x ^ y) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization []) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n 2. \\<And>x i xs.\n       \\<lbrakk>\\<lbrakk>x \\<in> \\<real>;\n                 set (coeffs\n                       (\\<Prod>(x, i)\\<leftarrow>xs. [:- x, 1:] ^ Suc i))\n                 \\<subseteq> \\<real>\\<rbrakk>\n                \\<Longrightarrow> map_poly Re\n                                   (\\<Prod>(x,\n i)\\<leftarrow>xs. [:- x, 1:] ^ Suc i) =\n                                  (\\<Prod>(x,\ny)\\<leftarrow>complex_roots_to_real_factorization xs. x ^ y) \\<and>\n                                  ((q, j)\n                                   \\<in> set\n    (complex_roots_to_real_factorization xs) \\<longrightarrow>\n                                   irreducible q \\<and>\n                                   j \\<noteq> 0 \\<and>\n                                   monic q \\<and> degree q \\<in> {1, 2});\n        \\<And>xa xb xc.\n           \\<lbrakk>x \\<notin> \\<real>; xa = cnj x;\n            xb = delete_cnj xa (Suc i) xs;\n            xc = map_poly Re ([:- x, 1:] * [:- xa, 1:]);\n            set (coeffs (\\<Prod>(x, i)\\<leftarrow>xb. [:- x, 1:] ^ Suc i))\n            \\<subseteq> \\<real>\\<rbrakk>\n           \\<Longrightarrow> map_poly Re\n                              (\\<Prod>(x,\n                                  i)\\<leftarrow>xb. [:- x, 1:] ^ Suc i) =\n                             (\\<Prod>(x,\n                                 y)\\<leftarrow>complex_roots_to_real_factorization\n          xb. x ^ y) \\<and>\n                             ((q, j)\n                              \\<in> set (complex_roots_to_real_factorization\n    xb) \\<longrightarrow>\n                              irreducible q \\<and>\n                              j \\<noteq> 0 \\<and>\n                              monic q \\<and> degree q \\<in> {1, 2});\n        set (coeffs\n              (\\<Prod>(x, i)\\<leftarrow>(x, i) # xs. [:- x, 1:] ^ Suc i))\n        \\<subseteq> \\<real>\\<rbrakk>\n       \\<Longrightarrow> map_poly Re\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>(x, i) #\n      xs. [:- x, 1:] ^ Suc i) =\n                         (\\<Prod>(x,\n                             y)\\<leftarrow>complex_roots_to_real_factorization\n      ((x, i) # xs). x ^ y) \\<and>\n                         ((q, j)\n                          \\<in> set (complex_roots_to_real_factorization\n((x, i) # xs)) \\<longrightarrow>\n                          irreducible q \\<and>\n                          j \\<noteq> 0 \\<and>\n                          monic q \\<and> degree q \\<in> {1, 2})", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. map_poly Re\n     (\\<Prod>a\\<leftarrow>[]. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          []. case a of (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization []) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "by simp"], ["proof (state)\nthis:\n  map_poly Re\n   (\\<Prod>a\\<leftarrow>[]. case a of\n                            (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                        []. case a of (a, b) \\<Rightarrow> a ^ b) \\<and>\n  ((q, j)\n   \\<in> set (complex_roots_to_real_factorization []) \\<longrightarrow>\n   irreducible q \\<and>\n   j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n\ngoal (1 subgoal):\n 1. \\<And>x i xs.\n       \\<lbrakk>\\<lbrakk>x \\<in> \\<real>;\n                 set (coeffs\n                       (\\<Prod>(x, i)\\<leftarrow>xs. [:- x, 1:] ^ Suc i))\n                 \\<subseteq> \\<real>\\<rbrakk>\n                \\<Longrightarrow> map_poly Re\n                                   (\\<Prod>(x,\n i)\\<leftarrow>xs. [:- x, 1:] ^ Suc i) =\n                                  (\\<Prod>(x,\ny)\\<leftarrow>complex_roots_to_real_factorization xs. x ^ y) \\<and>\n                                  ((q, j)\n                                   \\<in> set\n    (complex_roots_to_real_factorization xs) \\<longrightarrow>\n                                   irreducible q \\<and>\n                                   j \\<noteq> 0 \\<and>\n                                   monic q \\<and> degree q \\<in> {1, 2});\n        \\<And>xa xb xc.\n           \\<lbrakk>x \\<notin> \\<real>; xa = cnj x;\n            xb = delete_cnj xa (Suc i) xs;\n            xc = map_poly Re ([:- x, 1:] * [:- xa, 1:]);\n            set (coeffs (\\<Prod>(x, i)\\<leftarrow>xb. [:- x, 1:] ^ Suc i))\n            \\<subseteq> \\<real>\\<rbrakk>\n           \\<Longrightarrow> map_poly Re\n                              (\\<Prod>(x,\n                                  i)\\<leftarrow>xb. [:- x, 1:] ^ Suc i) =\n                             (\\<Prod>(x,\n                                 y)\\<leftarrow>complex_roots_to_real_factorization\n          xb. x ^ y) \\<and>\n                             ((q, j)\n                              \\<in> set (complex_roots_to_real_factorization\n    xb) \\<longrightarrow>\n                              irreducible q \\<and>\n                              j \\<noteq> 0 \\<and>\n                              monic q \\<and> degree q \\<in> {1, 2});\n        set (coeffs\n              (\\<Prod>(x, i)\\<leftarrow>(x, i) # xs. [:- x, 1:] ^ Suc i))\n        \\<subseteq> \\<real>\\<rbrakk>\n       \\<Longrightarrow> map_poly Re\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>(x, i) #\n      xs. [:- x, 1:] ^ Suc i) =\n                         (\\<Prod>(x,\n                             y)\\<leftarrow>complex_roots_to_real_factorization\n      ((x, i) # xs). x ^ y) \\<and>\n                         ((q, j)\n                          \\<in> set (complex_roots_to_real_factorization\n((x, i) # xs)) \\<longrightarrow>\n                          irreducible q \\<and>\n                          j \\<noteq> 0 \\<and>\n                          monic q \\<and> degree q \\<in> {1, 2})", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x i xs.\n       \\<lbrakk>\\<lbrakk>x \\<in> \\<real>;\n                 set (coeffs\n                       (\\<Prod>(x, i)\\<leftarrow>xs. [:- x, 1:] ^ Suc i))\n                 \\<subseteq> \\<real>\\<rbrakk>\n                \\<Longrightarrow> map_poly Re\n                                   (\\<Prod>(x,\n i)\\<leftarrow>xs. [:- x, 1:] ^ Suc i) =\n                                  (\\<Prod>(x,\ny)\\<leftarrow>complex_roots_to_real_factorization xs. x ^ y) \\<and>\n                                  ((q, j)\n                                   \\<in> set\n    (complex_roots_to_real_factorization xs) \\<longrightarrow>\n                                   irreducible q \\<and>\n                                   j \\<noteq> 0 \\<and>\n                                   monic q \\<and> degree q \\<in> {1, 2});\n        \\<And>xa xb xc.\n           \\<lbrakk>x \\<notin> \\<real>; xa = cnj x;\n            xb = delete_cnj xa (Suc i) xs;\n            xc = map_poly Re ([:- x, 1:] * [:- xa, 1:]);\n            set (coeffs (\\<Prod>(x, i)\\<leftarrow>xb. [:- x, 1:] ^ Suc i))\n            \\<subseteq> \\<real>\\<rbrakk>\n           \\<Longrightarrow> map_poly Re\n                              (\\<Prod>(x,\n                                  i)\\<leftarrow>xb. [:- x, 1:] ^ Suc i) =\n                             (\\<Prod>(x,\n                                 y)\\<leftarrow>complex_roots_to_real_factorization\n          xb. x ^ y) \\<and>\n                             ((q, j)\n                              \\<in> set (complex_roots_to_real_factorization\n    xb) \\<longrightarrow>\n                              irreducible q \\<and>\n                              j \\<noteq> 0 \\<and>\n                              monic q \\<and> degree q \\<in> {1, 2});\n        set (coeffs\n              (\\<Prod>(x, i)\\<leftarrow>(x, i) # xs. [:- x, 1:] ^ Suc i))\n        \\<subseteq> \\<real>\\<rbrakk>\n       \\<Longrightarrow> map_poly Re\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>(x, i) #\n      xs. [:- x, 1:] ^ Suc i) =\n                         (\\<Prod>(x,\n                             y)\\<leftarrow>complex_roots_to_real_factorization\n      ((x, i) # xs). x ^ y) \\<and>\n                         ((q, j)\n                          \\<in> set (complex_roots_to_real_factorization\n((x, i) # xs)) \\<longrightarrow>\n                          irreducible q \\<and>\n                          j \\<noteq> 0 \\<and>\n                          monic q \\<and> degree q \\<in> {1, 2})", "case (2 x i xis)"], ["proof (state)\nthis:\n  \\<lbrakk>x \\<in> \\<real>;\n   set (coeffs\n         (\\<Prod>a\\<leftarrow>xis. case a of\n                                   (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i))\n   \\<subseteq> \\<real>\\<rbrakk>\n  \\<Longrightarrow> map_poly Re\n                     (\\<Prod>a\\<leftarrow>xis. case a of\n         (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n                    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n    xis. case a of (a, b) \\<Rightarrow> a ^ b) \\<and>\n                    ((q, j)\n                     \\<in> set (complex_roots_to_real_factorization\n                                 xis) \\<longrightarrow>\n                     irreducible q \\<and>\n                     j \\<noteq> 0 \\<and>\n                     monic q \\<and> degree q \\<in> {1, 2})\n  \\<lbrakk>x \\<notin> \\<real>; ?xa1 = cnj x;\n   ?xb1 = delete_cnj ?xa1 (Suc i) xis;\n   ?xc1 = map_poly Re ([:- x, 1:] * [:- ?xa1, 1:]);\n   set (coeffs\n         (\\<Prod>a\\<leftarrow>?xb1. case a of\n                                    (x, i) \\<Rightarrow>\n[:- x, 1:] ^ Suc i))\n   \\<subseteq> \\<real>\\<rbrakk>\n  \\<Longrightarrow> map_poly Re\n                     (\\<Prod>a\\<leftarrow>?xb1. case a of\n          (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n                    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n    ?xb1. case a of (a, b) \\<Rightarrow> a ^ b) \\<and>\n                    ((q, j)\n                     \\<in> set (complex_roots_to_real_factorization\n                                 ?xb1) \\<longrightarrow>\n                     irreducible q \\<and>\n                     j \\<noteq> 0 \\<and>\n                     monic q \\<and> degree q \\<in> {1, 2})\n  set (coeffs\n        (\\<Prod>a\\<leftarrow>(x, i) #\n                             xis. case a of\n                                  (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i))\n  \\<subseteq> \\<real>\n\ngoal (1 subgoal):\n 1. \\<And>x i xs.\n       \\<lbrakk>\\<lbrakk>x \\<in> \\<real>;\n                 set (coeffs\n                       (\\<Prod>(x, i)\\<leftarrow>xs. [:- x, 1:] ^ Suc i))\n                 \\<subseteq> \\<real>\\<rbrakk>\n                \\<Longrightarrow> map_poly Re\n                                   (\\<Prod>(x,\n i)\\<leftarrow>xs. [:- x, 1:] ^ Suc i) =\n                                  (\\<Prod>(x,\ny)\\<leftarrow>complex_roots_to_real_factorization xs. x ^ y) \\<and>\n                                  ((q, j)\n                                   \\<in> set\n    (complex_roots_to_real_factorization xs) \\<longrightarrow>\n                                   irreducible q \\<and>\n                                   j \\<noteq> 0 \\<and>\n                                   monic q \\<and> degree q \\<in> {1, 2});\n        \\<And>xa xb xc.\n           \\<lbrakk>x \\<notin> \\<real>; xa = cnj x;\n            xb = delete_cnj xa (Suc i) xs;\n            xc = map_poly Re ([:- x, 1:] * [:- xa, 1:]);\n            set (coeffs (\\<Prod>(x, i)\\<leftarrow>xb. [:- x, 1:] ^ Suc i))\n            \\<subseteq> \\<real>\\<rbrakk>\n           \\<Longrightarrow> map_poly Re\n                              (\\<Prod>(x,\n                                  i)\\<leftarrow>xb. [:- x, 1:] ^ Suc i) =\n                             (\\<Prod>(x,\n                                 y)\\<leftarrow>complex_roots_to_real_factorization\n          xb. x ^ y) \\<and>\n                             ((q, j)\n                              \\<in> set (complex_roots_to_real_factorization\n    xb) \\<longrightarrow>\n                              irreducible q \\<and>\n                              j \\<noteq> 0 \\<and>\n                              monic q \\<and> degree q \\<in> {1, 2});\n        set (coeffs\n              (\\<Prod>(x, i)\\<leftarrow>(x, i) # xs. [:- x, 1:] ^ Suc i))\n        \\<subseteq> \\<real>\\<rbrakk>\n       \\<Longrightarrow> map_poly Re\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>(x, i) #\n      xs. [:- x, 1:] ^ Suc i) =\n                         (\\<Prod>(x,\n                             y)\\<leftarrow>complex_roots_to_real_factorization\n      ((x, i) # xs). x ^ y) \\<and>\n                         ((q, j)\n                          \\<in> set (complex_roots_to_real_factorization\n((x, i) # xs)) \\<longrightarrow>\n                          irreducible q \\<and>\n                          j \\<noteq> 0 \\<and>\n                          monic q \\<and> degree q \\<in> {1, 2})", "note IH = 2(1-2)"], ["proof (state)\nthis:\n  \\<lbrakk>x \\<in> \\<real>;\n   set (coeffs\n         (\\<Prod>a\\<leftarrow>xis. case a of\n                                   (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i))\n   \\<subseteq> \\<real>\\<rbrakk>\n  \\<Longrightarrow> map_poly Re\n                     (\\<Prod>a\\<leftarrow>xis. case a of\n         (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n                    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n    xis. case a of (a, b) \\<Rightarrow> a ^ b) \\<and>\n                    ((q, j)\n                     \\<in> set (complex_roots_to_real_factorization\n                                 xis) \\<longrightarrow>\n                     irreducible q \\<and>\n                     j \\<noteq> 0 \\<and>\n                     monic q \\<and> degree q \\<in> {1, 2})\n  \\<lbrakk>x \\<notin> \\<real>; ?xa1 = cnj x;\n   ?xb1 = delete_cnj ?xa1 (Suc i) xis;\n   ?xc1 = map_poly Re ([:- x, 1:] * [:- ?xa1, 1:]);\n   set (coeffs\n         (\\<Prod>a\\<leftarrow>?xb1. case a of\n                                    (x, i) \\<Rightarrow>\n[:- x, 1:] ^ Suc i))\n   \\<subseteq> \\<real>\\<rbrakk>\n  \\<Longrightarrow> map_poly Re\n                     (\\<Prod>a\\<leftarrow>?xb1. case a of\n          (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n                    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n    ?xb1. case a of (a, b) \\<Rightarrow> a ^ b) \\<and>\n                    ((q, j)\n                     \\<in> set (complex_roots_to_real_factorization\n                                 ?xb1) \\<longrightarrow>\n                     irreducible q \\<and>\n                     j \\<noteq> 0 \\<and>\n                     monic q \\<and> degree q \\<in> {1, 2})\n\ngoal (1 subgoal):\n 1. \\<And>x i xs.\n       \\<lbrakk>\\<lbrakk>x \\<in> \\<real>;\n                 set (coeffs\n                       (\\<Prod>(x, i)\\<leftarrow>xs. [:- x, 1:] ^ Suc i))\n                 \\<subseteq> \\<real>\\<rbrakk>\n                \\<Longrightarrow> map_poly Re\n                                   (\\<Prod>(x,\n i)\\<leftarrow>xs. [:- x, 1:] ^ Suc i) =\n                                  (\\<Prod>(x,\ny)\\<leftarrow>complex_roots_to_real_factorization xs. x ^ y) \\<and>\n                                  ((q, j)\n                                   \\<in> set\n    (complex_roots_to_real_factorization xs) \\<longrightarrow>\n                                   irreducible q \\<and>\n                                   j \\<noteq> 0 \\<and>\n                                   monic q \\<and> degree q \\<in> {1, 2});\n        \\<And>xa xb xc.\n           \\<lbrakk>x \\<notin> \\<real>; xa = cnj x;\n            xb = delete_cnj xa (Suc i) xs;\n            xc = map_poly Re ([:- x, 1:] * [:- xa, 1:]);\n            set (coeffs (\\<Prod>(x, i)\\<leftarrow>xb. [:- x, 1:] ^ Suc i))\n            \\<subseteq> \\<real>\\<rbrakk>\n           \\<Longrightarrow> map_poly Re\n                              (\\<Prod>(x,\n                                  i)\\<leftarrow>xb. [:- x, 1:] ^ Suc i) =\n                             (\\<Prod>(x,\n                                 y)\\<leftarrow>complex_roots_to_real_factorization\n          xb. x ^ y) \\<and>\n                             ((q, j)\n                              \\<in> set (complex_roots_to_real_factorization\n    xb) \\<longrightarrow>\n                              irreducible q \\<and>\n                              j \\<noteq> 0 \\<and>\n                              monic q \\<and> degree q \\<in> {1, 2});\n        set (coeffs\n              (\\<Prod>(x, i)\\<leftarrow>(x, i) # xs. [:- x, 1:] ^ Suc i))\n        \\<subseteq> \\<real>\\<rbrakk>\n       \\<Longrightarrow> map_poly Re\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>(x, i) #\n      xs. [:- x, 1:] ^ Suc i) =\n                         (\\<Prod>(x,\n                             y)\\<leftarrow>complex_roots_to_real_factorization\n      ((x, i) # xs). x ^ y) \\<and>\n                         ((q, j)\n                          \\<in> set (complex_roots_to_real_factorization\n((x, i) # xs)) \\<longrightarrow>\n                          irreducible q \\<and>\n                          j \\<noteq> 0 \\<and>\n                          monic q \\<and> degree q \\<in> {1, 2})", "note prems = 2(3)"], ["proof (state)\nthis:\n  set (coeffs\n        (\\<Prod>a\\<leftarrow>(x, i) #\n                             xis. case a of\n                                  (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i))\n  \\<subseteq> \\<real>\n\ngoal (1 subgoal):\n 1. \\<And>x i xs.\n       \\<lbrakk>\\<lbrakk>x \\<in> \\<real>;\n                 set (coeffs\n                       (\\<Prod>(x, i)\\<leftarrow>xs. [:- x, 1:] ^ Suc i))\n                 \\<subseteq> \\<real>\\<rbrakk>\n                \\<Longrightarrow> map_poly Re\n                                   (\\<Prod>(x,\n i)\\<leftarrow>xs. [:- x, 1:] ^ Suc i) =\n                                  (\\<Prod>(x,\ny)\\<leftarrow>complex_roots_to_real_factorization xs. x ^ y) \\<and>\n                                  ((q, j)\n                                   \\<in> set\n    (complex_roots_to_real_factorization xs) \\<longrightarrow>\n                                   irreducible q \\<and>\n                                   j \\<noteq> 0 \\<and>\n                                   monic q \\<and> degree q \\<in> {1, 2});\n        \\<And>xa xb xc.\n           \\<lbrakk>x \\<notin> \\<real>; xa = cnj x;\n            xb = delete_cnj xa (Suc i) xs;\n            xc = map_poly Re ([:- x, 1:] * [:- xa, 1:]);\n            set (coeffs (\\<Prod>(x, i)\\<leftarrow>xb. [:- x, 1:] ^ Suc i))\n            \\<subseteq> \\<real>\\<rbrakk>\n           \\<Longrightarrow> map_poly Re\n                              (\\<Prod>(x,\n                                  i)\\<leftarrow>xb. [:- x, 1:] ^ Suc i) =\n                             (\\<Prod>(x,\n                                 y)\\<leftarrow>complex_roots_to_real_factorization\n          xb. x ^ y) \\<and>\n                             ((q, j)\n                              \\<in> set (complex_roots_to_real_factorization\n    xb) \\<longrightarrow>\n                              irreducible q \\<and>\n                              j \\<noteq> 0 \\<and>\n                              monic q \\<and> degree q \\<in> {1, 2});\n        set (coeffs\n              (\\<Prod>(x, i)\\<leftarrow>(x, i) # xs. [:- x, 1:] ^ Suc i))\n        \\<subseteq> \\<real>\\<rbrakk>\n       \\<Longrightarrow> map_poly Re\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>(x, i) #\n      xs. [:- x, 1:] ^ Suc i) =\n                         (\\<Prod>(x,\n                             y)\\<leftarrow>complex_roots_to_real_factorization\n      ((x, i) # xs). x ^ y) \\<and>\n                         ((q, j)\n                          \\<in> set (complex_roots_to_real_factorization\n((x, i) # xs)) \\<longrightarrow>\n                          irreducible q \\<and>\n                          j \\<noteq> 0 \\<and>\n                          monic q \\<and> degree q \\<in> {1, 2})", "let ?xi = \"[:- x, 1:] ^ Suc i\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x i xs.\n       \\<lbrakk>\\<lbrakk>x \\<in> \\<real>;\n                 set (coeffs\n                       (\\<Prod>(x, i)\\<leftarrow>xs. [:- x, 1:] ^ Suc i))\n                 \\<subseteq> \\<real>\\<rbrakk>\n                \\<Longrightarrow> map_poly Re\n                                   (\\<Prod>(x,\n i)\\<leftarrow>xs. [:- x, 1:] ^ Suc i) =\n                                  (\\<Prod>(x,\ny)\\<leftarrow>complex_roots_to_real_factorization xs. x ^ y) \\<and>\n                                  ((q, j)\n                                   \\<in> set\n    (complex_roots_to_real_factorization xs) \\<longrightarrow>\n                                   irreducible q \\<and>\n                                   j \\<noteq> 0 \\<and>\n                                   monic q \\<and> degree q \\<in> {1, 2});\n        \\<And>xa xb xc.\n           \\<lbrakk>x \\<notin> \\<real>; xa = cnj x;\n            xb = delete_cnj xa (Suc i) xs;\n            xc = map_poly Re ([:- x, 1:] * [:- xa, 1:]);\n            set (coeffs (\\<Prod>(x, i)\\<leftarrow>xb. [:- x, 1:] ^ Suc i))\n            \\<subseteq> \\<real>\\<rbrakk>\n           \\<Longrightarrow> map_poly Re\n                              (\\<Prod>(x,\n                                  i)\\<leftarrow>xb. [:- x, 1:] ^ Suc i) =\n                             (\\<Prod>(x,\n                                 y)\\<leftarrow>complex_roots_to_real_factorization\n          xb. x ^ y) \\<and>\n                             ((q, j)\n                              \\<in> set (complex_roots_to_real_factorization\n    xb) \\<longrightarrow>\n                              irreducible q \\<and>\n                              j \\<noteq> 0 \\<and>\n                              monic q \\<and> degree q \\<in> {1, 2});\n        set (coeffs\n              (\\<Prod>(x, i)\\<leftarrow>(x, i) # xs. [:- x, 1:] ^ Suc i))\n        \\<subseteq> \\<real>\\<rbrakk>\n       \\<Longrightarrow> map_poly Re\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>(x, i) #\n      xs. [:- x, 1:] ^ Suc i) =\n                         (\\<Prod>(x,\n                             y)\\<leftarrow>complex_roots_to_real_factorization\n      ((x, i) # xs). x ^ y) \\<and>\n                         ((q, j)\n                          \\<in> set (complex_roots_to_real_factorization\n((x, i) # xs)) \\<longrightarrow>\n                          irreducible q \\<and>\n                          j \\<noteq> 0 \\<and>\n                          monic q \\<and> degree q \\<in> {1, 2})", "let ?xis = \"(\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x i xs.\n       \\<lbrakk>\\<lbrakk>x \\<in> \\<real>;\n                 set (coeffs\n                       (\\<Prod>(x, i)\\<leftarrow>xs. [:- x, 1:] ^ Suc i))\n                 \\<subseteq> \\<real>\\<rbrakk>\n                \\<Longrightarrow> map_poly Re\n                                   (\\<Prod>(x,\n i)\\<leftarrow>xs. [:- x, 1:] ^ Suc i) =\n                                  (\\<Prod>(x,\ny)\\<leftarrow>complex_roots_to_real_factorization xs. x ^ y) \\<and>\n                                  ((q, j)\n                                   \\<in> set\n    (complex_roots_to_real_factorization xs) \\<longrightarrow>\n                                   irreducible q \\<and>\n                                   j \\<noteq> 0 \\<and>\n                                   monic q \\<and> degree q \\<in> {1, 2});\n        \\<And>xa xb xc.\n           \\<lbrakk>x \\<notin> \\<real>; xa = cnj x;\n            xb = delete_cnj xa (Suc i) xs;\n            xc = map_poly Re ([:- x, 1:] * [:- xa, 1:]);\n            set (coeffs (\\<Prod>(x, i)\\<leftarrow>xb. [:- x, 1:] ^ Suc i))\n            \\<subseteq> \\<real>\\<rbrakk>\n           \\<Longrightarrow> map_poly Re\n                              (\\<Prod>(x,\n                                  i)\\<leftarrow>xb. [:- x, 1:] ^ Suc i) =\n                             (\\<Prod>(x,\n                                 y)\\<leftarrow>complex_roots_to_real_factorization\n          xb. x ^ y) \\<and>\n                             ((q, j)\n                              \\<in> set (complex_roots_to_real_factorization\n    xb) \\<longrightarrow>\n                              irreducible q \\<and>\n                              j \\<noteq> 0 \\<and>\n                              monic q \\<and> degree q \\<in> {1, 2});\n        set (coeffs\n              (\\<Prod>(x, i)\\<leftarrow>(x, i) # xs. [:- x, 1:] ^ Suc i))\n        \\<subseteq> \\<real>\\<rbrakk>\n       \\<Longrightarrow> map_poly Re\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>(x, i) #\n      xs. [:- x, 1:] ^ Suc i) =\n                         (\\<Prod>(x,\n                             y)\\<leftarrow>complex_roots_to_real_factorization\n      ((x, i) # xs). x ^ y) \\<and>\n                         ((q, j)\n                          \\<in> set (complex_roots_to_real_factorization\n((x, i) # xs)) \\<longrightarrow>\n                          irreducible q \\<and>\n                          j \\<noteq> 0 \\<and>\n                          monic q \\<and> degree q \\<in> {1, 2})", "have id: \"(\\<Prod>(x, i)\\<leftarrow>((x,i) # xis). [:- x, 1:] ^ Suc i) = ?xi * ?xis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Prod>(x, i)\\<leftarrow>(x, i) # xis. [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ Suc i * (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)", "by simp"], ["proof (state)\nthis:\n  (\\<Prod>(x, i)\\<leftarrow>(x, i) # xis. [:- x, 1:] ^ Suc i) =\n  [:- x, 1:] ^ Suc i * (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. \\<And>x i xs.\n       \\<lbrakk>\\<lbrakk>x \\<in> \\<real>;\n                 set (coeffs\n                       (\\<Prod>(x, i)\\<leftarrow>xs. [:- x, 1:] ^ Suc i))\n                 \\<subseteq> \\<real>\\<rbrakk>\n                \\<Longrightarrow> map_poly Re\n                                   (\\<Prod>(x,\n i)\\<leftarrow>xs. [:- x, 1:] ^ Suc i) =\n                                  (\\<Prod>(x,\ny)\\<leftarrow>complex_roots_to_real_factorization xs. x ^ y) \\<and>\n                                  ((q, j)\n                                   \\<in> set\n    (complex_roots_to_real_factorization xs) \\<longrightarrow>\n                                   irreducible q \\<and>\n                                   j \\<noteq> 0 \\<and>\n                                   monic q \\<and> degree q \\<in> {1, 2});\n        \\<And>xa xb xc.\n           \\<lbrakk>x \\<notin> \\<real>; xa = cnj x;\n            xb = delete_cnj xa (Suc i) xs;\n            xc = map_poly Re ([:- x, 1:] * [:- xa, 1:]);\n            set (coeffs (\\<Prod>(x, i)\\<leftarrow>xb. [:- x, 1:] ^ Suc i))\n            \\<subseteq> \\<real>\\<rbrakk>\n           \\<Longrightarrow> map_poly Re\n                              (\\<Prod>(x,\n                                  i)\\<leftarrow>xb. [:- x, 1:] ^ Suc i) =\n                             (\\<Prod>(x,\n                                 y)\\<leftarrow>complex_roots_to_real_factorization\n          xb. x ^ y) \\<and>\n                             ((q, j)\n                              \\<in> set (complex_roots_to_real_factorization\n    xb) \\<longrightarrow>\n                              irreducible q \\<and>\n                              j \\<noteq> 0 \\<and>\n                              monic q \\<and> degree q \\<in> {1, 2});\n        set (coeffs\n              (\\<Prod>(x, i)\\<leftarrow>(x, i) # xs. [:- x, 1:] ^ Suc i))\n        \\<subseteq> \\<real>\\<rbrakk>\n       \\<Longrightarrow> map_poly Re\n                          (\\<Prod>(x,\n                              i)\\<leftarrow>(x, i) #\n      xs. [:- x, 1:] ^ Suc i) =\n                         (\\<Prod>(x,\n                             y)\\<leftarrow>complex_roots_to_real_factorization\n      ((x, i) # xs). x ^ y) \\<and>\n                         ((q, j)\n                          \\<in> set (complex_roots_to_real_factorization\n((x, i) # xs)) \\<longrightarrow>\n                          irreducible q \\<and>\n                          j \\<noteq> 0 \\<and>\n                          monic q \\<and> degree q \\<in> {1, 2})", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "proof (cases \"x \\<in> \\<real>\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n 2. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "case True"], ["proof (state)\nthis:\n  x \\<in> \\<real>\n\ngoal (2 subgoals):\n 1. x \\<in> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n 2. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have xi: \"set (coeffs ?xi) \\<subseteq> \\<real>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set (coeffs ([:- x, 1:] ^ Suc i)) \\<subseteq> \\<real>", "by (rule real_poly_power, insert True, auto)"], ["proof (state)\nthis:\n  set (coeffs ([:- x, 1:] ^ Suc i)) \\<subseteq> \\<real>\n\ngoal (2 subgoals):\n 1. x \\<in> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n 2. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have xis: \"set (coeffs ?xis) \\<subseteq> \\<real>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set (coeffs (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n    \\<subseteq> \\<real>", "by (rule real_poly_factor[OF prems[unfolded id] xi], rule linear_power_nonzero)"], ["proof (state)\nthis:\n  set (coeffs (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n  \\<subseteq> \\<real>\n\ngoal (2 subgoals):\n 1. x \\<in> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n 2. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "note IH = IH(1)[OF True xis]"], ["proof (state)\nthis:\n  map_poly Re\n   (\\<Prod>a\\<leftarrow>xis. case a of\n                             (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                        xis. case a of (a, b) \\<Rightarrow> a ^ b) \\<and>\n  ((q, j)\n   \\<in> set (complex_roots_to_real_factorization xis) \\<longrightarrow>\n   irreducible q \\<and>\n   j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n\ngoal (2 subgoals):\n 1. x \\<in> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n 2. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"?rp (?xi * ?xis) = ?rp ?xi * ?rp ?xis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map_poly Re\n     ([:- x, 1:] ^ Suc i *\n      (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)) =\n    map_poly Re ([:- x, 1:] ^ Suc i) *\n    map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)", "by (rule map_poly_Re_mult[OF xi xis])"], ["proof (state)\nthis:\n  map_poly Re\n   ([:- x, 1:] ^ Suc i *\n    (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)) =\n  map_poly Re ([:- x, 1:] ^ Suc i) *\n  map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)\n\ngoal (2 subgoals):\n 1. x \\<in> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n 2. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "also"], ["proof (state)\nthis:\n  map_poly Re\n   ([:- x, 1:] ^ Suc i *\n    (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)) =\n  map_poly Re ([:- x, 1:] ^ Suc i) *\n  map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)\n\ngoal (2 subgoals):\n 1. x \\<in> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n 2. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"?rp ?xi = (?rp [: -x,1 :])^Suc i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map_poly Re ([:- x, 1:] ^ Suc i) = map_poly Re [:- x, 1:] ^ Suc i", "by (rule map_poly_Re_power, insert True, auto)"], ["proof (state)\nthis:\n  map_poly Re ([:- x, 1:] ^ Suc i) = map_poly Re [:- x, 1:] ^ Suc i\n\ngoal (2 subgoals):\n 1. x \\<in> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n 2. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "also"], ["proof (state)\nthis:\n  map_poly Re ([:- x, 1:] ^ Suc i) = map_poly Re [:- x, 1:] ^ Suc i\n\ngoal (2 subgoals):\n 1. x \\<in> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n 2. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"?rp [: -x,1 :] = [:-(Re x),1:]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map_poly Re [:- x, 1:] = [:- Re x, 1:]", "by auto"], ["proof (state)\nthis:\n  map_poly Re [:- x, 1:] = [:- Re x, 1:]\n\ngoal (2 subgoals):\n 1. x \\<in> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n 2. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "also"], ["proof (state)\nthis:\n  map_poly Re [:- x, 1:] = [:- Re x, 1:]\n\ngoal (2 subgoals):\n 1. x \\<in> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n 2. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"?rp ?xis = (\\<Prod> (a,b) \\<leftarrow> ?fact xis. a ^ b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n    (\\<Prod>(a,\n        b)\\<leftarrow>complex_roots_to_real_factorization xis. a ^ b)", "using IH"], ["proof (prove)\nusing this:\n  map_poly Re\n   (\\<Prod>a\\<leftarrow>xis. case a of\n                             (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                        xis. case a of (a, b) \\<Rightarrow> a ^ b) \\<and>\n  ((q, j)\n   \\<in> set (complex_roots_to_real_factorization xis) \\<longrightarrow>\n   irreducible q \\<and>\n   j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n\ngoal (1 subgoal):\n 1. map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n    (\\<Prod>(a,\n        b)\\<leftarrow>complex_roots_to_real_factorization xis. a ^ b)", "by auto"], ["proof (state)\nthis:\n  map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n  (\\<Prod>(a, b)\\<leftarrow>complex_roots_to_real_factorization xis. a ^ b)\n\ngoal (2 subgoals):\n 1. x \\<in> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n 2. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "also"], ["proof (state)\nthis:\n  map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n  (\\<Prod>(a, b)\\<leftarrow>complex_roots_to_real_factorization xis. a ^ b)\n\ngoal (2 subgoals):\n 1. x \\<in> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n 2. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"[:- Re x, 1:] ^ Suc i * (\\<Prod> (a,b) \\<leftarrow> ?fact xis. a ^ b) = \n          (\\<Prod> (a,b) \\<leftarrow> ?fact ((x,i) # xis). a ^ b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [:- Re x, 1:] ^ Suc i *\n    (\\<Prod>(a,\n        b)\\<leftarrow>complex_roots_to_real_factorization xis. a ^ b) =\n    (\\<Prod>(a,\n        b)\\<leftarrow>complex_roots_to_real_factorization\n                       ((x, i) # xis). a ^ b)", "using True"], ["proof (prove)\nusing this:\n  x \\<in> \\<real>\n\ngoal (1 subgoal):\n 1. [:- Re x, 1:] ^ Suc i *\n    (\\<Prod>(a,\n        b)\\<leftarrow>complex_roots_to_real_factorization xis. a ^ b) =\n    (\\<Prod>(a,\n        b)\\<leftarrow>complex_roots_to_real_factorization\n                       ((x, i) # xis). a ^ b)", "by simp"], ["proof (state)\nthis:\n  [:- Re x, 1:] ^ Suc i *\n  (\\<Prod>(a,\n      b)\\<leftarrow>complex_roots_to_real_factorization xis. a ^ b) =\n  (\\<Prod>(a,\n      b)\\<leftarrow>complex_roots_to_real_factorization\n                     ((x, i) # xis). a ^ b)\n\ngoal (2 subgoals):\n 1. x \\<in> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n 2. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "finally"], ["proof (chain)\npicking this:\n  map_poly Re\n   ([:- x, 1:] ^ Suc i *\n    (\\<Prod>a\\<leftarrow>xis. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)) =\n  (\\<Prod>(a,\n      b)\\<leftarrow>complex_roots_to_real_factorization\n                     ((x, i) # xis). a ^ b)", "have idd: \"?rp (?xi * ?xis) = (\\<Prod> (a,b) \\<leftarrow> ?fact ((x,i) # xis). a ^ b)\""], ["proof (prove)\nusing this:\n  map_poly Re\n   ([:- x, 1:] ^ Suc i *\n    (\\<Prod>a\\<leftarrow>xis. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)) =\n  (\\<Prod>(a,\n      b)\\<leftarrow>complex_roots_to_real_factorization\n                     ((x, i) # xis). a ^ b)\n\ngoal (1 subgoal):\n 1. map_poly Re\n     ([:- x, 1:] ^ Suc i *\n      (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)) =\n    (\\<Prod>(a,\n        b)\\<leftarrow>complex_roots_to_real_factorization\n                       ((x, i) # xis). a ^ b)", "."], ["proof (state)\nthis:\n  map_poly Re\n   ([:- x, 1:] ^ Suc i *\n    (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)) =\n  (\\<Prod>(a,\n      b)\\<leftarrow>complex_roots_to_real_factorization\n                     ((x, i) # xis). a ^ b)\n\ngoal (2 subgoals):\n 1. x \\<in> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n 2. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "unfolding id idd"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Prod>(x,\n        y)\\<leftarrow>complex_roots_to_real_factorization\n                       ((x, i) # xis). x ^ y) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "proof (intro conjI, force, intro impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. (q, j)\n    \\<in> set (complex_roots_to_real_factorization\n                ((x, i) # xis)) \\<Longrightarrow>\n    irreducible q \\<and>\n    j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2}", "assume \"(q, j) \\<in> set (?fact ((x, i) # xis))\""], ["proof (state)\nthis:\n  (q, j) \\<in> set (complex_roots_to_real_factorization ((x, i) # xis))\n\ngoal (1 subgoal):\n 1. (q, j)\n    \\<in> set (complex_roots_to_real_factorization\n                ((x, i) # xis)) \\<Longrightarrow>\n    irreducible q \\<and>\n    j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2}", "hence \"(q,j) \\<in> set (?fact xis) \\<or> (q = [:- Re x, 1:] \\<and> j = Suc i)\""], ["proof (prove)\nusing this:\n  (q, j) \\<in> set (complex_roots_to_real_factorization ((x, i) # xis))\n\ngoal (1 subgoal):\n 1. (q, j) \\<in> set (complex_roots_to_real_factorization xis) \\<or>\n    q = [:- Re x, 1:] \\<and> j = Suc i", "using True"], ["proof (prove)\nusing this:\n  (q, j) \\<in> set (complex_roots_to_real_factorization ((x, i) # xis))\n  x \\<in> \\<real>\n\ngoal (1 subgoal):\n 1. (q, j) \\<in> set (complex_roots_to_real_factorization xis) \\<or>\n    q = [:- Re x, 1:] \\<and> j = Suc i", "by auto"], ["proof (state)\nthis:\n  (q, j) \\<in> set (complex_roots_to_real_factorization xis) \\<or>\n  q = [:- Re x, 1:] \\<and> j = Suc i\n\ngoal (1 subgoal):\n 1. (q, j)\n    \\<in> set (complex_roots_to_real_factorization\n                ((x, i) # xis)) \\<Longrightarrow>\n    irreducible q \\<and>\n    j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2}", "thus \"irreducible q \\<and> j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2}\""], ["proof (prove)\nusing this:\n  (q, j) \\<in> set (complex_roots_to_real_factorization xis) \\<or>\n  q = [:- Re x, 1:] \\<and> j = Suc i\n\ngoal (1 subgoal):\n 1. irreducible q \\<and>\n    j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. (q, j)\n    \\<in> set (complex_roots_to_real_factorization xis) \\<Longrightarrow>\n    irreducible q \\<and>\n    j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2}\n 2. q = [:- Re x, 1:] \\<and> j = Suc i \\<Longrightarrow>\n    irreducible q \\<and>\n    j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2}", "assume \"(q,j) \\<in> set (?fact xis)\""], ["proof (state)\nthis:\n  (q, j) \\<in> set (complex_roots_to_real_factorization xis)\n\ngoal (2 subgoals):\n 1. (q, j)\n    \\<in> set (complex_roots_to_real_factorization xis) \\<Longrightarrow>\n    irreducible q \\<and>\n    j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2}\n 2. q = [:- Re x, 1:] \\<and> j = Suc i \\<Longrightarrow>\n    irreducible q \\<and>\n    j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2}", "with IH"], ["proof (chain)\npicking this:\n  map_poly Re\n   (\\<Prod>a\\<leftarrow>xis. case a of\n                             (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                        xis. case a of (a, b) \\<Rightarrow> a ^ b) \\<and>\n  ((q, j)\n   \\<in> set (complex_roots_to_real_factorization xis) \\<longrightarrow>\n   irreducible q \\<and>\n   j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n  (q, j) \\<in> set (complex_roots_to_real_factorization xis)", "show ?thesis"], ["proof (prove)\nusing this:\n  map_poly Re\n   (\\<Prod>a\\<leftarrow>xis. case a of\n                             (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                        xis. case a of (a, b) \\<Rightarrow> a ^ b) \\<and>\n  ((q, j)\n   \\<in> set (complex_roots_to_real_factorization xis) \\<longrightarrow>\n   irreducible q \\<and>\n   j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n  (q, j) \\<in> set (complex_roots_to_real_factorization xis)\n\ngoal (1 subgoal):\n 1. irreducible q \\<and>\n    j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2}", "by auto"], ["proof (state)\nthis:\n  irreducible q \\<and>\n  j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2}\n\ngoal (1 subgoal):\n 1. q = [:- Re x, 1:] \\<and> j = Suc i \\<Longrightarrow>\n    irreducible q \\<and>\n    j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. q = [:- Re x, 1:] \\<and> j = Suc i \\<Longrightarrow>\n    irreducible q \\<and>\n    j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2}", "assume \"q = [:- Re x, 1:] \\<and> j = Suc i\""], ["proof (state)\nthis:\n  q = [:- Re x, 1:] \\<and> j = Suc i\n\ngoal (1 subgoal):\n 1. q = [:- Re x, 1:] \\<and> j = Suc i \\<Longrightarrow>\n    irreducible q \\<and>\n    j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2}", "with linear_irreducible_field[of \"[:- Re x, 1:]\"]"], ["proof (chain)\npicking this:\n  degree [:- Re x, 1:] = 1 \\<Longrightarrow> irreducible [:- Re x, 1:]\n  q = [:- Re x, 1:] \\<and> j = Suc i", "show ?thesis"], ["proof (prove)\nusing this:\n  degree [:- Re x, 1:] = 1 \\<Longrightarrow> irreducible [:- Re x, 1:]\n  q = [:- Re x, 1:] \\<and> j = Suc i\n\ngoal (1 subgoal):\n 1. irreducible q \\<and>\n    j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2}", "by auto"], ["proof (state)\nthis:\n  irreducible q \\<and>\n  j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  irreducible q \\<and>\n  j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  map_poly Re\n   (\\<Prod>a\\<leftarrow>(x, i) #\n                        xis. case a of\n                             (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                        ((x, i) #\n                         xis). case a of (a, b) \\<Rightarrow> a ^ b) \\<and>\n  ((q, j)\n   \\<in> set (complex_roots_to_real_factorization\n               ((x, i) # xis)) \\<longrightarrow>\n   irreducible q \\<and>\n   j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "case False"], ["proof (state)\nthis:\n  x \\<notin> \\<real>\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "define xi where \"xi = [:Re x * Re x + Im x * Im x, - (2 * Re x), 1:]\""], ["proof (state)\nthis:\n  xi = [:Re x * Re x + Im x * Im x, - (2 * Re x), 1:]\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "obtain xx where xx: \"xx = cnj x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>xx. xx = cnj x \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  xx = cnj x\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have xi: \"xi = ?rp ([:-x,1:] * [:-xx,1:])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. xi = map_poly Re ([:- x, 1:] * [:- xx, 1:])", "unfolding xx xi_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. [:Re x * Re x + Im x * Im x, - (2 * Re x), 1:] =\n    map_poly Re ([:- x, 1:] * [:- cnj x, 1:])", "by auto"], ["proof (state)\nthis:\n  xi = map_poly Re ([:- x, 1:] * [:- xx, 1:])\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have cpxi: \"?cp xi = [:-x,1:] * [:-xx,1:]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map_poly complex_of_real xi = [:- x, 1:] * [:- xx, 1:]", "unfolding xi_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. map_poly complex_of_real\n     [:Re x * Re x + Im x * Im x, - (2 * Re x), 1:] =\n    [:- x, 1:] * [:- xx, 1:]", "by (cases x, auto simp: xx legacy_Complex_simps)"], ["proof (state)\nthis:\n  map_poly complex_of_real xi = [:- x, 1:] * [:- xx, 1:]\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "obtain yis where yis: \"yis = delete_cnj xx (Suc i) xis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>yis.\n        yis = delete_cnj xx (Suc i) xis \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  yis = delete_cnj xx (Suc i) xis\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "from False"], ["proof (chain)\npicking this:\n  x \\<notin> \\<real>", "have fact: \"?fact ((x,i) # xis) = ((xi,Suc i) # ?fact yis)\""], ["proof (prove)\nusing this:\n  x \\<notin> \\<real>\n\ngoal (1 subgoal):\n 1. complex_roots_to_real_factorization ((x, i) # xis) =\n    (xi, Suc i) # complex_roots_to_real_factorization yis", "unfolding xi_def xx yis"], ["proof (prove)\nusing this:\n  x \\<notin> \\<real>\n\ngoal (1 subgoal):\n 1. complex_roots_to_real_factorization ((x, i) # xis) =\n    ([:Re x * Re x + Im x * Im x, - (2 * Re x), 1:], Suc i) #\n    complex_roots_to_real_factorization (delete_cnj (cnj x) (Suc i) xis)", "by simp"], ["proof (state)\nthis:\n  complex_roots_to_real_factorization ((x, i) # xis) =\n  (xi, Suc i) # complex_roots_to_real_factorization yis\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "note IH = IH(2)[OF False xx yis xi]"], ["proof (state)\nthis:\n  set (coeffs\n        (\\<Prod>a\\<leftarrow>yis. case a of\n                                  (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i))\n  \\<subseteq> \\<real> \\<Longrightarrow>\n  map_poly Re\n   (\\<Prod>a\\<leftarrow>yis. case a of\n                             (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                        yis. case a of (a, b) \\<Rightarrow> a ^ b) \\<and>\n  ((q, j)\n   \\<in> set (complex_roots_to_real_factorization yis) \\<longrightarrow>\n   irreducible q \\<and>\n   j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"irreducible xi\""], ["proof (prove)\ngoal (1 subgoal):\n 1. irreducible xi", "apply (fold irreducible_connect_field)"], ["proof (prove)\ngoal (1 subgoal):\n 1. irreducible\\<^sub>d xi", "proof (rule irreducible\\<^sub>dI)"], ["proof (state)\ngoal (2 subgoals):\n 1. 0 < degree xi\n 2. \\<And>q r.\n       \\<lbrakk>0 < degree q; degree q < degree xi; 0 < degree r;\n        degree r < degree xi; xi = q * r\\<rbrakk>\n       \\<Longrightarrow> False", "show \"degree xi > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < degree xi", "unfolding xi"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < degree (map_poly Re ([:- x, 1:] * [:- xx, 1:]))", "by auto"], ["proof (state)\nthis:\n  0 < degree xi\n\ngoal (1 subgoal):\n 1. \\<And>q r.\n       \\<lbrakk>0 < degree q; degree q < degree xi; 0 < degree r;\n        degree r < degree xi; xi = q * r\\<rbrakk>\n       \\<Longrightarrow> False", "fix q p :: \"real poly\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>q r.\n       \\<lbrakk>0 < degree q; degree q < degree xi; 0 < degree r;\n        degree r < degree xi; xi = q * r\\<rbrakk>\n       \\<Longrightarrow> False", "assume \"degree q > 0\" \"degree q < degree xi\" and qp: \"xi = q * p\""], ["proof (state)\nthis:\n  0 < degree q\n  degree q < degree xi\n  xi = q * p\n\ngoal (1 subgoal):\n 1. \\<And>q r.\n       \\<lbrakk>0 < degree q; degree q < degree xi; 0 < degree r;\n        degree r < degree xi; xi = q * r\\<rbrakk>\n       \\<Longrightarrow> False", "hence dq: \"degree q = 1\""], ["proof (prove)\nusing this:\n  0 < degree q\n  degree q < degree xi\n  xi = q * p\n\ngoal (1 subgoal):\n 1. degree q = 1", "unfolding xi"], ["proof (prove)\nusing this:\n  0 < degree q\n  degree q < degree (map_poly Re ([:- x, 1:] * [:- xx, 1:]))\n  map_poly Re ([:- x, 1:] * [:- xx, 1:]) = q * p\n\ngoal (1 subgoal):\n 1. degree q = 1", "by auto"], ["proof (state)\nthis:\n  degree q = 1\n\ngoal (1 subgoal):\n 1. \\<And>q r.\n       \\<lbrakk>0 < degree q; degree q < degree xi; 0 < degree r;\n        degree r < degree xi; xi = q * r\\<rbrakk>\n       \\<Longrightarrow> False", "have dxi: \"degree xi = 2\" \"xi \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. degree xi = 2 &&& xi \\<noteq> 0", "unfolding xi"], ["proof (prove)\ngoal (1 subgoal):\n 1. degree (map_poly Re ([:- x, 1:] * [:- xx, 1:])) = 2 &&&\n    map_poly Re ([:- x, 1:] * [:- xx, 1:]) \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  degree xi = 2\n  xi \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<And>q r.\n       \\<lbrakk>0 < degree q; degree q < degree xi; 0 < degree r;\n        degree r < degree xi; xi = q * r\\<rbrakk>\n       \\<Longrightarrow> False", "with qp"], ["proof (chain)\npicking this:\n  xi = q * p\n  degree xi = 2\n  xi \\<noteq> 0", "have \"q \\<noteq> 0\" \"p \\<noteq> 0\""], ["proof (prove)\nusing this:\n  xi = q * p\n  degree xi = 2\n  xi \\<noteq> 0\n\ngoal (1 subgoal):\n 1. q \\<noteq> 0 &&& p \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  q \\<noteq> 0\n  p \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<And>q r.\n       \\<lbrakk>0 < degree q; degree q < degree xi; 0 < degree r;\n        degree r < degree xi; xi = q * r\\<rbrakk>\n       \\<Longrightarrow> False", "hence \"degree xi = degree q + degree p\""], ["proof (prove)\nusing this:\n  q \\<noteq> 0\n  p \\<noteq> 0\n\ngoal (1 subgoal):\n 1. degree xi = degree q + degree p", "unfolding qp"], ["proof (prove)\nusing this:\n  q \\<noteq> 0\n  p \\<noteq> 0\n\ngoal (1 subgoal):\n 1. degree (q * p) = degree q + degree p", "by (rule degree_mult_eq)"], ["proof (state)\nthis:\n  degree xi = degree q + degree p\n\ngoal (1 subgoal):\n 1. \\<And>q r.\n       \\<lbrakk>0 < degree q; degree q < degree xi; 0 < degree r;\n        degree r < degree xi; xi = q * r\\<rbrakk>\n       \\<Longrightarrow> False", "with dq"], ["proof (chain)\npicking this:\n  degree q = 1\n  degree xi = degree q + degree p", "have dp: \"degree p = 1\""], ["proof (prove)\nusing this:\n  degree q = 1\n  degree xi = degree q + degree p\n\ngoal (1 subgoal):\n 1. degree p = 1", "unfolding dxi"], ["proof (prove)\nusing this:\n  degree q = 1\n  2 = degree q + degree p\n\ngoal (1 subgoal):\n 1. degree p = 1", "by simp"], ["proof (state)\nthis:\n  degree p = 1\n\ngoal (1 subgoal):\n 1. \\<And>q r.\n       \\<lbrakk>0 < degree q; degree q < degree xi; 0 < degree r;\n        degree r < degree xi; xi = q * r\\<rbrakk>\n       \\<Longrightarrow> False", "{"], ["proof (state)\nthis:\n  degree p = 1\n\ngoal (1 subgoal):\n 1. \\<And>q r.\n       \\<lbrakk>0 < degree q; degree q < degree xi; 0 < degree r;\n        degree r < degree xi; xi = q * r\\<rbrakk>\n       \\<Longrightarrow> False", "fix c :: complex"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>q r.\n       \\<lbrakk>0 < degree q; degree q < degree xi; 0 < degree r;\n        degree r < degree xi; xi = q * r\\<rbrakk>\n       \\<Longrightarrow> False", "assume rt: \"poly (?cp xi) c = 0\""], ["proof (state)\nthis:\n  poly (map_poly complex_of_real xi) c = 0\n\ngoal (1 subgoal):\n 1. \\<And>q r.\n       \\<lbrakk>0 < degree q; degree q < degree xi; 0 < degree r;\n        degree r < degree xi; xi = q * r\\<rbrakk>\n       \\<Longrightarrow> False", "hence \"poly (?cp q * ?cp p) c = 0\""], ["proof (prove)\nusing this:\n  poly (map_poly complex_of_real xi) c = 0\n\ngoal (1 subgoal):\n 1. poly (map_poly complex_of_real q * map_poly complex_of_real p) c = 0", "by (simp add: qp hom_distribs)"], ["proof (state)\nthis:\n  poly (map_poly complex_of_real q * map_poly complex_of_real p) c = 0\n\ngoal (1 subgoal):\n 1. \\<And>q r.\n       \\<lbrakk>0 < degree q; degree q < degree xi; 0 < degree r;\n        degree r < degree xi; xi = q * r\\<rbrakk>\n       \\<Longrightarrow> False", "hence \"(poly (?cp q) c = 0 \\<or> poly (?cp p) c = 0)\""], ["proof (prove)\nusing this:\n  poly (map_poly complex_of_real q * map_poly complex_of_real p) c = 0\n\ngoal (1 subgoal):\n 1. poly (map_poly complex_of_real q) c = 0 \\<or>\n    poly (map_poly complex_of_real p) c = 0", "by auto"], ["proof (state)\nthis:\n  poly (map_poly complex_of_real q) c = 0 \\<or>\n  poly (map_poly complex_of_real p) c = 0\n\ngoal (1 subgoal):\n 1. \\<And>q r.\n       \\<lbrakk>0 < degree q; degree q < degree xi; 0 < degree r;\n        degree r < degree xi; xi = q * r\\<rbrakk>\n       \\<Longrightarrow> False", "hence \"c = roots1 (?cp q) \\<or> c = roots1 (?cp p)\""], ["proof (prove)\nusing this:\n  poly (map_poly complex_of_real q) c = 0 \\<or>\n  poly (map_poly complex_of_real p) c = 0\n\ngoal (1 subgoal):\n 1. c = roots1 (map_poly complex_of_real q) \\<or>\n    c = roots1 (map_poly complex_of_real p)", "using roots1[of \"?cp q\"] roots1[of \"?cp p\"] dp dq"], ["proof (prove)\nusing this:\n  poly (map_poly complex_of_real q) c = 0 \\<or>\n  poly (map_poly complex_of_real p) c = 0\n  degree (map_poly complex_of_real q) = 1 \\<Longrightarrow>\n  {x. poly (map_poly complex_of_real q) x = 0} =\n  {roots1 (map_poly complex_of_real q)}\n  degree (map_poly complex_of_real p) = 1 \\<Longrightarrow>\n  {x. poly (map_poly complex_of_real p) x = 0} =\n  {roots1 (map_poly complex_of_real p)}\n  degree p = 1\n  degree q = 1\n\ngoal (1 subgoal):\n 1. c = roots1 (map_poly complex_of_real q) \\<or>\n    c = roots1 (map_poly complex_of_real p)", "by auto"], ["proof (state)\nthis:\n  c = roots1 (map_poly complex_of_real q) \\<or>\n  c = roots1 (map_poly complex_of_real p)\n\ngoal (1 subgoal):\n 1. \\<And>q r.\n       \\<lbrakk>0 < degree q; degree q < degree xi; 0 < degree r;\n        degree r < degree xi; xi = q * r\\<rbrakk>\n       \\<Longrightarrow> False", "hence \"c \\<in> \\<real>\""], ["proof (prove)\nusing this:\n  c = roots1 (map_poly complex_of_real q) \\<or>\n  c = roots1 (map_poly complex_of_real p)\n\ngoal (1 subgoal):\n 1. c \\<in> \\<real>", "unfolding roots1_def"], ["proof (prove)\nusing this:\n  c =\n  - coeff (map_poly complex_of_real q) 0 /\n  coeff (map_poly complex_of_real q) 1 \\<or>\n  c =\n  - coeff (map_poly complex_of_real p) 0 /\n  coeff (map_poly complex_of_real p) 1\n\ngoal (1 subgoal):\n 1. c \\<in> \\<real>", "by auto"], ["proof (state)\nthis:\n  c \\<in> \\<real>\n\ngoal (1 subgoal):\n 1. \\<And>q r.\n       \\<lbrakk>0 < degree q; degree q < degree xi; 0 < degree r;\n        degree r < degree xi; xi = q * r\\<rbrakk>\n       \\<Longrightarrow> False", "hence \"c \\<noteq> x\""], ["proof (prove)\nusing this:\n  c \\<in> \\<real>\n\ngoal (1 subgoal):\n 1. c \\<noteq> x", "using False"], ["proof (prove)\nusing this:\n  c \\<in> \\<real>\n  x \\<notin> \\<real>\n\ngoal (1 subgoal):\n 1. c \\<noteq> x", "by auto"], ["proof (state)\nthis:\n  c \\<noteq> x\n\ngoal (1 subgoal):\n 1. \\<And>q r.\n       \\<lbrakk>0 < degree q; degree q < degree xi; 0 < degree r;\n        degree r < degree xi; xi = q * r\\<rbrakk>\n       \\<Longrightarrow> False", "}"], ["proof (state)\nthis:\n  poly (map_poly complex_of_real xi) ?ca3 = 0 \\<Longrightarrow>\n  ?ca3 \\<noteq> x\n\ngoal (1 subgoal):\n 1. \\<And>q r.\n       \\<lbrakk>0 < degree q; degree q < degree xi; 0 < degree r;\n        degree r < degree xi; xi = q * r\\<rbrakk>\n       \\<Longrightarrow> False", "hence \"poly (?cp xi) x \\<noteq> 0\""], ["proof (prove)\nusing this:\n  poly (map_poly complex_of_real xi) ?ca3 = 0 \\<Longrightarrow>\n  ?ca3 \\<noteq> x\n\ngoal (1 subgoal):\n 1. poly (map_poly complex_of_real xi) x \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  poly (map_poly complex_of_real xi) x \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<And>q r.\n       \\<lbrakk>0 < degree q; degree q < degree xi; 0 < degree r;\n        degree r < degree xi; xi = q * r\\<rbrakk>\n       \\<Longrightarrow> False", "thus False"], ["proof (prove)\nusing this:\n  poly (map_poly complex_of_real xi) x \\<noteq> 0\n\ngoal (1 subgoal):\n 1. False", "unfolding cpxi"], ["proof (prove)\nusing this:\n  poly ([:- x, 1:] * [:- xx, 1:]) x \\<noteq> 0\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  irreducible xi\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "hence xi': \"irreducible xi\" \"monic xi\" \"degree xi = 2\""], ["proof (prove)\nusing this:\n  irreducible xi\n\ngoal (1 subgoal):\n 1. irreducible xi &&& monic xi &&& degree xi = 2", "unfolding xi"], ["proof (prove)\nusing this:\n  irreducible (map_poly Re ([:- x, 1:] * [:- xx, 1:]))\n\ngoal (1 subgoal):\n 1. irreducible (map_poly Re ([:- x, 1:] * [:- xx, 1:])) &&&\n    monic (map_poly Re ([:- x, 1:] * [:- xx, 1:])) &&&\n    degree (map_poly Re ([:- x, 1:] * [:- xx, 1:])) = 2", "by auto"], ["proof (state)\nthis:\n  irreducible xi\n  monic xi\n  degree xi = 2\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "let ?xxi = \"[:- xx, 1:] ^ Suc i\""], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "let ?yis = \"(\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i)\""], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "let ?yi = \"(?cp xi)^Suc i\""], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have yi: \"set (coeffs ?yi) \\<subseteq> \\<real>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set (coeffs (map_poly complex_of_real xi ^ Suc i)) \\<subseteq> \\<real>", "by (rule real_poly_power, auto simp: xi)"], ["proof (state)\nthis:\n  set (coeffs (map_poly complex_of_real xi ^ Suc i)) \\<subseteq> \\<real>\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have mon: \"monic (\\<Prod>(x, i)\\<leftarrow>(x, i) # xis. [:- x, 1:] ^ Suc i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. monic (\\<Prod>(x, i)\\<leftarrow>(x, i) # xis. [:- x, 1:] ^ Suc i)", "by (rule monic_prod_list_pow)"], ["proof (state)\nthis:\n  monic (\\<Prod>(x, i)\\<leftarrow>(x, i) # xis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "from monic_imp_nonzero[OF this]"], ["proof (chain)\npicking this:\n  (\\<Prod>(x, i)\\<leftarrow>(x, i) # xis. [:- x, 1:] ^ Suc i) \\<noteq> 0", "have xixis: \"?xi * ?xis \\<noteq> 0\""], ["proof (prove)\nusing this:\n  (\\<Prod>(x, i)\\<leftarrow>(x, i) # xis. [:- x, 1:] ^ Suc i) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. [:- x, 1:] ^ Suc i *\n    (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) \\<noteq>\n    0", "unfolding id"], ["proof (prove)\nusing this:\n  [:- x, 1:] ^ Suc i *\n  (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) \\<noteq>\n  0\n\ngoal (1 subgoal):\n 1. [:- x, 1:] ^ Suc i *\n    (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) \\<noteq>\n    0", "by auto"], ["proof (state)\nthis:\n  [:- x, 1:] ^ Suc i *\n  (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) \\<noteq>\n  0\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "from False"], ["proof (chain)\npicking this:\n  x \\<notin> \\<real>", "have xxx: \"xx \\<noteq> x\""], ["proof (prove)\nusing this:\n  x \\<notin> \\<real>\n\ngoal (1 subgoal):\n 1. xx \\<noteq> x", "unfolding xx"], ["proof (prove)\nusing this:\n  x \\<notin> \\<real>\n\ngoal (1 subgoal):\n 1. cnj x \\<noteq> x", "by (cases x, auto simp: legacy_Complex_simps Reals_def)"], ["proof (state)\nthis:\n  xx \\<noteq> x\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "from prems[unfolded id]"], ["proof (chain)\npicking this:\n  set (coeffs\n        ([:- x, 1:] ^ Suc i *\n         (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)))\n  \\<subseteq> \\<real>", "have prems: \"set (coeffs (?xi * ?xis)) \\<subseteq> \\<real>\""], ["proof (prove)\nusing this:\n  set (coeffs\n        ([:- x, 1:] ^ Suc i *\n         (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)))\n  \\<subseteq> \\<real>\n\ngoal (1 subgoal):\n 1. set (coeffs\n          ([:- x, 1:] ^ Suc i *\n           (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)))\n    \\<subseteq> \\<real>", "."], ["proof (state)\nthis:\n  set (coeffs\n        ([:- x, 1:] ^ Suc i *\n         (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)))\n  \\<subseteq> \\<real>\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "from id"], ["proof (chain)\npicking this:\n  (\\<Prod>(x, i)\\<leftarrow>(x, i) # xis. [:- x, 1:] ^ Suc i) =\n  [:- x, 1:] ^ Suc i * (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)", "have \"[:- x, 1:] ^ Suc i dvd ?xi * ?xis\""], ["proof (prove)\nusing this:\n  (\\<Prod>(x, i)\\<leftarrow>(x, i) # xis. [:- x, 1:] ^ Suc i) =\n  [:- x, 1:] ^ Suc i * (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. [:- x, 1:] ^ Suc i dvd\n    [:- x, 1:] ^ Suc i * (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)", "by auto"], ["proof (state)\nthis:\n  [:- x, 1:] ^ Suc i dvd\n  [:- x, 1:] ^ Suc i * (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "from xixis this[unfolded order_divides]"], ["proof (chain)\npicking this:\n  [:- x, 1:] ^ Suc i *\n  (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) \\<noteq>\n  0\n  [:- x, 1:] ^ Suc i * (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n  0 \\<or>\n  Suc i\n  \\<le> order x\n         ([:- x, 1:] ^ Suc i *\n          (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))", "have \"order x (?xi * ?xis) \\<ge> Suc i\""], ["proof (prove)\nusing this:\n  [:- x, 1:] ^ Suc i *\n  (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) \\<noteq>\n  0\n  [:- x, 1:] ^ Suc i * (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n  0 \\<or>\n  Suc i\n  \\<le> order x\n         ([:- x, 1:] ^ Suc i *\n          (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n\ngoal (1 subgoal):\n 1. Suc i\n    \\<le> order x\n           ([:- x, 1:] ^ Suc i *\n            (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))", "by auto"], ["proof (state)\nthis:\n  Suc i\n  \\<le> order x\n         ([:- x, 1:] ^ Suc i *\n          (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "with complex_conjugate_order[OF prems xixis, of x, folded xx]"], ["proof (chain)\npicking this:\n  order xx\n   ([:- x, 1:] ^ Suc i *\n    (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)) =\n  order x\n   ([:- x, 1:] ^ Suc i * (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n  Suc i\n  \\<le> order x\n         ([:- x, 1:] ^ Suc i *\n          (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))", "have \"order xx (?xi * ?xis) \\<ge> Suc i\""], ["proof (prove)\nusing this:\n  order xx\n   ([:- x, 1:] ^ Suc i *\n    (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)) =\n  order x\n   ([:- x, 1:] ^ Suc i * (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n  Suc i\n  \\<le> order x\n         ([:- x, 1:] ^ Suc i *\n          (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n\ngoal (1 subgoal):\n 1. Suc i\n    \\<le> order xx\n           ([:- x, 1:] ^ Suc i *\n            (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))", "by auto"], ["proof (state)\nthis:\n  Suc i\n  \\<le> order xx\n         ([:- x, 1:] ^ Suc i *\n          (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "hence \"order xx ?xi + order xx ?xis \\<ge> Suc i\""], ["proof (prove)\nusing this:\n  Suc i\n  \\<le> order xx\n         ([:- x, 1:] ^ Suc i *\n          (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i))\n\ngoal (1 subgoal):\n 1. Suc i\n    \\<le> order xx ([:- x, 1:] ^ Suc i) +\n          order xx (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)", "unfolding order_mult[OF xixis]"], ["proof (prove)\nusing this:\n  Suc i\n  \\<le> order xx ([:- x, 1:] ^ Suc i) +\n        order xx (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. Suc i\n    \\<le> order xx ([:- x, 1:] ^ Suc i) +\n          order xx (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)", "."], ["proof (state)\nthis:\n  Suc i\n  \\<le> order xx ([:- x, 1:] ^ Suc i) +\n        order xx (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "also"], ["proof (state)\nthis:\n  Suc i\n  \\<le> order xx ([:- x, 1:] ^ Suc i) +\n        order xx (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"order xx ?xi = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. order xx ([:- x, 1:] ^ Suc i) = 0", "unfolding order_linear_power'"], ["proof (prove)\ngoal (1 subgoal):\n 1. (if - x = - xx then Suc i else 0) = 0", "using xxx"], ["proof (prove)\nusing this:\n  xx \\<noteq> x\n\ngoal (1 subgoal):\n 1. (if - x = - xx then Suc i else 0) = 0", "by simp"], ["proof (state)\nthis:\n  order xx ([:- x, 1:] ^ Suc i) = 0\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "finally"], ["proof (chain)\npicking this:\n  Suc i\n  \\<le> 0 +\n        order xx\n         (\\<Prod>a\\<leftarrow>xis. case a of\n                                   (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "have \"order xx ?xis \\<ge> Suc i\""], ["proof (prove)\nusing this:\n  Suc i\n  \\<le> 0 +\n        order xx\n         (\\<Prod>a\\<leftarrow>xis. case a of\n                                   (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. Suc i \\<le> order xx (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)", "by simp"], ["proof (state)\nthis:\n  Suc i \\<le> order xx (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "hence yis: \"?xis = ?xxi * ?yis\""], ["proof (prove)\nusing this:\n  Suc i \\<le> order xx (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n    [:- xx, 1:] ^ Suc i * (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i)", "unfolding yis"], ["proof (prove)\nusing this:\n  Suc i \\<le> order xx (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n    [:- xx, 1:] ^ Suc i *\n    (\\<Prod>(x, i)\\<leftarrow>delete_cnj xx (Suc i) xis. [:- x, 1:] ^ Suc i)", "by (rule delete_cnj, simp)"], ["proof (state)\nthis:\n  (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n  [:- xx, 1:] ^ Suc i * (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "hence \"?xi * ?xis = (?xi * ?xxi) * ?yis\""], ["proof (prove)\nusing this:\n  (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n  [:- xx, 1:] ^ Suc i * (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. [:- x, 1:] ^ Suc i *\n    (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n    [:- x, 1:] ^ Suc i * [:- xx, 1:] ^ Suc i *\n    (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i)", "by (simp only: ac_simps)"], ["proof (state)\nthis:\n  [:- x, 1:] ^ Suc i * (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n  [:- x, 1:] ^ Suc i * [:- xx, 1:] ^ Suc i *\n  (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "also"], ["proof (state)\nthis:\n  [:- x, 1:] ^ Suc i * (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n  [:- x, 1:] ^ Suc i * [:- xx, 1:] ^ Suc i *\n  (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"?xi * ?xxi = ([:- x, 1:] * [:- xx, 1:])^Suc i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [:- x, 1:] ^ Suc i * [:- xx, 1:] ^ Suc i =\n    ([:- x, 1:] * [:- xx, 1:]) ^ Suc i", "by (metis power_mult_distrib)"], ["proof (state)\nthis:\n  [:- x, 1:] ^ Suc i * [:- xx, 1:] ^ Suc i =\n  ([:- x, 1:] * [:- xx, 1:]) ^ Suc i\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "also"], ["proof (state)\nthis:\n  [:- x, 1:] ^ Suc i * [:- xx, 1:] ^ Suc i =\n  ([:- x, 1:] * [:- xx, 1:]) ^ Suc i\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"[:- x, 1:] * [:- xx, 1:] = ?cp xi\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [:- x, 1:] * [:- xx, 1:] = map_poly complex_of_real xi", "unfolding cpxi"], ["proof (prove)\ngoal (1 subgoal):\n 1. [:- x, 1:] * [:- xx, 1:] = [:- x, 1:] * [:- xx, 1:]", ".."], ["proof (state)\nthis:\n  [:- x, 1:] * [:- xx, 1:] = map_poly complex_of_real xi\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "finally"], ["proof (chain)\npicking this:\n  [:- x, 1:] ^ Suc i *\n  (\\<Prod>a\\<leftarrow>xis. case a of\n                            (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  map_poly complex_of_real xi ^ Suc i *\n  (\\<Prod>a\\<leftarrow>yis. case a of\n                            (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)", "have idd: \"?xi * ?xis = (?cp xi)^Suc i * ?yis\""], ["proof (prove)\nusing this:\n  [:- x, 1:] ^ Suc i *\n  (\\<Prod>a\\<leftarrow>xis. case a of\n                            (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  map_poly complex_of_real xi ^ Suc i *\n  (\\<Prod>a\\<leftarrow>yis. case a of\n                            (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. [:- x, 1:] ^ Suc i *\n    (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n    map_poly complex_of_real xi ^ Suc i *\n    (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i)", "by simp"], ["proof (state)\nthis:\n  [:- x, 1:] ^ Suc i * (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n  map_poly complex_of_real xi ^ Suc i *\n  (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "from prems[unfolded idd]"], ["proof (chain)\npicking this:\n  set (coeffs\n        (map_poly complex_of_real xi ^ Suc i *\n         (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i)))\n  \\<subseteq> \\<real>", "have R: \"set (coeffs ((?cp xi)^Suc i * ?yis)) \\<subseteq> \\<real>\""], ["proof (prove)\nusing this:\n  set (coeffs\n        (map_poly complex_of_real xi ^ Suc i *\n         (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i)))\n  \\<subseteq> \\<real>\n\ngoal (1 subgoal):\n 1. set (coeffs\n          (map_poly complex_of_real xi ^ Suc i *\n           (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i)))\n    \\<subseteq> \\<real>", "."], ["proof (state)\nthis:\n  set (coeffs\n        (map_poly complex_of_real xi ^ Suc i *\n         (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i)))\n  \\<subseteq> \\<real>\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have yis: \"set (coeffs ?yis) \\<subseteq> \\<real>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set (coeffs (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i))\n    \\<subseteq> \\<real>", "by (rule real_poly_factor[OF R yi], auto, auto simp: xi_def)"], ["proof (state)\nthis:\n  set (coeffs (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i))\n  \\<subseteq> \\<real>\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "note IH = IH[OF yis]"], ["proof (state)\nthis:\n  map_poly Re\n   (\\<Prod>a\\<leftarrow>yis. case a of\n                             (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                        yis. case a of (a, b) \\<Rightarrow> a ^ b) \\<and>\n  ((q, j)\n   \\<in> set (complex_roots_to_real_factorization yis) \\<longrightarrow>\n   irreducible q \\<and>\n   j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"?rp (?xi * ?xis) = ?rp ?yi * ?rp ?yis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map_poly Re\n     ([:- x, 1:] ^ Suc i *\n      (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)) =\n    map_poly Re (map_poly complex_of_real xi ^ Suc i) *\n    map_poly Re (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i)", "unfolding idd"], ["proof (prove)\ngoal (1 subgoal):\n 1. map_poly Re\n     (map_poly complex_of_real xi ^ Suc i *\n      (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i)) =\n    map_poly Re (map_poly complex_of_real xi ^ Suc i) *\n    map_poly Re (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i)", "by (rule map_poly_Re_mult[OF yi yis])"], ["proof (state)\nthis:\n  map_poly Re\n   ([:- x, 1:] ^ Suc i *\n    (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)) =\n  map_poly Re (map_poly complex_of_real xi ^ Suc i) *\n  map_poly Re (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "also"], ["proof (state)\nthis:\n  map_poly Re\n   ([:- x, 1:] ^ Suc i *\n    (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)) =\n  map_poly Re (map_poly complex_of_real xi ^ Suc i) *\n  map_poly Re (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i)\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"?rp ?yi = xi^Suc i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map_poly Re (map_poly complex_of_real xi ^ Suc i) = xi ^ Suc i", "by (fold hom_distribs, rule map_poly_Re_of_real)"], ["proof (state)\nthis:\n  map_poly Re (map_poly complex_of_real xi ^ Suc i) = xi ^ Suc i\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "also"], ["proof (state)\nthis:\n  map_poly Re (map_poly complex_of_real xi ^ Suc i) = xi ^ Suc i\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"?rp ?yis = (\\<Prod> (a,b) \\<leftarrow> ?fact yis. a ^ b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map_poly Re (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i) =\n    (\\<Prod>(a,\n        b)\\<leftarrow>complex_roots_to_real_factorization yis. a ^ b)", "using IH"], ["proof (prove)\nusing this:\n  map_poly Re\n   (\\<Prod>a\\<leftarrow>yis. case a of\n                             (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                        yis. case a of (a, b) \\<Rightarrow> a ^ b) \\<and>\n  ((q, j)\n   \\<in> set (complex_roots_to_real_factorization yis) \\<longrightarrow>\n   irreducible q \\<and>\n   j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n\ngoal (1 subgoal):\n 1. map_poly Re (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i) =\n    (\\<Prod>(a,\n        b)\\<leftarrow>complex_roots_to_real_factorization yis. a ^ b)", "by auto"], ["proof (state)\nthis:\n  map_poly Re (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i) =\n  (\\<Prod>(a, b)\\<leftarrow>complex_roots_to_real_factorization yis. a ^ b)\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "also"], ["proof (state)\nthis:\n  map_poly Re (\\<Prod>(x, i)\\<leftarrow>yis. [:- x, 1:] ^ Suc i) =\n  (\\<Prod>(a, b)\\<leftarrow>complex_roots_to_real_factorization yis. a ^ b)\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "have \"xi ^ Suc i * (\\<Prod> (a,b) \\<leftarrow> ?fact yis. a ^ b) = \n          (\\<Prod> (a,b) \\<leftarrow> ?fact ((x,i) # xis). a ^ b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. xi ^ Suc i *\n    (\\<Prod>(a,\n        b)\\<leftarrow>complex_roots_to_real_factorization yis. a ^ b) =\n    (\\<Prod>(a,\n        b)\\<leftarrow>complex_roots_to_real_factorization\n                       ((x, i) # xis). a ^ b)", "unfolding fact"], ["proof (prove)\ngoal (1 subgoal):\n 1. xi ^ Suc i *\n    (\\<Prod>(a,\n        b)\\<leftarrow>complex_roots_to_real_factorization yis. a ^ b) =\n    (\\<Prod>(a,\n        b)\\<leftarrow>(xi, Suc i) #\n                      complex_roots_to_real_factorization yis. a ^ b)", "by simp"], ["proof (state)\nthis:\n  xi ^ Suc i *\n  (\\<Prod>(a,\n      b)\\<leftarrow>complex_roots_to_real_factorization yis. a ^ b) =\n  (\\<Prod>(a,\n      b)\\<leftarrow>complex_roots_to_real_factorization\n                     ((x, i) # xis). a ^ b)\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "finally"], ["proof (chain)\npicking this:\n  map_poly Re\n   ([:- x, 1:] ^ Suc i *\n    (\\<Prod>a\\<leftarrow>xis. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)) =\n  (\\<Prod>(a,\n      b)\\<leftarrow>complex_roots_to_real_factorization\n                     ((x, i) # xis). a ^ b)", "have idd: \"?rp (?xi * ?xis) = (\\<Prod> (a,b) \\<leftarrow> ?fact ((x,i) # xis). a ^ b)\""], ["proof (prove)\nusing this:\n  map_poly Re\n   ([:- x, 1:] ^ Suc i *\n    (\\<Prod>a\\<leftarrow>xis. case a of\n                              (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i)) =\n  (\\<Prod>(a,\n      b)\\<leftarrow>complex_roots_to_real_factorization\n                     ((x, i) # xis). a ^ b)\n\ngoal (1 subgoal):\n 1. map_poly Re\n     ([:- x, 1:] ^ Suc i *\n      (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)) =\n    (\\<Prod>(a,\n        b)\\<leftarrow>complex_roots_to_real_factorization\n                       ((x, i) # xis). a ^ b)", "."], ["proof (state)\nthis:\n  map_poly Re\n   ([:- x, 1:] ^ Suc i *\n    (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)) =\n  (\\<Prod>(a,\n      b)\\<leftarrow>complex_roots_to_real_factorization\n                     ((x, i) # xis). a ^ b)\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<real> \\<Longrightarrow>\n    map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. map_poly Re\n     (\\<Prod>a\\<leftarrow>(x, i) #\n                          xis. case a of\n                               (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n    (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                          ((x, i) #\n                           xis). case a of\n                                 (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set (complex_roots_to_real_factorization\n                 ((x, i) # xis)) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "unfolding id idd fact"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Prod>(x,\n        y)\\<leftarrow>(xi, Suc i) #\n                      complex_roots_to_real_factorization yis. x ^ y) =\n    (\\<Prod>a\\<leftarrow>(xi, Suc i) #\n                         complex_roots_to_real_factorization\n                          yis. case a of (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set ((xi, Suc i) #\n                complex_roots_to_real_factorization yis) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "using IH xi'"], ["proof (prove)\nusing this:\n  map_poly Re\n   (\\<Prod>a\\<leftarrow>yis. case a of\n                             (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                        yis. case a of (a, b) \\<Rightarrow> a ^ b) \\<and>\n  ((q, j)\n   \\<in> set (complex_roots_to_real_factorization yis) \\<longrightarrow>\n   irreducible q \\<and>\n   j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n  irreducible xi\n  monic xi\n  degree xi = 2\n\ngoal (1 subgoal):\n 1. (\\<Prod>(x,\n        y)\\<leftarrow>(xi, Suc i) #\n                      complex_roots_to_real_factorization yis. x ^ y) =\n    (\\<Prod>a\\<leftarrow>(xi, Suc i) #\n                         complex_roots_to_real_factorization\n                          yis. case a of (a, b) \\<Rightarrow> a ^ b) \\<and>\n    ((q, j)\n     \\<in> set ((xi, Suc i) #\n                complex_roots_to_real_factorization yis) \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "by auto"], ["proof (state)\nthis:\n  map_poly Re\n   (\\<Prod>a\\<leftarrow>(x, i) #\n                        xis. case a of\n                             (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                        ((x, i) #\n                         xis). case a of (a, b) \\<Rightarrow> a ^ b) \\<and>\n  ((q, j)\n   \\<in> set (complex_roots_to_real_factorization\n               ((x, i) # xis)) \\<longrightarrow>\n   irreducible q \\<and>\n   j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  map_poly Re\n   (\\<Prod>a\\<leftarrow>(x, i) #\n                        xis. case a of\n                             (x, i) \\<Rightarrow> [:- x, 1:] ^ Suc i) =\n  (\\<Prod>a\\<leftarrow>complex_roots_to_real_factorization\n                        ((x, i) #\n                         xis). case a of (a, b) \\<Rightarrow> a ^ b) \\<and>\n  ((q, j)\n   \\<in> set (complex_roots_to_real_factorization\n               ((x, i) # xis)) \\<longrightarrow>\n   irreducible q \\<and>\n   j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n  (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n  ((q, j) \\<in> set qis \\<longrightarrow>\n   irreducible q \\<and>\n   j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n\ngoal (1 subgoal):\n 1. p \\<noteq> 0 \\<Longrightarrow>\n    p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "thus ?thesis"], ["proof (prove)\nusing this:\n  map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n  (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n  ((q, j) \\<in> set qis \\<longrightarrow>\n   irreducible q \\<and>\n   j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n\ngoal (1 subgoal):\n 1. p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "unfolding p"], ["proof (prove)\nusing this:\n  map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i) =\n  (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n  ((q, j) \\<in> set qis \\<longrightarrow>\n   irreducible q \\<and>\n   j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n\ngoal (1 subgoal):\n 1. smult c\n     (map_poly Re (\\<Prod>(x, i)\\<leftarrow>xis. [:- x, 1:] ^ Suc i)) =\n    smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n    ((q, j) \\<in> set qis \\<longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "by simp"], ["proof (state)\nthis:\n  p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n  ((q, j) \\<in> set qis \\<longrightarrow>\n   irreducible q \\<and>\n   j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n  ((q, j) \\<in> set qis \\<longrightarrow>\n   irreducible q \\<and>\n   j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n\ngoal (2 subgoals):\n 1. p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i)\n 2. (q, j) \\<in> set qis \\<Longrightarrow>\n    irreducible q \\<and>\n    j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2}", "thus \"p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i)\" \n  \"(q,j) \\<in> set qis \\<Longrightarrow> irreducible q \\<and> j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1,2}\""], ["proof (prove)\nusing this:\n  p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) \\<and>\n  ((q, j) \\<in> set qis \\<longrightarrow>\n   irreducible q \\<and>\n   j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})\n\ngoal (1 subgoal):\n 1. p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i) &&&\n    ((q, j) \\<in> set qis \\<Longrightarrow>\n     irreducible q \\<and>\n     j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2})", "by blast+"], ["proof (state)\nthis:\n  p = smult c (\\<Prod>(q, i)\\<leftarrow>qis. q ^ i)\n  (q, j) \\<in> set qis \\<Longrightarrow>\n  irreducible q \\<and>\n  j \\<noteq> 0 \\<and> monic q \\<and> degree q \\<in> {1, 2}\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}