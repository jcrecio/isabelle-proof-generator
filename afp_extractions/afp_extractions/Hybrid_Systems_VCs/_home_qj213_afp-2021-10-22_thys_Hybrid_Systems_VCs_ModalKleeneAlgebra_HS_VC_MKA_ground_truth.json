{"file_name": "/home/qj213/afp-2021-10-22/thys/Hybrid_Systems_VCs/ModalKleeneAlgebra/HS_VC_MKA.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Hybrid_Systems_VCs", "problem_names": ["lemma \"|1] x = d x\"", "lemma \"|0] q = 1\"", "lemma \"|x \\<cdot> y] q = |x] |y] q\"", "lemma \"|x + y] q = |x] q \\<cdot> |y] q\"", "lemma le_fbox_choice_iff: \"d p \\<le> |x + y]q \\<longleftrightarrow> (d p \\<le> |x]q) \\<and> (d p \\<le> |y]q)\"", "lemma fbox_export1: \"ad p + |x] q = |d p \\<cdot> x] q\"", "lemma fbox_cond [simp]: \"|if p then x else y] q = (ad p + |x] q) \\<cdot> (d p + |y] q)\"", "lemma fbox_cond2: \"|if p then x else y] q = (d p \\<cdot> |x] q) + (ad p \\<cdot> |y] q)\" (is \"?lhs = ?d1 + ?d2\")", "lemma fbox_frame: \"d p \\<cdot> x \\<le> x \\<cdot> d p \\<Longrightarrow> d q \\<le> |x] r \\<Longrightarrow> d p \\<cdot> d q \\<le> |x] (d p \\<cdot> d r)\"", "lemma fbox_shunt: \"d p \\<cdot> d q \\<le> |x] t \\<longleftrightarrow> d p \\<le> ad q + |x] t\"", "lemma fbox_export2: \"|x] p \\<le> |x \\<cdot> ad q] (d p \\<cdot> ad q)\"", "lemma fbox_while: \"d p \\<cdot> d t \\<le> |x] p \\<Longrightarrow> d p \\<le> |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] (d p \\<cdot> ad t)\"", "lemma fbox_whilei: \n  assumes \"d p \\<le> d i\" and \"d i \\<cdot> ad t \\<le> d q\" and \"d i \\<cdot> d t \\<le> |x] i\"\n  shows \"d p \\<le> |while t do x inv i] q\"", "lemma fbox_seq_var: \"p \\<le> |x] p' \\<Longrightarrow> p' \\<le> |y] q \\<Longrightarrow>  p \\<le> |x \\<cdot> y] q\"", "lemma fbox_whilei_break: \n  \"d p \\<le> |y] i \\<Longrightarrow> d i \\<cdot> ad t \\<le> d q \\<Longrightarrow> d i \\<cdot> d t \\<le> |x] i \\<Longrightarrow> d p \\<le> |y \\<cdot> (while t do x inv i)] q\"", "lemma \"d p \\<le> |x] p \\<Longrightarrow> d p \\<le> |x\\<^sup>\\<star>] p\"", "lemma fbox_loopi: \"p \\<le> d i \\<Longrightarrow> d i \\<le> |x] i \\<Longrightarrow> d i \\<le> d q \\<Longrightarrow> p \\<le> |loop x inv i] q\"", "lemma fbox_loopi_break: \n  \"p \\<le> |y] d i \\<Longrightarrow> d i \\<le> |x] i \\<Longrightarrow> d i \\<le> d q \\<Longrightarrow> p \\<le> |y \\<cdot> (loop x inv i)] q\"", "lemma \"p \\<le> i \\<Longrightarrow> i \\<le> |x]i \\<Longrightarrow> i \\<le> q \\<Longrightarrow> p \\<le> |x]q\"", "lemma \"p \\<le> d i \\<Longrightarrow> d i \\<le> |x]i \\<Longrightarrow> i \\<le> d q \\<Longrightarrow> p \\<le> |x]q\"", "lemma \"(i \\<le> |x] i) \\<or> (j \\<le> |x] j) \\<Longrightarrow> (i + j) \\<le> |x] (i + j)\"", "lemma \"d i \\<le> |x] i \\<Longrightarrow> d j \\<le> |x] j \\<Longrightarrow> (d i + d j) \\<le> |x] (d i + d j)\"", "lemma plus_inv: \"i \\<le> |x] i \\<Longrightarrow> j \\<le> |x] j \\<Longrightarrow> (i + j) \\<le> |x] (i + j)\"", "lemma mult_inv: \"d i \\<le> |x] i \\<Longrightarrow> d j \\<le> |x] j \\<Longrightarrow> (d i \\<cdot> d j) \\<le> |x] (d i \\<cdot> d j)\""], "translations": [["", "lemma \"|1] x = d x\""], ["proof (prove)\ngoal (1 subgoal):\n 1.  |(1::'a)] x = d x", "using fbox_one"], ["proof (prove)\nusing this:\n   |(1::'a)] ?x = d ?x\n\ngoal (1 subgoal):\n 1.  |(1::'a)] x = d x", ".\n\n\\<comment> \\<open> Abort \\<close>"], ["", "lemma \"|0] q = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1.  |(zero_class.zero::'a)] q = (1::'a)", "using fbox_zero"], ["proof (prove)\nusing this:\n   |(zero_class.zero::'a)] ?x = (1::'a)\n\ngoal (1 subgoal):\n 1.  |(zero_class.zero::'a)] q = (1::'a)", ".\n\n\\<comment> \\<open> Sequential composition \\<close>"], ["", "lemma \"|x \\<cdot> y] q = |x] |y] q\""], ["proof (prove)\ngoal (1 subgoal):\n 1.  |x \\<cdot> y] q =  |x]  |y] q", "using fbox_mult"], ["proof (prove)\nusing this:\n   |?x \\<cdot> ?y] ?z =  |?x]  |?y] ?z\n\ngoal (1 subgoal):\n 1.  |x \\<cdot> y] q =  |x]  |y] q", "."], ["", "declare fbox_mult [simp]\n\n\\<comment> \\<open> Nondeterministic choice \\<close>"], ["", "lemma \"|x + y] q = |x] q \\<cdot> |y] q\""], ["proof (prove)\ngoal (1 subgoal):\n 1.  |x + y] q =  |x] q \\<cdot>  |y] q", "using fbox_add2"], ["proof (prove)\nusing this:\n   |?x + ?y] ?z =  |?x] ?z \\<cdot>  |?y] ?z\n\ngoal (1 subgoal):\n 1.  |x + y] q =  |x] q \\<cdot>  |y] q", "."], ["", "lemma le_fbox_choice_iff: \"d p \\<le> |x + y]q \\<longleftrightarrow> (d p \\<le> |x]q) \\<and> (d p \\<le> |y]q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (d p \\<le>  |x + y] q) = (d p \\<le>  |x] q \\<and> d p \\<le>  |y] q)", "by (metis local.a_closure' local.ads_d_def local.dnsz.dom_glb_eq local.fbox_add2 local.fbox_def)\n\n\\<comment> \\<open> Conditional statement \\<close>"], ["", "(* by Victor Gomes, Georg Struth *)"], ["", "definition aka_cond :: \"'a \\<Rightarrow> 'a \\<Rightarrow> 'a \\<Rightarrow> 'a\" (\"if _ then _ else _\" [64,64,64] 63) \n  where \"if p then x else y = d p \\<cdot> x + ad p \\<cdot> y\""], ["", "lemma fbox_export1: \"ad p + |x] q = |d p \\<cdot> x] q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ad p +  |x] q =  |d p \\<cdot> x] q", "using a_d_add_closure addual.ars_r_def fbox_def fbox_mult"], ["proof (prove)\nusing this:\n  d (ad ?x + ad ?y) = ad ?x + ad ?y\n  d ?x = ad (ad ?x)\n   |?x] ?y = ad (?x \\<cdot> ad ?y)\n   |?x \\<cdot> ?y] ?z =  |?x]  |?y] ?z\n\ngoal (1 subgoal):\n 1. ad p +  |x] q =  |d p \\<cdot> x] q", "by auto"], ["", "lemma fbox_cond [simp]: \"|if p then x else y] q = (ad p + |x] q) \\<cdot> (d p + |y] q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1.  |if p then x else y] q = (ad p +  |x] q) \\<cdot> (d p +  |y] q)", "using fbox_export1 local.ans_d_def local.fbox_mult"], ["proof (prove)\nusing this:\n  ad ?p +  |?x] ?q =  |d ?p \\<cdot> ?x] ?q\n  ans_d ?x = ad (ad ?x)\n   |?x \\<cdot> ?y] ?z =  |?x]  |?y] ?z\n\ngoal (1 subgoal):\n 1.  |if p then x else y] q = (ad p +  |x] q) \\<cdot> (d p +  |y] q)", "unfolding aka_cond_def ads_d_def fbox_def"], ["proof (prove)\nusing this:\n  ad ?p + ad (?x \\<cdot> ad ?q) = ad (ad (ad ?p) \\<cdot> ?x \\<cdot> ad ?q)\n  ans_d ?x = ad (ad ?x)\n  ad (?x \\<cdot> ?y \\<cdot> ad ?z) =\n  ad (?x \\<cdot> ad (ad (?y \\<cdot> ad ?z)))\n\ngoal (1 subgoal):\n 1. ad ((ad (ad p) \\<cdot> x + ad p \\<cdot> y) \\<cdot> ad q) =\n    (ad p + ad (x \\<cdot> ad q)) \\<cdot> (ad (ad p) + ad (y \\<cdot> ad q))", "by auto"], ["", "lemma fbox_cond2: \"|if p then x else y] q = (d p \\<cdot> |x] q) + (ad p \\<cdot> |y] q)\" (is \"?lhs = ?d1 + ?d2\")"], ["proof (prove)\ngoal (1 subgoal):\n 1.  |if p then x else y] q = d p \\<cdot>  |x] q + ad p \\<cdot>  |y] q", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1.  |if p then x else y] q = d p \\<cdot>  |x] q + ad p \\<cdot>  |y] q", "have obs: \"?lhs = d p \\<cdot> ?lhs + ad p \\<cdot> ?lhs\""], ["proof (prove)\ngoal (1 subgoal):\n 1.  |if p then x else y] q =\n    d p \\<cdot>  |if p then x else y] q +\n    ad p \\<cdot>  |if p then x else y] q", "by (metis (no_types, lifting) local.a_closure' local.a_de_morgan fbox_def ans_d_def\n        ads_d_def local.am2 local.am5_lem local.dka.dsg3 local.dka.dsr5)"], ["proof (state)\nthis:\n   |if p then x else y] q =\n  d p \\<cdot>  |if p then x else y] q + ad p \\<cdot>  |if p then x else y] q\n\ngoal (1 subgoal):\n 1.  |if p then x else y] q = d p \\<cdot>  |x] q + ad p \\<cdot>  |y] q", "have \"d p \\<cdot> ?lhs = d p \\<cdot> |x] q \\<cdot> (d p + d ( |y] q))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. d p \\<cdot>  |if p then x else y] q =\n    d p \\<cdot>  |x] q \\<cdot> (d p + d ( |y] q))", "using fbox_cond local.a_d_add_closure local.ads_d_def \n      local.ds.ddual.mult_assoc local.fbox_def"], ["proof (prove)\nusing this:\n   |if ?p then ?x else ?y] ?q = (ad ?p +  |?x] ?q) \\<cdot> (d ?p +  |?y] ?q)\n  d (ad ?x + ad ?y) = ad ?x + ad ?y\n  d ?x = ad (ad ?x)\n  ?c \\<cdot> (?b \\<cdot> ?a) = ?c \\<cdot> ?b \\<cdot> ?a\n   |?x] ?y = ad (?x \\<cdot> ad ?y)\n\ngoal (1 subgoal):\n 1. d p \\<cdot>  |if p then x else y] q =\n    d p \\<cdot>  |x] q \\<cdot> (d p + d ( |y] q))", "by auto"], ["proof (state)\nthis:\n  d p \\<cdot>  |if p then x else y] q =\n  d p \\<cdot>  |x] q \\<cdot> (d p + d ( |y] q))\n\ngoal (1 subgoal):\n 1.  |if p then x else y] q = d p \\<cdot>  |x] q + ad p \\<cdot>  |y] q", "also"], ["proof (state)\nthis:\n  d p \\<cdot>  |if p then x else y] q =\n  d p \\<cdot>  |x] q \\<cdot> (d p + d ( |y] q))\n\ngoal (1 subgoal):\n 1.  |if p then x else y] q = d p \\<cdot>  |x] q + ad p \\<cdot>  |y] q", "have \"... = d p \\<cdot> |x] q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. d p \\<cdot>  |x] q \\<cdot> (d p + d ( |y] q)) = d p \\<cdot>  |x] q", "by (metis local.ads_d_def local.am2 local.dka.dns5 local.ds.ddual.mult_assoc local.fbox_def)"], ["proof (state)\nthis:\n  d p \\<cdot>  |x] q \\<cdot> (d p + d ( |y] q)) = d p \\<cdot>  |x] q\n\ngoal (1 subgoal):\n 1.  |if p then x else y] q = d p \\<cdot>  |x] q + ad p \\<cdot>  |y] q", "finally"], ["proof (chain)\npicking this:\n  d p \\<cdot>  |if p then x else y] q = d p \\<cdot>  |x] q", "have \"d p \\<cdot> ?lhs = d p \\<cdot> |x] q\""], ["proof (prove)\nusing this:\n  d p \\<cdot>  |if p then x else y] q = d p \\<cdot>  |x] q\n\ngoal (1 subgoal):\n 1. d p \\<cdot>  |if p then x else y] q = d p \\<cdot>  |x] q", "."], ["proof (state)\nthis:\n  d p \\<cdot>  |if p then x else y] q = d p \\<cdot>  |x] q\n\ngoal (1 subgoal):\n 1.  |if p then x else y] q = d p \\<cdot>  |x] q + ad p \\<cdot>  |y] q", "moreover"], ["proof (state)\nthis:\n  d p \\<cdot>  |if p then x else y] q = d p \\<cdot>  |x] q\n\ngoal (1 subgoal):\n 1.  |if p then x else y] q = d p \\<cdot>  |x] q + ad p \\<cdot>  |y] q", "have \"ad p \\<cdot> ?lhs = ad p \\<cdot> |y] q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ad p \\<cdot>  |if p then x else y] q = ad p \\<cdot>  |y] q", "by (metis add_commute fbox_cond local.a_closure' local.a_mult_add ads_d_def ans_d_def\n        local.dnsz.dns5 local.ds.ddual.mult_assoc local.fbox_def)"], ["proof (state)\nthis:\n  ad p \\<cdot>  |if p then x else y] q = ad p \\<cdot>  |y] q\n\ngoal (1 subgoal):\n 1.  |if p then x else y] q = d p \\<cdot>  |x] q + ad p \\<cdot>  |y] q", "ultimately"], ["proof (chain)\npicking this:\n  d p \\<cdot>  |if p then x else y] q = d p \\<cdot>  |x] q\n  ad p \\<cdot>  |if p then x else y] q = ad p \\<cdot>  |y] q", "show ?thesis"], ["proof (prove)\nusing this:\n  d p \\<cdot>  |if p then x else y] q = d p \\<cdot>  |x] q\n  ad p \\<cdot>  |if p then x else y] q = ad p \\<cdot>  |y] q\n\ngoal (1 subgoal):\n 1.  |if p then x else y] q = d p \\<cdot>  |x] q + ad p \\<cdot>  |y] q", "using obs"], ["proof (prove)\nusing this:\n  d p \\<cdot>  |if p then x else y] q = d p \\<cdot>  |x] q\n  ad p \\<cdot>  |if p then x else y] q = ad p \\<cdot>  |y] q\n   |if p then x else y] q =\n  d p \\<cdot>  |if p then x else y] q + ad p \\<cdot>  |if p then x else y] q\n\ngoal (1 subgoal):\n 1.  |if p then x else y] q = d p \\<cdot>  |x] q + ad p \\<cdot>  |y] q", "by simp"], ["proof (state)\nthis:\n   |if p then x else y] q = d p \\<cdot>  |x] q + ad p \\<cdot>  |y] q\n\ngoal:\nNo subgoals!", "qed\n\n\\<comment> \\<open> While loop \\<close>"], ["", "(* by Victor Gomes, Georg Struth *)"], ["", "definition aka_whilei :: \"'a \\<Rightarrow> 'a \\<Rightarrow> 'a \\<Rightarrow> 'a\" (\"while _ do _ inv _\" [64,64,64] 63) where\n  \"while t do x inv i  = (d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t\""], ["", "lemma fbox_frame: \"d p \\<cdot> x \\<le> x \\<cdot> d p \\<Longrightarrow> d q \\<le> |x] r \\<Longrightarrow> d p \\<cdot> d q \\<le> |x] (d p \\<cdot> d r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>d p \\<cdot> x \\<le> x \\<cdot> d p; d q \\<le>  |x] r\\<rbrakk>\n    \\<Longrightarrow> d p \\<cdot> d q \\<le>  |x] (d p \\<cdot> d r)", "using dual.mult_isol_var fbox_add1 fbox_demodalisation3 fbox_simp"], ["proof (prove)\nusing this:\n  \\<lbrakk>?u \\<le> ?x; ?v \\<le> ?y\\<rbrakk>\n  \\<Longrightarrow> ?v \\<cdot> ?u \\<le> ?y \\<cdot> ?x\n   |?x] (d ?y \\<cdot> d ?z) =  |?x] ?y \\<cdot>  |?x] ?z\n  (d ?y \\<le>  |?x] d ?z) = (d ?y \\<cdot> ?x \\<le> ?x \\<cdot> d ?z)\n   |?x] ?y =  |?x] d ?y\n\ngoal (1 subgoal):\n 1. \\<lbrakk>d p \\<cdot> x \\<le> x \\<cdot> d p; d q \\<le>  |x] r\\<rbrakk>\n    \\<Longrightarrow> d p \\<cdot> d q \\<le>  |x] (d p \\<cdot> d r)", "by auto"], ["", "lemma fbox_shunt: \"d p \\<cdot> d q \\<le> |x] t \\<longleftrightarrow> d p \\<le> ad q + |x] t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (d p \\<cdot> d q \\<le>  |x] t) = (d p \\<le> ad q +  |x] t)", "by (metis a_6 a_antitone' a_loc add_commute addual.ars_r_def am_d_def da_shunt2 fbox_def)"], ["", "lemma fbox_export2: \"|x] p \\<le> |x \\<cdot> ad q] (d p \\<cdot> ad q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1.  |x] p \\<le>  |x \\<cdot> ad q] (d p \\<cdot> ad q)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1.  |x] p \\<le>  |x \\<cdot> ad q] (d p \\<cdot> ad q)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1.  |x] p \\<le>  |x \\<cdot> ad q] (d p \\<cdot> ad q)", "fix t"], ["proof (state)\ngoal (1 subgoal):\n 1.  |x] p \\<le>  |x \\<cdot> ad q] (d p \\<cdot> ad q)", "have \"d t \\<cdot> x \\<le> x \\<cdot> d p \\<Longrightarrow> d t \\<cdot> x \\<cdot> ad q \\<le> x \\<cdot> ad q \\<cdot> d p \\<cdot> ad q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. d t \\<cdot> x \\<le> x \\<cdot> d p \\<Longrightarrow>\n    d t \\<cdot> x \\<cdot> ad q \\<le> x \\<cdot> ad q \\<cdot> d p \\<cdot> ad q", "by (metis (full_types) a_comm_var a_mult_idem ads_d_def am2 ds.ddual.mult_assoc phl_export2)"], ["proof (state)\nthis:\n  d t \\<cdot> x \\<le> x \\<cdot> d p \\<Longrightarrow>\n  d t \\<cdot> x \\<cdot> ad q \\<le> x \\<cdot> ad q \\<cdot> d p \\<cdot> ad q\n\ngoal (1 subgoal):\n 1.  |x] p \\<le>  |x \\<cdot> ad q] (d p \\<cdot> ad q)", "hence \"d t \\<le> |x] p \\<Longrightarrow> d t \\<le> |x \\<cdot> ad q] (d p \\<cdot> ad q)\""], ["proof (prove)\nusing this:\n  d t \\<cdot> x \\<le> x \\<cdot> d p \\<Longrightarrow>\n  d t \\<cdot> x \\<cdot> ad q \\<le> x \\<cdot> ad q \\<cdot> d p \\<cdot> ad q\n\ngoal (1 subgoal):\n 1. d t \\<le>  |x] p \\<Longrightarrow>\n    d t \\<le>  |x \\<cdot> ad q] (d p \\<cdot> ad q)", "by (metis a_closure' addual.ars_r_def ans_d_def dka.dsg3 ds.ddual.mult_assoc fbox_def fbox_demodalisation3)"], ["proof (state)\nthis:\n  d t \\<le>  |x] p \\<Longrightarrow>\n  d t \\<le>  |x \\<cdot> ad q] (d p \\<cdot> ad q)\n\ngoal (1 subgoal):\n 1.  |x] p \\<le>  |x \\<cdot> ad q] (d p \\<cdot> ad q)", "}"], ["proof (state)\nthis:\n  d ?t3 \\<le>  |x] p \\<Longrightarrow>\n  d ?t3 \\<le>  |x \\<cdot> ad q] (d p \\<cdot> ad q)\n\ngoal (1 subgoal):\n 1.  |x] p \\<le>  |x \\<cdot> ad q] (d p \\<cdot> ad q)", "thus ?thesis"], ["proof (prove)\nusing this:\n  d ?t3 \\<le>  |x] p \\<Longrightarrow>\n  d ?t3 \\<le>  |x \\<cdot> ad q] (d p \\<cdot> ad q)\n\ngoal (1 subgoal):\n 1.  |x] p \\<le>  |x \\<cdot> ad q] (d p \\<cdot> ad q)", "by (metis a_closure' addual.ars_r_def ans_d_def fbox_def order_refl)"], ["proof (state)\nthis:\n   |x] p \\<le>  |x \\<cdot> ad q] (d p \\<cdot> ad q)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma fbox_while: \"d p \\<cdot> d t \\<le> |x] p \\<Longrightarrow> d p \\<le> |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] (d p \\<cdot> ad t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. d p \\<cdot> d t \\<le>  |x] p \\<Longrightarrow>\n    d p\n    \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] (d p \\<cdot> ad t)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. d p \\<cdot> d t \\<le>  |x] p \\<Longrightarrow>\n    d p\n    \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] (d p \\<cdot> ad t)", "assume \"d p \\<cdot> d t \\<le> |x] p\""], ["proof (state)\nthis:\n  d p \\<cdot> d t \\<le>  |x] p\n\ngoal (1 subgoal):\n 1. d p \\<cdot> d t \\<le>  |x] p \\<Longrightarrow>\n    d p\n    \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] (d p \\<cdot> ad t)", "hence \"d p \\<le> |d t \\<cdot> x] p\""], ["proof (prove)\nusing this:\n  d p \\<cdot> d t \\<le>  |x] p\n\ngoal (1 subgoal):\n 1. d p \\<le>  |d t \\<cdot> x] p", "by (simp add: fbox_export1 fbox_shunt)"], ["proof (state)\nthis:\n  d p \\<le>  |d t \\<cdot> x] p\n\ngoal (1 subgoal):\n 1. d p \\<cdot> d t \\<le>  |x] p \\<Longrightarrow>\n    d p\n    \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] (d p \\<cdot> ad t)", "hence \"d p \\<le> |(d t \\<cdot> x)\\<^sup>\\<star>] p\""], ["proof (prove)\nusing this:\n  d p \\<le>  |d t \\<cdot> x] p\n\ngoal (1 subgoal):\n 1. d p \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star>] p", "by (simp add: fbox_star_induct_var)"], ["proof (state)\nthis:\n  d p \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star>] p\n\ngoal (1 subgoal):\n 1. d p \\<cdot> d t \\<le>  |x] p \\<Longrightarrow>\n    d p\n    \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] (d p \\<cdot> ad t)", "thus ?thesis"], ["proof (prove)\nusing this:\n  d p \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star>] p\n\ngoal (1 subgoal):\n 1. d p\n    \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] (d p \\<cdot> ad t)", "using order_trans fbox_export2"], ["proof (prove)\nusing this:\n  d p \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star>] p\n  \\<lbrakk>?x \\<le> ?y; ?y \\<le> ?z\\<rbrakk> \\<Longrightarrow> ?x \\<le> ?z\n   |?x] ?p \\<le>  |?x \\<cdot> ad ?q] (d ?p \\<cdot> ad ?q)\n\ngoal (1 subgoal):\n 1. d p\n    \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] (d p \\<cdot> ad t)", "by presburger"], ["proof (state)\nthis:\n  d p \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] (d p \\<cdot> ad t)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma fbox_whilei: \n  assumes \"d p \\<le> d i\" and \"d i \\<cdot> ad t \\<le> d q\" and \"d i \\<cdot> d t \\<le> |x] i\"\n  shows \"d p \\<le> |while t do x inv i] q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. d p \\<le>  |while t do x inv i] q", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. d p \\<le>  |while t do x inv i] q", "have \"d i \\<le> |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] (d i \\<cdot> ad t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. d i\n    \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] (d i \\<cdot> ad t)", "using fbox_while assms"], ["proof (prove)\nusing this:\n  d ?p \\<cdot> d ?t \\<le>  |?x] ?p \\<Longrightarrow>\n  d ?p\n  \\<le>  |(d ?t \\<cdot> ?x)\\<^sup>\\<star> \\<cdot>\n          ad ?t] (d ?p \\<cdot> ad ?t)\n  d p \\<le> d i\n  d i \\<cdot> ad t \\<le> d q\n  d i \\<cdot> d t \\<le>  |x] i\n\ngoal (1 subgoal):\n 1. d i\n    \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] (d i \\<cdot> ad t)", "by blast"], ["proof (state)\nthis:\n  d i \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] (d i \\<cdot> ad t)\n\ngoal (1 subgoal):\n 1. d p \\<le>  |while t do x inv i] q", "also"], ["proof (state)\nthis:\n  d i \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] (d i \\<cdot> ad t)\n\ngoal (1 subgoal):\n 1. d p \\<le>  |while t do x inv i] q", "have \"... \\<le> |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] q\""], ["proof (prove)\ngoal (1 subgoal):\n 1.  |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] (d i \\<cdot> ad t)\n    \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] q", "by (metis assms(2) local.dka.dom_iso local.dka.domain_invol local.fbox_iso)"], ["proof (state)\nthis:\n   |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] (d i \\<cdot> ad t)\n  \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] q\n\ngoal (1 subgoal):\n 1. d p \\<le>  |while t do x inv i] q", "finally"], ["proof (chain)\npicking this:\n  d i \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] q", "show ?thesis"], ["proof (prove)\nusing this:\n  d i \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] q\n\ngoal (1 subgoal):\n 1. d p \\<le>  |while t do x inv i] q", "unfolding aka_whilei_def"], ["proof (prove)\nusing this:\n  d i \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] q\n\ngoal (1 subgoal):\n 1. d p \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] q", "using assms(1) local.dual_order.trans"], ["proof (prove)\nusing this:\n  d i \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] q\n  d p \\<le> d i\n  \\<lbrakk>?b \\<le> ?a; ?c \\<le> ?b\\<rbrakk> \\<Longrightarrow> ?c \\<le> ?a\n\ngoal (1 subgoal):\n 1. d p \\<le>  |(d t \\<cdot> x)\\<^sup>\\<star> \\<cdot> ad t] q", "by blast"], ["proof (state)\nthis:\n  d p \\<le>  |while t do x inv i] q\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma fbox_seq_var: \"p \\<le> |x] p' \\<Longrightarrow> p' \\<le> |y] q \\<Longrightarrow>  p \\<le> |x \\<cdot> y] q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>p \\<le>  |x] p'; p' \\<le>  |y] q\\<rbrakk>\n    \\<Longrightarrow> p \\<le>  |x \\<cdot> y] q", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>p \\<le>  |x] p'; p' \\<le>  |y] q\\<rbrakk>\n    \\<Longrightarrow> p \\<le>  |x \\<cdot> y] q", "assume h1: \"p \\<le> |x] p'\" and h2: \"p' \\<le> |y] q\""], ["proof (state)\nthis:\n  p \\<le>  |x] p'\n  p' \\<le>  |y] q\n\ngoal (1 subgoal):\n 1. \\<lbrakk>p \\<le>  |x] p'; p' \\<le>  |y] q\\<rbrakk>\n    \\<Longrightarrow> p \\<le>  |x \\<cdot> y] q", "hence \"|x] p' \\<le> |x] |y] q\""], ["proof (prove)\nusing this:\n  p \\<le>  |x] p'\n  p' \\<le>  |y] q\n\ngoal (1 subgoal):\n 1.  |x] p' \\<le>  |x]  |y] q", "by (metis ads_d_def fbox_antitone_var fbox_dom fbox_iso)"], ["proof (state)\nthis:\n   |x] p' \\<le>  |x]  |y] q\n\ngoal (1 subgoal):\n 1. \\<lbrakk>p \\<le>  |x] p'; p' \\<le>  |y] q\\<rbrakk>\n    \\<Longrightarrow> p \\<le>  |x \\<cdot> y] q", "thus ?thesis"], ["proof (prove)\nusing this:\n   |x] p' \\<le>  |x]  |y] q\n\ngoal (1 subgoal):\n 1. p \\<le>  |x \\<cdot> y] q", "by (metis dual_order.trans fbox_mult h1)"], ["proof (state)\nthis:\n  p \\<le>  |x \\<cdot> y] q\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma fbox_whilei_break: \n  \"d p \\<le> |y] i \\<Longrightarrow> d i \\<cdot> ad t \\<le> d q \\<Longrightarrow> d i \\<cdot> d t \\<le> |x] i \\<Longrightarrow> d p \\<le> |y \\<cdot> (while t do x inv i)] q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>d p \\<le>  |y] i; d i \\<cdot> ad t \\<le> d q;\n     d i \\<cdot> d t \\<le>  |x] i\\<rbrakk>\n    \\<Longrightarrow> d p \\<le>  |y \\<cdot> (while t do x inv i)] q", "apply (rule fbox_seq_var[OF _ fbox_whilei])"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<lbrakk>d p \\<le>  |y] i; d i \\<cdot> ad t \\<le> d q;\n     d i \\<cdot> d t \\<le>  |x] i\\<rbrakk>\n    \\<Longrightarrow> d p \\<le>  |y] d ?p1\n 2. \\<lbrakk>d p \\<le>  |y] i; d i \\<cdot> ad t \\<le> d q;\n     d i \\<cdot> d t \\<le>  |x] i\\<rbrakk>\n    \\<Longrightarrow> d ?p1 \\<le> d i\n 3. \\<lbrakk>d p \\<le>  |y] i; d i \\<cdot> ad t \\<le> d q;\n     d i \\<cdot> d t \\<le>  |x] i\\<rbrakk>\n    \\<Longrightarrow> d i \\<cdot> ad t \\<le> d q\n 4. \\<lbrakk>d p \\<le>  |y] i; d i \\<cdot> ad t \\<le> d q;\n     d i \\<cdot> d t \\<le>  |x] i\\<rbrakk>\n    \\<Longrightarrow> d i \\<cdot> d t \\<le>  |x] i", "using fbox_simp"], ["proof (prove)\nusing this:\n   |?x] ?y =  |?x] d ?y\n\ngoal (4 subgoals):\n 1. \\<lbrakk>d p \\<le>  |y] i; d i \\<cdot> ad t \\<le> d q;\n     d i \\<cdot> d t \\<le>  |x] i\\<rbrakk>\n    \\<Longrightarrow> d p \\<le>  |y] d ?p1\n 2. \\<lbrakk>d p \\<le>  |y] i; d i \\<cdot> ad t \\<le> d q;\n     d i \\<cdot> d t \\<le>  |x] i\\<rbrakk>\n    \\<Longrightarrow> d ?p1 \\<le> d i\n 3. \\<lbrakk>d p \\<le>  |y] i; d i \\<cdot> ad t \\<le> d q;\n     d i \\<cdot> d t \\<le>  |x] i\\<rbrakk>\n    \\<Longrightarrow> d i \\<cdot> ad t \\<le> d q\n 4. \\<lbrakk>d p \\<le>  |y] i; d i \\<cdot> ad t \\<le> d q;\n     d i \\<cdot> d t \\<le>  |x] i\\<rbrakk>\n    \\<Longrightarrow> d i \\<cdot> d t \\<le>  |x] i", "by auto\n\n\\<comment> \\<open> Finite iteration \\<close>"], ["", "definition aka_loopi :: \"'a \\<Rightarrow> 'a \\<Rightarrow> 'a\" (\"loop _ inv _ \" [64,64] 63)\n  where \"loop x inv i = x\\<^sup>\\<star>\""], ["", "lemma \"d p \\<le> |x] p \\<Longrightarrow> d p \\<le> |x\\<^sup>\\<star>] p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. d p \\<le>  |x] p \\<Longrightarrow> d p \\<le>  |x\\<^sup>\\<star>] p", "using fbox_star_induct_var"], ["proof (prove)\nusing this:\n  d ?y \\<le>  |?x] ?y \\<Longrightarrow> d ?y \\<le>  |?x\\<^sup>\\<star>] ?y\n\ngoal (1 subgoal):\n 1. d p \\<le>  |x] p \\<Longrightarrow> d p \\<le>  |x\\<^sup>\\<star>] p", "."], ["", "lemma fbox_loopi: \"p \\<le> d i \\<Longrightarrow> d i \\<le> |x] i \\<Longrightarrow> d i \\<le> d q \\<Longrightarrow> p \\<le> |loop x inv i] q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>p \\<le> d i; d i \\<le>  |x] i; d i \\<le> d q\\<rbrakk>\n    \\<Longrightarrow> p \\<le>  |loop x inv i ] q", "unfolding aka_loopi_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>p \\<le> d i; d i \\<le>  |x] i; d i \\<le> d q\\<rbrakk>\n    \\<Longrightarrow> p \\<le>  |x\\<^sup>\\<star>] q", "by (meson dual_order.trans fbox_iso fbox_star_induct_var)"], ["", "lemma fbox_loopi_break: \n  \"p \\<le> |y] d i \\<Longrightarrow> d i \\<le> |x] i \\<Longrightarrow> d i \\<le> d q \\<Longrightarrow> p \\<le> |y \\<cdot> (loop x inv i)] q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>p \\<le>  |y] d i; d i \\<le>  |x] i; d i \\<le> d q\\<rbrakk>\n    \\<Longrightarrow> p \\<le>  |y \\<cdot> (loop x inv i )] q", "by (rule fbox_seq_var, force) (rule fbox_loopi, auto) \n\n\\<comment> \\<open> Invariants \\<close>"], ["", "lemma \"p \\<le> i \\<Longrightarrow> i \\<le> |x]i \\<Longrightarrow> i \\<le> q \\<Longrightarrow> p \\<le> |x]q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>p \\<le> i; i \\<le>  |x] i; i \\<le> q\\<rbrakk>\n    \\<Longrightarrow> p \\<le>  |x] q", "by (metis local.ads_d_def local.dpdz.dom_iso local.dual_order.trans local.fbox_iso)"], ["", "lemma \"p \\<le> d i \\<Longrightarrow> d i \\<le> |x]i \\<Longrightarrow> i \\<le> d q \\<Longrightarrow> p \\<le> |x]q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>p \\<le> d i; d i \\<le>  |x] i; i \\<le> d q\\<rbrakk>\n    \\<Longrightarrow> p \\<le>  |x] q", "by (metis local.a_4 local.a_antitone' local.a_subid_aux2 ads_d_def local.antisym fbox_def\n      local.dka.dsg1 local.dual.mult_isol_var local.dual_order.trans local.order.refl)"], ["", "lemma \"(i \\<le> |x] i) \\<or> (j \\<le> |x] j) \\<Longrightarrow> (i + j) \\<le> |x] (i + j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i \\<le>  |x] i \\<or> j \\<le>  |x] j \\<Longrightarrow>\n    i + j \\<le>  |x] (i + j)", "(*nitpick*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. i \\<le>  |x] i \\<or> j \\<le>  |x] j \\<Longrightarrow>\n    i + j \\<le>  |x] (i + j)", "oops"], ["", "lemma \"d i \\<le> |x] i \\<Longrightarrow> d j \\<le> |x] j \\<Longrightarrow> (d i + d j) \\<le> |x] (d i + d j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>d i \\<le>  |x] i; d j \\<le>  |x] j\\<rbrakk>\n    \\<Longrightarrow> d i + d j \\<le>  |x] (d i + d j)", "by (metis (no_types, lifting) dual_order.trans fbox_simp fbox_subdist join.le_supE join.le_supI)"], ["", "lemma plus_inv: \"i \\<le> |x] i \\<Longrightarrow> j \\<le> |x] j \\<Longrightarrow> (i + j) \\<le> |x] (i + j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>i \\<le>  |x] i; j \\<le>  |x] j\\<rbrakk>\n    \\<Longrightarrow> i + j \\<le>  |x] (i + j)", "by (metis ads_d_def dka.dsr5 fbox_simp fbox_subdist join.sup_mono order_trans)"], ["", "lemma mult_inv: \"d i \\<le> |x] i \\<Longrightarrow> d j \\<le> |x] j \\<Longrightarrow> (d i \\<cdot> d j) \\<le> |x] (d i \\<cdot> d j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>d i \\<le>  |x] i; d j \\<le>  |x] j\\<rbrakk>\n    \\<Longrightarrow> d i \\<cdot> d j \\<le>  |x] (d i \\<cdot> d j)", "using fbox_demodalisation3 fbox_frame fbox_simp"], ["proof (prove)\nusing this:\n  (d ?y \\<le>  |?x] d ?z) = (d ?y \\<cdot> ?x \\<le> ?x \\<cdot> d ?z)\n  \\<lbrakk>d ?p \\<cdot> ?x \\<le> ?x \\<cdot> d ?p;\n   d ?q \\<le>  |?x] ?r\\<rbrakk>\n  \\<Longrightarrow> d ?p \\<cdot> d ?q \\<le>  |?x] (d ?p \\<cdot> d ?r)\n   |?x] ?y =  |?x] d ?y\n\ngoal (1 subgoal):\n 1. \\<lbrakk>d i \\<le>  |x] i; d j \\<le>  |x] j\\<rbrakk>\n    \\<Longrightarrow> d i \\<cdot> d j \\<le>  |x] (d i \\<cdot> d j)", "by auto"], ["", "end"], ["", "end"]]}