{"file_name": "/home/qj213/afp-2021-10-22/thys/Hybrid_Systems_VCs/PredicateTransformers/HS_VC_PT.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Hybrid_Systems_VCs", "problem_names": ["lemma \"fb\\<^sub>\\<F> F S = (\\<Inter> \\<circ> \\<P> (- op\\<^sub>K F)) (- S)\"", "lemma \"fb\\<^sub>\\<F> F S = {s. F s \\<subseteq> S}\"", "lemma ffb_eq: \"fb\\<^sub>\\<F> F S = {s. \\<forall>s'. s' \\<in> F s \\<longrightarrow> s' \\<in> S}\"", "lemma ffb_iso: \"P \\<le> Q \\<Longrightarrow> fb\\<^sub>\\<F> F P \\<le> fb\\<^sub>\\<F> F Q\"", "lemma ffb_invariants: \n  assumes \"{s. I s} \\<le> fb\\<^sub>\\<F> F {s. I s}\" and \"{s. J s} \\<le> fb\\<^sub>\\<F> F {s. J s}\"\n  shows \"{s. I s \\<and> J s} \\<le> fb\\<^sub>\\<F> F {s. I s \\<and> J s}\"\n    and \"{s. I s \\<or> J s} \\<le> fb\\<^sub>\\<F> F {s. I s \\<or> J s}\"", "lemma ffb_skip[simp]: \"fb\\<^sub>\\<F> skip S = S\"", "lemma ffb_test[simp]: \"fb\\<^sub>\\<F> \\<questiondown>P? Q = {s. P s \\<longrightarrow> s \\<in> Q}\"", "lemma ffb_assign[simp]: \"fb\\<^sub>\\<F> (x ::= e) Q = {s. (\\<chi> j. ((($) s)(x := (e s))) j) \\<in> Q}\"", "lemma fbox_nondet_assign[simp]: \"fb\\<^sub>\\<F> (x ::= ?) P = {s. \\<forall>k. (\\<chi> j. if j = x then k else s$j) \\<in> P}\"", "lemma ffb_choice: \"fb\\<^sub>\\<F> (\\<lambda>s. F s \\<union> G s) P = fb\\<^sub>\\<F> F P \\<inter> fb\\<^sub>\\<F> G P\"", "lemma le_ffb_choice_iff: \"P \\<subseteq> fb\\<^sub>\\<F> (\\<lambda>s. F s \\<union> G s) Q \\<longleftrightarrow> P \\<subseteq> fb\\<^sub>\\<F> F Q \\<and> P \\<subseteq> fb\\<^sub>\\<F> G Q\"", "lemma ffb_kcomp[simp]: \"fb\\<^sub>\\<F> (G ; F) P = fb\\<^sub>\\<F> G (fb\\<^sub>\\<F> F P)\"", "lemma hoare_kcomp:\n  assumes \"P \\<le> fb\\<^sub>\\<F> F R\" \"R \\<le> fb\\<^sub>\\<F> G Q\"\n  shows \"P \\<le> fb\\<^sub>\\<F> (F ; G) Q\"", "lemma ffb_if_then_else[simp]:\n  \"fb\\<^sub>\\<F> (IF T THEN X ELSE Y) Q = {s. T s \\<longrightarrow> s \\<in> fb\\<^sub>\\<F> X Q} \\<inter> {s. \\<not> T s \\<longrightarrow> s \\<in> fb\\<^sub>\\<F> Y Q}\"", "lemma hoare_if_then_else:\n  assumes \"P \\<inter> {s. T s} \\<le> fb\\<^sub>\\<F> X Q\"\n    and \"P \\<inter> {s. \\<not> T s} \\<le> fb\\<^sub>\\<F> Y Q\"\n  shows \"P \\<le> fb\\<^sub>\\<F> (IF T THEN X ELSE Y) Q\"", "lemma kpower_inv: \"I \\<le> {s. \\<forall>y. y \\<in> F s \\<longrightarrow> y \\<in> I} \\<Longrightarrow> I \\<le> {s. \\<forall>y. y \\<in> (kpower F n s) \\<longrightarrow> y \\<in> I}\"", "lemma kstar_inv: \"I \\<le> fb\\<^sub>\\<F> F I \\<Longrightarrow> I \\<subseteq> fb\\<^sub>\\<F> (kstar F) I\"", "lemma ffb_kstarI:\n  assumes \"P \\<le> I\" and \"I \\<le> Q\" and \"I \\<le> fb\\<^sub>\\<F> F I\"\n  shows \"P \\<le> fb\\<^sub>\\<F> (kstar F) Q\"", "lemma change_loopI: \"LOOP X INV G = LOOP X INV I\"", "lemma ffb_loopI: \"P \\<le> {s. I s}  \\<Longrightarrow> {s. I s} \\<le> Q \\<Longrightarrow> {s. I s} \\<le> fb\\<^sub>\\<F> F {s. I s} \\<Longrightarrow> P \\<le> fb\\<^sub>\\<F> (LOOP F INV I) Q\"", "lemma ffb_loopI_break: \n  \"P \\<le> fb\\<^sub>\\<F> Y {s. I s} \\<Longrightarrow> {s. I s} \\<le> fb\\<^sub>\\<F> X {s. I s} \\<Longrightarrow> {s. I s} \\<le> Q \\<Longrightarrow> P \\<le> fb\\<^sub>\\<F> (Y ; (LOOP X INV I)) Q\"", "lemma fbox_g_evol[simp]: \n  fixes \\<phi> :: \"('a::preorder) \\<Rightarrow> 'b \\<Rightarrow> 'b\"\n  shows \"fb\\<^sub>\\<F> (EVOL \\<phi> G U) Q = {s. (\\<forall>t\\<in>U s. (\\<forall>\\<tau>\\<in>down (U s) t. G (\\<phi> \\<tau> s)) \\<longrightarrow> (\\<phi> t s) \\<in> Q)}\"", "lemma ffb_g_orbital: \"fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) Q = \n  {s. \\<forall>X\\<in>Sols f U S t\\<^sub>0 s. \\<forall>t\\<in>U s. (\\<forall>\\<tau>\\<in>down (U s) t. G (X \\<tau>)) \\<longrightarrow> (X t) \\<in> Q}\"", "lemma ffb_g_ode_subset:\n  assumes \"\\<And>s. s \\<in> S \\<Longrightarrow> 0 \\<in> U s \\<and> is_interval (U s) \\<and> U s \\<subseteq> T\"\n  shows \"fb\\<^sub>\\<F> (x\\<acute>= (\\<lambda>t. f) & G on U S @ 0) Q = \n  {s. s \\<in> S \\<longrightarrow> (\\<forall>t\\<in>(U s). (\\<forall>\\<tau>\\<in>down (U s) t. G (\\<phi> \\<tau> s)) \\<longrightarrow> (\\<phi> t s) \\<in> Q)}\"", "lemma ffb_g_ode: \"fb\\<^sub>\\<F> (x\\<acute>= (\\<lambda>t. f) & G on (\\<lambda>s. T) S @ 0) Q = \n  {s. s \\<in> S \\<longrightarrow> (\\<forall>t\\<in>T. (\\<forall>\\<tau>\\<in>down T t. G (\\<phi> \\<tau> s)) \\<longrightarrow> (\\<phi> t s) \\<in> Q)}\" (is \"_ = ?wlp\")", "lemma ffb_g_ode_ivl: \"t \\<ge> 0 \\<Longrightarrow> t \\<in> T \\<Longrightarrow> fb\\<^sub>\\<F> (x\\<acute>=(\\<lambda>t. f) & G on (\\<lambda>s. {0..t}) S @ 0) Q = \n  {s. s \\<in> S \\<longrightarrow> (\\<forall>t\\<in>{0..t}. (\\<forall>\\<tau>\\<in>{0..t}. G (\\<phi> \\<tau> s)) \\<longrightarrow> (\\<phi> t s) \\<in> Q)}\"", "lemma ffb_orbit: \"fb\\<^sub>\\<F> \\<gamma>\\<^sup>\\<phi> Q = {s. s \\<in> S \\<longrightarrow> (\\<forall> t \\<in> T. \\<phi> t s \\<in> Q)}\"", "lemma ffb_g_orbital_guard: \n  assumes \"H = (\\<lambda>s. G s \\<and> Q s)\"\n  shows \"fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) {s. Q s} = fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) {s. H s}\"", "lemma ffb_g_orbital_inv:\n  assumes \"P \\<le> I\" and \"I \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) I\" and \"I \\<le> Q\"\n  shows \"P \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) Q\"", "lemma ffb_diff_inv[simp]: \n  \"({s. I s} \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) {s. I s}) = diff_invariant I f U S t\\<^sub>0 G\"", "lemma bdf_diff_inv:\n  \"diff_invariant I f U S t\\<^sub>0 G = (bd\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) {s. I s} \\<le> {s. I s})\"", "lemma diff_inv_guard_ignore:\n  assumes \"{s. I s} \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & (\\<lambda>s. True) on U S @ t\\<^sub>0) {s. I s}\"\n  shows \"{s. I s} \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) {s. I s}\"", "lemma ffb_diff_inv_eq: \n  assumes \"\\<And>s. s \\<in> S \\<Longrightarrow> 0 \\<in> U s \\<and> is_interval (U s) \\<and> U s \\<subseteq> T\"\n  shows \"diff_invariant I (\\<lambda>t. f) U S 0 (\\<lambda>s. True) = \n  ({s. s \\<in> S \\<longrightarrow> I s} = fb\\<^sub>\\<F> (x\\<acute>= (\\<lambda>t. f) & (\\<lambda>s. True) on U S @ 0) {s. s \\<in> S \\<longrightarrow> I s})\"", "lemma diff_inv_eq_inv_set:\n  \"diff_invariant I (\\<lambda>t. f) (\\<lambda>s. T) S 0 (\\<lambda>s. True) = (\\<forall>s. I s \\<longrightarrow> \\<gamma>\\<^sup>\\<phi> s \\<subseteq> {s. I s})\"", "lemma ffb_g_odei: \"P \\<le> {s. I s} \\<Longrightarrow> {s. I s} \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) {s. I s} \\<Longrightarrow> \n  {s. I s \\<and> G s} \\<le> Q \\<Longrightarrow> P \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0 DINV I) Q\"", "lemma diff_solve_axiom1: \n  assumes \"local_flow f UNIV UNIV \\<phi>\"\n  shows \"fb\\<^sub>\\<F> (x\\<acute>= f & G) Q = \n  {s. \\<forall>t\\<ge>0. (\\<forall>\\<tau>\\<in>{0..t}. G (\\<phi> \\<tau> s)) \\<longrightarrow> (\\<phi> t s) \\<in> Q}\"", "lemma diff_solve_axiom2: \n  fixes c::\"'a::{heine_borel, banach}\"\n  shows \"fb\\<^sub>\\<F> (x\\<acute>=(\\<lambda>s. c) & G) Q = \n  {s. \\<forall>t\\<ge>0. (\\<forall>\\<tau>\\<in>{0..t}. G (s + \\<tau> *\\<^sub>R c)) \\<longrightarrow> (s + t *\\<^sub>R c) \\<in> Q}\"", "lemma diff_solve_rule:\n  assumes \"local_flow f UNIV UNIV \\<phi>\"\n    and \"\\<forall>s. s \\<in> P \\<longrightarrow> (\\<forall>t\\<ge>0. (\\<forall>\\<tau>\\<in>{0..t}. G (\\<phi> \\<tau> s)) \\<longrightarrow> (\\<phi> t s) \\<in> Q)\"\n  shows \"P \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & G) Q\"", "lemma diff_weak_axiom1: \"s \\<in> (fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) {s. G s})\"", "lemma diff_weak_axiom2: \"fb\\<^sub>\\<F> (x\\<acute>= f & G on T S @ t\\<^sub>0) Q = fb\\<^sub>\\<F> (x\\<acute>= f & G on T S @ t\\<^sub>0) {s. G s \\<longrightarrow> s \\<in> Q}\"", "lemma diff_weak_rule: \"{s. G s} \\<le> Q \\<Longrightarrow> P \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & G on T S @ t\\<^sub>0) Q\"", "lemma ffb_g_orbital_eq_univD:\n  assumes \"fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) {s. C s} = UNIV\" \n    and \"\\<forall>\\<tau>\\<in>(down (U s) t). x \\<tau> \\<in> (x\\<acute>= f & G on U S @ t\\<^sub>0) s\"\n  shows \"\\<forall>\\<tau>\\<in>(down (U s) t). C (x \\<tau>)\"", "lemma diff_cut_axiom:\n  assumes \"fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) {s. C s} = UNIV\"\n  shows \"fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) Q = fb\\<^sub>\\<F> (x\\<acute>= f & (\\<lambda>s. G s \\<and> C s) on U S @ t\\<^sub>0) Q\"", "lemma diff_cut_rule:\n  assumes ffb_C: \"P \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) {s. C s}\"\n    and ffb_Q: \"P \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & (\\<lambda>s. G s \\<and> C s) on U S @ t\\<^sub>0) Q\"\n  shows \"P \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) Q\"", "lemma diff_inv_axiom1:\n  assumes \"G s \\<longrightarrow> I s\" and \"diff_invariant I (\\<lambda>t. f) (\\<lambda>s. {t. t \\<ge> 0}) UNIV 0 G\"\n  shows \"s \\<in> (fb\\<^sub>\\<F> (x\\<acute>= f & G) {s. I s})\"", "lemma diff_inv_axiom2:\n  assumes \"picard_lindeloef (\\<lambda>t. f) UNIV UNIV 0\"\n    and \"\\<And>s. {t::real. t \\<ge> 0} \\<subseteq> picard_lindeloef.ex_ivl (\\<lambda>t. f) UNIV UNIV 0 s\"\n    and \"diff_invariant I (\\<lambda>t. f) (\\<lambda>s. {t::real. t \\<ge> 0}) UNIV 0 G\"\n  shows \"fb\\<^sub>\\<F> (x\\<acute>= f & G) {s. I s} = fb\\<^sub>\\<F> (\\<lambda>s. {x. s = x \\<and> G s}) {s. I s}\"", "lemma diff_inv_rule:\n  assumes \"P \\<le> {s. I s}\" and \"diff_invariant I f U S t\\<^sub>0 G\" and \"{s. I s} \\<le> Q\"\n  shows \"P \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) Q\""], "translations": [["", "lemma \"fb\\<^sub>\\<F> F S = (\\<Inter> \\<circ> \\<P> (- op\\<^sub>K F)) (- S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F> F S = (\\<Inter> \\<circ> \\<P> (- op\\<^sub>K F)) (- S)", "unfolding ffb_def map_dual_def dual_set_def klift_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>f. uminus \\<circ> f \\<circ> uminus) \\<circ>\n     (\\<lambda>f. \\<mu> \\<circ> \\<P> f) \\<circ>\n     op\\<^sub>K)\n     F S =\n    (\\<Inter> \\<circ> \\<P> (- op\\<^sub>K F)) (- S)", "by simp"], ["", "lemma \"fb\\<^sub>\\<F> F S = {s. F s \\<subseteq> S}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F> F S = {s. F s \\<subseteq> S}", "by (auto simp: ffb_def kop_def klift_def map_dual_def dual_set_def f2r_def r2f_def)"], ["", "lemma ffb_eq: \"fb\\<^sub>\\<F> F S = {s. \\<forall>s'. s' \\<in> F s \\<longrightarrow> s' \\<in> S}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F> F S =\n    {s. \\<forall>s'. s2p (F s) s' \\<longrightarrow> s2p S s'}", "by (auto simp: ffb_def kop_def klift_def map_dual_def dual_set_def f2r_def r2f_def)"], ["", "lemma ffb_iso: \"P \\<le> Q \\<Longrightarrow> fb\\<^sub>\\<F> F P \\<le> fb\\<^sub>\\<F> F Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<subseteq> Q \\<Longrightarrow>\n    fb\\<^sub>\\<F> F P \\<subseteq> fb\\<^sub>\\<F> F Q", "unfolding ffb_eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<subseteq> Q \\<Longrightarrow>\n    {s. \\<forall>s'. s2p (F s) s' \\<longrightarrow> s2p P s'}\n    \\<subseteq> {s. \\<forall>s'. s2p (F s) s' \\<longrightarrow> s2p Q s'}", "by auto"], ["", "lemma ffb_invariants: \n  assumes \"{s. I s} \\<le> fb\\<^sub>\\<F> F {s. I s}\" and \"{s. J s} \\<le> fb\\<^sub>\\<F> F {s. J s}\"\n  shows \"{s. I s \\<and> J s} \\<le> fb\\<^sub>\\<F> F {s. I s \\<and> J s}\"\n    and \"{s. I s \\<or> J s} \\<le> fb\\<^sub>\\<F> F {s. I s \\<or> J s}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {s. I s \\<and> J s} \\<subseteq> fb\\<^sub>\\<F> F {s. I s \\<and> J s} &&&\n    {s. I s \\<or> J s} \\<subseteq> fb\\<^sub>\\<F> F {s. I s \\<or> J s}", "using assms"], ["proof (prove)\nusing this:\n  {s. I s} \\<subseteq> fb\\<^sub>\\<F> F {s. I s}\n  {s. J s} \\<subseteq> fb\\<^sub>\\<F> F {s. J s}\n\ngoal (1 subgoal):\n 1. {s. I s \\<and> J s} \\<subseteq> fb\\<^sub>\\<F> F {s. I s \\<and> J s} &&&\n    {s. I s \\<or> J s} \\<subseteq> fb\\<^sub>\\<F> F {s. I s \\<or> J s}", "unfolding ffb_eq"], ["proof (prove)\nusing this:\n  {s. I s}\n  \\<subseteq> {s. \\<forall>s'.\n                     s2p (F s) s' \\<longrightarrow> s2p (Collect I) s'}\n  {s. J s}\n  \\<subseteq> {s. \\<forall>s'.\n                     s2p (F s) s' \\<longrightarrow> s2p (Collect J) s'}\n\ngoal (1 subgoal):\n 1. {s. I s \\<and> J s}\n    \\<subseteq> {s. \\<forall>s'.\n                       s2p (F s) s' \\<longrightarrow>\n                       s2p {s. I s \\<and> J s} s'} &&&\n    {s. I s \\<or> J s}\n    \\<subseteq> {s. \\<forall>s'.\n                       s2p (F s) s' \\<longrightarrow>\n                       s2p {s. I s \\<or> J s} s'}", "by auto\n\n\\<comment> \\<open> Skip \\<close>"], ["", "lemma ffb_skip[simp]: \"fb\\<^sub>\\<F> skip S = S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F> skip S = S", "unfolding ffb_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<partial>\\<^sub>F \\<circ> bd\\<^sub>\\<F> \\<circ> op\\<^sub>K) skip S = S", "by(simp add: kop_def klift_def map_dual_def)\n\n\\<comment> \\<open> Tests \\<close>"], ["", "definition test :: \"'a pred \\<Rightarrow> 'a \\<Rightarrow> 'a set\" (\"(1\\<questiondown>_?)\")\n  where \"\\<questiondown>P? = (\\<lambda>s. {x. x = s \\<and> P x})\""], ["", "lemma ffb_test[simp]: \"fb\\<^sub>\\<F> \\<questiondown>P? Q = {s. P s \\<longrightarrow> s \\<in> Q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F> \\<questiondown>P? Q = {s. P s \\<longrightarrow> s2p Q s}", "unfolding ffb_eq test_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {s. \\<forall>s'.\n           s2p {x. x = s \\<and> P x} s' \\<longrightarrow> s2p Q s'} =\n    {s. P s \\<longrightarrow> s2p Q s}", "by simp\n\n\\<comment> \\<open> Assignments \\<close>"], ["", "definition assign :: \"'n \\<Rightarrow> ('a^'n \\<Rightarrow> 'a) \\<Rightarrow> ('a^'n) \\<Rightarrow> ('a^'n) set\" (\"(2_ ::= _)\" [70, 65] 61) \n  where \"(x ::= e) = (\\<lambda>s. {vec_upd s x (e s)})\""], ["", "lemma ffb_assign[simp]: \"fb\\<^sub>\\<F> (x ::= e) Q = {s. (\\<chi> j. ((($) s)(x := (e s))) j) \\<in> Q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F> (x ::= e) Q = {s. s2p Q (\\<chi>j. ((($) s)(x := e s)) j)}", "unfolding vec_upd_def assign_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F> (\\<lambda>s. skip (vec_lambda ((($) s)(x := e s)))) Q =\n    {s. s2p Q (\\<chi>j. ((($) s)(x := e s)) j)}", "by (subst ffb_eq) simp\n\n\\<comment> \\<open> Nondeterministic assignments \\<close>"], ["", "definition nondet_assign :: \"'n \\<Rightarrow> 'a^'n \\<Rightarrow> ('a^'n) set\" (\"(2_ ::= ? )\" [70] 61)\n  where \"(x ::= ?) = (\\<lambda>s. {(vec_upd s x k)|k. True})\""], ["", "lemma fbox_nondet_assign[simp]: \"fb\\<^sub>\\<F> (x ::= ?) P = {s. \\<forall>k. (\\<chi> j. if j = x then k else s$j) \\<in> P}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F> (x ::= ? ) P =\n    {s. \\<forall>k. s2p P (\\<chi>j. if j = x then k else s $ j)}", "unfolding ffb_eq nondet_assign_def vec_upd_eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. {s. \\<forall>s'.\n           s2p {\\<chi>j. if j = x then k else s $ j |k. True}\n            s' \\<longrightarrow>\n           s2p P s'} =\n    {s. \\<forall>k. s2p P (\\<chi>j. if j = x then k else s $ j)}", "apply(simp add: fun_eq_iff, safe)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>xa k.\n       \\<forall>s'.\n          (\\<exists>k.\n              s' = (\\<chi>j. if j = x then k else xa $ j)) \\<longrightarrow>\n          s2p P s' \\<Longrightarrow>\n       s2p P (\\<chi>j. if j = x then k else xa $ j)\n 2. \\<And>xa s' k.\n       \\<forall>k.\n          s2p P (\\<chi>j. if j = x then k else xa $ j) \\<Longrightarrow>\n       s2p P (\\<chi>j. if j = x then k else xa $ j)", "by (erule_tac x=\"(\\<chi> j. if j = x then k else _ $ j)\" in allE, auto)\n\n\\<comment> \\<open> Nondeterministic choice \\<close>"], ["", "lemma ffb_choice: \"fb\\<^sub>\\<F> (\\<lambda>s. F s \\<union> G s) P = fb\\<^sub>\\<F> F P \\<inter> fb\\<^sub>\\<F> G P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F> (\\<lambda>s. F s \\<union> G s) P =\n    fb\\<^sub>\\<F> F P \\<inter> fb\\<^sub>\\<F> G P", "unfolding ffb_eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. {s. \\<forall>s'. s2p (F s \\<union> G s) s' \\<longrightarrow> s2p P s'} =\n    {s. \\<forall>s'. s2p (F s) s' \\<longrightarrow> s2p P s'} \\<inter>\n    {s. \\<forall>s'. s2p (G s) s' \\<longrightarrow> s2p P s'}", "by auto"], ["", "lemma le_ffb_choice_iff: \"P \\<subseteq> fb\\<^sub>\\<F> (\\<lambda>s. F s \\<union> G s) Q \\<longleftrightarrow> P \\<subseteq> fb\\<^sub>\\<F> F Q \\<and> P \\<subseteq> fb\\<^sub>\\<F> G Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<subseteq> fb\\<^sub>\\<F> (\\<lambda>s. F s \\<union> G s) Q) =\n    (P \\<subseteq> fb\\<^sub>\\<F> F Q \\<and> P \\<subseteq> fb\\<^sub>\\<F> G Q)", "unfolding ffb_eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<subseteq> {s. \\<forall>s'.\n                          s2p (F s \\<union> G s) s' \\<longrightarrow>\n                          s2p Q s'}) =\n    (P \\<subseteq> {s. \\<forall>s'.\n                          s2p (F s) s' \\<longrightarrow> s2p Q s'} \\<and>\n     P \\<subseteq> {s. \\<forall>s'.\n                          s2p (G s) s' \\<longrightarrow> s2p Q s'})", "by auto\n\n\\<comment> \\<open> Sequential composition \\<close>"], ["", "lemma ffb_kcomp[simp]: \"fb\\<^sub>\\<F> (G ; F) P = fb\\<^sub>\\<F> G (fb\\<^sub>\\<F> F P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F> (G ; F) P = fb\\<^sub>\\<F> G (fb\\<^sub>\\<F> F P)", "unfolding ffb_eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. {s. \\<forall>s'. s2p ((G ; F) s) s' \\<longrightarrow> s2p P s'} =\n    {s. \\<forall>s'.\n           s2p (G s) s' \\<longrightarrow>\n           s2p {s. \\<forall>s'. s2p (F s) s' \\<longrightarrow> s2p P s'} s'}", "by (auto simp: kcomp_def)"], ["", "lemma hoare_kcomp:\n  assumes \"P \\<le> fb\\<^sub>\\<F> F R\" \"R \\<le> fb\\<^sub>\\<F> G Q\"\n  shows \"P \\<le> fb\\<^sub>\\<F> (F ; G) Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<subseteq> fb\\<^sub>\\<F> (F ; G) Q", "apply(subst ffb_kcomp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<subseteq> fb\\<^sub>\\<F> F (fb\\<^sub>\\<F> G Q)", "by (rule order.trans[OF assms(1)]) (rule ffb_iso[OF assms(2)])\n\n\\<comment> \\<open> Conditional statement \\<close>"], ["", "definition ifthenelse :: \"'a pred \\<Rightarrow> ('a \\<Rightarrow> 'b set) \\<Rightarrow> ('a \\<Rightarrow> 'b set) \\<Rightarrow> ('a \\<Rightarrow> 'b set)\"\n  (\"IF _ THEN _ ELSE _\" [64,64,64] 63) where \n  \"IF P THEN X ELSE Y = (\\<lambda> x. if P x then X x else Y x)\""], ["", "lemma ffb_if_then_else[simp]:\n  \"fb\\<^sub>\\<F> (IF T THEN X ELSE Y) Q = {s. T s \\<longrightarrow> s \\<in> fb\\<^sub>\\<F> X Q} \\<inter> {s. \\<not> T s \\<longrightarrow> s \\<in> fb\\<^sub>\\<F> Y Q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F> (IF T THEN X ELSE Y) Q =\n    {s. T s \\<longrightarrow> s2p (fb\\<^sub>\\<F> X Q) s} \\<inter>\n    {s. \\<not> T s \\<longrightarrow> s2p (fb\\<^sub>\\<F> Y Q) s}", "unfolding ffb_eq ifthenelse_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {s. \\<forall>s'.\n           s2p (if T s then X s else Y s) s' \\<longrightarrow> s2p Q s'} =\n    {s. T s \\<longrightarrow>\n        s2p {s. \\<forall>s'. s2p (X s) s' \\<longrightarrow> s2p Q s'}\n         s} \\<inter>\n    {s. \\<not> T s \\<longrightarrow>\n        s2p {s. \\<forall>s'. s2p (Y s) s' \\<longrightarrow> s2p Q s'} s}", "by auto"], ["", "lemma hoare_if_then_else:\n  assumes \"P \\<inter> {s. T s} \\<le> fb\\<^sub>\\<F> X Q\"\n    and \"P \\<inter> {s. \\<not> T s} \\<le> fb\\<^sub>\\<F> Y Q\"\n  shows \"P \\<le> fb\\<^sub>\\<F> (IF T THEN X ELSE Y) Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<subseteq> fb\\<^sub>\\<F> (IF T THEN X ELSE Y) Q", "using assms"], ["proof (prove)\nusing this:\n  P \\<inter> {s. T s} \\<subseteq> fb\\<^sub>\\<F> X Q\n  P \\<inter> {s. \\<not> T s} \\<subseteq> fb\\<^sub>\\<F> Y Q\n\ngoal (1 subgoal):\n 1. P \\<subseteq> fb\\<^sub>\\<F> (IF T THEN X ELSE Y) Q", "apply(subst ffb_eq)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P \\<inter> {s. T s} \\<subseteq> fb\\<^sub>\\<F> X Q;\n     P \\<inter> {s. \\<not> T s} \\<subseteq> fb\\<^sub>\\<F> Y Q\\<rbrakk>\n    \\<Longrightarrow> P \\<subseteq> {s. \\<forall>s'.\n     s2p ((IF T THEN X ELSE Y) s) s' \\<longrightarrow> s2p Q s'}", "apply(subst (asm) ffb_eq)+"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P \\<inter> Collect T\n             \\<subseteq> {s. \\<forall>s'.\n                                s2p (X s) s' \\<longrightarrow> s2p Q s'};\n     P \\<inter> {s. \\<not> T s}\n     \\<subseteq> {s. \\<forall>s'.\n                        s2p (Y s) s' \\<longrightarrow> s2p Q s'}\\<rbrakk>\n    \\<Longrightarrow> P \\<subseteq> {s. \\<forall>s'.\n     s2p ((IF T THEN X ELSE Y) s) s' \\<longrightarrow> s2p Q s'}", "unfolding ifthenelse_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P \\<inter> Collect T\n             \\<subseteq> {s. \\<forall>s'.\n                                s2p (X s) s' \\<longrightarrow> s2p Q s'};\n     P \\<inter> {s. \\<not> T s}\n     \\<subseteq> {s. \\<forall>s'.\n                        s2p (Y s) s' \\<longrightarrow> s2p Q s'}\\<rbrakk>\n    \\<Longrightarrow> P \\<subseteq> {s. \\<forall>s'.\n     s2p (if T s then X s else Y s) s' \\<longrightarrow> s2p Q s'}", "by auto\n\n\\<comment> \\<open> Finite iteration \\<close>"], ["", "lemma kpower_inv: \"I \\<le> {s. \\<forall>y. y \\<in> F s \\<longrightarrow> y \\<in> I} \\<Longrightarrow> I \\<le> {s. \\<forall>y. y \\<in> (kpower F n s) \\<longrightarrow> y \\<in> I}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. I \\<subseteq> {s. \\<forall>y.\n                         s2p (F s) y \\<longrightarrow>\n                         s2p I y} \\<Longrightarrow>\n    I \\<subseteq> {s. \\<forall>y.\n                         s2p (kpower F n s) y \\<longrightarrow> s2p I y}", "apply(induct n, simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<lbrakk>I \\<subseteq> {s. \\<forall>y.\n                                     s2p (F s) y \\<longrightarrow>\n                                     s2p I y} \\<Longrightarrow>\n                I \\<subseteq> {s. \\<forall>y.\n                                     s2p (kpower F n s) y \\<longrightarrow>\n                                     s2p I y};\n        I \\<subseteq> {s. \\<forall>y.\n                             s2p (F s) y \\<longrightarrow> s2p I y}\\<rbrakk>\n       \\<Longrightarrow> I \\<subseteq> {s.\n  \\<forall>y. s2p (kpower F (Suc n) s) y \\<longrightarrow> s2p I y}", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<lbrakk>I \\<subseteq> {s. \\<forall>y.\n                                     s2p (kpower F n s) y \\<longrightarrow>\n                                     s2p I y};\n        I \\<subseteq> {s. \\<forall>y.\n                             s2p (F s) y \\<longrightarrow> s2p I y}\\<rbrakk>\n       \\<Longrightarrow> I \\<subseteq> {s.\n  \\<forall>y. s2p ((F ; kpower F n) s) y \\<longrightarrow> s2p I y}", "by(auto simp: kcomp_prop)"], ["", "lemma kstar_inv: \"I \\<le> fb\\<^sub>\\<F> F I \\<Longrightarrow> I \\<subseteq> fb\\<^sub>\\<F> (kstar F) I\""], ["proof (prove)\ngoal (1 subgoal):\n 1. I \\<subseteq> fb\\<^sub>\\<F> F I \\<Longrightarrow>\n    I \\<subseteq> fb\\<^sub>\\<F> (kstar F) I", "unfolding kstar_def ffb_eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. I \\<subseteq> {s. \\<forall>s'.\n                         s2p (F s) s' \\<longrightarrow>\n                         s2p I s'} \\<Longrightarrow>\n    I \\<subseteq> {s. \\<forall>s'.\n                         s2p ((\\<Squnion> range (kpower F)) s)\n                          s' \\<longrightarrow>\n                         s2p I s'}", "apply clarsimp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x s' xa.\n       \\<lbrakk>I \\<subseteq> {s. \\<forall>s'.\n                                     s2p (F s) s' \\<longrightarrow>\n                                     s2p I s'};\n        s2p I x; s2p (kpower F xa x) s'\\<rbrakk>\n       \\<Longrightarrow> s2p I s'", "using kpower_inv"], ["proof (prove)\nusing this:\n  ?I \\<subseteq> {s. \\<forall>y.\n                        s2p (?F s) y \\<longrightarrow>\n                        s2p ?I y} \\<Longrightarrow>\n  ?I \\<subseteq> {s. \\<forall>y.\n                        s2p (kpower ?F ?n s) y \\<longrightarrow> s2p ?I y}\n\ngoal (1 subgoal):\n 1. \\<And>x s' xa.\n       \\<lbrakk>I \\<subseteq> {s. \\<forall>s'.\n                                     s2p (F s) s' \\<longrightarrow>\n                                     s2p I s'};\n        s2p I x; s2p (kpower F xa x) s'\\<rbrakk>\n       \\<Longrightarrow> s2p I s'", "by blast"], ["", "lemma ffb_kstarI:\n  assumes \"P \\<le> I\" and \"I \\<le> Q\" and \"I \\<le> fb\\<^sub>\\<F> F I\"\n  shows \"P \\<le> fb\\<^sub>\\<F> (kstar F) Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<subseteq> fb\\<^sub>\\<F> (kstar F) Q", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. P \\<subseteq> fb\\<^sub>\\<F> (kstar F) Q", "have \"I \\<subseteq> fb\\<^sub>\\<F> (kstar F) I\""], ["proof (prove)\ngoal (1 subgoal):\n 1. I \\<subseteq> fb\\<^sub>\\<F> (kstar F) I", "using assms(3) kstar_inv"], ["proof (prove)\nusing this:\n  I \\<subseteq> fb\\<^sub>\\<F> F I\n  ?I \\<subseteq> fb\\<^sub>\\<F> ?F ?I \\<Longrightarrow>\n  ?I \\<subseteq> fb\\<^sub>\\<F> (kstar ?F) ?I\n\ngoal (1 subgoal):\n 1. I \\<subseteq> fb\\<^sub>\\<F> (kstar F) I", "by blast"], ["proof (state)\nthis:\n  I \\<subseteq> fb\\<^sub>\\<F> (kstar F) I\n\ngoal (1 subgoal):\n 1. P \\<subseteq> fb\\<^sub>\\<F> (kstar F) Q", "hence \"P \\<le> fb\\<^sub>\\<F> (kstar F) I\""], ["proof (prove)\nusing this:\n  I \\<subseteq> fb\\<^sub>\\<F> (kstar F) I\n\ngoal (1 subgoal):\n 1. P \\<subseteq> fb\\<^sub>\\<F> (kstar F) I", "using assms(1)"], ["proof (prove)\nusing this:\n  I \\<subseteq> fb\\<^sub>\\<F> (kstar F) I\n  P \\<subseteq> I\n\ngoal (1 subgoal):\n 1. P \\<subseteq> fb\\<^sub>\\<F> (kstar F) I", "by auto"], ["proof (state)\nthis:\n  P \\<subseteq> fb\\<^sub>\\<F> (kstar F) I\n\ngoal (1 subgoal):\n 1. P \\<subseteq> fb\\<^sub>\\<F> (kstar F) Q", "also"], ["proof (state)\nthis:\n  P \\<subseteq> fb\\<^sub>\\<F> (kstar F) I\n\ngoal (1 subgoal):\n 1. P \\<subseteq> fb\\<^sub>\\<F> (kstar F) Q", "have \"fb\\<^sub>\\<F> (kstar F) I \\<le> fb\\<^sub>\\<F> (kstar F) Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F> (kstar F) I \\<subseteq> fb\\<^sub>\\<F> (kstar F) Q", "by (rule ffb_iso[OF assms(2)])"], ["proof (state)\nthis:\n  fb\\<^sub>\\<F> (kstar F) I \\<subseteq> fb\\<^sub>\\<F> (kstar F) Q\n\ngoal (1 subgoal):\n 1. P \\<subseteq> fb\\<^sub>\\<F> (kstar F) Q", "finally"], ["proof (chain)\npicking this:\n  P \\<subseteq> fb\\<^sub>\\<F> (kstar F) Q", "show ?thesis"], ["proof (prove)\nusing this:\n  P \\<subseteq> fb\\<^sub>\\<F> (kstar F) Q\n\ngoal (1 subgoal):\n 1. P \\<subseteq> fb\\<^sub>\\<F> (kstar F) Q", "."], ["proof (state)\nthis:\n  P \\<subseteq> fb\\<^sub>\\<F> (kstar F) Q\n\ngoal:\nNo subgoals!", "qed"], ["", "definition loopi :: \"('a \\<Rightarrow> 'a set) \\<Rightarrow> 'a pred \\<Rightarrow> ('a \\<Rightarrow> 'a set)\" (\"LOOP _ INV _ \" [64,64] 63)\n  where \"LOOP F INV I \\<equiv> (kstar F)\""], ["", "lemma change_loopI: \"LOOP X INV G = LOOP X INV I\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LOOP X INV G  = LOOP X INV I", "unfolding loopi_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. kstar X = kstar X", "by simp"], ["", "lemma ffb_loopI: \"P \\<le> {s. I s}  \\<Longrightarrow> {s. I s} \\<le> Q \\<Longrightarrow> {s. I s} \\<le> fb\\<^sub>\\<F> F {s. I s} \\<Longrightarrow> P \\<le> fb\\<^sub>\\<F> (LOOP F INV I) Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P \\<subseteq> {s. I s}; {s. I s} \\<subseteq> Q;\n     {s. I s} \\<subseteq> fb\\<^sub>\\<F> F {s. I s}\\<rbrakk>\n    \\<Longrightarrow> P \\<subseteq> fb\\<^sub>\\<F> (LOOP F INV I ) Q", "unfolding loopi_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P \\<subseteq> {s. I s}; {s. I s} \\<subseteq> Q;\n     {s. I s} \\<subseteq> fb\\<^sub>\\<F> F {s. I s}\\<rbrakk>\n    \\<Longrightarrow> P \\<subseteq> fb\\<^sub>\\<F> (kstar F) Q", "using ffb_kstarI[of \"P\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>P \\<subseteq> ?I; ?I \\<subseteq> ?Q;\n   ?I \\<subseteq> fb\\<^sub>\\<F> ?F ?I\\<rbrakk>\n  \\<Longrightarrow> P \\<subseteq> fb\\<^sub>\\<F> (kstar ?F) ?Q\n\ngoal (1 subgoal):\n 1. \\<lbrakk>P \\<subseteq> {s. I s}; {s. I s} \\<subseteq> Q;\n     {s. I s} \\<subseteq> fb\\<^sub>\\<F> F {s. I s}\\<rbrakk>\n    \\<Longrightarrow> P \\<subseteq> fb\\<^sub>\\<F> (kstar F) Q", "by simp"], ["", "lemma ffb_loopI_break: \n  \"P \\<le> fb\\<^sub>\\<F> Y {s. I s} \\<Longrightarrow> {s. I s} \\<le> fb\\<^sub>\\<F> X {s. I s} \\<Longrightarrow> {s. I s} \\<le> Q \\<Longrightarrow> P \\<le> fb\\<^sub>\\<F> (Y ; (LOOP X INV I)) Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P \\<subseteq> fb\\<^sub>\\<F> Y {s. I s};\n     {s. I s} \\<subseteq> fb\\<^sub>\\<F> X {s. I s};\n     {s. I s} \\<subseteq> Q\\<rbrakk>\n    \\<Longrightarrow> P \\<subseteq> fb\\<^sub>\\<F> (Y ; (LOOP X INV I )) Q", "by (rule hoare_kcomp, force) (rule ffb_loopI, auto)"], ["", "subsection \\<open>Verification of hybrid programs\\<close>"], ["", "text \\<open>Verification by providing evolution\\<close>"], ["", "definition g_evol :: \"(('a::ord) \\<Rightarrow> 'b \\<Rightarrow> 'b) \\<Rightarrow> 'b pred \\<Rightarrow> ('b \\<Rightarrow> 'a set) \\<Rightarrow> ('b \\<Rightarrow> 'b set)\" (\"EVOL\")\n  where \"EVOL \\<phi> G U = (\\<lambda>s. g_orbit (\\<lambda>t. \\<phi> t s) G (U s))\""], ["", "lemma fbox_g_evol[simp]: \n  fixes \\<phi> :: \"('a::preorder) \\<Rightarrow> 'b \\<Rightarrow> 'b\"\n  shows \"fb\\<^sub>\\<F> (EVOL \\<phi> G U) Q = {s. (\\<forall>t\\<in>U s. (\\<forall>\\<tau>\\<in>down (U s) t. G (\\<phi> \\<tau> s)) \\<longrightarrow> (\\<phi> t s) \\<in> Q)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F> (EVOL \\<phi> G U) Q =\n    {s. \\<forall>t\\<in>U s.\n           (\\<forall>\\<tau>\\<in>down (U s) t.\n               G (\\<phi> \\<tau> s)) \\<longrightarrow>\n           s2p Q (\\<phi> t s)}", "unfolding g_evol_def g_orbit_eq ffb_eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. {s. \\<forall>s'.\n           s2p {\\<phi> t s |t.\n                s2p (U s) t \\<and>\n                (\\<forall>\\<tau>\\<in>down (U s) t. G (\\<phi> \\<tau> s))}\n            s' \\<longrightarrow>\n           s2p Q s'} =\n    {s. \\<forall>t\\<in>U s.\n           (\\<forall>\\<tau>\\<in>down (U s) t.\n               G (\\<phi> \\<tau> s)) \\<longrightarrow>\n           s2p Q (\\<phi> t s)}", "by auto"], ["", "text \\<open>Verification by providing solutions\\<close>"], ["", "lemma ffb_g_orbital: \"fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) Q = \n  {s. \\<forall>X\\<in>Sols f U S t\\<^sub>0 s. \\<forall>t\\<in>U s. (\\<forall>\\<tau>\\<in>down (U s) t. G (X \\<tau>)) \\<longrightarrow> (X t) \\<in> Q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 Q =\n    {s. \\<forall>X\\<in>Sols f U S t\\<^sub>0 s.\n           \\<forall>t\\<in>U s.\n              (\\<forall>\\<tau>\\<in>down (U s) t.\n                  G (X \\<tau>)) \\<longrightarrow>\n              s2p Q (X t)}", "unfolding ffb_eq g_orbital_eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. {s. \\<forall>s'.\n           s2p {X t |t X.\n                s2p (U s) t \\<and>\n                \\<P> X (down (U s) t) \\<subseteq> Collect G \\<and>\n                s2p (Sols f U S t\\<^sub>0 s) X}\n            s' \\<longrightarrow>\n           s2p Q s'} =\n    {s. \\<forall>X\\<in>Sols f U S t\\<^sub>0 s.\n           \\<forall>t\\<in>U s.\n              (\\<forall>\\<tau>\\<in>down (U s) t.\n                  G (X \\<tau>)) \\<longrightarrow>\n              s2p Q (X t)}", "by (auto simp: fun_eq_iff)"], ["", "context local_flow\nbegin"], ["", "lemma ffb_g_ode_subset:\n  assumes \"\\<And>s. s \\<in> S \\<Longrightarrow> 0 \\<in> U s \\<and> is_interval (U s) \\<and> U s \\<subseteq> T\"\n  shows \"fb\\<^sub>\\<F> (x\\<acute>= (\\<lambda>t. f) & G on U S @ 0) Q = \n  {s. s \\<in> S \\<longrightarrow> (\\<forall>t\\<in>(U s). (\\<forall>\\<tau>\\<in>down (U s) t. G (\\<phi> \\<tau> s)) \\<longrightarrow> (\\<phi> t s) \\<in> Q)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F> x\\<acute>=\\<lambda>t. f & G on U S @ 0 Q =\n    {s. s2p S s \\<longrightarrow>\n        (\\<forall>t\\<in>U s.\n            (\\<forall>\\<tau>\\<in>down (U s) t.\n                G (\\<phi> \\<tau> s)) \\<longrightarrow>\n            s2p Q (\\<phi> t s))}", "apply(unfold ffb_g_orbital set_eq_iff)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x.\n       s2p {s. \\<forall>X\\<in>Sols (\\<lambda>t. f) U S 0 s.\n                  \\<forall>t\\<in>U s.\n                     (\\<forall>\\<tau>\\<in>down (U s) t.\n                         G (X \\<tau>)) \\<longrightarrow>\n                     s2p Q (X t)}\n        x =\n       s2p {s. s2p S s \\<longrightarrow>\n               (\\<forall>t\\<in>U s.\n                   (\\<forall>\\<tau>\\<in>down (U s) t.\n                       G (\\<phi> \\<tau> s)) \\<longrightarrow>\n                   s2p Q (\\<phi> t s))}\n        x", "apply(clarify, rule iffI; clarify)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x t.\n       \\<lbrakk>\\<forall>X\\<in>Sols (\\<lambda>t. f) U S 0 x.\n                   \\<forall>t\\<in>U x.\n                      (\\<forall>\\<tau>\\<in>down (U x) t.\n                          G (X \\<tau>)) \\<longrightarrow>\n                      s2p Q (X t);\n        s2p S x; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (\\<phi> \\<tau> x)\\<rbrakk>\n       \\<Longrightarrow> s2p Q (\\<phi> t x)\n 2. \\<And>x X t.\n       \\<lbrakk>s2p S x \\<longrightarrow>\n                (\\<forall>t\\<in>U x.\n                    (\\<forall>\\<tau>\\<in>down (U x) t.\n                        G (\\<phi> \\<tau> x)) \\<longrightarrow>\n                    s2p Q (\\<phi> t x));\n        s2p (Sols (\\<lambda>t. f) U S 0 x) X; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (X \\<tau>)\\<rbrakk>\n       \\<Longrightarrow> s2p Q (X t)", "apply(force simp: in_ivp_sols assms)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x X t.\n       \\<lbrakk>s2p S x \\<longrightarrow>\n                (\\<forall>t\\<in>U x.\n                    (\\<forall>\\<tau>\\<in>down (U x) t.\n                        G (\\<phi> \\<tau> x)) \\<longrightarrow>\n                    s2p Q (\\<phi> t x));\n        s2p (Sols (\\<lambda>t. f) U S 0 x) X; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (X \\<tau>)\\<rbrakk>\n       \\<Longrightarrow> s2p Q (X t)", "apply(frule ivp_solsD(2), frule ivp_solsD(3), frule ivp_solsD(4))"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x X t.\n       \\<lbrakk>s2p S x \\<longrightarrow>\n                (\\<forall>t\\<in>U x.\n                    (\\<forall>\\<tau>\\<in>down (U x) t.\n                        G (\\<phi> \\<tau> x)) \\<longrightarrow>\n                    s2p Q (\\<phi> t x));\n        s2p (Sols (\\<lambda>t. f) U S 0 x) X; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (X \\<tau>); X 0 = x;\n        s2p (U x \\<rightarrow> S) X; s2p (U x) 0\\<rbrakk>\n       \\<Longrightarrow> s2p Q (X t)", "apply(subgoal_tac \"\\<forall>\\<tau>\\<in>down (U x) t. X \\<tau> = \\<phi> \\<tau> x\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x X t.\n       \\<lbrakk>s2p S x \\<longrightarrow>\n                (\\<forall>t\\<in>U x.\n                    (\\<forall>\\<tau>\\<in>down (U x) t.\n                        G (\\<phi> \\<tau> x)) \\<longrightarrow>\n                    s2p Q (\\<phi> t x));\n        s2p (Sols (\\<lambda>t. f) U S 0 x) X; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (X \\<tau>); X 0 = x;\n        s2p (U x \\<rightarrow> S) X; s2p (U x) 0;\n        \\<forall>\\<tau>\\<in>down (U x) t.\n           X \\<tau> = \\<phi> \\<tau> x\\<rbrakk>\n       \\<Longrightarrow> s2p Q (X t)\n 2. \\<And>x X t.\n       \\<lbrakk>s2p S x \\<longrightarrow>\n                (\\<forall>t\\<in>U x.\n                    (\\<forall>\\<tau>\\<in>down (U x) t.\n                        G (\\<phi> \\<tau> x)) \\<longrightarrow>\n                    s2p Q (\\<phi> t x));\n        s2p (Sols (\\<lambda>t. f) U S 0 x) X; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (X \\<tau>); X 0 = x;\n        s2p (U x \\<rightarrow> S) X; s2p (U x) 0\\<rbrakk>\n       \\<Longrightarrow> \\<forall>\\<tau>\\<in>down (U x) t.\n                            X \\<tau> = \\<phi> \\<tau> x", "apply(clarsimp, fastforce, rule ballI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x X t \\<tau>.\n       \\<lbrakk>s2p S x \\<longrightarrow>\n                (\\<forall>t\\<in>U x.\n                    (\\<forall>\\<tau>\\<in>down (U x) t.\n                        G (\\<phi> \\<tau> x)) \\<longrightarrow>\n                    s2p Q (\\<phi> t x));\n        s2p (Sols (\\<lambda>t. f) U S 0 x) X; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (X \\<tau>); X 0 = x;\n        s2p (U x \\<rightarrow> S) X; s2p (U x) 0;\n        s2p (down (U x) t) \\<tau>\\<rbrakk>\n       \\<Longrightarrow> X \\<tau> = \\<phi> \\<tau> x", "apply(rule ivp_unique_solution[OF _ _ _ _ _ in_ivp_sols])"], ["proof (prove)\ngoal (8 subgoals):\n 1. \\<And>x X t \\<tau>.\n       \\<lbrakk>s2p S x \\<longrightarrow>\n                (\\<forall>t\\<in>U x.\n                    (\\<forall>\\<tau>\\<in>down (U x) t.\n                        G (\\<phi> \\<tau> x)) \\<longrightarrow>\n                    s2p Q (\\<phi> t x));\n        s2p (Sols (\\<lambda>t. f) U S 0 x) X; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (X \\<tau>); X 0 = x;\n        s2p (U x \\<rightarrow> S) X; s2p (U x) 0;\n        s2p (down (U x) t) \\<tau>\\<rbrakk>\n       \\<Longrightarrow> s2p S x\n 2. \\<And>x X t \\<tau>.\n       \\<lbrakk>s2p S x \\<longrightarrow>\n                (\\<forall>t\\<in>U x.\n                    (\\<forall>\\<tau>\\<in>down (U x) t.\n                        G (\\<phi> \\<tau> x)) \\<longrightarrow>\n                    s2p Q (\\<phi> t x));\n        s2p (Sols (\\<lambda>t. f) U S 0 x) X; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (X \\<tau>); X 0 = x;\n        s2p (U x \\<rightarrow> S) X; s2p (U x) 0;\n        s2p (down (U x) t) \\<tau>\\<rbrakk>\n       \\<Longrightarrow> is_interval (?U63 x X t \\<tau> x)\n 3. \\<And>x X t \\<tau>.\n       \\<lbrakk>s2p S x \\<longrightarrow>\n                (\\<forall>t\\<in>U x.\n                    (\\<forall>\\<tau>\\<in>down (U x) t.\n                        G (\\<phi> \\<tau> x)) \\<longrightarrow>\n                    s2p Q (\\<phi> t x));\n        s2p (Sols (\\<lambda>t. f) U S 0 x) X; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (X \\<tau>); X 0 = x;\n        s2p (U x \\<rightarrow> S) X; s2p (U x) 0;\n        s2p (down (U x) t) \\<tau>\\<rbrakk>\n       \\<Longrightarrow> ?U63 x X t \\<tau> x \\<subseteq> T\n 4. \\<And>x X t \\<tau>.\n       \\<lbrakk>s2p S x \\<longrightarrow>\n                (\\<forall>t\\<in>U x.\n                    (\\<forall>\\<tau>\\<in>down (U x) t.\n                        G (\\<phi> \\<tau> x)) \\<longrightarrow>\n                    s2p Q (\\<phi> t x));\n        s2p (Sols (\\<lambda>t. f) U S 0 x) X; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (X \\<tau>); X 0 = x;\n        s2p (U x \\<rightarrow> S) X; s2p (U x) 0;\n        s2p (down (U x) t) \\<tau>\\<rbrakk>\n       \\<Longrightarrow> s2p (?U63 x X t \\<tau> x) \\<tau>\n 5. \\<And>x X t \\<tau>.\n       \\<lbrakk>s2p S x \\<longrightarrow>\n                (\\<forall>t\\<in>U x.\n                    (\\<forall>\\<tau>\\<in>down (U x) t.\n                        G (\\<phi> \\<tau> x)) \\<longrightarrow>\n                    s2p Q (\\<phi> t x));\n        s2p (Sols (\\<lambda>t. f) U S 0 x) X; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (X \\<tau>); X 0 = x;\n        s2p (U x \\<rightarrow> S) X; s2p (U x) 0;\n        s2p (down (U x) t) \\<tau>\\<rbrakk>\n       \\<Longrightarrow> s2p (Sols (\\<lambda>t. f) (?U63 x X t \\<tau>) S 0\n                               x)\n                          X\n 6. \\<And>x X t \\<tau>.\n       \\<lbrakk>s2p S x \\<longrightarrow>\n                (\\<forall>t\\<in>U x.\n                    (\\<forall>\\<tau>\\<in>down (U x) t.\n                        G (\\<phi> \\<tau> x)) \\<longrightarrow>\n                    s2p Q (\\<phi> t x));\n        s2p (Sols (\\<lambda>t. f) U S 0 x) X; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (X \\<tau>); X 0 = x;\n        s2p (U x \\<rightarrow> S) X; s2p (U x) 0;\n        s2p (down (U x) t) \\<tau>\\<rbrakk>\n       \\<Longrightarrow> s2p S x\n 7. \\<And>x X t \\<tau>.\n       \\<lbrakk>s2p S x \\<longrightarrow>\n                (\\<forall>t\\<in>U x.\n                    (\\<forall>\\<tau>\\<in>down (U x) t.\n                        G (\\<phi> \\<tau> x)) \\<longrightarrow>\n                    s2p Q (\\<phi> t x));\n        s2p (Sols (\\<lambda>t. f) U S 0 x) X; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (X \\<tau>); X 0 = x;\n        s2p (U x \\<rightarrow> S) X; s2p (U x) 0;\n        s2p (down (U x) t) \\<tau>\\<rbrakk>\n       \\<Longrightarrow> s2p (?U63 x X t \\<tau> x) 0\n 8. \\<And>x X t \\<tau>.\n       \\<lbrakk>s2p S x \\<longrightarrow>\n                (\\<forall>t\\<in>U x.\n                    (\\<forall>\\<tau>\\<in>down (U x) t.\n                        G (\\<phi> \\<tau> x)) \\<longrightarrow>\n                    s2p Q (\\<phi> t x));\n        s2p (Sols (\\<lambda>t. f) U S 0 x) X; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (X \\<tau>); X 0 = x;\n        s2p (U x \\<rightarrow> S) X; s2p (U x) 0;\n        s2p (down (U x) t) \\<tau>\\<rbrakk>\n       \\<Longrightarrow> ?U63 x X t \\<tau> x \\<subseteq> T", "using assms"], ["proof (prove)\nusing this:\n  s2p S ?s \\<Longrightarrow>\n  s2p (U ?s) 0 \\<and> is_interval (U ?s) \\<and> U ?s \\<subseteq> T\n\ngoal (8 subgoals):\n 1. \\<And>x X t \\<tau>.\n       \\<lbrakk>s2p S x \\<longrightarrow>\n                (\\<forall>t\\<in>U x.\n                    (\\<forall>\\<tau>\\<in>down (U x) t.\n                        G (\\<phi> \\<tau> x)) \\<longrightarrow>\n                    s2p Q (\\<phi> t x));\n        s2p (Sols (\\<lambda>t. f) U S 0 x) X; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (X \\<tau>); X 0 = x;\n        s2p (U x \\<rightarrow> S) X; s2p (U x) 0;\n        s2p (down (U x) t) \\<tau>\\<rbrakk>\n       \\<Longrightarrow> s2p S x\n 2. \\<And>x X t \\<tau>.\n       \\<lbrakk>s2p S x \\<longrightarrow>\n                (\\<forall>t\\<in>U x.\n                    (\\<forall>\\<tau>\\<in>down (U x) t.\n                        G (\\<phi> \\<tau> x)) \\<longrightarrow>\n                    s2p Q (\\<phi> t x));\n        s2p (Sols (\\<lambda>t. f) U S 0 x) X; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (X \\<tau>); X 0 = x;\n        s2p (U x \\<rightarrow> S) X; s2p (U x) 0;\n        s2p (down (U x) t) \\<tau>\\<rbrakk>\n       \\<Longrightarrow> is_interval (?U63 x X t \\<tau> x)\n 3. \\<And>x X t \\<tau>.\n       \\<lbrakk>s2p S x \\<longrightarrow>\n                (\\<forall>t\\<in>U x.\n                    (\\<forall>\\<tau>\\<in>down (U x) t.\n                        G (\\<phi> \\<tau> x)) \\<longrightarrow>\n                    s2p Q (\\<phi> t x));\n        s2p (Sols (\\<lambda>t. f) U S 0 x) X; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (X \\<tau>); X 0 = x;\n        s2p (U x \\<rightarrow> S) X; s2p (U x) 0;\n        s2p (down (U x) t) \\<tau>\\<rbrakk>\n       \\<Longrightarrow> ?U63 x X t \\<tau> x \\<subseteq> T\n 4. \\<And>x X t \\<tau>.\n       \\<lbrakk>s2p S x \\<longrightarrow>\n                (\\<forall>t\\<in>U x.\n                    (\\<forall>\\<tau>\\<in>down (U x) t.\n                        G (\\<phi> \\<tau> x)) \\<longrightarrow>\n                    s2p Q (\\<phi> t x));\n        s2p (Sols (\\<lambda>t. f) U S 0 x) X; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (X \\<tau>); X 0 = x;\n        s2p (U x \\<rightarrow> S) X; s2p (U x) 0;\n        s2p (down (U x) t) \\<tau>\\<rbrakk>\n       \\<Longrightarrow> s2p (?U63 x X t \\<tau> x) \\<tau>\n 5. \\<And>x X t \\<tau>.\n       \\<lbrakk>s2p S x \\<longrightarrow>\n                (\\<forall>t\\<in>U x.\n                    (\\<forall>\\<tau>\\<in>down (U x) t.\n                        G (\\<phi> \\<tau> x)) \\<longrightarrow>\n                    s2p Q (\\<phi> t x));\n        s2p (Sols (\\<lambda>t. f) U S 0 x) X; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (X \\<tau>); X 0 = x;\n        s2p (U x \\<rightarrow> S) X; s2p (U x) 0;\n        s2p (down (U x) t) \\<tau>\\<rbrakk>\n       \\<Longrightarrow> s2p (Sols (\\<lambda>t. f) (?U63 x X t \\<tau>) S 0\n                               x)\n                          X\n 6. \\<And>x X t \\<tau>.\n       \\<lbrakk>s2p S x \\<longrightarrow>\n                (\\<forall>t\\<in>U x.\n                    (\\<forall>\\<tau>\\<in>down (U x) t.\n                        G (\\<phi> \\<tau> x)) \\<longrightarrow>\n                    s2p Q (\\<phi> t x));\n        s2p (Sols (\\<lambda>t. f) U S 0 x) X; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (X \\<tau>); X 0 = x;\n        s2p (U x \\<rightarrow> S) X; s2p (U x) 0;\n        s2p (down (U x) t) \\<tau>\\<rbrakk>\n       \\<Longrightarrow> s2p S x\n 7. \\<And>x X t \\<tau>.\n       \\<lbrakk>s2p S x \\<longrightarrow>\n                (\\<forall>t\\<in>U x.\n                    (\\<forall>\\<tau>\\<in>down (U x) t.\n                        G (\\<phi> \\<tau> x)) \\<longrightarrow>\n                    s2p Q (\\<phi> t x));\n        s2p (Sols (\\<lambda>t. f) U S 0 x) X; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (X \\<tau>); X 0 = x;\n        s2p (U x \\<rightarrow> S) X; s2p (U x) 0;\n        s2p (down (U x) t) \\<tau>\\<rbrakk>\n       \\<Longrightarrow> s2p (?U63 x X t \\<tau> x) 0\n 8. \\<And>x X t \\<tau>.\n       \\<lbrakk>s2p S x \\<longrightarrow>\n                (\\<forall>t\\<in>U x.\n                    (\\<forall>\\<tau>\\<in>down (U x) t.\n                        G (\\<phi> \\<tau> x)) \\<longrightarrow>\n                    s2p Q (\\<phi> t x));\n        s2p (Sols (\\<lambda>t. f) U S 0 x) X; s2p (U x) t;\n        \\<forall>\\<tau>\\<in>down (U x) t. G (X \\<tau>); X 0 = x;\n        s2p (U x \\<rightarrow> S) X; s2p (U x) 0;\n        s2p (down (U x) t) \\<tau>\\<rbrakk>\n       \\<Longrightarrow> ?U63 x X t \\<tau> x \\<subseteq> T", "by auto"], ["", "lemma ffb_g_ode: \"fb\\<^sub>\\<F> (x\\<acute>= (\\<lambda>t. f) & G on (\\<lambda>s. T) S @ 0) Q = \n  {s. s \\<in> S \\<longrightarrow> (\\<forall>t\\<in>T. (\\<forall>\\<tau>\\<in>down T t. G (\\<phi> \\<tau> s)) \\<longrightarrow> (\\<phi> t s) \\<in> Q)}\" (is \"_ = ?wlp\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F> x\\<acute>=\\<lambda>t. f & G on \\<lambda>s. T S @ 0 Q =\n    {s. s2p S s \\<longrightarrow>\n        (\\<forall>t\\<in>T.\n            (\\<forall>\\<tau>\\<in>down T t.\n                G (\\<phi> \\<tau> s)) \\<longrightarrow>\n            s2p Q (\\<phi> t s))}", "by (subst ffb_g_ode_subset, simp_all add: init_time interval_time)"], ["", "lemma ffb_g_ode_ivl: \"t \\<ge> 0 \\<Longrightarrow> t \\<in> T \\<Longrightarrow> fb\\<^sub>\\<F> (x\\<acute>=(\\<lambda>t. f) & G on (\\<lambda>s. {0..t}) S @ 0) Q = \n  {s. s \\<in> S \\<longrightarrow> (\\<forall>t\\<in>{0..t}. (\\<forall>\\<tau>\\<in>{0..t}. G (\\<phi> \\<tau> s)) \\<longrightarrow> (\\<phi> t s) \\<in> Q)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>0 \\<le> t; s2p T t\\<rbrakk>\n    \\<Longrightarrow> fb\\<^sub>\\<F>\n                       x\\<acute>=\\<lambda>t.\n                                    f & G on \\<lambda>s. {0..t} S @ 0\n                       Q =\n                      {s. s2p S s \\<longrightarrow>\n                          (\\<forall>t\\<in>{0..t}.\n                              (\\<forall>\\<tau>\\<in>{0..t}.\n                                  G (\\<phi> \\<tau> s)) \\<longrightarrow>\n                              s2p Q (\\<phi> t s))}", "apply(subst ffb_g_ode_subset, simp_all add: subintervalI init_time real_Icc_closed_segment)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>0 \\<le> t; s2p T t\\<rbrakk>\n    \\<Longrightarrow> {s. s2p S s \\<longrightarrow>\n                          (\\<forall>ta\\<in>{0--t}.\n                              (\\<forall>\\<tau>.\n                                  s2p {0--t} \\<tau> \\<and>\n                                  \\<tau> \\<le> ta \\<longrightarrow>\n                                  G (\\<phi> \\<tau> s)) \\<longrightarrow>\n                              s2p Q (\\<phi> ta s))} =\n                      {s. s2p S s \\<longrightarrow>\n                          (\\<forall>t\\<in>{0--t}.\n                              (\\<forall>\\<tau>\\<in>{0..t}.\n                                  G (\\<phi> \\<tau> s)) \\<longrightarrow>\n                              s2p Q (\\<phi> t s))}", "by (auto simp: closed_segment_eq_real_ivl)"], ["", "lemma ffb_orbit: \"fb\\<^sub>\\<F> \\<gamma>\\<^sup>\\<phi> Q = {s. s \\<in> S \\<longrightarrow> (\\<forall> t \\<in> T. \\<phi> t s \\<in> Q)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F> \\<gamma>\\<^sup>\\<phi> Q =\n    {s. s2p S s \\<longrightarrow> (\\<forall>t\\<in>T. s2p Q (\\<phi> t s))}", "unfolding orbit_def ffb_g_ode"], ["proof (prove)\ngoal (1 subgoal):\n 1. {s. s2p S s \\<longrightarrow>\n        (\\<forall>t\\<in>T.\n            (\\<forall>\\<tau>\\<in>down T t. True) \\<longrightarrow>\n            s2p Q (\\<phi> t s))} =\n    {s. s2p S s \\<longrightarrow> (\\<forall>t\\<in>T. s2p Q (\\<phi> t s))}", "by simp"], ["", "end"], ["", "text \\<open> Verification with differential invariants \\<close>"], ["", "definition g_ode_inv :: \"(real \\<Rightarrow> ('a::banach)\\<Rightarrow>'a) \\<Rightarrow> 'a pred \\<Rightarrow> ('a \\<Rightarrow> real set) \\<Rightarrow> 'a set \\<Rightarrow> \n  real \\<Rightarrow> 'a pred \\<Rightarrow> ('a \\<Rightarrow> 'a set)\" (\"(1x\\<acute>=_ & _ on _ _ @ _ DINV _ )\") \n  where \"(x\\<acute>= f & G on U S @ t\\<^sub>0 DINV I) = (x\\<acute>= f & G on U S @ t\\<^sub>0)\""], ["", "lemma ffb_g_orbital_guard: \n  assumes \"H = (\\<lambda>s. G s \\<and> Q s)\"\n  shows \"fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) {s. Q s} = fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) {s. H s}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 {s. Q s} =\n    fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 {s. H s}", "unfolding ffb_g_orbital"], ["proof (prove)\ngoal (1 subgoal):\n 1. {s. \\<forall>X\\<in>Sols f U S t\\<^sub>0 s.\n           \\<forall>t\\<in>U s.\n              (\\<forall>\\<tau>\\<in>down (U s) t.\n                  G (X \\<tau>)) \\<longrightarrow>\n              s2p (Collect Q) (X t)} =\n    {s. \\<forall>X\\<in>Sols f U S t\\<^sub>0 s.\n           \\<forall>t\\<in>U s.\n              (\\<forall>\\<tau>\\<in>down (U s) t.\n                  G (X \\<tau>)) \\<longrightarrow>\n              s2p (Collect H) (X t)}", "using assms"], ["proof (prove)\nusing this:\n  H = (\\<lambda>s. G s \\<and> Q s)\n\ngoal (1 subgoal):\n 1. {s. \\<forall>X\\<in>Sols f U S t\\<^sub>0 s.\n           \\<forall>t\\<in>U s.\n              (\\<forall>\\<tau>\\<in>down (U s) t.\n                  G (X \\<tau>)) \\<longrightarrow>\n              s2p (Collect Q) (X t)} =\n    {s. \\<forall>X\\<in>Sols f U S t\\<^sub>0 s.\n           \\<forall>t\\<in>U s.\n              (\\<forall>\\<tau>\\<in>down (U s) t.\n                  G (X \\<tau>)) \\<longrightarrow>\n              s2p (Collect H) (X t)}", "by auto"], ["", "lemma ffb_g_orbital_inv:\n  assumes \"P \\<le> I\" and \"I \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) I\" and \"I \\<le> Q\"\n  shows \"P \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<subseteq> fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 Q", "using assms(1)"], ["proof (prove)\nusing this:\n  P \\<subseteq> I\n\ngoal (1 subgoal):\n 1. P \\<subseteq> fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 Q", "apply(rule order.trans)"], ["proof (prove)\ngoal (1 subgoal):\n 1. I \\<subseteq> fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 Q", "using assms(2)"], ["proof (prove)\nusing this:\n  I \\<subseteq> fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 I\n\ngoal (1 subgoal):\n 1. I \\<subseteq> fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 Q", "apply(rule order.trans)"], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 I\n    \\<subseteq> fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 Q", "by (rule ffb_iso[OF assms(3)])"], ["", "lemma ffb_diff_inv[simp]: \n  \"({s. I s} \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) {s. I s}) = diff_invariant I f U S t\\<^sub>0 G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ({s. I s}\n     \\<subseteq> fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0\n                  {s. I s}) =\n    diff_invariant I f U S t\\<^sub>0 G", "by (auto simp: diff_invariant_def ivp_sols_def ffb_eq g_orbital_eq)"], ["", "lemma bdf_diff_inv:\n  \"diff_invariant I f U S t\\<^sub>0 G = (bd\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) {s. I s} \\<le> {s. I s})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. diff_invariant I f U S t\\<^sub>0 G =\n    (bd\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 {s. I s}\n     \\<subseteq> {s. I s})", "unfolding ffb_fbd_galois_var"], ["proof (prove)\ngoal (1 subgoal):\n 1. diff_invariant I f U S t\\<^sub>0 G =\n    (Collect I\n     \\<subseteq> fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0\n                  (Collect I))", "by (auto simp: diff_invariant_def ivp_sols_def ffb_eq g_orbital_eq)"], ["", "lemma diff_inv_guard_ignore:\n  assumes \"{s. I s} \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & (\\<lambda>s. True) on U S @ t\\<^sub>0) {s. I s}\"\n  shows \"{s. I s} \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) {s. I s}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {s. I s}\n    \\<subseteq> fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 {s. I s}", "using assms"], ["proof (prove)\nusing this:\n  {s. I s}\n  \\<subseteq> fb\\<^sub>\\<F>\n               x\\<acute>=f & \\<lambda>s. True on U S @ t\\<^sub>0 {s. I s}\n\ngoal (1 subgoal):\n 1. {s. I s}\n    \\<subseteq> fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 {s. I s}", "unfolding ffb_diff_inv diff_invariant_eq image_le_pred"], ["proof (prove)\nusing this:\n  \\<forall>s.\n     I s \\<longrightarrow>\n     (\\<forall>X\\<in>Sols f U S t\\<^sub>0 s.\n         \\<forall>t\\<in>U s.\n            (\\<forall>\\<tau>\\<in>down (U s) t. True) \\<longrightarrow>\n            I (X t))\n\ngoal (1 subgoal):\n 1. \\<forall>s.\n       I s \\<longrightarrow>\n       (\\<forall>X\\<in>Sols f U S t\\<^sub>0 s.\n           \\<forall>t\\<in>U s.\n              (\\<forall>\\<tau>\\<in>down (U s) t.\n                  G (X \\<tau>)) \\<longrightarrow>\n              I (X t))", "by auto"], ["", "context local_flow\nbegin"], ["", "lemma ffb_diff_inv_eq: \n  assumes \"\\<And>s. s \\<in> S \\<Longrightarrow> 0 \\<in> U s \\<and> is_interval (U s) \\<and> U s \\<subseteq> T\"\n  shows \"diff_invariant I (\\<lambda>t. f) U S 0 (\\<lambda>s. True) = \n  ({s. s \\<in> S \\<longrightarrow> I s} = fb\\<^sub>\\<F> (x\\<acute>= (\\<lambda>t. f) & (\\<lambda>s. True) on U S @ 0) {s. s \\<in> S \\<longrightarrow> I s})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. diff_invariant I (\\<lambda>t. f) U S 0 (\\<lambda>s. True) =\n    ({s. s2p S s \\<longrightarrow> I s} =\n     fb\\<^sub>\\<F> x\\<acute>=\\<lambda>t. f & \\<lambda>s. True on U S @ 0\n      {s. s2p S s \\<longrightarrow> I s})", "unfolding ffb_diff_inv[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (Collect I\n     \\<subseteq> fb\\<^sub>\\<F>\n                  x\\<acute>=\\<lambda>t. f & \\<lambda>s. True on U S @ 0\n                  (Collect I)) =\n    ({s. s2p S s \\<longrightarrow> I s} =\n     fb\\<^sub>\\<F> x\\<acute>=\\<lambda>t. f & \\<lambda>s. True on U S @ 0\n      {s. s2p S s \\<longrightarrow> I s})", "apply(subst ffb_g_ode_subset[OF assms], simp)+"], ["proof (prove)\ngoal (1 subgoal):\n 1. (Collect I\n     \\<subseteq> {s. s2p S s \\<longrightarrow>\n                     (\\<forall>t\\<in>U s.\n                         (\\<forall>\\<tau>\\<in>down (U s) t.\n                             True) \\<longrightarrow>\n                         s2p (Collect I) (\\<phi> t s))}) =\n    ({s. s2p S s \\<longrightarrow> I s} =\n     {s. s2p S s \\<longrightarrow>\n         (\\<forall>t\\<in>U s.\n             (\\<forall>\\<tau>\\<in>down (U s) t. True) \\<longrightarrow>\n             s2p {s. s2p S s \\<longrightarrow> I s} (\\<phi> t s))})", "apply(clarsimp simp: set_eq_iff, safe, force)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>Collect I\n                \\<subseteq> {s. s2p S s \\<longrightarrow>\n                                (\\<forall>t\\<in>U s. I (\\<phi> t s))};\n        s2p S x;\n        \\<forall>t\\<in>U x.\n           s2p S (\\<phi> t x) \\<longrightarrow> I (\\<phi> t x)\\<rbrakk>\n       \\<Longrightarrow> I x\n 2. \\<And>x t.\n       \\<lbrakk>\\<forall>x.\n                   (s2p S x \\<longrightarrow> I x) =\n                   (s2p S x \\<longrightarrow>\n                    (\\<forall>t\\<in>U x.\n                        s2p S (\\<phi> t x) \\<longrightarrow>\n                        I (\\<phi> t x)));\n        I x; s2p S x; s2p (U x) t\\<rbrakk>\n       \\<Longrightarrow> I (\\<phi> t x)", "apply(erule_tac x=0 in ballE)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>Collect I\n                \\<subseteq> {s. s2p S s \\<longrightarrow>\n                                (\\<forall>t\\<in>U s. I (\\<phi> t s))};\n        s2p S x;\n        s2p S (\\<phi> 0 x) \\<longrightarrow> I (\\<phi> 0 x)\\<rbrakk>\n       \\<Longrightarrow> I x\n 2. \\<And>x.\n       \\<lbrakk>Collect I\n                \\<subseteq> {s. s2p S s \\<longrightarrow>\n                                (\\<forall>t\\<in>U s. I (\\<phi> t s))};\n        s2p S x; 0 \\<notin> U x\\<rbrakk>\n       \\<Longrightarrow> I x\n 3. \\<And>x t.\n       \\<lbrakk>\\<forall>x.\n                   (s2p S x \\<longrightarrow> I x) =\n                   (s2p S x \\<longrightarrow>\n                    (\\<forall>t\\<in>U x.\n                        s2p S (\\<phi> t x) \\<longrightarrow>\n                        I (\\<phi> t x)));\n        I x; s2p S x; s2p (U x) t\\<rbrakk>\n       \\<Longrightarrow> I (\\<phi> t x)", "using init_time in_domain ivp(2) assms"], ["proof (prove)\nusing this:\n  s2p T 0\n  s2p S ?s \\<Longrightarrow>\n  s2p (T \\<rightarrow> S) (\\<lambda>t. \\<phi> t ?s)\n  s2p S ?s \\<Longrightarrow> \\<phi> 0 ?s = ?s\n  s2p S ?s \\<Longrightarrow>\n  s2p (U ?s) 0 \\<and> is_interval (U ?s) \\<and> U ?s \\<subseteq> T\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>Collect I\n                \\<subseteq> {s. s2p S s \\<longrightarrow>\n                                (\\<forall>t\\<in>U s. I (\\<phi> t s))};\n        s2p S x;\n        s2p S (\\<phi> 0 x) \\<longrightarrow> I (\\<phi> 0 x)\\<rbrakk>\n       \\<Longrightarrow> I x\n 2. \\<And>x.\n       \\<lbrakk>Collect I\n                \\<subseteq> {s. s2p S s \\<longrightarrow>\n                                (\\<forall>t\\<in>U s. I (\\<phi> t s))};\n        s2p S x; 0 \\<notin> U x\\<rbrakk>\n       \\<Longrightarrow> I x\n 3. \\<And>x t.\n       \\<lbrakk>\\<forall>x.\n                   (s2p S x \\<longrightarrow> I x) =\n                   (s2p S x \\<longrightarrow>\n                    (\\<forall>t\\<in>U x.\n                        s2p S (\\<phi> t x) \\<longrightarrow>\n                        I (\\<phi> t x)));\n        I x; s2p S x; s2p (U x) t\\<rbrakk>\n       \\<Longrightarrow> I (\\<phi> t x)", "apply(force, force)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x t.\n       \\<lbrakk>\\<forall>x.\n                   (s2p S x \\<longrightarrow> I x) =\n                   (s2p S x \\<longrightarrow>\n                    (\\<forall>t\\<in>U x.\n                        s2p S (\\<phi> t x) \\<longrightarrow>\n                        I (\\<phi> t x)));\n        I x; s2p S x; s2p (U x) t\\<rbrakk>\n       \\<Longrightarrow> I (\\<phi> t x)", "apply(erule_tac x=x in allE, clarsimp, erule_tac x=t in ballE)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x t.\n       \\<lbrakk>I x; s2p S x; s2p (U x) t;\n        s2p S (\\<phi> t x) \\<longrightarrow> I (\\<phi> t x)\\<rbrakk>\n       \\<Longrightarrow> I (\\<phi> t x)\n 2. \\<And>x t.\n       \\<lbrakk>I x; s2p S x; s2p (U x) t; t \\<notin> U x\\<rbrakk>\n       \\<Longrightarrow> I (\\<phi> t x)", "using in_domain ivp(2) assms"], ["proof (prove)\nusing this:\n  s2p S ?s \\<Longrightarrow>\n  s2p (T \\<rightarrow> S) (\\<lambda>t. \\<phi> t ?s)\n  s2p S ?s \\<Longrightarrow> \\<phi> 0 ?s = ?s\n  s2p S ?s \\<Longrightarrow>\n  s2p (U ?s) 0 \\<and> is_interval (U ?s) \\<and> U ?s \\<subseteq> T\n\ngoal (2 subgoals):\n 1. \\<And>x t.\n       \\<lbrakk>I x; s2p S x; s2p (U x) t;\n        s2p S (\\<phi> t x) \\<longrightarrow> I (\\<phi> t x)\\<rbrakk>\n       \\<Longrightarrow> I (\\<phi> t x)\n 2. \\<And>x t.\n       \\<lbrakk>I x; s2p S x; s2p (U x) t; t \\<notin> U x\\<rbrakk>\n       \\<Longrightarrow> I (\\<phi> t x)", "by force+"], ["", "lemma diff_inv_eq_inv_set:\n  \"diff_invariant I (\\<lambda>t. f) (\\<lambda>s. T) S 0 (\\<lambda>s. True) = (\\<forall>s. I s \\<longrightarrow> \\<gamma>\\<^sup>\\<phi> s \\<subseteq> {s. I s})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. diff_invariant I (\\<lambda>t. f) (\\<lambda>s. T) S 0\n     (\\<lambda>s. True) =\n    (\\<forall>s.\n        I s \\<longrightarrow> \\<gamma>\\<^sup>\\<phi> s \\<subseteq> {s. I s})", "unfolding diff_inv_eq_inv_set orbit_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>s.\n        I s \\<longrightarrow>\n        x\\<acute>=\\<lambda>t. f & \\<lambda>s. True on \\<lambda>s. T S @ 0 s\n        \\<subseteq> Collect I) =\n    (\\<forall>s.\n        I s \\<longrightarrow>\n        x\\<acute>=\\<lambda>t. f & \\<lambda>s. True on \\<lambda>s. T S @ 0 s\n        \\<subseteq> {s. I s})", "by simp"], ["", "end"], ["", "lemma ffb_g_odei: \"P \\<le> {s. I s} \\<Longrightarrow> {s. I s} \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) {s. I s} \\<Longrightarrow> \n  {s. I s \\<and> G s} \\<le> Q \\<Longrightarrow> P \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0 DINV I) Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P \\<subseteq> {s. I s};\n     {s. I s}\n     \\<subseteq> fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 {s. I s};\n     {s. I s \\<and> G s} \\<subseteq> Q\\<rbrakk>\n    \\<Longrightarrow> P \\<subseteq> fb\\<^sub>\\<F>\n                                     x\\<acute>=f & G on U S @ t\\<^sub>0 DINV I \n                                     Q", "unfolding g_ode_inv_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P \\<subseteq> {s. I s};\n     {s. I s}\n     \\<subseteq> fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 {s. I s};\n     {s. I s \\<and> G s} \\<subseteq> Q\\<rbrakk>\n    \\<Longrightarrow> P \\<subseteq> fb\\<^sub>\\<F>\n                                     x\\<acute>=f & G on U S @ t\\<^sub>0 Q", "apply(rule_tac b=\"fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) {s. I s}\" in order.trans)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>P \\<subseteq> {s. I s};\n     {s. I s}\n     \\<subseteq> fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 {s. I s};\n     {s. I s \\<and> G s} \\<subseteq> Q\\<rbrakk>\n    \\<Longrightarrow> P \\<subseteq> fb\\<^sub>\\<F>\n                                     x\\<acute>=f & G on U S @ t\\<^sub>0\n                                     {s. I s}\n 2. \\<lbrakk>P \\<subseteq> {s. I s};\n     {s. I s}\n     \\<subseteq> fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 {s. I s};\n     {s. I s \\<and> G s} \\<subseteq> Q\\<rbrakk>\n    \\<Longrightarrow> fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0\n                       {s. I s}\n                      \\<subseteq> fb\\<^sub>\\<F>\n                                   x\\<acute>=f & G on U S @ t\\<^sub>0 Q", "apply(rule_tac I=\"{s. I s}\" in ffb_g_orbital_inv, simp_all)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P \\<subseteq> {s. I s}; diff_invariant I f U S t\\<^sub>0 G;\n     {s. I s \\<and> G s} \\<subseteq> Q\\<rbrakk>\n    \\<Longrightarrow> fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0\n                       {s. I s}\n                      \\<subseteq> fb\\<^sub>\\<F>\n                                   x\\<acute>=f & G on U S @ t\\<^sub>0 Q", "apply(subst ffb_g_orbital_guard, simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P \\<subseteq> {s. I s}; diff_invariant I f U S t\\<^sub>0 G;\n     {s. I s \\<and> G s} \\<subseteq> Q\\<rbrakk>\n    \\<Longrightarrow> fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0\n                       {s. G s \\<and> I s}\n                      \\<subseteq> fb\\<^sub>\\<F>\n                                   x\\<acute>=f & G on U S @ t\\<^sub>0 Q", "by (rule ffb_iso, force)"], ["", "subsection \\<open> Derivation of the rules of dL \\<close>"], ["", "text\\<open> We derive domain specific rules of differential dynamic logic (dL). First we present a \ngeneralised version, then we show the rules as instances of the general ones.\\<close>"], ["", "abbreviation g_dl_orbit ::\"(('a::banach)\\<Rightarrow>'a) \\<Rightarrow> 'a pred \\<Rightarrow> 'a \\<Rightarrow> 'a set\" (\"(1x\\<acute>=_ & _)\") \n  where \"(x\\<acute>=f & G) \\<equiv> (x\\<acute>=(\\<lambda>t. f) & G on (\\<lambda>s. {t. t \\<ge> 0}) UNIV @ 0)\""], ["", "abbreviation g_dl_ode_inv ::\"(('a::banach)\\<Rightarrow>'a) \\<Rightarrow> 'a pred \\<Rightarrow> 'a pred \\<Rightarrow> 'a \\<Rightarrow> 'a set\" (\"(1x\\<acute>=_ & _ DINV _)\") \n  where \"(x\\<acute>=f & G DINV I) \\<equiv> (x\\<acute>=(\\<lambda>t. f) & G on (\\<lambda>s. {t. t \\<ge> 0}) UNIV @ 0 DINV I)\""], ["", "lemma diff_solve_axiom1: \n  assumes \"local_flow f UNIV UNIV \\<phi>\"\n  shows \"fb\\<^sub>\\<F> (x\\<acute>= f & G) Q = \n  {s. \\<forall>t\\<ge>0. (\\<forall>\\<tau>\\<in>{0..t}. G (\\<phi> \\<tau> s)) \\<longrightarrow> (\\<phi> t s) \\<in> Q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F>\n     x\\<acute>=\\<lambda>t. f & G on \\<lambda>s. {t. 0 \\<le> t} UNIV @ 0 Q =\n    {s. \\<forall>t\\<ge>0.\n           (\\<forall>\\<tau>\\<in>{0..t}.\n               G (\\<phi> \\<tau> s)) \\<longrightarrow>\n           s2p Q (\\<phi> t s)}", "by (subst local_flow.ffb_g_ode_subset[OF assms], auto)"], ["", "lemma diff_solve_axiom2: \n  fixes c::\"'a::{heine_borel, banach}\"\n  shows \"fb\\<^sub>\\<F> (x\\<acute>=(\\<lambda>s. c) & G) Q = \n  {s. \\<forall>t\\<ge>0. (\\<forall>\\<tau>\\<in>{0..t}. G (s + \\<tau> *\\<^sub>R c)) \\<longrightarrow> (s + t *\\<^sub>R c) \\<in> Q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F>\n     x\\<acute>=\\<lambda>t s. c & G on \\<lambda>s. {t. 0 \\<le> t} UNIV @ 0\n     Q =\n    {s. \\<forall>t\\<ge>0.\n           (\\<forall>\\<tau>\\<in>{0..t}.\n               G (s + \\<tau> *\\<^sub>R c)) \\<longrightarrow>\n           s2p Q (s + t *\\<^sub>R c)}", "apply(subst local_flow.ffb_g_ode_subset[where \\<phi>=\"(\\<lambda>t s. s + t *\\<^sub>R c)\" and T=UNIV])"], ["proof (prove)\ngoal (3 subgoals):\n 1. local_flow (\\<lambda>s. c) UNIV UNIV (\\<lambda>t s. s + t *\\<^sub>R c)\n 2. \\<And>s.\n       s2p UNIV s \\<Longrightarrow>\n       s2p (Collect ((\\<le>) 0)) 0 \\<and>\n       is_interval (Collect ((\\<le>) 0)) \\<and>\n       Collect ((\\<le>) 0) \\<subseteq> UNIV\n 3. {s. s2p UNIV s \\<longrightarrow>\n        (\\<forall>t\\<in>Collect ((\\<le>) 0).\n            (\\<forall>\\<tau>\\<in>down (Collect ((\\<le>) 0)) t.\n                G (s + \\<tau> *\\<^sub>R c)) \\<longrightarrow>\n            s2p Q (s + t *\\<^sub>R c))} =\n    {s. \\<forall>t\\<ge>0.\n           (\\<forall>\\<tau>\\<in>{0..t}.\n               G (s + \\<tau> *\\<^sub>R c)) \\<longrightarrow>\n           s2p Q (s + t *\\<^sub>R c)}", "by (rule line_is_local_flow, auto)"], ["", "lemma diff_solve_rule:\n  assumes \"local_flow f UNIV UNIV \\<phi>\"\n    and \"\\<forall>s. s \\<in> P \\<longrightarrow> (\\<forall>t\\<ge>0. (\\<forall>\\<tau>\\<in>{0..t}. G (\\<phi> \\<tau> s)) \\<longrightarrow> (\\<phi> t s) \\<in> Q)\"\n  shows \"P \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & G) Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<subseteq> fb\\<^sub>\\<F>\n                   x\\<acute>=\\<lambda>t.\n                                f & G on \\<lambda>s. {t. 0 \\<le> t} UNIV @ 0\n                   Q", "using assms"], ["proof (prove)\nusing this:\n  local_flow f UNIV UNIV \\<phi>\n  \\<forall>s.\n     s2p P s \\<longrightarrow>\n     (\\<forall>t\\<ge>0.\n         (\\<forall>\\<tau>\\<in>{0..t}. G (\\<phi> \\<tau> s)) \\<longrightarrow>\n         s2p Q (\\<phi> t s))\n\ngoal (1 subgoal):\n 1. P \\<subseteq> fb\\<^sub>\\<F>\n                   x\\<acute>=\\<lambda>t.\n                                f & G on \\<lambda>s. {t. 0 \\<le> t} UNIV @ 0\n                   Q", "by(subst local_flow.ffb_g_ode_subset[OF assms(1)]) auto"], ["", "lemma diff_weak_axiom1: \"s \\<in> (fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) {s. G s})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s2p (fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 {s. G s}) s", "unfolding ffb_eq g_orbital_eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. s2p {s. \\<forall>s'.\n               s2p {X t |t X.\n                    s2p (U s) t \\<and>\n                    \\<P> X (down (U s) t) \\<subseteq> Collect G \\<and>\n                    s2p (Sols f U S t\\<^sub>0 s) X}\n                s' \\<longrightarrow>\n               s2p (Collect G) s'}\n     s", "by auto"], ["", "lemma diff_weak_axiom2: \"fb\\<^sub>\\<F> (x\\<acute>= f & G on T S @ t\\<^sub>0) Q = fb\\<^sub>\\<F> (x\\<acute>= f & G on T S @ t\\<^sub>0) {s. G s \\<longrightarrow> s \\<in> Q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F> x\\<acute>=f & G on T S @ t\\<^sub>0 Q =\n    fb\\<^sub>\\<F> x\\<acute>=f & G on T S @ t\\<^sub>0\n     {s. G s \\<longrightarrow> s2p Q s}", "unfolding ffb_g_orbital image_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {s. \\<forall>X\\<in>Sols f T S t\\<^sub>0 s.\n           \\<forall>t\\<in>T s.\n              (\\<forall>\\<tau>\\<in>down (T s) t.\n                  G (X \\<tau>)) \\<longrightarrow>\n              s2p Q (X t)} =\n    {s. \\<forall>X\\<in>Sols f T S t\\<^sub>0 s.\n           \\<forall>t\\<in>T s.\n              (\\<forall>\\<tau>\\<in>down (T s) t.\n                  G (X \\<tau>)) \\<longrightarrow>\n              s2p {s. G s \\<longrightarrow> s2p Q s} (X t)}", "by force"], ["", "lemma diff_weak_rule: \"{s. G s} \\<le> Q \\<Longrightarrow> P \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & G on T S @ t\\<^sub>0) Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {s. G s} \\<subseteq> Q \\<Longrightarrow>\n    P \\<subseteq> fb\\<^sub>\\<F> x\\<acute>=f & G on T S @ t\\<^sub>0 Q", "by(auto intro: g_orbitalD simp: le_fun_def g_orbital_eq ffb_eq)"], ["", "lemma ffb_g_orbital_eq_univD:\n  assumes \"fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) {s. C s} = UNIV\" \n    and \"\\<forall>\\<tau>\\<in>(down (U s) t). x \\<tau> \\<in> (x\\<acute>= f & G on U S @ t\\<^sub>0) s\"\n  shows \"\\<forall>\\<tau>\\<in>(down (U s) t). C (x \\<tau>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<tau>\\<in>down (U s) t. C (x \\<tau>)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<tau>. s2p (down (U s) t) \\<tau> \\<Longrightarrow> C (x \\<tau>)", "fix \\<tau>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<tau>. s2p (down (U s) t) \\<tau> \\<Longrightarrow> C (x \\<tau>)", "assume \"\\<tau> \\<in> (down (U s) t)\""], ["proof (state)\nthis:\n  s2p (down (U s) t) \\<tau>\n\ngoal (1 subgoal):\n 1. \\<And>\\<tau>. s2p (down (U s) t) \\<tau> \\<Longrightarrow> C (x \\<tau>)", "hence \"x \\<tau> \\<in> (x\\<acute>= f & G on U S @ t\\<^sub>0) s\""], ["proof (prove)\nusing this:\n  s2p (down (U s) t) \\<tau>\n\ngoal (1 subgoal):\n 1. s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) (x \\<tau>)", "using assms(2)"], ["proof (prove)\nusing this:\n  s2p (down (U s) t) \\<tau>\n  \\<forall>\\<tau>\\<in>down (U s) t.\n     s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) (x \\<tau>)\n\ngoal (1 subgoal):\n 1. s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) (x \\<tau>)", "by blast"], ["proof (state)\nthis:\n  s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) (x \\<tau>)\n\ngoal (1 subgoal):\n 1. \\<And>\\<tau>. s2p (down (U s) t) \\<tau> \\<Longrightarrow> C (x \\<tau>)", "also"], ["proof (state)\nthis:\n  s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) (x \\<tau>)\n\ngoal (1 subgoal):\n 1. \\<And>\\<tau>. s2p (down (U s) t) \\<tau> \\<Longrightarrow> C (x \\<tau>)", "have \"\\<forall>y. y \\<in> (x\\<acute>= f & G on U S @ t\\<^sub>0) s \\<longrightarrow> C y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>y.\n       s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) y \\<longrightarrow> C y", "using assms(1)"], ["proof (prove)\nusing this:\n  fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 {s. C s} = UNIV\n\ngoal (1 subgoal):\n 1. \\<forall>y.\n       s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) y \\<longrightarrow> C y", "unfolding ffb_eq"], ["proof (prove)\nusing this:\n  {s. \\<forall>s'.\n         s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) s' \\<longrightarrow>\n         s2p (Collect C) s'} =\n  UNIV\n\ngoal (1 subgoal):\n 1. \\<forall>y.\n       s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) y \\<longrightarrow> C y", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>y.\n     s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) y \\<longrightarrow> C y\n\ngoal (1 subgoal):\n 1. \\<And>\\<tau>. s2p (down (U s) t) \\<tau> \\<Longrightarrow> C (x \\<tau>)", "ultimately"], ["proof (chain)\npicking this:\n  s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) (x \\<tau>)\n  \\<forall>y.\n     s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) y \\<longrightarrow> C y", "show \"C (x \\<tau>)\""], ["proof (prove)\nusing this:\n  s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) (x \\<tau>)\n  \\<forall>y.\n     s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) y \\<longrightarrow> C y\n\ngoal (1 subgoal):\n 1. C (x \\<tau>)", "by blast"], ["proof (state)\nthis:\n  C (x \\<tau>)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma diff_cut_axiom:\n  assumes \"fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) {s. C s} = UNIV\"\n  shows \"fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) Q = fb\\<^sub>\\<F> (x\\<acute>= f & (\\<lambda>s. G s \\<and> C s) on U S @ t\\<^sub>0) Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 Q =\n    fb\\<^sub>\\<F>\n     x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 Q", "proof(rule_tac f=\"\\<lambda> x. fb\\<^sub>\\<F> x Q\" in HOL.arg_cong, rule ext, rule subset_antisym)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x\\<acute>=f & G on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & \\<lambda>s.\n                                    G s \\<and> C s on U S @ t\\<^sub>0\n                    x\n 2. \\<And>x.\n       x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & G on U S @ t\\<^sub>0 x", "fix s"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x\\<acute>=f & G on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & \\<lambda>s.\n                                    G s \\<and> C s on U S @ t\\<^sub>0\n                    x\n 2. \\<And>x.\n       x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & G on U S @ t\\<^sub>0 x", "{"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x\\<acute>=f & G on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & \\<lambda>s.\n                                    G s \\<and> C s on U S @ t\\<^sub>0\n                    x\n 2. \\<And>x.\n       x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & G on U S @ t\\<^sub>0 x", "fix s'"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x\\<acute>=f & G on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & \\<lambda>s.\n                                    G s \\<and> C s on U S @ t\\<^sub>0\n                    x\n 2. \\<And>x.\n       x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & G on U S @ t\\<^sub>0 x", "assume \"s' \\<in> (x\\<acute>= f & G on U S @ t\\<^sub>0) s\""], ["proof (state)\nthis:\n  s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) s'\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x\\<acute>=f & G on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & \\<lambda>s.\n                                    G s \\<and> C s on U S @ t\\<^sub>0\n                    x\n 2. \\<And>x.\n       x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & G on U S @ t\\<^sub>0 x", "then"], ["proof (chain)\npicking this:\n  s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) s'", "obtain \\<tau>::real and X where x_ivp: \"X \\<in> Sols f U S t\\<^sub>0 s\" \n      and \"X \\<tau> = s'\" and \"\\<tau> \\<in> (U s)\" and guard_x:\"\\<P> X (down (U s) \\<tau>) \\<subseteq> {s. G s}\""], ["proof (prove)\nusing this:\n  s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) s'\n\ngoal (1 subgoal):\n 1. (\\<And>X \\<tau>.\n        \\<lbrakk>s2p (Sols f U S t\\<^sub>0 s) X; X \\<tau> = s';\n         s2p (U s) \\<tau>;\n         \\<P> X (down (U s) \\<tau>) \\<subseteq> {s. G s}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using g_orbitalD[of s' \"f\" G _ S t\\<^sub>0 s]"], ["proof (prove)\nusing this:\n  s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) s'\n  \\<lbrakk>s2p (x\\<acute>=f & G on ?U S @ t\\<^sub>0 s) s';\n   \\<And>X t.\n      \\<lbrakk>s2p (Sols f ?U S t\\<^sub>0 s) X; X t = s'; s2p (?U s) t;\n       \\<P> X (down (?U s) t) \\<subseteq> {s. G s}\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>X \\<tau>.\n        \\<lbrakk>s2p (Sols f U S t\\<^sub>0 s) X; X \\<tau> = s';\n         s2p (U s) \\<tau>;\n         \\<P> X (down (U s) \\<tau>) \\<subseteq> {s. G s}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  s2p (Sols f U S t\\<^sub>0 s) X\n  X \\<tau> = s'\n  s2p (U s) \\<tau>\n  \\<P> X (down (U s) \\<tau>) \\<subseteq> {s. G s}\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x\\<acute>=f & G on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & \\<lambda>s.\n                                    G s \\<and> C s on U S @ t\\<^sub>0\n                    x\n 2. \\<And>x.\n       x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & G on U S @ t\\<^sub>0 x", "have \"\\<forall>t\\<in>(down (U s) \\<tau>). \\<P> X (down (U s) t) \\<subseteq> {s. G s}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>t\\<in>down (U s) \\<tau>.\n       \\<P> X (down (U s) t) \\<subseteq> {s. G s}", "using guard_x"], ["proof (prove)\nusing this:\n  \\<P> X (down (U s) \\<tau>) \\<subseteq> {s. G s}\n\ngoal (1 subgoal):\n 1. \\<forall>t\\<in>down (U s) \\<tau>.\n       \\<P> X (down (U s) t) \\<subseteq> {s. G s}", "by (force simp: image_def)"], ["proof (state)\nthis:\n  \\<forall>t\\<in>down (U s) \\<tau>.\n     \\<P> X (down (U s) t) \\<subseteq> {s. G s}\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x\\<acute>=f & G on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & \\<lambda>s.\n                                    G s \\<and> C s on U S @ t\\<^sub>0\n                    x\n 2. \\<And>x.\n       x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & G on U S @ t\\<^sub>0 x", "also"], ["proof (state)\nthis:\n  \\<forall>t\\<in>down (U s) \\<tau>.\n     \\<P> X (down (U s) t) \\<subseteq> {s. G s}\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x\\<acute>=f & G on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & \\<lambda>s.\n                                    G s \\<and> C s on U S @ t\\<^sub>0\n                    x\n 2. \\<And>x.\n       x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & G on U S @ t\\<^sub>0 x", "have \"\\<forall>t\\<in>(down (U s) \\<tau>). t \\<in> (U s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>t\\<in>down (U s) \\<tau>. s2p (U s) t", "using \\<open>\\<tau> \\<in> (U s)\\<close> closed_segment_subset_interval"], ["proof (prove)\nusing this:\n  s2p (U s) \\<tau>\n  \\<lbrakk>is_interval ?T; s2p ?T ?a; s2p ?T ?b\\<rbrakk>\n  \\<Longrightarrow> {?a--?b} \\<subseteq> ?T\n\ngoal (1 subgoal):\n 1. \\<forall>t\\<in>down (U s) \\<tau>. s2p (U s) t", "by auto"], ["proof (state)\nthis:\n  \\<forall>t\\<in>down (U s) \\<tau>. s2p (U s) t\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x\\<acute>=f & G on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & \\<lambda>s.\n                                    G s \\<and> C s on U S @ t\\<^sub>0\n                    x\n 2. \\<And>x.\n       x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & G on U S @ t\\<^sub>0 x", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>t\\<in>down (U s) \\<tau>.\n     \\<P> X (down (U s) t) \\<subseteq> {s. G s}\n  \\<forall>t\\<in>down (U s) \\<tau>. s2p (U s) t", "have \"\\<forall>t\\<in>(down (U s) \\<tau>). X t \\<in> (x\\<acute>= f & G on U S @ t\\<^sub>0) s\""], ["proof (prove)\nusing this:\n  \\<forall>t\\<in>down (U s) \\<tau>.\n     \\<P> X (down (U s) t) \\<subseteq> {s. G s}\n  \\<forall>t\\<in>down (U s) \\<tau>. s2p (U s) t\n\ngoal (1 subgoal):\n 1. \\<forall>t\\<in>down (U s) \\<tau>.\n       s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) (X t)", "using g_orbitalI[OF x_ivp]"], ["proof (prove)\nusing this:\n  \\<forall>t\\<in>down (U s) \\<tau>.\n     \\<P> X (down (U s) t) \\<subseteq> {s. G s}\n  \\<forall>t\\<in>down (U s) \\<tau>. s2p (U s) t\n  \\<lbrakk>s2p (U s) ?t;\n   \\<P> X (down (U s) ?t) \\<subseteq> {s. ?G s}\\<rbrakk>\n  \\<Longrightarrow> s2p (x\\<acute>=f & ?G on U S @ t\\<^sub>0 s) (X ?t)\n\ngoal (1 subgoal):\n 1. \\<forall>t\\<in>down (U s) \\<tau>.\n       s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) (X t)", "by (metis (mono_tags, lifting))"], ["proof (state)\nthis:\n  \\<forall>t\\<in>down (U s) \\<tau>.\n     s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) (X t)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x\\<acute>=f & G on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & \\<lambda>s.\n                                    G s \\<and> C s on U S @ t\\<^sub>0\n                    x\n 2. \\<And>x.\n       x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & G on U S @ t\\<^sub>0 x", "hence \"\\<forall>t\\<in>(down (U s) \\<tau>). C (X t)\""], ["proof (prove)\nusing this:\n  \\<forall>t\\<in>down (U s) \\<tau>.\n     s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) (X t)\n\ngoal (1 subgoal):\n 1. \\<forall>t\\<in>down (U s) \\<tau>. C (X t)", "using assms"], ["proof (prove)\nusing this:\n  \\<forall>t\\<in>down (U s) \\<tau>.\n     s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) (X t)\n  fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 {s. C s} = UNIV\n\ngoal (1 subgoal):\n 1. \\<forall>t\\<in>down (U s) \\<tau>. C (X t)", "unfolding ffb_eq"], ["proof (prove)\nusing this:\n  \\<forall>t\\<in>down (U s) \\<tau>.\n     s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) (X t)\n  {s. \\<forall>s'.\n         s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) s' \\<longrightarrow>\n         s2p (Collect C) s'} =\n  UNIV\n\ngoal (1 subgoal):\n 1. \\<forall>t\\<in>down (U s) \\<tau>. C (X t)", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>t\\<in>down (U s) \\<tau>. C (X t)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x\\<acute>=f & G on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & \\<lambda>s.\n                                    G s \\<and> C s on U S @ t\\<^sub>0\n                    x\n 2. \\<And>x.\n       x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & G on U S @ t\\<^sub>0 x", "hence \"s' \\<in> (x\\<acute>= f & (\\<lambda>s. G s \\<and> C s) on U S @ t\\<^sub>0) s\""], ["proof (prove)\nusing this:\n  \\<forall>t\\<in>down (U s) \\<tau>. C (X t)\n\ngoal (1 subgoal):\n 1. s2p (x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 s) s'", "using g_orbitalI[OF x_ivp \\<open>\\<tau> \\<in> (U s)\\<close>] guard_x \\<open>X \\<tau> = s'\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>t\\<in>down (U s) \\<tau>. C (X t)\n  \\<P> X (down (U s) \\<tau>) \\<subseteq> {s. ?G s} \\<Longrightarrow>\n  s2p (x\\<acute>=f & ?G on U S @ t\\<^sub>0 s) (X \\<tau>)\n  \\<P> X (down (U s) \\<tau>) \\<subseteq> {s. G s}\n  X \\<tau> = s'\n\ngoal (1 subgoal):\n 1. s2p (x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 s) s'", "unfolding image_le_pred"], ["proof (prove)\nusing this:\n  \\<forall>t\\<in>down (U s) \\<tau>. C (X t)\n  \\<forall>x\\<in>down (U s) \\<tau>. ?G (X x) \\<Longrightarrow>\n  s2p (x\\<acute>=f & ?G on U S @ t\\<^sub>0 s) (X \\<tau>)\n  \\<forall>x\\<in>down (U s) \\<tau>. G (X x)\n  X \\<tau> = s'\n\ngoal (1 subgoal):\n 1. s2p (x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 s) s'", "by fastforce"], ["proof (state)\nthis:\n  s2p (x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 s) s'\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x\\<acute>=f & G on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & \\<lambda>s.\n                                    G s \\<and> C s on U S @ t\\<^sub>0\n                    x\n 2. \\<And>x.\n       x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & G on U S @ t\\<^sub>0 x", "}"], ["proof (state)\nthis:\n  s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) ?s'2 \\<Longrightarrow>\n  s2p (x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 s) ?s'2\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x\\<acute>=f & G on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & \\<lambda>s.\n                                    G s \\<and> C s on U S @ t\\<^sub>0\n                    x\n 2. \\<And>x.\n       x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & G on U S @ t\\<^sub>0 x", "thus \"(x\\<acute>= f & G on U S @ t\\<^sub>0) s \\<subseteq> (x\\<acute>= f & (\\<lambda>s. G s \\<and> C s) on U S @ t\\<^sub>0) s\""], ["proof (prove)\nusing this:\n  s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) ?s'2 \\<Longrightarrow>\n  s2p (x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 s) ?s'2\n\ngoal (1 subgoal):\n 1. x\\<acute>=f & G on U S @ t\\<^sub>0 s\n    \\<subseteq> x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0\n                 s", "by blast"], ["proof (state)\nthis:\n  x\\<acute>=f & G on U S @ t\\<^sub>0 s\n  \\<subseteq> x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 s\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & G on U S @ t\\<^sub>0 x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 x\n       \\<subseteq> x\\<acute>=f & G on U S @ t\\<^sub>0 x", "show \"\\<And>s. (x\\<acute>= f & (\\<lambda>s. G s \\<and> C s) on U S @ t\\<^sub>0) s \\<subseteq> (x\\<acute>= f & G on U S @ t\\<^sub>0) s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s.\n       x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 s\n       \\<subseteq> x\\<acute>=f & G on U S @ t\\<^sub>0 s", "by (auto simp: g_orbital_eq)"], ["proof (state)\nthis:\n  x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 ?s\n  \\<subseteq> x\\<acute>=f & G on U S @ t\\<^sub>0 ?s\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma diff_cut_rule:\n  assumes ffb_C: \"P \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) {s. C s}\"\n    and ffb_Q: \"P \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & (\\<lambda>s. G s \\<and> C s) on U S @ t\\<^sub>0) Q\"\n  shows \"P \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<subseteq> fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 Q", "proof(subst ffb_eq, subst g_orbital_eq, clarsimp)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x t X.\n       \\<lbrakk>s2p P x; s2p (U x) t;\n        \\<forall>xa.\n           s2p (U x) xa \\<and> xa \\<le> t \\<longrightarrow> G (X xa);\n        s2p (Sols f U S t\\<^sub>0 x) X\\<rbrakk>\n       \\<Longrightarrow> s2p Q (X t)", "fix t::real and X::\"real \\<Rightarrow> 'a\" and s"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x t X.\n       \\<lbrakk>s2p P x; s2p (U x) t;\n        \\<forall>xa.\n           s2p (U x) xa \\<and> xa \\<le> t \\<longrightarrow> G (X xa);\n        s2p (Sols f U S t\\<^sub>0 x) X\\<rbrakk>\n       \\<Longrightarrow> s2p Q (X t)", "assume \"s \\<in> P\" and \"t \\<in> (U s)\"\n    and x_ivp:\"X \\<in> Sols f U S t\\<^sub>0 s\" \n    and guard_x:\"\\<forall>\\<tau>. \\<tau> \\<in> (U s) \\<and> \\<tau> \\<le> t \\<longrightarrow> G (X \\<tau>)\""], ["proof (state)\nthis:\n  s2p P s\n  s2p (U s) t\n  s2p (Sols f U S t\\<^sub>0 s) X\n  \\<forall>\\<tau>.\n     s2p (U s) \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow> G (X \\<tau>)\n\ngoal (1 subgoal):\n 1. \\<And>x t X.\n       \\<lbrakk>s2p P x; s2p (U x) t;\n        \\<forall>xa.\n           s2p (U x) xa \\<and> xa \\<le> t \\<longrightarrow> G (X xa);\n        s2p (Sols f U S t\\<^sub>0 x) X\\<rbrakk>\n       \\<Longrightarrow> s2p Q (X t)", "have \"\\<forall>\\<tau>\\<in>(down (U s) t). X \\<tau> \\<in> (x\\<acute>= f & G on U S @ t\\<^sub>0) s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<tau>\\<in>down (U s) t.\n       s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) (X \\<tau>)", "using g_orbitalI[OF x_ivp] guard_x"], ["proof (prove)\nusing this:\n  \\<lbrakk>s2p (U s) ?t;\n   \\<P> X (down (U s) ?t) \\<subseteq> {s. ?G s}\\<rbrakk>\n  \\<Longrightarrow> s2p (x\\<acute>=f & ?G on U S @ t\\<^sub>0 s) (X ?t)\n  \\<forall>\\<tau>.\n     s2p (U s) \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow> G (X \\<tau>)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<tau>\\<in>down (U s) t.\n       s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) (X \\<tau>)", "unfolding image_le_pred"], ["proof (prove)\nusing this:\n  \\<lbrakk>s2p (U s) ?t; \\<forall>x\\<in>down (U s) ?t. ?G (X x)\\<rbrakk>\n  \\<Longrightarrow> s2p (x\\<acute>=f & ?G on U S @ t\\<^sub>0 s) (X ?t)\n  \\<forall>\\<tau>.\n     s2p (U s) \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow> G (X \\<tau>)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<tau>\\<in>down (U s) t.\n       s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) (X \\<tau>)", "by auto"], ["proof (state)\nthis:\n  \\<forall>\\<tau>\\<in>down (U s) t.\n     s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) (X \\<tau>)\n\ngoal (1 subgoal):\n 1. \\<And>x t X.\n       \\<lbrakk>s2p P x; s2p (U x) t;\n        \\<forall>xa.\n           s2p (U x) xa \\<and> xa \\<le> t \\<longrightarrow> G (X xa);\n        s2p (Sols f U S t\\<^sub>0 x) X\\<rbrakk>\n       \\<Longrightarrow> s2p Q (X t)", "hence \"\\<forall>\\<tau>\\<in>(down (U s) t). C (X \\<tau>)\""], ["proof (prove)\nusing this:\n  \\<forall>\\<tau>\\<in>down (U s) t.\n     s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) (X \\<tau>)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<tau>\\<in>down (U s) t. C (X \\<tau>)", "using ffb_C \\<open>s \\<in> P\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>\\<tau>\\<in>down (U s) t.\n     s2p (x\\<acute>=f & G on U S @ t\\<^sub>0 s) (X \\<tau>)\n  P \\<subseteq> fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 {s. C s}\n  s2p P s\n\ngoal (1 subgoal):\n 1. \\<forall>\\<tau>\\<in>down (U s) t. C (X \\<tau>)", "by (subst (asm) ffb_eq, auto)"], ["proof (state)\nthis:\n  \\<forall>\\<tau>\\<in>down (U s) t. C (X \\<tau>)\n\ngoal (1 subgoal):\n 1. \\<And>x t X.\n       \\<lbrakk>s2p P x; s2p (U x) t;\n        \\<forall>xa.\n           s2p (U x) xa \\<and> xa \\<le> t \\<longrightarrow> G (X xa);\n        s2p (Sols f U S t\\<^sub>0 x) X\\<rbrakk>\n       \\<Longrightarrow> s2p Q (X t)", "hence \"X t \\<in> (x\\<acute>= f & (\\<lambda>s. G s \\<and> C s) on U S @ t\\<^sub>0) s\""], ["proof (prove)\nusing this:\n  \\<forall>\\<tau>\\<in>down (U s) t. C (X \\<tau>)\n\ngoal (1 subgoal):\n 1. s2p (x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 s)\n     (X t)", "using guard_x \\<open>t \\<in> (U s)\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>\\<tau>\\<in>down (U s) t. C (X \\<tau>)\n  \\<forall>\\<tau>.\n     s2p (U s) \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow> G (X \\<tau>)\n  s2p (U s) t\n\ngoal (1 subgoal):\n 1. s2p (x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 s)\n     (X t)", "by (auto intro!: g_orbitalI x_ivp)"], ["proof (state)\nthis:\n  s2p (x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 s) (X t)\n\ngoal (1 subgoal):\n 1. \\<And>x t X.\n       \\<lbrakk>s2p P x; s2p (U x) t;\n        \\<forall>xa.\n           s2p (U x) xa \\<and> xa \\<le> t \\<longrightarrow> G (X xa);\n        s2p (Sols f U S t\\<^sub>0 x) X\\<rbrakk>\n       \\<Longrightarrow> s2p Q (X t)", "thus \"(X t) \\<in> Q\""], ["proof (prove)\nusing this:\n  s2p (x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 s) (X t)\n\ngoal (1 subgoal):\n 1. s2p Q (X t)", "using \\<open>s \\<in> P\\<close> ffb_Q"], ["proof (prove)\nusing this:\n  s2p (x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0 s) (X t)\n  s2p P s\n  P \\<subseteq> fb\\<^sub>\\<F>\n                 x\\<acute>=f & \\<lambda>s. G s \\<and> C s on U S @ t\\<^sub>0\n                 Q\n\ngoal (1 subgoal):\n 1. s2p Q (X t)", "by (subst (asm) ffb_eq) auto"], ["proof (state)\nthis:\n  s2p Q (X t)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma diff_inv_axiom1:\n  assumes \"G s \\<longrightarrow> I s\" and \"diff_invariant I (\\<lambda>t. f) (\\<lambda>s. {t. t \\<ge> 0}) UNIV 0 G\"\n  shows \"s \\<in> (fb\\<^sub>\\<F> (x\\<acute>= f & G) {s. I s})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s2p (fb\\<^sub>\\<F>\n          x\\<acute>=\\<lambda>t. f & G on \\<lambda>s. {t. 0 \\<le> t} UNIV @ 0\n          {s. I s})\n     s", "using assms"], ["proof (prove)\nusing this:\n  G s \\<longrightarrow> I s\n  diff_invariant I (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV 0 G\n\ngoal (1 subgoal):\n 1. s2p (fb\\<^sub>\\<F>\n          x\\<acute>=\\<lambda>t. f & G on \\<lambda>s. {t. 0 \\<le> t} UNIV @ 0\n          {s. I s})\n     s", "unfolding ffb_g_orbital diff_invariant_eq"], ["proof (prove)\nusing this:\n  G s \\<longrightarrow> I s\n  \\<forall>s.\n     I s \\<longrightarrow>\n     (\\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. Collect ((\\<le>) 0))\n                      UNIV 0 s.\n         \\<forall>t\\<in>Collect ((\\<le>) 0).\n            (\\<forall>\\<tau>\\<in>down (Collect ((\\<le>) 0)) t.\n                G (X \\<tau>)) \\<longrightarrow>\n            I (X t))\n\ngoal (1 subgoal):\n 1. s2p {s. \\<forall>X\\<in>Sols (\\<lambda>t. f)\n                            (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 s.\n               \\<forall>t\\<in>Collect ((\\<le>) 0).\n                  (\\<forall>\\<tau>\\<in>down (Collect ((\\<le>) 0)) t.\n                      G (X \\<tau>)) \\<longrightarrow>\n                  s2p (Collect I) (X t)}\n     s", "apply clarsimp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>X t.\n       \\<lbrakk>G s \\<longrightarrow> I s;\n        \\<forall>s.\n           I s \\<longrightarrow>\n           (\\<forall>X\\<in>Sols (\\<lambda>t. f)\n                            (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 s.\n               \\<forall>t\\<ge>0.\n                  (\\<forall>\\<tau>.\n                      0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                      G (X \\<tau>)) \\<longrightarrow>\n                  I (X t));\n        s2p (Sols (\\<lambda>t. f) (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0\n              s)\n         X;\n        0 \\<le> t;\n        \\<forall>\\<tau>.\n           0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n           G (X \\<tau>)\\<rbrakk>\n       \\<Longrightarrow> I (X t)", "by (erule_tac x=s in allE, frule ivp_solsD(2), clarsimp)"], ["", "lemma diff_inv_axiom2:\n  assumes \"picard_lindeloef (\\<lambda>t. f) UNIV UNIV 0\"\n    and \"\\<And>s. {t::real. t \\<ge> 0} \\<subseteq> picard_lindeloef.ex_ivl (\\<lambda>t. f) UNIV UNIV 0 s\"\n    and \"diff_invariant I (\\<lambda>t. f) (\\<lambda>s. {t::real. t \\<ge> 0}) UNIV 0 G\"\n  shows \"fb\\<^sub>\\<F> (x\\<acute>= f & G) {s. I s} = fb\\<^sub>\\<F> (\\<lambda>s. {x. s = x \\<and> G s}) {s. I s}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fb\\<^sub>\\<F>\n     x\\<acute>=\\<lambda>t. f & G on \\<lambda>s. {t. 0 \\<le> t} UNIV @ 0\n     {s. I s} =\n    fb\\<^sub>\\<F> (\\<lambda>s. {x. s = x \\<and> G s}) {s. I s}", "proof(unfold ffb_g_orbital, subst ffb_eq, clarsimp simp: set_eq_iff)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<forall>X\\<in>Sols (\\<lambda>t. f)\n                        (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 x.\n           \\<forall>t\\<ge>0.\n              (\\<forall>\\<tau>.\n                  0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                  G (X \\<tau>)) \\<longrightarrow>\n              I (X t)) =\n       (G x \\<longrightarrow> I x)", "fix s"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<forall>X\\<in>Sols (\\<lambda>t. f)\n                        (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 x.\n           \\<forall>t\\<ge>0.\n              (\\<forall>\\<tau>.\n                  0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                  G (X \\<tau>)) \\<longrightarrow>\n              I (X t)) =\n       (G x \\<longrightarrow> I x)", "let \"?ex_ivl s\" = \"picard_lindeloef.ex_ivl (\\<lambda>t. f) UNIV UNIV 0 s\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<forall>X\\<in>Sols (\\<lambda>t. f)\n                        (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 x.\n           \\<forall>t\\<ge>0.\n              (\\<forall>\\<tau>.\n                  0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                  G (X \\<tau>)) \\<longrightarrow>\n              I (X t)) =\n       (G x \\<longrightarrow> I x)", "let \"?lhs s\" = \n    \"\\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. t \\<ge> 0}) UNIV 0 s. \\<forall>t\\<ge>0. (\\<forall>\\<tau>. 0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow> G (X \\<tau>)) \\<longrightarrow> I (X t)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<forall>X\\<in>Sols (\\<lambda>t. f)\n                        (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 x.\n           \\<forall>t\\<ge>0.\n              (\\<forall>\\<tau>.\n                  0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                  G (X \\<tau>)) \\<longrightarrow>\n              I (X t)) =\n       (G x \\<longrightarrow> I x)", "obtain X where xivp1: \"X \\<in> Sols (\\<lambda>t. f) (\\<lambda>s. ?ex_ivl s) UNIV 0 s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>X.\n        s2p (Sols (\\<lambda>t. f)\n              (ll_on_open.existence_ivl UNIV (\\<lambda>t. f) UNIV 0) UNIV 0\n              s)\n         X \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using picard_lindeloef.flow_in_ivp_sols_ex_ivl[OF assms(1)]"], ["proof (prove)\nusing this:\n  s2p UNIV ?s \\<Longrightarrow>\n  s2p (Sols (\\<lambda>t. f)\n        (ll_on_open.existence_ivl UNIV (\\<lambda>t. f) UNIV 0) UNIV 0 ?s)\n   (ll_on_open.flow UNIV (\\<lambda>t. f) UNIV 0 ?s)\n\ngoal (1 subgoal):\n 1. (\\<And>X.\n        s2p (Sols (\\<lambda>t. f)\n              (ll_on_open.existence_ivl UNIV (\\<lambda>t. f) UNIV 0) UNIV 0\n              s)\n         X \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  s2p (Sols (\\<lambda>t. f)\n        (ll_on_open.existence_ivl UNIV (\\<lambda>t. f) UNIV 0) UNIV 0 s)\n   X\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<forall>X\\<in>Sols (\\<lambda>t. f)\n                        (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 x.\n           \\<forall>t\\<ge>0.\n              (\\<forall>\\<tau>.\n                  0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                  G (X \\<tau>)) \\<longrightarrow>\n              I (X t)) =\n       (G x \\<longrightarrow> I x)", "have xivp2: \"X \\<in> Sols (\\<lambda>t. f) (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s2p (Sols (\\<lambda>t. f) (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 s) X", "by (rule in_ivp_sols_subset[OF _ _ xivp1], simp_all add: assms(2))"], ["proof (state)\nthis:\n  s2p (Sols (\\<lambda>t. f) (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 s) X\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<forall>X\\<in>Sols (\\<lambda>t. f)\n                        (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 x.\n           \\<forall>t\\<ge>0.\n              (\\<forall>\\<tau>.\n                  0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                  G (X \\<tau>)) \\<longrightarrow>\n              I (X t)) =\n       (G x \\<longrightarrow> I x)", "hence shyp: \"X 0 = s\""], ["proof (prove)\nusing this:\n  s2p (Sols (\\<lambda>t. f) (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 s) X\n\ngoal (1 subgoal):\n 1. X 0 = s", "using ivp_solsD"], ["proof (prove)\nusing this:\n  s2p (Sols (\\<lambda>t. f) (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 s) X\n  s2p (Sols ?f ?U ?S ?t\\<^sub>0 ?s) ?X \\<Longrightarrow>\n   D ?X = (\\<lambda>t. ?f t (?X t)) on ?U ?s\n  s2p (Sols ?f ?U ?S ?t\\<^sub>0 ?s) ?X \\<Longrightarrow> ?X ?t\\<^sub>0 = ?s\n  s2p (Sols ?f ?U ?S ?t\\<^sub>0 ?s) ?X \\<Longrightarrow>\n  s2p (?U ?s \\<rightarrow> ?S) ?X\n  s2p (Sols ?f ?U ?S ?t\\<^sub>0 ?s) ?X \\<Longrightarrow>\n  s2p (?U ?s) ?t\\<^sub>0\n\ngoal (1 subgoal):\n 1. X 0 = s", "by auto"], ["proof (state)\nthis:\n  X 0 = s\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<forall>X\\<in>Sols (\\<lambda>t. f)\n                        (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 x.\n           \\<forall>t\\<ge>0.\n              (\\<forall>\\<tau>.\n                  0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                  G (X \\<tau>)) \\<longrightarrow>\n              I (X t)) =\n       (G x \\<longrightarrow> I x)", "have dinv: \"\\<forall>s. I s \\<longrightarrow> ?lhs s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>s.\n       I s \\<longrightarrow>\n       (\\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t})\n                        UNIV 0 s.\n           \\<forall>t\\<ge>0.\n              (\\<forall>\\<tau>.\n                  0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                  G (X \\<tau>)) \\<longrightarrow>\n              I (X t))", "using assms(3)"], ["proof (prove)\nusing this:\n  diff_invariant I (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV 0 G\n\ngoal (1 subgoal):\n 1. \\<forall>s.\n       I s \\<longrightarrow>\n       (\\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t})\n                        UNIV 0 s.\n           \\<forall>t\\<ge>0.\n              (\\<forall>\\<tau>.\n                  0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                  G (X \\<tau>)) \\<longrightarrow>\n              I (X t))", "unfolding diff_invariant_eq"], ["proof (prove)\nusing this:\n  \\<forall>s.\n     I s \\<longrightarrow>\n     (\\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. Collect ((\\<le>) 0))\n                      UNIV 0 s.\n         \\<forall>t\\<in>Collect ((\\<le>) 0).\n            (\\<forall>\\<tau>\\<in>down (Collect ((\\<le>) 0)) t.\n                G (X \\<tau>)) \\<longrightarrow>\n            I (X t))\n\ngoal (1 subgoal):\n 1. \\<forall>s.\n       I s \\<longrightarrow>\n       (\\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t})\n                        UNIV 0 s.\n           \\<forall>t\\<ge>0.\n              (\\<forall>\\<tau>.\n                  0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                  G (X \\<tau>)) \\<longrightarrow>\n              I (X t))", "by auto"], ["proof (state)\nthis:\n  \\<forall>s.\n     I s \\<longrightarrow>\n     (\\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV\n                      0 s.\n         \\<forall>t\\<ge>0.\n            (\\<forall>\\<tau>.\n                0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                G (X \\<tau>)) \\<longrightarrow>\n            I (X t))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<forall>X\\<in>Sols (\\<lambda>t. f)\n                        (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 x.\n           \\<forall>t\\<ge>0.\n              (\\<forall>\\<tau>.\n                  0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                  G (X \\<tau>)) \\<longrightarrow>\n              I (X t)) =\n       (G x \\<longrightarrow> I x)", "{"], ["proof (state)\nthis:\n  \\<forall>s.\n     I s \\<longrightarrow>\n     (\\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV\n                      0 s.\n         \\<forall>t\\<ge>0.\n            (\\<forall>\\<tau>.\n                0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                G (X \\<tau>)) \\<longrightarrow>\n            I (X t))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<forall>X\\<in>Sols (\\<lambda>t. f)\n                        (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 x.\n           \\<forall>t\\<ge>0.\n              (\\<forall>\\<tau>.\n                  0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                  G (X \\<tau>)) \\<longrightarrow>\n              I (X t)) =\n       (G x \\<longrightarrow> I x)", "assume \"?lhs s\" and \"G s\""], ["proof (state)\nthis:\n  \\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV 0 s.\n     \\<forall>t\\<ge>0.\n        (\\<forall>\\<tau>.\n            0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n            G (X \\<tau>)) \\<longrightarrow>\n        I (X t)\n  G s\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<forall>X\\<in>Sols (\\<lambda>t. f)\n                        (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 x.\n           \\<forall>t\\<ge>0.\n              (\\<forall>\\<tau>.\n                  0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                  G (X \\<tau>)) \\<longrightarrow>\n              I (X t)) =\n       (G x \\<longrightarrow> I x)", "hence \"I s\""], ["proof (prove)\nusing this:\n  \\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV 0 s.\n     \\<forall>t\\<ge>0.\n        (\\<forall>\\<tau>.\n            0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n            G (X \\<tau>)) \\<longrightarrow>\n        I (X t)\n  G s\n\ngoal (1 subgoal):\n 1. I s", "by (erule_tac x=X in ballE, erule_tac x=0 in allE, auto simp: shyp xivp2)"], ["proof (state)\nthis:\n  I s\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<forall>X\\<in>Sols (\\<lambda>t. f)\n                        (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 x.\n           \\<forall>t\\<ge>0.\n              (\\<forall>\\<tau>.\n                  0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                  G (X \\<tau>)) \\<longrightarrow>\n              I (X t)) =\n       (G x \\<longrightarrow> I x)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>\\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t})\n                           UNIV 0 s.\n              \\<forall>t\\<ge>0.\n                 (\\<forall>\\<tau>.\n                     0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                     G (X \\<tau>)) \\<longrightarrow>\n                 I (X t);\n   G s\\<rbrakk>\n  \\<Longrightarrow> I s\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<forall>X\\<in>Sols (\\<lambda>t. f)\n                        (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 x.\n           \\<forall>t\\<ge>0.\n              (\\<forall>\\<tau>.\n                  0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                  G (X \\<tau>)) \\<longrightarrow>\n              I (X t)) =\n       (G x \\<longrightarrow> I x)", "hence \"?lhs s \\<longrightarrow> (G s \\<longrightarrow> I s)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t})\n                           UNIV 0 s.\n              \\<forall>t\\<ge>0.\n                 (\\<forall>\\<tau>.\n                     0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                     G (X \\<tau>)) \\<longrightarrow>\n                 I (X t);\n   G s\\<rbrakk>\n  \\<Longrightarrow> I s\n\ngoal (1 subgoal):\n 1. (\\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV 0\n                     s.\n        \\<forall>t\\<ge>0.\n           (\\<forall>\\<tau>.\n               0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n               G (X \\<tau>)) \\<longrightarrow>\n           I (X t)) \\<longrightarrow>\n    G s \\<longrightarrow> I s", "by blast"], ["proof (state)\nthis:\n  (\\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV 0\n                   s.\n      \\<forall>t\\<ge>0.\n         (\\<forall>\\<tau>.\n             0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n             G (X \\<tau>)) \\<longrightarrow>\n         I (X t)) \\<longrightarrow>\n  G s \\<longrightarrow> I s\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<forall>X\\<in>Sols (\\<lambda>t. f)\n                        (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 x.\n           \\<forall>t\\<ge>0.\n              (\\<forall>\\<tau>.\n                  0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                  G (X \\<tau>)) \\<longrightarrow>\n              I (X t)) =\n       (G x \\<longrightarrow> I x)", "moreover"], ["proof (state)\nthis:\n  (\\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV 0\n                   s.\n      \\<forall>t\\<ge>0.\n         (\\<forall>\\<tau>.\n             0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n             G (X \\<tau>)) \\<longrightarrow>\n         I (X t)) \\<longrightarrow>\n  G s \\<longrightarrow> I s\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<forall>X\\<in>Sols (\\<lambda>t. f)\n                        (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 x.\n           \\<forall>t\\<ge>0.\n              (\\<forall>\\<tau>.\n                  0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                  G (X \\<tau>)) \\<longrightarrow>\n              I (X t)) =\n       (G x \\<longrightarrow> I x)", "{"], ["proof (state)\nthis:\n  (\\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV 0\n                   s.\n      \\<forall>t\\<ge>0.\n         (\\<forall>\\<tau>.\n             0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n             G (X \\<tau>)) \\<longrightarrow>\n         I (X t)) \\<longrightarrow>\n  G s \\<longrightarrow> I s\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<forall>X\\<in>Sols (\\<lambda>t. f)\n                        (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 x.\n           \\<forall>t\\<ge>0.\n              (\\<forall>\\<tau>.\n                  0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                  G (X \\<tau>)) \\<longrightarrow>\n              I (X t)) =\n       (G x \\<longrightarrow> I x)", "assume \"G s \\<longrightarrow> I s\""], ["proof (state)\nthis:\n  G s \\<longrightarrow> I s\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<forall>X\\<in>Sols (\\<lambda>t. f)\n                        (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 x.\n           \\<forall>t\\<ge>0.\n              (\\<forall>\\<tau>.\n                  0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                  G (X \\<tau>)) \\<longrightarrow>\n              I (X t)) =\n       (G x \\<longrightarrow> I x)", "hence \"?lhs s\""], ["proof (prove)\nusing this:\n  G s \\<longrightarrow> I s\n\ngoal (1 subgoal):\n 1. \\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV 0\n                    s.\n       \\<forall>t\\<ge>0.\n          (\\<forall>\\<tau>.\n              0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n              G (X \\<tau>)) \\<longrightarrow>\n          I (X t)", "apply(clarify, subgoal_tac \"\\<forall>\\<tau>. 0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow> G (X \\<tau>)\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>X t.\n       \\<lbrakk>G s \\<longrightarrow> I s;\n        s2p (Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV 0 s) X;\n        0 \\<le> t;\n        \\<forall>\\<tau>.\n           0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n           G (X \\<tau>);\n        G s \\<longrightarrow> I s;\n        \\<forall>\\<tau>.\n           0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n           G (X \\<tau>)\\<rbrakk>\n       \\<Longrightarrow> I (X t)\n 2. \\<And>X t.\n       \\<lbrakk>G s \\<longrightarrow> I s;\n        s2p (Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV 0 s) X;\n        0 \\<le> t;\n        \\<forall>\\<tau>.\n           0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n           G (X \\<tau>);\n        G s \\<longrightarrow> I s\\<rbrakk>\n       \\<Longrightarrow> \\<forall>\\<tau>.\n                            0 \\<le> \\<tau> \\<and>\n                            \\<tau> \\<le> t \\<longrightarrow>\n                            G (X \\<tau>)", "apply(erule_tac x=0 in allE, frule ivp_solsD(2), simp)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>X t.\n       \\<lbrakk>s2p (Sols (\\<lambda>t. f) (\\<lambda>s. Collect ((\\<le>) 0))\n                      UNIV 0 s)\n                 X;\n        0 \\<le> t; I s;\n        \\<forall>\\<tau>.\n           0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n           G (X \\<tau>);\n        G s; X 0 = s\\<rbrakk>\n       \\<Longrightarrow> I (X t)\n 2. \\<And>X t.\n       \\<lbrakk>G s \\<longrightarrow> I s;\n        s2p (Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV 0 s) X;\n        0 \\<le> t;\n        \\<forall>\\<tau>.\n           0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n           G (X \\<tau>);\n        G s \\<longrightarrow> I s\\<rbrakk>\n       \\<Longrightarrow> \\<forall>\\<tau>.\n                            0 \\<le> \\<tau> \\<and>\n                            \\<tau> \\<le> t \\<longrightarrow>\n                            G (X \\<tau>)", "using dinv"], ["proof (prove)\nusing this:\n  \\<forall>s.\n     I s \\<longrightarrow>\n     (\\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV\n                      0 s.\n         \\<forall>t\\<ge>0.\n            (\\<forall>\\<tau>.\n                0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                G (X \\<tau>)) \\<longrightarrow>\n            I (X t))\n\ngoal (2 subgoals):\n 1. \\<And>X t.\n       \\<lbrakk>s2p (Sols (\\<lambda>t. f) (\\<lambda>s. Collect ((\\<le>) 0))\n                      UNIV 0 s)\n                 X;\n        0 \\<le> t; I s;\n        \\<forall>\\<tau>.\n           0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n           G (X \\<tau>);\n        G s; X 0 = s\\<rbrakk>\n       \\<Longrightarrow> I (X t)\n 2. \\<And>X t.\n       \\<lbrakk>G s \\<longrightarrow> I s;\n        s2p (Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV 0 s) X;\n        0 \\<le> t;\n        \\<forall>\\<tau>.\n           0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n           G (X \\<tau>);\n        G s \\<longrightarrow> I s\\<rbrakk>\n       \\<Longrightarrow> \\<forall>\\<tau>.\n                            0 \\<le> \\<tau> \\<and>\n                            \\<tau> \\<le> t \\<longrightarrow>\n                            G (X \\<tau>)", "by blast+"], ["proof (state)\nthis:\n  \\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV 0 s.\n     \\<forall>t\\<ge>0.\n        (\\<forall>\\<tau>.\n            0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n            G (X \\<tau>)) \\<longrightarrow>\n        I (X t)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<forall>X\\<in>Sols (\\<lambda>t. f)\n                        (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 x.\n           \\<forall>t\\<ge>0.\n              (\\<forall>\\<tau>.\n                  0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                  G (X \\<tau>)) \\<longrightarrow>\n              I (X t)) =\n       (G x \\<longrightarrow> I x)", "}"], ["proof (state)\nthis:\n  G s \\<longrightarrow> I s \\<Longrightarrow>\n  \\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV 0 s.\n     \\<forall>t\\<ge>0.\n        (\\<forall>\\<tau>.\n            0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n            G (X \\<tau>)) \\<longrightarrow>\n        I (X t)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<forall>X\\<in>Sols (\\<lambda>t. f)\n                        (\\<lambda>s. Collect ((\\<le>) 0)) UNIV 0 x.\n           \\<forall>t\\<ge>0.\n              (\\<forall>\\<tau>.\n                  0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n                  G (X \\<tau>)) \\<longrightarrow>\n              I (X t)) =\n       (G x \\<longrightarrow> I x)", "ultimately"], ["proof (chain)\npicking this:\n  (\\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV 0\n                   s.\n      \\<forall>t\\<ge>0.\n         (\\<forall>\\<tau>.\n             0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n             G (X \\<tau>)) \\<longrightarrow>\n         I (X t)) \\<longrightarrow>\n  G s \\<longrightarrow> I s\n  G s \\<longrightarrow> I s \\<Longrightarrow>\n  \\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV 0 s.\n     \\<forall>t\\<ge>0.\n        (\\<forall>\\<tau>.\n            0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n            G (X \\<tau>)) \\<longrightarrow>\n        I (X t)", "show \"?lhs s = (G s \\<longrightarrow> I s)\""], ["proof (prove)\nusing this:\n  (\\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV 0\n                   s.\n      \\<forall>t\\<ge>0.\n         (\\<forall>\\<tau>.\n             0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n             G (X \\<tau>)) \\<longrightarrow>\n         I (X t)) \\<longrightarrow>\n  G s \\<longrightarrow> I s\n  G s \\<longrightarrow> I s \\<Longrightarrow>\n  \\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV 0 s.\n     \\<forall>t\\<ge>0.\n        (\\<forall>\\<tau>.\n            0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n            G (X \\<tau>)) \\<longrightarrow>\n        I (X t)\n\ngoal (1 subgoal):\n 1. (\\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV 0\n                     s.\n        \\<forall>t\\<ge>0.\n           (\\<forall>\\<tau>.\n               0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n               G (X \\<tau>)) \\<longrightarrow>\n           I (X t)) =\n    (G s \\<longrightarrow> I s)", "by blast"], ["proof (state)\nthis:\n  (\\<forall>X\\<in>Sols (\\<lambda>t. f) (\\<lambda>s. {t. 0 \\<le> t}) UNIV 0\n                   s.\n      \\<forall>t\\<ge>0.\n         (\\<forall>\\<tau>.\n             0 \\<le> \\<tau> \\<and> \\<tau> \\<le> t \\<longrightarrow>\n             G (X \\<tau>)) \\<longrightarrow>\n         I (X t)) =\n  (G s \\<longrightarrow> I s)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma diff_inv_rule:\n  assumes \"P \\<le> {s. I s}\" and \"diff_invariant I f U S t\\<^sub>0 G\" and \"{s. I s} \\<le> Q\"\n  shows \"P \\<le> fb\\<^sub>\\<F> (x\\<acute>= f & G on U S @ t\\<^sub>0) Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<subseteq> fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 Q", "apply(rule ffb_g_orbital_inv[OF assms(1) _ assms(3)])"], ["proof (prove)\ngoal (1 subgoal):\n 1. {s. I s}\n    \\<subseteq> fb\\<^sub>\\<F> x\\<acute>=f & G on U S @ t\\<^sub>0 {s. I s}", "unfolding ffb_diff_inv"], ["proof (prove)\ngoal (1 subgoal):\n 1. diff_invariant I f U S t\\<^sub>0 G", "using assms(2)"], ["proof (prove)\nusing this:\n  diff_invariant I f U S t\\<^sub>0 G\n\ngoal (1 subgoal):\n 1. diff_invariant I f U S t\\<^sub>0 G", "."], ["", "end"]]}