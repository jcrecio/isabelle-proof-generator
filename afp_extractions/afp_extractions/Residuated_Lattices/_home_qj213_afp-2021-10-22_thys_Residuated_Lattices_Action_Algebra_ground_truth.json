{"file_name": "/home/qj213/afp-2021-10-22/thys/Residuated_Lattices/Action_Algebra.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Residuated_Lattices", "problem_names": ["lemma plus_sup: \"(+) = (\\<squnion>)\"", "lemma residual_r_refl: \"1 \\<le> x \\<rightarrow> x\"", "lemma residual_l_refl: \"1 \\<le> x \\<leftarrow> x\"", "lemma residual_l_pure_induction: \"(x \\<leftarrow> x)\\<^sup>\\<star> \\<le> x \\<leftarrow> x\"", "lemma residual_r_pure_induction: \"(x \\<rightarrow> x)\\<^sup>\\<star> \\<le> x \\<rightarrow> x\"", "lemma star_unfoldl: \"1 + x \\<cdot> x\\<^sup>\\<star> \\<le> x\\<^sup>\\<star>\"", "lemma star_mon [intro]: \"x \\<le> y \\<Longrightarrow> x\\<^sup>\\<star> \\<le> y\\<^sup>\\<star>\"", "lemma star_subdist': \"x\\<^sup>\\<star> \\<le> (x + y)\\<^sup>\\<star>\"", "lemma star_inductl: \"z + x \\<cdot> y \\<le> y \\<Longrightarrow> x\\<^sup>\\<star> \\<cdot> z \\<le> y\"", "lemma star_inductr: \"z + y \\<cdot> x \\<le> y \\<Longrightarrow> z \\<cdot> x\\<^sup>\\<star> \\<le> y\"", "lemma star_rtc_2: \"1 + y \\<cdot> y + x \\<le> y \\<Longrightarrow> x\\<^sup>\\<star> \\<le> y\""], "translations": [["", "lemma plus_sup: \"(+) = (\\<squnion>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (+) = (\\<squnion>)", "by (rule ext)+ (simp add: local.join.sup_unique)"], ["", "text \\<open>We first prove a reflexivity property for residuals.\\<close>"], ["", "lemma residual_r_refl: \"1 \\<le> x \\<rightarrow> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (1::'a) \\<le> x \\<rightarrow> x", "by (simp add: local.resrI)"], ["", "lemma residual_l_refl: \"1 \\<le> x \\<leftarrow> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (1::'a) \\<le> x \\<leftarrow> x", "by (simp add: local.reslI)"], ["", "text \\<open>We now derive pure induction laws for residuals.\\<close>"], ["", "lemma residual_l_pure_induction: \"(x \\<leftarrow> x)\\<^sup>\\<star> \\<le> x \\<leftarrow> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x \\<leftarrow> x)\\<^sup>\\<star> \\<le> x \\<leftarrow> x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (x \\<leftarrow> x)\\<^sup>\\<star> \\<le> x \\<leftarrow> x", "have \"1 + (x \\<leftarrow> x) \\<cdot> (x \\<leftarrow> x) + (x \\<leftarrow> x) \\<le> (x \\<leftarrow> x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (1::'a) + (x \\<leftarrow> x) \\<cdot> (x \\<leftarrow> x) +\n    (x \\<leftarrow> x)\n    \\<le> x \\<leftarrow> x", "using local.resl_antitoner local.resl_galois mult_assoc"], ["proof (prove)\nusing this:\n  ?x \\<le> ?y \\<longrightarrow> ?z \\<leftarrow> ?y \\<le> ?z \\<leftarrow> ?x\n  (?x \\<le> ?z \\<leftarrow> ?y) = (?x \\<cdot> ?y \\<le> ?z)\n  ?a \\<cdot> ?b \\<cdot> ?c = ?a \\<cdot> (?b \\<cdot> ?c)\n\ngoal (1 subgoal):\n 1. (1::'a) + (x \\<leftarrow> x) \\<cdot> (x \\<leftarrow> x) +\n    (x \\<leftarrow> x)\n    \\<le> x \\<leftarrow> x", "by auto"], ["proof (state)\nthis:\n  (1::'a) + (x \\<leftarrow> x) \\<cdot> (x \\<leftarrow> x) +\n  (x \\<leftarrow> x)\n  \\<le> x \\<leftarrow> x\n\ngoal (1 subgoal):\n 1. (x \\<leftarrow> x)\\<^sup>\\<star> \\<le> x \\<leftarrow> x", "thus ?thesis"], ["proof (prove)\nusing this:\n  (1::'a) + (x \\<leftarrow> x) \\<cdot> (x \\<leftarrow> x) +\n  (x \\<leftarrow> x)\n  \\<le> x \\<leftarrow> x\n\ngoal (1 subgoal):\n 1. (x \\<leftarrow> x)\\<^sup>\\<star> \\<le> x \\<leftarrow> x", "by (fact star_rtc2)"], ["proof (state)\nthis:\n  (x \\<leftarrow> x)\\<^sup>\\<star> \\<le> x \\<leftarrow> x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma residual_r_pure_induction: \"(x \\<rightarrow> x)\\<^sup>\\<star> \\<le> x \\<rightarrow> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x \\<rightarrow> x)\\<^sup>\\<star> \\<le> x \\<rightarrow> x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (x \\<rightarrow> x)\\<^sup>\\<star> \\<le> x \\<rightarrow> x", "have \"1 + (x \\<rightarrow> x) \\<cdot> (x \\<rightarrow> x) + (x \\<rightarrow> x) \\<le> (x \\<rightarrow> x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (1::'a) + (x \\<rightarrow> x) \\<cdot> (x \\<rightarrow> x) +\n    (x \\<rightarrow> x)\n    \\<le> x \\<rightarrow> x", "using local.resr_antitonel local.resr_galois mult_assoc"], ["proof (prove)\nusing this:\n  ?x \\<le> ?y \\<longrightarrow>\n  ?y \\<rightarrow> ?z \\<le> ?x \\<rightarrow> ?z\n  (?x \\<cdot> ?y \\<le> ?z) = (?y \\<le> ?x \\<rightarrow> ?z)\n  ?a \\<cdot> ?b \\<cdot> ?c = ?a \\<cdot> (?b \\<cdot> ?c)\n\ngoal (1 subgoal):\n 1. (1::'a) + (x \\<rightarrow> x) \\<cdot> (x \\<rightarrow> x) +\n    (x \\<rightarrow> x)\n    \\<le> x \\<rightarrow> x", "apply clarsimp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x y z.\n                x \\<le> y \\<longrightarrow>\n                y \\<rightarrow> z \\<le> x \\<rightarrow> z;\n     \\<And>x y z. (x \\<cdot> y \\<le> z) = (y \\<le> x \\<rightarrow> z);\n     \\<And>a b c. a \\<cdot> b \\<cdot> c = a \\<cdot> (b \\<cdot> c)\\<rbrakk>\n    \\<Longrightarrow> (1::'a) \\<le> x \\<rightarrow> x \\<and>\n                      x \\<rightarrow> x\n                      \\<le> (x \\<rightarrow> x) \\<rightarrow>\n                            x \\<rightarrow> x", "by (metis local.mult_oner residual_r_refl)"], ["proof (state)\nthis:\n  (1::'a) + (x \\<rightarrow> x) \\<cdot> (x \\<rightarrow> x) +\n  (x \\<rightarrow> x)\n  \\<le> x \\<rightarrow> x\n\ngoal (1 subgoal):\n 1. (x \\<rightarrow> x)\\<^sup>\\<star> \\<le> x \\<rightarrow> x", "thus ?thesis"], ["proof (prove)\nusing this:\n  (1::'a) + (x \\<rightarrow> x) \\<cdot> (x \\<rightarrow> x) +\n  (x \\<rightarrow> x)\n  \\<le> x \\<rightarrow> x\n\ngoal (1 subgoal):\n 1. (x \\<rightarrow> x)\\<^sup>\\<star> \\<le> x \\<rightarrow> x", "by (fact star_rtc2)"], ["proof (state)\nthis:\n  (x \\<rightarrow> x)\\<^sup>\\<star> \\<le> x \\<rightarrow> x\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Next we show that every action algebra is a Kleene\nalgebra. First, we derive the star unfold law and the star induction\nlaws in action algebra. Then we prove a subclass statement.\\<close>"], ["", "lemma star_unfoldl: \"1 + x \\<cdot> x\\<^sup>\\<star> \\<le> x\\<^sup>\\<star>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (1::'a) + x \\<cdot> x\\<^sup>\\<star> \\<le> x\\<^sup>\\<star>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (1::'a) + x \\<cdot> x\\<^sup>\\<star> \\<le> x\\<^sup>\\<star>", "have \"x \\<cdot> x\\<^sup>\\<star> \\<le> x\\<^sup>\\<star>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<cdot> x\\<^sup>\\<star> \\<le> x\\<^sup>\\<star>", "by (meson local.dual_order.trans local.join.le_sup_iff local.mult_isor local.star_rtc1)"], ["proof (state)\nthis:\n  x \\<cdot> x\\<^sup>\\<star> \\<le> x\\<^sup>\\<star>\n\ngoal (1 subgoal):\n 1. (1::'a) + x \\<cdot> x\\<^sup>\\<star> \\<le> x\\<^sup>\\<star>", "thus ?thesis"], ["proof (prove)\nusing this:\n  x \\<cdot> x\\<^sup>\\<star> \\<le> x\\<^sup>\\<star>\n\ngoal (1 subgoal):\n 1. (1::'a) + x \\<cdot> x\\<^sup>\\<star> \\<le> x\\<^sup>\\<star>", "using local.star_rtc1"], ["proof (prove)\nusing this:\n  x \\<cdot> x\\<^sup>\\<star> \\<le> x\\<^sup>\\<star>\n  (1::'a) + ?x\\<^sup>\\<star> \\<cdot> ?x\\<^sup>\\<star> + ?x\n  \\<le> ?x\\<^sup>\\<star>\n\ngoal (1 subgoal):\n 1. (1::'a) + x \\<cdot> x\\<^sup>\\<star> \\<le> x\\<^sup>\\<star>", "by auto"], ["proof (state)\nthis:\n  (1::'a) + x \\<cdot> x\\<^sup>\\<star> \\<le> x\\<^sup>\\<star>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma star_mon [intro]: \"x \\<le> y \\<Longrightarrow> x\\<^sup>\\<star> \\<le> y\\<^sup>\\<star>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<le> y \\<Longrightarrow> x\\<^sup>\\<star> \\<le> y\\<^sup>\\<star>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<le> y \\<Longrightarrow> x\\<^sup>\\<star> \\<le> y\\<^sup>\\<star>", "assume \"x \\<le> y\""], ["proof (state)\nthis:\n  x \\<le> y\n\ngoal (1 subgoal):\n 1. x \\<le> y \\<Longrightarrow> x\\<^sup>\\<star> \\<le> y\\<^sup>\\<star>", "hence \"x \\<le> y\\<^sup>\\<star>\""], ["proof (prove)\nusing this:\n  x \\<le> y\n\ngoal (1 subgoal):\n 1. x \\<le> y\\<^sup>\\<star>", "by (meson local.dual_order.trans local.join.le_supE local.star_rtc1)"], ["proof (state)\nthis:\n  x \\<le> y\\<^sup>\\<star>\n\ngoal (1 subgoal):\n 1. x \\<le> y \\<Longrightarrow> x\\<^sup>\\<star> \\<le> y\\<^sup>\\<star>", "hence \"1 + x + y\\<^sup>\\<star> \\<cdot> y\\<^sup>\\<star> \\<le> y\\<^sup>\\<star>\""], ["proof (prove)\nusing this:\n  x \\<le> y\\<^sup>\\<star>\n\ngoal (1 subgoal):\n 1. (1::'a) + x + y\\<^sup>\\<star> \\<cdot> y\\<^sup>\\<star>\n    \\<le> y\\<^sup>\\<star>", "using local.star_rtc1"], ["proof (prove)\nusing this:\n  x \\<le> y\\<^sup>\\<star>\n  (1::'a) + ?x\\<^sup>\\<star> \\<cdot> ?x\\<^sup>\\<star> + ?x\n  \\<le> ?x\\<^sup>\\<star>\n\ngoal (1 subgoal):\n 1. (1::'a) + x + y\\<^sup>\\<star> \\<cdot> y\\<^sup>\\<star>\n    \\<le> y\\<^sup>\\<star>", "by auto"], ["proof (state)\nthis:\n  (1::'a) + x + y\\<^sup>\\<star> \\<cdot> y\\<^sup>\\<star>\n  \\<le> y\\<^sup>\\<star>\n\ngoal (1 subgoal):\n 1. x \\<le> y \\<Longrightarrow> x\\<^sup>\\<star> \\<le> y\\<^sup>\\<star>", "thus \"x\\<^sup>\\<star> \\<le> y\\<^sup>\\<star>\""], ["proof (prove)\nusing this:\n  (1::'a) + x + y\\<^sup>\\<star> \\<cdot> y\\<^sup>\\<star>\n  \\<le> y\\<^sup>\\<star>\n\ngoal (1 subgoal):\n 1. x\\<^sup>\\<star> \\<le> y\\<^sup>\\<star>", "by (simp add: local.star_rtc2)"], ["proof (state)\nthis:\n  x\\<^sup>\\<star> \\<le> y\\<^sup>\\<star>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma star_subdist': \"x\\<^sup>\\<star> \\<le> (x + y)\\<^sup>\\<star>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x\\<^sup>\\<star> \\<le> (x + y)\\<^sup>\\<star>", "by force"], ["", "lemma star_inductl: \"z + x \\<cdot> y \\<le> y \\<Longrightarrow> x\\<^sup>\\<star> \\<cdot> z \\<le> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z + x \\<cdot> y \\<le> y \\<Longrightarrow>\n    x\\<^sup>\\<star> \\<cdot> z \\<le> y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. z + x \\<cdot> y \\<le> y \\<Longrightarrow>\n    x\\<^sup>\\<star> \\<cdot> z \\<le> y", "assume hyp: \"z + x \\<cdot> y \\<le> y\""], ["proof (state)\nthis:\n  z + x \\<cdot> y \\<le> y\n\ngoal (1 subgoal):\n 1. z + x \\<cdot> y \\<le> y \\<Longrightarrow>\n    x\\<^sup>\\<star> \\<cdot> z \\<le> y", "hence \"x \\<le> y \\<leftarrow> y\""], ["proof (prove)\nusing this:\n  z + x \\<cdot> y \\<le> y\n\ngoal (1 subgoal):\n 1. x \\<le> y \\<leftarrow> y", "by (simp add: local.resl_galois)"], ["proof (state)\nthis:\n  x \\<le> y \\<leftarrow> y\n\ngoal (1 subgoal):\n 1. z + x \\<cdot> y \\<le> y \\<Longrightarrow>\n    x\\<^sup>\\<star> \\<cdot> z \\<le> y", "hence \"x\\<^sup>\\<star> \\<le> (y \\<leftarrow> y)\\<^sup>\\<star>\""], ["proof (prove)\nusing this:\n  x \\<le> y \\<leftarrow> y\n\ngoal (1 subgoal):\n 1. x\\<^sup>\\<star> \\<le> (y \\<leftarrow> y)\\<^sup>\\<star>", "by (fact star_mon)"], ["proof (state)\nthis:\n  x\\<^sup>\\<star> \\<le> (y \\<leftarrow> y)\\<^sup>\\<star>\n\ngoal (1 subgoal):\n 1. z + x \\<cdot> y \\<le> y \\<Longrightarrow>\n    x\\<^sup>\\<star> \\<cdot> z \\<le> y", "hence \"x\\<^sup>\\<star> \\<le> y \\<leftarrow> y\""], ["proof (prove)\nusing this:\n  x\\<^sup>\\<star> \\<le> (y \\<leftarrow> y)\\<^sup>\\<star>\n\ngoal (1 subgoal):\n 1. x\\<^sup>\\<star> \\<le> y \\<leftarrow> y", "using local.order_trans residual_l_pure_induction"], ["proof (prove)\nusing this:\n  x\\<^sup>\\<star> \\<le> (y \\<leftarrow> y)\\<^sup>\\<star>\n  \\<lbrakk>?x \\<le> ?y; ?y \\<le> ?z\\<rbrakk> \\<Longrightarrow> ?x \\<le> ?z\n  (?x \\<leftarrow> ?x)\\<^sup>\\<star> \\<le> ?x \\<leftarrow> ?x\n\ngoal (1 subgoal):\n 1. x\\<^sup>\\<star> \\<le> y \\<leftarrow> y", "by blast"], ["proof (state)\nthis:\n  x\\<^sup>\\<star> \\<le> y \\<leftarrow> y\n\ngoal (1 subgoal):\n 1. z + x \\<cdot> y \\<le> y \\<Longrightarrow>\n    x\\<^sup>\\<star> \\<cdot> z \\<le> y", "hence \"x\\<^sup>\\<star> \\<cdot> y \\<le> y\""], ["proof (prove)\nusing this:\n  x\\<^sup>\\<star> \\<le> y \\<leftarrow> y\n\ngoal (1 subgoal):\n 1. x\\<^sup>\\<star> \\<cdot> y \\<le> y", "by (simp add: local.resl_galois)"], ["proof (state)\nthis:\n  x\\<^sup>\\<star> \\<cdot> y \\<le> y\n\ngoal (1 subgoal):\n 1. z + x \\<cdot> y \\<le> y \\<Longrightarrow>\n    x\\<^sup>\\<star> \\<cdot> z \\<le> y", "thus \"x\\<^sup>\\<star> \\<cdot> z \\<le> y\""], ["proof (prove)\nusing this:\n  x\\<^sup>\\<star> \\<cdot> y \\<le> y\n\ngoal (1 subgoal):\n 1. x\\<^sup>\\<star> \\<cdot> z \\<le> y", "by (meson hyp local.dual_order.trans local.join.le_supE local.mult_isol)"], ["proof (state)\nthis:\n  x\\<^sup>\\<star> \\<cdot> z \\<le> y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma star_inductr: \"z + y \\<cdot> x \\<le> y \\<Longrightarrow> z \\<cdot> x\\<^sup>\\<star> \\<le> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z + y \\<cdot> x \\<le> y \\<Longrightarrow>\n    z \\<cdot> x\\<^sup>\\<star> \\<le> y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. z + y \\<cdot> x \\<le> y \\<Longrightarrow>\n    z \\<cdot> x\\<^sup>\\<star> \\<le> y", "assume hyp: \"z + y \\<cdot> x \\<le> y\""], ["proof (state)\nthis:\n  z + y \\<cdot> x \\<le> y\n\ngoal (1 subgoal):\n 1. z + y \\<cdot> x \\<le> y \\<Longrightarrow>\n    z \\<cdot> x\\<^sup>\\<star> \\<le> y", "hence \"x \\<le> y \\<rightarrow> y\""], ["proof (prove)\nusing this:\n  z + y \\<cdot> x \\<le> y\n\ngoal (1 subgoal):\n 1. x \\<le> y \\<rightarrow> y", "by (simp add: resr_galois)"], ["proof (state)\nthis:\n  x \\<le> y \\<rightarrow> y\n\ngoal (1 subgoal):\n 1. z + y \\<cdot> x \\<le> y \\<Longrightarrow>\n    z \\<cdot> x\\<^sup>\\<star> \\<le> y", "hence \"x\\<^sup>\\<star> \\<le> (y \\<rightarrow> y)\\<^sup>\\<star>\""], ["proof (prove)\nusing this:\n  x \\<le> y \\<rightarrow> y\n\ngoal (1 subgoal):\n 1. x\\<^sup>\\<star> \\<le> (y \\<rightarrow> y)\\<^sup>\\<star>", "by (fact star_mon)"], ["proof (state)\nthis:\n  x\\<^sup>\\<star> \\<le> (y \\<rightarrow> y)\\<^sup>\\<star>\n\ngoal (1 subgoal):\n 1. z + y \\<cdot> x \\<le> y \\<Longrightarrow>\n    z \\<cdot> x\\<^sup>\\<star> \\<le> y", "hence \"x\\<^sup>\\<star> \\<le> y \\<rightarrow> y\""], ["proof (prove)\nusing this:\n  x\\<^sup>\\<star> \\<le> (y \\<rightarrow> y)\\<^sup>\\<star>\n\ngoal (1 subgoal):\n 1. x\\<^sup>\\<star> \\<le> y \\<rightarrow> y", "by (metis order_trans residual_r_pure_induction)"], ["proof (state)\nthis:\n  x\\<^sup>\\<star> \\<le> y \\<rightarrow> y\n\ngoal (1 subgoal):\n 1. z + y \\<cdot> x \\<le> y \\<Longrightarrow>\n    z \\<cdot> x\\<^sup>\\<star> \\<le> y", "hence \"y \\<cdot> x\\<^sup>\\<star> \\<le> y\""], ["proof (prove)\nusing this:\n  x\\<^sup>\\<star> \\<le> y \\<rightarrow> y\n\ngoal (1 subgoal):\n 1. y \\<cdot> x\\<^sup>\\<star> \\<le> y", "by (simp add: local.resr_galois)"], ["proof (state)\nthis:\n  y \\<cdot> x\\<^sup>\\<star> \\<le> y\n\ngoal (1 subgoal):\n 1. z + y \\<cdot> x \\<le> y \\<Longrightarrow>\n    z \\<cdot> x\\<^sup>\\<star> \\<le> y", "thus \"z \\<cdot> x\\<^sup>\\<star> \\<le> y\""], ["proof (prove)\nusing this:\n  y \\<cdot> x\\<^sup>\\<star> \\<le> y\n\ngoal (1 subgoal):\n 1. z \\<cdot> x\\<^sup>\\<star> \\<le> y", "by (meson hyp local.join.le_supE local.order_trans local.resl_galois)"], ["proof (state)\nthis:\n  z \\<cdot> x\\<^sup>\\<star> \\<le> y\n\ngoal:\nNo subgoals!", "qed"], ["", "subclass kleene_algebra"], ["proof (prove)\ngoal (1 subgoal):\n 1. class.kleene_algebra (+) (\\<cdot>) (1::'a) (0::'a) (\\<le>) (<) star", "proof"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x. (1::'a) + x \\<cdot> x\\<^sup>\\<star> \\<le> x\\<^sup>\\<star>\n 2. \\<And>z x y.\n       z + x \\<cdot> y \\<le> y \\<Longrightarrow>\n       x\\<^sup>\\<star> \\<cdot> z \\<le> y\n 3. \\<And>z y x.\n       z + y \\<cdot> x \\<le> y \\<Longrightarrow>\n       z \\<cdot> x\\<^sup>\\<star> \\<le> y", "fix x y z"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x. (1::'a) + x \\<cdot> x\\<^sup>\\<star> \\<le> x\\<^sup>\\<star>\n 2. \\<And>z x y.\n       z + x \\<cdot> y \\<le> y \\<Longrightarrow>\n       x\\<^sup>\\<star> \\<cdot> z \\<le> y\n 3. \\<And>z y x.\n       z + y \\<cdot> x \\<le> y \\<Longrightarrow>\n       z \\<cdot> x\\<^sup>\\<star> \\<le> y", "show \"1 + x \\<cdot> x\\<^sup>\\<star> \\<le> x\\<^sup>\\<star>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (1::'a) + x \\<cdot> x\\<^sup>\\<star> \\<le> x\\<^sup>\\<star>", "using local.star_unfoldl"], ["proof (prove)\nusing this:\n  (1::'a) + ?x \\<cdot> ?x\\<^sup>\\<star> \\<le> ?x\\<^sup>\\<star>\n\ngoal (1 subgoal):\n 1. (1::'a) + x \\<cdot> x\\<^sup>\\<star> \\<le> x\\<^sup>\\<star>", "by blast"], ["proof (state)\nthis:\n  (1::'a) + x \\<cdot> x\\<^sup>\\<star> \\<le> x\\<^sup>\\<star>\n\ngoal (2 subgoals):\n 1. \\<And>z x y.\n       z + x \\<cdot> y \\<le> y \\<Longrightarrow>\n       x\\<^sup>\\<star> \\<cdot> z \\<le> y\n 2. \\<And>z y x.\n       z + y \\<cdot> x \\<le> y \\<Longrightarrow>\n       z \\<cdot> x\\<^sup>\\<star> \\<le> y", "show \"z + x \\<cdot> y \\<le> y \\<Longrightarrow> x\\<^sup>\\<star> \\<cdot> z \\<le> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z + x \\<cdot> y \\<le> y \\<Longrightarrow>\n    x\\<^sup>\\<star> \\<cdot> z \\<le> y", "by (simp add: local.star_inductl)"], ["proof (state)\nthis:\n  z + x \\<cdot> y \\<le> y \\<Longrightarrow>\n  x\\<^sup>\\<star> \\<cdot> z \\<le> y\n\ngoal (1 subgoal):\n 1. \\<And>z y x.\n       z + y \\<cdot> x \\<le> y \\<Longrightarrow>\n       z \\<cdot> x\\<^sup>\\<star> \\<le> y", "show \"z + y \\<cdot> x \\<le> y \\<Longrightarrow> z \\<cdot> x\\<^sup>\\<star> \\<le> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z + y \\<cdot> x \\<le> y \\<Longrightarrow>\n    z \\<cdot> x\\<^sup>\\<star> \\<le> y", "by (simp add: star_inductr)"], ["proof (state)\nthis:\n  z + y \\<cdot> x \\<le> y \\<Longrightarrow>\n  z \\<cdot> x\\<^sup>\\<star> \\<le> y\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "(* action_algebra *)"], ["", "subsection \\<open>Equational Action Algebras\\<close>"], ["", "text \\<open>The induction axioms of Kleene algebras are universal Horn\nformulas. This is unavoidable, because due to a well known result of\nRedko, there is no finite equational axiomatisation for the equational\ntheory of regular expressions.\n\nAction algebras, in contrast, admit a finite equational\naxiomatization, as Pratt has shown. We now formalise this\nresult. Consequently, the equational action algebra axioms, which\nimply those based on Galois connections, which in turn imply those of\nKleene algebras, are complete with respect to the equational theory of\nregular expressions. However, this completeness result does not\naccount for residuation.\\<close>"], ["", "class equational_action_algebra = residuated_sup_lgroupoid + dioid_one_zero + star_op +\n  assumes star_ax: \"1 + x\\<^sup>\\<star> \\<cdot> x\\<^sup>\\<star> + x \\<le> x\\<^sup>\\<star>\"\n  and star_subdist: \"x\\<^sup>\\<star> \\<le> (x + y)\\<^sup>\\<star>\"\n  and right_pure_induction: \"(x \\<rightarrow> x)\\<^sup>\\<star> \\<le> x \\<rightarrow> x\"\nbegin"], ["", "text \\<open>We now show that the equational axioms of action algebra\nsatisfy those based on the Galois connections. Since we can use our\ncorrespondence between the two variants of residuated semilattice, it\nremains to derive the second reflexive transitive closure axiom for\nthe star, essentially copying Pratt's proof step by step. We then\nprove a subclass statement.\\<close>"], ["", "lemma star_rtc_2: \"1 + y \\<cdot> y + x \\<le> y \\<Longrightarrow> x\\<^sup>\\<star> \\<le> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (1::'a) + y \\<cdot> y + x \\<le> y \\<Longrightarrow>\n    x\\<^sup>\\<star> \\<le> y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (1::'a) + y \\<cdot> y + x \\<le> y \\<Longrightarrow>\n    x\\<^sup>\\<star> \\<le> y", "assume \"1 + y \\<cdot> y + x \\<le> y\""], ["proof (state)\nthis:\n  (1::'a) + y \\<cdot> y + x \\<le> y\n\ngoal (1 subgoal):\n 1. (1::'a) + y \\<cdot> y + x \\<le> y \\<Longrightarrow>\n    x\\<^sup>\\<star> \\<le> y", "hence \"1 \\<le> y\" and \"x \\<le> y\" and \"y \\<cdot> y \\<le> y\""], ["proof (prove)\nusing this:\n  (1::'a) + y \\<cdot> y + x \\<le> y\n\ngoal (1 subgoal):\n 1. (1::'a) \\<le> y &&& x \\<le> y &&& y \\<cdot> y \\<le> y", "by auto"], ["proof (state)\nthis:\n  (1::'a) \\<le> y\n  x \\<le> y\n  y \\<cdot> y \\<le> y\n\ngoal (1 subgoal):\n 1. (1::'a) + y \\<cdot> y + x \\<le> y \\<Longrightarrow>\n    x\\<^sup>\\<star> \\<le> y", "hence \"y \\<le> y \\<rightarrow> y\" and \"x \\<le> y \\<rightarrow> y\""], ["proof (prove)\nusing this:\n  (1::'a) \\<le> y\n  x \\<le> y\n  y \\<cdot> y \\<le> y\n\ngoal (1 subgoal):\n 1. y \\<le> y \\<rightarrow> y &&& x \\<le> y \\<rightarrow> y", "using local.order_trans"], ["proof (prove)\nusing this:\n  (1::'a) \\<le> y\n  x \\<le> y\n  y \\<cdot> y \\<le> y\n  \\<lbrakk>?x \\<le> ?y; ?y \\<le> ?z\\<rbrakk> \\<Longrightarrow> ?x \\<le> ?z\n\ngoal (1 subgoal):\n 1. y \\<le> y \\<rightarrow> y &&& x \\<le> y \\<rightarrow> y", "by blast+"], ["proof (state)\nthis:\n  y \\<le> y \\<rightarrow> y\n  x \\<le> y \\<rightarrow> y\n\ngoal (1 subgoal):\n 1. (1::'a) + y \\<cdot> y + x \\<le> y \\<Longrightarrow>\n    x\\<^sup>\\<star> \\<le> y", "hence \"x\\<^sup>\\<star> \\<le> (y \\<rightarrow> y)\\<^sup>\\<star>\""], ["proof (prove)\nusing this:\n  y \\<le> y \\<rightarrow> y\n  x \\<le> y \\<rightarrow> y\n\ngoal (1 subgoal):\n 1. x\\<^sup>\\<star> \\<le> (y \\<rightarrow> y)\\<^sup>\\<star>", "by (metis local.join.sup.absorb2 local.star_subdist)"], ["proof (state)\nthis:\n  x\\<^sup>\\<star> \\<le> (y \\<rightarrow> y)\\<^sup>\\<star>\n\ngoal (1 subgoal):\n 1. (1::'a) + y \\<cdot> y + x \\<le> y \\<Longrightarrow>\n    x\\<^sup>\\<star> \\<le> y", "hence \"x\\<^sup>\\<star> \\<le> y \\<rightarrow> y\""], ["proof (prove)\nusing this:\n  x\\<^sup>\\<star> \\<le> (y \\<rightarrow> y)\\<^sup>\\<star>\n\ngoal (1 subgoal):\n 1. x\\<^sup>\\<star> \\<le> y \\<rightarrow> y", "by (metis order_trans right_pure_induction)"], ["proof (state)\nthis:\n  x\\<^sup>\\<star> \\<le> y \\<rightarrow> y\n\ngoal (1 subgoal):\n 1. (1::'a) + y \\<cdot> y + x \\<le> y \\<Longrightarrow>\n    x\\<^sup>\\<star> \\<le> y", "hence \"y \\<cdot> x\\<^sup>\\<star> \\<le> y\""], ["proof (prove)\nusing this:\n  x\\<^sup>\\<star> \\<le> y \\<rightarrow> y\n\ngoal (1 subgoal):\n 1. y \\<cdot> x\\<^sup>\\<star> \\<le> y", "by (simp add: local.resr_galois)"], ["proof (state)\nthis:\n  y \\<cdot> x\\<^sup>\\<star> \\<le> y\n\ngoal (1 subgoal):\n 1. (1::'a) + y \\<cdot> y + x \\<le> y \\<Longrightarrow>\n    x\\<^sup>\\<star> \\<le> y", "thus \"x\\<^sup>\\<star> \\<le> y\""], ["proof (prove)\nusing this:\n  y \\<cdot> x\\<^sup>\\<star> \\<le> y\n\ngoal (1 subgoal):\n 1. x\\<^sup>\\<star> \\<le> y", "by (metis \\<open>1 \\<le> y\\<close> local.dual_order.trans local.mult_onel local.resl_galois)"], ["proof (state)\nthis:\n  x\\<^sup>\\<star> \\<le> y\n\ngoal:\nNo subgoals!", "qed"], ["", "subclass action_algebra"], ["proof (prove)\ngoal (1 subgoal):\n 1. class.action_algebra (+) (\\<cdot>) (1::'a) (0::'a) (\\<le>) (<)\n     (\\<squnion>) (\\<leftarrow>) (\\<rightarrow>) star", "by (unfold_locales, metis star_ax, metis star_rtc_2)"], ["", "end"], ["", "(* equational_action_algebra *)"], ["", "text \\<open>\nConversely, every action algebra satisfies the equational axioms of\nequational action algebras.\n\nBecause the subclass relation must be acyclic in Isabelle, we can only\nestablish this for the corresponding locales. Again this proof is\nbased on the residuated semilattice result.\n\\<close>"], ["", "sublocale action_algebra \\<subseteq> equational_action_algebra"], ["proof (prove)\ngoal (1 subgoal):\n 1. class.equational_action_algebra (+) (\\<cdot>) (1::'a) (0::'a) (\\<le>)\n     (<) (\\<squnion>) (\\<leftarrow>) (\\<rightarrow>) star", "by (unfold_locales, metis star_rtc1, metis star_subdist, metis residual_r_pure_induction)"], ["", "subsection \\<open>Another Variant\\<close>"], ["", "text \\<open>Finally we show that Pratt and Kozen's star axioms generate\nprecisely the same theory.\\<close>"], ["", "class action_algebra_var = residuated_sup_lgroupoid + dioid_one_zero + star_op +\n  assumes star_unfold': \"1 + x \\<cdot> x\\<^sup>\\<star> \\<le> x\\<^sup>\\<star>\"\n  and star_inductl': \"z + x \\<cdot> y \\<le> y \\<Longrightarrow> x\\<^sup>\\<star> \\<cdot> z \\<le> y\"\n  and star_inductr': \"z + y \\<cdot> x \\<le> y \\<Longrightarrow> z \\<cdot> x\\<^sup>\\<star>  \\<le> y\"\nbegin"], ["", "subclass kleene_algebra"], ["proof (prove)\ngoal (1 subgoal):\n 1. class.kleene_algebra (+) (\\<cdot>) (1::'a) (0::'a) (\\<le>) (<) star", "by (unfold_locales, metis star_unfold', metis star_inductl', metis star_inductr')"], ["", "subclass action_algebra"], ["proof (prove)\ngoal (1 subgoal):\n 1. class.action_algebra (+) (\\<cdot>) (1::'a) (0::'a) (\\<le>) (<)\n     (\\<squnion>) (\\<leftarrow>) (\\<rightarrow>) star", "by (unfold_locales, metis add.commute less_eq_def order_refl star_ext star_plus_one star_trans_eq, metis add.assoc add.commute star_rtc_least)"], ["", "end"], ["", "sublocale action_algebra \\<subseteq> action_algebra_var"], ["proof (prove)\ngoal (1 subgoal):\n 1. class.action_algebra_var (+) (\\<cdot>) (1::'a) (0::'a) (\\<le>) (<)\n     (\\<squnion>) (\\<leftarrow>) (\\<rightarrow>) star", "by (unfold_locales, metis star_unfoldl, metis star_inductl, metis star_inductr)"], ["", "end"]]}