{"file_name": "/home/qj213/afp-2021-10-22/thys/Three_Circles/Normal_Poly.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Three_Circles", "problem_names": ["lemma normal_non_zero: \"normal_poly p \\<Longrightarrow> p \\<noteq> 0\"", "lemma normal_coeff_nonneg: \"normal_poly p \\<Longrightarrow> 0 \\<le> coeff p i\"", "lemma normal_poly_coeff_mult: \n    \"normal_poly p \\<Longrightarrow> coeff p i * coeff p (i+2) \\<le> (coeff p (i+1))^2\"", "lemma normal_poly_pos_interval: \n    \"normal_poly p \\<Longrightarrow> i \\<le> j \\<Longrightarrow> j \\<le> k \\<Longrightarrow> 0 < coeff p i \\<Longrightarrow> 0 < coeff p k \n      \\<Longrightarrow> 0 < coeff p j\"", "lemma normal_polyI:\n  assumes \"(p \\<noteq> 0)\"\n      and \"(\\<And> i. 0 \\<le> coeff p i)\"\n      and \"(\\<And> i. coeff p i * coeff p (i+2) \\<le> (coeff p (i+1))^2)\"\n      and \"(\\<And> i j k. i \\<le> j \\<Longrightarrow> j \\<le> k \\<Longrightarrow> 0 < coeff p i \\<Longrightarrow> 0 < coeff p k \\<Longrightarrow> 0 < coeff p j)\"\n    shows \"normal_poly p\"", "lemma linear_normal_iff: \n  fixes x::real \n  shows \"normal_poly [:-x, 1:] \\<longleftrightarrow> x \\<le> 0\"", "lemma quadratic_normal_iff: \n  fixes z::complex \n  shows \"normal_poly [:(cmod z)\\<^sup>2, -2*Re z, 1:] \n          \\<longleftrightarrow> Re z \\<le> 0 \\<and> 4*(Re z)^2 \\<ge> (cmod z)^2\"", "lemma normal_of_no_zero_root: \n  fixes f::\"real poly\" \n  assumes hzero: \"poly f 0 \\<noteq> 0\" and hdeg: \"i \\<le> degree f\" \n    and hnorm: \"normal_poly f\"\n  shows \"0 < coeff f i\"", "lemma normal_divide_x: \n  fixes f::\"real poly\" \n  assumes hnorm: \"normal_poly (f*[:0,1:])\"\n  shows \"normal_poly f\"", "lemma normal_mult_x: \n  fixes f::\"real poly\" \n  assumes hnorm: \"normal_poly f\"\n  shows \"normal_poly (f * [:0, 1:])\"", "lemma normal_poly_general_coeff_mult: \n  fixes f::\"real poly\" \n  assumes \"normal_poly f\" and \"h \\<le> j\"\n  shows \"coeff f (h+1) * coeff f (j+1) \\<ge> coeff f h * coeff f (j+2)\"", "lemma normal_mult: \n  fixes f g::\"real poly\"\n  assumes hf: \"normal_poly f\" and hg: \"normal_poly g\"\n  defines \"df \\<equiv> degree f\" and \"dg \\<equiv> degree g\"\n  shows \"normal_poly (f*g)\"", "lemma normal_poly_of_roots: \n  fixes p::\"real poly\"\n  assumes \"\\<And>z. poly (map_poly complex_of_real p) z = 0 \n        \\<Longrightarrow> Re z \\<le> 0 \\<and> 4*(Re z)^2 \\<ge> (cmod z)^2\"\n      and \"lead_coeff p = 1\"\n  shows \"normal_poly p\"", "lemma normal_changes: \n  fixes f::\"real poly\"\n  assumes hf: \"normal_poly f\" and hx: \"x > 0\"\n  defines \"df \\<equiv> degree f\"\n  shows \"changes (coeffs (f*[:-x,1:])) = 1\""], "translations": [["", "lemma normal_non_zero: \"normal_poly p \\<Longrightarrow> p \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. normal_poly p \\<Longrightarrow> p \\<noteq> 0", "using normal_poly_def"], ["proof (prove)\nusing this:\n  normal_poly ?p \\<equiv>\n  ?p \\<noteq> 0 \\<and>\n  (\\<forall>i. (0::?'a) \\<le> coeff ?p i) \\<and>\n  (\\<forall>i.\n      coeff ?p i * coeff ?p (i + 2) \\<le> (coeff ?p (i + 1))\\<^sup>2) \\<and>\n  (\\<forall>i j k.\n      i \\<le> j \\<longrightarrow>\n      j \\<le> k \\<longrightarrow>\n      (0::?'a) < coeff ?p i \\<longrightarrow>\n      (0::?'a) < coeff ?p k \\<longrightarrow> (0::?'a) < coeff ?p j)\n\ngoal (1 subgoal):\n 1. normal_poly p \\<Longrightarrow> p \\<noteq> 0", "by blast"], ["", "lemma normal_coeff_nonneg: \"normal_poly p \\<Longrightarrow> 0 \\<le> coeff p i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. normal_poly p \\<Longrightarrow> (0::'a) \\<le> coeff p i", "using normal_poly_def"], ["proof (prove)\nusing this:\n  normal_poly ?p \\<equiv>\n  ?p \\<noteq> 0 \\<and>\n  (\\<forall>i. (0::?'a) \\<le> coeff ?p i) \\<and>\n  (\\<forall>i.\n      coeff ?p i * coeff ?p (i + 2) \\<le> (coeff ?p (i + 1))\\<^sup>2) \\<and>\n  (\\<forall>i j k.\n      i \\<le> j \\<longrightarrow>\n      j \\<le> k \\<longrightarrow>\n      (0::?'a) < coeff ?p i \\<longrightarrow>\n      (0::?'a) < coeff ?p k \\<longrightarrow> (0::?'a) < coeff ?p j)\n\ngoal (1 subgoal):\n 1. normal_poly p \\<Longrightarrow> (0::'a) \\<le> coeff p i", "by metis"], ["", "lemma normal_poly_coeff_mult: \n    \"normal_poly p \\<Longrightarrow> coeff p i * coeff p (i+2) \\<le> (coeff p (i+1))^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. normal_poly p \\<Longrightarrow>\n    coeff p i * coeff p (i + 2) \\<le> (coeff p (i + 1))\\<^sup>2", "using normal_poly_def"], ["proof (prove)\nusing this:\n  normal_poly ?p \\<equiv>\n  ?p \\<noteq> 0 \\<and>\n  (\\<forall>i. (0::?'a) \\<le> coeff ?p i) \\<and>\n  (\\<forall>i.\n      coeff ?p i * coeff ?p (i + 2) \\<le> (coeff ?p (i + 1))\\<^sup>2) \\<and>\n  (\\<forall>i j k.\n      i \\<le> j \\<longrightarrow>\n      j \\<le> k \\<longrightarrow>\n      (0::?'a) < coeff ?p i \\<longrightarrow>\n      (0::?'a) < coeff ?p k \\<longrightarrow> (0::?'a) < coeff ?p j)\n\ngoal (1 subgoal):\n 1. normal_poly p \\<Longrightarrow>\n    coeff p i * coeff p (i + 2) \\<le> (coeff p (i + 1))\\<^sup>2", "by blast"], ["", "lemma normal_poly_pos_interval: \n    \"normal_poly p \\<Longrightarrow> i \\<le> j \\<Longrightarrow> j \\<le> k \\<Longrightarrow> 0 < coeff p i \\<Longrightarrow> 0 < coeff p k \n      \\<Longrightarrow> 0 < coeff p j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>normal_poly p; i \\<le> j; j \\<le> k; (0::'a) < coeff p i;\n     (0::'a) < coeff p k\\<rbrakk>\n    \\<Longrightarrow> (0::'a) < coeff p j", "using normal_poly_def"], ["proof (prove)\nusing this:\n  normal_poly ?p \\<equiv>\n  ?p \\<noteq> 0 \\<and>\n  (\\<forall>i. (0::?'a) \\<le> coeff ?p i) \\<and>\n  (\\<forall>i.\n      coeff ?p i * coeff ?p (i + 2) \\<le> (coeff ?p (i + 1))\\<^sup>2) \\<and>\n  (\\<forall>i j k.\n      i \\<le> j \\<longrightarrow>\n      j \\<le> k \\<longrightarrow>\n      (0::?'a) < coeff ?p i \\<longrightarrow>\n      (0::?'a) < coeff ?p k \\<longrightarrow> (0::?'a) < coeff ?p j)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>normal_poly p; i \\<le> j; j \\<le> k; (0::'a) < coeff p i;\n     (0::'a) < coeff p k\\<rbrakk>\n    \\<Longrightarrow> (0::'a) < coeff p j", "by blast"], ["", "lemma normal_polyI:\n  assumes \"(p \\<noteq> 0)\"\n      and \"(\\<And> i. 0 \\<le> coeff p i)\"\n      and \"(\\<And> i. coeff p i * coeff p (i+2) \\<le> (coeff p (i+1))^2)\"\n      and \"(\\<And> i j k. i \\<le> j \\<Longrightarrow> j \\<le> k \\<Longrightarrow> 0 < coeff p i \\<Longrightarrow> 0 < coeff p k \\<Longrightarrow> 0 < coeff p j)\"\n    shows \"normal_poly p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. normal_poly p", "using assms"], ["proof (prove)\nusing this:\n  p \\<noteq> 0\n  (0::'a) \\<le> coeff p ?i\n  coeff p ?i * coeff p (?i + 2) \\<le> (coeff p (?i + 1))\\<^sup>2\n  \\<lbrakk>?i \\<le> ?j; ?j \\<le> ?k; (0::'a) < coeff p ?i;\n   (0::'a) < coeff p ?k\\<rbrakk>\n  \\<Longrightarrow> (0::'a) < coeff p ?j\n\ngoal (1 subgoal):\n 1. normal_poly p", "by (force simp: normal_poly_def)"], ["", "lemma linear_normal_iff: \n  fixes x::real \n  shows \"normal_poly [:-x, 1:] \\<longleftrightarrow> x \\<le> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. normal_poly [:- x, 1:] = (x \\<le> 0)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. normal_poly [:- x, 1:] \\<Longrightarrow> x \\<le> 0\n 2. x \\<le> 0 \\<Longrightarrow> normal_poly [:- x, 1:]", "assume \"normal_poly [:-x, 1:]\""], ["proof (state)\nthis:\n  normal_poly [:- x, 1:]\n\ngoal (2 subgoals):\n 1. normal_poly [:- x, 1:] \\<Longrightarrow> x \\<le> 0\n 2. x \\<le> 0 \\<Longrightarrow> normal_poly [:- x, 1:]", "thus \"x \\<le> 0\""], ["proof (prove)\nusing this:\n  normal_poly [:- x, 1:]\n\ngoal (1 subgoal):\n 1. x \\<le> 0", "using normal_coeff_nonneg[of \"[:-x, 1:]\" 0]"], ["proof (prove)\nusing this:\n  normal_poly [:- x, 1:]\n  normal_poly [:- x, 1:] \\<Longrightarrow> 0 \\<le> coeff [:- x, 1:] 0\n\ngoal (1 subgoal):\n 1. x \\<le> 0", "by auto"], ["proof (state)\nthis:\n  x \\<le> 0\n\ngoal (1 subgoal):\n 1. x \\<le> 0 \\<Longrightarrow> normal_poly [:- x, 1:]", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<le> 0 \\<Longrightarrow> normal_poly [:- x, 1:]", "assume \"x \\<le> 0\""], ["proof (state)\nthis:\n  x \\<le> 0\n\ngoal (1 subgoal):\n 1. x \\<le> 0 \\<Longrightarrow> normal_poly [:- x, 1:]", "then"], ["proof (chain)\npicking this:\n  x \\<le> 0", "have \"0 \\<le> coeff [:- x, 1:] i\" for i"], ["proof (prove)\nusing this:\n  x \\<le> 0\n\ngoal (1 subgoal):\n 1. 0 \\<le> coeff [:- x, 1:] i", "by (cases i) (simp_all add: pCons_one)"], ["proof (state)\nthis:\n  0 \\<le> coeff [:- x, 1:] ?i\n\ngoal (1 subgoal):\n 1. x \\<le> 0 \\<Longrightarrow> normal_poly [:- x, 1:]", "moreover"], ["proof (state)\nthis:\n  0 \\<le> coeff [:- x, 1:] ?i\n\ngoal (1 subgoal):\n 1. x \\<le> 0 \\<Longrightarrow> normal_poly [:- x, 1:]", "have \"0 < coeff [:- x, 1:] j\"\n    if \"i \\<le> j\" \"j \\<le> k\" \"0 < coeff [:- x, 1:] i\" \n        \"0 < coeff [:- x, 1:] k\" for i j k"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < coeff [:- x, 1:] j", "apply (cases \"k=0 \\<or> i=0\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. k = 0 \\<or> i = 0 \\<Longrightarrow> 0 < coeff [:- x, 1:] j\n 2. \\<not> (k = 0 \\<or> i = 0) \\<Longrightarrow> 0 < coeff [:- x, 1:] j", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. k = 0 \\<or> i = 0 \\<Longrightarrow> 0 < coeff [:- x, 1:] j", "using that"], ["proof (prove)\nusing this:\n  i \\<le> j\n  j \\<le> k\n  0 < coeff [:- x, 1:] i\n  0 < coeff [:- x, 1:] k\n\ngoal (1 subgoal):\n 1. k = 0 \\<or> i = 0 \\<Longrightarrow> 0 < coeff [:- x, 1:] j", "by (smt (z3) bot_nat_0.extremum_uniqueI degree_pCons_eq_if \n          le_antisym le_degree not_less_eq_eq)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> (k = 0 \\<or> i = 0) \\<Longrightarrow> 0 < coeff [:- x, 1:] j", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> (k = 0 \\<or> i = 0) \\<Longrightarrow> 0 < coeff [:- x, 1:] j", "using that"], ["proof (prove)\nusing this:\n  i \\<le> j\n  j \\<le> k\n  0 < coeff [:- x, 1:] i\n  0 < coeff [:- x, 1:] k\n\ngoal (1 subgoal):\n 1. \\<not> (k = 0 \\<or> i = 0) \\<Longrightarrow> 0 < coeff [:- x, 1:] j", "by (smt (z3) One_nat_def degree_pCons_eq_if le_degree less_one\n          not_le one_neq_zero pCons_one verit_la_disequality)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<lbrakk>?i \\<le> ?j; ?j \\<le> ?k; 0 < coeff [:- x, 1:] ?i;\n   0 < coeff [:- x, 1:] ?k\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff [:- x, 1:] ?j\n\ngoal (1 subgoal):\n 1. x \\<le> 0 \\<Longrightarrow> normal_poly [:- x, 1:]", "ultimately"], ["proof (chain)\npicking this:\n  0 \\<le> coeff [:- x, 1:] ?i\n  \\<lbrakk>?i \\<le> ?j; ?j \\<le> ?k; 0 < coeff [:- x, 1:] ?i;\n   0 < coeff [:- x, 1:] ?k\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff [:- x, 1:] ?j", "show \"normal_poly [:-x, 1:]\""], ["proof (prove)\nusing this:\n  0 \\<le> coeff [:- x, 1:] ?i\n  \\<lbrakk>?i \\<le> ?j; ?j \\<le> ?k; 0 < coeff [:- x, 1:] ?i;\n   0 < coeff [:- x, 1:] ?k\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff [:- x, 1:] ?j\n\ngoal (1 subgoal):\n 1. normal_poly [:- x, 1:]", "unfolding normal_poly_def"], ["proof (prove)\nusing this:\n  0 \\<le> coeff [:- x, 1:] ?i\n  \\<lbrakk>?i \\<le> ?j; ?j \\<le> ?k; 0 < coeff [:- x, 1:] ?i;\n   0 < coeff [:- x, 1:] ?k\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff [:- x, 1:] ?j\n\ngoal (1 subgoal):\n 1. [:- x, 1:] \\<noteq> 0 \\<and>\n    (\\<forall>i. 0 \\<le> coeff [:- x, 1:] i) \\<and>\n    (\\<forall>i.\n        coeff [:- x, 1:] i * coeff [:- x, 1:] (i + 2)\n        \\<le> (coeff [:- x, 1:] (i + 1))\\<^sup>2) \\<and>\n    (\\<forall>i j k.\n        i \\<le> j \\<longrightarrow>\n        j \\<le> k \\<longrightarrow>\n        0 < coeff [:- x, 1:] i \\<longrightarrow>\n        0 < coeff [:- x, 1:] k \\<longrightarrow> 0 < coeff [:- x, 1:] j)", "by auto"], ["proof (state)\nthis:\n  normal_poly [:- x, 1:]\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma quadratic_normal_iff: \n  fixes z::complex \n  shows \"normal_poly [:(cmod z)\\<^sup>2, -2*Re z, 1:] \n          \\<longleftrightarrow> Re z \\<le> 0 \\<and> 4*(Re z)^2 \\<ge> (cmod z)^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. normal_poly [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] =\n    (Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. normal_poly [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] \\<Longrightarrow>\n    Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2\n 2. Re z \\<le> 0 \\<and>\n    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2 \\<Longrightarrow>\n    normal_poly [:(cmod z)\\<^sup>2, - 2 * Re z, 1:]", "assume \"normal_poly [:(cmod z)\\<^sup>2, - 2 * Re z, 1:]\""], ["proof (state)\nthis:\n  normal_poly [:(cmod z)\\<^sup>2, - 2 * Re z, 1:]\n\ngoal (2 subgoals):\n 1. normal_poly [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] \\<Longrightarrow>\n    Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2\n 2. Re z \\<le> 0 \\<and>\n    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2 \\<Longrightarrow>\n    normal_poly [:(cmod z)\\<^sup>2, - 2 * Re z, 1:]", "hence \"-2*Re z \\<ge> 0 \\<and> (cmod z)^2 \\<ge> 0 \\<and> (-2*Re z)^2 \\<ge> (cmod z)^2\""], ["proof (prove)\nusing this:\n  normal_poly [:(cmod z)\\<^sup>2, - 2 * Re z, 1:]\n\ngoal (1 subgoal):\n 1. 0 \\<le> - 2 * Re z \\<and>\n    0 \\<le> (cmod z)\\<^sup>2 \\<and>\n    (cmod z)\\<^sup>2 \\<le> (- 2 * Re z)\\<^sup>2", "using normal_coeff_nonneg[of _ 1] normal_poly_coeff_mult[of _ 0]"], ["proof (prove)\nusing this:\n  normal_poly [:(cmod z)\\<^sup>2, - 2 * Re z, 1:]\n  normal_poly ?p \\<Longrightarrow> (0::?'a) \\<le> coeff ?p 1\n  normal_poly ?p \\<Longrightarrow>\n  coeff ?p 0 * coeff ?p (0 + 2) \\<le> (coeff ?p (0 + 1))\\<^sup>2\n\ngoal (1 subgoal):\n 1. 0 \\<le> - 2 * Re z \\<and>\n    0 \\<le> (cmod z)\\<^sup>2 \\<and>\n    (cmod z)\\<^sup>2 \\<le> (- 2 * Re z)\\<^sup>2", "by fastforce"], ["proof (state)\nthis:\n  0 \\<le> - 2 * Re z \\<and>\n  0 \\<le> (cmod z)\\<^sup>2 \\<and>\n  (cmod z)\\<^sup>2 \\<le> (- 2 * Re z)\\<^sup>2\n\ngoal (2 subgoals):\n 1. normal_poly [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] \\<Longrightarrow>\n    Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2\n 2. Re z \\<le> 0 \\<and>\n    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2 \\<Longrightarrow>\n    normal_poly [:(cmod z)\\<^sup>2, - 2 * Re z, 1:]", "thus \"Re z \\<le> 0 \\<and> 4*(Re z)^2 \\<ge> (cmod z)^2\""], ["proof (prove)\nusing this:\n  0 \\<le> - 2 * Re z \\<and>\n  0 \\<le> (cmod z)\\<^sup>2 \\<and>\n  (cmod z)\\<^sup>2 \\<le> (- 2 * Re z)\\<^sup>2\n\ngoal (1 subgoal):\n 1. Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2", "by auto"], ["proof (state)\nthis:\n  Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2\n\ngoal (1 subgoal):\n 1. Re z \\<le> 0 \\<and>\n    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2 \\<Longrightarrow>\n    normal_poly [:(cmod z)\\<^sup>2, - 2 * Re z, 1:]", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. Re z \\<le> 0 \\<and>\n    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2 \\<Longrightarrow>\n    normal_poly [:(cmod z)\\<^sup>2, - 2 * Re z, 1:]", "assume asm:\"Re z \\<le> 0 \\<and> 4*(Re z)^2 \\<ge> (cmod z)^2\""], ["proof (state)\nthis:\n  Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2\n\ngoal (1 subgoal):\n 1. Re z \\<le> 0 \\<and>\n    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2 \\<Longrightarrow>\n    normal_poly [:(cmod z)\\<^sup>2, - 2 * Re z, 1:]", "define P where \"P=[:(cmod z)\\<^sup>2, - 2 * Re z, 1:]\""], ["proof (state)\nthis:\n  P = [:(cmod z)\\<^sup>2, - 2 * Re z, 1:]\n\ngoal (1 subgoal):\n 1. Re z \\<le> 0 \\<and>\n    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2 \\<Longrightarrow>\n    normal_poly [:(cmod z)\\<^sup>2, - 2 * Re z, 1:]", "have \"0 \\<le> coeff P i\" for i"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> coeff P i", "unfolding P_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] i", "using asm"], ["proof (prove)\nusing this:\n  Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2\n\ngoal (1 subgoal):\n 1. 0 \\<le> coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] i", "apply (cases \"i=0\\<or>i=1\\<or>i=2\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n     i = 0 \\<or> i = 1 \\<or> i = 2\\<rbrakk>\n    \\<Longrightarrow> 0 \\<le> coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] i\n 2. \\<lbrakk>Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n     \\<not> (i = 0 \\<or> i = 1 \\<or> i = 2)\\<rbrakk>\n    \\<Longrightarrow> 0 \\<le> coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] i", "by (auto simp:numeral_2_eq_2 coeff_eq_0)"], ["proof (state)\nthis:\n  0 \\<le> coeff P ?i\n\ngoal (1 subgoal):\n 1. Re z \\<le> 0 \\<and>\n    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2 \\<Longrightarrow>\n    normal_poly [:(cmod z)\\<^sup>2, - 2 * Re z, 1:]", "moreover"], ["proof (state)\nthis:\n  0 \\<le> coeff P ?i\n\ngoal (1 subgoal):\n 1. Re z \\<le> 0 \\<and>\n    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2 \\<Longrightarrow>\n    normal_poly [:(cmod z)\\<^sup>2, - 2 * Re z, 1:]", "have \"coeff P i * coeff P (i + 2) \\<le> (coeff P (i + 1))\\<^sup>2\" for i"], ["proof (prove)\ngoal (1 subgoal):\n 1. coeff P i * coeff P (i + 2) \\<le> (coeff P (i + 1))\\<^sup>2", "apply (cases \"i=0\\<or>i=1\\<or>i=2\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. i = 0 \\<or> i = 1 \\<or> i = 2 \\<Longrightarrow>\n    coeff P i * coeff P (i + 2) \\<le> (coeff P (i + 1))\\<^sup>2\n 2. \\<not> (i = 0 \\<or> i = 1 \\<or> i = 2) \\<Longrightarrow>\n    coeff P i * coeff P (i + 2) \\<le> (coeff P (i + 1))\\<^sup>2", "using asm"], ["proof (prove)\nusing this:\n  Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2\n\ngoal (2 subgoals):\n 1. i = 0 \\<or> i = 1 \\<or> i = 2 \\<Longrightarrow>\n    coeff P i * coeff P (i + 2) \\<le> (coeff P (i + 1))\\<^sup>2\n 2. \\<not> (i = 0 \\<or> i = 1 \\<or> i = 2) \\<Longrightarrow>\n    coeff P i * coeff P (i + 2) \\<le> (coeff P (i + 1))\\<^sup>2", "unfolding P_def"], ["proof (prove)\nusing this:\n  Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2\n\ngoal (2 subgoals):\n 1. i = 0 \\<or> i = 1 \\<or> i = 2 \\<Longrightarrow>\n    coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] i *\n    coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] (i + 2)\n    \\<le> (coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] (i + 1))\\<^sup>2\n 2. \\<not> (i = 0 \\<or> i = 1 \\<or> i = 2) \\<Longrightarrow>\n    coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] i *\n    coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] (i + 2)\n    \\<le> (coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] (i + 1))\\<^sup>2", "by (auto simp:coeff_eq_0)"], ["proof (state)\nthis:\n  coeff P ?i * coeff P (?i + 2) \\<le> (coeff P (?i + 1))\\<^sup>2\n\ngoal (1 subgoal):\n 1. Re z \\<le> 0 \\<and>\n    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2 \\<Longrightarrow>\n    normal_poly [:(cmod z)\\<^sup>2, - 2 * Re z, 1:]", "moreover"], ["proof (state)\nthis:\n  coeff P ?i * coeff P (?i + 2) \\<le> (coeff P (?i + 1))\\<^sup>2\n\ngoal (1 subgoal):\n 1. Re z \\<le> 0 \\<and>\n    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2 \\<Longrightarrow>\n    normal_poly [:(cmod z)\\<^sup>2, - 2 * Re z, 1:]", "have \"0 < coeff P j\"\n    if \"0 < coeff P k\" \"0 < coeff P i\" \"j \\<le> k\" \"i \\<le> j\"\n    for i j k"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < coeff P j", "using that"], ["proof (prove)\nusing this:\n  0 < coeff P k\n  0 < coeff P i\n  j \\<le> k\n  i \\<le> j\n\ngoal (1 subgoal):\n 1. 0 < coeff P j", "unfolding P_def"], ["proof (prove)\nusing this:\n  0 < coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] k\n  0 < coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] i\n  j \\<le> k\n  i \\<le> j\n\ngoal (1 subgoal):\n 1. 0 < coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] j", "apply (cases \"k=0 \\<or> k=1 \\<or> k=2\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>0 < coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] k;\n     0 < coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] i; j \\<le> k; i \\<le> j;\n     k = 0 \\<or> k = 1 \\<or> k = 2\\<rbrakk>\n    \\<Longrightarrow> 0 < coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] j\n 2. \\<lbrakk>0 < coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] k;\n     0 < coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] i; j \\<le> k; i \\<le> j;\n     \\<not> (k = 0 \\<or> k = 1 \\<or> k = 2)\\<rbrakk>\n    \\<Longrightarrow> 0 < coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] j", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] k;\n     0 < coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] i; j \\<le> k; i \\<le> j;\n     k = 0 \\<or> k = 1 \\<or> k = 2\\<rbrakk>\n    \\<Longrightarrow> 0 < coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] j", "using asm"], ["proof (prove)\nusing this:\n  Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] k;\n     0 < coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] i; j \\<le> k; i \\<le> j;\n     k = 0 \\<or> k = 1 \\<or> k = 2\\<rbrakk>\n    \\<Longrightarrow> 0 < coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] j", "by (smt (z3) One_nat_def Suc_1 bot_nat_0.extremum_uniqueI \n          coeff_pCons_0 coeff_pCons_Suc le_Suc_eq \n          zero_less_power2)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] k;\n     0 < coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] i; j \\<le> k; i \\<le> j;\n     \\<not> (k = 0 \\<or> k = 1 \\<or> k = 2)\\<rbrakk>\n    \\<Longrightarrow> 0 < coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] j", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] k;\n     0 < coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] i; j \\<le> k; i \\<le> j;\n     \\<not> (k = 0 \\<or> k = 1 \\<or> k = 2)\\<rbrakk>\n    \\<Longrightarrow> 0 < coeff [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] j", "by (auto simp:coeff_eq_0)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<lbrakk>0 < coeff P ?k; 0 < coeff P ?i; ?j \\<le> ?k; ?i \\<le> ?j\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff P ?j\n\ngoal (1 subgoal):\n 1. Re z \\<le> 0 \\<and>\n    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2 \\<Longrightarrow>\n    normal_poly [:(cmod z)\\<^sup>2, - 2 * Re z, 1:]", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>0 < coeff P ?k; 0 < coeff P ?i; ?j \\<le> ?k; ?i \\<le> ?j\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff P ?j\n\ngoal (1 subgoal):\n 1. Re z \\<le> 0 \\<and>\n    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2 \\<Longrightarrow>\n    normal_poly [:(cmod z)\\<^sup>2, - 2 * Re z, 1:]", "have \"P\\<noteq>0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<noteq> 0", "unfolding P_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. [:(cmod z)\\<^sup>2, - 2 * Re z, 1:] \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  P \\<noteq> 0\n\ngoal (1 subgoal):\n 1. Re z \\<le> 0 \\<and>\n    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2 \\<Longrightarrow>\n    normal_poly [:(cmod z)\\<^sup>2, - 2 * Re z, 1:]", "ultimately"], ["proof (chain)\npicking this:\n  0 \\<le> coeff P ?i\n  coeff P ?i * coeff P (?i + 2) \\<le> (coeff P (?i + 1))\\<^sup>2\n  \\<lbrakk>0 < coeff P ?k; 0 < coeff P ?i; ?j \\<le> ?k; ?i \\<le> ?j\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff P ?j\n  P \\<noteq> 0", "show \"normal_poly P\""], ["proof (prove)\nusing this:\n  0 \\<le> coeff P ?i\n  coeff P ?i * coeff P (?i + 2) \\<le> (coeff P (?i + 1))\\<^sup>2\n  \\<lbrakk>0 < coeff P ?k; 0 < coeff P ?i; ?j \\<le> ?k; ?i \\<le> ?j\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff P ?j\n  P \\<noteq> 0\n\ngoal (1 subgoal):\n 1. normal_poly P", "unfolding normal_poly_def"], ["proof (prove)\nusing this:\n  0 \\<le> coeff P ?i\n  coeff P ?i * coeff P (?i + 2) \\<le> (coeff P (?i + 1))\\<^sup>2\n  \\<lbrakk>0 < coeff P ?k; 0 < coeff P ?i; ?j \\<le> ?k; ?i \\<le> ?j\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff P ?j\n  P \\<noteq> 0\n\ngoal (1 subgoal):\n 1. P \\<noteq> 0 \\<and>\n    (\\<forall>i. 0 \\<le> coeff P i) \\<and>\n    (\\<forall>i.\n        coeff P i * coeff P (i + 2) \\<le> (coeff P (i + 1))\\<^sup>2) \\<and>\n    (\\<forall>i j k.\n        i \\<le> j \\<longrightarrow>\n        j \\<le> k \\<longrightarrow>\n        0 < coeff P i \\<longrightarrow>\n        0 < coeff P k \\<longrightarrow> 0 < coeff P j)", "by blast"], ["proof (state)\nthis:\n  normal_poly P\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma normal_of_no_zero_root: \n  fixes f::\"real poly\" \n  assumes hzero: \"poly f 0 \\<noteq> 0\" and hdeg: \"i \\<le> degree f\" \n    and hnorm: \"normal_poly f\"\n  shows \"0 < coeff f i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < coeff f i", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. 0 < coeff f i", "have \"coeff f 0 > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < coeff f 0", "using hzero normal_coeff_nonneg[OF hnorm]"], ["proof (prove)\nusing this:\n  poly f 0 \\<noteq> 0\n  0 \\<le> coeff f ?i\n\ngoal (1 subgoal):\n 1. 0 < coeff f 0", "by (metis eq_iff not_le_imp_less poly_0_coeff_0)"], ["proof (state)\nthis:\n  0 < coeff f 0\n\ngoal (1 subgoal):\n 1. 0 < coeff f i", "moreover"], ["proof (state)\nthis:\n  0 < coeff f 0\n\ngoal (1 subgoal):\n 1. 0 < coeff f i", "have \"coeff f (degree f) > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < lead_coeff f", "using normal_coeff_nonneg[OF hnorm] normal_non_zero[OF hnorm]"], ["proof (prove)\nusing this:\n  0 \\<le> coeff f ?i\n  f \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 0 < lead_coeff f", "by (meson dual_order.irrefl eq_iff eq_zero_or_degree_less not_le_imp_less)"], ["proof (state)\nthis:\n  0 < lead_coeff f\n\ngoal (1 subgoal):\n 1. 0 < coeff f i", "moreover"], ["proof (state)\nthis:\n  0 < lead_coeff f\n\ngoal (1 subgoal):\n 1. 0 < coeff f i", "have \"0 \\<le> i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> i", "by simp"], ["proof (state)\nthis:\n  0 \\<le> i\n\ngoal (1 subgoal):\n 1. 0 < coeff f i", "ultimately"], ["proof (chain)\npicking this:\n  0 < coeff f 0\n  0 < lead_coeff f\n  0 \\<le> i", "show \"0 < coeff f i\""], ["proof (prove)\nusing this:\n  0 < coeff f 0\n  0 < lead_coeff f\n  0 \\<le> i\n\ngoal (1 subgoal):\n 1. 0 < coeff f i", "using hdeg normal_poly_pos_interval[OF hnorm]"], ["proof (prove)\nusing this:\n  0 < coeff f 0\n  0 < lead_coeff f\n  0 \\<le> i\n  i \\<le> degree f\n  \\<lbrakk>?i \\<le> ?j; ?j \\<le> ?k; 0 < coeff f ?i; 0 < coeff f ?k\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff f ?j\n\ngoal (1 subgoal):\n 1. 0 < coeff f i", "by blast"], ["proof (state)\nthis:\n  0 < coeff f i\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma normal_divide_x: \n  fixes f::\"real poly\" \n  assumes hnorm: \"normal_poly (f*[:0,1:])\"\n  shows \"normal_poly f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. normal_poly f", "proof (rule normal_polyI)"], ["proof (state)\ngoal (4 subgoals):\n 1. f \\<noteq> 0\n 2. \\<And>i. 0 \\<le> coeff f i\n 3. \\<And>i. coeff f i * coeff f (i + 2) \\<le> (coeff f (i + 1))\\<^sup>2\n 4. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff f i; 0 < coeff f k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff f j", "show \"f \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<noteq> 0", "using normal_non_zero[OF hnorm]"], ["proof (prove)\nusing this:\n  f * [:0, 1:] \\<noteq> 0\n\ngoal (1 subgoal):\n 1. f \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  f \\<noteq> 0\n\ngoal (3 subgoals):\n 1. \\<And>i. 0 \\<le> coeff f i\n 2. \\<And>i. coeff f i * coeff f (i + 2) \\<le> (coeff f (i + 1))\\<^sup>2\n 3. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff f i; 0 < coeff f k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff f j", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>i. 0 \\<le> coeff f i\n 2. \\<And>i. coeff f i * coeff f (i + 2) \\<le> (coeff f (i + 1))\\<^sup>2\n 3. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff f i; 0 < coeff f k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff f j", "fix i"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>i. 0 \\<le> coeff f i\n 2. \\<And>i. coeff f i * coeff f (i + 2) \\<le> (coeff f (i + 1))\\<^sup>2\n 3. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff f i; 0 < coeff f k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff f j", "show \"0 \\<le> coeff f i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> coeff f i", "using normal_coeff_nonneg[OF hnorm, of \"Suc i\"]"], ["proof (prove)\nusing this:\n  0 \\<le> coeff (f * [:0, 1:]) (Suc i)\n\ngoal (1 subgoal):\n 1. 0 \\<le> coeff f i", "by (simp add: coeff_pCons)"], ["proof (state)\nthis:\n  0 \\<le> coeff f i\n\ngoal (2 subgoals):\n 1. \\<And>i. coeff f i * coeff f (i + 2) \\<le> (coeff f (i + 1))\\<^sup>2\n 2. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff f i; 0 < coeff f k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff f j", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i. coeff f i * coeff f (i + 2) \\<le> (coeff f (i + 1))\\<^sup>2\n 2. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff f i; 0 < coeff f k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff f j", "fix i"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i. coeff f i * coeff f (i + 2) \\<le> (coeff f (i + 1))\\<^sup>2\n 2. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff f i; 0 < coeff f k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff f j", "show \"coeff f i * coeff f (i + 2) \\<le> (coeff f (i + 1))\\<^sup>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. coeff f i * coeff f (i + 2) \\<le> (coeff f (i + 1))\\<^sup>2", "using normal_poly_coeff_mult[OF hnorm, of \"Suc i\"]"], ["proof (prove)\nusing this:\n  coeff (f * [:0, 1:]) (Suc i) * coeff (f * [:0, 1:]) (Suc i + 2)\n  \\<le> (coeff (f * [:0, 1:]) (Suc i + 1))\\<^sup>2\n\ngoal (1 subgoal):\n 1. coeff f i * coeff f (i + 2) \\<le> (coeff f (i + 1))\\<^sup>2", "by (simp add: coeff_pCons)"], ["proof (state)\nthis:\n  coeff f i * coeff f (i + 2) \\<le> (coeff f (i + 1))\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff f i; 0 < coeff f k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff f j", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff f i; 0 < coeff f k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff f j", "fix i j k"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff f i; 0 < coeff f k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff f j", "show \"i \\<le> j \\<Longrightarrow> j \\<le> k \\<Longrightarrow> 0 < coeff f i \\<Longrightarrow> 0 < coeff f k \\<Longrightarrow> 0 < coeff f j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff f i; 0 < coeff f k\\<rbrakk>\n    \\<Longrightarrow> 0 < coeff f j", "using normal_poly_pos_interval[of _ \"Suc i\" \"Suc j\" \"Suc k\", OF hnorm]"], ["proof (prove)\nusing this:\n  \\<lbrakk>Suc i \\<le> Suc j; Suc j \\<le> Suc k;\n   0 < coeff (f * [:0, 1:]) (Suc i);\n   0 < coeff (f * [:0, 1:]) (Suc k)\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff (f * [:0, 1:]) (Suc j)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff f i; 0 < coeff f k\\<rbrakk>\n    \\<Longrightarrow> 0 < coeff f j", "by (simp add: coeff_pCons)"], ["proof (state)\nthis:\n  \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff f i; 0 < coeff f k\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff f j\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma normal_mult_x: \n  fixes f::\"real poly\" \n  assumes hnorm: \"normal_poly f\"\n  shows \"normal_poly (f * [:0, 1:])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. normal_poly (f * [:0, 1:])", "proof (rule normal_polyI)"], ["proof (state)\ngoal (4 subgoals):\n 1. f * [:0, 1:] \\<noteq> 0\n 2. \\<And>i. 0 \\<le> coeff (f * [:0, 1:]) i\n 3. \\<And>i.\n       coeff (f * [:0, 1:]) i * coeff (f * [:0, 1:]) (i + 2)\n       \\<le> (coeff (f * [:0, 1:]) (i + 1))\\<^sup>2\n 4. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * [:0, 1:]) i;\n        0 < coeff (f * [:0, 1:]) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * [:0, 1:]) j", "show \"f * [:0, 1:] \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f * [:0, 1:] \\<noteq> 0", "using normal_non_zero[OF hnorm]"], ["proof (prove)\nusing this:\n  f \\<noteq> 0\n\ngoal (1 subgoal):\n 1. f * [:0, 1:] \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  f * [:0, 1:] \\<noteq> 0\n\ngoal (3 subgoals):\n 1. \\<And>i. 0 \\<le> coeff (f * [:0, 1:]) i\n 2. \\<And>i.\n       coeff (f * [:0, 1:]) i * coeff (f * [:0, 1:]) (i + 2)\n       \\<le> (coeff (f * [:0, 1:]) (i + 1))\\<^sup>2\n 3. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * [:0, 1:]) i;\n        0 < coeff (f * [:0, 1:]) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * [:0, 1:]) j", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>i. 0 \\<le> coeff (f * [:0, 1:]) i\n 2. \\<And>i.\n       coeff (f * [:0, 1:]) i * coeff (f * [:0, 1:]) (i + 2)\n       \\<le> (coeff (f * [:0, 1:]) (i + 1))\\<^sup>2\n 3. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * [:0, 1:]) i;\n        0 < coeff (f * [:0, 1:]) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * [:0, 1:]) j", "fix i"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>i. 0 \\<le> coeff (f * [:0, 1:]) i\n 2. \\<And>i.\n       coeff (f * [:0, 1:]) i * coeff (f * [:0, 1:]) (i + 2)\n       \\<le> (coeff (f * [:0, 1:]) (i + 1))\\<^sup>2\n 3. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * [:0, 1:]) i;\n        0 < coeff (f * [:0, 1:]) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * [:0, 1:]) j", "show \"0 \\<le> coeff (f * [:0, 1:]) i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> coeff (f * [:0, 1:]) i", "using normal_coeff_nonneg[OF hnorm, of \"i-1\"]"], ["proof (prove)\nusing this:\n  0 \\<le> coeff f (i - 1)\n\ngoal (1 subgoal):\n 1. 0 \\<le> coeff (f * [:0, 1:]) i", "by (cases i, auto simp: coeff_pCons)"], ["proof (state)\nthis:\n  0 \\<le> coeff (f * [:0, 1:]) i\n\ngoal (2 subgoals):\n 1. \\<And>i.\n       coeff (f * [:0, 1:]) i * coeff (f * [:0, 1:]) (i + 2)\n       \\<le> (coeff (f * [:0, 1:]) (i + 1))\\<^sup>2\n 2. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * [:0, 1:]) i;\n        0 < coeff (f * [:0, 1:]) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * [:0, 1:]) j", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       coeff (f * [:0, 1:]) i * coeff (f * [:0, 1:]) (i + 2)\n       \\<le> (coeff (f * [:0, 1:]) (i + 1))\\<^sup>2\n 2. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * [:0, 1:]) i;\n        0 < coeff (f * [:0, 1:]) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * [:0, 1:]) j", "fix i"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       coeff (f * [:0, 1:]) i * coeff (f * [:0, 1:]) (i + 2)\n       \\<le> (coeff (f * [:0, 1:]) (i + 1))\\<^sup>2\n 2. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * [:0, 1:]) i;\n        0 < coeff (f * [:0, 1:]) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * [:0, 1:]) j", "show \"coeff (f * [:0, 1:]) i * coeff (f * [:0, 1:]) (i + 2) \\<le> (coeff (f * [:0, 1:]) (i + 1))\\<^sup>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. coeff (f * [:0, 1:]) i * coeff (f * [:0, 1:]) (i + 2)\n    \\<le> (coeff (f * [:0, 1:]) (i + 1))\\<^sup>2", "using normal_poly_coeff_mult[OF hnorm, of \"i-1\"]"], ["proof (prove)\nusing this:\n  coeff f (i - 1) * coeff f (i - 1 + 2) \\<le> (coeff f (i - 1 + 1))\\<^sup>2\n\ngoal (1 subgoal):\n 1. coeff (f * [:0, 1:]) i * coeff (f * [:0, 1:]) (i + 2)\n    \\<le> (coeff (f * [:0, 1:]) (i + 1))\\<^sup>2", "by (cases i, auto simp: coeff_pCons)"], ["proof (state)\nthis:\n  coeff (f * [:0, 1:]) i * coeff (f * [:0, 1:]) (i + 2)\n  \\<le> (coeff (f * [:0, 1:]) (i + 1))\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * [:0, 1:]) i;\n        0 < coeff (f * [:0, 1:]) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * [:0, 1:]) j", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * [:0, 1:]) i;\n        0 < coeff (f * [:0, 1:]) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * [:0, 1:]) j", "fix i j k"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * [:0, 1:]) i;\n        0 < coeff (f * [:0, 1:]) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * [:0, 1:]) j", "show \"i \\<le> j \\<Longrightarrow> j \\<le> k \\<Longrightarrow> 0 < coeff (f * [:0, 1:]) i \\<Longrightarrow> 0 < coeff (f * [:0, 1:]) k \\<Longrightarrow> 0 < coeff (f * [:0, 1:]) j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * [:0, 1:]) i;\n     0 < coeff (f * [:0, 1:]) k\\<rbrakk>\n    \\<Longrightarrow> 0 < coeff (f * [:0, 1:]) j", "using normal_poly_pos_interval[of _ \"i-1\" \"j-1\" \"k-1\", OF hnorm]"], ["proof (prove)\nusing this:\n  \\<lbrakk>i - 1 \\<le> j - 1; j - 1 \\<le> k - 1; 0 < coeff f (i - 1);\n   0 < coeff f (k - 1)\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff f (j - 1)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * [:0, 1:]) i;\n     0 < coeff (f * [:0, 1:]) k\\<rbrakk>\n    \\<Longrightarrow> 0 < coeff (f * [:0, 1:]) j", "apply (cases i, force)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * [:0, 1:]) i;\n        0 < coeff (f * [:0, 1:]) k;\n        \\<lbrakk>i - 1 \\<le> j - 1; j - 1 \\<le> k - 1; 0 < coeff f (i - 1);\n         0 < coeff f (k - 1)\\<rbrakk>\n        \\<Longrightarrow> 0 < coeff f (j - 1);\n        i = Suc nat\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * [:0, 1:]) j", "apply (cases j, force)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>nat nata.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * [:0, 1:]) i;\n        0 < coeff (f * [:0, 1:]) k;\n        \\<lbrakk>i - 1 \\<le> j - 1; j - 1 \\<le> k - 1; 0 < coeff f (i - 1);\n         0 < coeff f (k - 1)\\<rbrakk>\n        \\<Longrightarrow> 0 < coeff f (j - 1);\n        i = Suc nat; j = Suc nata\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * [:0, 1:]) j", "apply (cases k, force)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>nat nata natb.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * [:0, 1:]) i;\n        0 < coeff (f * [:0, 1:]) k;\n        \\<lbrakk>i - 1 \\<le> j - 1; j - 1 \\<le> k - 1; 0 < coeff f (i - 1);\n         0 < coeff f (k - 1)\\<rbrakk>\n        \\<Longrightarrow> 0 < coeff f (j - 1);\n        i = Suc nat; j = Suc nata; k = Suc natb\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * [:0, 1:]) j", "by (auto simp: coeff_pCons)"], ["proof (state)\nthis:\n  \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * [:0, 1:]) i;\n   0 < coeff (f * [:0, 1:]) k\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff (f * [:0, 1:]) j\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma normal_poly_general_coeff_mult: \n  fixes f::\"real poly\" \n  assumes \"normal_poly f\" and \"h \\<le> j\"\n  shows \"coeff f (h+1) * coeff f (j+1) \\<ge> coeff f h * coeff f (j+2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. coeff f h * coeff f (j + 2) \\<le> coeff f (h + 1) * coeff f (j + 1)", "using assms"], ["proof (prove)\nusing this:\n  normal_poly f\n  h \\<le> j\n\ngoal (1 subgoal):\n 1. coeff f h * coeff f (j + 2) \\<le> coeff f (h + 1) * coeff f (j + 1)", "proof (induction j)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>normal_poly f; h \\<le> 0\\<rbrakk>\n    \\<Longrightarrow> coeff f h * coeff f (0 + 2)\n                      \\<le> coeff f (h + 1) * coeff f (0 + 1)\n 2. \\<And>j.\n       \\<lbrakk>\\<lbrakk>normal_poly f; h \\<le> j\\<rbrakk>\n                \\<Longrightarrow> coeff f h * coeff f (j + 2)\n                                  \\<le> coeff f (h + 1) * coeff f (j + 1);\n        normal_poly f; h \\<le> Suc j\\<rbrakk>\n       \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                         \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "case 0"], ["proof (state)\nthis:\n  normal_poly f\n  h \\<le> 0\n\ngoal (2 subgoals):\n 1. \\<lbrakk>normal_poly f; h \\<le> 0\\<rbrakk>\n    \\<Longrightarrow> coeff f h * coeff f (0 + 2)\n                      \\<le> coeff f (h + 1) * coeff f (0 + 1)\n 2. \\<And>j.\n       \\<lbrakk>\\<lbrakk>normal_poly f; h \\<le> j\\<rbrakk>\n                \\<Longrightarrow> coeff f h * coeff f (j + 2)\n                                  \\<le> coeff f (h + 1) * coeff f (j + 1);\n        normal_poly f; h \\<le> Suc j\\<rbrakk>\n       \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                         \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "then"], ["proof (chain)\npicking this:\n  normal_poly f\n  h \\<le> 0", "show ?case"], ["proof (prove)\nusing this:\n  normal_poly f\n  h \\<le> 0\n\ngoal (1 subgoal):\n 1. coeff f h * coeff f (0 + 2) \\<le> coeff f (h + 1) * coeff f (0 + 1)", "using normal_poly_coeff_mult"], ["proof (prove)\nusing this:\n  normal_poly f\n  h \\<le> 0\n  normal_poly ?p \\<Longrightarrow>\n  coeff ?p ?i * coeff ?p (?i + 2) \\<le> (coeff ?p (?i + 1))\\<^sup>2\n\ngoal (1 subgoal):\n 1. coeff f h * coeff f (0 + 2) \\<le> coeff f (h + 1) * coeff f (0 + 1)", "by (auto simp: power2_eq_square)[1]"], ["proof (state)\nthis:\n  coeff f h * coeff f (0 + 2) \\<le> coeff f (h + 1) * coeff f (0 + 1)\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       \\<lbrakk>\\<lbrakk>normal_poly f; h \\<le> j\\<rbrakk>\n                \\<Longrightarrow> coeff f h * coeff f (j + 2)\n                                  \\<le> coeff f (h + 1) * coeff f (j + 1);\n        normal_poly f; h \\<le> Suc j\\<rbrakk>\n       \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                         \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>j.\n       \\<lbrakk>\\<lbrakk>normal_poly f; h \\<le> j\\<rbrakk>\n                \\<Longrightarrow> coeff f h * coeff f (j + 2)\n                                  \\<le> coeff f (h + 1) * coeff f (j + 1);\n        normal_poly f; h \\<le> Suc j\\<rbrakk>\n       \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                         \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "case (Suc j)"], ["proof (state)\nthis:\n  \\<lbrakk>normal_poly f; h \\<le> j\\<rbrakk>\n  \\<Longrightarrow> coeff f h * coeff f (j + 2)\n                    \\<le> coeff f (h + 1) * coeff f (j + 1)\n  normal_poly f\n  h \\<le> Suc j\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       \\<lbrakk>\\<lbrakk>normal_poly f; h \\<le> j\\<rbrakk>\n                \\<Longrightarrow> coeff f h * coeff f (j + 2)\n                                  \\<le> coeff f (h + 1) * coeff f (j + 1);\n        normal_poly f; h \\<le> Suc j\\<rbrakk>\n       \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                         \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>normal_poly f; h \\<le> j\\<rbrakk>\n  \\<Longrightarrow> coeff f h * coeff f (j + 2)\n                    \\<le> coeff f (h + 1) * coeff f (j + 1)\n  normal_poly f\n  h \\<le> Suc j", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>normal_poly f; h \\<le> j\\<rbrakk>\n  \\<Longrightarrow> coeff f h * coeff f (j + 2)\n                    \\<le> coeff f (h + 1) * coeff f (j + 1)\n  normal_poly f\n  h \\<le> Suc j\n\ngoal (1 subgoal):\n 1. coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "proof (cases \"h = Suc j\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<lbrakk>normal_poly f; h \\<le> j\\<rbrakk>\n             \\<Longrightarrow> coeff f h * coeff f (j + 2)\n                               \\<le> coeff f (h + 1) * coeff f (j + 1);\n     normal_poly f; h \\<le> Suc j; h = Suc j\\<rbrakk>\n    \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                      \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n 2. \\<lbrakk>\\<lbrakk>normal_poly f; h \\<le> j\\<rbrakk>\n             \\<Longrightarrow> coeff f h * coeff f (j + 2)\n                               \\<le> coeff f (h + 1) * coeff f (j + 1);\n     normal_poly f; h \\<le> Suc j; h \\<noteq> Suc j\\<rbrakk>\n    \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                      \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "assume \"h = Suc j\" \"normal_poly f\""], ["proof (state)\nthis:\n  h = Suc j\n  normal_poly f\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<lbrakk>normal_poly f; h \\<le> j\\<rbrakk>\n             \\<Longrightarrow> coeff f h * coeff f (j + 2)\n                               \\<le> coeff f (h + 1) * coeff f (j + 1);\n     normal_poly f; h \\<le> Suc j; h = Suc j\\<rbrakk>\n    \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                      \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n 2. \\<lbrakk>\\<lbrakk>normal_poly f; h \\<le> j\\<rbrakk>\n             \\<Longrightarrow> coeff f h * coeff f (j + 2)\n                               \\<le> coeff f (h + 1) * coeff f (j + 1);\n     normal_poly f; h \\<le> Suc j; h \\<noteq> Suc j\\<rbrakk>\n    \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                      \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "thus ?thesis"], ["proof (prove)\nusing this:\n  h = Suc j\n  normal_poly f\n\ngoal (1 subgoal):\n 1. coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "using normal_poly_coeff_mult"], ["proof (prove)\nusing this:\n  h = Suc j\n  normal_poly f\n  normal_poly ?p \\<Longrightarrow>\n  coeff ?p ?i * coeff ?p (?i + 2) \\<le> (coeff ?p (?i + 1))\\<^sup>2\n\ngoal (1 subgoal):\n 1. coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "by (auto simp: power2_eq_square)"], ["proof (state)\nthis:\n  coeff f h * coeff f (Suc j + 2)\n  \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<lbrakk>normal_poly f; h \\<le> j\\<rbrakk>\n             \\<Longrightarrow> coeff f h * coeff f (j + 2)\n                               \\<le> coeff f (h + 1) * coeff f (j + 1);\n     normal_poly f; h \\<le> Suc j; h \\<noteq> Suc j\\<rbrakk>\n    \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                      \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<lbrakk>normal_poly f; h \\<le> j\\<rbrakk>\n             \\<Longrightarrow> coeff f h * coeff f (j + 2)\n                               \\<le> coeff f (h + 1) * coeff f (j + 1);\n     normal_poly f; h \\<le> Suc j; h \\<noteq> Suc j\\<rbrakk>\n    \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                      \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "assume \"(normal_poly f \\<Longrightarrow>\n       h \\<le> j \\<Longrightarrow> coeff f h * coeff f (j + 2) \\<le> coeff f (h + 1) * coeff f (j + 1))\"\n      \"normal_poly f\" and h: \"h \\<le> Suc j\" \"h \\<noteq> Suc j\""], ["proof (state)\nthis:\n  \\<lbrakk>normal_poly f; h \\<le> j\\<rbrakk>\n  \\<Longrightarrow> coeff f h * coeff f (j + 2)\n                    \\<le> coeff f (h + 1) * coeff f (j + 1)\n  normal_poly f\n  h \\<le> Suc j\n  h \\<noteq> Suc j\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<lbrakk>normal_poly f; h \\<le> j\\<rbrakk>\n             \\<Longrightarrow> coeff f h * coeff f (j + 2)\n                               \\<le> coeff f (h + 1) * coeff f (j + 1);\n     normal_poly f; h \\<le> Suc j; h \\<noteq> Suc j\\<rbrakk>\n    \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                      \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "hence IH: \"coeff f h * coeff f (j + 2) \\<le> coeff f (h + 1) * coeff f (j + 1)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>normal_poly f; h \\<le> j\\<rbrakk>\n  \\<Longrightarrow> coeff f h * coeff f (j + 2)\n                    \\<le> coeff f (h + 1) * coeff f (j + 1)\n  normal_poly f\n  h \\<le> Suc j\n  h \\<noteq> Suc j\n\ngoal (1 subgoal):\n 1. coeff f h * coeff f (j + 2) \\<le> coeff f (h + 1) * coeff f (j + 1)", "by linarith"], ["proof (state)\nthis:\n  coeff f h * coeff f (j + 2) \\<le> coeff f (h + 1) * coeff f (j + 1)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<lbrakk>normal_poly f; h \\<le> j\\<rbrakk>\n             \\<Longrightarrow> coeff f h * coeff f (j + 2)\n                               \\<le> coeff f (h + 1) * coeff f (j + 1);\n     normal_poly f; h \\<le> Suc j; h \\<noteq> Suc j\\<rbrakk>\n    \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                      \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "proof (cases \"coeff f (Suc j + 1) = 0\", cases \"coeff f (Suc j + 2) = 0\")"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<lbrakk>coeff f (Suc j + 1) = 0; coeff f (Suc j + 2) = 0\\<rbrakk>\n    \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                      \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n 2. \\<lbrakk>coeff f (Suc j + 1) = 0;\n     coeff f (Suc j + 2) \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                      \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n 3. coeff f (Suc j + 1) \\<noteq> 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "show \"coeff f (Suc j + 1) = 0 \\<Longrightarrow> coeff f (Suc j + 2) = 0 \\<Longrightarrow>\n        coeff f h * coeff f (Suc j + 2) \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>coeff f (Suc j + 1) = 0; coeff f (Suc j + 2) = 0\\<rbrakk>\n    \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                      \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "by (metis assms(1) mult_zero_right normal_coeff_nonneg)"], ["proof (state)\nthis:\n  \\<lbrakk>coeff f (Suc j + 1) = 0; coeff f (Suc j + 2) = 0\\<rbrakk>\n  \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>coeff f (Suc j + 1) = 0;\n     coeff f (Suc j + 2) \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                      \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n 2. coeff f (Suc j + 1) \\<noteq> 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>coeff f (Suc j + 1) = 0;\n     coeff f (Suc j + 2) \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                      \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n 2. coeff f (Suc j + 1) \\<noteq> 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "assume 1: \"coeff f (Suc j + 1) = 0\" \"coeff f (Suc j + 2) \\<noteq> 0\""], ["proof (state)\nthis:\n  coeff f (Suc j + 1) = 0\n  coeff f (Suc j + 2) \\<noteq> 0\n\ngoal (2 subgoals):\n 1. \\<lbrakk>coeff f (Suc j + 1) = 0;\n     coeff f (Suc j + 2) \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                      \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n 2. coeff f (Suc j + 1) \\<noteq> 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "hence \"coeff f (Suc j + 2) > 0\" \"\\<not>coeff f (Suc j + 1) > 0\""], ["proof (prove)\nusing this:\n  coeff f (Suc j + 1) = 0\n  coeff f (Suc j + 2) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 0 < coeff f (Suc j + 2) &&& \\<not> 0 < coeff f (Suc j + 1)", "using normal_coeff_nonneg[of f \"Suc j + 2\"] assms(1)"], ["proof (prove)\nusing this:\n  coeff f (Suc j + 1) = 0\n  coeff f (Suc j + 2) \\<noteq> 0\n  normal_poly f \\<Longrightarrow> 0 \\<le> coeff f (Suc j + 2)\n  normal_poly f\n\ngoal (1 subgoal):\n 1. 0 < coeff f (Suc j + 2) &&& \\<not> 0 < coeff f (Suc j + 1)", "by auto"], ["proof (state)\nthis:\n  0 < coeff f (Suc j + 2)\n  \\<not> 0 < coeff f (Suc j + 1)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>coeff f (Suc j + 1) = 0;\n     coeff f (Suc j + 2) \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                      \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n 2. coeff f (Suc j + 1) \\<noteq> 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "hence \"coeff f h > 0 \\<Longrightarrow> False\""], ["proof (prove)\nusing this:\n  0 < coeff f (Suc j + 2)\n  \\<not> 0 < coeff f (Suc j + 1)\n\ngoal (1 subgoal):\n 1. 0 < coeff f h \\<Longrightarrow> False", "using normal_poly_pos_interval[of f h \"Suc j + 1\" \"Suc j + 2\"] assms(1) h"], ["proof (prove)\nusing this:\n  0 < coeff f (Suc j + 2)\n  \\<not> 0 < coeff f (Suc j + 1)\n  \\<lbrakk>normal_poly f; h \\<le> Suc j + 1; Suc j + 1 \\<le> Suc j + 2;\n   0 < coeff f h; 0 < coeff f (Suc j + 2)\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff f (Suc j + 1)\n  normal_poly f\n  h \\<le> Suc j\n  h \\<noteq> Suc j\n\ngoal (1 subgoal):\n 1. 0 < coeff f h \\<Longrightarrow> False", "by force"], ["proof (state)\nthis:\n  0 < coeff f h \\<Longrightarrow> False\n\ngoal (2 subgoals):\n 1. \\<lbrakk>coeff f (Suc j + 1) = 0;\n     coeff f (Suc j + 2) \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                      \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n 2. coeff f (Suc j + 1) \\<noteq> 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "hence \"coeff f h = 0\""], ["proof (prove)\nusing this:\n  0 < coeff f h \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. coeff f h = 0", "using normal_coeff_nonneg[OF assms(1)] less_eq_real_def"], ["proof (prove)\nusing this:\n  0 < coeff f h \\<Longrightarrow> False\n  0 \\<le> coeff f ?i\n  (?x \\<le> ?y) = (?x < ?y \\<or> ?x = ?y)\n\ngoal (1 subgoal):\n 1. coeff f h = 0", "by auto"], ["proof (state)\nthis:\n  coeff f h = 0\n\ngoal (2 subgoals):\n 1. \\<lbrakk>coeff f (Suc j + 1) = 0;\n     coeff f (Suc j + 2) \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> coeff f h * coeff f (Suc j + 2)\n                      \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n 2. coeff f (Suc j + 1) \\<noteq> 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "thus \"coeff f h * coeff f (Suc j + 2) \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\""], ["proof (prove)\nusing this:\n  coeff f h = 0\n\ngoal (1 subgoal):\n 1. coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "using 1"], ["proof (prove)\nusing this:\n  coeff f h = 0\n  coeff f (Suc j + 1) = 0\n  coeff f (Suc j + 2) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "by fastforce"], ["proof (state)\nthis:\n  coeff f h * coeff f (Suc j + 2)\n  \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n\ngoal (1 subgoal):\n 1. coeff f (Suc j + 1) \\<noteq> 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. coeff f (Suc j + 1) \\<noteq> 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "assume 1: \"coeff f (Suc j + 1) \\<noteq> 0\""], ["proof (state)\nthis:\n  coeff f (Suc j + 1) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. coeff f (Suc j + 1) \\<noteq> 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "show \"coeff f h * coeff f (Suc j + 2) \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "proof (cases \"coeff f (Suc j) = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. coeff f (Suc j) = 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n 2. coeff f (Suc j) \\<noteq> 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "assume 2: \"coeff f (Suc j) = 0\""], ["proof (state)\nthis:\n  coeff f (Suc j) = 0\n\ngoal (2 subgoals):\n 1. coeff f (Suc j) = 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n 2. coeff f (Suc j) \\<noteq> 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "hence \"coeff f (Suc j + 1) > 0\" \"\\<not>coeff f (Suc j) > 0\""], ["proof (prove)\nusing this:\n  coeff f (Suc j) = 0\n\ngoal (1 subgoal):\n 1. 0 < coeff f (Suc j + 1) &&& \\<not> 0 < coeff f (Suc j)", "using normal_coeff_nonneg[of f \"Suc j + 1\"] assms(1) 1"], ["proof (prove)\nusing this:\n  coeff f (Suc j) = 0\n  normal_poly f \\<Longrightarrow> 0 \\<le> coeff f (Suc j + 1)\n  normal_poly f\n  coeff f (Suc j + 1) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 0 < coeff f (Suc j + 1) &&& \\<not> 0 < coeff f (Suc j)", "by auto"], ["proof (state)\nthis:\n  0 < coeff f (Suc j + 1)\n  \\<not> 0 < coeff f (Suc j)\n\ngoal (2 subgoals):\n 1. coeff f (Suc j) = 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n 2. coeff f (Suc j) \\<noteq> 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "hence \"coeff f h > 0 \\<Longrightarrow> False\""], ["proof (prove)\nusing this:\n  0 < coeff f (Suc j + 1)\n  \\<not> 0 < coeff f (Suc j)\n\ngoal (1 subgoal):\n 1. 0 < coeff f h \\<Longrightarrow> False", "using normal_poly_pos_interval[of f h \"Suc j\" \"Suc j + 1\"] assms(1) h"], ["proof (prove)\nusing this:\n  0 < coeff f (Suc j + 1)\n  \\<not> 0 < coeff f (Suc j)\n  \\<lbrakk>normal_poly f; h \\<le> Suc j; Suc j \\<le> Suc j + 1;\n   0 < coeff f h; 0 < coeff f (Suc j + 1)\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff f (Suc j)\n  normal_poly f\n  h \\<le> Suc j\n  h \\<noteq> Suc j\n\ngoal (1 subgoal):\n 1. 0 < coeff f h \\<Longrightarrow> False", "by force"], ["proof (state)\nthis:\n  0 < coeff f h \\<Longrightarrow> False\n\ngoal (2 subgoals):\n 1. coeff f (Suc j) = 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n 2. coeff f (Suc j) \\<noteq> 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "hence \"coeff f h = 0\""], ["proof (prove)\nusing this:\n  0 < coeff f h \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. coeff f h = 0", "using normal_coeff_nonneg[OF assms(1)] less_eq_real_def"], ["proof (prove)\nusing this:\n  0 < coeff f h \\<Longrightarrow> False\n  0 \\<le> coeff f ?i\n  (?x \\<le> ?y) = (?x < ?y \\<or> ?x = ?y)\n\ngoal (1 subgoal):\n 1. coeff f h = 0", "by auto"], ["proof (state)\nthis:\n  coeff f h = 0\n\ngoal (2 subgoals):\n 1. coeff f (Suc j) = 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n 2. coeff f (Suc j) \\<noteq> 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "thus \"coeff f h * coeff f (Suc j + 2) \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\""], ["proof (prove)\nusing this:\n  coeff f h = 0\n\ngoal (1 subgoal):\n 1. coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "by (simp add: assms(1) normal_coeff_nonneg)"], ["proof (state)\nthis:\n  coeff f h * coeff f (Suc j + 2)\n  \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n\ngoal (1 subgoal):\n 1. coeff f (Suc j) \\<noteq> 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. coeff f (Suc j) \\<noteq> 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "assume 2: \"coeff f (Suc j) \\<noteq> 0\""], ["proof (state)\nthis:\n  coeff f (Suc j) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. coeff f (Suc j) \\<noteq> 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "from normal_poly_coeff_mult[OF assms(1), of \"Suc j\"] normal_coeff_nonneg[OF assms(1), of \"Suc j\"]\n          normal_coeff_nonneg[OF assms(1), of \"Suc (Suc j)\"] 1 2"], ["proof (chain)\npicking this:\n  coeff f (Suc j) * coeff f (Suc j + 2) \\<le> (coeff f (Suc j + 1))\\<^sup>2\n  0 \\<le> coeff f (Suc j)\n  0 \\<le> coeff f (Suc (Suc j))\n  coeff f (Suc j + 1) \\<noteq> 0\n  coeff f (Suc j) \\<noteq> 0", "have 3: \"coeff f (Suc j + 1) / coeff f (Suc j) \\<ge> coeff f (Suc j + 2) / coeff f (Suc j + 1)\""], ["proof (prove)\nusing this:\n  coeff f (Suc j) * coeff f (Suc j + 2) \\<le> (coeff f (Suc j + 1))\\<^sup>2\n  0 \\<le> coeff f (Suc j)\n  0 \\<le> coeff f (Suc (Suc j))\n  coeff f (Suc j + 1) \\<noteq> 0\n  coeff f (Suc j) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. coeff f (Suc j + 2) / coeff f (Suc j + 1)\n    \\<le> coeff f (Suc j + 1) / coeff f (Suc j)", "by (auto simp: power2_eq_square divide_simps algebra_simps)"], ["proof (state)\nthis:\n  coeff f (Suc j + 2) / coeff f (Suc j + 1)\n  \\<le> coeff f (Suc j + 1) / coeff f (Suc j)\n\ngoal (1 subgoal):\n 1. coeff f (Suc j) \\<noteq> 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "have \"(coeff f h * coeff f (j + 2)) * (coeff f (Suc j + 2) / coeff f (Suc j + 1)) \\<le> (coeff f (h + 1) * coeff f (j + 1)) * (coeff f (Suc j + 1) / coeff f (Suc j))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. coeff f h * coeff f (j + 2) *\n    (coeff f (Suc j + 2) / coeff f (Suc j + 1))\n    \\<le> coeff f (h + 1) * coeff f (j + 1) *\n          (coeff f (Suc j + 1) / coeff f (Suc j))", "apply (rule mult_mono[OF IH])"], ["proof (prove)\ngoal (3 subgoals):\n 1. coeff f (Suc j + 2) / coeff f (Suc j + 1)\n    \\<le> coeff f (Suc j + 1) / coeff f (Suc j)\n 2. 0 \\<le> coeff f (h + 1) * coeff f (j + 1)\n 3. 0 \\<le> coeff f (Suc j + 2) / coeff f (Suc j + 1)", "using 3"], ["proof (prove)\nusing this:\n  coeff f (Suc j + 2) / coeff f (Suc j + 1)\n  \\<le> coeff f (Suc j + 1) / coeff f (Suc j)\n\ngoal (3 subgoals):\n 1. coeff f (Suc j + 2) / coeff f (Suc j + 1)\n    \\<le> coeff f (Suc j + 1) / coeff f (Suc j)\n 2. 0 \\<le> coeff f (h + 1) * coeff f (j + 1)\n 3. 0 \\<le> coeff f (Suc j + 2) / coeff f (Suc j + 1)", "by (simp_all add: assms(1) normal_coeff_nonneg)"], ["proof (state)\nthis:\n  coeff f h * coeff f (j + 2) * (coeff f (Suc j + 2) / coeff f (Suc j + 1))\n  \\<le> coeff f (h + 1) * coeff f (j + 1) *\n        (coeff f (Suc j + 1) / coeff f (Suc j))\n\ngoal (1 subgoal):\n 1. coeff f (Suc j) \\<noteq> 0 \\<Longrightarrow>\n    coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "thus \"coeff f h * coeff f (Suc j + 2) \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\""], ["proof (prove)\nusing this:\n  coeff f h * coeff f (j + 2) * (coeff f (Suc j + 2) / coeff f (Suc j + 1))\n  \\<le> coeff f (h + 1) * coeff f (j + 1) *\n        (coeff f (Suc j + 1) / coeff f (Suc j))\n\ngoal (1 subgoal):\n 1. coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "using 1 2"], ["proof (prove)\nusing this:\n  coeff f h * coeff f (j + 2) * (coeff f (Suc j + 2) / coeff f (Suc j + 1))\n  \\<le> coeff f (h + 1) * coeff f (j + 1) *\n        (coeff f (Suc j + 1) / coeff f (Suc j))\n  coeff f (Suc j + 1) \\<noteq> 0\n  coeff f (Suc j) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. coeff f h * coeff f (Suc j + 2)\n    \\<le> coeff f (h + 1) * coeff f (Suc j + 1)", "by fastforce"], ["proof (state)\nthis:\n  coeff f h * coeff f (Suc j + 2)\n  \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  coeff f h * coeff f (Suc j + 2)\n  \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  coeff f h * coeff f (Suc j + 2)\n  \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  coeff f h * coeff f (Suc j + 2)\n  \\<le> coeff f (h + 1) * coeff f (Suc j + 1)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma normal_mult: \n  fixes f g::\"real poly\"\n  assumes hf: \"normal_poly f\" and hg: \"normal_poly g\"\n  defines \"df \\<equiv> degree f\" and \"dg \\<equiv> degree g\"\n  shows \"normal_poly (f*g)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. normal_poly (f * g)", "using df_def hf"], ["proof (prove)\nusing this:\n  df \\<equiv> degree f\n  normal_poly f\n\ngoal (1 subgoal):\n 1. normal_poly (f * g)", "proof (induction df arbitrary: f)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>f.\n       \\<lbrakk>0 = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)\n 2. \\<And>df f.\n       \\<lbrakk>\\<And>f.\n                   \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                   \\<Longrightarrow> normal_poly (f * g);\n        Suc df = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)", "text \\<open>We shall first show that without loss of generality we may assume \\<open>poly f 0 \\<noteq> 0\\<close>,\n      this is done by induction on the degree, if 0 is a root then we derive the result from \\<open>f/[:0,1:]\\<close>.\\<close>"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>f.\n       \\<lbrakk>0 = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)\n 2. \\<And>df f.\n       \\<lbrakk>\\<And>f.\n                   \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                   \\<Longrightarrow> normal_poly (f * g);\n        Suc df = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)", "fix f::\"real poly\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>f.\n       \\<lbrakk>0 = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)\n 2. \\<And>df f.\n       \\<lbrakk>\\<And>f.\n                   \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                   \\<Longrightarrow> normal_poly (f * g);\n        Suc df = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)", "fix i::nat"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>f.\n       \\<lbrakk>0 = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)\n 2. \\<And>df f.\n       \\<lbrakk>\\<And>f.\n                   \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                   \\<Longrightarrow> normal_poly (f * g);\n        Suc df = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)", "assume \"0 = degree f\" and hf: \"normal_poly f\""], ["proof (state)\nthis:\n  0 = degree f\n  normal_poly f\n\ngoal (2 subgoals):\n 1. \\<And>f.\n       \\<lbrakk>0 = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)\n 2. \\<And>df f.\n       \\<lbrakk>\\<And>f.\n                   \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                   \\<Longrightarrow> normal_poly (f * g);\n        Suc df = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)", "then"], ["proof (chain)\npicking this:\n  0 = degree f\n  normal_poly f", "obtain a where \"f = [:a:]\""], ["proof (prove)\nusing this:\n  0 = degree f\n  normal_poly f\n\ngoal (1 subgoal):\n 1. (\\<And>a. f = [:a:] \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using degree_0_iff"], ["proof (prove)\nusing this:\n  0 = degree f\n  normal_poly f\n  (degree ?P = 0) = (\\<exists>a. ?P = [:a:])\n\ngoal (1 subgoal):\n 1. (\\<And>a. f = [:a:] \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  f = [:a:]\n\ngoal (2 subgoals):\n 1. \\<And>f.\n       \\<lbrakk>0 = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)\n 2. \\<And>df f.\n       \\<lbrakk>\\<And>f.\n                   \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                   \\<Longrightarrow> normal_poly (f * g);\n        Suc df = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)", "then"], ["proof (chain)\npicking this:\n  f = [:a:]", "show \"normal_poly (f*g)\""], ["proof (prove)\nusing this:\n  f = [:a:]\n\ngoal (1 subgoal):\n 1. normal_poly (f * g)", "apply (subst normal_polyI)"], ["proof (prove)\ngoal (5 subgoals):\n 1. f = [:a:] \\<Longrightarrow> f * g \\<noteq> 0\n 2. \\<And>i. f = [:a:] \\<Longrightarrow> 0 \\<le> coeff (f * g) i\n 3. \\<And>i.\n       f = [:a:] \\<Longrightarrow>\n       coeff (f * g) i * coeff (f * g) (i + 2)\n       \\<le> (coeff (f * g) (i + 1))\\<^sup>2\n 4. \\<And>i j k.\n       \\<lbrakk>f = [:a:]; i \\<le> j; j \\<le> k; 0 < coeff (f * g) i;\n        0 < coeff (f * g) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * g) j\n 5. f = [:a:] \\<Longrightarrow> True", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. f = [:a:] \\<Longrightarrow> f * g \\<noteq> 0", "using normal_non_zero[OF hf] normal_non_zero[OF hg]"], ["proof (prove)\nusing this:\n  f \\<noteq> 0\n  g \\<noteq> 0\n\ngoal (1 subgoal):\n 1. f = [:a:] \\<Longrightarrow> f * g \\<noteq> 0", "by auto"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>i. f = [:a:] \\<Longrightarrow> 0 \\<le> coeff (f * g) i\n 2. \\<And>i.\n       f = [:a:] \\<Longrightarrow>\n       coeff (f * g) i * coeff (f * g) (i + 2)\n       \\<le> (coeff (f * g) (i + 1))\\<^sup>2\n 3. \\<And>i j k.\n       \\<lbrakk>f = [:a:]; i \\<le> j; j \\<le> k; 0 < coeff (f * g) i;\n        0 < coeff (f * g) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * g) j\n 4. f = [:a:] \\<Longrightarrow> True", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. f = [:a:] \\<Longrightarrow> 0 \\<le> coeff (f * g) i_", "using normal_coeff_nonneg[of _ 0, OF hf] normal_coeff_nonneg[OF hg]"], ["proof (prove)\nusing this:\n  0 \\<le> coeff f 0\n  0 \\<le> coeff g ?i\n\ngoal (1 subgoal):\n 1. f = [:a:] \\<Longrightarrow> 0 \\<le> coeff (f * g) i_", "by simp"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>i.\n       f = [:a:] \\<Longrightarrow>\n       coeff (f * g) i * coeff (f * g) (i + 2)\n       \\<le> (coeff (f * g) (i + 1))\\<^sup>2\n 2. \\<And>i j k.\n       \\<lbrakk>f = [:a:]; i \\<le> j; j \\<le> k; 0 < coeff (f * g) i;\n        0 < coeff (f * g) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * g) j\n 3. f = [:a:] \\<Longrightarrow> True", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. f = [:a:] \\<Longrightarrow>\n    coeff (f * g) i_ * coeff (f * g) (i_ + 2)\n    \\<le> (coeff (f * g) (i_ + 1))\\<^sup>2", "using normal_coeff_nonneg[of _ 0, OF hf] normal_poly_coeff_mult[OF hg]"], ["proof (prove)\nusing this:\n  0 \\<le> coeff f 0\n  coeff g ?i * coeff g (?i + 2) \\<le> (coeff g (?i + 1))\\<^sup>2\n\ngoal (1 subgoal):\n 1. f = [:a:] \\<Longrightarrow>\n    coeff (f * g) i_ * coeff (f * g) (i_ + 2)\n    \\<le> (coeff (f * g) (i_ + 1))\\<^sup>2", "by (auto simp: algebra_simps power2_eq_square mult_left_mono)[1]"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>i j k.\n       \\<lbrakk>f = [:a:]; i \\<le> j; j \\<le> k; 0 < coeff (f * g) i;\n        0 < coeff (f * g) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * g) j\n 2. f = [:a:] \\<Longrightarrow> True", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>f = [:a:]; i_ \\<le> j_; j_ \\<le> k_; 0 < coeff (f * g) i_;\n     0 < coeff (f * g) k_\\<rbrakk>\n    \\<Longrightarrow> 0 < coeff (f * g) j_", "using normal_non_zero[OF hf] normal_coeff_nonneg[of _ 0, OF hf] normal_poly_pos_interval[OF hg]"], ["proof (prove)\nusing this:\n  f \\<noteq> 0\n  0 \\<le> coeff f 0\n  \\<lbrakk>?i \\<le> ?j; ?j \\<le> ?k; 0 < coeff g ?i; 0 < coeff g ?k\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff g ?j\n\ngoal (1 subgoal):\n 1. \\<lbrakk>f = [:a:]; i_ \\<le> j_; j_ \\<le> k_; 0 < coeff (f * g) i_;\n     0 < coeff (f * g) k_\\<rbrakk>\n    \\<Longrightarrow> 0 < coeff (f * g) j_", "by (simp add: zero_less_mult_iff)"], ["proof (prove)\ngoal (1 subgoal):\n 1. f = [:a:] \\<Longrightarrow> True", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. f = [:a:] \\<Longrightarrow> True", "by simp"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  normal_poly (f * g)\n\ngoal (1 subgoal):\n 1. \\<And>df f.\n       \\<lbrakk>\\<And>f.\n                   \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                   \\<Longrightarrow> normal_poly (f * g);\n        Suc df = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>df f.\n       \\<lbrakk>\\<And>f.\n                   \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                   \\<Longrightarrow> normal_poly (f * g);\n        Suc df = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)", "case (Suc df)"], ["proof (state)\nthis:\n  \\<lbrakk>df = degree ?f; normal_poly ?f\\<rbrakk>\n  \\<Longrightarrow> normal_poly (?f * g)\n  Suc df = degree f\n  normal_poly f\n\ngoal (1 subgoal):\n 1. \\<And>df f.\n       \\<lbrakk>\\<And>f.\n                   \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                   \\<Longrightarrow> normal_poly (f * g);\n        Suc df = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>df = degree ?f; normal_poly ?f\\<rbrakk>\n  \\<Longrightarrow> normal_poly (?f * g)\n  Suc df = degree f\n  normal_poly f", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>df = degree ?f; normal_poly ?f\\<rbrakk>\n  \\<Longrightarrow> normal_poly (?f * g)\n  Suc df = degree f\n  normal_poly f\n\ngoal (1 subgoal):\n 1. normal_poly (f * g)", "proof (cases \"poly f 0 = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 = 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)\n 2. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "assume \"poly f 0 = 0\" and hf:\"normal_poly f\""], ["proof (state)\nthis:\n  poly f 0 = 0\n  normal_poly f\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 = 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)\n 2. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "moreover"], ["proof (state)\nthis:\n  poly f 0 = 0\n  normal_poly f\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 = 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)\n 2. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "then"], ["proof (chain)\npicking this:\n  poly f 0 = 0\n  normal_poly f", "obtain f' where hdiv: \"f = f'*[:0,1:]\""], ["proof (prove)\nusing this:\n  poly f 0 = 0\n  normal_poly f\n\ngoal (1 subgoal):\n 1. (\\<And>f'. f = f' * [:0, 1:] \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (smt (verit) dvdE mult.commute poly_eq_0_iff_dvd)"], ["proof (state)\nthis:\n  f = f' * [:0, 1:]\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 = 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)\n 2. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "ultimately"], ["proof (chain)\npicking this:\n  poly f 0 = 0\n  normal_poly f\n  f = f' * [:0, 1:]", "have hf': \"normal_poly f'\""], ["proof (prove)\nusing this:\n  poly f 0 = 0\n  normal_poly f\n  f = f' * [:0, 1:]\n\ngoal (1 subgoal):\n 1. normal_poly f'", "using normal_divide_x"], ["proof (prove)\nusing this:\n  poly f 0 = 0\n  normal_poly f\n  f = f' * [:0, 1:]\n  normal_poly (?f * [:0, 1:]) \\<Longrightarrow> normal_poly ?f\n\ngoal (1 subgoal):\n 1. normal_poly f'", "by blast"], ["proof (state)\nthis:\n  normal_poly f'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 = 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)\n 2. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "assume \"Suc df = degree f\""], ["proof (state)\nthis:\n  Suc df = degree f\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 = 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)\n 2. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "hence \"degree f' = df\""], ["proof (prove)\nusing this:\n  Suc df = degree f\n\ngoal (1 subgoal):\n 1. degree f' = df", "using hdiv normal_non_zero[OF hf']"], ["proof (prove)\nusing this:\n  Suc df = degree f\n  f = f' * [:0, 1:]\n  f' \\<noteq> 0\n\ngoal (1 subgoal):\n 1. degree f' = df", "by (auto simp: degree_mult_eq)"], ["proof (state)\nthis:\n  degree f' = df\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 = 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)\n 2. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "moreover"], ["proof (state)\nthis:\n  degree f' = df\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 = 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)\n 2. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "assume \"\\<And>f. df = degree f \\<Longrightarrow> normal_poly f \\<Longrightarrow> normal_poly (f * g)\""], ["proof (state)\nthis:\n  \\<lbrakk>df = degree ?f; normal_poly ?f\\<rbrakk>\n  \\<Longrightarrow> normal_poly (?f * g)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 = 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)\n 2. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "ultimately"], ["proof (chain)\npicking this:\n  degree f' = df\n  \\<lbrakk>df = degree ?f; normal_poly ?f\\<rbrakk>\n  \\<Longrightarrow> normal_poly (?f * g)", "have \"normal_poly (f'*g)\""], ["proof (prove)\nusing this:\n  degree f' = df\n  \\<lbrakk>df = degree ?f; normal_poly ?f\\<rbrakk>\n  \\<Longrightarrow> normal_poly (?f * g)\n\ngoal (1 subgoal):\n 1. normal_poly (f' * g)", "using hf'"], ["proof (prove)\nusing this:\n  degree f' = df\n  \\<lbrakk>df = degree ?f; normal_poly ?f\\<rbrakk>\n  \\<Longrightarrow> normal_poly (?f * g)\n  normal_poly f'\n\ngoal (1 subgoal):\n 1. normal_poly (f' * g)", "by blast"], ["proof (state)\nthis:\n  normal_poly (f' * g)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 = 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)\n 2. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "thus \"normal_poly (f*g)\""], ["proof (prove)\nusing this:\n  normal_poly (f' * g)\n\ngoal (1 subgoal):\n 1. normal_poly (f * g)", "using hdiv normal_mult_x"], ["proof (prove)\nusing this:\n  normal_poly (f' * g)\n  f = f' * [:0, 1:]\n  normal_poly ?f \\<Longrightarrow> normal_poly (?f * [:0, 1:])\n\ngoal (1 subgoal):\n 1. normal_poly (f * g)", "by fastforce"], ["proof (state)\nthis:\n  normal_poly (f * g)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "assume hf: \"normal_poly f\" and hf0: \"poly f 0 \\<noteq> 0\""], ["proof (state)\nthis:\n  normal_poly f\n  poly f 0 \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "define dg where \"dg \\<equiv> degree g\""], ["proof (state)\nthis:\n  dg \\<equiv> degree g\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "show \"normal_poly (f * g)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. normal_poly (f * g)", "using dg_def hg"], ["proof (prove)\nusing this:\n  dg \\<equiv> degree g\n  normal_poly g\n\ngoal (1 subgoal):\n 1. normal_poly (f * g)", "proof (induction dg arbitrary: g)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>g.\n       \\<lbrakk>0 = degree g; normal_poly g\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)\n 2. \\<And>dg g.\n       \\<lbrakk>\\<And>g.\n                   \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                   \\<Longrightarrow> normal_poly (f * g);\n        Suc dg = degree g; normal_poly g\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)", "text \\<open>Similarly we may assume \\<open>poly g 0 \\<noteq> 0\\<close>.\\<close>"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>g.\n       \\<lbrakk>0 = degree g; normal_poly g\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)\n 2. \\<And>dg g.\n       \\<lbrakk>\\<And>g.\n                   \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                   \\<Longrightarrow> normal_poly (f * g);\n        Suc dg = degree g; normal_poly g\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)", "fix g::\"real poly\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>g.\n       \\<lbrakk>0 = degree g; normal_poly g\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)\n 2. \\<And>dg g.\n       \\<lbrakk>\\<And>g.\n                   \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                   \\<Longrightarrow> normal_poly (f * g);\n        Suc dg = degree g; normal_poly g\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)", "fix i::nat"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>g.\n       \\<lbrakk>0 = degree g; normal_poly g\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)\n 2. \\<And>dg g.\n       \\<lbrakk>\\<And>g.\n                   \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                   \\<Longrightarrow> normal_poly (f * g);\n        Suc dg = degree g; normal_poly g\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)", "assume \"0 = degree g\" and hg: \"normal_poly g\""], ["proof (state)\nthis:\n  0 = degree g\n  normal_poly g\n\ngoal (2 subgoals):\n 1. \\<And>g.\n       \\<lbrakk>0 = degree g; normal_poly g\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)\n 2. \\<And>dg g.\n       \\<lbrakk>\\<And>g.\n                   \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                   \\<Longrightarrow> normal_poly (f * g);\n        Suc dg = degree g; normal_poly g\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)", "then"], ["proof (chain)\npicking this:\n  0 = degree g\n  normal_poly g", "obtain a where \"g = [:a:]\""], ["proof (prove)\nusing this:\n  0 = degree g\n  normal_poly g\n\ngoal (1 subgoal):\n 1. (\\<And>a. g = [:a:] \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using degree_0_iff"], ["proof (prove)\nusing this:\n  0 = degree g\n  normal_poly g\n  (degree ?P = 0) = (\\<exists>a. ?P = [:a:])\n\ngoal (1 subgoal):\n 1. (\\<And>a. g = [:a:] \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  g = [:a:]\n\ngoal (2 subgoals):\n 1. \\<And>g.\n       \\<lbrakk>0 = degree g; normal_poly g\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)\n 2. \\<And>dg g.\n       \\<lbrakk>\\<And>g.\n                   \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                   \\<Longrightarrow> normal_poly (f * g);\n        Suc dg = degree g; normal_poly g\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)", "then"], ["proof (chain)\npicking this:\n  g = [:a:]", "show \"normal_poly (f*g)\""], ["proof (prove)\nusing this:\n  g = [:a:]\n\ngoal (1 subgoal):\n 1. normal_poly (f * g)", "apply (subst normal_polyI)"], ["proof (prove)\ngoal (5 subgoals):\n 1. g = [:a:] \\<Longrightarrow> f * g \\<noteq> 0\n 2. \\<And>i. g = [:a:] \\<Longrightarrow> 0 \\<le> coeff (f * g) i\n 3. \\<And>i.\n       g = [:a:] \\<Longrightarrow>\n       coeff (f * g) i * coeff (f * g) (i + 2)\n       \\<le> (coeff (f * g) (i + 1))\\<^sup>2\n 4. \\<And>i j k.\n       \\<lbrakk>g = [:a:]; i \\<le> j; j \\<le> k; 0 < coeff (f * g) i;\n        0 < coeff (f * g) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * g) j\n 5. g = [:a:] \\<Longrightarrow> True", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. g = [:a:] \\<Longrightarrow> f * g \\<noteq> 0", "using normal_non_zero[OF hg] normal_non_zero[OF hf]"], ["proof (prove)\nusing this:\n  g \\<noteq> 0\n  f \\<noteq> 0\n\ngoal (1 subgoal):\n 1. g = [:a:] \\<Longrightarrow> f * g \\<noteq> 0", "by auto"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>i. g = [:a:] \\<Longrightarrow> 0 \\<le> coeff (f * g) i\n 2. \\<And>i.\n       g = [:a:] \\<Longrightarrow>\n       coeff (f * g) i * coeff (f * g) (i + 2)\n       \\<le> (coeff (f * g) (i + 1))\\<^sup>2\n 3. \\<And>i j k.\n       \\<lbrakk>g = [:a:]; i \\<le> j; j \\<le> k; 0 < coeff (f * g) i;\n        0 < coeff (f * g) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * g) j\n 4. g = [:a:] \\<Longrightarrow> True", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. g = [:a:] \\<Longrightarrow> 0 \\<le> coeff (f * g) i_", "using normal_coeff_nonneg[of _ 0, OF hg] normal_coeff_nonneg[OF hf]"], ["proof (prove)\nusing this:\n  0 \\<le> coeff g 0\n  0 \\<le> coeff f ?i\n\ngoal (1 subgoal):\n 1. g = [:a:] \\<Longrightarrow> 0 \\<le> coeff (f * g) i_", "by simp"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>i.\n       g = [:a:] \\<Longrightarrow>\n       coeff (f * g) i * coeff (f * g) (i + 2)\n       \\<le> (coeff (f * g) (i + 1))\\<^sup>2\n 2. \\<And>i j k.\n       \\<lbrakk>g = [:a:]; i \\<le> j; j \\<le> k; 0 < coeff (f * g) i;\n        0 < coeff (f * g) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * g) j\n 3. g = [:a:] \\<Longrightarrow> True", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. g = [:a:] \\<Longrightarrow>\n    coeff (f * g) i_ * coeff (f * g) (i_ + 2)\n    \\<le> (coeff (f * g) (i_ + 1))\\<^sup>2", "using normal_coeff_nonneg[of _ 0, OF hg] normal_poly_coeff_mult[OF hf]"], ["proof (prove)\nusing this:\n  0 \\<le> coeff g 0\n  coeff f ?i * coeff f (?i + 2) \\<le> (coeff f (?i + 1))\\<^sup>2\n\ngoal (1 subgoal):\n 1. g = [:a:] \\<Longrightarrow>\n    coeff (f * g) i_ * coeff (f * g) (i_ + 2)\n    \\<le> (coeff (f * g) (i_ + 1))\\<^sup>2", "by (auto simp: algebra_simps power2_eq_square mult_left_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>i j k.\n       \\<lbrakk>g = [:a:]; i \\<le> j; j \\<le> k; 0 < coeff (f * g) i;\n        0 < coeff (f * g) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * g) j\n 2. g = [:a:] \\<Longrightarrow> True", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>g = [:a:]; i_ \\<le> j_; j_ \\<le> k_; 0 < coeff (f * g) i_;\n     0 < coeff (f * g) k_\\<rbrakk>\n    \\<Longrightarrow> 0 < coeff (f * g) j_", "using normal_non_zero[OF hf] normal_coeff_nonneg[of _ 0, OF hg] \n            normal_poly_pos_interval[OF hf]"], ["proof (prove)\nusing this:\n  f \\<noteq> 0\n  0 \\<le> coeff g 0\n  \\<lbrakk>?i \\<le> ?j; ?j \\<le> ?k; 0 < coeff f ?i; 0 < coeff f ?k\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff f ?j\n\ngoal (1 subgoal):\n 1. \\<lbrakk>g = [:a:]; i_ \\<le> j_; j_ \\<le> k_; 0 < coeff (f * g) i_;\n     0 < coeff (f * g) k_\\<rbrakk>\n    \\<Longrightarrow> 0 < coeff (f * g) j_", "by (simp add: zero_less_mult_iff)"], ["proof (prove)\ngoal (1 subgoal):\n 1. g = [:a:] \\<Longrightarrow> True", "by simp"], ["proof (state)\nthis:\n  normal_poly (f * g)\n\ngoal (1 subgoal):\n 1. \\<And>dg g.\n       \\<lbrakk>\\<And>g.\n                   \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                   \\<Longrightarrow> normal_poly (f * g);\n        Suc dg = degree g; normal_poly g\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>dg g.\n       \\<lbrakk>\\<And>g.\n                   \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                   \\<Longrightarrow> normal_poly (f * g);\n        Suc dg = degree g; normal_poly g\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)", "case (Suc dg)"], ["proof (state)\nthis:\n  \\<lbrakk>dg = degree ?g; normal_poly ?g\\<rbrakk>\n  \\<Longrightarrow> normal_poly (f * ?g)\n  Suc dg = degree g\n  normal_poly g\n\ngoal (1 subgoal):\n 1. \\<And>dg g.\n       \\<lbrakk>\\<And>g.\n                   \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                   \\<Longrightarrow> normal_poly (f * g);\n        Suc dg = degree g; normal_poly g\\<rbrakk>\n       \\<Longrightarrow> normal_poly (f * g)", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>dg = degree ?g; normal_poly ?g\\<rbrakk>\n  \\<Longrightarrow> normal_poly (f * ?g)\n  Suc dg = degree g\n  normal_poly g", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>dg = degree ?g; normal_poly ?g\\<rbrakk>\n  \\<Longrightarrow> normal_poly (f * ?g)\n  Suc dg = degree g\n  normal_poly g\n\ngoal (1 subgoal):\n 1. normal_poly (f * g)", "proof (cases \"poly g 0 = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 = 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)\n 2. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "assume \"poly g 0 = 0\" and hg:\"normal_poly g\""], ["proof (state)\nthis:\n  poly g 0 = 0\n  normal_poly g\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 = 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)\n 2. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "moreover"], ["proof (state)\nthis:\n  poly g 0 = 0\n  normal_poly g\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 = 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)\n 2. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "then"], ["proof (chain)\npicking this:\n  poly g 0 = 0\n  normal_poly g", "obtain g' where hdiv: \"g = g'*[:0,1:]\""], ["proof (prove)\nusing this:\n  poly g 0 = 0\n  normal_poly g\n\ngoal (1 subgoal):\n 1. (\\<And>g'. g = g' * [:0, 1:] \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (smt (verit) dvdE mult.commute poly_eq_0_iff_dvd)"], ["proof (state)\nthis:\n  g = g' * [:0, 1:]\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 = 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)\n 2. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "ultimately"], ["proof (chain)\npicking this:\n  poly g 0 = 0\n  normal_poly g\n  g = g' * [:0, 1:]", "have hg': \"normal_poly g'\""], ["proof (prove)\nusing this:\n  poly g 0 = 0\n  normal_poly g\n  g = g' * [:0, 1:]\n\ngoal (1 subgoal):\n 1. normal_poly g'", "using normal_divide_x"], ["proof (prove)\nusing this:\n  poly g 0 = 0\n  normal_poly g\n  g = g' * [:0, 1:]\n  normal_poly (?f * [:0, 1:]) \\<Longrightarrow> normal_poly ?f\n\ngoal (1 subgoal):\n 1. normal_poly g'", "by blast"], ["proof (state)\nthis:\n  normal_poly g'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 = 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)\n 2. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "assume \"Suc dg = degree g\""], ["proof (state)\nthis:\n  Suc dg = degree g\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 = 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)\n 2. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "hence \"degree g' = dg\""], ["proof (prove)\nusing this:\n  Suc dg = degree g\n\ngoal (1 subgoal):\n 1. degree g' = dg", "using hdiv normal_non_zero[OF hg']"], ["proof (prove)\nusing this:\n  Suc dg = degree g\n  g = g' * [:0, 1:]\n  g' \\<noteq> 0\n\ngoal (1 subgoal):\n 1. degree g' = dg", "by (auto simp: degree_mult_eq)"], ["proof (state)\nthis:\n  degree g' = dg\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 = 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)\n 2. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "moreover"], ["proof (state)\nthis:\n  degree g' = dg\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 = 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)\n 2. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "assume \"\\<And>g. dg = degree g \\<Longrightarrow> normal_poly g \\<Longrightarrow> normal_poly (f * g)\""], ["proof (state)\nthis:\n  \\<lbrakk>dg = degree ?g; normal_poly ?g\\<rbrakk>\n  \\<Longrightarrow> normal_poly (f * ?g)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 = 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)\n 2. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "ultimately"], ["proof (chain)\npicking this:\n  degree g' = dg\n  \\<lbrakk>dg = degree ?g; normal_poly ?g\\<rbrakk>\n  \\<Longrightarrow> normal_poly (f * ?g)", "have \"normal_poly (f*g')\""], ["proof (prove)\nusing this:\n  degree g' = dg\n  \\<lbrakk>dg = degree ?g; normal_poly ?g\\<rbrakk>\n  \\<Longrightarrow> normal_poly (f * ?g)\n\ngoal (1 subgoal):\n 1. normal_poly (f * g')", "using hg'"], ["proof (prove)\nusing this:\n  degree g' = dg\n  \\<lbrakk>dg = degree ?g; normal_poly ?g\\<rbrakk>\n  \\<Longrightarrow> normal_poly (f * ?g)\n  normal_poly g'\n\ngoal (1 subgoal):\n 1. normal_poly (f * g')", "by blast"], ["proof (state)\nthis:\n  normal_poly (f * g')\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 = 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)\n 2. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "thus \"normal_poly (f*g)\""], ["proof (prove)\nusing this:\n  normal_poly (f * g')\n\ngoal (1 subgoal):\n 1. normal_poly (f * g)", "using hdiv normal_mult_x"], ["proof (prove)\nusing this:\n  normal_poly (f * g')\n  g = g' * [:0, 1:]\n  normal_poly ?f \\<Longrightarrow> normal_poly (?f * [:0, 1:])\n\ngoal (1 subgoal):\n 1. normal_poly (f * g)", "by fastforce"], ["proof (state)\nthis:\n  normal_poly (f * g)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "text \\<open>It now remains to show that $(fg)_i \\geq 0$. This follows by decomposing $\\{(h, j) \\in\n              \\mathbf{Z}^2 | h > j\\} = \\{(h, j) \\in \\mathbf{Z}^2 | h \\leq j\\} \\cup \\{(h, h - 1) \\in \n              \\mathbf{Z}^2 | h \\in \\mathbf{Z}\\}$.\n              Note in order to avoid working with infinite sums over integers all these sets are\n              bounded, which adds some complexity compared to the proof of lemma 2.55 in\n              Basu, S., Pollack, R., Roy, M.-F.: Algorithms in Real Algebraic Geometry.\n              Springer Berlin Heidelberg, Berlin, Heidelberg (2016).\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "assume hg0: \"poly g 0 \\<noteq> 0\" and hg: \"normal_poly g\""], ["proof (state)\nthis:\n  poly g 0 \\<noteq> 0\n  normal_poly g\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "have \"f * g \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f * g \\<noteq> 0", "using hf hg"], ["proof (prove)\nusing this:\n  normal_poly f\n  normal_poly g\n\ngoal (1 subgoal):\n 1. f * g \\<noteq> 0", "by (simp add: normal_non_zero Suc.prems)"], ["proof (state)\nthis:\n  f * g \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "moreover"], ["proof (state)\nthis:\n  f * g \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "have \"\\<And>i. coeff (f*g) i \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i. 0 \\<le> coeff (f * g) i", "apply (subst coeff_mult, rule sum_nonneg, rule mult_nonneg_nonneg)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>i x. x \\<in> {..i} \\<Longrightarrow> 0 \\<le> coeff f x\n 2. \\<And>i x. x \\<in> {..i} \\<Longrightarrow> 0 \\<le> coeff g (i - x)", "using normal_coeff_nonneg[OF hf] normal_coeff_nonneg[OF hg]"], ["proof (prove)\nusing this:\n  0 \\<le> coeff f ?i\n  0 \\<le> coeff g ?i\n\ngoal (2 subgoals):\n 1. \\<And>i x. x \\<in> {..i} \\<Longrightarrow> 0 \\<le> coeff f x\n 2. \\<And>i x. x \\<in> {..i} \\<Longrightarrow> 0 \\<le> coeff g (i - x)", "by auto"], ["proof (state)\nthis:\n  0 \\<le> coeff (f * g) ?i\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "moreover"], ["proof (state)\nthis:\n  0 \\<le> coeff (f * g) ?i\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "have \"\n          coeff (f*g) i * coeff (f*g) (i+2) \\<le> (coeff (f*g) (i+1))^2\" for i"], ["proof (prove)\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "text \\<open>$(fg)_{i+1}^2 - (fg)_i(fg)_{i+2} = \\left(\\sum_x f_xg_{i+1-x}\\right)^2 - \n                \\left(\\sum_x f_xg_{i+2-x}\\right)\\left(\\sum_x f_xg_{i-x}\\right)$\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "have \"(coeff (f*g) (i+1))^2 - coeff (f*g) i * coeff (f*g) (i+2) = \n              (\\<Sum>x\\<le>i+1. coeff f x * coeff g (i + 1 - x)) *\n              (\\<Sum>x\\<le>i+1. coeff f x * coeff g (i + 1 - x)) -\n              (\\<Sum>x\\<le>i+2. coeff f x * coeff g (i + 2 - x)) *\n              (\\<Sum>x\\<le>i. coeff f x * coeff g (i - x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (coeff (f * g) (i + 1))\\<^sup>2 -\n    coeff (f * g) i * coeff (f * g) (i + 2) =\n    (\\<Sum>x\\<le>i + 1. coeff f x * coeff g (i + 1 - x)) *\n    (\\<Sum>x\\<le>i + 1. coeff f x * coeff g (i + 1 - x)) -\n    (\\<Sum>x\\<le>i + 2. coeff f x * coeff g (i + 2 - x)) *\n    (\\<Sum>x\\<le>i. coeff f x * coeff g (i - x))", "by (auto simp: coeff_mult power2_eq_square algebra_simps)"], ["proof (state)\nthis:\n  (coeff (f * g) (i + 1))\\<^sup>2 -\n  coeff (f * g) i * coeff (f * g) (i + 2) =\n  (\\<Sum>x\\<le>i + 1. coeff f x * coeff g (i + 1 - x)) *\n  (\\<Sum>x\\<le>i + 1. coeff f x * coeff g (i + 1 - x)) -\n  (\\<Sum>x\\<le>i + 2. coeff f x * coeff g (i + 2 - x)) *\n  (\\<Sum>x\\<le>i. coeff f x * coeff g (i - x))\n\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "text \\<open>$\\dots = \\sum_{x, y} f_xg_{i+1-x}f_yg_{i+1-y} - \\sum_{x, y} f_xg_{i+2-x}f_yg_{i-y}$\\<close>"], ["proof (state)\nthis:\n  (coeff (f * g) (i + 1))\\<^sup>2 -\n  coeff (f * g) i * coeff (f * g) (i + 2) =\n  (\\<Sum>x\\<le>i + 1. coeff f x * coeff g (i + 1 - x)) *\n  (\\<Sum>x\\<le>i + 1. coeff f x * coeff g (i + 1 - x)) -\n  (\\<Sum>x\\<le>i + 2. coeff f x * coeff g (i + 2 - x)) *\n  (\\<Sum>x\\<le>i. coeff f x * coeff g (i - x))\n\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "also"], ["proof (state)\nthis:\n  (coeff (f * g) (i + 1))\\<^sup>2 -\n  coeff (f * g) i * coeff (f * g) (i + 2) =\n  (\\<Sum>x\\<le>i + 1. coeff f x * coeff g (i + 1 - x)) *\n  (\\<Sum>x\\<le>i + 1. coeff f x * coeff g (i + 1 - x)) -\n  (\\<Sum>x\\<le>i + 2. coeff f x * coeff g (i + 2 - x)) *\n  (\\<Sum>x\\<le>i. coeff f x * coeff g (i - x))\n\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "have \"... =\n              (\\<Sum>x\\<le>i+1. \\<Sum>y\\<le>i+1. coeff f x * coeff g (i + 1 - x) *\n                                  coeff f y * coeff g (i + 1 - y)) -\n              (\\<Sum>x\\<le>i+2. \\<Sum>y\\<le>i. coeff f x * coeff g (i + 2 - x) *\n                                coeff f y * coeff g (i - y))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<le>i + 1. coeff f x * coeff g (i + 1 - x)) *\n    (\\<Sum>x\\<le>i + 1. coeff f x * coeff g (i + 1 - x)) -\n    (\\<Sum>x\\<le>i + 2. coeff f x * coeff g (i + 2 - x)) *\n    (\\<Sum>x\\<le>i. coeff f x * coeff g (i - x)) =\n    (\\<Sum>x\\<le>i + 1.\n        \\<Sum>y\\<le>i + 1.\n           coeff f x * coeff g (i + 1 - x) * coeff f y *\n           coeff g (i + 1 - y)) -\n    (\\<Sum>x\\<le>i + 2.\n        \\<Sum>y\\<le>i.\n           coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y))", "by (subst sum_product, subst sum_product, auto simp: algebra_simps)"], ["proof (state)\nthis:\n  (\\<Sum>x\\<le>i + 1. coeff f x * coeff g (i + 1 - x)) *\n  (\\<Sum>x\\<le>i + 1. coeff f x * coeff g (i + 1 - x)) -\n  (\\<Sum>x\\<le>i + 2. coeff f x * coeff g (i + 2 - x)) *\n  (\\<Sum>x\\<le>i. coeff f x * coeff g (i - x)) =\n  (\\<Sum>x\\<le>i + 1.\n      \\<Sum>y\\<le>i + 1.\n         coeff f x * coeff g (i + 1 - x) * coeff f y *\n         coeff g (i + 1 - y)) -\n  (\\<Sum>x\\<le>i + 2.\n      \\<Sum>y\\<le>i.\n         coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y))\n\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "text \\<open>$\\dots = \\sum_{h \\leq j} f_hg_{i+1-h}f_jg_{i+1-j} + \\sum_{h>j} f_hg_{i+1-h}f_jg_{i+1-j}\n                       - \\sum_{h \\leq j} f_hg_{i+2-h}f_jg_{i-j} - \\sum_{h>j} f_hg_{i+2-h}f_jg_{i-j}$\\<close>"], ["proof (state)\nthis:\n  (\\<Sum>x\\<le>i + 1. coeff f x * coeff g (i + 1 - x)) *\n  (\\<Sum>x\\<le>i + 1. coeff f x * coeff g (i + 1 - x)) -\n  (\\<Sum>x\\<le>i + 2. coeff f x * coeff g (i + 2 - x)) *\n  (\\<Sum>x\\<le>i. coeff f x * coeff g (i - x)) =\n  (\\<Sum>x\\<le>i + 1.\n      \\<Sum>y\\<le>i + 1.\n         coeff f x * coeff g (i + 1 - x) * coeff f y *\n         coeff g (i + 1 - y)) -\n  (\\<Sum>x\\<le>i + 2.\n      \\<Sum>y\\<le>i.\n         coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y))\n\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "also"], ["proof (state)\nthis:\n  (\\<Sum>x\\<le>i + 1. coeff f x * coeff g (i + 1 - x)) *\n  (\\<Sum>x\\<le>i + 1. coeff f x * coeff g (i + 1 - x)) -\n  (\\<Sum>x\\<le>i + 2. coeff f x * coeff g (i + 2 - x)) *\n  (\\<Sum>x\\<le>i. coeff f x * coeff g (i - x)) =\n  (\\<Sum>x\\<le>i + 1.\n      \\<Sum>y\\<le>i + 1.\n         coeff f x * coeff g (i + 1 - x) * coeff f y *\n         coeff g (i + 1 - y)) -\n  (\\<Sum>x\\<le>i + 2.\n      \\<Sum>y\\<le>i.\n         coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y))\n\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "have \"... =\n              (\\<Sum>(h, j)\\<in>{(h, j). i+1 \\<ge> j \\<and> j \\<ge> h}. \n                coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n              (\\<Sum>(h, j)\\<in>{(h, j). i+1 \\<ge> h \\<and> h > j}. \n                coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) -\n             ((\\<Sum>(h, j)\\<in>{(h, j). i \\<ge> j \\<and> j \\<ge> h}. \n                coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n              (\\<Sum>(h, j)\\<in>{(h, j). i + 2 \\<ge> h \\<and> h > j \\<and> i \\<ge> j}.\n                coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<le>i + 1.\n        \\<Sum>y\\<le>i + 1.\n           coeff f x * coeff g (i + 1 - x) * coeff f y *\n           coeff g (i + 1 - y)) -\n    (\\<Sum>x\\<le>i + 2.\n        \\<Sum>y\\<le>i.\n           coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<le>i + 1.\n        \\<Sum>y\\<le>i + 1.\n           coeff f x * coeff g (i + 1 - x) * coeff f y *\n           coeff g (i + 1 - y)) -\n    (\\<Sum>x\\<le>i + 2.\n        \\<Sum>y\\<le>i.\n           coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)))", "have \"(\\<Sum>x\\<le>i + 1. \\<Sum>y\\<le>i + 1. coeff f x * coeff g (i + 1 - x) * coeff f y * coeff g (i + 1 - y)) =\n              (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n                 coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n              (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n                 coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<le>i + 1.\n        \\<Sum>y\\<le>i + 1.\n           coeff f x * coeff g (i + 1 - x) * coeff f y *\n           coeff g (i + 1 - y)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))", "proof (subst sum.union_disjoint[symmetric])"], ["proof (state)\ngoal (4 subgoals):\n 1. finite {(h, j). j \\<le> i + 1 \\<and> h \\<le> j}\n 2. finite {(h, j). h \\<le> i + 1 \\<and> j < h}\n 3. {(h, j). j \\<le> i + 1 \\<and> h \\<le> j} \\<inter>\n    {(h, j). h \\<le> i + 1 \\<and> j < h} =\n    {}\n 4. (\\<Sum>x\\<le>i + 1.\n        \\<Sum>y\\<le>i + 1.\n           coeff f x * coeff g (i + 1 - x) * coeff f y *\n           coeff g (i + 1 - y)) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j} \\<union>\n                {(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))", "have H:\"{(h, j). j \\<le> i + 1 \\<and> h \\<le> j} \\<subseteq> {..i+1} \\<times> {..i+1}\"\n                     \"{(h, j). h \\<le> i + 1 \\<and> j < h} \\<subseteq> {..i+1} \\<times> {..i+1}\"\n                     \"finite ({..i+1} \\<times> {..i+1})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(h, j). j \\<le> i + 1 \\<and> h \\<le> j}\n    \\<subseteq> {..i + 1} \\<times> {..i + 1} &&&\n    {(h, j). h \\<le> i + 1 \\<and> j < h}\n    \\<subseteq> {..i + 1} \\<times> {..i + 1} &&&\n    finite ({..i + 1} \\<times> {..i + 1})", "by (fastforce, fastforce, fastforce)"], ["proof (state)\nthis:\n  {(h, j). j \\<le> i + 1 \\<and> h \\<le> j}\n  \\<subseteq> {..i + 1} \\<times> {..i + 1}\n  {(h, j). h \\<le> i + 1 \\<and> j < h}\n  \\<subseteq> {..i + 1} \\<times> {..i + 1}\n  finite ({..i + 1} \\<times> {..i + 1})\n\ngoal (4 subgoals):\n 1. finite {(h, j). j \\<le> i + 1 \\<and> h \\<le> j}\n 2. finite {(h, j). h \\<le> i + 1 \\<and> j < h}\n 3. {(h, j). j \\<le> i + 1 \\<and> h \\<le> j} \\<inter>\n    {(h, j). h \\<le> i + 1 \\<and> j < h} =\n    {}\n 4. (\\<Sum>x\\<le>i + 1.\n        \\<Sum>y\\<le>i + 1.\n           coeff f x * coeff g (i + 1 - x) * coeff f y *\n           coeff g (i + 1 - y)) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j} \\<union>\n                {(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))", "show \"finite {(h, j). j \\<le> i + 1 \\<and> h \\<le> j}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {(h, j). j \\<le> i + 1 \\<and> h \\<le> j}", "apply (rule finite_subset)"], ["proof (prove)\ngoal (2 subgoals):\n 1. {(h, j). j \\<le> i + 1 \\<and> h \\<le> j} \\<subseteq> ?B\n 2. finite ?B", "using H"], ["proof (prove)\nusing this:\n  {(h, j). j \\<le> i + 1 \\<and> h \\<le> j}\n  \\<subseteq> {..i + 1} \\<times> {..i + 1}\n  {(h, j). h \\<le> i + 1 \\<and> j < h}\n  \\<subseteq> {..i + 1} \\<times> {..i + 1}\n  finite ({..i + 1} \\<times> {..i + 1})\n\ngoal (2 subgoals):\n 1. {(h, j). j \\<le> i + 1 \\<and> h \\<le> j} \\<subseteq> ?B\n 2. finite ?B", "by (blast, blast)"], ["proof (state)\nthis:\n  finite {(h, j). j \\<le> i + 1 \\<and> h \\<le> j}\n\ngoal (3 subgoals):\n 1. finite {(h, j). h \\<le> i + 1 \\<and> j < h}\n 2. {(h, j). j \\<le> i + 1 \\<and> h \\<le> j} \\<inter>\n    {(h, j). h \\<le> i + 1 \\<and> j < h} =\n    {}\n 3. (\\<Sum>x\\<le>i + 1.\n        \\<Sum>y\\<le>i + 1.\n           coeff f x * coeff g (i + 1 - x) * coeff f y *\n           coeff g (i + 1 - y)) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j} \\<union>\n                {(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))", "show \"finite {(h, j). h \\<le> i + 1 \\<and> j < h}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {(h, j). h \\<le> i + 1 \\<and> j < h}", "apply (rule finite_subset)"], ["proof (prove)\ngoal (2 subgoals):\n 1. {(h, j). h \\<le> i + 1 \\<and> j < h} \\<subseteq> ?B\n 2. finite ?B", "using H"], ["proof (prove)\nusing this:\n  {(h, j). j \\<le> i + 1 \\<and> h \\<le> j}\n  \\<subseteq> {..i + 1} \\<times> {..i + 1}\n  {(h, j). h \\<le> i + 1 \\<and> j < h}\n  \\<subseteq> {..i + 1} \\<times> {..i + 1}\n  finite ({..i + 1} \\<times> {..i + 1})\n\ngoal (2 subgoals):\n 1. {(h, j). h \\<le> i + 1 \\<and> j < h} \\<subseteq> ?B\n 2. finite ?B", "by (blast, blast)"], ["proof (state)\nthis:\n  finite {(h, j). h \\<le> i + 1 \\<and> j < h}\n\ngoal (2 subgoals):\n 1. {(h, j). j \\<le> i + 1 \\<and> h \\<le> j} \\<inter>\n    {(h, j). h \\<le> i + 1 \\<and> j < h} =\n    {}\n 2. (\\<Sum>x\\<le>i + 1.\n        \\<Sum>y\\<le>i + 1.\n           coeff f x * coeff g (i + 1 - x) * coeff f y *\n           coeff g (i + 1 - y)) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j} \\<union>\n                {(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))", "show \"{(h, j). j \\<le> i + 1 \\<and> h \\<le> j} \\<inter> {(h, j). h \\<le> i + 1 \\<and> j < h} = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(h, j). j \\<le> i + 1 \\<and> h \\<le> j} \\<inter>\n    {(h, j). h \\<le> i + 1 \\<and> j < h} =\n    {}", "by fastforce"], ["proof (state)\nthis:\n  {(h, j). j \\<le> i + 1 \\<and> h \\<le> j} \\<inter>\n  {(h, j). h \\<le> i + 1 \\<and> j < h} =\n  {}\n\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<le>i + 1.\n        \\<Sum>y\\<le>i + 1.\n           coeff f x * coeff g (i + 1 - x) * coeff f y *\n           coeff g (i + 1 - y)) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j} \\<union>\n                {(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))", "show \"(\\<Sum>x\\<le>i + 1. \\<Sum>y\\<le>i + 1. coeff f x * coeff g (i + 1 - x) * coeff f y * coeff g (i + 1 - y)) =\n                  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j} \\<union> {(h, j). h \\<le> i + 1 \\<and> j < h}.\n                    coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<le>i + 1.\n        \\<Sum>y\\<le>i + 1.\n           coeff f x * coeff g (i + 1 - x) * coeff f y *\n           coeff g (i + 1 - y)) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j} \\<union>\n                {(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))", "apply (subst sum.cartesian_product, rule sum.cong)"], ["proof (prove)\ngoal (2 subgoals):\n 1. {..i + 1} \\<times> {..i + 1} =\n    {(h, j). j \\<le> i + 1 \\<and> h \\<le> j} \\<union>\n    {(h, j). h \\<le> i + 1 \\<and> j < h}\n 2. \\<And>x.\n       x \\<in> {(h, j). j \\<le> i + 1 \\<and> h \\<le> j} \\<union>\n               {(h, j). h \\<le> i + 1 \\<and> j < h} \\<Longrightarrow>\n       (case x of\n        (x, y) \\<Rightarrow>\n          coeff f x * coeff g (i + 1 - x) * coeff f y *\n          coeff g (i + 1 - y)) =\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))", "apply force"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j). j \\<le> i + 1 \\<and> h \\<le> j} \\<union>\n               {(h, j). h \\<le> i + 1 \\<and> j < h} \\<Longrightarrow>\n       (case x of\n        (x, y) \\<Rightarrow>\n          coeff f x * coeff g (i + 1 - x) * coeff f y *\n          coeff g (i + 1 - y)) =\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))", "by blast"], ["proof (state)\nthis:\n  (\\<Sum>x\\<le>i + 1.\n      \\<Sum>y\\<le>i + 1.\n         coeff f x * coeff g (i + 1 - x) * coeff f y *\n         coeff g (i + 1 - y)) =\n  (\\<Sum>(h, j)\n         \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j} \\<union>\n              {(h, j). h \\<le> i + 1 \\<and> j < h}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>x\\<le>i + 1.\n      \\<Sum>y\\<le>i + 1.\n         coeff f x * coeff g (i + 1 - x) * coeff f y *\n         coeff g (i + 1 - y)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))\n\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<le>i + 1.\n        \\<Sum>y\\<le>i + 1.\n           coeff f x * coeff g (i + 1 - x) * coeff f y *\n           coeff g (i + 1 - y)) -\n    (\\<Sum>x\\<le>i + 2.\n        \\<Sum>y\\<le>i.\n           coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)))", "moreover"], ["proof (state)\nthis:\n  (\\<Sum>x\\<le>i + 1.\n      \\<Sum>y\\<le>i + 1.\n         coeff f x * coeff g (i + 1 - x) * coeff f y *\n         coeff g (i + 1 - y)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))\n\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<le>i + 1.\n        \\<Sum>y\\<le>i + 1.\n           coeff f x * coeff g (i + 1 - x) * coeff f y *\n           coeff g (i + 1 - y)) -\n    (\\<Sum>x\\<le>i + 2.\n        \\<Sum>y\\<le>i.\n           coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)))", "have \"(\\<Sum>x\\<le>i + 2. \\<Sum>y\\<le>i. coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n               (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n                  coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n               (\\<Sum>(h, j)\\<in>{(h, j). i + 2 \\<ge> h \\<and> h > j \\<and> i \\<ge> j}.\n                  coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<le>i + 2.\n        \\<Sum>y\\<le>i.\n           coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n       coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))", "proof (subst sum.union_disjoint[symmetric])"], ["proof (state)\ngoal (4 subgoals):\n 1. finite {(h, j). j \\<le> i \\<and> h \\<le> j}\n 2. finite {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}\n 3. {(h, j). j \\<le> i \\<and> h \\<le> j} \\<inter>\n    {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i} =\n    {}\n 4. (\\<Sum>x\\<le>i + 2.\n        \\<Sum>y\\<le>i.\n           coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j} \\<union>\n                {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n       coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))", "have H:\"{(h, j). j \\<le> i \\<and> h \\<le> j} \\<subseteq> {..i+2} \\<times> {..i}\"\n                     \"{(h, j). i + 2 \\<ge> h \\<and> h > j \\<and> i \\<ge> j} \\<subseteq> {..i+2} \\<times> {..i}\"\n                     \"finite ({..i+2} \\<times> {..i})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(h, j). j \\<le> i \\<and> h \\<le> j}\n    \\<subseteq> {..i + 2} \\<times> {..i} &&&\n    {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}\n    \\<subseteq> {..i + 2} \\<times> {..i} &&&\n    finite ({..i + 2} \\<times> {..i})", "by (fastforce, fastforce, fastforce)"], ["proof (state)\nthis:\n  {(h, j). j \\<le> i \\<and> h \\<le> j} \\<subseteq> {..i + 2} \\<times> {..i}\n  {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}\n  \\<subseteq> {..i + 2} \\<times> {..i}\n  finite ({..i + 2} \\<times> {..i})\n\ngoal (4 subgoals):\n 1. finite {(h, j). j \\<le> i \\<and> h \\<le> j}\n 2. finite {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}\n 3. {(h, j). j \\<le> i \\<and> h \\<le> j} \\<inter>\n    {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i} =\n    {}\n 4. (\\<Sum>x\\<le>i + 2.\n        \\<Sum>y\\<le>i.\n           coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j} \\<union>\n                {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n       coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))", "show \"finite {(h, j). j \\<le> i \\<and> h \\<le> j}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {(h, j). j \\<le> i \\<and> h \\<le> j}", "apply (rule finite_subset)"], ["proof (prove)\ngoal (2 subgoals):\n 1. {(h, j). j \\<le> i \\<and> h \\<le> j} \\<subseteq> ?B\n 2. finite ?B", "using H"], ["proof (prove)\nusing this:\n  {(h, j). j \\<le> i \\<and> h \\<le> j} \\<subseteq> {..i + 2} \\<times> {..i}\n  {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}\n  \\<subseteq> {..i + 2} \\<times> {..i}\n  finite ({..i + 2} \\<times> {..i})\n\ngoal (2 subgoals):\n 1. {(h, j). j \\<le> i \\<and> h \\<le> j} \\<subseteq> ?B\n 2. finite ?B", "by (blast, blast)"], ["proof (state)\nthis:\n  finite {(h, j). j \\<le> i \\<and> h \\<le> j}\n\ngoal (3 subgoals):\n 1. finite {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}\n 2. {(h, j). j \\<le> i \\<and> h \\<le> j} \\<inter>\n    {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i} =\n    {}\n 3. (\\<Sum>x\\<le>i + 2.\n        \\<Sum>y\\<le>i.\n           coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j} \\<union>\n                {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n       coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))", "show \"finite {(h, j). i + 2 \\<ge> h \\<and> h > j \\<and> i \\<ge> j}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}", "apply (rule finite_subset)"], ["proof (prove)\ngoal (2 subgoals):\n 1. {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i} \\<subseteq> ?B\n 2. finite ?B", "using H"], ["proof (prove)\nusing this:\n  {(h, j). j \\<le> i \\<and> h \\<le> j} \\<subseteq> {..i + 2} \\<times> {..i}\n  {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}\n  \\<subseteq> {..i + 2} \\<times> {..i}\n  finite ({..i + 2} \\<times> {..i})\n\ngoal (2 subgoals):\n 1. {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i} \\<subseteq> ?B\n 2. finite ?B", "by (blast, blast)"], ["proof (state)\nthis:\n  finite {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}\n\ngoal (2 subgoals):\n 1. {(h, j). j \\<le> i \\<and> h \\<le> j} \\<inter>\n    {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i} =\n    {}\n 2. (\\<Sum>x\\<le>i + 2.\n        \\<Sum>y\\<le>i.\n           coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j} \\<union>\n                {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n       coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))", "show \"{(h, j). j \\<le> i \\<and> h \\<le> j} \\<inter> {(h, j). i + 2 \\<ge> h \\<and> h > j \\<and> i \\<ge> j} = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(h, j). j \\<le> i \\<and> h \\<le> j} \\<inter>\n    {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i} =\n    {}", "by fastforce"], ["proof (state)\nthis:\n  {(h, j). j \\<le> i \\<and> h \\<le> j} \\<inter>\n  {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i} =\n  {}\n\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<le>i + 2.\n        \\<Sum>y\\<le>i.\n           coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j} \\<union>\n                {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n       coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))", "show \"(\\<Sum>x\\<le>i + 2. \\<Sum>y\\<le>i. coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n                  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j} \\<union> {(h, j). i + 2 \\<ge> h \\<and> h > j \\<and> i \\<ge> j}.\n                     coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<le>i + 2.\n        \\<Sum>y\\<le>i.\n           coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j} \\<union>\n                {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n       coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))", "apply (subst sum.cartesian_product, rule sum.cong)"], ["proof (prove)\ngoal (2 subgoals):\n 1. {..i + 2} \\<times> {..i} =\n    {(h, j). j \\<le> i \\<and> h \\<le> j} \\<union>\n    {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}\n 2. \\<And>x.\n       x \\<in> {(h, j). j \\<le> i \\<and> h \\<le> j} \\<union>\n               {(h, j).\n                h \\<le> i + 2 \\<and>\n                j < h \\<and> j \\<le> i} \\<Longrightarrow>\n       (case x of\n        (x, y) \\<Rightarrow>\n          coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))", "apply force"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j). j \\<le> i \\<and> h \\<le> j} \\<union>\n               {(h, j).\n                h \\<le> i + 2 \\<and>\n                j < h \\<and> j \\<le> i} \\<Longrightarrow>\n       (case x of\n        (x, y) \\<Rightarrow>\n          coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))", "by blast"], ["proof (state)\nthis:\n  (\\<Sum>x\\<le>i + 2.\n      \\<Sum>y\\<le>i.\n         coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n  (\\<Sum>(h, j)\n         \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j} \\<union>\n              {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n     coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>x\\<le>i + 2.\n      \\<Sum>y\\<le>i.\n         coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n     coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))\n\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<le>i + 1.\n        \\<Sum>y\\<le>i + 1.\n           coeff f x * coeff g (i + 1 - x) * coeff f y *\n           coeff g (i + 1 - y)) -\n    (\\<Sum>x\\<le>i + 2.\n        \\<Sum>y\\<le>i.\n           coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)))", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Sum>x\\<le>i + 1.\n      \\<Sum>y\\<le>i + 1.\n         coeff f x * coeff g (i + 1 - x) * coeff f y *\n         coeff g (i + 1 - y)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))\n  (\\<Sum>x\\<le>i + 2.\n      \\<Sum>y\\<le>i.\n         coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n     coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>x\\<le>i + 1.\n      \\<Sum>y\\<le>i + 1.\n         coeff f x * coeff g (i + 1 - x) * coeff f y *\n         coeff g (i + 1 - y)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))\n  (\\<Sum>x\\<le>i + 2.\n      \\<Sum>y\\<le>i.\n         coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n     coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))\n\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<le>i + 1.\n        \\<Sum>y\\<le>i + 1.\n           coeff f x * coeff g (i + 1 - x) * coeff f y *\n           coeff g (i + 1 - y)) -\n    (\\<Sum>x\\<le>i + 2.\n        \\<Sum>y\\<le>i.\n           coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)))", "by presburger"], ["proof (state)\nthis:\n  (\\<Sum>x\\<le>i + 1.\n      \\<Sum>y\\<le>i + 1.\n         coeff f x * coeff g (i + 1 - x) * coeff f y *\n         coeff g (i + 1 - y)) -\n  (\\<Sum>x\\<le>i + 2.\n      \\<Sum>y\\<le>i.\n         coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>x\\<le>i + 1.\n      \\<Sum>y\\<le>i + 1.\n         coeff f x * coeff g (i + 1 - x) * coeff f y *\n         coeff g (i + 1 - y)) -\n  (\\<Sum>x\\<le>i + 2.\n      \\<Sum>y\\<le>i.\n         coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)))\n\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "text \\<open>$\\dots = \\sum_{h \\leq j} f_hg_{i+1-h}f_jg_{i+1-j} + \\sum_{h \\leq j} f_{j+1}g_{i-j}f_{h-2}g_{i+2-h} \n                       + \\sum_h f_hg_{i+1-h}f_{h-1}g_{i+2-h} - \\sum_{h \\leq j} f_hg_{i+2-h}f_jg_{i-j}\n                       - \\sum_{h \\leq j} f_{j+1}g_{i+1-j}f_{h-2}g_{i+1-h} - \\sum_h f_hg_{i+2-h}f_{h-1}g_{i+1-h}$\\<close>"], ["proof (state)\nthis:\n  (\\<Sum>x\\<le>i + 1.\n      \\<Sum>y\\<le>i + 1.\n         coeff f x * coeff g (i + 1 - x) * coeff f y *\n         coeff g (i + 1 - y)) -\n  (\\<Sum>x\\<le>i + 2.\n      \\<Sum>y\\<le>i.\n         coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)))\n\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "also"], ["proof (state)\nthis:\n  (\\<Sum>x\\<le>i + 1.\n      \\<Sum>y\\<le>i + 1.\n         coeff f x * coeff g (i + 1 - x) * coeff f y *\n         coeff g (i + 1 - y)) -\n  (\\<Sum>x\\<le>i + 2.\n      \\<Sum>y\\<le>i.\n         coeff f x * coeff g (i + 2 - x) * coeff f y * coeff g (i - y)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)))\n\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "have \"... =\n              (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n                 coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n              (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n                 coeff f (j+1) * coeff g (i - j) * coeff f (h-1) * coeff g (i + 2 - h)) +\n              (\\<Sum>h\\<in>{1..i+1}.\n                 coeff f h * coeff g (i + 1 - h) * coeff f (h-1) * coeff g (i + 2 - h)) -\n              ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n                  coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n               (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n                  coeff f (j+1) * coeff g (i + 1 - j) * coeff f (h-1) * coeff g (i + 1 - h)) +\n               (\\<Sum>h\\<in>{1..i+1}.\n                  coeff f h * coeff g (i + 2 - h) * coeff f (h-1) * coeff g (i + 1 - h)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>h = 1..i + 1.\n         coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n         coeff g (i + 1 - h)))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>h = 1..i + 1.\n         coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n         coeff g (i + 1 - h)))", "have \"(\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n                   coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) = \n                  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n                   coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) * coeff g (i + 2 - h)) +\n                  (\\<Sum>h = 1..i + 1. coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) * coeff g (i + 2 - h))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h))", "have 1: \"(\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n                     coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) * coeff g (i + 2 - h)) =\n                    (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}.\n                     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j).\n                 h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))", "proof (rule sum.reindex_cong)"], ["proof (state)\ngoal (3 subgoals):\n 1. inj_on ?l {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n 2. {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} =\n    ?l ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n 3. \\<And>x.\n       x \\<in> {(h, j).\n                h \\<le> i + 1 \\<and>\n                j < h \\<and> h \\<noteq> j + 1} \\<Longrightarrow>\n       (case ?l x of\n        (h, j) \\<Rightarrow>\n          coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n          coeff g (i + 2 - h)) =\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))", "show \"{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} = (\\<lambda>(h, j). (j+1, h-1)) ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} =\n    (\\<lambda>(h, j). (j + 1, h - 1)) `\n    {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\n    \\<subseteq> (\\<lambda>(h, j). (j + 1, h - 1)) `\n                {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n 2. (\\<lambda>(h, j). (j + 1, h - 1)) `\n    {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n    \\<subseteq> {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}", "show \"(\\<lambda>(h, j). (j + 1, h - 1)) ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1} \\<subseteq> {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>(h, j). (j + 1, h - 1)) `\n    {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n    \\<subseteq> {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}", "by fastforce"], ["proof (state)\nthis:\n  (\\<lambda>(h, j). (j + 1, h - 1)) `\n  {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n  \\<subseteq> {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\n\ngoal (1 subgoal):\n 1. {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\n    \\<subseteq> (\\<lambda>(h, j). (j + 1, h - 1)) `\n                {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}", "show \"{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<subseteq> (\\<lambda>(h, j). (j + 1, h - 1)) ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\n    \\<subseteq> (\\<lambda>(h, j). (j + 1, h - 1)) `\n                {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       x \\<in> (\\<lambda>(h, j). (j + 1, h - 1)) `\n               {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       x \\<in> (\\<lambda>(h, j). (j + 1, h - 1)) `\n               {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}", "assume \"x \\<in> {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\""], ["proof (state)\nthis:\n  x \\<in> {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       x \\<in> (\\<lambda>(h, j). (j + 1, h - 1)) `\n               {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}", "then"], ["proof (chain)\npicking this:\n  x \\<in> {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}", "obtain h j where \"x = (h, j)\" \"j \\<le> i\" \"h \\<le> j\" \"0 < h\""], ["proof (prove)\nusing this:\n  x \\<in> {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\n\ngoal (1 subgoal):\n 1. (\\<And>h j.\n        \\<lbrakk>x = (h, j); j \\<le> i; h \\<le> j; 0 < h\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  x = (h, j)\n  j \\<le> i\n  h \\<le> j\n  0 < h\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       x \\<in> (\\<lambda>(h, j). (j + 1, h - 1)) `\n               {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}", "hence \"j + 1 \\<le> i + 1 \\<and> h - 1 < j + 1 \\<and> j + 1 \\<noteq> h - 1 + 1 \\<and> x = ((h - 1) + 1, (j + 1) - 1)\""], ["proof (prove)\nusing this:\n  x = (h, j)\n  j \\<le> i\n  h \\<le> j\n  0 < h\n\ngoal (1 subgoal):\n 1. j + 1 \\<le> i + 1 \\<and>\n    h - 1 < j + 1 \\<and>\n    j + 1 \\<noteq> h - 1 + 1 \\<and> x = (h - 1 + 1, j + 1 - 1)", "by auto"], ["proof (state)\nthis:\n  j + 1 \\<le> i + 1 \\<and>\n  h - 1 < j + 1 \\<and>\n  j + 1 \\<noteq> h - 1 + 1 \\<and> x = (h - 1 + 1, j + 1 - 1)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       x \\<in> (\\<lambda>(h, j). (j + 1, h - 1)) `\n               {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}", "thus \"x \\<in> (\\<lambda>(h, j). (j + 1, h - 1)) ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\""], ["proof (prove)\nusing this:\n  j + 1 \\<le> i + 1 \\<and>\n  h - 1 < j + 1 \\<and>\n  j + 1 \\<noteq> h - 1 + 1 \\<and> x = (h - 1 + 1, j + 1 - 1)\n\ngoal (1 subgoal):\n 1. x \\<in> (\\<lambda>(h, j). (j + 1, h - 1)) `\n            {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}", "by (auto simp: image_iff)"], ["proof (state)\nthis:\n  x \\<in> (\\<lambda>(h, j). (j + 1, h - 1)) `\n          {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\n  \\<subseteq> (\\<lambda>(h, j). (j + 1, h - 1)) `\n              {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} =\n  (\\<lambda>(h, j). (j + 1, h - 1)) `\n  {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n\ngoal (2 subgoals):\n 1. inj_on (\\<lambda>(h, j). (j + 1, h - 1))\n     {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n 2. \\<And>x.\n       x \\<in> {(h, j).\n                h \\<le> i + 1 \\<and>\n                j < h \\<and> h \\<noteq> j + 1} \\<Longrightarrow>\n       (case case x of (h, j) \\<Rightarrow> (j + 1, h - 1) of\n        (h, j) \\<Rightarrow>\n          coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n          coeff g (i + 2 - h)) =\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))", "show \"inj_on (\\<lambda>(h, j). (j + 1, h - 1)) {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on (\\<lambda>(h, j). (j + 1, h - 1))\n     {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {(h, j).\n                         h \\<le> i + 1 \\<and>\n                         j < h \\<and> h \\<noteq> j + 1};\n        y \\<in> {(h, j).\n                 h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n        (case x of (h, j) \\<Rightarrow> (j + 1, h - 1)) =\n        (case y of (h, j) \\<Rightarrow> (j + 1, h - 1))\\<rbrakk>\n       \\<Longrightarrow> x = y", "fix x y::\"nat\\<times>nat\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {(h, j).\n                         h \\<le> i + 1 \\<and>\n                         j < h \\<and> h \\<noteq> j + 1};\n        y \\<in> {(h, j).\n                 h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n        (case x of (h, j) \\<Rightarrow> (j + 1, h - 1)) =\n        (case y of (h, j) \\<Rightarrow> (j + 1, h - 1))\\<rbrakk>\n       \\<Longrightarrow> x = y", "assume \"x \\<in> {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\" \"y \\<in> {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\""], ["proof (state)\nthis:\n  x \\<in> {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n  y \\<in> {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {(h, j).\n                         h \\<le> i + 1 \\<and>\n                         j < h \\<and> h \\<noteq> j + 1};\n        y \\<in> {(h, j).\n                 h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n        (case x of (h, j) \\<Rightarrow> (j + 1, h - 1)) =\n        (case y of (h, j) \\<Rightarrow> (j + 1, h - 1))\\<rbrakk>\n       \\<Longrightarrow> x = y", "thus \"(case x of (h, j) \\<Rightarrow> (j + 1, h - 1)) = (case y of (h, j) \\<Rightarrow> (j + 1, h - 1)) \\<Longrightarrow> x = y\""], ["proof (prove)\nusing this:\n  x \\<in> {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n  y \\<in> {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n\ngoal (1 subgoal):\n 1. (case x of (h, j) \\<Rightarrow> (j + 1, h - 1)) =\n    (case y of (h, j) \\<Rightarrow> (j + 1, h - 1)) \\<Longrightarrow>\n    x = y", "by auto"], ["proof (state)\nthis:\n  (case x of (h, j) \\<Rightarrow> (j + 1, h - 1)) =\n  (case y of (h, j) \\<Rightarrow> (j + 1, h - 1)) \\<Longrightarrow>\n  x = y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  inj_on (\\<lambda>(h, j). (j + 1, h - 1))\n   {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                h \\<le> i + 1 \\<and>\n                j < h \\<and> h \\<noteq> j + 1} \\<Longrightarrow>\n       (case case x of (h, j) \\<Rightarrow> (j + 1, h - 1) of\n        (h, j) \\<Rightarrow>\n          coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n          coeff g (i + 2 - h)) =\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))", "show \"\\<And>x. x \\<in> {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1} \\<Longrightarrow>\n                 (case case x of (h, j) \\<Rightarrow> (j + 1, h - 1) of\n                  (h, j) \\<Rightarrow> coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) * coeff g (i + 2 - h)) =\n                 (case x of (h, j) \\<Rightarrow> coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                h \\<le> i + 1 \\<and>\n                j < h \\<and> h \\<noteq> j + 1} \\<Longrightarrow>\n       (case case x of (h, j) \\<Rightarrow> (j + 1, h - 1) of\n        (h, j) \\<Rightarrow>\n          coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n          coeff g (i + 2 - h)) =\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))", "by fastforce"], ["proof (state)\nthis:\n  ?x \\<in> {(h, j).\n            h \\<le> i + 1 \\<and>\n            j < h \\<and> h \\<noteq> j + 1} \\<Longrightarrow>\n  (case case ?x of (h, j) \\<Rightarrow> (j + 1, h - 1) of\n   (h, j) \\<Rightarrow>\n     coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n     coeff g (i + 2 - h)) =\n  (case ?x of\n   (h, j) \\<Rightarrow>\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n     coeff g (i + 2 - h)) =\n  (\\<Sum>(h, j)\n         \\<in>{(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h))", "have 2: \"(\\<Sum>h = 1..i + 1. coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) * coeff g (i + 2 - h)) =\n                    (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}.\n                     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))", "proof (rule sum.reindex_cong)"], ["proof (state)\ngoal (3 subgoals):\n 1. inj_on ?l {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n 2. {1..i + 1} = ?l ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n 3. \\<And>x.\n       x \\<in> {(h, j).\n                h \\<le> i + 1 \\<and>\n                j < h \\<and> h = j + 1} \\<Longrightarrow>\n       coeff f (?l x) * coeff g (i + 1 - ?l x) * coeff f (?l x - 1) *\n       coeff g (i + 2 - ?l x) =\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))", "show \"{1..i + 1} = fst ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {1..i + 1} = fst ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. {1..i + 1}\n    \\<subseteq> fst ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n 2. fst ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n    \\<subseteq> {1..i + 1}", "show \"{1..i + 1} \\<subseteq> fst ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {1..i + 1}\n    \\<subseteq> fst ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {1..i + 1} \\<Longrightarrow>\n       x \\<in> fst ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {1..i + 1} \\<Longrightarrow>\n       x \\<in> fst ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}", "assume \"x \\<in> {1..i + 1}\""], ["proof (state)\nthis:\n  x \\<in> {1..i + 1}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {1..i + 1} \\<Longrightarrow>\n       x \\<in> fst ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}", "hence \"x \\<le> i + 1 \\<and> x - 1 < x \\<and> x = x - 1 + 1 \\<and> x = fst (x, x-1)\""], ["proof (prove)\nusing this:\n  x \\<in> {1..i + 1}\n\ngoal (1 subgoal):\n 1. x \\<le> i + 1 \\<and>\n    x - 1 < x \\<and> x = x - 1 + 1 \\<and> x = fst (x, x - 1)", "by auto"], ["proof (state)\nthis:\n  x \\<le> i + 1 \\<and>\n  x - 1 < x \\<and> x = x - 1 + 1 \\<and> x = fst (x, x - 1)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {1..i + 1} \\<Longrightarrow>\n       x \\<in> fst ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}", "thus \"x \\<in> fst ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\""], ["proof (prove)\nusing this:\n  x \\<le> i + 1 \\<and>\n  x - 1 < x \\<and> x = x - 1 + 1 \\<and> x = fst (x, x - 1)\n\ngoal (1 subgoal):\n 1. x \\<in> fst ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}", "by blast"], ["proof (state)\nthis:\n  x \\<in> fst ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {1..i + 1}\n  \\<subseteq> fst ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n\ngoal (1 subgoal):\n 1. fst ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n    \\<subseteq> {1..i + 1}", "show \"fst ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1} \\<subseteq> {1..i + 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fst ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n    \\<subseteq> {1..i + 1}", "by force"], ["proof (state)\nthis:\n  fst ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n  \\<subseteq> {1..i + 1}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {1..i + 1} = fst ` {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n\ngoal (2 subgoals):\n 1. inj_on fst {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n 2. \\<And>x.\n       x \\<in> {(h, j).\n                h \\<le> i + 1 \\<and>\n                j < h \\<and> h = j + 1} \\<Longrightarrow>\n       coeff f (fst x) * coeff g (i + 1 - fst x) * coeff f (fst x - 1) *\n       coeff g (i + 2 - fst x) =\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))", "show \"inj_on fst {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on fst {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {(h, j).\n                         h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n        y \\<in> {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n        fst x = fst y\\<rbrakk>\n       \\<Longrightarrow> x = y", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {(h, j).\n                         h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n        y \\<in> {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n        fst x = fst y\\<rbrakk>\n       \\<Longrightarrow> x = y", "assume \"x \\<in> {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\"\n                         \"y \\<in> {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\""], ["proof (state)\nthis:\n  x \\<in> {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n  y \\<in> {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {(h, j).\n                         h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n        y \\<in> {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n        fst x = fst y\\<rbrakk>\n       \\<Longrightarrow> x = y", "hence \"x = (fst x, fst x - 1)\" \"y = (fst y, fst y - 1)\" \"fst x > 0\" \"fst y > 0\""], ["proof (prove)\nusing this:\n  x \\<in> {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n  y \\<in> {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n\ngoal (1 subgoal):\n 1. (x = (fst x, fst x - 1) &&& y = (fst y, fst y - 1)) &&&\n    0 < fst x &&& 0 < fst y", "by auto"], ["proof (state)\nthis:\n  x = (fst x, fst x - 1)\n  y = (fst y, fst y - 1)\n  0 < fst x\n  0 < fst y\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {(h, j).\n                         h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n        y \\<in> {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n        fst x = fst y\\<rbrakk>\n       \\<Longrightarrow> x = y", "thus \"fst x = fst y \\<Longrightarrow> x = y\""], ["proof (prove)\nusing this:\n  x = (fst x, fst x - 1)\n  y = (fst y, fst y - 1)\n  0 < fst x\n  0 < fst y\n\ngoal (1 subgoal):\n 1. fst x = fst y \\<Longrightarrow> x = y", "by presburger"], ["proof (state)\nthis:\n  fst x = fst y \\<Longrightarrow> x = y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  inj_on fst {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                h \\<le> i + 1 \\<and>\n                j < h \\<and> h = j + 1} \\<Longrightarrow>\n       coeff f (fst x) * coeff g (i + 1 - fst x) * coeff f (fst x - 1) *\n       coeff g (i + 2 - fst x) =\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))", "show \"\\<And>x. x \\<in> {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1} \\<Longrightarrow>\n                   coeff f (fst x) * coeff g (i + 1 - fst x) * coeff f (fst x - 1) * coeff g (i + 2 - fst x) =\n                   (case x of (h, j) \\<Rightarrow> coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                h \\<le> i + 1 \\<and>\n                j < h \\<and> h = j + 1} \\<Longrightarrow>\n       coeff f (fst x) * coeff g (i + 1 - fst x) * coeff f (fst x - 1) *\n       coeff g (i + 2 - fst x) =\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))", "by fastforce"], ["proof (state)\nthis:\n  ?x \\<in> {(h, j).\n            h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1} \\<Longrightarrow>\n  coeff f (fst ?x) * coeff g (i + 1 - fst ?x) * coeff f (fst ?x - 1) *\n  coeff g (i + 2 - fst ?x) =\n  (case ?x of\n   (h, j) \\<Rightarrow>\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n      coeff g (i + 2 - h)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j))\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h))", "have H: \"{(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1} \\<subseteq> {0..i+1}\\<times>{0..i+1}\"\n                      \"{(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1} \\<subseteq> {0..i+1}\\<times>{0..i+1}\"\n                      \"finite ({0..i+1}\\<times>{0..i+1})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n    \\<subseteq> {0..i + 1} \\<times> {0..i + 1} &&&\n    {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n    \\<subseteq> {0..i + 1} \\<times> {0..i + 1} &&&\n    finite ({0..i + 1} \\<times> {0..i + 1})", "by (fastforce, fastforce, fastforce)"], ["proof (state)\nthis:\n  {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n  \\<subseteq> {0..i + 1} \\<times> {0..i + 1}\n  {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n  \\<subseteq> {0..i + 1} \\<times> {0..i + 1}\n  finite ({0..i + 1} \\<times> {0..i + 1})\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h))", "have \"finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\"\n                   \"finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1} &&&\n    finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}", "apply (rule finite_subset)"], ["proof (prove)\ngoal (3 subgoals):\n 1. {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n    \\<subseteq> ?B\n 2. finite ?B\n 3. finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}", "using H"], ["proof (prove)\nusing this:\n  {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n  \\<subseteq> {0..i + 1} \\<times> {0..i + 1}\n  {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n  \\<subseteq> {0..i + 1} \\<times> {0..i + 1}\n  finite ({0..i + 1} \\<times> {0..i + 1})\n\ngoal (3 subgoals):\n 1. {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n    \\<subseteq> ?B\n 2. finite ?B\n 3. finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}", "apply (simp, simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}", "apply (rule finite_subset)"], ["proof (prove)\ngoal (2 subgoals):\n 1. {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1} \\<subseteq> ?B9\n 2. finite ?B9", "using H"], ["proof (prove)\nusing this:\n  {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n  \\<subseteq> {0..i + 1} \\<times> {0..i + 1}\n  {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n  \\<subseteq> {0..i + 1} \\<times> {0..i + 1}\n  finite ({0..i + 1} \\<times> {0..i + 1})\n\ngoal (2 subgoals):\n 1. {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1} \\<subseteq> ?B9\n 2. finite ?B9", "apply (simp, simp)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n  finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h))", "thus ?thesis"], ["proof (prove)\nusing this:\n  finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n  finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h))", "apply (subst 1, subst 2, subst sum.union_disjoint[symmetric])"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<lbrakk>finite\n              {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\\<rbrakk>\n    \\<Longrightarrow> finite\n                       {(h, j).\n                        h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1}\n 2. \\<lbrakk>finite\n              {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\\<rbrakk>\n    \\<Longrightarrow> finite\n                       {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n 3. \\<lbrakk>finite\n              {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\\<rbrakk>\n    \\<Longrightarrow> {(h, j).\n                       h \\<le> i + 1 \\<and>\n                       j < h \\<and> h \\<noteq> j + 1} \\<inter>\n                      {(h, j).\n                       h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1} =\n                      {}\n 4. \\<lbrakk>finite\n              {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\\<rbrakk>\n    \\<Longrightarrow> (\\<Sum>(h, j)\n                             \\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n                         coeff f h * coeff g (i + 1 - h) * coeff f j *\n                         coeff g (i + 1 - j)) =\n                      (\\<Sum>(h, j)\n                             \\<in>{(h, j).\n                                   h \\<le> i + 1 \\<and>\n                                   j < h \\<and> h \\<noteq> j + 1} \\<union>\n                                  {(h, j).\n                                   h \\<le> i + 1 \\<and>\n                                   j < h \\<and> h = j + 1}.\n                         coeff f h * coeff g (i + 1 - h) * coeff f j *\n                         coeff g (i + 1 - j))", "apply auto[3]"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>finite\n              {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\\<rbrakk>\n    \\<Longrightarrow> (\\<Sum>(h, j)\n                             \\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n                         coeff f h * coeff g (i + 1 - h) * coeff f j *\n                         coeff g (i + 1 - j)) =\n                      (\\<Sum>(h, j)\n                             \\<in>{(h, j).\n                                   h \\<le> i + 1 \\<and>\n                                   j < h \\<and> h \\<noteq> j + 1} \\<union>\n                                  {(h, j).\n                                   h \\<le> i + 1 \\<and>\n                                   j < h \\<and> h = j + 1}.\n                         coeff f h * coeff g (i + 1 - h) * coeff f j *\n                         coeff g (i + 1 - j))", "apply (rule sum.cong)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>finite\n              {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n     finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\\<rbrakk>\n    \\<Longrightarrow> {(h, j). h \\<le> i + 1 \\<and> j < h} =\n                      {(h, j).\n                       h \\<le> i + 1 \\<and>\n                       j < h \\<and> h \\<noteq> j + 1} \\<union>\n                      {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\n 2. \\<And>x.\n       \\<lbrakk>finite\n                 {(h, j).\n                  h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n        finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n        finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n        finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n        finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h \\<noteq> j + 1};\n        finite {(h, j). h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1};\n        x \\<in> {(h, j).\n                 h \\<le> i + 1 \\<and>\n                 j < h \\<and> h \\<noteq> j + 1} \\<union>\n                {(h, j).\n                 h \\<le> i + 1 \\<and> j < h \\<and> h = j + 1}\\<rbrakk>\n       \\<Longrightarrow> (case x of\n                          (h, j) \\<Rightarrow>\n                            coeff f h * coeff g (i + 1 - h) * coeff f j *\n                            coeff g (i + 1 - j)) =\n                         (case x of\n                          (h, j) \\<Rightarrow>\n                            coeff f h * coeff g (i + 1 - h) * coeff f j *\n                            coeff g (i + 1 - j))", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n     coeff g (i + 2 - h)) +\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n      coeff g (i + 2 - h))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n     coeff g (i + 2 - h)) +\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n      coeff g (i + 2 - h))\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>h = 1..i + 1.\n         coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n         coeff g (i + 1 - h)))", "moreover"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n     coeff g (i + 2 - h)) +\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n      coeff g (i + 2 - h))\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>h = 1..i + 1.\n         coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n         coeff g (i + 1 - h)))", "have \"(\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n                  coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) = \n               (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n                  coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) * coeff g (i + 1 - h)) +\n               (\\<Sum>h = 1..i + 1. coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) * coeff g (i + 1 - h))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n       coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n        coeff g (i + 1 - h))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n       coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n        coeff g (i + 1 - h))", "have 1: \"(\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n                     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) * coeff g (i + 1 - h)) =\n                    (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}.\n                     coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j).\n                 h \\<le> i + 2 \\<and>\n                 j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}.\n       coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))", "proof (rule sum.reindex_cong)"], ["proof (state)\ngoal (3 subgoals):\n 1. inj_on ?l\n     {(h, j).\n      h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n 2. {(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h} =\n    ?l `\n    {(h, j).\n     h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n 3. \\<And>x.\n       x \\<in> {(h, j).\n                h \\<le> i + 2 \\<and>\n                j < h \\<and>\n                j \\<le> i \\<and> h \\<noteq> j + 1} \\<Longrightarrow>\n       (case ?l x of\n        (h, j) \\<Rightarrow>\n          coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n          coeff g (i + 1 - h)) =\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))", "show \"{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h} = (\\<lambda>(h, j). (j+1, h-1)) ` {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h} =\n    (\\<lambda>(h, j). (j + 1, h - 1)) `\n    {(h, j).\n     h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. {(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}\n    \\<subseteq> (\\<lambda>(h, j). (j + 1, h - 1)) `\n                {(h, j).\n                 h \\<le> i + 2 \\<and>\n                 j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n 2. (\\<lambda>(h, j). (j + 1, h - 1)) `\n    {(h, j).\n     h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n    \\<subseteq> {(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}", "show \"(\\<lambda>(h, j). (j + 1, h - 1)) ` {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1} \\<subseteq> {(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>(h, j). (j + 1, h - 1)) `\n    {(h, j).\n     h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n    \\<subseteq> {(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}", "by fastforce"], ["proof (state)\nthis:\n  (\\<lambda>(h, j). (j + 1, h - 1)) `\n  {(h, j).\n   h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n  \\<subseteq> {(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}\n\ngoal (1 subgoal):\n 1. {(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}\n    \\<subseteq> (\\<lambda>(h, j). (j + 1, h - 1)) `\n                {(h, j).\n                 h \\<le> i + 2 \\<and>\n                 j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}", "show \"{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h} \\<subseteq> (\\<lambda>(h, j). (j + 1, h - 1)) ` {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}\n    \\<subseteq> (\\<lambda>(h, j). (j + 1, h - 1)) `\n                {(h, j).\n                 h \\<le> i + 2 \\<and>\n                 j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i + 1 \\<and>\n                h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       x \\<in> (\\<lambda>(h, j). (j + 1, h - 1)) `\n               {(h, j).\n                h \\<le> i + 2 \\<and>\n                j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i + 1 \\<and>\n                h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       x \\<in> (\\<lambda>(h, j). (j + 1, h - 1)) `\n               {(h, j).\n                h \\<le> i + 2 \\<and>\n                j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}", "assume \"x \\<in> {(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}\""], ["proof (state)\nthis:\n  x \\<in> {(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i + 1 \\<and>\n                h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       x \\<in> (\\<lambda>(h, j). (j + 1, h - 1)) `\n               {(h, j).\n                h \\<le> i + 2 \\<and>\n                j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}", "then"], ["proof (chain)\npicking this:\n  x \\<in> {(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}", "obtain h j where \"x = (h, j)\" \"j \\<le> i + 1\" \"h \\<le> j\" \"0 < h\""], ["proof (prove)\nusing this:\n  x \\<in> {(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}\n\ngoal (1 subgoal):\n 1. (\\<And>h j.\n        \\<lbrakk>x = (h, j); j \\<le> i + 1; h \\<le> j; 0 < h\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  x = (h, j)\n  j \\<le> i + 1\n  h \\<le> j\n  0 < h\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i + 1 \\<and>\n                h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       x \\<in> (\\<lambda>(h, j). (j + 1, h - 1)) `\n               {(h, j).\n                h \\<le> i + 2 \\<and>\n                j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}", "hence \"j + 1 \\<le> i + 2 \\<and> h - 1 < j + 1 \\<and> h - 1 \\<le> i \\<and> j + 1 \\<noteq> h - 1 + 1 \\<and> x = ((h - 1) + 1, (j + 1) - 1)\""], ["proof (prove)\nusing this:\n  x = (h, j)\n  j \\<le> i + 1\n  h \\<le> j\n  0 < h\n\ngoal (1 subgoal):\n 1. j + 1 \\<le> i + 2 \\<and>\n    h - 1 < j + 1 \\<and>\n    h - 1 \\<le> i \\<and>\n    j + 1 \\<noteq> h - 1 + 1 \\<and> x = (h - 1 + 1, j + 1 - 1)", "by auto"], ["proof (state)\nthis:\n  j + 1 \\<le> i + 2 \\<and>\n  h - 1 < j + 1 \\<and>\n  h - 1 \\<le> i \\<and>\n  j + 1 \\<noteq> h - 1 + 1 \\<and> x = (h - 1 + 1, j + 1 - 1)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i + 1 \\<and>\n                h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       x \\<in> (\\<lambda>(h, j). (j + 1, h - 1)) `\n               {(h, j).\n                h \\<le> i + 2 \\<and>\n                j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}", "thus \"x \\<in> (\\<lambda>(h, j). (j + 1, h - 1)) ` {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\""], ["proof (prove)\nusing this:\n  j + 1 \\<le> i + 2 \\<and>\n  h - 1 < j + 1 \\<and>\n  h - 1 \\<le> i \\<and>\n  j + 1 \\<noteq> h - 1 + 1 \\<and> x = (h - 1 + 1, j + 1 - 1)\n\ngoal (1 subgoal):\n 1. x \\<in> (\\<lambda>(h, j). (j + 1, h - 1)) `\n            {(h, j).\n             h \\<le> i + 2 \\<and>\n             j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}", "by (auto simp: image_iff)"], ["proof (state)\nthis:\n  x \\<in> (\\<lambda>(h, j). (j + 1, h - 1)) `\n          {(h, j).\n           h \\<le> i + 2 \\<and>\n           j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}\n  \\<subseteq> (\\<lambda>(h, j). (j + 1, h - 1)) `\n              {(h, j).\n               h \\<le> i + 2 \\<and>\n               j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h} =\n  (\\<lambda>(h, j). (j + 1, h - 1)) `\n  {(h, j).\n   h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n\ngoal (2 subgoals):\n 1. inj_on (\\<lambda>(h, j). (j + 1, h - 1))\n     {(h, j).\n      h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n 2. \\<And>x.\n       x \\<in> {(h, j).\n                h \\<le> i + 2 \\<and>\n                j < h \\<and>\n                j \\<le> i \\<and> h \\<noteq> j + 1} \\<Longrightarrow>\n       (case case x of (h, j) \\<Rightarrow> (j + 1, h - 1) of\n        (h, j) \\<Rightarrow>\n          coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n          coeff g (i + 1 - h)) =\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))", "show \"inj_on (\\<lambda>(h, j). (j + 1, h - 1)) {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on (\\<lambda>(h, j). (j + 1, h - 1))\n     {(h, j).\n      h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {(h, j).\n                         h \\<le> i + 2 \\<and>\n                         j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n        y \\<in> {(h, j).\n                 h \\<le> i + 2 \\<and>\n                 j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n        (case x of (h, j) \\<Rightarrow> (j + 1, h - 1)) =\n        (case y of (h, j) \\<Rightarrow> (j + 1, h - 1))\\<rbrakk>\n       \\<Longrightarrow> x = y", "fix x y::\"nat\\<times>nat\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {(h, j).\n                         h \\<le> i + 2 \\<and>\n                         j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n        y \\<in> {(h, j).\n                 h \\<le> i + 2 \\<and>\n                 j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n        (case x of (h, j) \\<Rightarrow> (j + 1, h - 1)) =\n        (case y of (h, j) \\<Rightarrow> (j + 1, h - 1))\\<rbrakk>\n       \\<Longrightarrow> x = y", "assume \"x \\<in> {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\" \"y \\<in> {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\""], ["proof (state)\nthis:\n  x \\<in> {(h, j).\n           h \\<le> i + 2 \\<and>\n           j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n  y \\<in> {(h, j).\n           h \\<le> i + 2 \\<and>\n           j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {(h, j).\n                         h \\<le> i + 2 \\<and>\n                         j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n        y \\<in> {(h, j).\n                 h \\<le> i + 2 \\<and>\n                 j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n        (case x of (h, j) \\<Rightarrow> (j + 1, h - 1)) =\n        (case y of (h, j) \\<Rightarrow> (j + 1, h - 1))\\<rbrakk>\n       \\<Longrightarrow> x = y", "thus \"(case x of (h, j) \\<Rightarrow> (j + 1, h - 1)) = (case y of (h, j) \\<Rightarrow> (j + 1, h - 1)) \\<Longrightarrow> x = y\""], ["proof (prove)\nusing this:\n  x \\<in> {(h, j).\n           h \\<le> i + 2 \\<and>\n           j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n  y \\<in> {(h, j).\n           h \\<le> i + 2 \\<and>\n           j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n\ngoal (1 subgoal):\n 1. (case x of (h, j) \\<Rightarrow> (j + 1, h - 1)) =\n    (case y of (h, j) \\<Rightarrow> (j + 1, h - 1)) \\<Longrightarrow>\n    x = y", "by auto"], ["proof (state)\nthis:\n  (case x of (h, j) \\<Rightarrow> (j + 1, h - 1)) =\n  (case y of (h, j) \\<Rightarrow> (j + 1, h - 1)) \\<Longrightarrow>\n  x = y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  inj_on (\\<lambda>(h, j). (j + 1, h - 1))\n   {(h, j).\n    h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                h \\<le> i + 2 \\<and>\n                j < h \\<and>\n                j \\<le> i \\<and> h \\<noteq> j + 1} \\<Longrightarrow>\n       (case case x of (h, j) \\<Rightarrow> (j + 1, h - 1) of\n        (h, j) \\<Rightarrow>\n          coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n          coeff g (i + 1 - h)) =\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))", "show \"\\<And>x. x \\<in> {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1} \\<Longrightarrow>\n                   (case case x of (h, j) \\<Rightarrow> (j + 1, h - 1) of\n                    (h, j) \\<Rightarrow> coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) * coeff g (i + 1 - h)) =\n                   (case x of (h, j) \\<Rightarrow> coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                h \\<le> i + 2 \\<and>\n                j < h \\<and>\n                j \\<le> i \\<and> h \\<noteq> j + 1} \\<Longrightarrow>\n       (case case x of (h, j) \\<Rightarrow> (j + 1, h - 1) of\n        (h, j) \\<Rightarrow>\n          coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n          coeff g (i + 1 - h)) =\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))", "by fastforce"], ["proof (state)\nthis:\n  ?x \\<in> {(h, j).\n            h \\<le> i + 2 \\<and>\n            j < h \\<and>\n            j \\<le> i \\<and> h \\<noteq> j + 1} \\<Longrightarrow>\n  (case case ?x of (h, j) \\<Rightarrow> (j + 1, h - 1) of\n   (h, j) \\<Rightarrow>\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) =\n  (case ?x of\n   (h, j) \\<Rightarrow>\n     coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) =\n  (\\<Sum>(h, j)\n         \\<in>{(h, j).\n               h \\<le> i + 2 \\<and>\n               j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}.\n     coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n       coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n        coeff g (i + 1 - h))", "have 2: \"(\\<Sum>h = 1..i + 1. coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) * coeff g (i + 1 - h)) =\n                    (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}.\n                     coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j).\n                 h \\<le> i + 2 \\<and>\n                 j < h \\<and> j \\<le> i \\<and> h = j + 1}.\n       coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))", "proof (rule sum.reindex_cong)"], ["proof (state)\ngoal (3 subgoals):\n 1. inj_on ?l\n     {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n 2. {1..i + 1} =\n    ?l `\n    {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n 3. \\<And>x.\n       x \\<in> {(h, j).\n                h \\<le> i + 2 \\<and>\n                j < h \\<and> j \\<le> i \\<and> h = j + 1} \\<Longrightarrow>\n       coeff f (?l x) * coeff g (i + 2 - ?l x) * coeff f (?l x - 1) *\n       coeff g (i + 1 - ?l x) =\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))", "show \"{1..i + 1} = fst ` {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {1..i + 1} =\n    fst `\n    {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. {1..i + 1}\n    \\<subseteq> fst `\n                {(h, j).\n                 h \\<le> i + 2 \\<and>\n                 j < h \\<and> j \\<le> i \\<and> h = j + 1}\n 2. fst `\n    {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n    \\<subseteq> {1..i + 1}", "show \"{1..i + 1} \\<subseteq> fst ` {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {1..i + 1}\n    \\<subseteq> fst `\n                {(h, j).\n                 h \\<le> i + 2 \\<and>\n                 j < h \\<and> j \\<le> i \\<and> h = j + 1}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {1..i + 1} \\<Longrightarrow>\n       x \\<in> fst `\n               {(h, j).\n                h \\<le> i + 2 \\<and>\n                j < h \\<and> j \\<le> i \\<and> h = j + 1}", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {1..i + 1} \\<Longrightarrow>\n       x \\<in> fst `\n               {(h, j).\n                h \\<le> i + 2 \\<and>\n                j < h \\<and> j \\<le> i \\<and> h = j + 1}", "assume \"x \\<in> {1..i + 1}\""], ["proof (state)\nthis:\n  x \\<in> {1..i + 1}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {1..i + 1} \\<Longrightarrow>\n       x \\<in> fst `\n               {(h, j).\n                h \\<le> i + 2 \\<and>\n                j < h \\<and> j \\<le> i \\<and> h = j + 1}", "hence \"x \\<le> i + 2 \\<and> x - 1 < x \\<and> x - 1 \\<le> i \\<and> x = x - 1 + 1 \\<and> x = fst (x, x-1)\""], ["proof (prove)\nusing this:\n  x \\<in> {1..i + 1}\n\ngoal (1 subgoal):\n 1. x \\<le> i + 2 \\<and>\n    x - 1 < x \\<and>\n    x - 1 \\<le> i \\<and> x = x - 1 + 1 \\<and> x = fst (x, x - 1)", "by auto"], ["proof (state)\nthis:\n  x \\<le> i + 2 \\<and>\n  x - 1 < x \\<and>\n  x - 1 \\<le> i \\<and> x = x - 1 + 1 \\<and> x = fst (x, x - 1)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {1..i + 1} \\<Longrightarrow>\n       x \\<in> fst `\n               {(h, j).\n                h \\<le> i + 2 \\<and>\n                j < h \\<and> j \\<le> i \\<and> h = j + 1}", "thus \"x \\<in> fst ` {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\""], ["proof (prove)\nusing this:\n  x \\<le> i + 2 \\<and>\n  x - 1 < x \\<and>\n  x - 1 \\<le> i \\<and> x = x - 1 + 1 \\<and> x = fst (x, x - 1)\n\ngoal (1 subgoal):\n 1. x \\<in> fst `\n            {(h, j).\n             h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}", "by blast"], ["proof (state)\nthis:\n  x \\<in> fst `\n          {(h, j).\n           h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {1..i + 1}\n  \\<subseteq> fst `\n              {(h, j).\n               h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n\ngoal (1 subgoal):\n 1. fst `\n    {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n    \\<subseteq> {1..i + 1}", "show \"fst ` {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1} \\<subseteq> {1..i + 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fst `\n    {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n    \\<subseteq> {1..i + 1}", "by force"], ["proof (state)\nthis:\n  fst `\n  {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n  \\<subseteq> {1..i + 1}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {1..i + 1} =\n  fst `\n  {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n\ngoal (2 subgoals):\n 1. inj_on fst\n     {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n 2. \\<And>x.\n       x \\<in> {(h, j).\n                h \\<le> i + 2 \\<and>\n                j < h \\<and> j \\<le> i \\<and> h = j + 1} \\<Longrightarrow>\n       coeff f (fst x) * coeff g (i + 2 - fst x) * coeff f (fst x - 1) *\n       coeff g (i + 1 - fst x) =\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))", "show \"inj_on fst {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on fst\n     {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {(h, j).\n                         h \\<le> i + 2 \\<and>\n                         j < h \\<and> j \\<le> i \\<and> h = j + 1};\n        y \\<in> {(h, j).\n                 h \\<le> i + 2 \\<and>\n                 j < h \\<and> j \\<le> i \\<and> h = j + 1};\n        fst x = fst y\\<rbrakk>\n       \\<Longrightarrow> x = y", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {(h, j).\n                         h \\<le> i + 2 \\<and>\n                         j < h \\<and> j \\<le> i \\<and> h = j + 1};\n        y \\<in> {(h, j).\n                 h \\<le> i + 2 \\<and>\n                 j < h \\<and> j \\<le> i \\<and> h = j + 1};\n        fst x = fst y\\<rbrakk>\n       \\<Longrightarrow> x = y", "assume \"x \\<in> {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\"\n                         \"y \\<in> {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\""], ["proof (state)\nthis:\n  x \\<in> {(h, j).\n           h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n  y \\<in> {(h, j).\n           h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {(h, j).\n                         h \\<le> i + 2 \\<and>\n                         j < h \\<and> j \\<le> i \\<and> h = j + 1};\n        y \\<in> {(h, j).\n                 h \\<le> i + 2 \\<and>\n                 j < h \\<and> j \\<le> i \\<and> h = j + 1};\n        fst x = fst y\\<rbrakk>\n       \\<Longrightarrow> x = y", "hence \"x = (fst x, fst x - 1)\" \"y = (fst y, fst y - 1)\" \"fst x > 0\" \"fst y > 0\""], ["proof (prove)\nusing this:\n  x \\<in> {(h, j).\n           h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n  y \\<in> {(h, j).\n           h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n\ngoal (1 subgoal):\n 1. (x = (fst x, fst x - 1) &&& y = (fst y, fst y - 1)) &&&\n    0 < fst x &&& 0 < fst y", "by auto"], ["proof (state)\nthis:\n  x = (fst x, fst x - 1)\n  y = (fst y, fst y - 1)\n  0 < fst x\n  0 < fst y\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>x \\<in> {(h, j).\n                         h \\<le> i + 2 \\<and>\n                         j < h \\<and> j \\<le> i \\<and> h = j + 1};\n        y \\<in> {(h, j).\n                 h \\<le> i + 2 \\<and>\n                 j < h \\<and> j \\<le> i \\<and> h = j + 1};\n        fst x = fst y\\<rbrakk>\n       \\<Longrightarrow> x = y", "thus \"fst x = fst y \\<Longrightarrow> x = y\""], ["proof (prove)\nusing this:\n  x = (fst x, fst x - 1)\n  y = (fst y, fst y - 1)\n  0 < fst x\n  0 < fst y\n\ngoal (1 subgoal):\n 1. fst x = fst y \\<Longrightarrow> x = y", "by presburger"], ["proof (state)\nthis:\n  fst x = fst y \\<Longrightarrow> x = y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  inj_on fst\n   {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                h \\<le> i + 2 \\<and>\n                j < h \\<and> j \\<le> i \\<and> h = j + 1} \\<Longrightarrow>\n       coeff f (fst x) * coeff g (i + 2 - fst x) * coeff f (fst x - 1) *\n       coeff g (i + 1 - fst x) =\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))", "show \"\\<And>x. x \\<in> {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1} \\<Longrightarrow>\n                   coeff f (fst x) * coeff g (i + 2 - fst x) * coeff f (fst x - 1) * coeff g (i + 1 - fst x) =\n                   (case x of (h, j) \\<Rightarrow> coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                h \\<le> i + 2 \\<and>\n                j < h \\<and> j \\<le> i \\<and> h = j + 1} \\<Longrightarrow>\n       coeff f (fst x) * coeff g (i + 2 - fst x) * coeff f (fst x - 1) *\n       coeff g (i + 1 - fst x) =\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))", "by fastforce"], ["proof (state)\nthis:\n  ?x \\<in> {(h, j).\n            h \\<le> i + 2 \\<and>\n            j < h \\<and> j \\<le> i \\<and> h = j + 1} \\<Longrightarrow>\n  coeff f (fst ?x) * coeff g (i + 2 - fst ?x) * coeff f (fst ?x - 1) *\n  coeff g (i + 1 - fst ?x) =\n  (case ?x of\n   (h, j) \\<Rightarrow>\n     coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n      coeff g (i + 1 - h)) =\n  (\\<Sum>(h, j)\n         \\<in>{(h, j).\n               h \\<le> i + 2 \\<and>\n               j < h \\<and> j \\<le> i \\<and> h = j + 1}.\n     coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n       coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n        coeff g (i + 1 - h))", "have H: \"{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1} \\<subseteq> {0..i+2}\\<times>{0..i}\"\n                      \"{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1} \\<subseteq> {0..i+2}\\<times>{0..i}\"\n                      \"finite ({0..i+2}\\<times>{0..i})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(h, j).\n     h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n    \\<subseteq> {0..i + 2} \\<times> {0..i} &&&\n    {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n    \\<subseteq> {0..i + 2} \\<times> {0..i} &&&\n    finite ({0..i + 2} \\<times> {0..i})", "by (fastforce, fastforce, fastforce)"], ["proof (state)\nthis:\n  {(h, j).\n   h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n  \\<subseteq> {0..i + 2} \\<times> {0..i}\n  {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n  \\<subseteq> {0..i + 2} \\<times> {0..i}\n  finite ({0..i + 2} \\<times> {0..i})\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n       coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n        coeff g (i + 1 - h))", "have \"finite {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\"\n                   \"finite {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite\n     {(h, j).\n      h \\<le> i + 2 \\<and>\n      j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1} &&&\n    finite\n     {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}", "apply (rule finite_subset)"], ["proof (prove)\ngoal (3 subgoals):\n 1. {(h, j).\n     h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n    \\<subseteq> ?B\n 2. finite ?B\n 3. finite\n     {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}", "using H"], ["proof (prove)\nusing this:\n  {(h, j).\n   h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n  \\<subseteq> {0..i + 2} \\<times> {0..i}\n  {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n  \\<subseteq> {0..i + 2} \\<times> {0..i}\n  finite ({0..i + 2} \\<times> {0..i})\n\ngoal (3 subgoals):\n 1. {(h, j).\n     h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n    \\<subseteq> ?B\n 2. finite ?B\n 3. finite\n     {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}", "apply (simp, simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite\n     {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}", "apply (rule finite_subset)"], ["proof (prove)\ngoal (2 subgoals):\n 1. {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n    \\<subseteq> ?B9\n 2. finite ?B9", "using H"], ["proof (prove)\nusing this:\n  {(h, j).\n   h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n  \\<subseteq> {0..i + 2} \\<times> {0..i}\n  {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n  \\<subseteq> {0..i + 2} \\<times> {0..i}\n  finite ({0..i + 2} \\<times> {0..i})\n\ngoal (2 subgoals):\n 1. {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n    \\<subseteq> ?B9\n 2. finite ?B9", "apply (simp, simp)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  finite\n   {(h, j).\n    h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n  finite\n   {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n       coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n        coeff g (i + 1 - h))", "thus ?thesis"], ["proof (prove)\nusing this:\n  finite\n   {(h, j).\n    h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n  finite\n   {(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1}\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n       coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n        coeff g (i + 1 - h))", "apply (subst 1, subst 2, subst sum.union_disjoint[symmetric])"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<lbrakk>finite\n              {(h, j).\n               h \\<le> i + 2 \\<and>\n               j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and>\n       j < h \\<and> j \\<le> i \\<and> h = j + 1}\\<rbrakk>\n    \\<Longrightarrow> finite\n                       {(h, j).\n                        h \\<le> i + 2 \\<and>\n                        j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1}\n 2. \\<lbrakk>finite\n              {(h, j).\n               h \\<le> i + 2 \\<and>\n               j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and>\n       j < h \\<and> j \\<le> i \\<and> h = j + 1}\\<rbrakk>\n    \\<Longrightarrow> finite\n                       {(h, j).\n                        h \\<le> i + 2 \\<and>\n                        j < h \\<and> j \\<le> i \\<and> h = j + 1}\n 3. \\<lbrakk>finite\n              {(h, j).\n               h \\<le> i + 2 \\<and>\n               j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and>\n       j < h \\<and> j \\<le> i \\<and> h = j + 1}\\<rbrakk>\n    \\<Longrightarrow> {(h, j).\n                       h \\<le> i + 2 \\<and>\n                       j < h \\<and>\n                       j \\<le> i \\<and> h \\<noteq> j + 1} \\<inter>\n                      {(h, j).\n                       h \\<le> i + 2 \\<and>\n                       j < h \\<and> j \\<le> i \\<and> h = j + 1} =\n                      {}\n 4. \\<lbrakk>finite\n              {(h, j).\n               h \\<le> i + 2 \\<and>\n               j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and>\n       j < h \\<and> j \\<le> i \\<and> h = j + 1}\\<rbrakk>\n    \\<Longrightarrow> (\\<Sum>(h, j)\n                             \\<in>{(h, j).\n                                   h \\<le> i + 2 \\<and>\n                                   j < h \\<and> j \\<le> i}.\n                         coeff f h * coeff g (i + 2 - h) * coeff f j *\n                         coeff g (i - j)) =\n                      (\\<Sum>(h, j)\n                             \\<in>{(h, j).\n                                   h \\<le> i + 2 \\<and>\n                                   j < h \\<and>\n                                   j \\<le> i \\<and>\n                                   h \\<noteq> j + 1} \\<union>\n                                  {(h, j).\n                                   h \\<le> i + 2 \\<and>\n                                   j < h \\<and> j \\<le> i \\<and> h = j + 1}.\n                         coeff f h * coeff g (i + 2 - h) * coeff f j *\n                         coeff g (i - j))", "apply auto[3]"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>finite\n              {(h, j).\n               h \\<le> i + 2 \\<and>\n               j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and>\n       j < h \\<and> j \\<le> i \\<and> h = j + 1}\\<rbrakk>\n    \\<Longrightarrow> (\\<Sum>(h, j)\n                             \\<in>{(h, j).\n                                   h \\<le> i + 2 \\<and>\n                                   j < h \\<and> j \\<le> i}.\n                         coeff f h * coeff g (i + 2 - h) * coeff f j *\n                         coeff g (i - j)) =\n                      (\\<Sum>(h, j)\n                             \\<in>{(h, j).\n                                   h \\<le> i + 2 \\<and>\n                                   j < h \\<and>\n                                   j \\<le> i \\<and>\n                                   h \\<noteq> j + 1} \\<union>\n                                  {(h, j).\n                                   h \\<le> i + 2 \\<and>\n                                   j < h \\<and> j \\<le> i \\<and> h = j + 1}.\n                         coeff f h * coeff g (i + 2 - h) * coeff f j *\n                         coeff g (i - j))", "apply (rule sum.cong)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>finite\n              {(h, j).\n               h \\<le> i + 2 \\<and>\n               j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n     finite\n      {(h, j).\n       h \\<le> i + 2 \\<and>\n       j < h \\<and> j \\<le> i \\<and> h = j + 1}\\<rbrakk>\n    \\<Longrightarrow> {(h, j).\n                       h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i} =\n                      {(h, j).\n                       h \\<le> i + 2 \\<and>\n                       j < h \\<and>\n                       j \\<le> i \\<and> h \\<noteq> j + 1} \\<union>\n                      {(h, j).\n                       h \\<le> i + 2 \\<and>\n                       j < h \\<and> j \\<le> i \\<and> h = j + 1}\n 2. \\<And>x.\n       \\<lbrakk>finite\n                 {(h, j).\n                  h \\<le> i + 2 \\<and>\n                  j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n        finite\n         {(h, j).\n          h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1};\n        finite\n         {(h, j).\n          h \\<le> i + 2 \\<and>\n          j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n        finite\n         {(h, j).\n          h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1};\n        finite\n         {(h, j).\n          h \\<le> i + 2 \\<and>\n          j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1};\n        finite\n         {(h, j).\n          h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i \\<and> h = j + 1};\n        x \\<in> {(h, j).\n                 h \\<le> i + 2 \\<and>\n                 j < h \\<and> j \\<le> i \\<and> h \\<noteq> j + 1} \\<union>\n                {(h, j).\n                 h \\<le> i + 2 \\<and>\n                 j < h \\<and> j \\<le> i \\<and> h = j + 1}\\<rbrakk>\n       \\<Longrightarrow> (case x of\n                          (h, j) \\<Rightarrow>\n                            coeff f h * coeff g (i + 2 - h) * coeff f j *\n                            coeff g (i - j)) =\n                         (case x of\n                          (h, j) \\<Rightarrow>\n                            coeff f h * coeff g (i + 2 - h) * coeff f j *\n                            coeff g (i - j))", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n     coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) +\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n      coeff g (i + 1 - h))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n     coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) +\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n      coeff g (i + 1 - h))\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>h = 1..i + 1.\n         coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n         coeff g (i + 1 - h)))", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n     coeff g (i + 2 - h)) +\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n      coeff g (i + 2 - h))\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n     coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) +\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n      coeff g (i + 1 - h))", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n     coeff g (i + 2 - h)) +\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n      coeff g (i + 2 - h))\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n     coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) +\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n      coeff g (i + 1 - h))\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>h = 1..i + 1.\n         coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n         coeff g (i + 1 - h)))", "by algebra"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n     coeff g (i + 2 - h)) +\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n      coeff g (i + 2 - h)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n      coeff g (i + 1 - h)) +\n   (\\<Sum>h = 1..i + 1.\n       coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n       coeff g (i + 1 - h)))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n     coeff g (i + 2 - h)) +\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n      coeff g (i + 2 - h)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n      coeff g (i + 1 - h)) +\n   (\\<Sum>h = 1..i + 1.\n       coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n       coeff g (i + 1 - h)))\n\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "text \\<open>$\\dots = \\sum_{h \\leq j} f_hf_j\\left(g_{i+1-h}g_{i+1-j} - g_{i+2-h}g_{i-j}\\right) + \n                         \\sum_{h \\leq j} f_{j+1}f_{h-1}\\left(g_{i-j}g_{i+2-h} - g_{i+1-j}f_jg_{i+1-h}\\right)$\n\n                Note we have to also consider the edge cases caused by making these sums finite.\\<close>"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n     coeff g (i + 2 - h)) +\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n      coeff g (i + 2 - h)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n      coeff g (i + 1 - h)) +\n   (\\<Sum>h = 1..i + 1.\n       coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n       coeff g (i + 1 - h)))\n\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "also"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 1 \\<and> j < h}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). h \\<le> i + 2 \\<and> j < h \\<and> j \\<le> i}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j))) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n     coeff g (i + 2 - h)) +\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n      coeff g (i + 2 - h)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n      coeff g (i + 1 - h)) +\n   (\\<Sum>h = 1..i + 1.\n       coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n       coeff g (i + 1 - h)))\n\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "have \"... =\n              (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n                 coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n              (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n                 coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j) - coeff g (i + 2 - h) * coeff g (i - j))) +\n              (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n                 coeff f (j+1) * coeff f (h-1) * (coeff g (i - j) * coeff g (i + 2 - h) - coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n              ((\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n                  coeff f (j+1) * coeff g (i + 1 - j) * coeff f (h-1) * coeff g (i + 1 - h)))\" (is \"?L = ?R\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>h = 1..i + 1.\n         coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n         coeff g (i + 1 - h))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>h = 1..i + 1.\n         coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n         coeff g (i + 1 - h))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "have \"?R = \n              (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n                 coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n              ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n                 coeff f h * coeff f j * coeff g (i + 1 - h) * coeff g (i + 1 - j)) -\n              (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n                 coeff f h * coeff f j * coeff g (i + 2 - h) * coeff g (i - j))) +\n              ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n                 coeff f (j+1) * coeff f (h-1) * coeff g (i - j) * coeff g (i + 2 - h)) - \n              (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n                 coeff f (j+1) * coeff f (h-1) * coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n              ((\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n                  coeff f (j+1) * coeff g (i + 1 - j) * coeff f (h-1) * coeff g (i + 1 - h)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff f j * coeff g (i + 1 - h) * coeff g (i + 1 - j)) -\n     (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff f j * coeff g (i + 2 - h) * coeff g (i - j))) +\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff f (h - 1) * coeff g (i - j) *\n        coeff g (i + 2 - h)) -\n     (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff f (h - 1) * coeff g (i + 1 - j) *\n        coeff g (i + 1 - h))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "apply (subst sum_subtractf[symmetric], subst sum_subtractf[symmetric])"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>x\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f h * coeff f j * coeff g (i + 1 - h) *\n          coeff g (i + 1 - j)) -\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f h * coeff f j * coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>x\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f (j + 1) * coeff f (h - 1) * coeff g (i - j) *\n          coeff g (i + 2 - h)) -\n       (case x of\n        (h, j) \\<Rightarrow>\n          coeff f (j + 1) * coeff f (h - 1) * coeff g (i + 1 - j) *\n          coeff g (i + 1 - h))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "by (auto simp: algebra_simps split_beta)"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff f (h - 1) *\n     (coeff g (i - j) * coeff g (i + 2 - h) -\n      coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff f j * coeff g (i + 1 - h) * coeff g (i + 1 - j)) -\n   (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff f j * coeff g (i + 2 - h) * coeff g (i - j))) +\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff f (h - 1) * coeff g (i - j) *\n      coeff g (i + 2 - h)) -\n   (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff f (h - 1) * coeff g (i + 1 - j) *\n      coeff g (i + 1 - h))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h))\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>h = 1..i + 1.\n         coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n         coeff g (i + 1 - h))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "also"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff f (h - 1) *\n     (coeff g (i - j) * coeff g (i + 2 - h) -\n      coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff f j * coeff g (i + 1 - h) * coeff g (i + 1 - j)) -\n   (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff f j * coeff g (i + 2 - h) * coeff g (i - j))) +\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff f (h - 1) * coeff g (i - j) *\n      coeff g (i + 2 - h)) -\n   (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff f (h - 1) * coeff g (i + 1 - j) *\n      coeff g (i + 1 - h))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h))\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>h = 1..i + 1.\n         coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n         coeff g (i + 1 - h))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "have \"... =\n                ((\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n                   coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n                (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n                   coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j)))) -\n                 (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n                    coeff f h * coeff f j * coeff g (i + 2 - h) * coeff g (i - j)) +\n                (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n                    coeff f (j + 1) * coeff f (h - 1) * coeff g (i - j) * coeff g (i + 2 - h)) -\n                ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n                   coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) * coeff g (i + 1 - h)) +\n                (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n                   coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) * coeff g (i + 1 - h)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff f j * coeff g (i + 1 - h) * coeff g (i + 1 - j)) -\n     (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff f j * coeff g (i + 2 - h) * coeff g (i - j))) +\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff f (h - 1) * coeff g (i - j) *\n        coeff g (i + 2 - h)) -\n     (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff f (h - 1) * coeff g (i + 1 - j) *\n        coeff g (i + 1 - h))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j * coeff g (i + 2 - h) * coeff g (i - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) * coeff g (i - j) *\n       coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)))", "by (auto simp: algebra_simps)"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff f j * coeff g (i + 1 - h) * coeff g (i + 1 - j)) -\n   (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff f j * coeff g (i + 2 - h) * coeff g (i - j))) +\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff f (h - 1) * coeff g (i - j) *\n      coeff g (i + 2 - h)) -\n   (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff f (h - 1) * coeff g (i + 1 - j) *\n      coeff g (i + 1 - h))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j * coeff g (i + 2 - h) * coeff g (i - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff f (h - 1) * coeff g (i - j) *\n     coeff g (i + 2 - h)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n      coeff g (i + 1 - h)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n      coeff g (i + 1 - h)))\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>h = 1..i + 1.\n         coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n         coeff g (i + 1 - h))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "also"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff f j * coeff g (i + 1 - h) * coeff g (i + 1 - j)) -\n   (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff f j * coeff g (i + 2 - h) * coeff g (i - j))) +\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff f (h - 1) * coeff g (i - j) *\n      coeff g (i + 2 - h)) -\n   (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff f (h - 1) * coeff g (i + 1 - j) *\n      coeff g (i + 1 - h))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j * coeff g (i + 2 - h) * coeff g (i - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff f (h - 1) * coeff g (i - j) *\n     coeff g (i + 2 - h)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n      coeff g (i + 1 - h)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n      coeff g (i + 1 - h)))\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>h = 1..i + 1.\n         coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n         coeff g (i + 1 - h))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "have \"... = ?L\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j * coeff g (i + 2 - h) * coeff g (i - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) * coeff g (i - j) *\n       coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>h = 1..i + 1.\n         coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n         coeff g (i + 1 - h)))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j * coeff g (i + 2 - h) * coeff g (i - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) * coeff g (i - j) *\n       coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>h = 1..i + 1.\n         coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n         coeff g (i + 1 - h)))", "have \"(\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n                       coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n                    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n                       coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) =\n                    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n                       coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j)))", "proof (subst sum.union_disjoint[symmetric])"], ["proof (state)\ngoal (4 subgoals):\n 1. finite {(h, j). j = i + 1 \\<and> h \\<le> j}\n 2. finite {(h, j). j \\<le> i \\<and> h \\<le> j}\n 3. {(h, j). j = i + 1 \\<and> h \\<le> j} \\<inter>\n    {(h, j). j \\<le> i \\<and> h \\<le> j} =\n    {}\n 4. (\\<Sum>(h, j)\n           \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j} \\<union>\n                {(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j)))", "have \"{(h, j). j = i + 1 \\<and> h \\<le> j} \\<subseteq> {..i + 1} \\<times> {..i + 1}\"\n                     \"{(h, j). j \\<le> i \\<and> h \\<le> j} \\<subseteq> {..i + 1} \\<times> {..i + 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(h, j). j = i + 1 \\<and> h \\<le> j}\n    \\<subseteq> {..i + 1} \\<times> {..i + 1} &&&\n    {(h, j). j \\<le> i \\<and> h \\<le> j}\n    \\<subseteq> {..i + 1} \\<times> {..i + 1}", "by (fastforce, fastforce)"], ["proof (state)\nthis:\n  {(h, j). j = i + 1 \\<and> h \\<le> j}\n  \\<subseteq> {..i + 1} \\<times> {..i + 1}\n  {(h, j). j \\<le> i \\<and> h \\<le> j}\n  \\<subseteq> {..i + 1} \\<times> {..i + 1}\n\ngoal (4 subgoals):\n 1. finite {(h, j). j = i + 1 \\<and> h \\<le> j}\n 2. finite {(h, j). j \\<le> i \\<and> h \\<le> j}\n 3. {(h, j). j = i + 1 \\<and> h \\<le> j} \\<inter>\n    {(h, j). j \\<le> i \\<and> h \\<le> j} =\n    {}\n 4. (\\<Sum>(h, j)\n           \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j} \\<union>\n                {(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j)))", "thus \"finite {(h, j). j = i + 1 \\<and> h \\<le> j}\" \"finite {(h, j). j \\<le> i \\<and> h \\<le> j}\""], ["proof (prove)\nusing this:\n  {(h, j). j = i + 1 \\<and> h \\<le> j}\n  \\<subseteq> {..i + 1} \\<times> {..i + 1}\n  {(h, j). j \\<le> i \\<and> h \\<le> j}\n  \\<subseteq> {..i + 1} \\<times> {..i + 1}\n\ngoal (1 subgoal):\n 1. finite {(h, j). j = i + 1 \\<and> h \\<le> j} &&&\n    finite {(h, j). j \\<le> i \\<and> h \\<le> j}", "by (auto simp: finite_subset)"], ["proof (state)\nthis:\n  finite {(h, j). j = i + 1 \\<and> h \\<le> j}\n  finite {(h, j). j \\<le> i \\<and> h \\<le> j}\n\ngoal (2 subgoals):\n 1. {(h, j). j = i + 1 \\<and> h \\<le> j} \\<inter>\n    {(h, j). j \\<le> i \\<and> h \\<le> j} =\n    {}\n 2. (\\<Sum>(h, j)\n           \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j} \\<union>\n                {(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j)))", "show \"{(h, j). j = i + 1 \\<and> h \\<le> j} \\<inter> {(h, j). j \\<le> i \\<and> h \\<le> j} = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(h, j). j = i + 1 \\<and> h \\<le> j} \\<inter>\n    {(h, j). j \\<le> i \\<and> h \\<le> j} =\n    {}", "by fastforce"], ["proof (state)\nthis:\n  {(h, j). j = i + 1 \\<and> h \\<le> j} \\<inter>\n  {(h, j). j \\<le> i \\<and> h \\<le> j} =\n  {}\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\n           \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j} \\<union>\n                {(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j)))", "qed (rule sum.cong, auto)"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j)))\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j * coeff g (i + 2 - h) * coeff g (i - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) * coeff g (i - j) *\n       coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>h = 1..i + 1.\n         coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n         coeff g (i + 1 - h)))", "moreover"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j)))\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j * coeff g (i + 2 - h) * coeff g (i - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) * coeff g (i - j) *\n       coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>h = 1..i + 1.\n         coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n         coeff g (i + 1 - h)))", "have \"(\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n                    coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) * coeff g (i + 1 - h)) +\n                 (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n                    coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) * coeff g (i + 1 - h)) =\n                 (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n                    coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) * coeff g (i + 1 - h))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "proof (subst sum.union_disjoint[symmetric])"], ["proof (state)\ngoal (4 subgoals):\n 1. finite {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\n 2. finite {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}\n 3. {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<inter>\n    {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} =\n    {}\n 4. (\\<Sum>(h, j)\n           \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<union>\n                {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "have \"{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<subseteq> {..i + 1} \\<times> {..i + 1}\"\n                     \"{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} \\<subseteq> {..i + 1} \\<times> {..i + 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\n    \\<subseteq> {..i + 1} \\<times> {..i + 1} &&&\n    {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}\n    \\<subseteq> {..i + 1} \\<times> {..i + 1}", "by (fastforce, fastforce)"], ["proof (state)\nthis:\n  {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\n  \\<subseteq> {..i + 1} \\<times> {..i + 1}\n  {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}\n  \\<subseteq> {..i + 1} \\<times> {..i + 1}\n\ngoal (4 subgoals):\n 1. finite {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\n 2. finite {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}\n 3. {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<inter>\n    {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} =\n    {}\n 4. (\\<Sum>(h, j)\n           \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<union>\n                {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "thus \"finite {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\" \"finite {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}\""], ["proof (prove)\nusing this:\n  {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\n  \\<subseteq> {..i + 1} \\<times> {..i + 1}\n  {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}\n  \\<subseteq> {..i + 1} \\<times> {..i + 1}\n\ngoal (1 subgoal):\n 1. finite {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} &&&\n    finite {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}", "by (auto simp: finite_subset)"], ["proof (state)\nthis:\n  finite {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\n  finite {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}\n\ngoal (2 subgoals):\n 1. {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<inter>\n    {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} =\n    {}\n 2. (\\<Sum>(h, j)\n           \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<union>\n                {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "show \"{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<inter> {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<inter>\n    {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} =\n    {}", "by fastforce"], ["proof (state)\nthis:\n  {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<inter>\n  {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} =\n  {}\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\n           \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<union>\n                {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "qed (rule sum.cong, auto)"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h))\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j * coeff g (i + 2 - h) * coeff g (i - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) * coeff g (i - j) *\n       coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>h = 1..i + 1.\n         coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n         coeff g (i + 1 - h)))", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j)))\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h))", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j)))\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h))\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j * coeff g (i + 2 - h) * coeff g (i - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) * coeff g (i - j) *\n       coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>h = 1..i + 1.\n         coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n         coeff g (i + 1 - h)))", "by (auto simp: algebra_simps)"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j * coeff g (i + 2 - h) * coeff g (i - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff f (h - 1) * coeff g (i - j) *\n     coeff g (i + 2 - h)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n      coeff g (i + 1 - h)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n      coeff g (i + 1 - h))) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n     coeff g (i + 2 - h)) +\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n      coeff g (i + 2 - h)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n      coeff g (i + 1 - h)) +\n   (\\<Sum>h = 1..i + 1.\n       coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n       coeff g (i + 1 - h)))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j * coeff g (i + 2 - h) * coeff g (i - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff f (h - 1) * coeff g (i - j) *\n     coeff g (i + 2 - h)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n      coeff g (i + 1 - h)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n      coeff g (i + 1 - h))) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n     coeff g (i + 2 - h)) +\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n      coeff g (i + 2 - h)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n      coeff g (i + 1 - h)) +\n   (\\<Sum>h = 1..i + 1.\n       coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n       coeff g (i + 1 - h)))\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>h = 1..i + 1.\n         coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n         coeff g (i + 1 - h))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff f (h - 1) *\n     (coeff g (i - j) * coeff g (i + 2 - h) -\n      coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n     coeff g (i + 2 - h)) +\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n      coeff g (i + 2 - h)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n      coeff g (i + 1 - h)) +\n   (\\<Sum>h = 1..i + 1.\n       coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n       coeff g (i + 1 - h)))", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff f (h - 1) *\n     (coeff g (i - j) * coeff g (i + 2 - h) -\n      coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n     coeff g (i + 2 - h)) +\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n      coeff g (i + 2 - h)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n      coeff g (i + 1 - h)) +\n   (\\<Sum>h = 1..i + 1.\n       coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n       coeff g (i + 1 - h)))\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n       coeff g (i + 2 - h)) +\n    (\\<Sum>h = 1..i + 1.\n        coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n        coeff g (i + 2 - h)) -\n    ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n        coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n     (\\<Sum>(h, j)\n            \\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n        coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n        coeff g (i + 1 - h)) +\n     (\\<Sum>h = 1..i + 1.\n         coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n         coeff g (i + 1 - h))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "by presburger"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n     coeff g (i + 2 - h)) +\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n      coeff g (i + 2 - h)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n      coeff g (i + 1 - h)) +\n   (\\<Sum>h = 1..i + 1.\n       coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n       coeff g (i + 1 - h))) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff f (h - 1) *\n     (coeff g (i - j) * coeff g (i + 2 - h) -\n      coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n     coeff g (i + 2 - h)) +\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n      coeff g (i + 2 - h)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n      coeff g (i + 1 - h)) +\n   (\\<Sum>h = 1..i + 1.\n       coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n       coeff g (i + 1 - h))) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff f (h - 1) *\n     (coeff g (i - j) * coeff g (i + 2 - h) -\n      coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h))\n\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "text \\<open>$\\dots = \\sum_{h \\leq j} \\left(f_hf_j - f_{j+1}f_{h-1}\\right)\n                                         \\left(g_{i+1-h}g_{i+1-j} - g_{i+2-h}g_{i-j}\\right)$\\<close>"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n     coeff g (i + 2 - h)) +\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n      coeff g (i + 2 - h)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n      coeff g (i + 1 - h)) +\n   (\\<Sum>h = 1..i + 1.\n       coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n       coeff g (i + 1 - h))) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff f (h - 1) *\n     (coeff g (i - j) * coeff g (i + 2 - h) -\n      coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h))\n\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "also"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff g (i + 1 - h) * coeff f j * coeff g (i + 1 - j)) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i - j) * coeff f (h - 1) *\n     coeff g (i + 2 - h)) +\n  (\\<Sum>h = 1..i + 1.\n      coeff f h * coeff g (i + 1 - h) * coeff f (h - 1) *\n      coeff g (i + 2 - h)) -\n  ((\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n      coeff f h * coeff g (i + 2 - h) * coeff f j * coeff g (i - j)) +\n   (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n      coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n      coeff g (i + 1 - h)) +\n   (\\<Sum>h = 1..i + 1.\n       coeff f h * coeff g (i + 2 - h) * coeff f (h - 1) *\n       coeff g (i + 1 - h))) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff f (h - 1) *\n     (coeff g (i - j) * coeff g (i + 2 - h) -\n      coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h))\n\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "have \"... = \n              (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n                 -(coeff f h * coeff f j - coeff f (j+1) * coeff f (h-1)) * (coeff g (i - j) * coeff g (i + 2 - h) - coeff g (i + 1 - j) * coeff g (i + 1 - h))) +\n              (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n                 coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j) - coeff g (i + 2 - h) * coeff g (i - j))) +\n              (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n                 coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n              ((\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n                  coeff f (j+1) * coeff g (i + 1 - j) * coeff f (h-1) * coeff g (i + 1 - h)))\" (is \"?L = ?R\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       - (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       - (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "have \"(\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j) - coeff g (i + 2 - h) * coeff g (i - j))) =\n             (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j) - coeff g (i + 2 - h) * coeff g (i - j))) +\n             (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j) - coeff g (i + 2 - h) * coeff g (i - j)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j)))", "proof (subst sum.union_disjoint[symmetric])"], ["proof (state)\ngoal (4 subgoals):\n 1. finite {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\n 2. finite {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h}\n 3. {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<inter>\n    {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h} =\n    {}\n 4. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<union>\n                {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j)))", "have \"{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<subseteq> {..i}\\<times>{..i}\" \"{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h} \\<subseteq> {..i}\\<times>{..i}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\n    \\<subseteq> {..i} \\<times> {..i} &&&\n    {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h}\n    \\<subseteq> {..i} \\<times> {..i}", "by (force, force)"], ["proof (state)\nthis:\n  {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\n  \\<subseteq> {..i} \\<times> {..i}\n  {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h}\n  \\<subseteq> {..i} \\<times> {..i}\n\ngoal (4 subgoals):\n 1. finite {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\n 2. finite {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h}\n 3. {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<inter>\n    {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h} =\n    {}\n 4. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<union>\n                {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j)))", "thus \"finite {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\" \"finite {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h}\""], ["proof (prove)\nusing this:\n  {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\n  \\<subseteq> {..i} \\<times> {..i}\n  {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h}\n  \\<subseteq> {..i} \\<times> {..i}\n\ngoal (1 subgoal):\n 1. finite {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} &&&\n    finite {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h}", "by (auto simp: finite_subset)"], ["proof (state)\nthis:\n  finite {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\n  finite {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h}\n\ngoal (2 subgoals):\n 1. {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<inter>\n    {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h} =\n    {}\n 2. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<union>\n                {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j)))", "show \"{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<inter> {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h} = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<inter>\n    {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h} =\n    {}", "by fast"], ["proof (state)\nthis:\n  {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<inter>\n  {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h} =\n  {}\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<union>\n                {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j)))", "qed (rule sum.cong, auto)"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j)))\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       - (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "moreover"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j)))\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       - (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "have \"(\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n               (-coeff f h * coeff f j + coeff f (j + 1) * coeff f (h - 1)) *\n               (coeff g (i - j) * coeff g (i + 2 - h) - coeff g (i + 1 - j) * coeff g (i + 1 - h))) =\n                (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n                   coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j) - coeff g (i + 2 - h) * coeff g (i - j))) +\n                (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n                   coeff f (j + 1) * coeff f (h - 1) *\n                   (coeff g (i - j) * coeff g (i + 2 - h) - coeff g (i + 1 - j) * coeff g (i + 1 - h)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       (- coeff f h * coeff f j + coeff f (j + 1) * coeff f (h - 1)) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h)))", "by (subst sum.distrib[symmetric], rule sum.cong, fast, auto simp: algebra_simps)"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     (- coeff f h * coeff f j + coeff f (j + 1) * coeff f (h - 1)) *\n     (coeff g (i - j) * coeff g (i + 2 - h) -\n      coeff g (i + 1 - j) * coeff g (i + 1 - h))) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff f (h - 1) *\n     (coeff g (i - j) * coeff g (i + 2 - h) -\n      coeff g (i + 1 - j) * coeff g (i + 1 - h)))\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       - (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j)))\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     (- coeff f h * coeff f j + coeff f (j + 1) * coeff f (h - 1)) *\n     (coeff g (i - j) * coeff g (i + 2 - h) -\n      coeff g (i + 1 - j) * coeff g (i + 1 - h))) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff f (h - 1) *\n     (coeff g (i - j) * coeff g (i + 2 - h) -\n      coeff g (i + 1 - j) * coeff g (i + 1 - h)))", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 = h}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j)))\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     (- coeff f h * coeff f j + coeff f (j + 1) * coeff f (h - 1)) *\n     (coeff g (i - j) * coeff g (i + 2 - h) -\n      coeff g (i + 1 - j) * coeff g (i + 1 - h))) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff f (h - 1) *\n     (coeff g (i - j) * coeff g (i + 2 - h) -\n      coeff g (i + 1 - j) * coeff g (i + 1 - h)))\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff f (h - 1) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n       - (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n       (coeff g (i - j) * coeff g (i + 2 - h) -\n        coeff g (i + 1 - j) * coeff g (i + 1 - h))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n        coeff g (i + 2 - h) * coeff g (i - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "by (auto simp: algebra_simps)"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff f (h - 1) *\n     (coeff g (i - j) * coeff g (i + 2 - h) -\n      coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     - (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n     (coeff g (i - j) * coeff g (i + 2 - h) -\n      coeff g (i + 1 - j) * coeff g (i + 1 - h))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff f (h - 1) *\n     (coeff g (i - j) * coeff g (i + 2 - h) -\n      coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     - (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n     (coeff g (i - j) * coeff g (i + 2 - h) -\n      coeff g (i + 1 - j) * coeff g (i + 1 - h))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h))\n\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "text \\<open>$\\dots \\geq 0$ by \\<open>normal_poly_general_coeff_mult\\<close>\\<close>"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff f (h - 1) *\n     (coeff g (i - j) * coeff g (i + 2 - h) -\n      coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     - (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n     (coeff g (i - j) * coeff g (i + 2 - h) -\n      coeff g (i + 1 - j) * coeff g (i + 1 - h))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h))\n\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "also"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff f (h - 1) *\n     (coeff g (i - j) * coeff g (i + 2 - h) -\n      coeff g (i + 1 - j) * coeff g (i + 1 - h))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n     - (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n     (coeff g (i - j) * coeff g (i + 2 - h) -\n      coeff g (i + 1 - j) * coeff g (i + 1 - h))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n     coeff f h * coeff f j *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n      coeff g (i + 2 - h) * coeff g (i - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h))\n\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "have \"... \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>(h, j)\n                   \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n               - (coeff f h * coeff f j -\n                  coeff f (j + 1) * coeff f (h - 1)) *\n               (coeff g (i - j) * coeff g (i + 2 - h) -\n                coeff g (i + 1 - j) * coeff g (i + 1 - h))) +\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n                coeff g (i + 2 - h) * coeff g (i - j))) +\n            (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n               coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n               coeff g (i + 1 - h))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>(h, j)\n                   \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n               - (coeff f h * coeff f j -\n                  coeff f (j + 1) * coeff f (h - 1)) *\n               (coeff g (i - j) * coeff g (i + 2 - h) -\n                coeff g (i + 1 - j) * coeff g (i + 1 - h))) +\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n                coeff g (i + 2 - h) * coeff g (i - j))) +\n            (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n               coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n               coeff g (i + 1 - h))", "have \"0 \\<le> (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n                        - (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n                        (coeff g (i - j) * coeff g (i + 2 - h) - coeff g (i + 1 - j) * coeff g (i + 1 - h)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>(h, j)\n                   \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n               - (coeff f h * coeff f j -\n                  coeff f (j + 1) * coeff f (h - 1)) *\n               (coeff g (i - j) * coeff g (i + 2 - h) -\n                coeff g (i + 1 - j) * coeff g (i + 1 - h)))", "proof (rule sum_nonneg)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       0 \\<le> (case x of\n                (h, j) \\<Rightarrow>\n                  - (coeff f h * coeff f j -\n                     coeff f (j + 1) * coeff f (h - 1)) *\n                  (coeff g (i - j) * coeff g (i + 2 - h) -\n                   coeff g (i + 1 - j) * coeff g (i + 1 - h)))", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       0 \\<le> (case x of\n                (h, j) \\<Rightarrow>\n                  - (coeff f h * coeff f j -\n                     coeff f (j + 1) * coeff f (h - 1)) *\n                  (coeff g (i - j) * coeff g (i + 2 - h) -\n                   coeff g (i + 1 - j) * coeff g (i + 1 - h)))", "assume \"x \\<in> {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\""], ["proof (state)\nthis:\n  x \\<in> {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       0 \\<le> (case x of\n                (h, j) \\<Rightarrow>\n                  - (coeff f h * coeff f j -\n                     coeff f (j + 1) * coeff f (h - 1)) *\n                  (coeff g (i - j) * coeff g (i + 2 - h) -\n                   coeff g (i + 1 - j) * coeff g (i + 1 - h)))", "then"], ["proof (chain)\npicking this:\n  x \\<in> {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}", "obtain h j where H: \"x = (h, j)\" \"j \\<le> i\" \"h \\<le> j\" \"0 < h\""], ["proof (prove)\nusing this:\n  x \\<in> {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}\n\ngoal (1 subgoal):\n 1. (\\<And>h j.\n        \\<lbrakk>x = (h, j); j \\<le> i; h \\<le> j; 0 < h\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fast"], ["proof (state)\nthis:\n  x = (h, j)\n  j \\<le> i\n  h \\<le> j\n  0 < h\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       0 \\<le> (case x of\n                (h, j) \\<Rightarrow>\n                  - (coeff f h * coeff f j -\n                     coeff f (j + 1) * coeff f (h - 1)) *\n                  (coeff g (i - j) * coeff g (i + 2 - h) -\n                   coeff g (i + 1 - j) * coeff g (i + 1 - h)))", "hence \"h - 1 \\<le> j - 1\""], ["proof (prove)\nusing this:\n  x = (h, j)\n  j \\<le> i\n  h \\<le> j\n  0 < h\n\ngoal (1 subgoal):\n 1. h - 1 \\<le> j - 1", "by force"], ["proof (state)\nthis:\n  h - 1 \\<le> j - 1\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       0 \\<le> (case x of\n                (h, j) \\<Rightarrow>\n                  - (coeff f h * coeff f j -\n                     coeff f (j + 1) * coeff f (h - 1)) *\n                  (coeff g (i - j) * coeff g (i + 2 - h) -\n                   coeff g (i + 1 - j) * coeff g (i + 1 - h)))", "hence 1: \"coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1) \\<ge> 0\""], ["proof (prove)\nusing this:\n  h - 1 \\<le> j - 1\n\ngoal (1 subgoal):\n 1. 0 \\<le> coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)", "using normal_poly_general_coeff_mult[OF hf, of \"h-1\" \"j-1\"] H"], ["proof (prove)\nusing this:\n  h - 1 \\<le> j - 1\n  h - 1 \\<le> j - 1 \\<Longrightarrow>\n  coeff f (h - 1) * coeff f (j - 1 + 2)\n  \\<le> coeff f (h - 1 + 1) * coeff f (j - 1 + 1)\n  x = (h, j)\n  j \\<le> i\n  h \\<le> j\n  0 < h\n\ngoal (1 subgoal):\n 1. 0 \\<le> coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)", "by (auto simp: algebra_simps)"], ["proof (state)\nthis:\n  0 \\<le> coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       0 \\<le> (case x of\n                (h, j) \\<Rightarrow>\n                  - (coeff f h * coeff f j -\n                     coeff f (j + 1) * coeff f (h - 1)) *\n                  (coeff g (i - j) * coeff g (i + 2 - h) -\n                   coeff g (i + 1 - j) * coeff g (i + 1 - h)))", "from H"], ["proof (chain)\npicking this:\n  x = (h, j)\n  j \\<le> i\n  h \\<le> j\n  0 < h", "have \"i - j \\<le> i - h\""], ["proof (prove)\nusing this:\n  x = (h, j)\n  j \\<le> i\n  h \\<le> j\n  0 < h\n\ngoal (1 subgoal):\n 1. i - j \\<le> i - h", "by force"], ["proof (state)\nthis:\n  i - j \\<le> i - h\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       0 \\<le> (case x of\n                (h, j) \\<Rightarrow>\n                  - (coeff f h * coeff f j -\n                     coeff f (j + 1) * coeff f (h - 1)) *\n                  (coeff g (i - j) * coeff g (i + 2 - h) -\n                   coeff g (i + 1 - j) * coeff g (i + 1 - h)))", "hence 2: \"coeff g (i - j) * coeff g (i + 2 - h) - coeff g (i + 1 - j) * coeff g (i + 1 - h) \\<le> 0\""], ["proof (prove)\nusing this:\n  i - j \\<le> i - h\n\ngoal (1 subgoal):\n 1. coeff g (i - j) * coeff g (i + 2 - h) -\n    coeff g (i + 1 - j) * coeff g (i + 1 - h)\n    \\<le> 0", "using normal_poly_general_coeff_mult[OF hg, of \"i - j\" \"i - h\"] H"], ["proof (prove)\nusing this:\n  i - j \\<le> i - h\n  i - j \\<le> i - h \\<Longrightarrow>\n  coeff g (i - j) * coeff g (i - h + 2)\n  \\<le> coeff g (i - j + 1) * coeff g (i - h + 1)\n  x = (h, j)\n  j \\<le> i\n  h \\<le> j\n  0 < h\n\ngoal (1 subgoal):\n 1. coeff g (i - j) * coeff g (i + 2 - h) -\n    coeff g (i + 1 - j) * coeff g (i + 1 - h)\n    \\<le> 0", "by (smt (verit, del_insts) Nat.add_diff_assoc2 le_trans)"], ["proof (state)\nthis:\n  coeff g (i - j) * coeff g (i + 2 - h) -\n  coeff g (i + 1 - j) * coeff g (i + 1 - h)\n  \\<le> 0\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i \\<and> h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       0 \\<le> (case x of\n                (h, j) \\<Rightarrow>\n                  - (coeff f h * coeff f j -\n                     coeff f (j + 1) * coeff f (h - 1)) *\n                  (coeff g (i - j) * coeff g (i + 2 - h) -\n                   coeff g (i + 1 - j) * coeff g (i + 1 - h)))", "show \"0 \\<le> (case x of\n               (h, j) \\<Rightarrow>\n                 - (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n                 (coeff g (i - j) * coeff g (i + 2 - h) -\n                  coeff g (i + 1 - j) * coeff g (i + 1 - h)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> (case x of\n             (h, j) \\<Rightarrow>\n               - (coeff f h * coeff f j -\n                  coeff f (j + 1) * coeff f (h - 1)) *\n               (coeff g (i - j) * coeff g (i + 2 - h) -\n                coeff g (i + 1 - j) * coeff g (i + 1 - h)))", "apply (subst H(1), subst split, rule mult_nonpos_nonpos, subst neg_le_0_iff_le)"], ["proof (prove)\ngoal (2 subgoals):\n 1. 0 \\<le> coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)\n 2. coeff g (i - j) * coeff g (i + 2 - h) -\n    coeff g (i + 1 - j) * coeff g (i + 1 - h)\n    \\<le> 0", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)", "using 1"], ["proof (prove)\nusing this:\n  0 \\<le> coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)\n\ngoal (1 subgoal):\n 1. 0 \\<le> coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)", "by blast"], ["proof (prove)\ngoal (1 subgoal):\n 1. coeff g (i - j) * coeff g (i + 2 - h) -\n    coeff g (i + 1 - j) * coeff g (i + 1 - h)\n    \\<le> 0", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. coeff g (i - j) * coeff g (i + 2 - h) -\n    coeff g (i + 1 - j) * coeff g (i + 1 - h)\n    \\<le> 0", "using 2"], ["proof (prove)\nusing this:\n  coeff g (i - j) * coeff g (i + 2 - h) -\n  coeff g (i + 1 - j) * coeff g (i + 1 - h)\n  \\<le> 0\n\ngoal (1 subgoal):\n 1. coeff g (i - j) * coeff g (i + 2 - h) -\n    coeff g (i + 1 - j) * coeff g (i + 1 - h)\n    \\<le> 0", "by blast"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  0 \\<le> (case x of\n           (h, j) \\<Rightarrow>\n             - (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n             (coeff g (i - j) * coeff g (i + 2 - h) -\n              coeff g (i + 1 - j) * coeff g (i + 1 - h)))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 \\<le> (\\<Sum>(h, j)\n                 \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n             - (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n             (coeff g (i - j) * coeff g (i + 2 - h) -\n              coeff g (i + 1 - j) * coeff g (i + 1 - h)))\n\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>(h, j)\n                   \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n               - (coeff f h * coeff f j -\n                  coeff f (j + 1) * coeff f (h - 1)) *\n               (coeff g (i - j) * coeff g (i + 2 - h) -\n                coeff g (i + 1 - j) * coeff g (i + 1 - h))) +\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n                coeff g (i + 2 - h) * coeff g (i - j))) +\n            (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n               coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n               coeff g (i + 1 - h))", "moreover"], ["proof (state)\nthis:\n  0 \\<le> (\\<Sum>(h, j)\n                 \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n             - (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n             (coeff g (i - j) * coeff g (i + 2 - h) -\n              coeff g (i + 1 - j) * coeff g (i + 1 - h)))\n\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>(h, j)\n                   \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n               - (coeff f h * coeff f j -\n                  coeff f (j + 1) * coeff f (h - 1)) *\n               (coeff g (i - j) * coeff g (i + 2 - h) -\n                coeff g (i + 1 - j) * coeff g (i + 1 - h))) +\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n                coeff g (i + 2 - h) * coeff g (i - j))) +\n            (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n               coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n               coeff g (i + 1 - h))", "have \"0 \\<le> (\\<Sum>(h, j)\\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n                        coeff f h * coeff f j *\n                        (coeff g (i + 1 - h) * coeff g (i + 1 - j) - coeff g (i + 2 - h) * coeff g (i - j)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>(h, j)\n                   \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n                coeff g (i + 2 - h) * coeff g (i - j)))", "proof (rule sum_nonneg)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i \\<and> h \\<le> j \\<and> h = 0} \\<Longrightarrow>\n       0 \\<le> (case x of\n                (h, j) \\<Rightarrow>\n                  coeff f h * coeff f j *\n                  (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n                   coeff g (i + 2 - h) * coeff g (i - j)))", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i \\<and> h \\<le> j \\<and> h = 0} \\<Longrightarrow>\n       0 \\<le> (case x of\n                (h, j) \\<Rightarrow>\n                  coeff f h * coeff f j *\n                  (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n                   coeff g (i + 2 - h) * coeff g (i - j)))", "assume \"x \\<in> {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}\""], ["proof (state)\nthis:\n  x \\<in> {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i \\<and> h \\<le> j \\<and> h = 0} \\<Longrightarrow>\n       0 \\<le> (case x of\n                (h, j) \\<Rightarrow>\n                  coeff f h * coeff f j *\n                  (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n                   coeff g (i + 2 - h) * coeff g (i - j)))", "then"], ["proof (chain)\npicking this:\n  x \\<in> {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}", "obtain h j where H: \"x = (h, j)\" \"j \\<le> i\" \"h \\<le> j\" \"h = 0\""], ["proof (prove)\nusing this:\n  x \\<in> {(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}\n\ngoal (1 subgoal):\n 1. (\\<And>h j.\n        \\<lbrakk>x = (h, j); j \\<le> i; h \\<le> j; h = 0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fast"], ["proof (state)\nthis:\n  x = (h, j)\n  j \\<le> i\n  h \\<le> j\n  h = 0\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i \\<and> h \\<le> j \\<and> h = 0} \\<Longrightarrow>\n       0 \\<le> (case x of\n                (h, j) \\<Rightarrow>\n                  coeff f h * coeff f j *\n                  (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n                   coeff g (i + 2 - h) * coeff g (i - j)))", "have 1: \"coeff f h * coeff f j \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> coeff f h * coeff f j", "by (simp add: hf normal_coeff_nonneg)"], ["proof (state)\nthis:\n  0 \\<le> coeff f h * coeff f j\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i \\<and> h \\<le> j \\<and> h = 0} \\<Longrightarrow>\n       0 \\<le> (case x of\n                (h, j) \\<Rightarrow>\n                  coeff f h * coeff f j *\n                  (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n                   coeff g (i + 2 - h) * coeff g (i - j)))", "from H"], ["proof (chain)\npicking this:\n  x = (h, j)\n  j \\<le> i\n  h \\<le> j\n  h = 0", "have \"i - j \\<le> i - h\""], ["proof (prove)\nusing this:\n  x = (h, j)\n  j \\<le> i\n  h \\<le> j\n  h = 0\n\ngoal (1 subgoal):\n 1. i - j \\<le> i - h", "by force"], ["proof (state)\nthis:\n  i - j \\<le> i - h\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i \\<and> h \\<le> j \\<and> h = 0} \\<Longrightarrow>\n       0 \\<le> (case x of\n                (h, j) \\<Rightarrow>\n                  coeff f h * coeff f j *\n                  (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n                   coeff g (i + 2 - h) * coeff g (i - j)))", "hence 2: \"coeff g (i - j) * coeff g (i + 2 - h) - coeff g (i + 1 - j) * coeff g (i + 1 - h) \\<le> 0\""], ["proof (prove)\nusing this:\n  i - j \\<le> i - h\n\ngoal (1 subgoal):\n 1. coeff g (i - j) * coeff g (i + 2 - h) -\n    coeff g (i + 1 - j) * coeff g (i + 1 - h)\n    \\<le> 0", "using normal_poly_general_coeff_mult[OF hg, of \"i - j\" \"i - h\"] H"], ["proof (prove)\nusing this:\n  i - j \\<le> i - h\n  i - j \\<le> i - h \\<Longrightarrow>\n  coeff g (i - j) * coeff g (i - h + 2)\n  \\<le> coeff g (i - j + 1) * coeff g (i - h + 1)\n  x = (h, j)\n  j \\<le> i\n  h \\<le> j\n  h = 0\n\ngoal (1 subgoal):\n 1. coeff g (i - j) * coeff g (i + 2 - h) -\n    coeff g (i + 1 - j) * coeff g (i + 1 - h)\n    \\<le> 0", "by (smt (verit, del_insts) Nat.add_diff_assoc2 le_trans)"], ["proof (state)\nthis:\n  coeff g (i - j) * coeff g (i + 2 - h) -\n  coeff g (i + 1 - j) * coeff g (i + 1 - h)\n  \\<le> 0\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j \\<le> i \\<and> h \\<le> j \\<and> h = 0} \\<Longrightarrow>\n       0 \\<le> (case x of\n                (h, j) \\<Rightarrow>\n                  coeff f h * coeff f j *\n                  (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n                   coeff g (i + 2 - h) * coeff g (i - j)))", "show \"0 \\<le> (case x of\n               (h, j) \\<Rightarrow>\n                 coeff f h * coeff f j *\n                 (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n                  coeff g (i + 2 - h) * coeff g (i - j)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> (case x of\n             (h, j) \\<Rightarrow>\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n                coeff g (i + 2 - h) * coeff g (i - j)))", "apply (subst H(1), subst split, rule mult_nonneg_nonneg)"], ["proof (prove)\ngoal (2 subgoals):\n 1. 0 \\<le> coeff f h * coeff f j\n 2. 0 \\<le> coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n            coeff g (i + 2 - h) * coeff g (i - j)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> coeff f h * coeff f j", "using 1"], ["proof (prove)\nusing this:\n  0 \\<le> coeff f h * coeff f j\n\ngoal (1 subgoal):\n 1. 0 \\<le> coeff f h * coeff f j", "by blast"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n            coeff g (i + 2 - h) * coeff g (i - j)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n            coeff g (i + 2 - h) * coeff g (i - j)", "using 2"], ["proof (prove)\nusing this:\n  coeff g (i - j) * coeff g (i + 2 - h) -\n  coeff g (i + 1 - j) * coeff g (i + 1 - h)\n  \\<le> 0\n\ngoal (1 subgoal):\n 1. 0 \\<le> coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n            coeff g (i + 2 - h) * coeff g (i - j)", "by argo"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  0 \\<le> (case x of\n           (h, j) \\<Rightarrow>\n             coeff f h * coeff f j *\n             (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n              coeff g (i + 2 - h) * coeff g (i - j)))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 \\<le> (\\<Sum>(h, j)\n                 \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n             coeff f h * coeff f j *\n             (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n              coeff g (i + 2 - h) * coeff g (i - j)))\n\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>(h, j)\n                   \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n               - (coeff f h * coeff f j -\n                  coeff f (j + 1) * coeff f (h - 1)) *\n               (coeff g (i - j) * coeff g (i + 2 - h) -\n                coeff g (i + 1 - j) * coeff g (i + 1 - h))) +\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n                coeff g (i + 2 - h) * coeff g (i - j))) +\n            (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n               coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n               coeff g (i + 1 - h))", "moreover"], ["proof (state)\nthis:\n  0 \\<le> (\\<Sum>(h, j)\n                 \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n             coeff f h * coeff f j *\n             (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n              coeff g (i + 2 - h) * coeff g (i - j)))\n\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>(h, j)\n                   \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n               - (coeff f h * coeff f j -\n                  coeff f (j + 1) * coeff f (h - 1)) *\n               (coeff g (i - j) * coeff g (i + 2 - h) -\n                coeff g (i + 1 - j) * coeff g (i + 1 - h))) +\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n                coeff g (i + 2 - h) * coeff g (i - j))) +\n            (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n               coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n               coeff g (i + 1 - h))", "have \"0 \\<le> (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}. coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n                 (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n                    coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) * coeff g (i + 1 - h))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n               coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n               coeff g (i + 1 - h))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n               coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n               coeff g (i + 1 - h))", "have \"(\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}. coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n                 (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n                    coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) * coeff g (i + 1 - h)) = \n                 (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0}. coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n                 (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}. coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n                 (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n                    coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) * coeff g (i + 1 - h))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "proof (subst sum.union_disjoint[symmetric])"], ["proof (state)\ngoal (4 subgoals):\n 1. finite {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0}\n 2. finite {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}\n 3. {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} \\<inter>\n    {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} =\n    {}\n 4. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} \\<union>\n                {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "have \"{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} = {(0, i + 1)}\"\n                     \"{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} = {1..i+1} \\<times> {i + 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} = {(0, i + 1)} &&&\n    {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} =\n    {1..i + 1} \\<times> {i + 1}", "by (fastforce, force)"], ["proof (state)\nthis:\n  {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} = {(0, i + 1)}\n  {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} =\n  {1..i + 1} \\<times> {i + 1}\n\ngoal (4 subgoals):\n 1. finite {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0}\n 2. finite {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}\n 3. {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} \\<inter>\n    {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} =\n    {}\n 4. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} \\<union>\n                {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "thus \"finite {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0}\"\n                     \"finite {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}\""], ["proof (prove)\nusing this:\n  {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} = {(0, i + 1)}\n  {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} =\n  {1..i + 1} \\<times> {i + 1}\n\ngoal (1 subgoal):\n 1. finite {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} &&&\n    finite {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}", "by auto"], ["proof (state)\nthis:\n  finite {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0}\n  finite {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}\n\ngoal (2 subgoals):\n 1. {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} \\<inter>\n    {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} =\n    {}\n 2. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} \\<union>\n                {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "show \"{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} \\<inter> {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} \\<inter>\n    {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} =\n    {}", "by fastforce"], ["proof (state)\nthis:\n  {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} \\<inter>\n  {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} =\n  {}\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} \\<union>\n                {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "have \"{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} \\<union> {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} = {(h, j). j = i + 1 \\<and> h \\<le> j}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} \\<union>\n    {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} =\n    {(h, j). j = i + 1 \\<and> h \\<le> j}", "by fastforce"], ["proof (state)\nthis:\n  {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} \\<union>\n  {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} =\n  {(h, j). j = i + 1 \\<and> h \\<le> j}\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} \\<union>\n                {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "thus \"(\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}. coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n                      (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n                         coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) * coeff g (i + 1 - h)) =\n                      (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} \\<union> {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n                         coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n                      (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n                         coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) * coeff g (i + 1 - h))\""], ["proof (prove)\nusing this:\n  {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} \\<union>\n  {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} =\n  {(h, j). j = i + 1 \\<and> h \\<le> j}\n\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\n           \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} \\<union>\n                {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h))", "by presburger"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) =\n  (\\<Sum>(h, j)\n         \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0} \\<union>\n              {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h))\n\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n               coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n               coeff g (i + 1 - h))", "also"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h))\n\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n               coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n               coeff g (i + 1 - h))", "have \"... =\n                (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0}. coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n                (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}. \n                   (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) * (coeff g (i + 1 - h) * coeff g (i + 1 - j)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n       coeff g (i + 1 - h)) =\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0}.\n       coeff f h * coeff f j *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n    (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n       (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n       (coeff g (i + 1 - h) * coeff g (i + 1 - j)))", "by (subst add_diff_eq[symmetric], subst sum_subtractf[symmetric], subst add_left_cancel, rule sum.cong, auto simp: algebra_simps)"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j)))\n\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n               coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n               coeff g (i + 1 - h))", "also"], ["proof (state)\nthis:\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n     coeff g (i + 1 - h)) =\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0}.\n     coeff f h * coeff f j * (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n  (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n     (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n     (coeff g (i + 1 - h) * coeff g (i + 1 - j)))\n\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n               coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n               coeff g (i + 1 - h))", "have \"... \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>(h, j)\n                   \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n               (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j)))", "proof (rule add_nonneg_nonneg)"], ["proof (state)\ngoal (2 subgoals):\n 1. 0 \\<le> (\\<Sum>(h, j)\n                   \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j)))\n 2. 0 \\<le> (\\<Sum>(h, j)\n                   \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n               (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j)))", "show \"0 \\<le> (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n                        (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n                        (coeff g (i + 1 - h) * coeff g (i + 1 - j)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>(h, j)\n                   \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n               (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j)))", "proof (rule sum_nonneg)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       0 \\<le> (case x of\n                (h, j) \\<Rightarrow>\n                  (coeff f h * coeff f j -\n                   coeff f (j + 1) * coeff f (h - 1)) *\n                  (coeff g (i + 1 - h) * coeff g (i + 1 - j)))", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       0 \\<le> (case x of\n                (h, j) \\<Rightarrow>\n                  (coeff f h * coeff f j -\n                   coeff f (j + 1) * coeff f (h - 1)) *\n                  (coeff g (i + 1 - h) * coeff g (i + 1 - j)))", "assume \"x \\<in> {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}\""], ["proof (state)\nthis:\n  x \\<in> {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       0 \\<le> (case x of\n                (h, j) \\<Rightarrow>\n                  (coeff f h * coeff f j -\n                   coeff f (j + 1) * coeff f (h - 1)) *\n                  (coeff g (i + 1 - h) * coeff g (i + 1 - j)))", "then"], ["proof (chain)\npicking this:\n  x \\<in> {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}", "obtain h j where H: \"x = (h, j)\" \"j = i + 1\" \"h \\<le> j\" \"0 < h\""], ["proof (prove)\nusing this:\n  x \\<in> {(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}\n\ngoal (1 subgoal):\n 1. (\\<And>h j.\n        \\<lbrakk>x = (h, j); j = i + 1; h \\<le> j; 0 < h\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fast"], ["proof (state)\nthis:\n  x = (h, j)\n  j = i + 1\n  h \\<le> j\n  0 < h\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       0 \\<le> (case x of\n                (h, j) \\<Rightarrow>\n                  (coeff f h * coeff f j -\n                   coeff f (j + 1) * coeff f (h - 1)) *\n                  (coeff g (i + 1 - h) * coeff g (i + 1 - j)))", "hence \"h - 1 \\<le> j - 1\""], ["proof (prove)\nusing this:\n  x = (h, j)\n  j = i + 1\n  h \\<le> j\n  0 < h\n\ngoal (1 subgoal):\n 1. h - 1 \\<le> j - 1", "by force"], ["proof (state)\nthis:\n  h - 1 \\<le> j - 1\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       0 \\<le> (case x of\n                (h, j) \\<Rightarrow>\n                  (coeff f h * coeff f j -\n                   coeff f (j + 1) * coeff f (h - 1)) *\n                  (coeff g (i + 1 - h) * coeff g (i + 1 - j)))", "hence 1: \"coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1) \\<ge> 0\""], ["proof (prove)\nusing this:\n  h - 1 \\<le> j - 1\n\ngoal (1 subgoal):\n 1. 0 \\<le> coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)", "using normal_poly_general_coeff_mult[OF hf, of \"h-1\" \"j-1\"] H"], ["proof (prove)\nusing this:\n  h - 1 \\<le> j - 1\n  h - 1 \\<le> j - 1 \\<Longrightarrow>\n  coeff f (h - 1) * coeff f (j - 1 + 2)\n  \\<le> coeff f (h - 1 + 1) * coeff f (j - 1 + 1)\n  x = (h, j)\n  j = i + 1\n  h \\<le> j\n  0 < h\n\ngoal (1 subgoal):\n 1. 0 \\<le> coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)", "by (auto simp: algebra_simps)"], ["proof (state)\nthis:\n  0 \\<le> coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       0 \\<le> (case x of\n                (h, j) \\<Rightarrow>\n                  (coeff f h * coeff f j -\n                   coeff f (j + 1) * coeff f (h - 1)) *\n                  (coeff g (i + 1 - h) * coeff g (i + 1 - j)))", "hence 2: \"0 \\<le> coeff g (i + 1 - h) * coeff g (i + 1 - j)\""], ["proof (prove)\nusing this:\n  0 \\<le> coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)\n\ngoal (1 subgoal):\n 1. 0 \\<le> coeff g (i + 1 - h) * coeff g (i + 1 - j)", "by (meson hg mult_nonneg_nonneg normal_coeff_nonneg)"], ["proof (state)\nthis:\n  0 \\<le> coeff g (i + 1 - h) * coeff g (i + 1 - j)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {(h, j).\n                j = i + 1 \\<and> h \\<le> j \\<and> 0 < h} \\<Longrightarrow>\n       0 \\<le> (case x of\n                (h, j) \\<Rightarrow>\n                  (coeff f h * coeff f j -\n                   coeff f (j + 1) * coeff f (h - 1)) *\n                  (coeff g (i + 1 - h) * coeff g (i + 1 - j)))", "show \"0 \\<le> (case x of\n                   (h, j) \\<Rightarrow>\n                     (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n                     (coeff g (i + 1 - h) * coeff g (i + 1 - j)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> (case x of\n             (h, j) \\<Rightarrow>\n               (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j)))", "apply (subst H(1), subst split, rule mult_nonneg_nonneg)"], ["proof (prove)\ngoal (2 subgoals):\n 1. 0 \\<le> coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)\n 2. 0 \\<le> coeff g (i + 1 - h) * coeff g (i + 1 - j)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)", "using 1"], ["proof (prove)\nusing this:\n  0 \\<le> coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)\n\ngoal (1 subgoal):\n 1. 0 \\<le> coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)", "by blast"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> coeff g (i + 1 - h) * coeff g (i + 1 - j)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> coeff g (i + 1 - h) * coeff g (i + 1 - j)", "using 2"], ["proof (prove)\nusing this:\n  0 \\<le> coeff g (i + 1 - h) * coeff g (i + 1 - j)\n\ngoal (1 subgoal):\n 1. 0 \\<le> coeff g (i + 1 - h) * coeff g (i + 1 - j)", "by blast"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  0 \\<le> (case x of\n           (h, j) \\<Rightarrow>\n             (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n             (coeff g (i + 1 - h) * coeff g (i + 1 - j)))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 \\<le> (\\<Sum>(h, j)\n                 \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n             (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n             (coeff g (i + 1 - h) * coeff g (i + 1 - j)))\n\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>(h, j)\n                   \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j)))", "qed (rule sum_nonneg, auto simp: hf hg normal_coeff_nonneg)[1]"], ["proof (state)\nthis:\n  0 \\<le> (\\<Sum>(h, j)\n                 \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> h = 0}.\n             coeff f h * coeff f j *\n             (coeff g (i + 1 - h) * coeff g (i + 1 - j))) +\n          (\\<Sum>(h, j)\n                 \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n             (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n             (coeff g (i + 1 - h) * coeff g (i + 1 - j)))\n\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n               coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n               coeff g (i + 1 - h))", "finally"], ["proof (chain)\npicking this:\n  0 \\<le> (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n             coeff f h * coeff f j *\n             (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n          (\\<Sum>(h, j)\n                 \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n             coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n             coeff g (i + 1 - h))", "show ?thesis"], ["proof (prove)\nusing this:\n  0 \\<le> (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n             coeff f h * coeff f j *\n             (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n          (\\<Sum>(h, j)\n                 \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n             coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n             coeff g (i + 1 - h))\n\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n               coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n               coeff g (i + 1 - h))", "."], ["proof (state)\nthis:\n  0 \\<le> (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n             coeff f h * coeff f j *\n             (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n          (\\<Sum>(h, j)\n                 \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n             coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n             coeff g (i + 1 - h))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 \\<le> (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n             coeff f h * coeff f j *\n             (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n          (\\<Sum>(h, j)\n                 \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n             coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n             coeff g (i + 1 - h))\n\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>(h, j)\n                   \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n               - (coeff f h * coeff f j -\n                  coeff f (j + 1) * coeff f (h - 1)) *\n               (coeff g (i - j) * coeff g (i + 2 - h) -\n                coeff g (i + 1 - j) * coeff g (i + 1 - h))) +\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n                coeff g (i + 2 - h) * coeff g (i - j))) +\n            (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n               coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n               coeff g (i + 1 - h))", "ultimately"], ["proof (chain)\npicking this:\n  0 \\<le> (\\<Sum>(h, j)\n                 \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n             - (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n             (coeff g (i - j) * coeff g (i + 2 - h) -\n              coeff g (i + 1 - j) * coeff g (i + 1 - h)))\n  0 \\<le> (\\<Sum>(h, j)\n                 \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n             coeff f h * coeff f j *\n             (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n              coeff g (i + 2 - h) * coeff g (i - j)))\n  0 \\<le> (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n             coeff f h * coeff f j *\n             (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n          (\\<Sum>(h, j)\n                 \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n             coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n             coeff g (i + 1 - h))", "show ?thesis"], ["proof (prove)\nusing this:\n  0 \\<le> (\\<Sum>(h, j)\n                 \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n             - (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n             (coeff g (i - j) * coeff g (i + 2 - h) -\n              coeff g (i + 1 - j) * coeff g (i + 1 - h)))\n  0 \\<le> (\\<Sum>(h, j)\n                 \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n             coeff f h * coeff f j *\n             (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n              coeff g (i + 2 - h) * coeff g (i - j)))\n  0 \\<le> (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n             coeff f h * coeff f j *\n             (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n          (\\<Sum>(h, j)\n                 \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n             coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n             coeff g (i + 1 - h))\n\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>(h, j)\n                   \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n               - (coeff f h * coeff f j -\n                  coeff f (j + 1) * coeff f (h - 1)) *\n               (coeff g (i - j) * coeff g (i + 2 - h) -\n                coeff g (i + 1 - j) * coeff g (i + 1 - h))) +\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n                coeff g (i + 2 - h) * coeff g (i - j))) +\n            (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n               coeff f h * coeff f j *\n               (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n            (\\<Sum>(h, j)\n                   \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n               coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n               coeff g (i + 1 - h))", "by auto"], ["proof (state)\nthis:\n  0 \\<le> (\\<Sum>(h, j)\n                 \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n             - (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n             (coeff g (i - j) * coeff g (i + 2 - h) -\n              coeff g (i + 1 - j) * coeff g (i + 1 - h))) +\n          (\\<Sum>(h, j)\n                 \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n             coeff f h * coeff f j *\n             (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n              coeff g (i + 2 - h) * coeff g (i - j))) +\n          (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n             coeff f h * coeff f j *\n             (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n          (\\<Sum>(h, j)\n                 \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n             coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n             coeff g (i + 1 - h))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 \\<le> (\\<Sum>(h, j)\n                 \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> 0 < h}.\n             - (coeff f h * coeff f j - coeff f (j + 1) * coeff f (h - 1)) *\n             (coeff g (i - j) * coeff g (i + 2 - h) -\n              coeff g (i + 1 - j) * coeff g (i + 1 - h))) +\n          (\\<Sum>(h, j)\n                 \\<in>{(h, j). j \\<le> i \\<and> h \\<le> j \\<and> h = 0}.\n             coeff f h * coeff f j *\n             (coeff g (i + 1 - h) * coeff g (i + 1 - j) -\n              coeff g (i + 2 - h) * coeff g (i - j))) +\n          (\\<Sum>(h, j)\\<in>{(h, j). j = i + 1 \\<and> h \\<le> j}.\n             coeff f h * coeff f j *\n             (coeff g (i + 1 - h) * coeff g (i + 1 - j))) -\n          (\\<Sum>(h, j)\n                 \\<in>{(h, j). j = i + 1 \\<and> h \\<le> j \\<and> 0 < h}.\n             coeff f (j + 1) * coeff g (i + 1 - j) * coeff f (h - 1) *\n             coeff g (i + 1 - h))\n\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "finally"], ["proof (chain)\npicking this:\n  0 \\<le> (coeff (f * g) (i + 1))\\<^sup>2 -\n          coeff (f * g) i * coeff (f * g) (i + 2)", "show \"coeff (f * g) i * coeff (f * g) (i + 2) \\<le> (coeff (f * g) (i + 1))\\<^sup>2\""], ["proof (prove)\nusing this:\n  0 \\<le> (coeff (f * g) (i + 1))\\<^sup>2 -\n          coeff (f * g) i * coeff (f * g) (i + 2)\n\ngoal (1 subgoal):\n 1. coeff (f * g) i * coeff (f * g) (i + 2)\n    \\<le> (coeff (f * g) (i + 1))\\<^sup>2", "by (auto simp: power2_eq_square)"], ["proof (state)\nthis:\n  coeff (f * g) i * coeff (f * g) (i + 2)\n  \\<le> (coeff (f * g) (i + 1))\\<^sup>2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  coeff (f * g) ?i * coeff (f * g) (?i + 2)\n  \\<le> (coeff (f * g) (?i + 1))\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "moreover"], ["proof (state)\nthis:\n  coeff (f * g) ?i * coeff (f * g) (?i + 2)\n  \\<le> (coeff (f * g) (?i + 1))\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "have \"\\<And>i j k. i \\<le> j \\<Longrightarrow> j \\<le> k \\<Longrightarrow> 0 < coeff (f*g) i \\<Longrightarrow> 0 < coeff (f*g) k \\<Longrightarrow> 0 < coeff (f*g) j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * g) i;\n        0 < coeff (f * g) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * g) j", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * g) i;\n        0 < coeff (f * g) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * g) j", "fix j k"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * g) i;\n        0 < coeff (f * g) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * g) j", "assume \"0 < coeff (f * g) k\""], ["proof (state)\nthis:\n  0 < coeff (f * g) k\n\ngoal (1 subgoal):\n 1. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * g) i;\n        0 < coeff (f * g) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * g) j", "hence \"k \\<le> degree (f * g)\""], ["proof (prove)\nusing this:\n  0 < coeff (f * g) k\n\ngoal (1 subgoal):\n 1. k \\<le> degree (f * g)", "using le_degree"], ["proof (prove)\nusing this:\n  0 < coeff (f * g) k\n  coeff ?p ?n \\<noteq> (0::?'a) \\<Longrightarrow> ?n \\<le> degree ?p\n\ngoal (1 subgoal):\n 1. k \\<le> degree (f * g)", "by force"], ["proof (state)\nthis:\n  k \\<le> degree (f * g)\n\ngoal (1 subgoal):\n 1. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * g) i;\n        0 < coeff (f * g) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * g) j", "moreover"], ["proof (state)\nthis:\n  k \\<le> degree (f * g)\n\ngoal (1 subgoal):\n 1. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * g) i;\n        0 < coeff (f * g) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * g) j", "assume \"j \\<le> k\""], ["proof (state)\nthis:\n  j \\<le> k\n\ngoal (1 subgoal):\n 1. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * g) i;\n        0 < coeff (f * g) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * g) j", "ultimately"], ["proof (chain)\npicking this:\n  k \\<le> degree (f * g)\n  j \\<le> k", "have \"j \\<le> degree (f * g)\""], ["proof (prove)\nusing this:\n  k \\<le> degree (f * g)\n  j \\<le> k\n\ngoal (1 subgoal):\n 1. j \\<le> degree (f * g)", "by auto"], ["proof (state)\nthis:\n  j \\<le> degree (f * g)\n\ngoal (1 subgoal):\n 1. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * g) i;\n        0 < coeff (f * g) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * g) j", "hence 1: \"j \\<le> degree f + degree g\""], ["proof (prove)\nusing this:\n  j \\<le> degree (f * g)\n\ngoal (1 subgoal):\n 1. j \\<le> degree f + degree g", "by (simp add: degree_mult_eq hf hg normal_non_zero)"], ["proof (state)\nthis:\n  j \\<le> degree f + degree g\n\ngoal (1 subgoal):\n 1. \\<And>i j k.\n       \\<lbrakk>i \\<le> j; j \\<le> k; 0 < coeff (f * g) i;\n        0 < coeff (f * g) k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff (f * g) j", "show \"0 < coeff (f * g) j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < coeff (f * g) j", "apply (subst coeff_mult, rule sum_pos2[of _ \"min j (degree f)\"], simp, simp)"], ["proof (prove)\ngoal (2 subgoals):\n 1. 0 < coeff f (min j (degree f)) * coeff g (j - min j (degree f))\n 2. \\<And>i.\n       i \\<in> {..j} \\<Longrightarrow> 0 \\<le> coeff f i * coeff g (j - i)", "apply (rule mult_pos_pos, rule normal_of_no_zero_root, simp add: hf0, simp)"], ["proof (prove)\ngoal (3 subgoals):\n 1. normal_poly f\n 2. 0 < coeff g (j - min j (degree f))\n 3. \\<And>i.\n       i \\<in> {..j} \\<Longrightarrow> 0 \\<le> coeff f i * coeff g (j - i)", "using hf"], ["proof (prove)\nusing this:\n  normal_poly f\n\ngoal (3 subgoals):\n 1. normal_poly f\n 2. 0 < coeff g (j - min j (degree f))\n 3. \\<And>i.\n       i \\<in> {..j} \\<Longrightarrow> 0 \\<le> coeff f i * coeff g (j - i)", "apply auto[1]"], ["proof (prove)\ngoal (2 subgoals):\n 1. 0 < coeff g (j - min j (degree f))\n 2. \\<And>i.\n       i \\<in> {..j} \\<Longrightarrow> 0 \\<le> coeff f i * coeff g (j - i)", "apply (rule normal_of_no_zero_root)"], ["proof (prove)\ngoal (4 subgoals):\n 1. poly g 0 \\<noteq> 0\n 2. j - min j (degree f) \\<le> degree g\n 3. normal_poly g\n 4. \\<And>i.\n       i \\<in> {..j} \\<Longrightarrow> 0 \\<le> coeff f i * coeff g (j - i)", "apply (simp add: hg0)"], ["proof (prove)\ngoal (3 subgoals):\n 1. j - min j (degree f) \\<le> degree g\n 2. normal_poly g\n 3. \\<And>i.\n       i \\<in> {..j} \\<Longrightarrow> 0 \\<le> coeff f i * coeff g (j - i)", "using 1"], ["proof (prove)\nusing this:\n  j \\<le> degree f + degree g\n\ngoal (3 subgoals):\n 1. j - min j (degree f) \\<le> degree g\n 2. normal_poly g\n 3. \\<And>i.\n       i \\<in> {..j} \\<Longrightarrow> 0 \\<le> coeff f i * coeff g (j - i)", "apply force"], ["proof (prove)\ngoal (2 subgoals):\n 1. normal_poly g\n 2. \\<And>i.\n       i \\<in> {..j} \\<Longrightarrow> 0 \\<le> coeff f i * coeff g (j - i)", "using hg"], ["proof (prove)\nusing this:\n  normal_poly g\n\ngoal (2 subgoals):\n 1. normal_poly g\n 2. \\<And>i.\n       i \\<in> {..j} \\<Longrightarrow> 0 \\<le> coeff f i * coeff g (j - i)", "apply auto[1]"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i.\n       i \\<in> {..j} \\<Longrightarrow> 0 \\<le> coeff f i * coeff g (j - i)", "by (simp add: hf hg normal_coeff_nonneg)"], ["proof (state)\nthis:\n  0 < coeff (f * g) j\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>?i \\<le> ?j; ?j \\<le> ?k; 0 < coeff (f * g) ?i;\n   0 < coeff (f * g) ?k\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff (f * g) ?j\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>g.\n                \\<lbrakk>dg = degree g; normal_poly g\\<rbrakk>\n                \\<Longrightarrow> normal_poly (f * g);\n     Suc dg = degree g; normal_poly g; poly g 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> normal_poly (f * g)", "ultimately"], ["proof (chain)\npicking this:\n  f * g \\<noteq> 0\n  0 \\<le> coeff (f * g) ?i\n  coeff (f * g) ?i * coeff (f * g) (?i + 2)\n  \\<le> (coeff (f * g) (?i + 1))\\<^sup>2\n  \\<lbrakk>?i \\<le> ?j; ?j \\<le> ?k; 0 < coeff (f * g) ?i;\n   0 < coeff (f * g) ?k\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff (f * g) ?j", "show \"normal_poly (f*g)\""], ["proof (prove)\nusing this:\n  f * g \\<noteq> 0\n  0 \\<le> coeff (f * g) ?i\n  coeff (f * g) ?i * coeff (f * g) (?i + 2)\n  \\<le> (coeff (f * g) (?i + 1))\\<^sup>2\n  \\<lbrakk>?i \\<le> ?j; ?j \\<le> ?k; 0 < coeff (f * g) ?i;\n   0 < coeff (f * g) ?k\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff (f * g) ?j\n\ngoal (1 subgoal):\n 1. normal_poly (f * g)", "by (rule normal_polyI)"], ["proof (state)\nthis:\n  normal_poly (f * g)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  normal_poly (f * g)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  normal_poly (f * g)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  normal_poly (f * g)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma normal_poly_of_roots: \n  fixes p::\"real poly\"\n  assumes \"\\<And>z. poly (map_poly complex_of_real p) z = 0 \n        \\<Longrightarrow> Re z \\<le> 0 \\<and> 4*(Re z)^2 \\<ge> (cmod z)^2\"\n      and \"lead_coeff p = 1\"\n  shows \"normal_poly p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. normal_poly p", "using assms"], ["proof (prove)\nusing this:\n  poly (map_poly complex_of_real p) ?z = 0 \\<Longrightarrow>\n  Re ?z \\<le> 0 \\<and> (cmod ?z)\\<^sup>2 \\<le> 4 * (Re ?z)\\<^sup>2\n  monic p\n\ngoal (1 subgoal):\n 1. normal_poly p", "proof (induction p rule: real_poly_roots_induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>p x.\n       \\<lbrakk>\\<lbrakk>\\<And>z.\n                            poly (map_poly complex_of_real p) z =\n                            0 \\<Longrightarrow>\n                            Re z \\<le> 0 \\<and>\n                            (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n                 monic p\\<rbrakk>\n                \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly (map_poly complex_of_real (p * [:- x, 1:])) z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:- x, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:- x, 1:])\n 2. \\<And>p a b.\n       \\<lbrakk>b \\<noteq> 0;\n        \\<lbrakk>\\<And>z.\n                    poly (map_poly complex_of_real p) z =\n                    0 \\<Longrightarrow>\n                    Re z \\<le> 0 \\<and>\n                    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n         monic p\\<rbrakk>\n        \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:a * a + b * b, - 2 * a, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\n 3. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "fix p::\"real poly\" and x::real"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>p x.\n       \\<lbrakk>\\<lbrakk>\\<And>z.\n                            poly (map_poly complex_of_real p) z =\n                            0 \\<Longrightarrow>\n                            Re z \\<le> 0 \\<and>\n                            (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n                 monic p\\<rbrakk>\n                \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly (map_poly complex_of_real (p * [:- x, 1:])) z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:- x, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:- x, 1:])\n 2. \\<And>p a b.\n       \\<lbrakk>b \\<noteq> 0;\n        \\<lbrakk>\\<And>z.\n                    poly (map_poly complex_of_real p) z =\n                    0 \\<Longrightarrow>\n                    Re z \\<le> 0 \\<and>\n                    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n         monic p\\<rbrakk>\n        \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:a * a + b * b, - 2 * a, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\n 3. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "assume \"lead_coeff (p * [:- x, 1:]) = 1\""], ["proof (state)\nthis:\n  monic (p * [:- x, 1:])\n\ngoal (3 subgoals):\n 1. \\<And>p x.\n       \\<lbrakk>\\<lbrakk>\\<And>z.\n                            poly (map_poly complex_of_real p) z =\n                            0 \\<Longrightarrow>\n                            Re z \\<le> 0 \\<and>\n                            (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n                 monic p\\<rbrakk>\n                \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly (map_poly complex_of_real (p * [:- x, 1:])) z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:- x, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:- x, 1:])\n 2. \\<And>p a b.\n       \\<lbrakk>b \\<noteq> 0;\n        \\<lbrakk>\\<And>z.\n                    poly (map_poly complex_of_real p) z =\n                    0 \\<Longrightarrow>\n                    Re z \\<le> 0 \\<and>\n                    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n         monic p\\<rbrakk>\n        \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:a * a + b * b, - 2 * a, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\n 3. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "hence 1: \"lead_coeff p = 1\""], ["proof (prove)\nusing this:\n  monic (p * [:- x, 1:])\n\ngoal (1 subgoal):\n 1. monic p", "by (metis coeff_degree_mult lead_coeff_pCons(1) mult_cancel_left1 pCons_one zero_neq_one)"], ["proof (state)\nthis:\n  monic p\n\ngoal (3 subgoals):\n 1. \\<And>p x.\n       \\<lbrakk>\\<lbrakk>\\<And>z.\n                            poly (map_poly complex_of_real p) z =\n                            0 \\<Longrightarrow>\n                            Re z \\<le> 0 \\<and>\n                            (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n                 monic p\\<rbrakk>\n                \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly (map_poly complex_of_real (p * [:- x, 1:])) z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:- x, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:- x, 1:])\n 2. \\<And>p a b.\n       \\<lbrakk>b \\<noteq> 0;\n        \\<lbrakk>\\<And>z.\n                    poly (map_poly complex_of_real p) z =\n                    0 \\<Longrightarrow>\n                    Re z \\<le> 0 \\<and>\n                    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n         monic p\\<rbrakk>\n        \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:a * a + b * b, - 2 * a, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\n 3. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "assume h: \"(\\<And>z. poly (map_poly complex_of_real (p * [:- x, 1:])) z = 0 \\<Longrightarrow>\n                 Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2)\""], ["proof (state)\nthis:\n  poly (map_poly complex_of_real (p * [:- x, 1:])) ?z = 0 \\<Longrightarrow>\n  Re ?z \\<le> 0 \\<and> (cmod ?z)\\<^sup>2 \\<le> 4 * (Re ?z)\\<^sup>2\n\ngoal (3 subgoals):\n 1. \\<And>p x.\n       \\<lbrakk>\\<lbrakk>\\<And>z.\n                            poly (map_poly complex_of_real p) z =\n                            0 \\<Longrightarrow>\n                            Re z \\<le> 0 \\<and>\n                            (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n                 monic p\\<rbrakk>\n                \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly (map_poly complex_of_real (p * [:- x, 1:])) z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:- x, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:- x, 1:])\n 2. \\<And>p a b.\n       \\<lbrakk>b \\<noteq> 0;\n        \\<lbrakk>\\<And>z.\n                    poly (map_poly complex_of_real p) z =\n                    0 \\<Longrightarrow>\n                    Re z \\<le> 0 \\<and>\n                    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n         monic p\\<rbrakk>\n        \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:a * a + b * b, - 2 * a, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\n 3. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "hence 2: \"(\\<And>z. poly (map_poly complex_of_real p) z = 0 \\<Longrightarrow>\n                 Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2)\""], ["proof (prove)\nusing this:\n  poly (map_poly complex_of_real (p * [:- x, 1:])) ?z = 0 \\<Longrightarrow>\n  Re ?z \\<le> 0 \\<and> (cmod ?z)\\<^sup>2 \\<le> 4 * (Re ?z)\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<And>z.\n       poly (map_poly complex_of_real p) z = 0 \\<Longrightarrow>\n       Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2", "by (metis (no_types, hide_lams) four_x_squared mult.commute mult_cancel_left1 of_real_poly_map_mult poly_mult)"], ["proof (state)\nthis:\n  poly (map_poly complex_of_real p) ?z = 0 \\<Longrightarrow>\n  Re ?z \\<le> 0 \\<and> (cmod ?z)\\<^sup>2 \\<le> 4 * (Re ?z)\\<^sup>2\n\ngoal (3 subgoals):\n 1. \\<And>p x.\n       \\<lbrakk>\\<lbrakk>\\<And>z.\n                            poly (map_poly complex_of_real p) z =\n                            0 \\<Longrightarrow>\n                            Re z \\<le> 0 \\<and>\n                            (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n                 monic p\\<rbrakk>\n                \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly (map_poly complex_of_real (p * [:- x, 1:])) z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:- x, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:- x, 1:])\n 2. \\<And>p a b.\n       \\<lbrakk>b \\<noteq> 0;\n        \\<lbrakk>\\<And>z.\n                    poly (map_poly complex_of_real p) z =\n                    0 \\<Longrightarrow>\n                    Re z \\<le> 0 \\<and>\n                    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n         monic p\\<rbrakk>\n        \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:a * a + b * b, - 2 * a, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\n 3. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "have 3: \"normal_poly [:-x, 1:]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. normal_poly [:- x, 1:]", "apply (subst linear_normal_iff, \n        subst Re_complex_of_real[symmetric], rule conjunct1)"], ["proof (prove)\ngoal (1 subgoal):\n 1. Re (complex_of_real x) \\<le> 0 \\<and> ?Q", "by (rule h[of x], subst of_real_poly_map_poly[symmetric], force)"], ["proof (state)\nthis:\n  normal_poly [:- x, 1:]\n\ngoal (3 subgoals):\n 1. \\<And>p x.\n       \\<lbrakk>\\<lbrakk>\\<And>z.\n                            poly (map_poly complex_of_real p) z =\n                            0 \\<Longrightarrow>\n                            Re z \\<le> 0 \\<and>\n                            (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n                 monic p\\<rbrakk>\n                \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly (map_poly complex_of_real (p * [:- x, 1:])) z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:- x, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:- x, 1:])\n 2. \\<And>p a b.\n       \\<lbrakk>b \\<noteq> 0;\n        \\<lbrakk>\\<And>z.\n                    poly (map_poly complex_of_real p) z =\n                    0 \\<Longrightarrow>\n                    Re z \\<le> 0 \\<and>\n                    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n         monic p\\<rbrakk>\n        \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:a * a + b * b, - 2 * a, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\n 3. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "assume \"(\\<And>z. poly (map_poly complex_of_real p) z = 0\n             \\<Longrightarrow> Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2) \\<Longrightarrow>\n            lead_coeff p = 1 \\<Longrightarrow> normal_poly p\""], ["proof (state)\nthis:\n  \\<lbrakk>\\<And>z.\n              poly (map_poly complex_of_real p) z = 0 \\<Longrightarrow>\n              Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n   monic p\\<rbrakk>\n  \\<Longrightarrow> normal_poly p\n\ngoal (3 subgoals):\n 1. \\<And>p x.\n       \\<lbrakk>\\<lbrakk>\\<And>z.\n                            poly (map_poly complex_of_real p) z =\n                            0 \\<Longrightarrow>\n                            Re z \\<le> 0 \\<and>\n                            (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n                 monic p\\<rbrakk>\n                \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly (map_poly complex_of_real (p * [:- x, 1:])) z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:- x, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:- x, 1:])\n 2. \\<And>p a b.\n       \\<lbrakk>b \\<noteq> 0;\n        \\<lbrakk>\\<And>z.\n                    poly (map_poly complex_of_real p) z =\n                    0 \\<Longrightarrow>\n                    Re z \\<le> 0 \\<and>\n                    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n         monic p\\<rbrakk>\n        \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:a * a + b * b, - 2 * a, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\n 3. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "hence \"normal_poly p\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>z.\n              poly (map_poly complex_of_real p) z = 0 \\<Longrightarrow>\n              Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n   monic p\\<rbrakk>\n  \\<Longrightarrow> normal_poly p\n\ngoal (1 subgoal):\n 1. normal_poly p", "using 1 2"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>z.\n              poly (map_poly complex_of_real p) z = 0 \\<Longrightarrow>\n              Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n   monic p\\<rbrakk>\n  \\<Longrightarrow> normal_poly p\n  monic p\n  poly (map_poly complex_of_real p) ?z = 0 \\<Longrightarrow>\n  Re ?z \\<le> 0 \\<and> (cmod ?z)\\<^sup>2 \\<le> 4 * (Re ?z)\\<^sup>2\n\ngoal (1 subgoal):\n 1. normal_poly p", "by fast"], ["proof (state)\nthis:\n  normal_poly p\n\ngoal (3 subgoals):\n 1. \\<And>p x.\n       \\<lbrakk>\\<lbrakk>\\<And>z.\n                            poly (map_poly complex_of_real p) z =\n                            0 \\<Longrightarrow>\n                            Re z \\<le> 0 \\<and>\n                            (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n                 monic p\\<rbrakk>\n                \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly (map_poly complex_of_real (p * [:- x, 1:])) z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:- x, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:- x, 1:])\n 2. \\<And>p a b.\n       \\<lbrakk>b \\<noteq> 0;\n        \\<lbrakk>\\<And>z.\n                    poly (map_poly complex_of_real p) z =\n                    0 \\<Longrightarrow>\n                    Re z \\<le> 0 \\<and>\n                    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n         monic p\\<rbrakk>\n        \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:a * a + b * b, - 2 * a, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\n 3. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "then"], ["proof (chain)\npicking this:\n  normal_poly p", "show \"normal_poly (p * [:-x, 1:])\""], ["proof (prove)\nusing this:\n  normal_poly p\n\ngoal (1 subgoal):\n 1. normal_poly (p * [:- x, 1:])", "using 3"], ["proof (prove)\nusing this:\n  normal_poly p\n  normal_poly [:- x, 1:]\n\ngoal (1 subgoal):\n 1. normal_poly (p * [:- x, 1:])", "by (rule normal_mult)"], ["proof (state)\nthis:\n  normal_poly (p * [:- x, 1:])\n\ngoal (2 subgoals):\n 1. \\<And>p a b.\n       \\<lbrakk>b \\<noteq> 0;\n        \\<lbrakk>\\<And>z.\n                    poly (map_poly complex_of_real p) z =\n                    0 \\<Longrightarrow>\n                    Re z \\<le> 0 \\<and>\n                    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n         monic p\\<rbrakk>\n        \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:a * a + b * b, - 2 * a, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\n 2. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p a b.\n       \\<lbrakk>b \\<noteq> 0;\n        \\<lbrakk>\\<And>z.\n                    poly (map_poly complex_of_real p) z =\n                    0 \\<Longrightarrow>\n                    Re z \\<le> 0 \\<and>\n                    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n         monic p\\<rbrakk>\n        \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:a * a + b * b, - 2 * a, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\n 2. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "fix p::\"real poly\" and a b::real"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p a b.\n       \\<lbrakk>b \\<noteq> 0;\n        \\<lbrakk>\\<And>z.\n                    poly (map_poly complex_of_real p) z =\n                    0 \\<Longrightarrow>\n                    Re z \\<le> 0 \\<and>\n                    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n         monic p\\<rbrakk>\n        \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:a * a + b * b, - 2 * a, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\n 2. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "assume \"lead_coeff (p * [:a * a + b * b, - 2 * a, 1:]) = 1\""], ["proof (state)\nthis:\n  monic (p * [:a * a + b * b, - 2 * a, 1:])\n\ngoal (2 subgoals):\n 1. \\<And>p a b.\n       \\<lbrakk>b \\<noteq> 0;\n        \\<lbrakk>\\<And>z.\n                    poly (map_poly complex_of_real p) z =\n                    0 \\<Longrightarrow>\n                    Re z \\<le> 0 \\<and>\n                    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n         monic p\\<rbrakk>\n        \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:a * a + b * b, - 2 * a, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\n 2. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "hence 1: \"lead_coeff p = 1\""], ["proof (prove)\nusing this:\n  monic (p * [:a * a + b * b, - 2 * a, 1:])\n\ngoal (1 subgoal):\n 1. monic p", "by (smt (verit) coeff_degree_mult lead_coeff_pCons(1) mult_cancel_left1 pCons_eq_0_iff pCons_one)"], ["proof (state)\nthis:\n  monic p\n\ngoal (2 subgoals):\n 1. \\<And>p a b.\n       \\<lbrakk>b \\<noteq> 0;\n        \\<lbrakk>\\<And>z.\n                    poly (map_poly complex_of_real p) z =\n                    0 \\<Longrightarrow>\n                    Re z \\<le> 0 \\<and>\n                    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n         monic p\\<rbrakk>\n        \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:a * a + b * b, - 2 * a, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\n 2. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "assume h: \"(\\<And>z. poly (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:])) z = 0 \\<Longrightarrow>\n                 Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2)\""], ["proof (state)\nthis:\n  poly (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:])) ?z =\n  0 \\<Longrightarrow>\n  Re ?z \\<le> 0 \\<and> (cmod ?z)\\<^sup>2 \\<le> 4 * (Re ?z)\\<^sup>2\n\ngoal (2 subgoals):\n 1. \\<And>p a b.\n       \\<lbrakk>b \\<noteq> 0;\n        \\<lbrakk>\\<And>z.\n                    poly (map_poly complex_of_real p) z =\n                    0 \\<Longrightarrow>\n                    Re z \\<le> 0 \\<and>\n                    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n         monic p\\<rbrakk>\n        \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:a * a + b * b, - 2 * a, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\n 2. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "hence 2: \"(\\<And>z. poly (map_poly complex_of_real p) z = 0 \\<Longrightarrow>\n                 Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2)\""], ["proof (prove)\nusing this:\n  poly (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:])) ?z =\n  0 \\<Longrightarrow>\n  Re ?z \\<le> 0 \\<and> (cmod ?z)\\<^sup>2 \\<le> 4 * (Re ?z)\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<And>z.\n       poly (map_poly complex_of_real p) z = 0 \\<Longrightarrow>\n       Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>z.\n       \\<lbrakk>poly (map_poly complex_of_real p) z = 0;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and>\n           (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2\\<rbrakk>\n       \\<Longrightarrow> Re z \\<le> 0 \\<and>\n                         (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2", "fix z :: complex"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>z.\n       \\<lbrakk>poly (map_poly complex_of_real p) z = 0;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and>\n           (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2\\<rbrakk>\n       \\<Longrightarrow> Re z \\<le> 0 \\<and>\n                         (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2", "assume \"poly (map_poly complex_of_real p) z = 0\""], ["proof (state)\nthis:\n  poly (map_poly complex_of_real p) z = 0\n\ngoal (1 subgoal):\n 1. \\<And>z.\n       \\<lbrakk>poly (map_poly complex_of_real p) z = 0;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and>\n           (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2\\<rbrakk>\n       \\<Longrightarrow> Re z \\<le> 0 \\<and>\n                         (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2", "then"], ["proof (chain)\npicking this:\n  poly (map_poly complex_of_real p) z = 0", "have \"\\<forall>q. 0 = poly (map_poly complex_of_real (p * q)) z\""], ["proof (prove)\nusing this:\n  poly (map_poly complex_of_real p) z = 0\n\ngoal (1 subgoal):\n 1. \\<forall>q. 0 = poly (map_poly complex_of_real (p * q)) z", "by simp"], ["proof (state)\nthis:\n  \\<forall>q. 0 = poly (map_poly complex_of_real (p * q)) z\n\ngoal (1 subgoal):\n 1. \\<And>z.\n       \\<lbrakk>poly (map_poly complex_of_real p) z = 0;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and>\n           (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2\\<rbrakk>\n       \\<Longrightarrow> Re z \\<le> 0 \\<and>\n                         (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2", "then"], ["proof (chain)\npicking this:\n  \\<forall>q. 0 = poly (map_poly complex_of_real (p * q)) z", "show \"Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2\""], ["proof (prove)\nusing this:\n  \\<forall>q. 0 = poly (map_poly complex_of_real (p * q)) z\n\ngoal (1 subgoal):\n 1. Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2", "using h"], ["proof (prove)\nusing this:\n  \\<forall>q. 0 = poly (map_poly complex_of_real (p * q)) z\n  poly (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:])) ?z =\n  0 \\<Longrightarrow>\n  Re ?z \\<le> 0 \\<and> (cmod ?z)\\<^sup>2 \\<le> 4 * (Re ?z)\\<^sup>2\n\ngoal (1 subgoal):\n 1. Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2", "by presburger"], ["proof (state)\nthis:\n  Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  poly (map_poly complex_of_real p) ?z = 0 \\<Longrightarrow>\n  Re ?z \\<le> 0 \\<and> (cmod ?z)\\<^sup>2 \\<le> 4 * (Re ?z)\\<^sup>2\n\ngoal (2 subgoals):\n 1. \\<And>p a b.\n       \\<lbrakk>b \\<noteq> 0;\n        \\<lbrakk>\\<And>z.\n                    poly (map_poly complex_of_real p) z =\n                    0 \\<Longrightarrow>\n                    Re z \\<le> 0 \\<and>\n                    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n         monic p\\<rbrakk>\n        \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:a * a + b * b, - 2 * a, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\n 2. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "have 3: \"[:a * a + b * b, - 2 * a, 1:] = [:cmod (a + \\<i>*b) ^ 2, -2 * Re (a + \\<i>*b), 1:]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [:a * a + b * b, - 2 * a, 1:] =\n    [:(cmod (complex_of_real a + \\<i> * complex_of_real b))\\<^sup>2,\n      - 2 * Re (complex_of_real a + \\<i> * complex_of_real b), 1:]", "by (force simp: cmod_def power2_eq_square)"], ["proof (state)\nthis:\n  [:a * a + b * b, - 2 * a, 1:] =\n  [:(cmod (complex_of_real a + \\<i> * complex_of_real b))\\<^sup>2,\n    - 2 * Re (complex_of_real a + \\<i> * complex_of_real b), 1:]\n\ngoal (2 subgoals):\n 1. \\<And>p a b.\n       \\<lbrakk>b \\<noteq> 0;\n        \\<lbrakk>\\<And>z.\n                    poly (map_poly complex_of_real p) z =\n                    0 \\<Longrightarrow>\n                    Re z \\<le> 0 \\<and>\n                    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n         monic p\\<rbrakk>\n        \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:a * a + b * b, - 2 * a, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\n 2. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "interpret map_poly_idom_hom complex_of_real"], ["proof (prove)\ngoal (1 subgoal):\n 1. map_poly_idom_hom complex_of_real", ".."], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>p a b.\n       \\<lbrakk>b \\<noteq> 0;\n        \\<lbrakk>\\<And>z.\n                    poly (map_poly complex_of_real p) z =\n                    0 \\<Longrightarrow>\n                    Re z \\<le> 0 \\<and>\n                    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n         monic p\\<rbrakk>\n        \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:a * a + b * b, - 2 * a, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\n 2. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "have 4: \"normal_poly [:a * a + b * b, - 2 * a, 1:]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. normal_poly [:a * a + b * b, - 2 * a, 1:]", "apply (subst 3, subst quadratic_normal_iff)"], ["proof (prove)\ngoal (1 subgoal):\n 1. Re (complex_of_real a + \\<i> * complex_of_real b) \\<le> 0 \\<and>\n    (cmod (complex_of_real a + \\<i> * complex_of_real b))\\<^sup>2\n    \\<le> 4 * (Re (complex_of_real a + \\<i> * complex_of_real b))\\<^sup>2", "apply (rule h, unfold hom_mult poly_mult)"], ["proof (prove)\ngoal (1 subgoal):\n 1. poly (map_poly complex_of_real p)\n     (complex_of_real a + \\<i> * complex_of_real b) *\n    poly (map_poly complex_of_real [:a * a + b * b, - 2 * a, 1:])\n     (complex_of_real a + \\<i> * complex_of_real b) =\n    0", "by (auto simp: algebra_simps)"], ["proof (state)\nthis:\n  normal_poly [:a * a + b * b, - 2 * a, 1:]\n\ngoal (2 subgoals):\n 1. \\<And>p a b.\n       \\<lbrakk>b \\<noteq> 0;\n        \\<lbrakk>\\<And>z.\n                    poly (map_poly complex_of_real p) z =\n                    0 \\<Longrightarrow>\n                    Re z \\<le> 0 \\<and>\n                    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n         monic p\\<rbrakk>\n        \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:a * a + b * b, - 2 * a, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\n 2. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "assume \"(\\<And>z. poly (map_poly complex_of_real p) z = 0 \\<Longrightarrow> Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2) \\<Longrightarrow>\n            lead_coeff p = 1 \\<Longrightarrow> normal_poly p\""], ["proof (state)\nthis:\n  \\<lbrakk>\\<And>z.\n              poly (map_poly complex_of_real p) z = 0 \\<Longrightarrow>\n              Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n   monic p\\<rbrakk>\n  \\<Longrightarrow> normal_poly p\n\ngoal (2 subgoals):\n 1. \\<And>p a b.\n       \\<lbrakk>b \\<noteq> 0;\n        \\<lbrakk>\\<And>z.\n                    poly (map_poly complex_of_real p) z =\n                    0 \\<Longrightarrow>\n                    Re z \\<le> 0 \\<and>\n                    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n         monic p\\<rbrakk>\n        \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:a * a + b * b, - 2 * a, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\n 2. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "hence \"normal_poly p\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>z.\n              poly (map_poly complex_of_real p) z = 0 \\<Longrightarrow>\n              Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n   monic p\\<rbrakk>\n  \\<Longrightarrow> normal_poly p\n\ngoal (1 subgoal):\n 1. normal_poly p", "using 1 2"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>z.\n              poly (map_poly complex_of_real p) z = 0 \\<Longrightarrow>\n              Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n   monic p\\<rbrakk>\n  \\<Longrightarrow> normal_poly p\n  monic p\n  poly (map_poly complex_of_real p) ?z = 0 \\<Longrightarrow>\n  Re ?z \\<le> 0 \\<and> (cmod ?z)\\<^sup>2 \\<le> 4 * (Re ?z)\\<^sup>2\n\ngoal (1 subgoal):\n 1. normal_poly p", "by fast"], ["proof (state)\nthis:\n  normal_poly p\n\ngoal (2 subgoals):\n 1. \\<And>p a b.\n       \\<lbrakk>b \\<noteq> 0;\n        \\<lbrakk>\\<And>z.\n                    poly (map_poly complex_of_real p) z =\n                    0 \\<Longrightarrow>\n                    Re z \\<le> 0 \\<and>\n                    (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n         monic p\\<rbrakk>\n        \\<Longrightarrow> normal_poly p;\n        \\<And>z.\n           poly\n            (map_poly complex_of_real (p * [:a * a + b * b, - 2 * a, 1:]))\n            z =\n           0 \\<Longrightarrow>\n           Re z \\<le> 0 \\<and> (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic (p * [:a * a + b * b, - 2 * a, 1:])\\<rbrakk>\n       \\<Longrightarrow> normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\n 2. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "then"], ["proof (chain)\npicking this:\n  normal_poly p", "show \"normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\""], ["proof (prove)\nusing this:\n  normal_poly p\n\ngoal (1 subgoal):\n 1. normal_poly (p * [:a * a + b * b, - 2 * a, 1:])", "using 4"], ["proof (prove)\nusing this:\n  normal_poly p\n  normal_poly [:a * a + b * b, - 2 * a, 1:]\n\ngoal (1 subgoal):\n 1. normal_poly (p * [:a * a + b * b, - 2 * a, 1:])", "by (rule normal_mult)"], ["proof (state)\nthis:\n  normal_poly (p * [:a * a + b * b, - 2 * a, 1:])\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "fix a::real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "assume \"lead_coeff [:a:] = 1\""], ["proof (state)\nthis:\n  monic [:a:]\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "moreover"], ["proof (state)\nthis:\n  monic [:a:]\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "have \"\\<And>i j k.\n       lead_coeff [:a:] = 1 \\<Longrightarrow>\n       i \\<le> j \\<Longrightarrow>\n       j \\<le> k \\<Longrightarrow> 0 < coeff [:a:] i \\<Longrightarrow> 0 < coeff [:a:] k \\<Longrightarrow> 0 < coeff [:a:] j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i j k.\n       \\<lbrakk>monic [:a:]; i \\<le> j; j \\<le> k; 0 < coeff [:a:] i;\n        0 < coeff [:a:] k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff [:a:] j", "by (metis bot_nat_0.extremum_uniqueI coeff_eq_0 degree_pCons_0 leI \n        less_numeral_extra(3))"], ["proof (state)\nthis:\n  \\<lbrakk>monic [:a:]; ?i \\<le> ?j; ?j \\<le> ?k; 0 < coeff [:a:] ?i;\n   0 < coeff [:a:] ?k\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff [:a:] ?j\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       \\<lbrakk>\\<And>z.\n                   poly (map_poly complex_of_real [:a:]) z =\n                   0 \\<Longrightarrow>\n                   Re z \\<le> 0 \\<and>\n                   (cmod z)\\<^sup>2 \\<le> 4 * (Re z)\\<^sup>2;\n        monic [:a:]\\<rbrakk>\n       \\<Longrightarrow> normal_poly [:a:]", "ultimately"], ["proof (chain)\npicking this:\n  monic [:a:]\n  \\<lbrakk>monic [:a:]; ?i \\<le> ?j; ?j \\<le> ?k; 0 < coeff [:a:] ?i;\n   0 < coeff [:a:] ?k\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff [:a:] ?j", "show \"normal_poly [:a:]\""], ["proof (prove)\nusing this:\n  monic [:a:]\n  \\<lbrakk>monic [:a:]; ?i \\<le> ?j; ?j \\<le> ?k; 0 < coeff [:a:] ?i;\n   0 < coeff [:a:] ?k\\<rbrakk>\n  \\<Longrightarrow> 0 < coeff [:a:] ?j\n\ngoal (1 subgoal):\n 1. normal_poly [:a:]", "apply (subst normal_polyI)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<lbrakk>monic [:a:];\n     \\<And>i j k.\n        \\<lbrakk>monic [:a:]; i \\<le> j; j \\<le> k; 0 < coeff [:a:] i;\n         0 < coeff [:a:] k\\<rbrakk>\n        \\<Longrightarrow> 0 < coeff [:a:] j\\<rbrakk>\n    \\<Longrightarrow> [:a:] \\<noteq> 0\n 2. \\<And>i.\n       \\<lbrakk>monic [:a:];\n        \\<And>i j k.\n           \\<lbrakk>monic [:a:]; i \\<le> j; j \\<le> k; 0 < coeff [:a:] i;\n            0 < coeff [:a:] k\\<rbrakk>\n           \\<Longrightarrow> 0 < coeff [:a:] j\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> coeff [:a:] i\n 3. \\<And>i.\n       \\<lbrakk>monic [:a:];\n        \\<And>i j k.\n           \\<lbrakk>monic [:a:]; i \\<le> j; j \\<le> k; 0 < coeff [:a:] i;\n            0 < coeff [:a:] k\\<rbrakk>\n           \\<Longrightarrow> 0 < coeff [:a:] j\\<rbrakk>\n       \\<Longrightarrow> coeff [:a:] i * coeff [:a:] (i + 2)\n                         \\<le> (coeff [:a:] (i + 1))\\<^sup>2\n 4. \\<And>i j k.\n       \\<lbrakk>monic [:a:];\n        \\<And>i j k.\n           \\<lbrakk>monic [:a:]; i \\<le> j; j \\<le> k; 0 < coeff [:a:] i;\n            0 < coeff [:a:] k\\<rbrakk>\n           \\<Longrightarrow> 0 < coeff [:a:] j;\n        i \\<le> j; j \\<le> k; 0 < coeff [:a:] i; 0 < coeff [:a:] k\\<rbrakk>\n       \\<Longrightarrow> 0 < coeff [:a:] j\n 5. \\<lbrakk>monic [:a:];\n     \\<And>i j k.\n        \\<lbrakk>monic [:a:]; i \\<le> j; j \\<le> k; 0 < coeff [:a:] i;\n         0 < coeff [:a:] k\\<rbrakk>\n        \\<Longrightarrow> 0 < coeff [:a:] j\\<rbrakk>\n    \\<Longrightarrow> True", "by (auto simp:pCons_one)"], ["proof (state)\nthis:\n  normal_poly [:a:]\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma normal_changes: \n  fixes f::\"real poly\"\n  assumes hf: \"normal_poly f\" and hx: \"x > 0\"\n  defines \"df \\<equiv> degree f\"\n  shows \"changes (coeffs (f*[:-x,1:])) = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. changes (coeffs (f * [:- x, 1:])) = 1", "using df_def hf"], ["proof (prove)\nusing this:\n  df \\<equiv> degree f\n  normal_poly f\n\ngoal (1 subgoal):\n 1. changes (coeffs (f * [:- x, 1:])) = 1", "proof (induction df arbitrary: f)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>f.\n       \\<lbrakk>0 = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1\n 2. \\<And>df f.\n       \\<lbrakk>\\<And>f.\n                   \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                   \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n        Suc df = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "case 0"], ["proof (state)\nthis:\n  0 = degree f\n  normal_poly f\n\ngoal (2 subgoals):\n 1. \\<And>f.\n       \\<lbrakk>0 = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1\n 2. \\<And>df f.\n       \\<lbrakk>\\<And>f.\n                   \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                   \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n        Suc df = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "then"], ["proof (chain)\npicking this:\n  0 = degree f\n  normal_poly f", "obtain a where \"f = [:a:]\""], ["proof (prove)\nusing this:\n  0 = degree f\n  normal_poly f\n\ngoal (1 subgoal):\n 1. (\\<And>a. f = [:a:] \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using degree_0_iff"], ["proof (prove)\nusing this:\n  0 = degree f\n  normal_poly f\n  (degree ?P = 0) = (\\<exists>a. ?P = [:a:])\n\ngoal (1 subgoal):\n 1. (\\<And>a. f = [:a:] \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  f = [:a:]\n\ngoal (2 subgoals):\n 1. \\<And>f.\n       \\<lbrakk>0 = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1\n 2. \\<And>df f.\n       \\<lbrakk>\\<And>f.\n                   \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                   \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n        Suc df = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "thus \"changes (coeffs (f*[:-x, 1:])) = 1\""], ["proof (prove)\nusing this:\n  f = [:a:]\n\ngoal (1 subgoal):\n 1. changes (coeffs (f * [:- x, 1:])) = 1", "using normal_non_zero[OF \\<open>normal_poly f\\<close>] hx"], ["proof (prove)\nusing this:\n  f = [:a:]\n  f \\<noteq> 0\n  0 < x\n\ngoal (1 subgoal):\n 1. changes (coeffs (f * [:- x, 1:])) = 1", "by (auto simp: algebra_simps zero_less_mult_iff mult_less_0_iff)"], ["proof (state)\nthis:\n  changes (coeffs (f * [:- x, 1:])) = 1\n\ngoal (1 subgoal):\n 1. \\<And>df f.\n       \\<lbrakk>\\<And>f.\n                   \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                   \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n        Suc df = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>df f.\n       \\<lbrakk>\\<And>f.\n                   \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                   \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n        Suc df = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "case (Suc df)"], ["proof (state)\nthis:\n  \\<lbrakk>df = degree ?f; normal_poly ?f\\<rbrakk>\n  \\<Longrightarrow> changes (coeffs (?f * [:- x, 1:])) = 1\n  Suc df = degree f\n  normal_poly f\n\ngoal (1 subgoal):\n 1. \\<And>df f.\n       \\<lbrakk>\\<And>f.\n                   \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                   \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n        Suc df = degree f; normal_poly f\\<rbrakk>\n       \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>df = degree ?f; normal_poly ?f\\<rbrakk>\n  \\<Longrightarrow> changes (coeffs (?f * [:- x, 1:])) = 1\n  Suc df = degree f\n  normal_poly f", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>df = degree ?f; normal_poly ?f\\<rbrakk>\n  \\<Longrightarrow> changes (coeffs (?f * [:- x, 1:])) = 1\n  Suc df = degree f\n  normal_poly f\n\ngoal (1 subgoal):\n 1. changes (coeffs (f * [:- x, 1:])) = 1", "proof (cases \"poly f 0 = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 = 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1\n 2. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "assume \"poly f 0 = 0\" and hf:\"normal_poly f\""], ["proof (state)\nthis:\n  poly f 0 = 0\n  normal_poly f\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 = 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1\n 2. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "moreover"], ["proof (state)\nthis:\n  poly f 0 = 0\n  normal_poly f\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 = 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1\n 2. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "then"], ["proof (chain)\npicking this:\n  poly f 0 = 0\n  normal_poly f", "obtain f' where hdiv: \"f = f'*[:0, 1:]\""], ["proof (prove)\nusing this:\n  poly f 0 = 0\n  normal_poly f\n\ngoal (1 subgoal):\n 1. (\\<And>f'. f = f' * [:0, 1:] \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (smt (verit) dvdE mult.commute poly_eq_0_iff_dvd)"], ["proof (state)\nthis:\n  f = f' * [:0, 1:]\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 = 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1\n 2. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "ultimately"], ["proof (chain)\npicking this:\n  poly f 0 = 0\n  normal_poly f\n  f = f' * [:0, 1:]", "have hf': \"normal_poly f'\""], ["proof (prove)\nusing this:\n  poly f 0 = 0\n  normal_poly f\n  f = f' * [:0, 1:]\n\ngoal (1 subgoal):\n 1. normal_poly f'", "using normal_divide_x"], ["proof (prove)\nusing this:\n  poly f 0 = 0\n  normal_poly f\n  f = f' * [:0, 1:]\n  normal_poly (?f * [:0, 1:]) \\<Longrightarrow> normal_poly ?f\n\ngoal (1 subgoal):\n 1. normal_poly f'", "by blast"], ["proof (state)\nthis:\n  normal_poly f'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 = 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1\n 2. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "assume \"Suc df = degree f\""], ["proof (state)\nthis:\n  Suc df = degree f\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 = 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1\n 2. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "hence \"degree f' = df\""], ["proof (prove)\nusing this:\n  Suc df = degree f\n\ngoal (1 subgoal):\n 1. degree f' = df", "using hdiv normal_non_zero[OF hf']"], ["proof (prove)\nusing this:\n  Suc df = degree f\n  f = f' * [:0, 1:]\n  f' \\<noteq> 0\n\ngoal (1 subgoal):\n 1. degree f' = df", "by (auto simp: degree_mult_eq)"], ["proof (state)\nthis:\n  degree f' = df\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 = 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1\n 2. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "moreover"], ["proof (state)\nthis:\n  degree f' = df\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 = 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1\n 2. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "assume \"\\<And>f::real poly. df = degree f \\<Longrightarrow> normal_poly f \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1\""], ["proof (state)\nthis:\n  \\<lbrakk>df = degree ?f; normal_poly ?f\\<rbrakk>\n  \\<Longrightarrow> changes (coeffs (?f * [:- x, 1:])) = 1\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 = 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1\n 2. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "ultimately"], ["proof (chain)\npicking this:\n  degree f' = df\n  \\<lbrakk>df = degree ?f; normal_poly ?f\\<rbrakk>\n  \\<Longrightarrow> changes (coeffs (?f * [:- x, 1:])) = 1", "have \"changes (coeffs (f' * [:- x, 1:])) = 1\""], ["proof (prove)\nusing this:\n  degree f' = df\n  \\<lbrakk>df = degree ?f; normal_poly ?f\\<rbrakk>\n  \\<Longrightarrow> changes (coeffs (?f * [:- x, 1:])) = 1\n\ngoal (1 subgoal):\n 1. changes (coeffs (f' * [:- x, 1:])) = 1", "using hf'"], ["proof (prove)\nusing this:\n  degree f' = df\n  \\<lbrakk>df = degree ?f; normal_poly ?f\\<rbrakk>\n  \\<Longrightarrow> changes (coeffs (?f * [:- x, 1:])) = 1\n  normal_poly f'\n\ngoal (1 subgoal):\n 1. changes (coeffs (f' * [:- x, 1:])) = 1", "by fast"], ["proof (state)\nthis:\n  changes (coeffs (f' * [:- x, 1:])) = 1\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 = 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1\n 2. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "thus \"changes (coeffs (f * [:- x, 1:])) = 1\""], ["proof (prove)\nusing this:\n  changes (coeffs (f' * [:- x, 1:])) = 1\n\ngoal (1 subgoal):\n 1. changes (coeffs (f * [:- x, 1:])) = 1", "apply (subst hdiv, subst mult_pCons_right, subst smult_0_left, subst add_0)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>changes (coeffs (f' * [:- x, 1:])) = 1;\n     changes (coeffs (f' * [:- x, 1:])) = 1;\n     changes (coeffs (f' * [:- x, 1:])) = 1;\n     changes (coeffs (f' * [:- x, 1:])) = 1\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (pCons 0 (f' * [:1:]) * [:- x, 1:])) =\n                      1", "apply (subst mult_pCons_left, subst smult_0_left, subst add_0)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>changes (coeffs (f' * [:- x, 1:])) = 1;\n     changes (coeffs (f' * [:- x, 1:])) = 1;\n     changes (coeffs (f' * [:- x, 1:])) = 1;\n     changes (coeffs (f' * [:- x, 1:])) = 1\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (pCons 0 (f' * [:1:] * [:- x, 1:]))) =\n                      1", "by (subst changes_pCons, auto)"], ["proof (state)\nthis:\n  changes (coeffs (f * [:- x, 1:])) = 1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "assume hf:\"normal_poly f\" and \"poly f 0 \\<noteq> 0\""], ["proof (state)\nthis:\n  normal_poly f\n  poly f 0 \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "hence h': \"\\<And>i. i \\<le> degree f \\<Longrightarrow> coeff f i > 0\""], ["proof (prove)\nusing this:\n  normal_poly f\n  poly f 0 \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<And>i. i \\<le> degree f \\<Longrightarrow> 0 < coeff f i", "by (auto simp: normal_of_no_zero_root)"], ["proof (state)\nthis:\n  ?i \\<le> degree f \\<Longrightarrow> 0 < coeff f ?i\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "hence \"\\<And>i. i < degree f - 1 \\<Longrightarrow> (coeff f i)/(coeff f (i+1)) \\<le> (coeff f (i+1))/(coeff f (i+2))\""], ["proof (prove)\nusing this:\n  ?i \\<le> degree f \\<Longrightarrow> 0 < coeff f ?i\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       i < degree f - 1 \\<Longrightarrow>\n       coeff f i / coeff f (i + 1) \\<le> coeff f (i + 1) / coeff f (i + 2)", "using normal_poly_coeff_mult[OF hf] normal_coeff_nonneg[OF hf]"], ["proof (prove)\nusing this:\n  ?i \\<le> degree f \\<Longrightarrow> 0 < coeff f ?i\n  coeff f ?i * coeff f (?i + 2) \\<le> (coeff f (?i + 1))\\<^sup>2\n  0 \\<le> coeff f ?i\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       i < degree f - 1 \\<Longrightarrow>\n       coeff f i / coeff f (i + 1) \\<le> coeff f (i + 1) / coeff f (i + 2)", "by (auto simp: divide_simps power2_eq_square)"], ["proof (state)\nthis:\n  ?i < degree f - 1 \\<Longrightarrow>\n  coeff f ?i / coeff f (?i + 1) \\<le> coeff f (?i + 1) / coeff f (?i + 2)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "hence h'': \"\\<And>i. i < degree f - 1 \\<Longrightarrow> (coeff f i)/(coeff f (i+1)) - x \\<le> (coeff f (i+1))/(coeff f (i+2)) - x\""], ["proof (prove)\nusing this:\n  ?i < degree f - 1 \\<Longrightarrow>\n  coeff f ?i / coeff f (?i + 1) \\<le> coeff f (?i + 1) / coeff f (?i + 2)\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       i < degree f - 1 \\<Longrightarrow>\n       coeff f i / coeff f (i + 1) - x\n       \\<le> coeff f (i + 1) / coeff f (i + 2) - x", "by fastforce"], ["proof (state)\nthis:\n  ?i < degree f - 1 \\<Longrightarrow>\n  coeff f ?i / coeff f (?i + 1) - x\n  \\<le> coeff f (?i + 1) / coeff f (?i + 2) - x\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "have hdeg: \"degree (pCons 0 f - smult x f) = degree f + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. degree (pCons 0 f - smult x f) = degree f + 1", "apply (subst diff_conv_add_uminus)"], ["proof (prove)\ngoal (1 subgoal):\n 1. degree (pCons 0 f + - smult x f) = degree f + 1", "apply (subst degree_add_eq_left)"], ["proof (prove)\ngoal (2 subgoals):\n 1. degree (- smult x f) < degree (pCons 0 f)\n 2. degree (pCons 0 f) = degree f + 1", "by (auto simp: hf normal_non_zero)"], ["proof (state)\nthis:\n  degree (pCons 0 f - smult x f) = degree f + 1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "let ?f = \"\\<lambda> z w. \\<lambda>i. if i=0 then z/(x * coeff f 0) else (if i = degree (pCons 0 f - smult x f) then w/(lead_coeff f) else inverse (coeff f i))\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "have 1: \"\\<And>z w. 0 < z \\<Longrightarrow> 0 < w \\<Longrightarrow> changes (coeffs (f * [:-x, 1:])) =\n          changes (-z # map (\\<lambda>i. (coeff f (i-1))/(coeff f i) - x) [1..<degree (pCons 0 f - smult x f)] @ [w])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>z w.\n       \\<lbrakk>0 < z; 0 < w\\<rbrakk>\n       \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) =\n                         changes\n                          (- z #\n                           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n                            [1..<degree (pCons 0 f - smult x f)] @\n                           [w])", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>z w.\n       \\<lbrakk>0 < z; 0 < w\\<rbrakk>\n       \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) =\n                         changes\n                          (- z #\n                           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n                            [1..<degree (pCons 0 f - smult x f)] @\n                           [w])", "fix z w :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>z w.\n       \\<lbrakk>0 < z; 0 < w\\<rbrakk>\n       \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) =\n                         changes\n                          (- z #\n                           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n                            [1..<degree (pCons 0 f - smult x f)] @\n                           [w])", "assume hz: \"0 < z\" and hw: \"0 < w\""], ["proof (state)\nthis:\n  0 < z\n  0 < w\n\ngoal (1 subgoal):\n 1. \\<And>z w.\n       \\<lbrakk>0 < z; 0 < w\\<rbrakk>\n       \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) =\n                         changes\n                          (- z #\n                           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n                            [1..<degree (pCons 0 f - smult x f)] @\n                           [w])", "have \"-z # map (\\<lambda>i. (coeff f (i-1))/(coeff f i) - x) [1..<degree (pCons 0 f - smult x f)] @ [w] =\n            map (\\<lambda>i. if i = 0 then -z else if i = degree (pCons 0 f - smult x f) then w else \n              (coeff f (i-1))/(coeff f i) - x) [0..<degree (pCons 0 f - smult x f) + 1]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - z #\n    map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n     [1..<degree (pCons 0 f - smult x f)] @\n    [w] =\n    map (\\<lambda>i.\n            if i = 0 then - z\n            else if i = degree (pCons 0 f - smult x f) then w\n                 else coeff f (i - 1) / coeff f i - x)\n     [0..<degree (pCons 0 f - smult x f) + 1]", "proof (rule nth_equalityI)"], ["proof (state)\ngoal (2 subgoals):\n 1. length\n     (- z #\n      map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n       [1..<degree (pCons 0 f - smult x f)] @\n      [w]) =\n    length\n     (map (\\<lambda>i.\n              if i = 0 then - z\n              else if i = degree (pCons 0 f - smult x f) then w\n                   else coeff f (i - 1) / coeff f i - x)\n       [0..<degree (pCons 0 f - smult x f) + 1])\n 2. \\<And>i.\n       i < length\n            (- z #\n             map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n              [1..<degree (pCons 0 f - smult x f)] @\n             [w]) \\<Longrightarrow>\n       (- z #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n         [1..<degree (pCons 0 f - smult x f)] @\n        [w]) !\n       i =\n       map (\\<lambda>i.\n               if i = 0 then - z\n               else if i = degree (pCons 0 f - smult x f) then w\n                    else coeff f (i - 1) / coeff f i - x)\n        [0..<degree (pCons 0 f - smult x f) + 1] !\n       i", "fix i"], ["proof (state)\ngoal (2 subgoals):\n 1. length\n     (- z #\n      map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n       [1..<degree (pCons 0 f - smult x f)] @\n      [w]) =\n    length\n     (map (\\<lambda>i.\n              if i = 0 then - z\n              else if i = degree (pCons 0 f - smult x f) then w\n                   else coeff f (i - 1) / coeff f i - x)\n       [0..<degree (pCons 0 f - smult x f) + 1])\n 2. \\<And>i.\n       i < length\n            (- z #\n             map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n              [1..<degree (pCons 0 f - smult x f)] @\n             [w]) \\<Longrightarrow>\n       (- z #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n         [1..<degree (pCons 0 f - smult x f)] @\n        [w]) !\n       i =\n       map (\\<lambda>i.\n               if i = 0 then - z\n               else if i = degree (pCons 0 f - smult x f) then w\n                    else coeff f (i - 1) / coeff f i - x)\n        [0..<degree (pCons 0 f - smult x f) + 1] !\n       i", "assume \"i < length (- z # map (\\<lambda>i. coeff f (i - 1) / coeff f i - x) [1..<degree (pCons 0 f - smult x f)] @ [w])\""], ["proof (state)\nthis:\n  i < length\n       (- z #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n         [1..<degree (pCons 0 f - smult x f)] @\n        [w])\n\ngoal (2 subgoals):\n 1. length\n     (- z #\n      map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n       [1..<degree (pCons 0 f - smult x f)] @\n      [w]) =\n    length\n     (map (\\<lambda>i.\n              if i = 0 then - z\n              else if i = degree (pCons 0 f - smult x f) then w\n                   else coeff f (i - 1) / coeff f i - x)\n       [0..<degree (pCons 0 f - smult x f) + 1])\n 2. \\<And>i.\n       i < length\n            (- z #\n             map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n              [1..<degree (pCons 0 f - smult x f)] @\n             [w]) \\<Longrightarrow>\n       (- z #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n         [1..<degree (pCons 0 f - smult x f)] @\n        [w]) !\n       i =\n       map (\\<lambda>i.\n               if i = 0 then - z\n               else if i = degree (pCons 0 f - smult x f) then w\n                    else coeff f (i - 1) / coeff f i - x)\n        [0..<degree (pCons 0 f - smult x f) + 1] !\n       i", "hence \"i \\<le> degree (pCons 0 f - smult x f)\""], ["proof (prove)\nusing this:\n  i < length\n       (- z #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n         [1..<degree (pCons 0 f - smult x f)] @\n        [w])\n\ngoal (1 subgoal):\n 1. i \\<le> degree (pCons 0 f - smult x f)", "using hdeg Suc.hyps(2)"], ["proof (prove)\nusing this:\n  i < length\n       (- z #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n         [1..<degree (pCons 0 f - smult x f)] @\n        [w])\n  degree (pCons 0 f - smult x f) = degree f + 1\n  Suc df = degree f\n\ngoal (1 subgoal):\n 1. i \\<le> degree (pCons 0 f - smult x f)", "by auto"], ["proof (state)\nthis:\n  i \\<le> degree (pCons 0 f - smult x f)\n\ngoal (2 subgoals):\n 1. length\n     (- z #\n      map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n       [1..<degree (pCons 0 f - smult x f)] @\n      [w]) =\n    length\n     (map (\\<lambda>i.\n              if i = 0 then - z\n              else if i = degree (pCons 0 f - smult x f) then w\n                   else coeff f (i - 1) / coeff f i - x)\n       [0..<degree (pCons 0 f - smult x f) + 1])\n 2. \\<And>i.\n       i < length\n            (- z #\n             map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n              [1..<degree (pCons 0 f - smult x f)] @\n             [w]) \\<Longrightarrow>\n       (- z #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n         [1..<degree (pCons 0 f - smult x f)] @\n        [w]) !\n       i =\n       map (\\<lambda>i.\n               if i = 0 then - z\n               else if i = degree (pCons 0 f - smult x f) then w\n                    else coeff f (i - 1) / coeff f i - x)\n        [0..<degree (pCons 0 f - smult x f) + 1] !\n       i", "then"], ["proof (chain)\npicking this:\n  i \\<le> degree (pCons 0 f - smult x f)", "consider (a)\"i = 0\" | (b)\"(0 < i \\<and> i < degree (pCons 0 f - smult x f))\" |\n          (c)\"i = degree (pCons 0 f - smult x f)\""], ["proof (prove)\nusing this:\n  i \\<le> degree (pCons 0 f - smult x f)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>i = 0 \\<Longrightarrow> thesis;\n     0 < i \\<and> i < degree (pCons 0 f - smult x f) \\<Longrightarrow>\n     thesis;\n     i = degree (pCons 0 f - smult x f) \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by fastforce"], ["proof (state)\nthis:\n  \\<lbrakk>i = 0 \\<Longrightarrow> ?thesis;\n   0 < i \\<and> i < degree (pCons 0 f - smult x f) \\<Longrightarrow>\n   ?thesis;\n   i = degree (pCons 0 f - smult x f) \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (2 subgoals):\n 1. length\n     (- z #\n      map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n       [1..<degree (pCons 0 f - smult x f)] @\n      [w]) =\n    length\n     (map (\\<lambda>i.\n              if i = 0 then - z\n              else if i = degree (pCons 0 f - smult x f) then w\n                   else coeff f (i - 1) / coeff f i - x)\n       [0..<degree (pCons 0 f - smult x f) + 1])\n 2. \\<And>i.\n       i < length\n            (- z #\n             map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n              [1..<degree (pCons 0 f - smult x f)] @\n             [w]) \\<Longrightarrow>\n       (- z #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n         [1..<degree (pCons 0 f - smult x f)] @\n        [w]) !\n       i =\n       map (\\<lambda>i.\n               if i = 0 then - z\n               else if i = degree (pCons 0 f - smult x f) then w\n                    else coeff f (i - 1) / coeff f i - x)\n        [0..<degree (pCons 0 f - smult x f) + 1] !\n       i", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>i = 0 \\<Longrightarrow> ?thesis;\n   0 < i \\<and> i < degree (pCons 0 f - smult x f) \\<Longrightarrow>\n   ?thesis;\n   i = degree (pCons 0 f - smult x f) \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis", "show \"(- z #\n              map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n               [1..<degree (pCons 0 f - smult x f)] @\n              [w]) ! i =\n             map (\\<lambda>i. if i = 0 then - z\n                      else if i = degree (pCons 0 f - smult x f) then w\n                           else coeff f (i - 1) / coeff f i - x)\n              [0..<degree (pCons 0 f - smult x f) + 1] ! i\""], ["proof (prove)\nusing this:\n  \\<lbrakk>i = 0 \\<Longrightarrow> ?thesis;\n   0 < i \\<and> i < degree (pCons 0 f - smult x f) \\<Longrightarrow>\n   ?thesis;\n   i = degree (pCons 0 f - smult x f) \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (- z #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [w]) !\n    i =\n    map (\\<lambda>i.\n            if i = 0 then - z\n            else if i = degree (pCons 0 f - smult x f) then w\n                 else coeff f (i - 1) / coeff f i - x)\n     [0..<degree (pCons 0 f - smult x f) + 1] !\n    i", "apply (cases)"], ["proof (prove)\ngoal (3 subgoals):\n 1. i = 0 \\<Longrightarrow>\n    (- z #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [w]) !\n    i =\n    map (\\<lambda>i.\n            if i = 0 then - z\n            else if i = degree (pCons 0 f - smult x f) then w\n                 else coeff f (i - 1) / coeff f i - x)\n     [0..<degree (pCons 0 f - smult x f) + 1] !\n    i\n 2. 0 < i \\<and> i < degree (pCons 0 f - smult x f) \\<Longrightarrow>\n    (- z #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [w]) !\n    i =\n    map (\\<lambda>i.\n            if i = 0 then - z\n            else if i = degree (pCons 0 f - smult x f) then w\n                 else coeff f (i - 1) / coeff f i - x)\n     [0..<degree (pCons 0 f - smult x f) + 1] !\n    i\n 3. i = degree (pCons 0 f - smult x f) \\<Longrightarrow>\n    (- z #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [w]) !\n    i =\n    map (\\<lambda>i.\n            if i = 0 then - z\n            else if i = degree (pCons 0 f - smult x f) then w\n                 else coeff f (i - 1) / coeff f i - x)\n     [0..<degree (pCons 0 f - smult x f) + 1] !\n    i", "by (auto simp: nth_append)"], ["proof (state)\nthis:\n  (- z #\n   map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n    [1..<degree (pCons 0 f - smult x f)] @\n   [w]) !\n  i =\n  map (\\<lambda>i.\n          if i = 0 then - z\n          else if i = degree (pCons 0 f - smult x f) then w\n               else coeff f (i - 1) / coeff f i - x)\n   [0..<degree (pCons 0 f - smult x f) + 1] !\n  i\n\ngoal (1 subgoal):\n 1. length\n     (- z #\n      map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n       [1..<degree (pCons 0 f - smult x f)] @\n      [w]) =\n    length\n     (map (\\<lambda>i.\n              if i = 0 then - z\n              else if i = degree (pCons 0 f - smult x f) then w\n                   else coeff f (i - 1) / coeff f i - x)\n       [0..<degree (pCons 0 f - smult x f) + 1])", "qed (force simp: hdeg)"], ["proof (state)\nthis:\n  - z #\n  map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n   [1..<degree (pCons 0 f - smult x f)] @\n  [w] =\n  map (\\<lambda>i.\n          if i = 0 then - z\n          else if i = degree (pCons 0 f - smult x f) then w\n               else coeff f (i - 1) / coeff f i - x)\n   [0..<degree (pCons 0 f - smult x f) + 1]\n\ngoal (1 subgoal):\n 1. \\<And>z w.\n       \\<lbrakk>0 < z; 0 < w\\<rbrakk>\n       \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) =\n                         changes\n                          (- z #\n                           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n                            [1..<degree (pCons 0 f - smult x f)] @\n                           [w])", "also"], ["proof (state)\nthis:\n  - z #\n  map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n   [1..<degree (pCons 0 f - smult x f)] @\n  [w] =\n  map (\\<lambda>i.\n          if i = 0 then - z\n          else if i = degree (pCons 0 f - smult x f) then w\n               else coeff f (i - 1) / coeff f i - x)\n   [0..<degree (pCons 0 f - smult x f) + 1]\n\ngoal (1 subgoal):\n 1. \\<And>z w.\n       \\<lbrakk>0 < z; 0 < w\\<rbrakk>\n       \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) =\n                         changes\n                          (- z #\n                           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n                            [1..<degree (pCons 0 f - smult x f)] @\n                           [w])", "have \"... = [?f z w i * (nth_default 0 (coeffs (f * [:-x, 1:])) i). \n                        i \\<leftarrow> [0..<Suc (degree (pCons 0 f - smult x f))]]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map (\\<lambda>i.\n            if i = 0 then - z\n            else if i = degree (pCons 0 f - smult x f) then w\n                 else coeff f (i - 1) / coeff f i - x)\n     [0..<degree (pCons 0 f - smult x f) + 1] =\n    map (\\<lambda>i.\n            (if i = 0 then z / (x * coeff f 0)\n             else if i = degree (pCons 0 f - smult x f)\n                  then w / lead_coeff f else inverse (coeff f i)) *\n            nth_default 0 (coeffs (f * [:- x, 1:])) i)\n     [0..<Suc (degree (pCons 0 f - smult x f))]", "proof (rule map_cong)"], ["proof (state)\ngoal (2 subgoals):\n 1. [0..<degree (pCons 0 f - smult x f) + 1] =\n    [0..<Suc (degree (pCons 0 f - smult x f))]\n 2. \\<And>xa.\n       xa \\<in> set [0..<\n                     Suc (degree (pCons 0 f - smult x f))] \\<Longrightarrow>\n       (if xa = 0 then - z\n        else if xa = degree (pCons 0 f - smult x f) then w\n             else coeff f (xa - 1) / coeff f xa - x) =\n       (if xa = 0 then z / (x * coeff f 0)\n        else if xa = degree (pCons 0 f - smult x f) then w / lead_coeff f\n             else inverse (coeff f xa)) *\n       nth_default 0 (coeffs (f * [:- x, 1:])) xa", "fix i"], ["proof (state)\ngoal (2 subgoals):\n 1. [0..<degree (pCons 0 f - smult x f) + 1] =\n    [0..<Suc (degree (pCons 0 f - smult x f))]\n 2. \\<And>xa.\n       xa \\<in> set [0..<\n                     Suc (degree (pCons 0 f - smult x f))] \\<Longrightarrow>\n       (if xa = 0 then - z\n        else if xa = degree (pCons 0 f - smult x f) then w\n             else coeff f (xa - 1) / coeff f xa - x) =\n       (if xa = 0 then z / (x * coeff f 0)\n        else if xa = degree (pCons 0 f - smult x f) then w / lead_coeff f\n             else inverse (coeff f xa)) *\n       nth_default 0 (coeffs (f * [:- x, 1:])) xa", "assume \"i \\<in> set [0..<Suc (degree (pCons 0 f - smult x f))]\""], ["proof (state)\nthis:\n  i \\<in> set [0..<Suc (degree (pCons 0 f - smult x f))]\n\ngoal (2 subgoals):\n 1. [0..<degree (pCons 0 f - smult x f) + 1] =\n    [0..<Suc (degree (pCons 0 f - smult x f))]\n 2. \\<And>xa.\n       xa \\<in> set [0..<\n                     Suc (degree (pCons 0 f - smult x f))] \\<Longrightarrow>\n       (if xa = 0 then - z\n        else if xa = degree (pCons 0 f - smult x f) then w\n             else coeff f (xa - 1) / coeff f xa - x) =\n       (if xa = 0 then z / (x * coeff f 0)\n        else if xa = degree (pCons 0 f - smult x f) then w / lead_coeff f\n             else inverse (coeff f xa)) *\n       nth_default 0 (coeffs (f * [:- x, 1:])) xa", "then"], ["proof (chain)\npicking this:\n  i \\<in> set [0..<Suc (degree (pCons 0 f - smult x f))]", "consider (a)\"i = 0\" | (b)\"(0 \\<noteq> i \\<and> i < degree (pCons 0 f - smult x f))\" |\n          (c)\"i = degree (pCons 0 f - smult x f)\""], ["proof (prove)\nusing this:\n  i \\<in> set [0..<Suc (degree (pCons 0 f - smult x f))]\n\ngoal (1 subgoal):\n 1. \\<lbrakk>i = 0 \\<Longrightarrow> thesis;\n     0 \\<noteq> i \\<and>\n     i < degree (pCons 0 f - smult x f) \\<Longrightarrow>\n     thesis;\n     i = degree (pCons 0 f - smult x f) \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by fastforce"], ["proof (state)\nthis:\n  \\<lbrakk>i = 0 \\<Longrightarrow> ?thesis;\n   0 \\<noteq> i \\<and> i < degree (pCons 0 f - smult x f) \\<Longrightarrow>\n   ?thesis;\n   i = degree (pCons 0 f - smult x f) \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (2 subgoals):\n 1. [0..<degree (pCons 0 f - smult x f) + 1] =\n    [0..<Suc (degree (pCons 0 f - smult x f))]\n 2. \\<And>xa.\n       xa \\<in> set [0..<\n                     Suc (degree (pCons 0 f - smult x f))] \\<Longrightarrow>\n       (if xa = 0 then - z\n        else if xa = degree (pCons 0 f - smult x f) then w\n             else coeff f (xa - 1) / coeff f xa - x) =\n       (if xa = 0 then z / (x * coeff f 0)\n        else if xa = degree (pCons 0 f - smult x f) then w / lead_coeff f\n             else inverse (coeff f xa)) *\n       nth_default 0 (coeffs (f * [:- x, 1:])) xa", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>i = 0 \\<Longrightarrow> ?thesis;\n   0 \\<noteq> i \\<and> i < degree (pCons 0 f - smult x f) \\<Longrightarrow>\n   ?thesis;\n   i = degree (pCons 0 f - smult x f) \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis", "show \"(if i = 0 then - z\n           else if i = degree (pCons 0 f - smult x f) then w\n                else coeff f (i - 1) / coeff f i - x) =\n          (if i = 0 then z / (x * coeff f 0)\n           else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n                else inverse (coeff f i)) *\n          nth_default 0 (coeffs (f * [:- x, 1:])) i\""], ["proof (prove)\nusing this:\n  \\<lbrakk>i = 0 \\<Longrightarrow> ?thesis;\n   0 \\<noteq> i \\<and> i < degree (pCons 0 f - smult x f) \\<Longrightarrow>\n   ?thesis;\n   i = degree (pCons 0 f - smult x f) \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (if i = 0 then - z\n     else if i = degree (pCons 0 f - smult x f) then w\n          else coeff f (i - 1) / coeff f i - x) =\n    (if i = 0 then z / (x * coeff f 0)\n     else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n          else inverse (coeff f i)) *\n    nth_default 0 (coeffs (f * [:- x, 1:])) i", "proof (cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. i = 0 \\<Longrightarrow>\n    (if i = 0 then - z\n     else if i = degree (pCons 0 f - smult x f) then w\n          else coeff f (i - 1) / coeff f i - x) =\n    (if i = 0 then z / (x * coeff f 0)\n     else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n          else inverse (coeff f i)) *\n    nth_default 0 (coeffs (f * [:- x, 1:])) i\n 2. 0 \\<noteq> i \\<and> i < degree (pCons 0 f - smult x f) \\<Longrightarrow>\n    (if i = 0 then - z\n     else if i = degree (pCons 0 f - smult x f) then w\n          else coeff f (i - 1) / coeff f i - x) =\n    (if i = 0 then z / (x * coeff f 0)\n     else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n          else inverse (coeff f i)) *\n    nth_default 0 (coeffs (f * [:- x, 1:])) i\n 3. i = degree (pCons 0 f - smult x f) \\<Longrightarrow>\n    (if i = 0 then - z\n     else if i = degree (pCons 0 f - smult x f) then w\n          else coeff f (i - 1) / coeff f i - x) =\n    (if i = 0 then z / (x * coeff f 0)\n     else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n          else inverse (coeff f i)) *\n    nth_default 0 (coeffs (f * [:- x, 1:])) i", "case (a)"], ["proof (state)\nthis:\n  i = 0\n\ngoal (3 subgoals):\n 1. i = 0 \\<Longrightarrow>\n    (if i = 0 then - z\n     else if i = degree (pCons 0 f - smult x f) then w\n          else coeff f (i - 1) / coeff f i - x) =\n    (if i = 0 then z / (x * coeff f 0)\n     else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n          else inverse (coeff f i)) *\n    nth_default 0 (coeffs (f * [:- x, 1:])) i\n 2. 0 \\<noteq> i \\<and> i < degree (pCons 0 f - smult x f) \\<Longrightarrow>\n    (if i = 0 then - z\n     else if i = degree (pCons 0 f - smult x f) then w\n          else coeff f (i - 1) / coeff f i - x) =\n    (if i = 0 then z / (x * coeff f 0)\n     else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n          else inverse (coeff f i)) *\n    nth_default 0 (coeffs (f * [:- x, 1:])) i\n 3. i = degree (pCons 0 f - smult x f) \\<Longrightarrow>\n    (if i = 0 then - z\n     else if i = degree (pCons 0 f - smult x f) then w\n          else coeff f (i - 1) / coeff f i - x) =\n    (if i = 0 then z / (x * coeff f 0)\n     else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n          else inverse (coeff f i)) *\n    nth_default 0 (coeffs (f * [:- x, 1:])) i", "thus ?thesis"], ["proof (prove)\nusing this:\n  i = 0\n\ngoal (1 subgoal):\n 1. (if i = 0 then - z\n     else if i = degree (pCons 0 f - smult x f) then w\n          else coeff f (i - 1) / coeff f i - x) =\n    (if i = 0 then z / (x * coeff f 0)\n     else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n          else inverse (coeff f i)) *\n    nth_default 0 (coeffs (f * [:- x, 1:])) i", "using hx \\<open>poly f 0 \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  i = 0\n  0 < x\n  poly f 0 \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (if i = 0 then - z\n     else if i = degree (pCons 0 f - smult x f) then w\n          else coeff f (i - 1) / coeff f i - x) =\n    (if i = 0 then z / (x * coeff f 0)\n     else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n          else inverse (coeff f i)) *\n    nth_default 0 (coeffs (f * [:- x, 1:])) i", "by (auto simp: nth_default_coeffs_eq poly_0_coeff_0)"], ["proof (state)\nthis:\n  (if i = 0 then - z\n   else if i = degree (pCons 0 f - smult x f) then w\n        else coeff f (i - 1) / coeff f i - x) =\n  (if i = 0 then z / (x * coeff f 0)\n   else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n        else inverse (coeff f i)) *\n  nth_default 0 (coeffs (f * [:- x, 1:])) i\n\ngoal (2 subgoals):\n 1. 0 \\<noteq> i \\<and> i < degree (pCons 0 f - smult x f) \\<Longrightarrow>\n    (if i = 0 then - z\n     else if i = degree (pCons 0 f - smult x f) then w\n          else coeff f (i - 1) / coeff f i - x) =\n    (if i = 0 then z / (x * coeff f 0)\n     else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n          else inverse (coeff f i)) *\n    nth_default 0 (coeffs (f * [:- x, 1:])) i\n 2. i = degree (pCons 0 f - smult x f) \\<Longrightarrow>\n    (if i = 0 then - z\n     else if i = degree (pCons 0 f - smult x f) then w\n          else coeff f (i - 1) / coeff f i - x) =\n    (if i = 0 then z / (x * coeff f 0)\n     else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n          else inverse (coeff f i)) *\n    nth_default 0 (coeffs (f * [:- x, 1:])) i", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. 0 \\<noteq> i \\<and> i < degree (pCons 0 f - smult x f) \\<Longrightarrow>\n    (if i = 0 then - z\n     else if i = degree (pCons 0 f - smult x f) then w\n          else coeff f (i - 1) / coeff f i - x) =\n    (if i = 0 then z / (x * coeff f 0)\n     else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n          else inverse (coeff f i)) *\n    nth_default 0 (coeffs (f * [:- x, 1:])) i\n 2. i = degree (pCons 0 f - smult x f) \\<Longrightarrow>\n    (if i = 0 then - z\n     else if i = degree (pCons 0 f - smult x f) then w\n          else coeff f (i - 1) / coeff f i - x) =\n    (if i = 0 then z / (x * coeff f 0)\n     else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n          else inverse (coeff f i)) *\n    nth_default 0 (coeffs (f * [:- x, 1:])) i", "case (b)"], ["proof (state)\nthis:\n  0 \\<noteq> i \\<and> i < degree (pCons 0 f - smult x f)\n\ngoal (2 subgoals):\n 1. 0 \\<noteq> i \\<and> i < degree (pCons 0 f - smult x f) \\<Longrightarrow>\n    (if i = 0 then - z\n     else if i = degree (pCons 0 f - smult x f) then w\n          else coeff f (i - 1) / coeff f i - x) =\n    (if i = 0 then z / (x * coeff f 0)\n     else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n          else inverse (coeff f i)) *\n    nth_default 0 (coeffs (f * [:- x, 1:])) i\n 2. i = degree (pCons 0 f - smult x f) \\<Longrightarrow>\n    (if i = 0 then - z\n     else if i = degree (pCons 0 f - smult x f) then w\n          else coeff f (i - 1) / coeff f i - x) =\n    (if i = 0 then z / (x * coeff f 0)\n     else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n          else inverse (coeff f i)) *\n    nth_default 0 (coeffs (f * [:- x, 1:])) i", "thus ?thesis"], ["proof (prove)\nusing this:\n  0 \\<noteq> i \\<and> i < degree (pCons 0 f - smult x f)\n\ngoal (1 subgoal):\n 1. (if i = 0 then - z\n     else if i = degree (pCons 0 f - smult x f) then w\n          else coeff f (i - 1) / coeff f i - x) =\n    (if i = 0 then z / (x * coeff f 0)\n     else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n          else inverse (coeff f i)) *\n    nth_default 0 (coeffs (f * [:- x, 1:])) i", "using hx h'[of i] hdeg"], ["proof (prove)\nusing this:\n  0 \\<noteq> i \\<and> i < degree (pCons 0 f - smult x f)\n  0 < x\n  i \\<le> degree f \\<Longrightarrow> 0 < coeff f i\n  degree (pCons 0 f - smult x f) = degree f + 1\n\ngoal (1 subgoal):\n 1. (if i = 0 then - z\n     else if i = degree (pCons 0 f - smult x f) then w\n          else coeff f (i - 1) / coeff f i - x) =\n    (if i = 0 then z / (x * coeff f 0)\n     else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n          else inverse (coeff f i)) *\n    nth_default 0 (coeffs (f * [:- x, 1:])) i", "by (auto simp: field_simps nth_default_coeffs_eq coeff_pCons nat.split poly_0_coeff_0)"], ["proof (state)\nthis:\n  (if i = 0 then - z\n   else if i = degree (pCons 0 f - smult x f) then w\n        else coeff f (i - 1) / coeff f i - x) =\n  (if i = 0 then z / (x * coeff f 0)\n   else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n        else inverse (coeff f i)) *\n  nth_default 0 (coeffs (f * [:- x, 1:])) i\n\ngoal (1 subgoal):\n 1. i = degree (pCons 0 f - smult x f) \\<Longrightarrow>\n    (if i = 0 then - z\n     else if i = degree (pCons 0 f - smult x f) then w\n          else coeff f (i - 1) / coeff f i - x) =\n    (if i = 0 then z / (x * coeff f 0)\n     else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n          else inverse (coeff f i)) *\n    nth_default 0 (coeffs (f * [:- x, 1:])) i", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. i = degree (pCons 0 f - smult x f) \\<Longrightarrow>\n    (if i = 0 then - z\n     else if i = degree (pCons 0 f - smult x f) then w\n          else coeff f (i - 1) / coeff f i - x) =\n    (if i = 0 then z / (x * coeff f 0)\n     else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n          else inverse (coeff f i)) *\n    nth_default 0 (coeffs (f * [:- x, 1:])) i", "case (c)"], ["proof (state)\nthis:\n  i = degree (pCons 0 f - smult x f)\n\ngoal (1 subgoal):\n 1. i = degree (pCons 0 f - smult x f) \\<Longrightarrow>\n    (if i = 0 then - z\n     else if i = degree (pCons 0 f - smult x f) then w\n          else coeff f (i - 1) / coeff f i - x) =\n    (if i = 0 then z / (x * coeff f 0)\n     else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n          else inverse (coeff f i)) *\n    nth_default 0 (coeffs (f * [:- x, 1:])) i", "thus ?thesis"], ["proof (prove)\nusing this:\n  i = degree (pCons 0 f - smult x f)\n\ngoal (1 subgoal):\n 1. (if i = 0 then - z\n     else if i = degree (pCons 0 f - smult x f) then w\n          else coeff f (i - 1) / coeff f i - x) =\n    (if i = 0 then z / (x * coeff f 0)\n     else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n          else inverse (coeff f i)) *\n    nth_default 0 (coeffs (f * [:- x, 1:])) i", "using hdeg"], ["proof (prove)\nusing this:\n  i = degree (pCons 0 f - smult x f)\n  degree (pCons 0 f - smult x f) = degree f + 1\n\ngoal (1 subgoal):\n 1. (if i = 0 then - z\n     else if i = degree (pCons 0 f - smult x f) then w\n          else coeff f (i - 1) / coeff f i - x) =\n    (if i = 0 then z / (x * coeff f 0)\n     else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n          else inverse (coeff f i)) *\n    nth_default 0 (coeffs (f * [:- x, 1:])) i", "by (auto simp: nth_default_coeffs_eq coeff_eq_0)"], ["proof (state)\nthis:\n  (if i = 0 then - z\n   else if i = degree (pCons 0 f - smult x f) then w\n        else coeff f (i - 1) / coeff f i - x) =\n  (if i = 0 then z / (x * coeff f 0)\n   else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n        else inverse (coeff f i)) *\n  nth_default 0 (coeffs (f * [:- x, 1:])) i\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (if i = 0 then - z\n   else if i = degree (pCons 0 f - smult x f) then w\n        else coeff f (i - 1) / coeff f i - x) =\n  (if i = 0 then z / (x * coeff f 0)\n   else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n        else inverse (coeff f i)) *\n  nth_default 0 (coeffs (f * [:- x, 1:])) i\n\ngoal (1 subgoal):\n 1. [0..<degree (pCons 0 f - smult x f) + 1] =\n    [0..<Suc (degree (pCons 0 f - smult x f))]", "qed force"], ["proof (state)\nthis:\n  map (\\<lambda>i.\n          if i = 0 then - z\n          else if i = degree (pCons 0 f - smult x f) then w\n               else coeff f (i - 1) / coeff f i - x)\n   [0..<degree (pCons 0 f - smult x f) + 1] =\n  map (\\<lambda>i.\n          (if i = 0 then z / (x * coeff f 0)\n           else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n                else inverse (coeff f i)) *\n          nth_default 0 (coeffs (f * [:- x, 1:])) i)\n   [0..<Suc (degree (pCons 0 f - smult x f))]\n\ngoal (1 subgoal):\n 1. \\<And>z w.\n       \\<lbrakk>0 < z; 0 < w\\<rbrakk>\n       \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) =\n                         changes\n                          (- z #\n                           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n                            [1..<degree (pCons 0 f - smult x f)] @\n                           [w])", "finally"], ["proof (chain)\npicking this:\n  - z #\n  map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n   [1..<degree (pCons 0 f - smult x f)] @\n  [w] =\n  map (\\<lambda>i.\n          (if i = 0 then z / (x * coeff f 0)\n           else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n                else inverse (coeff f i)) *\n          nth_default 0 (coeffs (f * [:- x, 1:])) i)\n   [0..<Suc (degree (pCons 0 f - smult x f))]", "have 1: \" - z #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x) [1..<degree (pCons 0 f - smult x f)] @ [w] =\n        map (\\<lambda>i. (if i = 0 then z / (x * coeff f 0)\n                  else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n                       else inverse (coeff f i)) *\n                 nth_default 0 (coeffs (f * [:- x, 1:])) i)\n         [0..<Suc (degree (pCons 0 f - smult x f))]\""], ["proof (prove)\nusing this:\n  - z #\n  map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n   [1..<degree (pCons 0 f - smult x f)] @\n  [w] =\n  map (\\<lambda>i.\n          (if i = 0 then z / (x * coeff f 0)\n           else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n                else inverse (coeff f i)) *\n          nth_default 0 (coeffs (f * [:- x, 1:])) i)\n   [0..<Suc (degree (pCons 0 f - smult x f))]\n\ngoal (1 subgoal):\n 1. - z #\n    map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n     [1..<degree (pCons 0 f - smult x f)] @\n    [w] =\n    map (\\<lambda>i.\n            (if i = 0 then z / (x * coeff f 0)\n             else if i = degree (pCons 0 f - smult x f)\n                  then w / lead_coeff f else inverse (coeff f i)) *\n            nth_default 0 (coeffs (f * [:- x, 1:])) i)\n     [0..<Suc (degree (pCons 0 f - smult x f))]", "."], ["proof (state)\nthis:\n  - z #\n  map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n   [1..<degree (pCons 0 f - smult x f)] @\n  [w] =\n  map (\\<lambda>i.\n          (if i = 0 then z / (x * coeff f 0)\n           else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n                else inverse (coeff f i)) *\n          nth_default 0 (coeffs (f * [:- x, 1:])) i)\n   [0..<Suc (degree (pCons 0 f - smult x f))]\n\ngoal (1 subgoal):\n 1. \\<And>z w.\n       \\<lbrakk>0 < z; 0 < w\\<rbrakk>\n       \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) =\n                         changes\n                          (- z #\n                           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n                            [1..<degree (pCons 0 f - smult x f)] @\n                           [w])", "have \"f * [:-x, 1:] \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f * [:- x, 1:] \\<noteq> 0", "using hdeg"], ["proof (prove)\nusing this:\n  degree (pCons 0 f - smult x f) = degree f + 1\n\ngoal (1 subgoal):\n 1. f * [:- x, 1:] \\<noteq> 0", "by force"], ["proof (state)\nthis:\n  f * [:- x, 1:] \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<And>z w.\n       \\<lbrakk>0 < z; 0 < w\\<rbrakk>\n       \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) =\n                         changes\n                          (- z #\n                           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n                            [1..<degree (pCons 0 f - smult x f)] @\n                           [w])", "show \"changes (coeffs (f * [:- x, 1:])) =\n           changes\n            (- z #\n             map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n              [1..<degree (pCons 0 f - smult x f)] @\n             [w])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. changes (coeffs (f * [:- x, 1:])) =\n    changes\n     (- z #\n      map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n       [1..<degree (pCons 0 f - smult x f)] @\n      [w])", "apply (subst 1)"], ["proof (prove)\ngoal (1 subgoal):\n 1. changes (coeffs (f * [:- x, 1:])) =\n    changes\n     (map (\\<lambda>i.\n              (if i = 0 then z / (x * coeff f 0)\n               else if i = degree (pCons 0 f - smult x f)\n                    then w / lead_coeff f else inverse (coeff f i)) *\n              nth_default 0 (coeffs (f * [:- x, 1:])) i)\n       [0..<Suc (degree (pCons 0 f - smult x f))])", "apply (rule changes_scale[symmetric])"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>i.\n       i < Suc (degree (pCons 0 f - smult x f)) \\<Longrightarrow>\n       0 < (if i = 0 then z / (x * coeff f 0)\n            else if i = degree (pCons 0 f - smult x f) then w / lead_coeff f\n                 else inverse (coeff f i))\n 2. length (coeffs (f * [:- x, 1:]))\n    \\<le> Suc (degree (pCons 0 f - smult x f))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. i_ < Suc (degree (pCons 0 f - smult x f)) \\<Longrightarrow>\n    0 < (if i_ = 0 then z / (x * coeff f 0)\n         else if i_ = degree (pCons 0 f - smult x f) then w / lead_coeff f\n              else inverse (coeff f i_))", "using hz hw hx h' hdeg"], ["proof (prove)\nusing this:\n  0 < z\n  0 < w\n  0 < x\n  ?i \\<le> degree f \\<Longrightarrow> 0 < coeff f ?i\n  degree (pCons 0 f - smult x f) = degree f + 1\n\ngoal (1 subgoal):\n 1. i_ < Suc (degree (pCons 0 f - smult x f)) \\<Longrightarrow>\n    0 < (if i_ = 0 then z / (x * coeff f 0)\n         else if i_ = degree (pCons 0 f - smult x f) then w / lead_coeff f\n              else inverse (coeff f i_))", "by auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. length (coeffs (f * [:- x, 1:]))\n    \\<le> Suc (degree (pCons 0 f - smult x f))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. length (coeffs (f * [:- x, 1:]))\n    \\<le> Suc (degree (pCons 0 f - smult x f))", "using hdeg \\<open>f * [:-x, 1:] \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  degree (pCons 0 f - smult x f) = degree f + 1\n  f * [:- x, 1:] \\<noteq> 0\n\ngoal (1 subgoal):\n 1. length (coeffs (f * [:- x, 1:]))\n    \\<le> Suc (degree (pCons 0 f - smult x f))", "by (auto simp: length_coeffs)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  changes (coeffs (f * [:- x, 1:])) =\n  changes\n   (- z #\n    map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n     [1..<degree (pCons 0 f - smult x f)] @\n    [w])\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>0 < ?z; 0 < ?w\\<rbrakk>\n  \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) =\n                    changes\n                     (- ?z #\n                      map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n                       [1..<degree (pCons 0 f - smult x f)] @\n                      [?w])\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "hence \"changes (coeffs (f * [:- x, 1:])) =\n        changes\n         (- (max 1 (-(coeff f 0 / coeff f 1 - x))) #\n          map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n           [1..<degree (pCons 0 f - smult x f)] @\n          [max 1 (coeff f (degree f - 1) / lead_coeff f - x)])\""], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < ?z; 0 < ?w\\<rbrakk>\n  \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) =\n                    changes\n                     (- ?z #\n                      map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n                       [1..<degree (pCons 0 f - smult x f)] @\n                      [?w])\n\ngoal (1 subgoal):\n 1. changes (coeffs (f * [:- x, 1:])) =\n    changes\n     (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n      map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n       [1..<degree (pCons 0 f - smult x f)] @\n      [max 1 (coeff f (degree f - 1) / lead_coeff f - x)])", "by force"], ["proof (state)\nthis:\n  changes (coeffs (f * [:- x, 1:])) =\n  changes\n   (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n    map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n     [1..<degree (pCons 0 f - smult x f)] @\n    [max 1 (coeff f (degree f - 1) / lead_coeff f - x)])\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "also"], ["proof (state)\nthis:\n  changes (coeffs (f * [:- x, 1:])) =\n  changes\n   (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n    map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n     [1..<degree (pCons 0 f - smult x f)] @\n    [max 1 (coeff f (degree f - 1) / lead_coeff f - x)])\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "have \"... = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. changes\n     (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n      map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n       [1..<degree (pCons 0 f - smult x f)] @\n      [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) =\n    1", "proof (rule changes_increasing)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>i.\n       i < length\n            (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n             map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n              [1..<degree (pCons 0 f - smult x f)] @\n             [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) -\n           1 \\<Longrightarrow>\n       (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n         [1..<degree (pCons 0 f - smult x f)] @\n        [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n       i\n       \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n              map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n               [1..<degree (pCons 0 f - smult x f)] @\n              [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n             (i + 1)\n 2. 1 < length\n         (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n          map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n           [1..<degree (pCons 0 f - smult x f)] @\n          [max 1 (coeff f (degree f - 1) / lead_coeff f - x)])\n 3. hd (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n         [1..<degree (pCons 0 f - smult x f)] @\n        [max 1 (coeff f (degree f - 1) / lead_coeff f - x)])\n    < 0\n 4. 0 < last\n         (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n          map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n           [1..<degree (pCons 0 f - smult x f)] @\n          [max 1 (coeff f (degree f - 1) / lead_coeff f - x)])", "fix i"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>i.\n       i < length\n            (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n             map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n              [1..<degree (pCons 0 f - smult x f)] @\n             [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) -\n           1 \\<Longrightarrow>\n       (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n         [1..<degree (pCons 0 f - smult x f)] @\n        [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n       i\n       \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n              map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n               [1..<degree (pCons 0 f - smult x f)] @\n              [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n             (i + 1)\n 2. 1 < length\n         (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n          map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n           [1..<degree (pCons 0 f - smult x f)] @\n          [max 1 (coeff f (degree f - 1) / lead_coeff f - x)])\n 3. hd (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n         [1..<degree (pCons 0 f - smult x f)] @\n        [max 1 (coeff f (degree f - 1) / lead_coeff f - x)])\n    < 0\n 4. 0 < last\n         (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n          map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n           [1..<degree (pCons 0 f - smult x f)] @\n          [max 1 (coeff f (degree f - 1) / lead_coeff f - x)])", "assume \"i < length\n              (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n               map (\\<lambda>i. coeff f (i - 1) / coeff f i - x) [1..<degree (pCons 0 f - smult x f)] @\n               [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) - 1\""], ["proof (state)\nthis:\n  i < length\n       (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n         [1..<degree (pCons 0 f - smult x f)] @\n        [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) -\n      1\n\ngoal (4 subgoals):\n 1. \\<And>i.\n       i < length\n            (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n             map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n              [1..<degree (pCons 0 f - smult x f)] @\n             [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) -\n           1 \\<Longrightarrow>\n       (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n         [1..<degree (pCons 0 f - smult x f)] @\n        [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n       i\n       \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n              map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n               [1..<degree (pCons 0 f - smult x f)] @\n              [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n             (i + 1)\n 2. 1 < length\n         (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n          map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n           [1..<degree (pCons 0 f - smult x f)] @\n          [max 1 (coeff f (degree f - 1) / lead_coeff f - x)])\n 3. hd (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n         [1..<degree (pCons 0 f - smult x f)] @\n        [max 1 (coeff f (degree f - 1) / lead_coeff f - x)])\n    < 0\n 4. 0 < last\n         (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n          map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n           [1..<degree (pCons 0 f - smult x f)] @\n          [max 1 (coeff f (degree f - 1) / lead_coeff f - x)])", "hence \"i < degree (pCons 0 f - smult x f)\""], ["proof (prove)\nusing this:\n  i < length\n       (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n         [1..<degree (pCons 0 f - smult x f)] @\n        [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) -\n      1\n\ngoal (1 subgoal):\n 1. i < degree (pCons 0 f - smult x f)", "using hdeg Suc.hyps(2)"], ["proof (prove)\nusing this:\n  i < length\n       (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n         [1..<degree (pCons 0 f - smult x f)] @\n        [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) -\n      1\n  degree (pCons 0 f - smult x f) = degree f + 1\n  Suc df = degree f\n\ngoal (1 subgoal):\n 1. i < degree (pCons 0 f - smult x f)", "by fastforce"], ["proof (state)\nthis:\n  i < degree (pCons 0 f - smult x f)\n\ngoal (4 subgoals):\n 1. \\<And>i.\n       i < length\n            (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n             map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n              [1..<degree (pCons 0 f - smult x f)] @\n             [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) -\n           1 \\<Longrightarrow>\n       (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n         [1..<degree (pCons 0 f - smult x f)] @\n        [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n       i\n       \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n              map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n               [1..<degree (pCons 0 f - smult x f)] @\n              [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n             (i + 1)\n 2. 1 < length\n         (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n          map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n           [1..<degree (pCons 0 f - smult x f)] @\n          [max 1 (coeff f (degree f - 1) / lead_coeff f - x)])\n 3. hd (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n         [1..<degree (pCons 0 f - smult x f)] @\n        [max 1 (coeff f (degree f - 1) / lead_coeff f - x)])\n    < 0\n 4. 0 < last\n         (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n          map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n           [1..<degree (pCons 0 f - smult x f)] @\n          [max 1 (coeff f (degree f - 1) / lead_coeff f - x)])", "then"], ["proof (chain)\npicking this:\n  i < degree (pCons 0 f - smult x f)", "consider (a)\"i = 0\" | (b)\"0 \\<noteq> i \\<and> i < degree (pCons 0 f - smult x f) - 1\" |\n        (c)\"i = degree (pCons 0 f - smult x f) - 1\""], ["proof (prove)\nusing this:\n  i < degree (pCons 0 f - smult x f)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>i = 0 \\<Longrightarrow> thesis;\n     0 \\<noteq> i \\<and>\n     i < degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow>\n     thesis;\n     i = degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow>\n     thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by fastforce"], ["proof (state)\nthis:\n  \\<lbrakk>i = 0 \\<Longrightarrow> ?thesis;\n   0 \\<noteq> i \\<and>\n   i < degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow>\n   ?thesis;\n   i = degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (4 subgoals):\n 1. \\<And>i.\n       i < length\n            (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n             map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n              [1..<degree (pCons 0 f - smult x f)] @\n             [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) -\n           1 \\<Longrightarrow>\n       (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n         [1..<degree (pCons 0 f - smult x f)] @\n        [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n       i\n       \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n              map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n               [1..<degree (pCons 0 f - smult x f)] @\n              [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n             (i + 1)\n 2. 1 < length\n         (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n          map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n           [1..<degree (pCons 0 f - smult x f)] @\n          [max 1 (coeff f (degree f - 1) / lead_coeff f - x)])\n 3. hd (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n         [1..<degree (pCons 0 f - smult x f)] @\n        [max 1 (coeff f (degree f - 1) / lead_coeff f - x)])\n    < 0\n 4. 0 < last\n         (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n          map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n           [1..<degree (pCons 0 f - smult x f)] @\n          [max 1 (coeff f (degree f - 1) / lead_coeff f - x)])", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>i = 0 \\<Longrightarrow> ?thesis;\n   0 \\<noteq> i \\<and>\n   i < degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow>\n   ?thesis;\n   i = degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis", "show \"(- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n          map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n           [1..<degree (pCons 0 f - smult x f)] @\n          [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n         i\n         \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n             map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n              [1..<degree (pCons 0 f - smult x f)] @\n             [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n            (i + 1)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>i = 0 \\<Longrightarrow> ?thesis;\n   0 \\<noteq> i \\<and>\n   i < degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow>\n   ?thesis;\n   i = degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)", "proof (cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. i = 0 \\<Longrightarrow>\n    (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)\n 2. 0 \\<noteq> i \\<and>\n    i < degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow>\n    (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)\n 3. i = degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow>\n    (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)", "case a"], ["proof (state)\nthis:\n  i = 0\n\ngoal (3 subgoals):\n 1. i = 0 \\<Longrightarrow>\n    (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)\n 2. 0 \\<noteq> i \\<and>\n    i < degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow>\n    (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)\n 3. i = degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow>\n    (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)", "then"], ["proof (chain)\npicking this:\n  i = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  i = 0\n\ngoal (1 subgoal):\n 1. (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)", "by (auto simp: nth_append)"], ["proof (state)\nthis:\n  (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n   map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n    [1..<degree (pCons 0 f - smult x f)] @\n   [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n  i\n  \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n         map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n          [1..<degree (pCons 0 f - smult x f)] @\n         [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n        (i + 1)\n\ngoal (2 subgoals):\n 1. 0 \\<noteq> i \\<and>\n    i < degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow>\n    (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)\n 2. i = degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow>\n    (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. 0 \\<noteq> i \\<and>\n    i < degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow>\n    (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)\n 2. i = degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow>\n    (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)", "case b"], ["proof (state)\nthis:\n  0 \\<noteq> i \\<and> i < degree (pCons 0 f - smult x f) - 1\n\ngoal (2 subgoals):\n 1. 0 \\<noteq> i \\<and>\n    i < degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow>\n    (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)\n 2. i = degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow>\n    (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)", "have \"coeff f (i - 1) * coeff f (i - 1 + 2) \\<le> (coeff f (i - 1 + 1))\\<^sup>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. coeff f (i - 1) * coeff f (i - 1 + 2)\n    \\<le> (coeff f (i - 1 + 1))\\<^sup>2", "by (rule normal_poly_coeff_mult[OF hf, of \"i - 1\"])"], ["proof (state)\nthis:\n  coeff f (i - 1) * coeff f (i - 1 + 2) \\<le> (coeff f (i - 1 + 1))\\<^sup>2\n\ngoal (2 subgoals):\n 1. 0 \\<noteq> i \\<and>\n    i < degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow>\n    (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)\n 2. i = degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow>\n    (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)", "hence \"coeff f (i - 1) / coeff f i \\<le> coeff f i / coeff f (i + 1)\""], ["proof (prove)\nusing this:\n  coeff f (i - 1) * coeff f (i - 1 + 2) \\<le> (coeff f (i - 1 + 1))\\<^sup>2\n\ngoal (1 subgoal):\n 1. coeff f (i - 1) / coeff f i \\<le> coeff f i / coeff f (i + 1)", "using h'[of i] h'[of \"i+1\"] h'[of \"i-1\"] h' b hdeg"], ["proof (prove)\nusing this:\n  coeff f (i - 1) * coeff f (i - 1 + 2) \\<le> (coeff f (i - 1 + 1))\\<^sup>2\n  i \\<le> degree f \\<Longrightarrow> 0 < coeff f i\n  i + 1 \\<le> degree f \\<Longrightarrow> 0 < coeff f (i + 1)\n  i - 1 \\<le> degree f \\<Longrightarrow> 0 < coeff f (i - 1)\n  ?i \\<le> degree f \\<Longrightarrow> 0 < coeff f ?i\n  0 \\<noteq> i \\<and> i < degree (pCons 0 f - smult x f) - 1\n  degree (pCons 0 f - smult x f) = degree f + 1\n\ngoal (1 subgoal):\n 1. coeff f (i - 1) / coeff f i \\<le> coeff f i / coeff f (i + 1)", "by (auto simp: power2_eq_square divide_simps)"], ["proof (state)\nthis:\n  coeff f (i - 1) / coeff f i \\<le> coeff f i / coeff f (i + 1)\n\ngoal (2 subgoals):\n 1. 0 \\<noteq> i \\<and>\n    i < degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow>\n    (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)\n 2. i = degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow>\n    (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)", "then"], ["proof (chain)\npicking this:\n  coeff f (i - 1) / coeff f i \\<le> coeff f i / coeff f (i + 1)", "show ?thesis"], ["proof (prove)\nusing this:\n  coeff f (i - 1) / coeff f i \\<le> coeff f i / coeff f (i + 1)\n\ngoal (1 subgoal):\n 1. (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)", "using b"], ["proof (prove)\nusing this:\n  coeff f (i - 1) / coeff f i \\<le> coeff f i / coeff f (i + 1)\n  0 \\<noteq> i \\<and> i < degree (pCons 0 f - smult x f) - 1\n\ngoal (1 subgoal):\n 1. (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)", "by (auto simp: nth_append)"], ["proof (state)\nthis:\n  (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n   map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n    [1..<degree (pCons 0 f - smult x f)] @\n   [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n  i\n  \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n         map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n          [1..<degree (pCons 0 f - smult x f)] @\n         [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n        (i + 1)\n\ngoal (1 subgoal):\n 1. i = degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow>\n    (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. i = degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow>\n    (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)", "case c"], ["proof (state)\nthis:\n  i = degree (pCons 0 f - smult x f) - 1\n\ngoal (1 subgoal):\n 1. i = degree (pCons 0 f - smult x f) - 1 \\<Longrightarrow>\n    (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)", "then"], ["proof (chain)\npicking this:\n  i = degree (pCons 0 f - smult x f) - 1", "show ?thesis"], ["proof (prove)\nusing this:\n  i = degree (pCons 0 f - smult x f) - 1\n\ngoal (1 subgoal):\n 1. (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)", "using hdeg"], ["proof (prove)\nusing this:\n  i = degree (pCons 0 f - smult x f) - 1\n  degree (pCons 0 f - smult x f) = degree f + 1\n\ngoal (1 subgoal):\n 1. (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n     map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n      [1..<degree (pCons 0 f - smult x f)] @\n     [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n    i\n    \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n           map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n            [1..<degree (pCons 0 f - smult x f)] @\n           [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n          (i + 1)", "by (auto simp: nth_append not_le)"], ["proof (state)\nthis:\n  (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n   map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n    [1..<degree (pCons 0 f - smult x f)] @\n   [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n  i\n  \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n         map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n          [1..<degree (pCons 0 f - smult x f)] @\n         [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n        (i + 1)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n   map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n    [1..<degree (pCons 0 f - smult x f)] @\n   [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n  i\n  \\<le> (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n         map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n          [1..<degree (pCons 0 f - smult x f)] @\n         [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) !\n        (i + 1)\n\ngoal (3 subgoals):\n 1. 1 < length\n         (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n          map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n           [1..<degree (pCons 0 f - smult x f)] @\n          [max 1 (coeff f (degree f - 1) / lead_coeff f - x)])\n 2. hd (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n        map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n         [1..<degree (pCons 0 f - smult x f)] @\n        [max 1 (coeff f (degree f - 1) / lead_coeff f - x)])\n    < 0\n 3. 0 < last\n         (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n          map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n           [1..<degree (pCons 0 f - smult x f)] @\n          [max 1 (coeff f (degree f - 1) / lead_coeff f - x)])", "qed auto"], ["proof (state)\nthis:\n  changes\n   (- max 1 (- (coeff f 0 / coeff f 1 - x)) #\n    map (\\<lambda>i. coeff f (i - 1) / coeff f i - x)\n     [1..<degree (pCons 0 f - smult x f)] @\n    [max 1 (coeff f (degree f - 1) / lead_coeff f - x)]) =\n  1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>df = degree f; normal_poly f\\<rbrakk>\n                \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1;\n     Suc df = degree f; normal_poly f; poly f 0 \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> changes (coeffs (f * [:- x, 1:])) = 1", "finally"], ["proof (chain)\npicking this:\n  changes (coeffs (f * [:- x, 1:])) = 1", "show \"changes (coeffs (f * [:-x, 1:])) = 1\""], ["proof (prove)\nusing this:\n  changes (coeffs (f * [:- x, 1:])) = 1\n\ngoal (1 subgoal):\n 1. changes (coeffs (f * [:- x, 1:])) = 1", "."], ["proof (state)\nthis:\n  changes (coeffs (f * [:- x, 1:])) = 1\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  changes (coeffs (f * [:- x, 1:])) = 1\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}