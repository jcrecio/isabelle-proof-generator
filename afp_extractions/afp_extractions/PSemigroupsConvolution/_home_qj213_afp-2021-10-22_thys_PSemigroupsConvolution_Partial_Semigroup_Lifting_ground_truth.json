{"file_name": "/home/qj213/afp-2021-10-22/thys/PSemigroupsConvolution/Partial_Semigroup_Lifting.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/PSemigroupsConvolution", "problem_names": ["lemma \"(rel_partial_semigroup.times_rel_fun (rel_partial_semigroup.times_rel_fun f f) f) x =\n  (rel_partial_semigroup.times_rel_fun (f::'a::partial_semigroup \\<Rightarrow> 'b::weak_quantale) (rel_partial_semigroup.times_rel_fun f f)) x\"", "lemma \"rel_partial_semigroup.times_rel_fun (rel_partial_semigroup.times_rel_fun f g) h =\n  rel_partial_semigroup.times_rel_fun (f::'a::partial_semigroup \\<Rightarrow> 'b::weak_quantale) (rel_partial_semigroup.times_rel_fun g h)\"", "lemma \"(rel_partial_semigroup.times_rel_fun (f::'a::partial_monoid \\<Rightarrow> 'b::unital_weak_quantale) rel_partial_monoid.pid) x = f x\"", "lemma times_fun_var: \"(f * g) x = \\<Squnion>{f y * g z | y z. R x y z}\"", "lemma times_fun_var2: \"(f * g) = (\\<lambda>x. \\<Squnion>{f y * g z | y z. R x y z})\"", "lemma one_fun_var1 [simp]: \"x \\<in> E \\<Longrightarrow> 1 x = 1\"", "lemma one_fun_var2 [simp]: \"x \\<notin> E \\<Longrightarrow> 1 x = \\<bottom>\"", "lemma times_fun_canc: \"(f * g) x = \\<Squnion>{f y * g (rquot x y) | y. y \\<preceq>\\<^sub>R x}\"", "lemma times_fun_prod: \"(f * g) = (\\<lambda>(x, y). \\<Squnion>{f (x, y1) * g (x, y2) | y1 y2. R y y1 y2})\"", "lemma one_fun_prod1 [simp]: \"y \\<in> E \\<Longrightarrow> 1 (x, y) = 1\"", "lemma one_fun_prod2 [simp]: \"y \\<notin> E \\<Longrightarrow> 1 (x, y) = \\<bottom>\"", "lemma fres_galois_funI: \"\\<forall>x. (f * g) x \\<le> h x \\<Longrightarrow> f x \\<le> (h \\<leftarrow> g) x\"", "lemma times_fun_prod_canc: \"(f * g) (x, y) = \\<Squnion>{f (x, z) * g (x, rquot y z) | z. z \\<preceq>\\<^sub>R y}\"", "lemma fres_lift: \"(fres f g) (x::'b::cancellative_pam) = \\<Sqinter>{(f y) \\<leftarrow> (g z) | y z . z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\""], "translations": [["", "lemma \"(rel_partial_semigroup.times_rel_fun (rel_partial_semigroup.times_rel_fun f f) f) x =\n  (rel_partial_semigroup.times_rel_fun (f::'a::partial_semigroup \\<Rightarrow> 'b::weak_quantale) (rel_partial_semigroup.times_rel_fun f f)) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rel_partial_semigroup.times_rel_fun\n     (rel_partial_semigroup.times_rel_fun f f) f x =\n    rel_partial_semigroup.times_rel_fun f\n     (rel_partial_semigroup.times_rel_fun f f) x", "(*  nitpick[show_all]*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. rel_partial_semigroup.times_rel_fun\n     (rel_partial_semigroup.times_rel_fun f f) f x =\n    rel_partial_semigroup.times_rel_fun f\n     (rel_partial_semigroup.times_rel_fun f f) x", "oops"], ["", "lemma \"rel_partial_semigroup.times_rel_fun (rel_partial_semigroup.times_rel_fun f g) h =\n  rel_partial_semigroup.times_rel_fun (f::'a::partial_semigroup \\<Rightarrow> 'b::weak_quantale) (rel_partial_semigroup.times_rel_fun g h)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rel_partial_semigroup.times_rel_fun\n     (rel_partial_semigroup.times_rel_fun f g) h =\n    rel_partial_semigroup.times_rel_fun f\n     (rel_partial_semigroup.times_rel_fun g h)", "(*  nitpick[show_all]*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. rel_partial_semigroup.times_rel_fun\n     (rel_partial_semigroup.times_rel_fun f g) h =\n    rel_partial_semigroup.times_rel_fun f\n     (rel_partial_semigroup.times_rel_fun g h)", "oops"], ["", "instance"], ["proof (prove)\ngoal (1 subgoal):\n 1. OFCLASS('a \\<Rightarrow> 'b, weak_proto_quantale_class)", "by standard (simp_all add: times_fun_def rel_partial_semigroup.rel_fun_Sup_distr rel_magma.rel_fun_Sup_distl_weak)"], ["", "end"], ["", "text \\<open>Functions from partial semigroups into quantales form quantales.\\<close>"], ["", "instance \"fun\" :: (partial_semigroup, quantale) quantale"], ["proof (prove)\ngoal (1 subgoal):\n 1. OFCLASS('a \\<Rightarrow> 'b, quantale_class)", "by standard (simp_all add: times_fun_def rel_partial_semigroup.rel_fun_assoc rel_magma.rel_fun_Sup_distl)"], ["", "text \\<open>The following counterexample shows that the right unit law may fail in convolution algebras\nof functions from partial monoids into weak unital quantales. \\<close>"], ["", "lemma \"(rel_partial_semigroup.times_rel_fun (f::'a::partial_monoid \\<Rightarrow> 'b::unital_weak_quantale) rel_partial_monoid.pid) x = f x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rel_partial_semigroup.times_rel_fun f rel_partial_monoid.pid x = f x", "(*nitpick[show_all]*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. rel_partial_semigroup.times_rel_fun f rel_partial_monoid.pid x = f x", "oops"], ["", "text \\<open>Functions from partial monoids into unital quantales form unital quantales.\\<close>"], ["", "instantiation \"fun\" :: (partial_monoid, unital_quantale) unital_quantale\nbegin"], ["", "definition one_fun :: \"'a \\<Rightarrow> 'b\" where\n  \"one_fun \\<equiv> rel_partial_monoid.pid\""], ["", "instance"], ["proof (prove)\ngoal (1 subgoal):\n 1. OFCLASS('a \\<Rightarrow> 'b, unital_quantale_class)", "by standard (simp_all add: one_fun_def times_fun_def)"], ["", "end"], ["", "text \\<open>These lifting results extend to PASs and PAMs as expected.\\<close>"], ["", "instance \"fun\" :: (pam, ab_quantale) ab_quantale"], ["proof (prove)\ngoal (1 subgoal):\n 1. OFCLASS('a \\<Rightarrow> 'b, ab_quantale_class)", "by standard (simp_all add: times_fun_def rel_pas.rel_fun_comm)"], ["", "instance \"fun\" :: (pam, bool_ab_quantale) bool_ab_quantale"], ["proof (prove)\ngoal (1 subgoal):\n 1. OFCLASS('a \\<Rightarrow> 'b, bool_ab_quantale_class)", ".."], ["", "instance \"fun\" :: (pam, bool_ab_unital_quantale) bool_ab_unital_quantale"], ["proof (prove)\ngoal (1 subgoal):\n 1. OFCLASS('a \\<Rightarrow> 'b, bool_ab_unital_quantale_class)", ".."], ["", "sublocale ab_quantale < abq: pas \"(*)\" \"\\<lambda>_ _. True\""], ["proof (prove)\ngoal (1 subgoal):\n 1. class.pas (\\<oplus>) (\\<lambda>_ _. True)", "apply standard"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       True \\<Longrightarrow> True \\<and> x \\<oplus> y = y \\<oplus> x", "apply (simp_all add: mult_assoc)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x y. x \\<oplus> y = y \\<oplus> x", "by (simp add: mult_commute)"], ["", "text \\<open>Finally we prove some identities that hold in function spaces.\\<close>"], ["", "lemma times_fun_var: \"(f * g) x = \\<Squnion>{f y * g z | y z. R x y z}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f \\<oplus> g) x =\n    \\<Squnion>{f y \\<oplus> g z |y z. D y z \\<and> x = y \\<oplus> z}", "by (simp add: times_fun_def rel_partial_semigroup.times_rel_fun_def bmod_comp_def)"], ["", "lemma times_fun_var2: \"(f * g) = (\\<lambda>x. \\<Squnion>{f y * g z | y z. R x y z})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<oplus> g =\n    (\\<lambda>x.\n        \\<Squnion>{f y \\<oplus> g z |y z. D y z \\<and> x = y \\<oplus> z})", "by (auto simp: times_fun_var)"], ["", "lemma one_fun_var1 [simp]: \"x \\<in> E \\<Longrightarrow> 1 x = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> E \\<Longrightarrow> 1 x = (1::'b)", "by (simp add: one_fun_def rel_partial_monoid.pid_def)"], ["", "lemma one_fun_var2 [simp]: \"x \\<notin> E \\<Longrightarrow> 1 x = \\<bottom>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<notin> E \\<Longrightarrow> 1 x = \\<bottom>", "by (simp add: one_fun_def rel_partial_monoid.pid_def)"], ["", "lemma times_fun_canc: \"(f * g) x = \\<Squnion>{f y * g (rquot x y) | y. y \\<preceq>\\<^sub>R x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f \\<oplus> g) x =\n    \\<Squnion>{f y \\<oplus> g (rquot x y) |y. y \\<preceq>\\<^sub>R x}", "apply (rule antisym)"], ["proof (prove)\ngoal (2 subgoals):\n 1. (f \\<oplus> g) x\n    \\<le> \\<Squnion>{f y \\<oplus> g (rquot x y) |y. y \\<preceq>\\<^sub>R x}\n 2. \\<Squnion>{f y \\<oplus> g (rquot x y) |y. y \\<preceq>\\<^sub>R x}\n    \\<le> (f \\<oplus> g) x", "apply (simp add: times_fun_var, intro Sup_subset_mono, simp add: Collect_mono_iff)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<forall>xa.\n       (\\<exists>y z.\n           xa = f y \\<oplus> g z \\<and>\n           D y z \\<and> x = y \\<oplus> z) \\<longrightarrow>\n       (\\<exists>y.\n           xa = f y \\<oplus> g (rquot x y) \\<and> y \\<preceq>\\<^sub>R x)\n 2. \\<Squnion>{f y \\<oplus> g (rquot x y) |y. y \\<preceq>\\<^sub>R x}\n    \\<le> (f \\<oplus> g) x", "using gR_rel_mult add_canc1"], ["proof (prove)\nusing this:\n  D ?x ?y \\<Longrightarrow> ?x \\<preceq>\\<^sub>R ?x \\<oplus> ?y\n  D ?x ?y \\<Longrightarrow> rquot (?x \\<oplus> ?y) ?x = ?y\n\ngoal (2 subgoals):\n 1. \\<forall>xa.\n       (\\<exists>y z.\n           xa = f y \\<oplus> g z \\<and>\n           D y z \\<and> x = y \\<oplus> z) \\<longrightarrow>\n       (\\<exists>y.\n           xa = f y \\<oplus> g (rquot x y) \\<and> y \\<preceq>\\<^sub>R x)\n 2. \\<Squnion>{f y \\<oplus> g (rquot x y) |y. y \\<preceq>\\<^sub>R x}\n    \\<le> (f \\<oplus> g) x", "apply force"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Squnion>{f y \\<oplus> g (rquot x y) |y. y \\<preceq>\\<^sub>R x}\n    \\<le> (f \\<oplus> g) x", "apply (simp add: times_fun_var, intro Sup_subset_mono, simp add: Collect_mono_iff)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>xa.\n       (\\<exists>y.\n           xa = f y \\<oplus> g (rquot x y) \\<and>\n           y \\<preceq>\\<^sub>R x) \\<longrightarrow>\n       (\\<exists>y z.\n           xa = f y \\<oplus> g z \\<and> D y z \\<and> x = y \\<oplus> z)", "using gR_rel_defined add_canc2"], ["proof (prove)\nusing this:\n  ?x \\<preceq>\\<^sub>R ?y \\<Longrightarrow> D ?x (rquot ?y ?x)\n  ?x \\<preceq>\\<^sub>R ?y \\<Longrightarrow> ?x \\<oplus> rquot ?y ?x = ?y\n\ngoal (1 subgoal):\n 1. \\<forall>xa.\n       (\\<exists>y.\n           xa = f y \\<oplus> g (rquot x y) \\<and>\n           y \\<preceq>\\<^sub>R x) \\<longrightarrow>\n       (\\<exists>y z.\n           xa = f y \\<oplus> g z \\<and> D y z \\<and> x = y \\<oplus> z)", "by fastforce"], ["", "lemma times_fun_prod: \"(f * g) = (\\<lambda>(x, y). \\<Squnion>{f (x, y1) * g (x, y2) | y1 y2. R y y1 y2})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<oplus> g =\n    (\\<lambda>(x, y).\n        \\<Squnion>{f (x, y1) \\<oplus> g (x, y2) |y1 y2.\n                   D y1 y2 \\<and> y = y1 \\<oplus> y2})", "by (auto simp: times_fun_var2 times_prod_def D_prod_def)"], ["", "lemma one_fun_prod1 [simp]: \"y \\<in> E \\<Longrightarrow> 1 (x, y) = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<in> E \\<Longrightarrow> 1 (x, y) = (1::'b)", "by (simp add: E_prod_def)"], ["", "lemma one_fun_prod2 [simp]: \"y \\<notin> E \\<Longrightarrow> 1 (x, y) = \\<bottom>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<notin> E \\<Longrightarrow> 1 (x, y) = \\<bottom>", "by (simp add: E_prod_def)"], ["", "lemma fres_galois_funI: \"\\<forall>x. (f * g) x \\<le> h x \\<Longrightarrow> f x \\<le> (h \\<leftarrow> g) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x. (f \\<oplus> g) x \\<le> h x \\<Longrightarrow>\n    f x \\<le> (h \\<leftarrow> g) x", "by (meson fres_galois le_funD le_funI)"], ["", "lemma times_fun_prod_canc: \"(f * g) (x, y) = \\<Squnion>{f (x, z) * g (x, rquot y z) | z. z \\<preceq>\\<^sub>R y}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f \\<oplus> g) (x, y) =\n    \\<Squnion>{f (x, z) \\<oplus> g (x, rquot y z) |z. z \\<preceq>\\<^sub>R y}", "apply (simp add: times_fun_prod)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Squnion>{f (x, y1) \\<oplus> g (x, y2) |y1 y2.\n               D y1 y2 \\<and> y = y1 \\<oplus> y2} =\n    \\<Squnion>{f (x, z) \\<oplus> g (x, rquot y z) |z. z \\<preceq>\\<^sub>R y}", "by (metis (no_types, lifting) gR_rel_defined gR_rel_mult add_canc1 add_canc2)"], ["", "text \\<open>The following statement shows, in a generalised setting, that the magic wand operator of separation\nlogic can be lifted from the heap subtraction operation generalised to a cancellative PAM.\\<close>"], ["", "lemma fres_lift: \"(fres f g) (x::'b::cancellative_pam) = \\<Sqinter>{(f y) \\<leftarrow> (g z) | y z . z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f \\<leftarrow> g) x =\n    \\<Sqinter>{f y \\<leftarrow> g z |y z.\n               z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}", "proof (rule antisym)"], ["proof (state)\ngoal (2 subgoals):\n 1. (f \\<leftarrow> g) x\n    \\<le> \\<Sqinter>{f y \\<leftarrow> g z |y z.\n                     z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n 2. \\<Sqinter>{f y \\<leftarrow> g z |y z.\n               z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n    \\<le> (f \\<leftarrow> g) x", "{"], ["proof (state)\ngoal (2 subgoals):\n 1. (f \\<leftarrow> g) x\n    \\<le> \\<Sqinter>{f y \\<leftarrow> g z |y z.\n                     z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n 2. \\<Sqinter>{f y \\<leftarrow> g z |y z.\n               z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n    \\<le> (f \\<leftarrow> g) x", "fix h y z"], ["proof (state)\ngoal (2 subgoals):\n 1. (f \\<leftarrow> g) x\n    \\<le> \\<Sqinter>{f y \\<leftarrow> g z |y z.\n                     z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n 2. \\<Sqinter>{f y \\<leftarrow> g z |y z.\n               z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n    \\<le> (f \\<leftarrow> g) x", "assume assms: \"h \\<cdot> g \\<le> f\" \"z \\<preceq>\\<^sub>R y\" \"x = rquot y z\""], ["proof (state)\nthis:\n  h \\<oplus> g \\<le> f\n  z \\<preceq>\\<^sub>R y\n  x = rquot y z\n\ngoal (2 subgoals):\n 1. (f \\<leftarrow> g) x\n    \\<le> \\<Sqinter>{f y \\<leftarrow> g z |y z.\n                     z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n 2. \\<Sqinter>{f y \\<leftarrow> g z |y z.\n               z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n    \\<le> (f \\<leftarrow> g) x", "moreover"], ["proof (state)\nthis:\n  h \\<oplus> g \\<le> f\n  z \\<preceq>\\<^sub>R y\n  x = rquot y z\n\ngoal (2 subgoals):\n 1. (f \\<leftarrow> g) x\n    \\<le> \\<Sqinter>{f y \\<leftarrow> g z |y z.\n                     z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n 2. \\<Sqinter>{f y \\<leftarrow> g z |y z.\n               z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n    \\<le> (f \\<leftarrow> g) x", "hence  \"D z x\""], ["proof (prove)\nusing this:\n  h \\<oplus> g \\<le> f\n  z \\<preceq>\\<^sub>R y\n  x = rquot y z\n\ngoal (1 subgoal):\n 1. D z x", "using add_rquot"], ["proof (prove)\nusing this:\n  h \\<oplus> g \\<le> f\n  z \\<preceq>\\<^sub>R y\n  x = rquot y z\n  ?x \\<preceq>\\<^sub>R ?y \\<Longrightarrow>\n  (D ?x ?z \\<and> ?x \\<oplus> ?z = ?y) = (?z = rquot ?y ?x)\n\ngoal (1 subgoal):\n 1. D z x", "by blast"], ["proof (state)\nthis:\n  D z x\n\ngoal (2 subgoals):\n 1. (f \\<leftarrow> g) x\n    \\<le> \\<Sqinter>{f y \\<leftarrow> g z |y z.\n                     z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n 2. \\<Sqinter>{f y \\<leftarrow> g z |y z.\n               z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n    \\<le> (f \\<leftarrow> g) x", "moreover"], ["proof (state)\nthis:\n  D z x\n\ngoal (2 subgoals):\n 1. (f \\<leftarrow> g) x\n    \\<le> \\<Sqinter>{f y \\<leftarrow> g z |y z.\n                     z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n 2. \\<Sqinter>{f y \\<leftarrow> g z |y z.\n               z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n    \\<le> (f \\<leftarrow> g) x", "hence \"h x \\<cdot> g z \\<le> (h \\<cdot> g) (x \\<oplus> z)\""], ["proof (prove)\nusing this:\n  D z x\n\ngoal (1 subgoal):\n 1. h x \\<oplus> g z \\<le> (h \\<oplus> g) (x \\<oplus> z)", "using add_comm"], ["proof (prove)\nusing this:\n  D z x\n  D ?x ?y \\<Longrightarrow> D ?y ?x \\<and> ?x \\<oplus> ?y = ?y \\<oplus> ?x\n\ngoal (1 subgoal):\n 1. h x \\<oplus> g z \\<le> (h \\<oplus> g) (x \\<oplus> z)", "by (auto simp add: times_fun_var intro!: Sup_upper)"], ["proof (state)\nthis:\n  h x \\<oplus> g z \\<le> (h \\<oplus> g) (x \\<oplus> z)\n\ngoal (2 subgoals):\n 1. (f \\<leftarrow> g) x\n    \\<le> \\<Sqinter>{f y \\<leftarrow> g z |y z.\n                     z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n 2. \\<Sqinter>{f y \\<leftarrow> g z |y z.\n               z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n    \\<le> (f \\<leftarrow> g) x", "moreover"], ["proof (state)\nthis:\n  h x \\<oplus> g z \\<le> (h \\<oplus> g) (x \\<oplus> z)\n\ngoal (2 subgoals):\n 1. (f \\<leftarrow> g) x\n    \\<le> \\<Sqinter>{f y \\<leftarrow> g z |y z.\n                     z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n 2. \\<Sqinter>{f y \\<leftarrow> g z |y z.\n               z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n    \\<le> (f \\<leftarrow> g) x", "hence \"(h * g) (x \\<oplus> z) \\<le> f (z \\<oplus> x)\""], ["proof (prove)\nusing this:\n  h x \\<oplus> g z \\<le> (h \\<oplus> g) (x \\<oplus> z)\n\ngoal (1 subgoal):\n 1. (h \\<oplus> g) (x \\<oplus> z) \\<le> f (z \\<oplus> x)", "by (simp add: \\<open>D z x\\<close> calculation(1) le_funD add_comm)"], ["proof (state)\nthis:\n  (h \\<oplus> g) (x \\<oplus> z) \\<le> f (z \\<oplus> x)\n\ngoal (2 subgoals):\n 1. (f \\<leftarrow> g) x\n    \\<le> \\<Sqinter>{f y \\<leftarrow> g z |y z.\n                     z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n 2. \\<Sqinter>{f y \\<leftarrow> g z |y z.\n               z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n    \\<le> (f \\<leftarrow> g) x", "ultimately"], ["proof (chain)\npicking this:\n  h \\<oplus> g \\<le> f\n  z \\<preceq>\\<^sub>R y\n  x = rquot y z\n  D z x\n  h x \\<oplus> g z \\<le> (h \\<oplus> g) (x \\<oplus> z)\n  (h \\<oplus> g) (x \\<oplus> z) \\<le> f (z \\<oplus> x)", "have \"h x \\<le> (f (z \\<oplus> x)) \\<leftarrow> (g z)\""], ["proof (prove)\nusing this:\n  h \\<oplus> g \\<le> f\n  z \\<preceq>\\<^sub>R y\n  x = rquot y z\n  D z x\n  h x \\<oplus> g z \\<le> (h \\<oplus> g) (x \\<oplus> z)\n  (h \\<oplus> g) (x \\<oplus> z) \\<le> f (z \\<oplus> x)\n\ngoal (1 subgoal):\n 1. h x \\<le> f (z \\<oplus> x) \\<leftarrow> g z", "by (auto simp: fres_def intro: Sup_upper)"], ["proof (state)\nthis:\n  h x \\<le> f (z \\<oplus> x) \\<leftarrow> g z\n\ngoal (2 subgoals):\n 1. (f \\<leftarrow> g) x\n    \\<le> \\<Sqinter>{f y \\<leftarrow> g z |y z.\n                     z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n 2. \\<Sqinter>{f y \\<leftarrow> g z |y z.\n               z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n    \\<le> (f \\<leftarrow> g) x", "from this and assms"], ["proof (chain)\npicking this:\n  h x \\<le> f (z \\<oplus> x) \\<leftarrow> g z\n  h \\<oplus> g \\<le> f\n  z \\<preceq>\\<^sub>R y\n  x = rquot y z", "have \"h (rquot y z) \\<le> (f y) \\<leftarrow> (g z)\""], ["proof (prove)\nusing this:\n  h x \\<le> f (z \\<oplus> x) \\<leftarrow> g z\n  h \\<oplus> g \\<le> f\n  z \\<preceq>\\<^sub>R y\n  x = rquot y z\n\ngoal (1 subgoal):\n 1. h (rquot y z) \\<le> f y \\<leftarrow> g z", "by (simp add: add_canc2)"], ["proof (state)\nthis:\n  h (rquot y z) \\<le> f y \\<leftarrow> g z\n\ngoal (2 subgoals):\n 1. (f \\<leftarrow> g) x\n    \\<le> \\<Sqinter>{f y \\<leftarrow> g z |y z.\n                     z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n 2. \\<Sqinter>{f y \\<leftarrow> g z |y z.\n               z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n    \\<le> (f \\<leftarrow> g) x", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?h2 \\<oplus> g \\<le> f; ?z2 \\<preceq>\\<^sub>R ?y2;\n   x = rquot ?y2 ?z2\\<rbrakk>\n  \\<Longrightarrow> ?h2 (rquot ?y2 ?z2) \\<le> f ?y2 \\<leftarrow> g ?z2\n\ngoal (2 subgoals):\n 1. (f \\<leftarrow> g) x\n    \\<le> \\<Sqinter>{f y \\<leftarrow> g z |y z.\n                     z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n 2. \\<Sqinter>{f y \\<leftarrow> g z |y z.\n               z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n    \\<le> (f \\<leftarrow> g) x", "thus \"(f \\<leftarrow> g) x \\<le> \\<Sqinter>{(f y) \\<leftarrow> (g z) |y z. z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?h2 \\<oplus> g \\<le> f; ?z2 \\<preceq>\\<^sub>R ?y2;\n   x = rquot ?y2 ?z2\\<rbrakk>\n  \\<Longrightarrow> ?h2 (rquot ?y2 ?z2) \\<le> f ?y2 \\<leftarrow> g ?z2\n\ngoal (1 subgoal):\n 1. (f \\<leftarrow> g) x\n    \\<le> \\<Sqinter>{f y \\<leftarrow> g z |y z.\n                     z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}", "by (clarsimp simp: fres_def intro!: Inf_greatest SUP_least)"], ["proof (state)\nthis:\n  (f \\<leftarrow> g) x\n  \\<le> \\<Sqinter>{f y \\<leftarrow> g z |y z.\n                   z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n\ngoal (1 subgoal):\n 1. \\<Sqinter>{f y \\<leftarrow> g z |y z.\n               z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n    \\<le> (f \\<leftarrow> g) x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Sqinter>{f y \\<leftarrow> g z |y z.\n               z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n    \\<le> (f \\<leftarrow> g) x", "have \"\\<Sqinter>{(f y) \\<leftarrow> (g z) |y z. z \\<preceq>\\<^sub>R y \\<and> x = rquot y z} \\<le> Sup{x. x \\<cdot> g \\<le> f} x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Sqinter>{f y \\<leftarrow> g z |y z.\n               z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n    \\<le> (\\<Squnion>{x. x \\<oplus> g \\<le> f}) x", "apply (clarsimp simp: times_fun_var intro!: SUP_upper le_funI Sup_least)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>y z.\n       D y z \\<Longrightarrow>\n       \\<Sqinter>{f ya \\<leftarrow> g z |ya z.\n                  z \\<preceq>\\<^sub>R ya \\<and> y = rquot ya z} \\<oplus>\n       g z\n       \\<le> f (y \\<oplus> z)", "apply (simp add: fres_galois)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>y z.\n       D y z \\<Longrightarrow>\n       \\<Sqinter>{f ya \\<leftarrow> g z |ya z.\n                  z \\<preceq>\\<^sub>R ya \\<and> y = rquot ya z}\n       \\<le> f (y \\<oplus> z) \\<leftarrow> g z", "apply (intro Inf_lower)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>y z.\n       D y z \\<Longrightarrow>\n       f (y \\<oplus> z) \\<leftarrow> g z\n       \\<in> {f ya \\<leftarrow> g z |ya z.\n              z \\<preceq>\\<^sub>R ya \\<and> y = rquot ya z}", "apply safe"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>y z.\n       D y z \\<Longrightarrow>\n       \\<exists>ya za.\n          f (y \\<oplus> z) \\<leftarrow> g z = f ya \\<leftarrow> g za \\<and>\n          za \\<preceq>\\<^sub>R ya \\<and> y = rquot ya za", "by (metis gR_rel_mult add_canc1 add_comm)"], ["proof (state)\nthis:\n  \\<Sqinter>{f y \\<leftarrow> g z |y z.\n             z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n  \\<le> (\\<Squnion>{x. x \\<oplus> g \\<le> f}) x\n\ngoal (1 subgoal):\n 1. \\<Sqinter>{f y \\<leftarrow> g z |y z.\n               z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n    \\<le> (f \\<leftarrow> g) x", "thus \"\\<Sqinter>{(f y) \\<leftarrow> (g z) |y z. z \\<preceq>\\<^sub>R y \\<and> x = rquot y z} \\<le> (f \\<leftarrow> g) x \""], ["proof (prove)\nusing this:\n  \\<Sqinter>{f y \\<leftarrow> g z |y z.\n             z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n  \\<le> (\\<Squnion>{x. x \\<oplus> g \\<le> f}) x\n\ngoal (1 subgoal):\n 1. \\<Sqinter>{f y \\<leftarrow> g z |y z.\n               z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n    \\<le> (f \\<leftarrow> g) x", "by (simp add: fres_def)"], ["proof (state)\nthis:\n  \\<Sqinter>{f y \\<leftarrow> g z |y z.\n             z \\<preceq>\\<^sub>R y \\<and> x = rquot y z}\n  \\<le> (f \\<leftarrow> g) x\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}