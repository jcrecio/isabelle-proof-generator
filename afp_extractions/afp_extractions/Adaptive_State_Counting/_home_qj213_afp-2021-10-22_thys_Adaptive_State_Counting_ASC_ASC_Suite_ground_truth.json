{"file_name": "/home/qj213/afp-2021-10-22/thys/Adaptive_State_Counting/ASC/ASC_Suite.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Adaptive_State_Counting", "problem_names": ["lemma mcp_ex :\n  assumes \"[] \\<in> W\"\n  and     \"finite W\"\nobtains p\nwhere \"mcp z W p\"", "lemma mcp_unique :\n  assumes \"mcp z W p\" \n  and     \"mcp z W p'\"\nshows \"p = p'\"", "lemma mcp'_intro : \n  assumes \"mcp z W p\"\nshows \"mcp' z W = p\"", "lemma mcp_prefix_of_suffix :\n  assumes \"mcp (vs@xs) V vs\"\n  and     \"prefix xs' xs\"\nshows \"mcp (vs@xs') V vs\"", "lemma minimal_sequence_to_failure_extending_mcp :\n  assumes \"OFSM M1\"\n  and     \"OFSM M2\"\n  and     \"is_det_state_cover M2 V\"\n  and     \"minimal_sequence_to_failure_extending V M1 M2 vs xs\"\nshows \"mcp (map fst (vs@xs)) V (map fst vs)\"", "lemma N_nonempty :\n  assumes \"is_det_state_cover M2 V\"\n  and     \"OFSM M1\"\n  and     \"OFSM M2\"\n  and     \"asc_fault_domain M2 M1 m\"\n  and     \"io \\<in> L M1\"\nshows \"N io M1 V \\<noteq> {}\"", "lemma N_mcp_prefix :\n  assumes \"map fst vs = mcp' (map fst (vs@xs)) V\"\n  and     \"V'' \\<in> N (vs@xs) M1 V\"\n  and     \"is_det_state_cover M2 V\"\n  and     \"well_formed M2\"\n  and     \"finite V\"\nshows \"vs \\<in> V''\" \"vs = mcp' (vs@xs) V''\"", "lemma append_lists_of_length_alt_def :\n  \"append_sets T (lists_of_length X (Suc n)) = append_set (append_sets T (lists_of_length X n)) X\"", "lemma C_step : \n  assumes \"n > 0\"\n  shows \"C M2 M1 \\<Omega> V m (Suc n) \\<subseteq> (append_set (C M2 M1 \\<Omega> V m n) (inputs M2)) - C M2 M1 \\<Omega> V m n\"", "lemma C_extension : \n  \"C M2 M1 \\<Omega> V m (Suc n) \\<subseteq> append_sets V (lists_of_length (inputs M2) n)\"", "lemma TS_union : \nshows \"TS M2 M1 \\<Omega> V m i = (\\<Union> j \\<in> (set [0..<Suc i]) . C M2 M1 \\<Omega> V m j)\"", "lemma C_disj_le_gz : \n  assumes \"i \\<le> j\"\n  and    \"0 < i\"\nshows \"C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m (Suc j) = {}\"", "lemma C_disj_lt : \n  assumes \"i < j\"\nshows \"C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m j = {}\"", "lemma C_disj :\n  assumes \"i \\<noteq> j\"\nshows \"C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m j = {}\"", "lemma RM_subset : \"RM M2 M1 \\<Omega> V m i \\<subseteq> C M2 M1 \\<Omega> V m i\"", "lemma RM_disj : \n  assumes \"i \\<le> j\"\n  and    \"0 < i\"\nshows \"RM M2 M1 \\<Omega> V m i \\<inter> RM M2 M1 \\<Omega> V m (Suc j) = {}\"", "lemma T_extension : \n  assumes \"n > 0\"\n  shows \"TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n \n          \\<subseteq> (append_set (TS M2 M1 \\<Omega> V m n) (inputs M2)) - TS M2 M1 \\<Omega> V m n\"", "lemma append_set_prefix :\n  assumes \"xs \\<in> append_set T X\"\n  shows \"butlast xs \\<in> T\"", "lemma C_subset : \"C M2 M1 \\<Omega> V m i \\<subseteq> TS M2 M1 \\<Omega> V m i\"", "lemma TS_subset :\n  assumes \"i \\<le> j\"\n  shows \"TS M2 M1 \\<Omega> V m i \\<subseteq> TS M2 M1 \\<Omega> V m j\"", "lemma C_immediate_prefix_containment :\n  assumes \"vs@xs \\<in> C M2 M1 \\<Omega> V m (Suc (Suc i))\"\n  and     \"xs \\<noteq> []\"\nshows \"vs@(butlast xs) \\<in> C M2 M1 \\<Omega> V m (Suc i) - RM M2 M1 \\<Omega> V m (Suc i)\"", "lemma TS_immediate_prefix_containment :\n  assumes \"vs@xs \\<in> TS M2 M1 \\<Omega> V m i\"\n  and     \"mcp (vs@xs) V vs\"\n  and     \"0 < i\"\nshows \"vs@(butlast xs) \\<in> TS M2 M1 \\<Omega> V m i\"", "lemma TS_prefix_containment :\n  assumes \"vs@xs \\<in> TS M2 M1 \\<Omega> V m i\"\n  and     \"mcp (vs@xs) V vs\"\n  and     \"prefix xs' xs\"\nshows \"vs@xs' \\<in> TS M2 M1 \\<Omega> V m i\"\n\\<comment> \\<open> Proof sketch:\n       Perform induction on length difference, as from each prefix it is possible to deduce the \n       desired property for the prefix one element smaller than it via above results\\<close>", "lemma C_index :\n  assumes \"vs @ xs \\<in> C M2 M1 \\<Omega> V m i\"\n  and     \"mcp (vs@xs) V vs\"\nshows \"Suc (length xs) = i\"", "lemma TS_index :\n  assumes \"vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\"\n  and     \"mcp (vs@xs) V vs\"\nshows \"Suc (length xs) \\<le> i\" \"vs@xs \\<in> C M2 M1 \\<Omega> V m (Suc (length xs))\"", "lemma C_extension_options :\n  assumes \"vs @ xs \\<in> C M2 M1 \\<Omega> V m i\"\n  and     \"mcp (vs @ xs @ [x]) V vs\"\n  and     \"x \\<in> inputs M2\"\n  and     \"0 < i\"\nshows \"vs@xs@[x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or> vs@xs \\<in> RM M2 M1 \\<Omega> V m i\"", "lemma TS_non_containment_causes :\n  assumes \"vs@xs \\<notin> TS M2 M1 \\<Omega> V m i\" \n  and     \"mcp (vs@xs) V vs\"\n  and     \"set xs \\<subseteq> inputs M2\"\n  and     \"0 < i\"\nshows \"(\\<exists> xr j . xr \\<noteq> xs \\<and> prefix xr xs \\<and> j \\<le> i \\<and> vs@xr \\<in> RM M2 M1 \\<Omega> V m j)\n       \\<or> (\\<exists> xc . xc \\<noteq> xs \\<and> prefix xc xs \\<and> vs@xc \\<in> (C M2 M1 \\<Omega> V m i) - (RM M2 M1 \\<Omega> V m i))\"\n  (is \"?PrefPreviouslyRemoved \\<or> ?PrefJustContained\")\n      \"\\<not> ((\\<exists> xr j . xr \\<noteq> xs \\<and> prefix xr xs \\<and> j \\<le> i \\<and> vs@xr \\<in> RM M2 M1 \\<Omega> V m j)\n         \\<and> (\\<exists> xc . xc \\<noteq> xs \\<and> prefix xc xs \\<and> vs@xc \\<in> (C M2 M1 \\<Omega> V m i) - (RM M2 M1 \\<Omega> V m i)))\"\n  \\<comment> \\<open>If a sequence is not contained in TS up to (incl.) iteration i, then either a prefix of it has \n      been removed or a prefix of it is contained in the C set for iteration i\\<close>", "lemma TS_non_containment_causes_rev : \n  assumes \"mcp (vs@xs) V vs\"\n  and \"(\\<exists> xr j . xr \\<noteq> xs \\<and> prefix xr xs \\<and> j \\<le> i \\<and> vs@xr \\<in> RM M2 M1 \\<Omega> V m j)\n       \\<or> (\\<exists> xc . xc \\<noteq> xs \\<and> prefix xc xs \\<and> vs@xc \\<in> (C M2 M1 \\<Omega> V m i) - (RM M2 M1 \\<Omega> V m i))\"\n      (is \"?PrefPreviouslyRemoved \\<or> ?PrefJustContained\")\nshows \"vs@xs \\<notin> TS M2 M1 \\<Omega> V m i\"", "lemma TS_finite :\n  assumes \"finite V\"\n  and     \"finite (inputs M2)\"\nshows \"finite (TS M2 M1 \\<Omega> V m n)\"", "lemma C_finite :\n  assumes \"finite V\"\n  and     \"finite (inputs M2)\"\nshows \"finite (C M2 M1 \\<Omega> V m n)\"", "lemma final_iteration_ex :\n  assumes \"OFSM M1\"\n  and     \"OFSM M2\"\n  and     \"asc_fault_domain M2 M1 m\"\n  and     \"test_tools M2 M1 FAIL PM V \\<Omega>\"\n  shows \"final_iteration M2 M1 \\<Omega> V m (Suc ( |M2| * m ))\"", "lemma TS_non_containment_causes_final :\n  assumes \"vs@xs \\<notin> TS M2 M1 \\<Omega> V m i\" \n  and     \"mcp (vs@xs) V vs\"\n  and     \"set xs \\<subseteq> inputs M2\"\n  and     \"final_iteration M2 M1 \\<Omega> V m i\"\n  and     \"OFSM M2\"\nshows \"(\\<exists> xr j . xr \\<noteq> xs \n                  \\<and> prefix xr xs \n                  \\<and> j \\<le> i \n                  \\<and> vs@xr \\<in> RM M2 M1 \\<Omega> V m j)\"", "lemma TS_non_containment_causes_final_suc :\n  assumes \"vs@xs \\<notin> TS M2 M1 \\<Omega> V m i\" \n  and     \"mcp (vs@xs) V vs\"\n  and     \"set xs \\<subseteq> inputs M2\"\n  and     \"final_iteration M2 M1 \\<Omega> V m i\"\n  and     \"OFSM M2\"\nobtains xr j\nwhere \"xr \\<noteq> xs\" \"prefix xr xs\" \"Suc j \\<le> i\" \"vs@xr \\<in> RM M2 M1 \\<Omega> V m (Suc j)\""], "translations": [["", "lemma mcp_ex :\n  assumes \"[] \\<in> W\"\n  and     \"finite W\"\nobtains p\nwhere \"mcp z W p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>p. mcp z W p \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>p. mcp z W p \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "let ?P = \"{p . prefix p z \\<and> p \\<in> W}\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>p. mcp z W p \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "let ?maxP = \"arg_max length (\\<lambda> p . p \\<in> ?P)\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>p. mcp z W p \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "have \"finite {p . prefix p z}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {p. prefix p z}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. finite {p. prefix p z}", "have \"{p . prefix p z} \\<subseteq> image (\\<lambda> i . take i z) (set [0 ..< Suc (length z)])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {p. prefix p z}\n    \\<subseteq> (\\<lambda>i. take i z) ` set [0..<Suc (length z)]", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {p. prefix p z} \\<Longrightarrow>\n       x \\<in> (\\<lambda>i. take i z) ` set [0..<Suc (length z)]", "fix p"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {p. prefix p z} \\<Longrightarrow>\n       x \\<in> (\\<lambda>i. take i z) ` set [0..<Suc (length z)]", "assume \"p \\<in> {p . prefix p z}\""], ["proof (state)\nthis:\n  p \\<in> {p. prefix p z}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {p. prefix p z} \\<Longrightarrow>\n       x \\<in> (\\<lambda>i. take i z) ` set [0..<Suc (length z)]", "then"], ["proof (chain)\npicking this:\n  p \\<in> {p. prefix p z}", "obtain i where \"i \\<le> length z \\<and> p = take i z\""], ["proof (prove)\nusing this:\n  p \\<in> {p. prefix p z}\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        i \\<le> length z \\<and> p = take i z \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis append_eq_conv_conj mem_Collect_eq prefix_def prefix_length_le)"], ["proof (state)\nthis:\n  i \\<le> length z \\<and> p = take i z\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {p. prefix p z} \\<Longrightarrow>\n       x \\<in> (\\<lambda>i. take i z) ` set [0..<Suc (length z)]", "then"], ["proof (chain)\npicking this:\n  i \\<le> length z \\<and> p = take i z", "have \"i < Suc (length z) \\<and> p = take i z\""], ["proof (prove)\nusing this:\n  i \\<le> length z \\<and> p = take i z\n\ngoal (1 subgoal):\n 1. i < Suc (length z) \\<and> p = take i z", "by simp"], ["proof (state)\nthis:\n  i < Suc (length z) \\<and> p = take i z\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {p. prefix p z} \\<Longrightarrow>\n       x \\<in> (\\<lambda>i. take i z) ` set [0..<Suc (length z)]", "then"], ["proof (chain)\npicking this:\n  i < Suc (length z) \\<and> p = take i z", "show \"p \\<in> image (\\<lambda> i . take i z) (set [0 ..< Suc (length z)])\""], ["proof (prove)\nusing this:\n  i < Suc (length z) \\<and> p = take i z\n\ngoal (1 subgoal):\n 1. p \\<in> (\\<lambda>i. take i z) ` set [0..<Suc (length z)]", "using atLeast_upt"], ["proof (prove)\nusing this:\n  i < Suc (length z) \\<and> p = take i z\n  {..<?n} = set [0..<?n]\n\ngoal (1 subgoal):\n 1. p \\<in> (\\<lambda>i. take i z) ` set [0..<Suc (length z)]", "by blast"], ["proof (state)\nthis:\n  p \\<in> (\\<lambda>i. take i z) ` set [0..<Suc (length z)]\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {p. prefix p z}\n  \\<subseteq> (\\<lambda>i. take i z) ` set [0..<Suc (length z)]\n\ngoal (1 subgoal):\n 1. finite {p. prefix p z}", "then"], ["proof (chain)\npicking this:\n  {p. prefix p z}\n  \\<subseteq> (\\<lambda>i. take i z) ` set [0..<Suc (length z)]", "show ?thesis"], ["proof (prove)\nusing this:\n  {p. prefix p z}\n  \\<subseteq> (\\<lambda>i. take i z) ` set [0..<Suc (length z)]\n\ngoal (1 subgoal):\n 1. finite {p. prefix p z}", "using finite_surj"], ["proof (prove)\nusing this:\n  {p. prefix p z}\n  \\<subseteq> (\\<lambda>i. take i z) ` set [0..<Suc (length z)]\n  \\<lbrakk>finite ?A; ?B \\<subseteq> ?f ` ?A\\<rbrakk>\n  \\<Longrightarrow> finite ?B\n\ngoal (1 subgoal):\n 1. finite {p. prefix p z}", "by blast"], ["proof (state)\nthis:\n  finite {p. prefix p z}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  finite {p. prefix p z}\n\ngoal (1 subgoal):\n 1. (\\<And>p. mcp z W p \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "then"], ["proof (chain)\npicking this:\n  finite {p. prefix p z}", "have \"finite ?P\""], ["proof (prove)\nusing this:\n  finite {p. prefix p z}\n\ngoal (1 subgoal):\n 1. finite {p. prefix p z \\<and> p \\<in> W}", "by simp"], ["proof (state)\nthis:\n  finite {p. prefix p z \\<and> p \\<in> W}\n\ngoal (1 subgoal):\n 1. (\\<And>p. mcp z W p \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "have \"?P \\<noteq> {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {p. prefix p z \\<and> p \\<in> W} \\<noteq> {}", "using Nil_prefix assms(1)"], ["proof (prove)\nusing this:\n  prefix [] ?xs\n  [] \\<in> W\n\ngoal (1 subgoal):\n 1. {p. prefix p z \\<and> p \\<in> W} \\<noteq> {}", "by blast"], ["proof (state)\nthis:\n  {p. prefix p z \\<and> p \\<in> W} \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>p. mcp z W p \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "have \"\\<exists> maxP \\<in> ?P . \\<forall> p \\<in> ?P . length p \\<le> length maxP\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>maxP\\<in>{p. prefix p z \\<and> p \\<in> W}.\n       \\<forall>p\\<in>{p. prefix p z \\<and> p \\<in> W}.\n          length p \\<le> length maxP", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>maxP\\<in>{p. prefix p z \\<and> p \\<in> W}.\n               \\<forall>p\\<in>{p. prefix p z \\<and> p \\<in> W}.\n                  length p \\<le> length maxP) \\<Longrightarrow>\n    False", "assume \"\\<not>(\\<exists> maxP \\<in> ?P . \\<forall> p \\<in> ?P . length p \\<le> length maxP)\""], ["proof (state)\nthis:\n  \\<not> (\\<exists>maxP\\<in>{p. prefix p z \\<and> p \\<in> W}.\n             \\<forall>p\\<in>{p. prefix p z \\<and> p \\<in> W}.\n                length p \\<le> length maxP)\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>maxP\\<in>{p. prefix p z \\<and> p \\<in> W}.\n               \\<forall>p\\<in>{p. prefix p z \\<and> p \\<in> W}.\n                  length p \\<le> length maxP) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  \\<not> (\\<exists>maxP\\<in>{p. prefix p z \\<and> p \\<in> W}.\n             \\<forall>p\\<in>{p. prefix p z \\<and> p \\<in> W}.\n                length p \\<le> length maxP)", "have \"\\<forall> p \\<in> ?P . \\<exists> p' \\<in> ?P . length p < length p'\""], ["proof (prove)\nusing this:\n  \\<not> (\\<exists>maxP\\<in>{p. prefix p z \\<and> p \\<in> W}.\n             \\<forall>p\\<in>{p. prefix p z \\<and> p \\<in> W}.\n                length p \\<le> length maxP)\n\ngoal (1 subgoal):\n 1. \\<forall>p\\<in>{p. prefix p z \\<and> p \\<in> W}.\n       \\<exists>p'\\<in>{p. prefix p z \\<and> p \\<in> W}.\n          length p < length p'", "by (meson not_less)"], ["proof (state)\nthis:\n  \\<forall>p\\<in>{p. prefix p z \\<and> p \\<in> W}.\n     \\<exists>p'\\<in>{p. prefix p z \\<and> p \\<in> W}. length p < length p'\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>maxP\\<in>{p. prefix p z \\<and> p \\<in> W}.\n               \\<forall>p\\<in>{p. prefix p z \\<and> p \\<in> W}.\n                  length p \\<le> length maxP) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  \\<forall>p\\<in>{p. prefix p z \\<and> p \\<in> W}.\n     \\<exists>p'\\<in>{p. prefix p z \\<and> p \\<in> W}. length p < length p'", "have \"\\<forall> l \\<in> (image length ?P) . \\<exists> l' \\<in> (image length ?P) . l < l'\""], ["proof (prove)\nusing this:\n  \\<forall>p\\<in>{p. prefix p z \\<and> p \\<in> W}.\n     \\<exists>p'\\<in>{p. prefix p z \\<and> p \\<in> W}. length p < length p'\n\ngoal (1 subgoal):\n 1. \\<forall>l\\<in>length ` {p. prefix p z \\<and> p \\<in> W}.\n       \\<exists>l'\\<in>length ` {p. prefix p z \\<and> p \\<in> W}. l < l'", "by auto"], ["proof (state)\nthis:\n  \\<forall>l\\<in>length ` {p. prefix p z \\<and> p \\<in> W}.\n     \\<exists>l'\\<in>length ` {p. prefix p z \\<and> p \\<in> W}. l < l'\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>maxP\\<in>{p. prefix p z \\<and> p \\<in> W}.\n               \\<forall>p\\<in>{p. prefix p z \\<and> p \\<in> W}.\n                  length p \\<le> length maxP) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  \\<forall>l\\<in>length ` {p. prefix p z \\<and> p \\<in> W}.\n     \\<exists>l'\\<in>length ` {p. prefix p z \\<and> p \\<in> W}. l < l'", "have \"infinite (image length ?P)\""], ["proof (prove)\nusing this:\n  \\<forall>l\\<in>length ` {p. prefix p z \\<and> p \\<in> W}.\n     \\<exists>l'\\<in>length ` {p. prefix p z \\<and> p \\<in> W}. l < l'\n\ngoal (1 subgoal):\n 1. infinite (length ` {p. prefix p z \\<and> p \\<in> W})", "by (metis (no_types, lifting) \\<open>?P \\<noteq> {}\\<close> image_is_empty infinite_growing)"], ["proof (state)\nthis:\n  infinite (length ` {p. prefix p z \\<and> p \\<in> W})\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>maxP\\<in>{p. prefix p z \\<and> p \\<in> W}.\n               \\<forall>p\\<in>{p. prefix p z \\<and> p \\<in> W}.\n                  length p \\<le> length maxP) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  infinite (length ` {p. prefix p z \\<and> p \\<in> W})", "have \"infinite ?P\""], ["proof (prove)\nusing this:\n  infinite (length ` {p. prefix p z \\<and> p \\<in> W})\n\ngoal (1 subgoal):\n 1. infinite {p. prefix p z \\<and> p \\<in> W}", "by blast"], ["proof (state)\nthis:\n  infinite {p. prefix p z \\<and> p \\<in> W}\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>maxP\\<in>{p. prefix p z \\<and> p \\<in> W}.\n               \\<forall>p\\<in>{p. prefix p z \\<and> p \\<in> W}.\n                  length p \\<le> length maxP) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  infinite {p. prefix p z \\<and> p \\<in> W}", "show \"False\""], ["proof (prove)\nusing this:\n  infinite {p. prefix p z \\<and> p \\<in> W}\n\ngoal (1 subgoal):\n 1. False", "using \\<open>finite ?P\\<close>"], ["proof (prove)\nusing this:\n  infinite {p. prefix p z \\<and> p \\<in> W}\n  finite {p. prefix p z \\<and> p \\<in> W}\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>maxP\\<in>{p. prefix p z \\<and> p \\<in> W}.\n     \\<forall>p\\<in>{p. prefix p z \\<and> p \\<in> W}.\n        length p \\<le> length maxP\n\ngoal (1 subgoal):\n 1. (\\<And>p. mcp z W p \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "then"], ["proof (chain)\npicking this:\n  \\<exists>maxP\\<in>{p. prefix p z \\<and> p \\<in> W}.\n     \\<forall>p\\<in>{p. prefix p z \\<and> p \\<in> W}.\n        length p \\<le> length maxP", "obtain maxP where \"maxP \\<in> ?P\" \"\\<forall> p \\<in> ?P . length p \\<le> length maxP\""], ["proof (prove)\nusing this:\n  \\<exists>maxP\\<in>{p. prefix p z \\<and> p \\<in> W}.\n     \\<forall>p\\<in>{p. prefix p z \\<and> p \\<in> W}.\n        length p \\<le> length maxP\n\ngoal (1 subgoal):\n 1. (\\<And>maxP.\n        \\<lbrakk>maxP \\<in> {p. prefix p z \\<and> p \\<in> W};\n         \\<forall>p\\<in>{p. prefix p z \\<and> p \\<in> W}.\n            length p \\<le> length maxP\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  maxP \\<in> {p. prefix p z \\<and> p \\<in> W}\n  \\<forall>p\\<in>{p. prefix p z \\<and> p \\<in> W}.\n     length p \\<le> length maxP\n\ngoal (1 subgoal):\n 1. (\\<And>p. mcp z W p \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "then"], ["proof (chain)\npicking this:\n  maxP \\<in> {p. prefix p z \\<and> p \\<in> W}\n  \\<forall>p\\<in>{p. prefix p z \\<and> p \\<in> W}.\n     length p \\<le> length maxP", "have \"mcp z W maxP\""], ["proof (prove)\nusing this:\n  maxP \\<in> {p. prefix p z \\<and> p \\<in> W}\n  \\<forall>p\\<in>{p. prefix p z \\<and> p \\<in> W}.\n     length p \\<le> length maxP\n\ngoal (1 subgoal):\n 1. mcp z W maxP", "unfolding mcp.simps"], ["proof (prove)\nusing this:\n  maxP \\<in> {p. prefix p z \\<and> p \\<in> W}\n  \\<forall>p\\<in>{p. prefix p z \\<and> p \\<in> W}.\n     length p \\<le> length maxP\n\ngoal (1 subgoal):\n 1. prefix maxP z \\<and>\n    maxP \\<in> W \\<and>\n    (\\<forall>p'.\n        prefix p' z \\<and> p' \\<in> W \\<longrightarrow>\n        length p' \\<le> length maxP)", "by blast"], ["proof (state)\nthis:\n  mcp z W maxP\n\ngoal (1 subgoal):\n 1. (\\<And>p. mcp z W p \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "then"], ["proof (chain)\npicking this:\n  mcp z W maxP", "show ?thesis"], ["proof (prove)\nusing this:\n  mcp z W maxP\n\ngoal (1 subgoal):\n 1. thesis", "using that"], ["proof (prove)\nusing this:\n  mcp z W maxP\n  mcp z W ?p \\<Longrightarrow> thesis\n\ngoal (1 subgoal):\n 1. thesis", "by auto"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma mcp_unique :\n  assumes \"mcp z W p\" \n  and     \"mcp z W p'\"\nshows \"p = p'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p = p'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. p = p'", "have \"length p' \\<le> length p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. length p' \\<le> length p", "using assms(1) assms(2)"], ["proof (prove)\nusing this:\n  mcp z W p\n  mcp z W p'\n\ngoal (1 subgoal):\n 1. length p' \\<le> length p", "by auto"], ["proof (state)\nthis:\n  length p' \\<le> length p\n\ngoal (1 subgoal):\n 1. p = p'", "moreover"], ["proof (state)\nthis:\n  length p' \\<le> length p\n\ngoal (1 subgoal):\n 1. p = p'", "have \"length p \\<le> length p'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. length p \\<le> length p'", "using assms(1) assms(2)"], ["proof (prove)\nusing this:\n  mcp z W p\n  mcp z W p'\n\ngoal (1 subgoal):\n 1. length p \\<le> length p'", "by auto"], ["proof (state)\nthis:\n  length p \\<le> length p'\n\ngoal (1 subgoal):\n 1. p = p'", "ultimately"], ["proof (chain)\npicking this:\n  length p' \\<le> length p\n  length p \\<le> length p'", "have \"length p' = length p\""], ["proof (prove)\nusing this:\n  length p' \\<le> length p\n  length p \\<le> length p'\n\ngoal (1 subgoal):\n 1. length p' = length p", "by simp"], ["proof (state)\nthis:\n  length p' = length p\n\ngoal (1 subgoal):\n 1. p = p'", "moreover"], ["proof (state)\nthis:\n  length p' = length p\n\ngoal (1 subgoal):\n 1. p = p'", "have \"prefix p z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prefix p z", "using assms(1)"], ["proof (prove)\nusing this:\n  mcp z W p\n\ngoal (1 subgoal):\n 1. prefix p z", "by auto"], ["proof (state)\nthis:\n  prefix p z\n\ngoal (1 subgoal):\n 1. p = p'", "moreover"], ["proof (state)\nthis:\n  prefix p z\n\ngoal (1 subgoal):\n 1. p = p'", "have \"prefix p' z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prefix p' z", "using assms(2)"], ["proof (prove)\nusing this:\n  mcp z W p'\n\ngoal (1 subgoal):\n 1. prefix p' z", "by auto"], ["proof (state)\nthis:\n  prefix p' z\n\ngoal (1 subgoal):\n 1. p = p'", "ultimately"], ["proof (chain)\npicking this:\n  length p' = length p\n  prefix p z\n  prefix p' z", "show ?thesis"], ["proof (prove)\nusing this:\n  length p' = length p\n  prefix p z\n  prefix p' z\n\ngoal (1 subgoal):\n 1. p = p'", "by (metis append_eq_conv_conj prefixE)"], ["proof (state)\nthis:\n  p = p'\n\ngoal:\nNo subgoals!", "qed"], ["", "fun mcp' :: \"'a list \\<Rightarrow> 'a list set \\<Rightarrow> 'a list\" where\n  \"mcp' z W = (THE p . mcp z W p)\""], ["", "lemma mcp'_intro : \n  assumes \"mcp z W p\"\nshows \"mcp' z W = p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mcp' z W = p", "using assms mcp_unique"], ["proof (prove)\nusing this:\n  mcp z W p\n  \\<lbrakk>mcp ?z ?W ?p; mcp ?z ?W ?p'\\<rbrakk> \\<Longrightarrow> ?p = ?p'\n\ngoal (1 subgoal):\n 1. mcp' z W = p", "by (metis mcp'.elims theI_unique)"], ["", "lemma mcp_prefix_of_suffix :\n  assumes \"mcp (vs@xs) V vs\"\n  and     \"prefix xs' xs\"\nshows \"mcp (vs@xs') V vs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mcp (vs @ xs') V vs", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> mcp (vs @ xs') V vs \\<Longrightarrow> False", "assume \"\\<not> mcp (vs @ xs') V vs\""], ["proof (state)\nthis:\n  \\<not> mcp (vs @ xs') V vs\n\ngoal (1 subgoal):\n 1. \\<not> mcp (vs @ xs') V vs \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<not> mcp (vs @ xs') V vs", "have \"\\<not> (prefix vs (vs @ xs') \\<and> vs \\<in> V \\<and> \n                 (\\<forall> p' . (prefix p' (vs @ xs') \\<and> p' \\<in> V) \\<longrightarrow> length p' \\<le> length vs))\""], ["proof (prove)\nusing this:\n  \\<not> mcp (vs @ xs') V vs\n\ngoal (1 subgoal):\n 1. \\<not> (prefix vs (vs @ xs') \\<and>\n            vs \\<in> V \\<and>\n            (\\<forall>p'.\n                prefix p' (vs @ xs') \\<and> p' \\<in> V \\<longrightarrow>\n                length p' \\<le> length vs))", "by auto"], ["proof (state)\nthis:\n  \\<not> (prefix vs (vs @ xs') \\<and>\n          vs \\<in> V \\<and>\n          (\\<forall>p'.\n              prefix p' (vs @ xs') \\<and> p' \\<in> V \\<longrightarrow>\n              length p' \\<le> length vs))\n\ngoal (1 subgoal):\n 1. \\<not> mcp (vs @ xs') V vs \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<not> (prefix vs (vs @ xs') \\<and>\n          vs \\<in> V \\<and>\n          (\\<forall>p'.\n              prefix p' (vs @ xs') \\<and> p' \\<in> V \\<longrightarrow>\n              length p' \\<le> length vs))", "have \"\\<not> (\\<forall> p' . (prefix p' (vs @ xs') \\<and> p' \\<in> V) \\<longrightarrow> length p' \\<le> length vs)\""], ["proof (prove)\nusing this:\n  \\<not> (prefix vs (vs @ xs') \\<and>\n          vs \\<in> V \\<and>\n          (\\<forall>p'.\n              prefix p' (vs @ xs') \\<and> p' \\<in> V \\<longrightarrow>\n              length p' \\<le> length vs))\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>p'.\n               prefix p' (vs @ xs') \\<and> p' \\<in> V \\<longrightarrow>\n               length p' \\<le> length vs)", "using assms(1)"], ["proof (prove)\nusing this:\n  \\<not> (prefix vs (vs @ xs') \\<and>\n          vs \\<in> V \\<and>\n          (\\<forall>p'.\n              prefix p' (vs @ xs') \\<and> p' \\<in> V \\<longrightarrow>\n              length p' \\<le> length vs))\n  mcp (vs @ xs) V vs\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>p'.\n               prefix p' (vs @ xs') \\<and> p' \\<in> V \\<longrightarrow>\n               length p' \\<le> length vs)", "by auto"], ["proof (state)\nthis:\n  \\<not> (\\<forall>p'.\n             prefix p' (vs @ xs') \\<and> p' \\<in> V \\<longrightarrow>\n             length p' \\<le> length vs)\n\ngoal (1 subgoal):\n 1. \\<not> mcp (vs @ xs') V vs \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<not> (\\<forall>p'.\n             prefix p' (vs @ xs') \\<and> p' \\<in> V \\<longrightarrow>\n             length p' \\<le> length vs)", "obtain vs' where \"vs' \\<in> V \\<and> prefix vs' (vs@xs) \\<and> length vs < length vs'\""], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>p'.\n             prefix p' (vs @ xs') \\<and> p' \\<in> V \\<longrightarrow>\n             length p' \\<le> length vs)\n\ngoal (1 subgoal):\n 1. (\\<And>vs'.\n        vs' \\<in> V \\<and>\n        prefix vs' (vs @ xs) \\<and> length vs < length vs' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (meson assms(2) leI prefix_append prefix_order.dual_order.trans)"], ["proof (state)\nthis:\n  vs' \\<in> V \\<and> prefix vs' (vs @ xs) \\<and> length vs < length vs'\n\ngoal (1 subgoal):\n 1. \\<not> mcp (vs @ xs') V vs \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  vs' \\<in> V \\<and> prefix vs' (vs @ xs) \\<and> length vs < length vs'", "have \"\\<not> (mcp (vs@xs) V vs)\""], ["proof (prove)\nusing this:\n  vs' \\<in> V \\<and> prefix vs' (vs @ xs) \\<and> length vs < length vs'\n\ngoal (1 subgoal):\n 1. \\<not> mcp (vs @ xs) V vs", "by auto"], ["proof (state)\nthis:\n  \\<not> mcp (vs @ xs) V vs\n\ngoal (1 subgoal):\n 1. \\<not> mcp (vs @ xs') V vs \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<not> mcp (vs @ xs) V vs", "show \"False\""], ["proof (prove)\nusing this:\n  \\<not> mcp (vs @ xs) V vs\n\ngoal (1 subgoal):\n 1. False", "using assms(1)"], ["proof (prove)\nusing this:\n  \\<not> mcp (vs @ xs) V vs\n  mcp (vs @ xs) V vs\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma minimal_sequence_to_failure_extending_mcp :\n  assumes \"OFSM M1\"\n  and     \"OFSM M2\"\n  and     \"is_det_state_cover M2 V\"\n  and     \"minimal_sequence_to_failure_extending V M1 M2 vs xs\"\nshows \"mcp (map fst (vs@xs)) V (map fst vs)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mcp (map fst (vs @ xs)) V (map fst vs)", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> mcp (map fst (vs @ xs)) V (map fst vs) \\<Longrightarrow> False", "assume \"\\<not> mcp (map fst (vs @ xs)) V (map fst vs)\""], ["proof (state)\nthis:\n  \\<not> mcp (map fst (vs @ xs)) V (map fst vs)\n\ngoal (1 subgoal):\n 1. \\<not> mcp (map fst (vs @ xs)) V (map fst vs) \\<Longrightarrow> False", "moreover"], ["proof (state)\nthis:\n  \\<not> mcp (map fst (vs @ xs)) V (map fst vs)\n\ngoal (1 subgoal):\n 1. \\<not> mcp (map fst (vs @ xs)) V (map fst vs) \\<Longrightarrow> False", "have \"prefix (map fst vs) (map fst (vs @ xs))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prefix (map fst vs) (map fst (vs @ xs))", "by auto"], ["proof (state)\nthis:\n  prefix (map fst vs) (map fst (vs @ xs))\n\ngoal (1 subgoal):\n 1. \\<not> mcp (map fst (vs @ xs)) V (map fst vs) \\<Longrightarrow> False", "moreover"], ["proof (state)\nthis:\n  prefix (map fst vs) (map fst (vs @ xs))\n\ngoal (1 subgoal):\n 1. \\<not> mcp (map fst (vs @ xs)) V (map fst vs) \\<Longrightarrow> False", "have \"(map fst vs) \\<in> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map fst vs \\<in> V", "using mstfe_prefix_input_in_V assms(4)"], ["proof (prove)\nusing this:\n  minimal_sequence_to_failure_extending ?V ?M1.0 ?M2.0 ?vs\n   ?xs \\<Longrightarrow>\n  map fst ?vs \\<in> ?V\n  minimal_sequence_to_failure_extending V M1 M2 vs xs\n\ngoal (1 subgoal):\n 1. map fst vs \\<in> V", "by auto"], ["proof (state)\nthis:\n  map fst vs \\<in> V\n\ngoal (1 subgoal):\n 1. \\<not> mcp (map fst (vs @ xs)) V (map fst vs) \\<Longrightarrow> False", "ultimately"], ["proof (chain)\npicking this:\n  \\<not> mcp (map fst (vs @ xs)) V (map fst vs)\n  prefix (map fst vs) (map fst (vs @ xs))\n  map fst vs \\<in> V", "obtain v' where \"prefix v' (map fst (vs @ xs))\" \n                             \"v' \\<in> V\" \n                             \"length v' > length (map fst vs)\""], ["proof (prove)\nusing this:\n  \\<not> mcp (map fst (vs @ xs)) V (map fst vs)\n  prefix (map fst vs) (map fst (vs @ xs))\n  map fst vs \\<in> V\n\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        \\<lbrakk>prefix v' (map fst (vs @ xs)); v' \\<in> V;\n         length (map fst vs) < length v'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using leI"], ["proof (prove)\nusing this:\n  \\<not> mcp (map fst (vs @ xs)) V (map fst vs)\n  prefix (map fst vs) (map fst (vs @ xs))\n  map fst vs \\<in> V\n  \\<not> ?x < ?y \\<Longrightarrow> ?y \\<le> ?x\n\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        \\<lbrakk>prefix v' (map fst (vs @ xs)); v' \\<in> V;\n         length (map fst vs) < length v'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  prefix v' (map fst (vs @ xs))\n  v' \\<in> V\n  length (map fst vs) < length v'\n\ngoal (1 subgoal):\n 1. \\<not> mcp (map fst (vs @ xs)) V (map fst vs) \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  prefix v' (map fst (vs @ xs))\n  v' \\<in> V\n  length (map fst vs) < length v'", "obtain x' where \"(map fst (vs@xs)) = v'@x'\""], ["proof (prove)\nusing this:\n  prefix v' (map fst (vs @ xs))\n  v' \\<in> V\n  length (map fst vs) < length v'\n\ngoal (1 subgoal):\n 1. (\\<And>x'.\n        map fst (vs @ xs) = v' @ x' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using prefixE"], ["proof (prove)\nusing this:\n  prefix v' (map fst (vs @ xs))\n  v' \\<in> V\n  length (map fst vs) < length v'\n  \\<lbrakk>prefix ?xs ?ys;\n   \\<And>zs. ?ys = ?xs @ zs \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>x'.\n        map fst (vs @ xs) = v' @ x' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  map fst (vs @ xs) = v' @ x'\n\ngoal (1 subgoal):\n 1. \\<not> mcp (map fst (vs @ xs)) V (map fst vs) \\<Longrightarrow> False", "have \"vs@xs \\<in> L M1 - L M2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xs \\<in> L M1 - L M2", "using assms(4)"], ["proof (prove)\nusing this:\n  minimal_sequence_to_failure_extending V M1 M2 vs xs\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> L M1 - L M2", "unfolding minimal_sequence_to_failure_extending.simps sequence_to_failure.simps"], ["proof (prove)\nusing this:\n  vs \\<in> L\\<^sub>i\\<^sub>n M1 V \\<and>\n  (butlast (vs @ xs) \\<in> L M2 \\<inter> L M1 \\<and>\n   vs @ xs \\<in> L M1 - L M2) \\<and>\n  (\\<nexists>io'.\n      \\<exists>w'\\<in>L\\<^sub>i\\<^sub>n M1 V.\n         (butlast (w' @ io') \\<in> L M2 \\<inter> L M1 \\<and>\n          w' @ io' \\<in> L M1 - L M2) \\<and>\n         length io' < length xs)\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> L M1 - L M2", "by blast"], ["proof (state)\nthis:\n  vs @ xs \\<in> L M1 - L M2\n\ngoal (1 subgoal):\n 1. \\<not> mcp (map fst (vs @ xs)) V (map fst vs) \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  vs @ xs \\<in> L M1 - L M2", "have \"vs@xs \\<in> L\\<^sub>i\\<^sub>n M1 {map fst (vs@xs)}\""], ["proof (prove)\nusing this:\n  vs @ xs \\<in> L M1 - L M2\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> L\\<^sub>i\\<^sub>n M1 {map fst (vs @ xs)}", "by (meson DiffE insertI1 language_state_for_inputs_map_fst)"], ["proof (state)\nthis:\n  vs @ xs \\<in> L\\<^sub>i\\<^sub>n M1 {map fst (vs @ xs)}\n\ngoal (1 subgoal):\n 1. \\<not> mcp (map fst (vs @ xs)) V (map fst vs) \\<Longrightarrow> False", "have \"vs@xs \\<in> L\\<^sub>i\\<^sub>n M1 {v'@x'}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xs \\<in> L\\<^sub>i\\<^sub>n M1 {v' @ x'}", "using \\<open>map fst (vs @ xs) = v' @ x'\\<close> \\<open>vs @ xs \\<in> L\\<^sub>i\\<^sub>n M1 {map fst (vs @ xs)}\\<close>"], ["proof (prove)\nusing this:\n  map fst (vs @ xs) = v' @ x'\n  vs @ xs \\<in> L\\<^sub>i\\<^sub>n M1 {map fst (vs @ xs)}\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> L\\<^sub>i\\<^sub>n M1 {v' @ x'}", "by presburger"], ["proof (state)\nthis:\n  vs @ xs \\<in> L\\<^sub>i\\<^sub>n M1 {v' @ x'}\n\ngoal (1 subgoal):\n 1. \\<not> mcp (map fst (vs @ xs)) V (map fst vs) \\<Longrightarrow> False", "let ?vs' = \"take (length v') (vs@xs)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> mcp (map fst (vs @ xs)) V (map fst vs) \\<Longrightarrow> False", "let ?xs' = \"drop (length v') (vs@xs)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> mcp (map fst (vs @ xs)) V (map fst vs) \\<Longrightarrow> False", "have \"vs@xs = ?vs'@?xs'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xs = take (length v') (vs @ xs) @ drop (length v') (vs @ xs)", "by (metis append_take_drop_id)"], ["proof (state)\nthis:\n  vs @ xs = take (length v') (vs @ xs) @ drop (length v') (vs @ xs)\n\ngoal (1 subgoal):\n 1. \\<not> mcp (map fst (vs @ xs)) V (map fst vs) \\<Longrightarrow> False", "have \"?vs' \\<in> L\\<^sub>i\\<^sub>n M1 V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. take (length v') (vs @ xs) \\<in> L\\<^sub>i\\<^sub>n M1 V", "by (metis (no_types) DiffE \\<open>map fst (vs @ xs) = v' @ x'\\<close> \\<open>v' \\<in> V\\<close> \\<open>vs @ xs \\<in> L M1 - L M2\\<close> \n        append_eq_conv_conj append_take_drop_id language_state_for_inputs_map_fst \n        language_state_prefix take_map)"], ["proof (state)\nthis:\n  take (length v') (vs @ xs) \\<in> L\\<^sub>i\\<^sub>n M1 V\n\ngoal (1 subgoal):\n 1. \\<not> mcp (map fst (vs @ xs)) V (map fst vs) \\<Longrightarrow> False", "have \"sequence_to_failure M1 M2 (?vs' @ ?xs')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sequence_to_failure M1 M2\n     (take (length v') (vs @ xs) @ drop (length v') (vs @ xs))", "by (metis (full_types) \\<open>vs @ xs = take (length v') (vs @ xs) @ drop (length v') (vs @ xs)\\<close> \n        assms(4) minimal_sequence_to_failure_extending.simps)"], ["proof (state)\nthis:\n  sequence_to_failure M1 M2\n   (take (length v') (vs @ xs) @ drop (length v') (vs @ xs))\n\ngoal (1 subgoal):\n 1. \\<not> mcp (map fst (vs @ xs)) V (map fst vs) \\<Longrightarrow> False", "have \"length ?xs' < length xs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. length (drop (length v') (vs @ xs)) < length xs", "using \\<open>length (map fst vs) < length v'\\<close> \\<open>prefix v' (map fst (vs @ xs))\\<close> \n          \\<open>vs @ xs = take (length v') (vs @ xs) @ drop (length v') (vs @ xs)\\<close> prefix_length_le"], ["proof (prove)\nusing this:\n  length (map fst vs) < length v'\n  prefix v' (map fst (vs @ xs))\n  vs @ xs = take (length v') (vs @ xs) @ drop (length v') (vs @ xs)\n  prefix ?xs ?ys \\<Longrightarrow> length ?xs \\<le> length ?ys\n\ngoal (1 subgoal):\n 1. length (drop (length v') (vs @ xs)) < length xs", "by fastforce"], ["proof (state)\nthis:\n  length (drop (length v') (vs @ xs)) < length xs\n\ngoal (1 subgoal):\n 1. \\<not> mcp (map fst (vs @ xs)) V (map fst vs) \\<Longrightarrow> False", "show \"False\""], ["proof (prove)\ngoal (1 subgoal):\n 1. False", "by (meson \\<open>length (drop (length v') (vs @ xs)) < length xs\\<close> \n        \\<open>sequence_to_failure M1 M2 (take (length v') (vs @ xs) @ drop (length v') (vs @ xs))\\<close> \n        \\<open>take (length v') (vs @ xs) \\<in> L\\<^sub>i\\<^sub>n M1 V\\<close> assms(4) \n        minimal_sequence_to_failure_extending.elims(2))"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open> Function N \\<close>"], ["", "text \\<open>\nFunction @{verbatim N} narrows the sets of reaction to the determinisitc state cover considered by \nthe adaptive state counting algorithm to contain only relevant sequences.\nIt is the main refinement of the original formulation of the algorithm as given in @{cite \"hierons\"}.\nAn example for the necessity for this refinement is given in @{cite \"refinement\"}.\n\\<close>"], ["", "fun N :: \"('in \\<times> 'out) list \\<Rightarrow> ('in, 'out, 'state) FSM \\<Rightarrow> 'in list set \\<Rightarrow> ('in \\<times> 'out) list set set\" \n  where\n  \"N io M V = { V'' \\<in> Perm V M . (map fst (mcp' io V'')) = (mcp' (map fst io) V) }\""], ["", "lemma N_nonempty :\n  assumes \"is_det_state_cover M2 V\"\n  and     \"OFSM M1\"\n  and     \"OFSM M2\"\n  and     \"asc_fault_domain M2 M1 m\"\n  and     \"io \\<in> L M1\"\nshows \"N io M1 V \\<noteq> {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "have \"[] \\<in> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [] \\<in> V", "using assms(1) det_state_cover_empty"], ["proof (prove)\nusing this:\n  is_det_state_cover M2 V\n  is_det_state_cover ?M ?V \\<Longrightarrow> [] \\<in> ?V\n\ngoal (1 subgoal):\n 1. [] \\<in> V", "by blast"], ["proof (state)\nthis:\n  [] \\<in> V\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "have \"inputs M1 = inputs M2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inputs M1 = inputs M2", "using assms(4)"], ["proof (prove)\nusing this:\n  asc_fault_domain M2 M1 m\n\ngoal (1 subgoal):\n 1. inputs M1 = inputs M2", "by auto"], ["proof (state)\nthis:\n  inputs M1 = inputs M2\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "have \"is_det_state_cover M2 V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_det_state_cover M2 V", "using assms"], ["proof (prove)\nusing this:\n  is_det_state_cover M2 V\n  OFSM M1\n  OFSM M2\n  asc_fault_domain M2 M1 m\n  io \\<in> L M1\n\ngoal (1 subgoal):\n 1. is_det_state_cover M2 V", "by auto"], ["proof (state)\nthis:\n  is_det_state_cover M2 V\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "moreover"], ["proof (state)\nthis:\n  is_det_state_cover M2 V\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "have \"finite (nodes M2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (nodes M2)", "using assms(3)"], ["proof (prove)\nusing this:\n  OFSM M2\n\ngoal (1 subgoal):\n 1. finite (nodes M2)", "by auto"], ["proof (state)\nthis:\n  finite (nodes M2)\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "moreover"], ["proof (state)\nthis:\n  finite (nodes M2)\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "have \"d_reachable M2 (initial M2) \\<subseteq> nodes M2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. d_reachable M2 (initial M2) \\<subseteq> nodes M2", "by auto"], ["proof (state)\nthis:\n  d_reachable M2 (initial M2) \\<subseteq> nodes M2\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "ultimately"], ["proof (chain)\npicking this:\n  is_det_state_cover M2 V\n  finite (nodes M2)\n  d_reachable M2 (initial M2) \\<subseteq> nodes M2", "have \"finite V\""], ["proof (prove)\nusing this:\n  is_det_state_cover M2 V\n  finite (nodes M2)\n  d_reachable M2 (initial M2) \\<subseteq> nodes M2\n\ngoal (1 subgoal):\n 1. finite V", "using det_state_cover_card[of M2 V]"], ["proof (prove)\nusing this:\n  is_det_state_cover M2 V\n  finite (nodes M2)\n  d_reachable M2 (initial M2) \\<subseteq> nodes M2\n  \\<lbrakk>is_det_state_cover M2 V; finite (nodes M2)\\<rbrakk>\n  \\<Longrightarrow> card (d_reachable M2 (initial M2)) = card V\n\ngoal (1 subgoal):\n 1. finite V", "by (metis finite_if_finite_subsets_card_bdd infinite_subset is_det_state_cover.elims(2) \n        surj_card_le)"], ["proof (state)\nthis:\n  finite V\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "obtain ioV where \"mcp (map fst io) V ioV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>ioV.\n        mcp (map fst io) V ioV \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using mcp_ex[OF \\<open>[] \\<in> V\\<close> \\<open>finite V\\<close>]"], ["proof (prove)\nusing this:\n  (\\<And>p. mcp ?z V p \\<Longrightarrow> ?thesis) \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>ioV.\n        mcp (map fst io) V ioV \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  mcp (map fst io) V ioV\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "then"], ["proof (chain)\npicking this:\n  mcp (map fst io) V ioV", "have \"ioV \\<in> V\""], ["proof (prove)\nusing this:\n  mcp (map fst io) V ioV\n\ngoal (1 subgoal):\n 1. ioV \\<in> V", "by auto\n\n  \\<comment> \\<open>Proof sketch:\n     - ioV uses only inputs of M2 \n     - ioV uses only inputs of M1  \n     - as M1 completely spec.: ex. reaction of M1 to ioV\n     - this reaction is in some V''\\<close>"], ["proof (state)\nthis:\n  ioV \\<in> V\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "obtain q2 where \"d_reaches M2 (initial M2) ioV q2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>q2.\n        d_reaches M2 (initial M2) ioV q2 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using det_state_cover_d_reachable[OF assms(1) \\<open>ioV \\<in> V\\<close>]"], ["proof (prove)\nusing this:\n  (\\<And>q.\n      d_reaches M2 (initial M2) ioV q \\<Longrightarrow>\n      ?thesis) \\<Longrightarrow>\n  ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>q2.\n        d_reaches M2 (initial M2) ioV q2 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  d_reaches M2 (initial M2) ioV q2\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "then"], ["proof (chain)\npicking this:\n  d_reaches M2 (initial M2) ioV q2", "obtain ioV' ioP where io_path : \"length ioV = length ioV' \n                                        \\<and> length ioV = length ioP \n                                        \\<and> (path M2 ((ioV || ioV') || ioP) (initial M2)) \n                                        \\<and> target ((ioV || ioV') || ioP) (initial M2) = q2\""], ["proof (prove)\nusing this:\n  d_reaches M2 (initial M2) ioV q2\n\ngoal (1 subgoal):\n 1. (\\<And>ioV' ioP.\n        length ioV = length ioV' \\<and>\n        length ioV = length ioP \\<and>\n        path M2 ((ioV || ioV') || ioP) (initial M2) \\<and>\n        target ((ioV || ioV') || ioP) (initial M2) = q2 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  length ioV = length ioV' \\<and>\n  length ioV = length ioP \\<and>\n  path M2 ((ioV || ioV') || ioP) (initial M2) \\<and>\n  target ((ioV || ioV') || ioP) (initial M2) = q2\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "have \"well_formed M2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. well_formed M2", "using assms"], ["proof (prove)\nusing this:\n  is_det_state_cover M2 V\n  OFSM M1\n  OFSM M2\n  asc_fault_domain M2 M1 m\n  io \\<in> L M1\n\ngoal (1 subgoal):\n 1. well_formed M2", "by auto"], ["proof (state)\nthis:\n  well_formed M2\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "have \"map fst (map fst ((ioV || ioV') || ioP)) = ioV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map fst (map fst ((ioV || ioV') || ioP)) = ioV", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. map fst (map fst ((ioV || ioV') || ioP)) = ioV", "have \"length (ioV || ioV') = length ioP\""], ["proof (prove)\ngoal (1 subgoal):\n 1. length (ioV || ioV') = length ioP", "using io_path"], ["proof (prove)\nusing this:\n  length ioV = length ioV' \\<and>\n  length ioV = length ioP \\<and>\n  path M2 ((ioV || ioV') || ioP) (initial M2) \\<and>\n  target ((ioV || ioV') || ioP) (initial M2) = q2\n\ngoal (1 subgoal):\n 1. length (ioV || ioV') = length ioP", "by simp"], ["proof (state)\nthis:\n  length (ioV || ioV') = length ioP\n\ngoal (1 subgoal):\n 1. map fst (map fst ((ioV || ioV') || ioP)) = ioV", "then"], ["proof (chain)\npicking this:\n  length (ioV || ioV') = length ioP", "show ?thesis"], ["proof (prove)\nusing this:\n  length (ioV || ioV') = length ioP\n\ngoal (1 subgoal):\n 1. map fst (map fst ((ioV || ioV') || ioP)) = ioV", "using io_path"], ["proof (prove)\nusing this:\n  length (ioV || ioV') = length ioP\n  length ioV = length ioV' \\<and>\n  length ioV = length ioP \\<and>\n  path M2 ((ioV || ioV') || ioP) (initial M2) \\<and>\n  target ((ioV || ioV') || ioP) (initial M2) = q2\n\ngoal (1 subgoal):\n 1. map fst (map fst ((ioV || ioV') || ioP)) = ioV", "by auto"], ["proof (state)\nthis:\n  map fst (map fst ((ioV || ioV') || ioP)) = ioV\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  map fst (map fst ((ioV || ioV') || ioP)) = ioV\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "moreover"], ["proof (state)\nthis:\n  map fst (map fst ((ioV || ioV') || ioP)) = ioV\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "have \"set (map fst (map fst ((ioV || ioV') || ioP))) \\<subseteq> inputs M2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set (map fst (map fst ((ioV || ioV') || ioP))) \\<subseteq> inputs M2", "using path_input_containment[OF \\<open>well_formed M2\\<close>, of \"(ioV || ioV') || ioP\" \"initial M2\" ] \n          io_path"], ["proof (prove)\nusing this:\n  path M2 ((ioV || ioV') || ioP) (initial M2) \\<Longrightarrow>\n  set (map fst (map fst ((ioV || ioV') || ioP))) \\<subseteq> inputs M2\n  length ioV = length ioV' \\<and>\n  length ioV = length ioP \\<and>\n  path M2 ((ioV || ioV') || ioP) (initial M2) \\<and>\n  target ((ioV || ioV') || ioP) (initial M2) = q2\n\ngoal (1 subgoal):\n 1. set (map fst (map fst ((ioV || ioV') || ioP))) \\<subseteq> inputs M2", "by linarith"], ["proof (state)\nthis:\n  set (map fst (map fst ((ioV || ioV') || ioP))) \\<subseteq> inputs M2\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "ultimately"], ["proof (chain)\npicking this:\n  map fst (map fst ((ioV || ioV') || ioP)) = ioV\n  set (map fst (map fst ((ioV || ioV') || ioP))) \\<subseteq> inputs M2", "have \"set ioV \\<subseteq> inputs M2\""], ["proof (prove)\nusing this:\n  map fst (map fst ((ioV || ioV') || ioP)) = ioV\n  set (map fst (map fst ((ioV || ioV') || ioP))) \\<subseteq> inputs M2\n\ngoal (1 subgoal):\n 1. set ioV \\<subseteq> inputs M2", "by presburger"], ["proof (state)\nthis:\n  set ioV \\<subseteq> inputs M2\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "then"], ["proof (chain)\npicking this:\n  set ioV \\<subseteq> inputs M2", "have \"set ioV \\<subseteq> inputs M1\""], ["proof (prove)\nusing this:\n  set ioV \\<subseteq> inputs M2\n\ngoal (1 subgoal):\n 1. set ioV \\<subseteq> inputs M1", "using assms"], ["proof (prove)\nusing this:\n  set ioV \\<subseteq> inputs M2\n  is_det_state_cover M2 V\n  OFSM M1\n  OFSM M2\n  asc_fault_domain M2 M1 m\n  io \\<in> L M1\n\ngoal (1 subgoal):\n 1. set ioV \\<subseteq> inputs M1", "by auto"], ["proof (state)\nthis:\n  set ioV \\<subseteq> inputs M1\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "then"], ["proof (chain)\npicking this:\n  set ioV \\<subseteq> inputs M1", "have \"L\\<^sub>i\\<^sub>n M1 {ioV} \\<noteq> {}\""], ["proof (prove)\nusing this:\n  set ioV \\<subseteq> inputs M1\n\ngoal (1 subgoal):\n 1. L\\<^sub>i\\<^sub>n M1 {ioV} \\<noteq> {}", "using assms(2) language_state_for_inputs_nonempty"], ["proof (prove)\nusing this:\n  set ioV \\<subseteq> inputs M1\n  OFSM M1\n  \\<lbrakk>set ?xs \\<subseteq> inputs ?M; completely_specified ?M;\n   ?q \\<in> nodes ?M\\<rbrakk>\n  \\<Longrightarrow> LS\\<^sub>i\\<^sub>n ?M ?q {?xs} \\<noteq> {}\n\ngoal (1 subgoal):\n 1. L\\<^sub>i\\<^sub>n M1 {ioV} \\<noteq> {}", "by (metis FSM.nodes.initial)"], ["proof (state)\nthis:\n  L\\<^sub>i\\<^sub>n M1 {ioV} \\<noteq> {}\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "have \"prefix ioV (map fst io)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prefix ioV (map fst io)", "using \\<open>mcp (map fst io) V ioV\\<close> mcp.simps"], ["proof (prove)\nusing this:\n  mcp (map fst io) V ioV\n  mcp ?z ?W ?p =\n  (prefix ?p ?z \\<and>\n   ?p \\<in> ?W \\<and>\n   (\\<forall>p'.\n       prefix p' ?z \\<and> p' \\<in> ?W \\<longrightarrow>\n       length p' \\<le> length ?p))\n\ngoal (1 subgoal):\n 1. prefix ioV (map fst io)", "by blast"], ["proof (state)\nthis:\n  prefix ioV (map fst io)\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "then"], ["proof (chain)\npicking this:\n  prefix ioV (map fst io)", "have \"length ioV \\<le> length (map fst io)\""], ["proof (prove)\nusing this:\n  prefix ioV (map fst io)\n\ngoal (1 subgoal):\n 1. length ioV \\<le> length (map fst io)", "using prefix_length_le"], ["proof (prove)\nusing this:\n  prefix ioV (map fst io)\n  prefix ?xs ?ys \\<Longrightarrow> length ?xs \\<le> length ?ys\n\ngoal (1 subgoal):\n 1. length ioV \\<le> length (map fst io)", "by blast"], ["proof (state)\nthis:\n  length ioV \\<le> length (map fst io)\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "then"], ["proof (chain)\npicking this:\n  length ioV \\<le> length (map fst io)", "have \"length ioV \\<le> length io\""], ["proof (prove)\nusing this:\n  length ioV \\<le> length (map fst io)\n\ngoal (1 subgoal):\n 1. length ioV \\<le> length io", "by auto"], ["proof (state)\nthis:\n  length ioV \\<le> length io\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "have \"(map fst io || map snd io) \\<in> L M1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map fst io || map snd io \\<in> L M1", "using assms(5)"], ["proof (prove)\nusing this:\n  io \\<in> L M1\n\ngoal (1 subgoal):\n 1. map fst io || map snd io \\<in> L M1", "by auto"], ["proof (state)\nthis:\n  map fst io || map snd io \\<in> L M1\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "moreover"], ["proof (state)\nthis:\n  map fst io || map snd io \\<in> L M1\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "have \"length (map fst io) = length (map snd io)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. length (map fst io) = length (map snd io)", "by auto"], ["proof (state)\nthis:\n  length (map fst io) = length (map snd io)\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "ultimately"], ["proof (chain)\npicking this:\n  map fst io || map snd io \\<in> L M1\n  length (map fst io) = length (map snd io)", "have \"(map fst io || map snd io) \n                      \\<in> language_state_for_input M1 (initial M1) (map fst io)\""], ["proof (prove)\nusing this:\n  map fst io || map snd io \\<in> L M1\n  length (map fst io) = length (map snd io)\n\ngoal (1 subgoal):\n 1. map fst io || map snd io\n    \\<in> language_state_for_input M1 (initial M1) (map fst io)", "unfolding language_state_def"], ["proof (prove)\nusing this:\n  map fst io || map snd io \\<in> {map fst r |r. path M1 r (initial M1)}\n  length (map fst io) = length (map snd io)\n\ngoal (1 subgoal):\n 1. map fst io || map snd io\n    \\<in> language_state_for_input M1 (initial M1) (map fst io)", "by (metis (mono_tags, lifting) \\<open>map fst io || map snd io \\<in> L M1\\<close> \n        language_state_for_input.simps mem_Collect_eq)"], ["proof (state)\nthis:\n  map fst io || map snd io\n  \\<in> language_state_for_input M1 (initial M1) (map fst io)\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "have \"ioV = take (length ioV) (map fst io)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ioV = take (length ioV) (map fst io)", "by (metis (no_types) \\<open>prefix ioV (map fst io)\\<close> append_eq_conv_conj prefixE)"], ["proof (state)\nthis:\n  ioV = take (length ioV) (map fst io)\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "then"], ["proof (chain)\npicking this:\n  ioV = take (length ioV) (map fst io)", "have \"take (length ioV) io \\<in> language_state_for_input M1 (initial M1) ioV\""], ["proof (prove)\nusing this:\n  ioV = take (length ioV) (map fst io)\n\ngoal (1 subgoal):\n 1. take (length ioV) io \\<in> language_state_for_input M1 (initial M1) ioV", "using language_state_for_input_take"], ["proof (prove)\nusing this:\n  ioV = take (length ioV) (map fst io)\n  ?io \\<in> language_state_for_input ?M ?q ?xs \\<Longrightarrow>\n  take ?n ?io \\<in> language_state_for_input ?M ?q (take ?n ?xs)\n\ngoal (1 subgoal):\n 1. take (length ioV) io \\<in> language_state_for_input M1 (initial M1) ioV", "by (metis \\<open>map fst io || map snd io \\<in> language_state_for_input M1 (initial M1) (map fst io)\\<close> \n        zip_map_fst_snd)"], ["proof (state)\nthis:\n  take (length ioV) io \\<in> language_state_for_input M1 (initial M1) ioV\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "then"], ["proof (chain)\npicking this:\n  take (length ioV) io \\<in> language_state_for_input M1 (initial M1) ioV", "obtain V'' where \"V'' \\<in> Perm V M1\" \"take (length ioV) io \\<in> V''\""], ["proof (prove)\nusing this:\n  take (length ioV) io \\<in> language_state_for_input M1 (initial M1) ioV\n\ngoal (1 subgoal):\n 1. (\\<And>V''.\n        \\<lbrakk>V'' \\<in> Perm V M1;\n         take (length ioV) io \\<in> V''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using perm_elem[OF assms(1-3) \\<open>inputs M1 = inputs M2\\<close> \\<open>ioV \\<in> V\\<close>]"], ["proof (prove)\nusing this:\n  take (length ioV) io \\<in> language_state_for_input M1 (initial M1) ioV\n  \\<lbrakk>?vs' \\<in> language_state_for_input M1 (initial M1) ioV;\n   \\<And>V''.\n      \\<lbrakk>V'' \\<in> Perm V M1; ?vs' \\<in> V''\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>V''.\n        \\<lbrakk>V'' \\<in> Perm V M1;\n         take (length ioV) io \\<in> V''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  V'' \\<in> Perm V M1\n  take (length ioV) io \\<in> V''\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "have \"ioV = mcp' (map fst io) V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ioV = mcp' (map fst io) V", "using \\<open>mcp (map fst io) V ioV\\<close> mcp'_intro"], ["proof (prove)\nusing this:\n  mcp (map fst io) V ioV\n  mcp ?z ?W ?p \\<Longrightarrow> mcp' ?z ?W = ?p\n\ngoal (1 subgoal):\n 1. ioV = mcp' (map fst io) V", "by blast"], ["proof (state)\nthis:\n  ioV = mcp' (map fst io) V\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "have \"map fst (take (length ioV) io) = ioV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map fst (take (length ioV) io) = ioV", "by (metis \\<open>ioV = take (length ioV) (map fst io)\\<close> take_map)"], ["proof (state)\nthis:\n  map fst (take (length ioV) io) = ioV\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "obtain mcpV'' where \"mcp io V'' mcpV''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>mcpV''.\n        mcp io V'' mcpV'' \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (meson \\<open>V'' \\<in> Perm V M1\\<close> \\<open>well_formed M2\\<close> assms(1) mcp_ex perm_elem_finite perm_empty)"], ["proof (state)\nthis:\n  mcp io V'' mcpV''\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "have \"map fst mcpV'' \\<in> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map fst mcpV'' \\<in> V", "using perm_inputs"], ["proof (prove)\nusing this:\n  \\<lbrakk>?V'' \\<in> Perm ?V ?M; ?vs \\<in> ?V''\\<rbrakk>\n  \\<Longrightarrow> map fst ?vs \\<in> ?V\n\ngoal (1 subgoal):\n 1. map fst mcpV'' \\<in> V", "using \\<open>V'' \\<in> Perm V M1\\<close> \\<open>mcp io V'' mcpV''\\<close> mcp.simps"], ["proof (prove)\nusing this:\n  \\<lbrakk>?V'' \\<in> Perm ?V ?M; ?vs \\<in> ?V''\\<rbrakk>\n  \\<Longrightarrow> map fst ?vs \\<in> ?V\n  V'' \\<in> Perm V M1\n  mcp io V'' mcpV''\n  mcp ?z ?W ?p =\n  (prefix ?p ?z \\<and>\n   ?p \\<in> ?W \\<and>\n   (\\<forall>p'.\n       prefix p' ?z \\<and> p' \\<in> ?W \\<longrightarrow>\n       length p' \\<le> length ?p))\n\ngoal (1 subgoal):\n 1. map fst mcpV'' \\<in> V", "by blast"], ["proof (state)\nthis:\n  map fst mcpV'' \\<in> V\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "have \"map fst mcpV'' = ioV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map fst mcpV'' = ioV", "by (metis (no_types) \\<open>map fst (take (length ioV) io) = ioV\\<close> \\<open>map fst mcpV'' \\<in> V\\<close> \n        \\<open>mcp (map fst io) V ioV\\<close> \\<open>mcp io V'' mcpV''\\<close> \\<open>take (length ioV) io \\<in> V''\\<close> \n        map_mono_prefix mcp.elims(2) prefix_length_prefix prefix_order.dual_order.antisym \n        take_is_prefix)"], ["proof (state)\nthis:\n  map fst mcpV'' = ioV\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "have \"map fst (mcp' io V'') = mcp' (map fst io) V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map fst (mcp' io V'') = mcp' (map fst io) V", "using \\<open>ioV = mcp' (map fst io) V\\<close> \\<open>map fst mcpV'' = ioV\\<close> \\<open>mcp io V'' mcpV''\\<close> mcp'_intro"], ["proof (prove)\nusing this:\n  ioV = mcp' (map fst io) V\n  map fst mcpV'' = ioV\n  mcp io V'' mcpV''\n  mcp ?z ?W ?p \\<Longrightarrow> mcp' ?z ?W = ?p\n\ngoal (1 subgoal):\n 1. map fst (mcp' io V'') = mcp' (map fst io) V", "by blast"], ["proof (state)\nthis:\n  map fst (mcp' io V'') = mcp' (map fst io) V\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "then"], ["proof (chain)\npicking this:\n  map fst (mcp' io V'') = mcp' (map fst io) V", "show ?thesis"], ["proof (prove)\nusing this:\n  map fst (mcp' io V'') = mcp' (map fst io) V\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "using \\<open>V'' \\<in> Perm V M1\\<close>"], ["proof (prove)\nusing this:\n  map fst (mcp' io V'') = mcp' (map fst io) V\n  V'' \\<in> Perm V M1\n\ngoal (1 subgoal):\n 1. N io M1 V \\<noteq> {}", "by fastforce"], ["proof (state)\nthis:\n  N io M1 V \\<noteq> {}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma N_mcp_prefix :\n  assumes \"map fst vs = mcp' (map fst (vs@xs)) V\"\n  and     \"V'' \\<in> N (vs@xs) M1 V\"\n  and     \"is_det_state_cover M2 V\"\n  and     \"well_formed M2\"\n  and     \"finite V\"\nshows \"vs \\<in> V''\" \"vs = mcp' (vs@xs) V''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs \\<in> V'' &&& vs = mcp' (vs @ xs) V''", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. vs \\<in> V''\n 2. vs = mcp' (vs @ xs) V''", "have \"map fst (mcp' (vs@xs) V'') = mcp' (map fst (vs@xs)) V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map fst (mcp' (vs @ xs) V'') = mcp' (map fst (vs @ xs)) V", "using assms(2)"], ["proof (prove)\nusing this:\n  V'' \\<in> N (vs @ xs) M1 V\n\ngoal (1 subgoal):\n 1. map fst (mcp' (vs @ xs) V'') = mcp' (map fst (vs @ xs)) V", "by auto"], ["proof (state)\nthis:\n  map fst (mcp' (vs @ xs) V'') = mcp' (map fst (vs @ xs)) V\n\ngoal (2 subgoals):\n 1. vs \\<in> V''\n 2. vs = mcp' (vs @ xs) V''", "then"], ["proof (chain)\npicking this:\n  map fst (mcp' (vs @ xs) V'') = mcp' (map fst (vs @ xs)) V", "have \"map fst (mcp' (vs@xs) V'') = map fst vs\""], ["proof (prove)\nusing this:\n  map fst (mcp' (vs @ xs) V'') = mcp' (map fst (vs @ xs)) V\n\ngoal (1 subgoal):\n 1. map fst (mcp' (vs @ xs) V'') = map fst vs", "using assms(1)"], ["proof (prove)\nusing this:\n  map fst (mcp' (vs @ xs) V'') = mcp' (map fst (vs @ xs)) V\n  map fst vs = mcp' (map fst (vs @ xs)) V\n\ngoal (1 subgoal):\n 1. map fst (mcp' (vs @ xs) V'') = map fst vs", "by presburger"], ["proof (state)\nthis:\n  map fst (mcp' (vs @ xs) V'') = map fst vs\n\ngoal (2 subgoals):\n 1. vs \\<in> V''\n 2. vs = mcp' (vs @ xs) V''", "then"], ["proof (chain)\npicking this:\n  map fst (mcp' (vs @ xs) V'') = map fst vs", "have \"length (mcp' (vs@xs) V'') = length vs\""], ["proof (prove)\nusing this:\n  map fst (mcp' (vs @ xs) V'') = map fst vs\n\ngoal (1 subgoal):\n 1. length (mcp' (vs @ xs) V'') = length vs", "by (metis length_map)"], ["proof (state)\nthis:\n  length (mcp' (vs @ xs) V'') = length vs\n\ngoal (2 subgoals):\n 1. vs \\<in> V''\n 2. vs = mcp' (vs @ xs) V''", "have \"[] \\<in> V''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [] \\<in> V''", "using perm_empty[OF assms(3)] N.simps assms(2)"], ["proof (prove)\nusing this:\n  ?V'' \\<in> Perm V ?M1.0 \\<Longrightarrow> [] \\<in> ?V''\n  N ?io ?M ?V =\n  {V'' \\<in> Perm ?V ?M. map fst (mcp' ?io V'') = mcp' (map fst ?io) ?V}\n  V'' \\<in> N (vs @ xs) M1 V\n\ngoal (1 subgoal):\n 1. [] \\<in> V''", "by blast"], ["proof (state)\nthis:\n  [] \\<in> V''\n\ngoal (2 subgoals):\n 1. vs \\<in> V''\n 2. vs = mcp' (vs @ xs) V''", "moreover"], ["proof (state)\nthis:\n  [] \\<in> V''\n\ngoal (2 subgoals):\n 1. vs \\<in> V''\n 2. vs = mcp' (vs @ xs) V''", "have \"finite V''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite V''", "using perm_elem_finite[OF assms(3,4)] N.simps assms(2)"], ["proof (prove)\nusing this:\n  ?V'' \\<in> Perm V ?M1.0 \\<Longrightarrow> finite ?V''\n  N ?io ?M ?V =\n  {V'' \\<in> Perm ?V ?M. map fst (mcp' ?io V'') = mcp' (map fst ?io) ?V}\n  V'' \\<in> N (vs @ xs) M1 V\n\ngoal (1 subgoal):\n 1. finite V''", "by blast"], ["proof (state)\nthis:\n  finite V''\n\ngoal (2 subgoals):\n 1. vs \\<in> V''\n 2. vs = mcp' (vs @ xs) V''", "ultimately"], ["proof (chain)\npicking this:\n  [] \\<in> V''\n  finite V''", "obtain p where \"mcp (vs@xs) V'' p\""], ["proof (prove)\nusing this:\n  [] \\<in> V''\n  finite V''\n\ngoal (1 subgoal):\n 1. (\\<And>p.\n        mcp (vs @ xs) V'' p \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using mcp_ex"], ["proof (prove)\nusing this:\n  [] \\<in> V''\n  finite V''\n  \\<lbrakk>[] \\<in> ?W; finite ?W;\n   \\<And>p. mcp ?z ?W p \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>p.\n        mcp (vs @ xs) V'' p \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  mcp (vs @ xs) V'' p\n\ngoal (2 subgoals):\n 1. vs \\<in> V''\n 2. vs = mcp' (vs @ xs) V''", "then"], ["proof (chain)\npicking this:\n  mcp (vs @ xs) V'' p", "have \"mcp' (vs@xs) V'' = p\""], ["proof (prove)\nusing this:\n  mcp (vs @ xs) V'' p\n\ngoal (1 subgoal):\n 1. mcp' (vs @ xs) V'' = p", "using mcp'_intro"], ["proof (prove)\nusing this:\n  mcp (vs @ xs) V'' p\n  mcp ?z ?W ?p \\<Longrightarrow> mcp' ?z ?W = ?p\n\ngoal (1 subgoal):\n 1. mcp' (vs @ xs) V'' = p", "by simp"], ["proof (state)\nthis:\n  mcp' (vs @ xs) V'' = p\n\ngoal (2 subgoals):\n 1. vs \\<in> V''\n 2. vs = mcp' (vs @ xs) V''", "then"], ["proof (chain)\npicking this:\n  mcp' (vs @ xs) V'' = p", "have \"prefix (mcp' (vs@xs) V'') (vs@xs)\""], ["proof (prove)\nusing this:\n  mcp' (vs @ xs) V'' = p\n\ngoal (1 subgoal):\n 1. prefix (mcp' (vs @ xs) V'') (vs @ xs)", "unfolding mcp'.simps mcp.simps"], ["proof (prove)\nusing this:\n  (THE p.\n      prefix p (vs @ xs) \\<and>\n      p \\<in> V'' \\<and>\n      (\\<forall>p'.\n          prefix p' (vs @ xs) \\<and> p' \\<in> V'' \\<longrightarrow>\n          length p' \\<le> length p)) =\n  p\n\ngoal (1 subgoal):\n 1. prefix\n     (THE p.\n         prefix p (vs @ xs) \\<and>\n         p \\<in> V'' \\<and>\n         (\\<forall>p'.\n             prefix p' (vs @ xs) \\<and> p' \\<in> V'' \\<longrightarrow>\n             length p' \\<le> length p))\n     (vs @ xs)", "using \\<open>mcp (vs @ xs) V'' p\\<close> mcp.elims(2)"], ["proof (prove)\nusing this:\n  (THE p.\n      prefix p (vs @ xs) \\<and>\n      p \\<in> V'' \\<and>\n      (\\<forall>p'.\n          prefix p' (vs @ xs) \\<and> p' \\<in> V'' \\<longrightarrow>\n          length p' \\<le> length p)) =\n  p\n  mcp (vs @ xs) V'' p\n  \\<lbrakk>mcp ?x ?xa ?xb;\n   \\<And>z W p.\n      \\<lbrakk>?x = z; ?xa = W; ?xb = p;\n       prefix p z \\<and>\n       p \\<in> W \\<and>\n       (\\<forall>p'.\n           prefix p' z \\<and> p' \\<in> W \\<longrightarrow>\n           length p' \\<le> length p)\\<rbrakk>\n      \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n\ngoal (1 subgoal):\n 1. prefix\n     (THE p.\n         prefix p (vs @ xs) \\<and>\n         p \\<in> V'' \\<and>\n         (\\<forall>p'.\n             prefix p' (vs @ xs) \\<and> p' \\<in> V'' \\<longrightarrow>\n             length p' \\<le> length p))\n     (vs @ xs)", "by blast"], ["proof (state)\nthis:\n  prefix (mcp' (vs @ xs) V'') (vs @ xs)\n\ngoal (2 subgoals):\n 1. vs \\<in> V''\n 2. vs = mcp' (vs @ xs) V''", "then"], ["proof (chain)\npicking this:\n  prefix (mcp' (vs @ xs) V'') (vs @ xs)", "show \"vs = mcp' (vs@xs) V''\""], ["proof (prove)\nusing this:\n  prefix (mcp' (vs @ xs) V'') (vs @ xs)\n\ngoal (1 subgoal):\n 1. vs = mcp' (vs @ xs) V''", "by (metis \\<open>length (mcp' (vs @ xs) V'') = length vs\\<close> append_eq_append_conv prefix_def)"], ["proof (state)\nthis:\n  vs = mcp' (vs @ xs) V''\n\ngoal (1 subgoal):\n 1. vs \\<in> V''", "show \"vs \\<in> V''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs \\<in> V''", "using \\<open>mcp (vs @ xs) V'' p\\<close> \\<open>mcp' (vs @ xs) V'' = p\\<close> \\<open>vs = mcp' (vs @ xs) V''\\<close>"], ["proof (prove)\nusing this:\n  mcp (vs @ xs) V'' p\n  mcp' (vs @ xs) V'' = p\n  vs = mcp' (vs @ xs) V''\n\ngoal (1 subgoal):\n 1. vs \\<in> V''", "by auto"], ["proof (state)\nthis:\n  vs \\<in> V''\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open> Functions TS, C, RM \\<close>"], ["", "text \\<open>\nFunction T@{verbatim TS} defines the calculation of the test suite used by the adaptive state \ncounting algorithm in an iterative way.\nIt is defined using the three functions @{verbatim TS}, @{verbatim C} and @{verbatim RM} where\n   @{verbatim TS} represents the test suite calculated up to some iteration,\n   @{verbatim C} contains the sequences considered for extension in some iteration, and\n   @{verbatim RM} contains the sequences of the corresponding @{verbatim C} result that are not to\n                  be extended, which we also call removed sequences.\n\\<close>"], ["", "abbreviation append_set :: \"'a list set \\<Rightarrow> 'a set \\<Rightarrow> 'a list set\" where\n  \"append_set T X \\<equiv> {xs @ [x] | xs x . xs \\<in> T \\<and> x \\<in> X}\""], ["", "abbreviation append_sets :: \"'a list set \\<Rightarrow> 'a list set \\<Rightarrow> 'a list set\" where\n  \"append_sets T X \\<equiv> {xs @ xs' | xs xs' . xs \\<in> T \\<and> xs' \\<in> X}\""], ["", "fun TS :: \"('in, 'out, 'state1) FSM \\<Rightarrow> ('in, 'out, 'state2) FSM \n            \\<Rightarrow> ('in, 'out) ATC set \\<Rightarrow> 'in list set \\<Rightarrow> nat \\<Rightarrow> nat \n            \\<Rightarrow> 'in list set\" \nand C  :: \"('in, 'out, 'state1) FSM \\<Rightarrow> ('in, 'out, 'state2) FSM \n            \\<Rightarrow> ('in, 'out) ATC set \\<Rightarrow> 'in list set \\<Rightarrow> nat \\<Rightarrow> nat \n            \\<Rightarrow> 'in list set\"   \nand RM :: \"('in, 'out, 'state1) FSM \\<Rightarrow> ('in, 'out, 'state2) FSM \n            \\<Rightarrow> ('in, 'out) ATC set \\<Rightarrow> 'in list set \\<Rightarrow> nat \\<Rightarrow> nat \n            \\<Rightarrow> 'in list set\"   \n  where\n  \"RM M2 M1 \\<Omega> V m 0 = {}\" |\n  \"TS M2 M1 \\<Omega> V m 0 = {}\" |\n  \"TS M2 M1 \\<Omega> V m (Suc 0) = V\" |\n  \"C M2 M1 \\<Omega> V m 0 = {}\" |\n  \"C M2 M1 \\<Omega> V m (Suc 0) = V\" |\n  \"RM M2 M1 \\<Omega> V m (Suc n) = \n    {xs' \\<in> C M2 M1 \\<Omega> V m (Suc n) .\n      (\\<not> (L\\<^sub>i\\<^sub>n M1 {xs'} \\<subseteq> L\\<^sub>i\\<^sub>n M2 {xs'}))\n      \\<or> (\\<forall> io \\<in> L\\<^sub>i\\<^sub>n M1 {xs'} .\n          \\<exists> V'' \\<in> N io M1 V .  \n            \\<exists> S1 . \n              \\<exists> vs xs .\n                io = (vs@xs)\n                \\<and> mcp (vs@xs) V'' vs\n                \\<and> S1 \\<subseteq> nodes M2\n                \\<and> (\\<forall> s1 \\<in> S1 . \\<forall> s2 \\<in> S1 .\n                  s1 \\<noteq> s2 \\<longrightarrow> \n                    (\\<forall> io1 \\<in> RP M2 s1 vs xs V'' .\n                       \\<forall> io2 \\<in> RP M2 s2 vs xs V'' .\n                         B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega> ))\n                \\<and> m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m n \\<union> V) S1 \\<Omega> V'')}\" |\n  \"C M2 M1 \\<Omega> V m (Suc n) = \n    (append_set ((C M2 M1 \\<Omega> V m n) - (RM M2 M1 \\<Omega> V m n)) (inputs M2)) \n    - (TS M2 M1 \\<Omega> V m n)\" |\n  \"TS M2 M1 \\<Omega> V m (Suc n) = \n    (TS M2 M1 \\<Omega> V m n) \\<union> (C M2 M1 \\<Omega> V m (Suc n))\""], ["", "abbreviation lists_of_length :: \"'a set \\<Rightarrow> nat \\<Rightarrow> 'a list set\" where \n  \"lists_of_length X n \\<equiv> {xs . length xs = n \\<and> set xs \\<subseteq> X}\""], ["", "lemma append_lists_of_length_alt_def :\n  \"append_sets T (lists_of_length X (Suc n)) = append_set (append_sets T (lists_of_length X n)) X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. append_sets T (lists_of_length X (Suc n)) =\n    append_set (append_sets T (lists_of_length X n)) X", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. append_sets T (lists_of_length X (Suc n))\n    \\<subseteq> append_set (append_sets T (lists_of_length X n)) X\n 2. append_set (append_sets T (lists_of_length X n)) X\n    \\<subseteq> append_sets T (lists_of_length X (Suc n))", "show \"append_sets T (lists_of_length X (Suc n)) \n          \\<subseteq> append_set (append_sets T (lists_of_length X n)) X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. append_sets T (lists_of_length X (Suc n))\n    \\<subseteq> append_set (append_sets T (lists_of_length X n)) X", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_sets T (lists_of_length X (Suc n)) \\<Longrightarrow>\n       x \\<in> append_set (append_sets T (lists_of_length X n)) X", "fix tx"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_sets T (lists_of_length X (Suc n)) \\<Longrightarrow>\n       x \\<in> append_set (append_sets T (lists_of_length X n)) X", "assume \"tx \\<in> append_sets T (lists_of_length X (Suc n))\""], ["proof (state)\nthis:\n  tx \\<in> append_sets T (lists_of_length X (Suc n))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_sets T (lists_of_length X (Suc n)) \\<Longrightarrow>\n       x \\<in> append_set (append_sets T (lists_of_length X n)) X", "then"], ["proof (chain)\npicking this:\n  tx \\<in> append_sets T (lists_of_length X (Suc n))", "obtain t x where \"t@x = tx\" \"t \\<in> T\" \"length x = Suc n\" \"set x \\<subseteq> X\""], ["proof (prove)\nusing this:\n  tx \\<in> append_sets T (lists_of_length X (Suc n))\n\ngoal (1 subgoal):\n 1. (\\<And>t x.\n        \\<lbrakk>t @ x = tx; t \\<in> T; length x = Suc n;\n         set x \\<subseteq> X\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  t @ x = tx\n  t \\<in> T\n  length x = Suc n\n  set x \\<subseteq> X\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_sets T (lists_of_length X (Suc n)) \\<Longrightarrow>\n       x \\<in> append_set (append_sets T (lists_of_length X n)) X", "then"], ["proof (chain)\npicking this:\n  t @ x = tx\n  t \\<in> T\n  length x = Suc n\n  set x \\<subseteq> X", "have \"x \\<noteq> []\" \"length (butlast x) = n\""], ["proof (prove)\nusing this:\n  t @ x = tx\n  t \\<in> T\n  length x = Suc n\n  set x \\<subseteq> X\n\ngoal (1 subgoal):\n 1. x \\<noteq> [] &&& length (butlast x) = n", "by auto"], ["proof (state)\nthis:\n  x \\<noteq> []\n  length (butlast x) = n\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_sets T (lists_of_length X (Suc n)) \\<Longrightarrow>\n       x \\<in> append_set (append_sets T (lists_of_length X n)) X", "moreover"], ["proof (state)\nthis:\n  x \\<noteq> []\n  length (butlast x) = n\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_sets T (lists_of_length X (Suc n)) \\<Longrightarrow>\n       x \\<in> append_set (append_sets T (lists_of_length X n)) X", "have \"set (butlast x) \\<subseteq> X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set (butlast x) \\<subseteq> X", "using \\<open>set x \\<subseteq> X\\<close>"], ["proof (prove)\nusing this:\n  set x \\<subseteq> X\n\ngoal (1 subgoal):\n 1. set (butlast x) \\<subseteq> X", "by (meson dual_order.trans prefixeq_butlast set_mono_prefix)"], ["proof (state)\nthis:\n  set (butlast x) \\<subseteq> X\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_sets T (lists_of_length X (Suc n)) \\<Longrightarrow>\n       x \\<in> append_set (append_sets T (lists_of_length X n)) X", "ultimately"], ["proof (chain)\npicking this:\n  x \\<noteq> []\n  length (butlast x) = n\n  set (butlast x) \\<subseteq> X", "have \"butlast x \\<in> lists_of_length X n\""], ["proof (prove)\nusing this:\n  x \\<noteq> []\n  length (butlast x) = n\n  set (butlast x) \\<subseteq> X\n\ngoal (1 subgoal):\n 1. butlast x \\<in> lists_of_length X n", "by auto"], ["proof (state)\nthis:\n  butlast x \\<in> lists_of_length X n\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_sets T (lists_of_length X (Suc n)) \\<Longrightarrow>\n       x \\<in> append_set (append_sets T (lists_of_length X n)) X", "then"], ["proof (chain)\npicking this:\n  butlast x \\<in> lists_of_length X n", "have \"t@(butlast x) \\<in> append_sets T (lists_of_length X n)\""], ["proof (prove)\nusing this:\n  butlast x \\<in> lists_of_length X n\n\ngoal (1 subgoal):\n 1. t @ butlast x \\<in> append_sets T (lists_of_length X n)", "using \\<open>t \\<in> T\\<close>"], ["proof (prove)\nusing this:\n  butlast x \\<in> lists_of_length X n\n  t \\<in> T\n\ngoal (1 subgoal):\n 1. t @ butlast x \\<in> append_sets T (lists_of_length X n)", "by blast"], ["proof (state)\nthis:\n  t @ butlast x \\<in> append_sets T (lists_of_length X n)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_sets T (lists_of_length X (Suc n)) \\<Longrightarrow>\n       x \\<in> append_set (append_sets T (lists_of_length X n)) X", "moreover"], ["proof (state)\nthis:\n  t @ butlast x \\<in> append_sets T (lists_of_length X n)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_sets T (lists_of_length X (Suc n)) \\<Longrightarrow>\n       x \\<in> append_set (append_sets T (lists_of_length X n)) X", "have \"last x \\<in> X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. last x \\<in> X", "using \\<open>set x \\<subseteq> X\\<close> \\<open>x \\<noteq> []\\<close>"], ["proof (prove)\nusing this:\n  set x \\<subseteq> X\n  x \\<noteq> []\n\ngoal (1 subgoal):\n 1. last x \\<in> X", "by auto"], ["proof (state)\nthis:\n  last x \\<in> X\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_sets T (lists_of_length X (Suc n)) \\<Longrightarrow>\n       x \\<in> append_set (append_sets T (lists_of_length X n)) X", "ultimately"], ["proof (chain)\npicking this:\n  t @ butlast x \\<in> append_sets T (lists_of_length X n)\n  last x \\<in> X", "have \"t@(butlast x)@[last x] \\<in> append_set (append_sets T (lists_of_length X n)) X\""], ["proof (prove)\nusing this:\n  t @ butlast x \\<in> append_sets T (lists_of_length X n)\n  last x \\<in> X\n\ngoal (1 subgoal):\n 1. t @ butlast x @ [last x]\n    \\<in> append_set (append_sets T (lists_of_length X n)) X", "by auto"], ["proof (state)\nthis:\n  t @ butlast x @ [last x]\n  \\<in> append_set (append_sets T (lists_of_length X n)) X\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_sets T (lists_of_length X (Suc n)) \\<Longrightarrow>\n       x \\<in> append_set (append_sets T (lists_of_length X n)) X", "then"], ["proof (chain)\npicking this:\n  t @ butlast x @ [last x]\n  \\<in> append_set (append_sets T (lists_of_length X n)) X", "show \"tx \\<in> append_set (append_sets T (lists_of_length X n)) X\""], ["proof (prove)\nusing this:\n  t @ butlast x @ [last x]\n  \\<in> append_set (append_sets T (lists_of_length X n)) X\n\ngoal (1 subgoal):\n 1. tx \\<in> append_set (append_sets T (lists_of_length X n)) X", "using \\<open>t@x = tx\\<close>"], ["proof (prove)\nusing this:\n  t @ butlast x @ [last x]\n  \\<in> append_set (append_sets T (lists_of_length X n)) X\n  t @ x = tx\n\ngoal (1 subgoal):\n 1. tx \\<in> append_set (append_sets T (lists_of_length X n)) X", "by (simp add: \\<open>x \\<noteq> []\\<close>)"], ["proof (state)\nthis:\n  tx \\<in> append_set (append_sets T (lists_of_length X n)) X\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  append_sets T (lists_of_length X (Suc n))\n  \\<subseteq> append_set (append_sets T (lists_of_length X n)) X\n\ngoal (1 subgoal):\n 1. append_set (append_sets T (lists_of_length X n)) X\n    \\<subseteq> append_sets T (lists_of_length X (Suc n))", "show \"append_set (append_sets T (lists_of_length X n)) X \n          \\<subseteq> append_sets T (lists_of_length X (Suc n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. append_set (append_sets T (lists_of_length X n)) X\n    \\<subseteq> append_sets T (lists_of_length X (Suc n))", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_set (append_sets T (lists_of_length X n))\n                X \\<Longrightarrow>\n       x \\<in> append_sets T (lists_of_length X (Suc n))", "fix tx"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_set (append_sets T (lists_of_length X n))\n                X \\<Longrightarrow>\n       x \\<in> append_sets T (lists_of_length X (Suc n))", "assume \"tx \\<in> append_set (append_sets T (lists_of_length X n)) X\""], ["proof (state)\nthis:\n  tx \\<in> append_set (append_sets T (lists_of_length X n)) X\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_set (append_sets T (lists_of_length X n))\n                X \\<Longrightarrow>\n       x \\<in> append_sets T (lists_of_length X (Suc n))", "then"], ["proof (chain)\npicking this:\n  tx \\<in> append_set (append_sets T (lists_of_length X n)) X", "obtain tx' x where \"tx = tx' @ [x]\" \"tx' \\<in> append_sets T (lists_of_length X n)\" \"x \\<in> X\""], ["proof (prove)\nusing this:\n  tx \\<in> append_set (append_sets T (lists_of_length X n)) X\n\ngoal (1 subgoal):\n 1. (\\<And>tx' x.\n        \\<lbrakk>tx = tx' @ [x];\n         tx' \\<in> append_sets T (lists_of_length X n); x \\<in> X\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  tx = tx' @ [x]\n  tx' \\<in> append_sets T (lists_of_length X n)\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_set (append_sets T (lists_of_length X n))\n                X \\<Longrightarrow>\n       x \\<in> append_sets T (lists_of_length X (Suc n))", "then"], ["proof (chain)\npicking this:\n  tx = tx' @ [x]\n  tx' \\<in> append_sets T (lists_of_length X n)\n  x \\<in> X", "obtain tx'' x' where \"tx''@x' = tx'\" \"tx'' \\<in> T\" \"length x' = n\" \"set x' \\<subseteq> X\""], ["proof (prove)\nusing this:\n  tx = tx' @ [x]\n  tx' \\<in> append_sets T (lists_of_length X n)\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. (\\<And>tx'' x'.\n        \\<lbrakk>tx'' @ x' = tx'; tx'' \\<in> T; length x' = n;\n         set x' \\<subseteq> X\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  tx'' @ x' = tx'\n  tx'' \\<in> T\n  length x' = n\n  set x' \\<subseteq> X\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_set (append_sets T (lists_of_length X n))\n                X \\<Longrightarrow>\n       x \\<in> append_sets T (lists_of_length X (Suc n))", "then"], ["proof (chain)\npicking this:\n  tx'' @ x' = tx'\n  tx'' \\<in> T\n  length x' = n\n  set x' \\<subseteq> X", "have \"tx''@x'@[x] = tx\""], ["proof (prove)\nusing this:\n  tx'' @ x' = tx'\n  tx'' \\<in> T\n  length x' = n\n  set x' \\<subseteq> X\n\ngoal (1 subgoal):\n 1. tx'' @ x' @ [x] = tx", "by (simp add: \\<open>tx = tx' @ [x]\\<close>)"], ["proof (state)\nthis:\n  tx'' @ x' @ [x] = tx\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_set (append_sets T (lists_of_length X n))\n                X \\<Longrightarrow>\n       x \\<in> append_sets T (lists_of_length X (Suc n))", "moreover"], ["proof (state)\nthis:\n  tx'' @ x' @ [x] = tx\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_set (append_sets T (lists_of_length X n))\n                X \\<Longrightarrow>\n       x \\<in> append_sets T (lists_of_length X (Suc n))", "have \"tx'' \\<in> T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. tx'' \\<in> T", "by (meson \\<open>tx'' \\<in> T\\<close>)"], ["proof (state)\nthis:\n  tx'' \\<in> T\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_set (append_sets T (lists_of_length X n))\n                X \\<Longrightarrow>\n       x \\<in> append_sets T (lists_of_length X (Suc n))", "moreover"], ["proof (state)\nthis:\n  tx'' \\<in> T\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_set (append_sets T (lists_of_length X n))\n                X \\<Longrightarrow>\n       x \\<in> append_sets T (lists_of_length X (Suc n))", "have \"length (x'@[x]) = Suc n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. length (x' @ [x]) = Suc n", "by (simp add: \\<open>length x' = n\\<close>)"], ["proof (state)\nthis:\n  length (x' @ [x]) = Suc n\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_set (append_sets T (lists_of_length X n))\n                X \\<Longrightarrow>\n       x \\<in> append_sets T (lists_of_length X (Suc n))", "moreover"], ["proof (state)\nthis:\n  length (x' @ [x]) = Suc n\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_set (append_sets T (lists_of_length X n))\n                X \\<Longrightarrow>\n       x \\<in> append_sets T (lists_of_length X (Suc n))", "have \"set (x'@[x]) \\<subseteq> X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set (x' @ [x]) \\<subseteq> X", "by (simp add: \\<open>set x' \\<subseteq> X\\<close> \\<open>x \\<in> X\\<close>)"], ["proof (state)\nthis:\n  set (x' @ [x]) \\<subseteq> X\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> append_set (append_sets T (lists_of_length X n))\n                X \\<Longrightarrow>\n       x \\<in> append_sets T (lists_of_length X (Suc n))", "ultimately"], ["proof (chain)\npicking this:\n  tx'' @ x' @ [x] = tx\n  tx'' \\<in> T\n  length (x' @ [x]) = Suc n\n  set (x' @ [x]) \\<subseteq> X", "show \"tx \\<in> append_sets T (lists_of_length X (Suc n))\""], ["proof (prove)\nusing this:\n  tx'' @ x' @ [x] = tx\n  tx'' \\<in> T\n  length (x' @ [x]) = Suc n\n  set (x' @ [x]) \\<subseteq> X\n\ngoal (1 subgoal):\n 1. tx \\<in> append_sets T (lists_of_length X (Suc n))", "by blast"], ["proof (state)\nthis:\n  tx \\<in> append_sets T (lists_of_length X (Suc n))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  append_set (append_sets T (lists_of_length X n)) X\n  \\<subseteq> append_sets T (lists_of_length X (Suc n))\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open> Basic properties of the test suite calculation functions \\<close>"], ["", "lemma C_step : \n  assumes \"n > 0\"\n  shows \"C M2 M1 \\<Omega> V m (Suc n) \\<subseteq> (append_set (C M2 M1 \\<Omega> V m n) (inputs M2)) - C M2 M1 \\<Omega> V m n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n)\n    \\<subseteq> append_set (C M2 M1 \\<Omega> V m n) (inputs M2) -\n                C M2 M1 \\<Omega> V m n", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n)\n    \\<subseteq> append_set (C M2 M1 \\<Omega> V m n) (inputs M2) -\n                C M2 M1 \\<Omega> V m n", "let ?TS = \"\\<lambda> n . TS M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n)\n    \\<subseteq> append_set (C M2 M1 \\<Omega> V m n) (inputs M2) -\n                C M2 M1 \\<Omega> V m n", "let ?C = \"\\<lambda> n . C M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n)\n    \\<subseteq> append_set (C M2 M1 \\<Omega> V m n) (inputs M2) -\n                C M2 M1 \\<Omega> V m n", "let ?RM = \"\\<lambda> n . RM M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n)\n    \\<subseteq> append_set (C M2 M1 \\<Omega> V m n) (inputs M2) -\n                C M2 M1 \\<Omega> V m n", "obtain k where n_def[simp] : \"n = Suc k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>k. n = Suc k \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using assms not0_implies_Suc"], ["proof (prove)\nusing this:\n  0 < n\n  ?n \\<noteq> 0 \\<Longrightarrow> \\<exists>m. ?n = Suc m\n\ngoal (1 subgoal):\n 1. (\\<And>k. n = Suc k \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by blast"], ["proof (state)\nthis:\n  n = Suc k\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n)\n    \\<subseteq> append_set (C M2 M1 \\<Omega> V m n) (inputs M2) -\n                C M2 M1 \\<Omega> V m n", "have \"?C (Suc n) = (append_set (?C n - ?RM n) (inputs M2)) - ?TS n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n) =\n    append_set (C M2 M1 \\<Omega> V m n - RM M2 M1 \\<Omega> V m n)\n     (inputs M2) -\n    TS M2 M1 \\<Omega> V m n", "using n_def C.simps(3)"], ["proof (prove)\nusing this:\n  n = Suc k\n  C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc (Suc ?v)) =\n  append_set\n   (C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v) -\n    RM ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v))\n   (inputs ?M2.0) -\n  TS ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v)\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n) =\n    append_set (C M2 M1 \\<Omega> V m n - RM M2 M1 \\<Omega> V m n)\n     (inputs M2) -\n    TS M2 M1 \\<Omega> V m n", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc n) =\n  append_set (C M2 M1 \\<Omega> V m n - RM M2 M1 \\<Omega> V m n)\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m n\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n)\n    \\<subseteq> append_set (C M2 M1 \\<Omega> V m n) (inputs M2) -\n                C M2 M1 \\<Omega> V m n", "moreover"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc n) =\n  append_set (C M2 M1 \\<Omega> V m n - RM M2 M1 \\<Omega> V m n)\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m n\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n)\n    \\<subseteq> append_set (C M2 M1 \\<Omega> V m n) (inputs M2) -\n                C M2 M1 \\<Omega> V m n", "have \"?C n \\<subseteq> ?TS n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m n \\<subseteq> TS M2 M1 \\<Omega> V m n", "using n_def"], ["proof (prove)\nusing this:\n  n = Suc k\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m n \\<subseteq> TS M2 M1 \\<Omega> V m n", "by (metis C.simps(2) TS.elims UnCI assms neq0_conv subsetI)"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m n \\<subseteq> TS M2 M1 \\<Omega> V m n\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n)\n    \\<subseteq> append_set (C M2 M1 \\<Omega> V m n) (inputs M2) -\n                C M2 M1 \\<Omega> V m n", "ultimately"], ["proof (chain)\npicking this:\n  C M2 M1 \\<Omega> V m (Suc n) =\n  append_set (C M2 M1 \\<Omega> V m n - RM M2 M1 \\<Omega> V m n)\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m n\n  C M2 M1 \\<Omega> V m n \\<subseteq> TS M2 M1 \\<Omega> V m n", "show \"?C (Suc n) \\<subseteq> append_set (?C n) (inputs M2) - ?C n\""], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m (Suc n) =\n  append_set (C M2 M1 \\<Omega> V m n - RM M2 M1 \\<Omega> V m n)\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m n\n  C M2 M1 \\<Omega> V m n \\<subseteq> TS M2 M1 \\<Omega> V m n\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n)\n    \\<subseteq> append_set (C M2 M1 \\<Omega> V m n) (inputs M2) -\n                C M2 M1 \\<Omega> V m n", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc n)\n  \\<subseteq> append_set (C M2 M1 \\<Omega> V m n) (inputs M2) -\n              C M2 M1 \\<Omega> V m n\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma C_extension : \n  \"C M2 M1 \\<Omega> V m (Suc n) \\<subseteq> append_sets V (lists_of_length (inputs M2) n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n)\n    \\<subseteq> append_sets V (lists_of_length (inputs M2) n)", "proof (induction n)"], ["proof (state)\ngoal (2 subgoals):\n 1. C M2 M1 \\<Omega> V m (Suc 0)\n    \\<subseteq> append_sets V (lists_of_length (inputs M2) 0)\n 2. \\<And>n.\n       C M2 M1 \\<Omega> V m (Suc n)\n       \\<subseteq> append_sets V\n                    (lists_of_length (inputs M2) n) \\<Longrightarrow>\n       C M2 M1 \\<Omega> V m (Suc (Suc n))\n       \\<subseteq> append_sets V (lists_of_length (inputs M2) (Suc n))", "case 0"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. C M2 M1 \\<Omega> V m (Suc 0)\n    \\<subseteq> append_sets V (lists_of_length (inputs M2) 0)\n 2. \\<And>n.\n       C M2 M1 \\<Omega> V m (Suc n)\n       \\<subseteq> append_sets V\n                    (lists_of_length (inputs M2) n) \\<Longrightarrow>\n       C M2 M1 \\<Omega> V m (Suc (Suc n))\n       \\<subseteq> append_sets V (lists_of_length (inputs M2) (Suc n))", "then"], ["proof (chain)\npicking this:", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc 0)\n    \\<subseteq> append_sets V (lists_of_length (inputs M2) 0)", "by auto"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc 0)\n  \\<subseteq> append_sets V (lists_of_length (inputs M2) 0)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       C M2 M1 \\<Omega> V m (Suc n)\n       \\<subseteq> append_sets V\n                    (lists_of_length (inputs M2) n) \\<Longrightarrow>\n       C M2 M1 \\<Omega> V m (Suc (Suc n))\n       \\<subseteq> append_sets V (lists_of_length (inputs M2) (Suc n))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       C M2 M1 \\<Omega> V m (Suc n)\n       \\<subseteq> append_sets V\n                    (lists_of_length (inputs M2) n) \\<Longrightarrow>\n       C M2 M1 \\<Omega> V m (Suc (Suc n))\n       \\<subseteq> append_sets V (lists_of_length (inputs M2) (Suc n))", "case (Suc k)"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc k)\n  \\<subseteq> append_sets V (lists_of_length (inputs M2) k)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       C M2 M1 \\<Omega> V m (Suc n)\n       \\<subseteq> append_sets V\n                    (lists_of_length (inputs M2) n) \\<Longrightarrow>\n       C M2 M1 \\<Omega> V m (Suc (Suc n))\n       \\<subseteq> append_sets V (lists_of_length (inputs M2) (Suc n))", "let ?TS = \"\\<lambda> n . TS M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       C M2 M1 \\<Omega> V m (Suc n)\n       \\<subseteq> append_sets V\n                    (lists_of_length (inputs M2) n) \\<Longrightarrow>\n       C M2 M1 \\<Omega> V m (Suc (Suc n))\n       \\<subseteq> append_sets V (lists_of_length (inputs M2) (Suc n))", "let ?C = \"\\<lambda> n . C M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       C M2 M1 \\<Omega> V m (Suc n)\n       \\<subseteq> append_sets V\n                    (lists_of_length (inputs M2) n) \\<Longrightarrow>\n       C M2 M1 \\<Omega> V m (Suc (Suc n))\n       \\<subseteq> append_sets V (lists_of_length (inputs M2) (Suc n))", "let ?RM = \"\\<lambda> n . RM M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       C M2 M1 \\<Omega> V m (Suc n)\n       \\<subseteq> append_sets V\n                    (lists_of_length (inputs M2) n) \\<Longrightarrow>\n       C M2 M1 \\<Omega> V m (Suc (Suc n))\n       \\<subseteq> append_sets V (lists_of_length (inputs M2) (Suc n))", "have \"0 < Suc k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < Suc k", "by simp"], ["proof (state)\nthis:\n  0 < Suc k\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       C M2 M1 \\<Omega> V m (Suc n)\n       \\<subseteq> append_sets V\n                    (lists_of_length (inputs M2) n) \\<Longrightarrow>\n       C M2 M1 \\<Omega> V m (Suc (Suc n))\n       \\<subseteq> append_sets V (lists_of_length (inputs M2) (Suc n))", "have \"?C (Suc (Suc k)) \\<subseteq> (append_set (?C (Suc k)) (inputs M2)) - ?C (Suc k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc (Suc k))\n    \\<subseteq> append_set (C M2 M1 \\<Omega> V m (Suc k)) (inputs M2) -\n                C M2 M1 \\<Omega> V m (Suc k)", "using C_step[OF \\<open>0 < Suc k\\<close>]"], ["proof (prove)\nusing this:\n  C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc (Suc k))\n  \\<subseteq> append_set (C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc k))\n               (inputs ?M2.0) -\n              C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc k)\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc (Suc k))\n    \\<subseteq> append_set (C M2 M1 \\<Omega> V m (Suc k)) (inputs M2) -\n                C M2 M1 \\<Omega> V m (Suc k)", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc (Suc k))\n  \\<subseteq> append_set (C M2 M1 \\<Omega> V m (Suc k)) (inputs M2) -\n              C M2 M1 \\<Omega> V m (Suc k)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       C M2 M1 \\<Omega> V m (Suc n)\n       \\<subseteq> append_sets V\n                    (lists_of_length (inputs M2) n) \\<Longrightarrow>\n       C M2 M1 \\<Omega> V m (Suc (Suc n))\n       \\<subseteq> append_sets V (lists_of_length (inputs M2) (Suc n))", "then"], ["proof (chain)\npicking this:\n  C M2 M1 \\<Omega> V m (Suc (Suc k))\n  \\<subseteq> append_set (C M2 M1 \\<Omega> V m (Suc k)) (inputs M2) -\n              C M2 M1 \\<Omega> V m (Suc k)", "have \"?C (Suc (Suc k)) \\<subseteq> append_set (?C (Suc k)) (inputs M2)\""], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m (Suc (Suc k))\n  \\<subseteq> append_set (C M2 M1 \\<Omega> V m (Suc k)) (inputs M2) -\n              C M2 M1 \\<Omega> V m (Suc k)\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc (Suc k))\n    \\<subseteq> append_set (C M2 M1 \\<Omega> V m (Suc k)) (inputs M2)", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc (Suc k))\n  \\<subseteq> append_set (C M2 M1 \\<Omega> V m (Suc k)) (inputs M2)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       C M2 M1 \\<Omega> V m (Suc n)\n       \\<subseteq> append_sets V\n                    (lists_of_length (inputs M2) n) \\<Longrightarrow>\n       C M2 M1 \\<Omega> V m (Suc (Suc n))\n       \\<subseteq> append_sets V (lists_of_length (inputs M2) (Suc n))", "moreover"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc (Suc k))\n  \\<subseteq> append_set (C M2 M1 \\<Omega> V m (Suc k)) (inputs M2)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       C M2 M1 \\<Omega> V m (Suc n)\n       \\<subseteq> append_sets V\n                    (lists_of_length (inputs M2) n) \\<Longrightarrow>\n       C M2 M1 \\<Omega> V m (Suc (Suc n))\n       \\<subseteq> append_sets V (lists_of_length (inputs M2) (Suc n))", "have \"append_set (?C (Suc k)) (inputs M2) \n                  \\<subseteq> append_set (append_sets V (lists_of_length (inputs M2) k)) (inputs M2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. append_set (C M2 M1 \\<Omega> V m (Suc k)) (inputs M2)\n    \\<subseteq> append_set (append_sets V (lists_of_length (inputs M2) k))\n                 (inputs M2)", "using Suc.IH"], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m (Suc k)\n  \\<subseteq> append_sets V (lists_of_length (inputs M2) k)\n\ngoal (1 subgoal):\n 1. append_set (C M2 M1 \\<Omega> V m (Suc k)) (inputs M2)\n    \\<subseteq> append_set (append_sets V (lists_of_length (inputs M2) k))\n                 (inputs M2)", "by auto"], ["proof (state)\nthis:\n  append_set (C M2 M1 \\<Omega> V m (Suc k)) (inputs M2)\n  \\<subseteq> append_set (append_sets V (lists_of_length (inputs M2) k))\n               (inputs M2)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       C M2 M1 \\<Omega> V m (Suc n)\n       \\<subseteq> append_sets V\n                    (lists_of_length (inputs M2) n) \\<Longrightarrow>\n       C M2 M1 \\<Omega> V m (Suc (Suc n))\n       \\<subseteq> append_sets V (lists_of_length (inputs M2) (Suc n))", "ultimately"], ["proof (chain)\npicking this:\n  C M2 M1 \\<Omega> V m (Suc (Suc k))\n  \\<subseteq> append_set (C M2 M1 \\<Omega> V m (Suc k)) (inputs M2)\n  append_set (C M2 M1 \\<Omega> V m (Suc k)) (inputs M2)\n  \\<subseteq> append_set (append_sets V (lists_of_length (inputs M2) k))\n               (inputs M2)", "have I_Step : \n    \"?C (Suc (Suc k)) \\<subseteq> append_set (append_sets V (lists_of_length (inputs M2) k)) (inputs M2)\""], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m (Suc (Suc k))\n  \\<subseteq> append_set (C M2 M1 \\<Omega> V m (Suc k)) (inputs M2)\n  append_set (C M2 M1 \\<Omega> V m (Suc k)) (inputs M2)\n  \\<subseteq> append_set (append_sets V (lists_of_length (inputs M2) k))\n               (inputs M2)\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc (Suc k))\n    \\<subseteq> append_set (append_sets V (lists_of_length (inputs M2) k))\n                 (inputs M2)", "by (meson order_trans)"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc (Suc k))\n  \\<subseteq> append_set (append_sets V (lists_of_length (inputs M2) k))\n               (inputs M2)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       C M2 M1 \\<Omega> V m (Suc n)\n       \\<subseteq> append_sets V\n                    (lists_of_length (inputs M2) n) \\<Longrightarrow>\n       C M2 M1 \\<Omega> V m (Suc (Suc n))\n       \\<subseteq> append_sets V (lists_of_length (inputs M2) (Suc n))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc (Suc k))\n    \\<subseteq> append_sets V (lists_of_length (inputs M2) (Suc k))", "using append_lists_of_length_alt_def[symmetric, of V k \"inputs M2\"] I_Step"], ["proof (prove)\nusing this:\n  append_set (append_sets V (lists_of_length (inputs M2) k)) (inputs M2) =\n  append_sets V (lists_of_length (inputs M2) (Suc k))\n  C M2 M1 \\<Omega> V m (Suc (Suc k))\n  \\<subseteq> append_set (append_sets V (lists_of_length (inputs M2) k))\n               (inputs M2)\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc (Suc k))\n    \\<subseteq> append_sets V (lists_of_length (inputs M2) (Suc k))", "by presburger"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc (Suc k))\n  \\<subseteq> append_sets V (lists_of_length (inputs M2) (Suc k))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma TS_union : \nshows \"TS M2 M1 \\<Omega> V m i = (\\<Union> j \\<in> (set [0..<Suc i]) . C M2 M1 \\<Omega> V m j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m i =\n    \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i])", "proof (induction i)"], ["proof (state)\ngoal (2 subgoals):\n 1. TS M2 M1 \\<Omega> V m 0 =\n    \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc 0])\n 2. \\<And>i.\n       TS M2 M1 \\<Omega> V m i =\n       \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i]) \\<Longrightarrow>\n       TS M2 M1 \\<Omega> V m (Suc i) =\n       \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc (Suc i)])", "case 0"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. TS M2 M1 \\<Omega> V m 0 =\n    \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc 0])\n 2. \\<And>i.\n       TS M2 M1 \\<Omega> V m i =\n       \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i]) \\<Longrightarrow>\n       TS M2 M1 \\<Omega> V m (Suc i) =\n       \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc (Suc i)])", "then"], ["proof (chain)\npicking this:", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m 0 =\n    \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc 0])", "by auto"], ["proof (state)\nthis:\n  TS M2 M1 \\<Omega> V m 0 =\n  \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc 0])\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       TS M2 M1 \\<Omega> V m i =\n       \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i]) \\<Longrightarrow>\n       TS M2 M1 \\<Omega> V m (Suc i) =\n       \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc (Suc i)])", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       TS M2 M1 \\<Omega> V m i =\n       \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i]) \\<Longrightarrow>\n       TS M2 M1 \\<Omega> V m (Suc i) =\n       \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc (Suc i)])", "case (Suc i)"], ["proof (state)\nthis:\n  TS M2 M1 \\<Omega> V m i =\n  \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i])\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       TS M2 M1 \\<Omega> V m i =\n       \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i]) \\<Longrightarrow>\n       TS M2 M1 \\<Omega> V m (Suc i) =\n       \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc (Suc i)])", "let ?TS = \"\\<lambda> n . TS M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       TS M2 M1 \\<Omega> V m i =\n       \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i]) \\<Longrightarrow>\n       TS M2 M1 \\<Omega> V m (Suc i) =\n       \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc (Suc i)])", "let ?C = \"\\<lambda> n . C M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       TS M2 M1 \\<Omega> V m i =\n       \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i]) \\<Longrightarrow>\n       TS M2 M1 \\<Omega> V m (Suc i) =\n       \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc (Suc i)])", "let ?RM = \"\\<lambda> n . RM M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       TS M2 M1 \\<Omega> V m i =\n       \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i]) \\<Longrightarrow>\n       TS M2 M1 \\<Omega> V m (Suc i) =\n       \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc (Suc i)])", "have \"?TS (Suc i) = ?TS i \\<union> ?C (Suc i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc i) =\n    TS M2 M1 \\<Omega> V m i \\<union> C M2 M1 \\<Omega> V m (Suc i)", "by (metis (no_types) C.simps(2) TS.simps(1) TS.simps(2) TS.simps(3) not0_implies_Suc \n        sup_bot.right_neutral sup_commute)"], ["proof (state)\nthis:\n  TS M2 M1 \\<Omega> V m (Suc i) =\n  TS M2 M1 \\<Omega> V m i \\<union> C M2 M1 \\<Omega> V m (Suc i)\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       TS M2 M1 \\<Omega> V m i =\n       \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i]) \\<Longrightarrow>\n       TS M2 M1 \\<Omega> V m (Suc i) =\n       \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc (Suc i)])", "then"], ["proof (chain)\npicking this:\n  TS M2 M1 \\<Omega> V m (Suc i) =\n  TS M2 M1 \\<Omega> V m i \\<union> C M2 M1 \\<Omega> V m (Suc i)", "have \"?TS (Suc i) = (\\<Union> j \\<in> (set [0..<Suc i]) . ?C j) \\<union> ?C (Suc i)\""], ["proof (prove)\nusing this:\n  TS M2 M1 \\<Omega> V m (Suc i) =\n  TS M2 M1 \\<Omega> V m i \\<union> C M2 M1 \\<Omega> V m (Suc i)\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc i) =\n    \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i]) \\<union>\n    C M2 M1 \\<Omega> V m (Suc i)", "using Suc.IH"], ["proof (prove)\nusing this:\n  TS M2 M1 \\<Omega> V m (Suc i) =\n  TS M2 M1 \\<Omega> V m i \\<union> C M2 M1 \\<Omega> V m (Suc i)\n  TS M2 M1 \\<Omega> V m i =\n  \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i])\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc i) =\n    \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i]) \\<union>\n    C M2 M1 \\<Omega> V m (Suc i)", "by simp"], ["proof (state)\nthis:\n  TS M2 M1 \\<Omega> V m (Suc i) =\n  \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i]) \\<union>\n  C M2 M1 \\<Omega> V m (Suc i)\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       TS M2 M1 \\<Omega> V m i =\n       \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i]) \\<Longrightarrow>\n       TS M2 M1 \\<Omega> V m (Suc i) =\n       \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc (Suc i)])", "then"], ["proof (chain)\npicking this:\n  TS M2 M1 \\<Omega> V m (Suc i) =\n  \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i]) \\<union>\n  C M2 M1 \\<Omega> V m (Suc i)", "show ?case"], ["proof (prove)\nusing this:\n  TS M2 M1 \\<Omega> V m (Suc i) =\n  \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i]) \\<union>\n  C M2 M1 \\<Omega> V m (Suc i)\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc i) =\n    \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc (Suc i)])", "by auto"], ["proof (state)\nthis:\n  TS M2 M1 \\<Omega> V m (Suc i) =\n  \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc (Suc i)])\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma C_disj_le_gz : \n  assumes \"i \\<le> j\"\n  and    \"0 < i\"\nshows \"C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m (Suc j) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m (Suc j) = {}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m (Suc j) = {}", "let ?TS = \"\\<lambda> n . TS M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m (Suc j) = {}", "let ?C = \"\\<lambda> n . C M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m (Suc j) = {}", "let ?RM = \"\\<lambda> n . RM M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m (Suc j) = {}", "have \"Suc 0 < Suc j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Suc 0 < Suc j", "using assms(1-2)"], ["proof (prove)\nusing this:\n  i \\<le> j\n  0 < i\n\ngoal (1 subgoal):\n 1. Suc 0 < Suc j", "by auto"], ["proof (state)\nthis:\n  Suc 0 < Suc j\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m (Suc j) = {}", "then"], ["proof (chain)\npicking this:\n  Suc 0 < Suc j", "obtain k where \"Suc j = Suc (Suc k)\""], ["proof (prove)\nusing this:\n  Suc 0 < Suc j\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        Suc j = Suc (Suc k) \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using not0_implies_Suc"], ["proof (prove)\nusing this:\n  Suc 0 < Suc j\n  ?n \\<noteq> 0 \\<Longrightarrow> \\<exists>m. ?n = Suc m\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        Suc j = Suc (Suc k) \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  Suc j = Suc (Suc k)\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m (Suc j) = {}", "then"], ["proof (chain)\npicking this:\n  Suc j = Suc (Suc k)", "have \"?C (Suc j) = (append_set (?C j - ?RM j) (inputs M2))  - ?TS j\""], ["proof (prove)\nusing this:\n  Suc j = Suc (Suc k)\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc j) =\n    append_set (C M2 M1 \\<Omega> V m j - RM M2 M1 \\<Omega> V m j)\n     (inputs M2) -\n    TS M2 M1 \\<Omega> V m j", "using C.simps(3)"], ["proof (prove)\nusing this:\n  Suc j = Suc (Suc k)\n  C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc (Suc ?v)) =\n  append_set\n   (C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v) -\n    RM ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v))\n   (inputs ?M2.0) -\n  TS ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v)\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc j) =\n    append_set (C M2 M1 \\<Omega> V m j - RM M2 M1 \\<Omega> V m j)\n     (inputs M2) -\n    TS M2 M1 \\<Omega> V m j", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc j) =\n  append_set (C M2 M1 \\<Omega> V m j - RM M2 M1 \\<Omega> V m j)\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m (Suc j) = {}", "then"], ["proof (chain)\npicking this:\n  C M2 M1 \\<Omega> V m (Suc j) =\n  append_set (C M2 M1 \\<Omega> V m j - RM M2 M1 \\<Omega> V m j)\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m j", "have \"?C (Suc j) \\<inter> ?TS j = {}\""], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m (Suc j) =\n  append_set (C M2 M1 \\<Omega> V m j - RM M2 M1 \\<Omega> V m j)\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc j) \\<inter> TS M2 M1 \\<Omega> V m j = {}", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc j) \\<inter> TS M2 M1 \\<Omega> V m j = {}\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m (Suc j) = {}", "moreover"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc j) \\<inter> TS M2 M1 \\<Omega> V m j = {}\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m (Suc j) = {}", "have \"?C i \\<subseteq> ?TS j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m i \\<subseteq> TS M2 M1 \\<Omega> V m j", "using assms(1) TS_union[of M2 M1 \\<Omega> V m j]"], ["proof (prove)\nusing this:\n  i \\<le> j\n  TS M2 M1 \\<Omega> V m j =\n  \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc j])\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m i \\<subseteq> TS M2 M1 \\<Omega> V m j", "by fastforce"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m i \\<subseteq> TS M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m (Suc j) = {}", "ultimately"], ["proof (chain)\npicking this:\n  C M2 M1 \\<Omega> V m (Suc j) \\<inter> TS M2 M1 \\<Omega> V m j = {}\n  C M2 M1 \\<Omega> V m i \\<subseteq> TS M2 M1 \\<Omega> V m j", "show ?thesis"], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m (Suc j) \\<inter> TS M2 M1 \\<Omega> V m j = {}\n  C M2 M1 \\<Omega> V m i \\<subseteq> TS M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m (Suc j) = {}", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m (Suc j) = {}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma C_disj_lt : \n  assumes \"i < j\"\nshows \"C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m j = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m j = {}", "proof (cases i)"], ["proof (state)\ngoal (2 subgoals):\n 1. i = 0 \\<Longrightarrow>\n    C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m j = {}\n 2. \\<And>nat.\n       i = Suc nat \\<Longrightarrow>\n       C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m j = {}", "case 0"], ["proof (state)\nthis:\n  i = 0\n\ngoal (2 subgoals):\n 1. i = 0 \\<Longrightarrow>\n    C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m j = {}\n 2. \\<And>nat.\n       i = Suc nat \\<Longrightarrow>\n       C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m j = {}", "then"], ["proof (chain)\npicking this:\n  i = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  i = 0\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m j = {}", "by auto"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m j = {}\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       i = Suc nat \\<Longrightarrow>\n       C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m j = {}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>nat.\n       i = Suc nat \\<Longrightarrow>\n       C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m j = {}", "case (Suc k)"], ["proof (state)\nthis:\n  i = Suc k\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       i = Suc nat \\<Longrightarrow>\n       C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m j = {}", "then"], ["proof (chain)\npicking this:\n  i = Suc k", "show ?thesis"], ["proof (prove)\nusing this:\n  i = Suc k\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m j = {}", "using C_disj_le_gz"], ["proof (prove)\nusing this:\n  i = Suc k\n  \\<lbrakk>?i \\<le> ?j; 0 < ?i\\<rbrakk>\n  \\<Longrightarrow> C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i \\<inter>\n                    C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?j) =\n                    {}\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m j = {}", "by (metis assms gr_implies_not0 less_Suc_eq_le old.nat.exhaust zero_less_Suc)"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m j = {}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma C_disj :\n  assumes \"i \\<noteq> j\"\nshows \"C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m j = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m j = {}", "by (metis C_disj_lt Int_commute antisym_conv3 assms)"], ["", "lemma RM_subset : \"RM M2 M1 \\<Omega> V m i \\<subseteq> C M2 M1 \\<Omega> V m i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. RM M2 M1 \\<Omega> V m i \\<subseteq> C M2 M1 \\<Omega> V m i", "proof (cases i)"], ["proof (state)\ngoal (2 subgoals):\n 1. i = 0 \\<Longrightarrow>\n    RM M2 M1 \\<Omega> V m i \\<subseteq> C M2 M1 \\<Omega> V m i\n 2. \\<And>nat.\n       i = Suc nat \\<Longrightarrow>\n       RM M2 M1 \\<Omega> V m i \\<subseteq> C M2 M1 \\<Omega> V m i", "case 0"], ["proof (state)\nthis:\n  i = 0\n\ngoal (2 subgoals):\n 1. i = 0 \\<Longrightarrow>\n    RM M2 M1 \\<Omega> V m i \\<subseteq> C M2 M1 \\<Omega> V m i\n 2. \\<And>nat.\n       i = Suc nat \\<Longrightarrow>\n       RM M2 M1 \\<Omega> V m i \\<subseteq> C M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  i = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  i = 0\n\ngoal (1 subgoal):\n 1. RM M2 M1 \\<Omega> V m i \\<subseteq> C M2 M1 \\<Omega> V m i", "by auto"], ["proof (state)\nthis:\n  RM M2 M1 \\<Omega> V m i \\<subseteq> C M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       i = Suc nat \\<Longrightarrow>\n       RM M2 M1 \\<Omega> V m i \\<subseteq> C M2 M1 \\<Omega> V m i", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>nat.\n       i = Suc nat \\<Longrightarrow>\n       RM M2 M1 \\<Omega> V m i \\<subseteq> C M2 M1 \\<Omega> V m i", "case (Suc n)"], ["proof (state)\nthis:\n  i = Suc n\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       i = Suc nat \\<Longrightarrow>\n       RM M2 M1 \\<Omega> V m i \\<subseteq> C M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  i = Suc n", "show ?thesis"], ["proof (prove)\nusing this:\n  i = Suc n\n\ngoal (1 subgoal):\n 1. RM M2 M1 \\<Omega> V m i \\<subseteq> C M2 M1 \\<Omega> V m i", "using RM.simps(2)"], ["proof (prove)\nusing this:\n  i = Suc n\n  RM ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?n) =\n  {xs' \\<in> C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?n).\n   \\<not> ?M1.0 \\<preceq>\\<lbrakk>{xs'}\\<rbrakk> ?M2.0 \\<or>\n   (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n ?M1.0 {xs'}.\n       \\<exists>V''\\<in>N io ?M1.0 ?V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes ?M2.0 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP ?M2.0 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP ?M2.0 s2 vs xs V''.\n                           B ?M1.0 io1 ?\\<Omega> \\<noteq>\n                           B ?M1.0 io2 ?\\<Omega>)) \\<and>\n             ?m < LB ?M2.0 ?M1.0 vs xs\n                   (TS ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?n \\<union> ?V) S1\n                   ?\\<Omega> V'')}\n\ngoal (1 subgoal):\n 1. RM M2 M1 \\<Omega> V m i \\<subseteq> C M2 M1 \\<Omega> V m i", "by blast"], ["proof (state)\nthis:\n  RM M2 M1 \\<Omega> V m i \\<subseteq> C M2 M1 \\<Omega> V m i\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma RM_disj : \n  assumes \"i \\<le> j\"\n  and    \"0 < i\"\nshows \"RM M2 M1 \\<Omega> V m i \\<inter> RM M2 M1 \\<Omega> V m (Suc j) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. RM M2 M1 \\<Omega> V m i \\<inter> RM M2 M1 \\<Omega> V m (Suc j) = {}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. RM M2 M1 \\<Omega> V m i \\<inter> RM M2 M1 \\<Omega> V m (Suc j) = {}", "let ?TS = \"\\<lambda> n . TS M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. RM M2 M1 \\<Omega> V m i \\<inter> RM M2 M1 \\<Omega> V m (Suc j) = {}", "let ?C = \"\\<lambda> n . C M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. RM M2 M1 \\<Omega> V m i \\<inter> RM M2 M1 \\<Omega> V m (Suc j) = {}", "let ?RM = \"\\<lambda> n . RM M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. RM M2 M1 \\<Omega> V m i \\<inter> RM M2 M1 \\<Omega> V m (Suc j) = {}", "have \"?RM i \\<subseteq> ?C i\" \"?RM (Suc j) \\<subseteq> ?C (Suc j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. RM M2 M1 \\<Omega> V m i \\<subseteq> C M2 M1 \\<Omega> V m i &&&\n    RM M2 M1 \\<Omega> V m (Suc j) \\<subseteq> C M2 M1 \\<Omega> V m (Suc j)", "using RM_subset"], ["proof (prove)\nusing this:\n  RM ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i\n  \\<subseteq> C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i\n\ngoal (1 subgoal):\n 1. RM M2 M1 \\<Omega> V m i \\<subseteq> C M2 M1 \\<Omega> V m i &&&\n    RM M2 M1 \\<Omega> V m (Suc j) \\<subseteq> C M2 M1 \\<Omega> V m (Suc j)", "by blast+"], ["proof (state)\nthis:\n  RM M2 M1 \\<Omega> V m i \\<subseteq> C M2 M1 \\<Omega> V m i\n  RM M2 M1 \\<Omega> V m (Suc j) \\<subseteq> C M2 M1 \\<Omega> V m (Suc j)\n\ngoal (1 subgoal):\n 1. RM M2 M1 \\<Omega> V m i \\<inter> RM M2 M1 \\<Omega> V m (Suc j) = {}", "moreover"], ["proof (state)\nthis:\n  RM M2 M1 \\<Omega> V m i \\<subseteq> C M2 M1 \\<Omega> V m i\n  RM M2 M1 \\<Omega> V m (Suc j) \\<subseteq> C M2 M1 \\<Omega> V m (Suc j)\n\ngoal (1 subgoal):\n 1. RM M2 M1 \\<Omega> V m i \\<inter> RM M2 M1 \\<Omega> V m (Suc j) = {}", "have \"?C i \\<inter> ?C (Suc j) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m (Suc j) = {}", "using C_disj_le_gz[OF assms]"], ["proof (prove)\nusing this:\n  C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m i \\<inter>\n  C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc j) =\n  {}\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m (Suc j) = {}", "by assumption"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m (Suc j) = {}\n\ngoal (1 subgoal):\n 1. RM M2 M1 \\<Omega> V m i \\<inter> RM M2 M1 \\<Omega> V m (Suc j) = {}", "ultimately"], ["proof (chain)\npicking this:\n  RM M2 M1 \\<Omega> V m i \\<subseteq> C M2 M1 \\<Omega> V m i\n  RM M2 M1 \\<Omega> V m (Suc j) \\<subseteq> C M2 M1 \\<Omega> V m (Suc j)\n  C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m (Suc j) = {}", "show ?thesis"], ["proof (prove)\nusing this:\n  RM M2 M1 \\<Omega> V m i \\<subseteq> C M2 M1 \\<Omega> V m i\n  RM M2 M1 \\<Omega> V m (Suc j) \\<subseteq> C M2 M1 \\<Omega> V m (Suc j)\n  C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m (Suc j) = {}\n\ngoal (1 subgoal):\n 1. RM M2 M1 \\<Omega> V m i \\<inter> RM M2 M1 \\<Omega> V m (Suc j) = {}", "by blast"], ["proof (state)\nthis:\n  RM M2 M1 \\<Omega> V m i \\<inter> RM M2 M1 \\<Omega> V m (Suc j) = {}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma T_extension : \n  assumes \"n > 0\"\n  shows \"TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n \n          \\<subseteq> (append_set (TS M2 M1 \\<Omega> V m n) (inputs M2)) - TS M2 M1 \\<Omega> V m n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n\n    \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2) -\n                TS M2 M1 \\<Omega> V m n", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n\n    \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2) -\n                TS M2 M1 \\<Omega> V m n", "let ?TS = \"\\<lambda> n . TS M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n\n    \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2) -\n                TS M2 M1 \\<Omega> V m n", "let ?C = \"\\<lambda> n . C M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n\n    \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2) -\n                TS M2 M1 \\<Omega> V m n", "let ?RM = \"\\<lambda> n . RM M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n\n    \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2) -\n                TS M2 M1 \\<Omega> V m n", "obtain k where n_def[simp] : \"n = Suc k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>k. n = Suc k \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using assms not0_implies_Suc"], ["proof (prove)\nusing this:\n  0 < n\n  ?n \\<noteq> 0 \\<Longrightarrow> \\<exists>m. ?n = Suc m\n\ngoal (1 subgoal):\n 1. (\\<And>k. n = Suc k \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by blast"], ["proof (state)\nthis:\n  n = Suc k\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n\n    \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2) -\n                TS M2 M1 \\<Omega> V m n", "have \"?C (Suc n) = (append_set (?C n - ?RM n) (inputs M2)) - ?TS n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n) =\n    append_set (C M2 M1 \\<Omega> V m n - RM M2 M1 \\<Omega> V m n)\n     (inputs M2) -\n    TS M2 M1 \\<Omega> V m n", "using n_def"], ["proof (prove)\nusing this:\n  n = Suc k\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n) =\n    append_set (C M2 M1 \\<Omega> V m n - RM M2 M1 \\<Omega> V m n)\n     (inputs M2) -\n    TS M2 M1 \\<Omega> V m n", "using C.simps(3)"], ["proof (prove)\nusing this:\n  n = Suc k\n  C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc (Suc ?v)) =\n  append_set\n   (C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v) -\n    RM ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v))\n   (inputs ?M2.0) -\n  TS ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v)\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n) =\n    append_set (C M2 M1 \\<Omega> V m n - RM M2 M1 \\<Omega> V m n)\n     (inputs M2) -\n    TS M2 M1 \\<Omega> V m n", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc n) =\n  append_set (C M2 M1 \\<Omega> V m n - RM M2 M1 \\<Omega> V m n)\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m n\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n\n    \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2) -\n                TS M2 M1 \\<Omega> V m n", "then"], ["proof (chain)\npicking this:\n  C M2 M1 \\<Omega> V m (Suc n) =\n  append_set (C M2 M1 \\<Omega> V m n - RM M2 M1 \\<Omega> V m n)\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m n", "have \"?C (Suc n) \\<subseteq> append_set (?C n) (inputs M2) - ?TS n\""], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m (Suc n) =\n  append_set (C M2 M1 \\<Omega> V m n - RM M2 M1 \\<Omega> V m n)\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m n\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n)\n    \\<subseteq> append_set (C M2 M1 \\<Omega> V m n) (inputs M2) -\n                TS M2 M1 \\<Omega> V m n", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc n)\n  \\<subseteq> append_set (C M2 M1 \\<Omega> V m n) (inputs M2) -\n              TS M2 M1 \\<Omega> V m n\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n\n    \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2) -\n                TS M2 M1 \\<Omega> V m n", "moreover"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc n)\n  \\<subseteq> append_set (C M2 M1 \\<Omega> V m n) (inputs M2) -\n              TS M2 M1 \\<Omega> V m n\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n\n    \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2) -\n                TS M2 M1 \\<Omega> V m n", "have \"?C n \\<subseteq> ?TS n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m n \\<subseteq> TS M2 M1 \\<Omega> V m n", "using TS_union[of M2 M1 \\<Omega> V m n]"], ["proof (prove)\nusing this:\n  TS M2 M1 \\<Omega> V m n =\n  \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc n])\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m n \\<subseteq> TS M2 M1 \\<Omega> V m n", "by fastforce"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m n \\<subseteq> TS M2 M1 \\<Omega> V m n\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n\n    \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2) -\n                TS M2 M1 \\<Omega> V m n", "ultimately"], ["proof (chain)\npicking this:\n  C M2 M1 \\<Omega> V m (Suc n)\n  \\<subseteq> append_set (C M2 M1 \\<Omega> V m n) (inputs M2) -\n              TS M2 M1 \\<Omega> V m n\n  C M2 M1 \\<Omega> V m n \\<subseteq> TS M2 M1 \\<Omega> V m n", "have \"?C (Suc n) \\<subseteq> append_set (?TS n) (inputs M2) - ?TS n\""], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m (Suc n)\n  \\<subseteq> append_set (C M2 M1 \\<Omega> V m n) (inputs M2) -\n              TS M2 M1 \\<Omega> V m n\n  C M2 M1 \\<Omega> V m n \\<subseteq> TS M2 M1 \\<Omega> V m n\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n)\n    \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2) -\n                TS M2 M1 \\<Omega> V m n", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc n)\n  \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2) -\n              TS M2 M1 \\<Omega> V m n\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n\n    \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2) -\n                TS M2 M1 \\<Omega> V m n", "moreover"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc n)\n  \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2) -\n              TS M2 M1 \\<Omega> V m n\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n\n    \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2) -\n                TS M2 M1 \\<Omega> V m n", "have \"?TS (Suc n) - ?TS n \\<subseteq> ?C (Suc n) \""], ["proof (prove)\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n\n    \\<subseteq> C M2 M1 \\<Omega> V m (Suc n)", "using TS.simps(3)[of M2 M1 \\<Omega> V m k]"], ["proof (prove)\nusing this:\n  TS M2 M1 \\<Omega> V m (Suc (Suc k)) =\n  TS M2 M1 \\<Omega> V m (Suc k) \\<union> C M2 M1 \\<Omega> V m (Suc (Suc k))\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n\n    \\<subseteq> C M2 M1 \\<Omega> V m (Suc n)", "using n_def"], ["proof (prove)\nusing this:\n  TS M2 M1 \\<Omega> V m (Suc (Suc k)) =\n  TS M2 M1 \\<Omega> V m (Suc k) \\<union> C M2 M1 \\<Omega> V m (Suc (Suc k))\n  n = Suc k\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n\n    \\<subseteq> C M2 M1 \\<Omega> V m (Suc n)", "by blast"], ["proof (state)\nthis:\n  TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n\n  \\<subseteq> C M2 M1 \\<Omega> V m (Suc n)\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n\n    \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2) -\n                TS M2 M1 \\<Omega> V m n", "ultimately"], ["proof (chain)\npicking this:\n  C M2 M1 \\<Omega> V m (Suc n)\n  \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2) -\n              TS M2 M1 \\<Omega> V m n\n  TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n\n  \\<subseteq> C M2 M1 \\<Omega> V m (Suc n)", "show ?thesis"], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m (Suc n)\n  \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2) -\n              TS M2 M1 \\<Omega> V m n\n  TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n\n  \\<subseteq> C M2 M1 \\<Omega> V m (Suc n)\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n\n    \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2) -\n                TS M2 M1 \\<Omega> V m n", "by blast"], ["proof (state)\nthis:\n  TS M2 M1 \\<Omega> V m (Suc n) - TS M2 M1 \\<Omega> V m n\n  \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2) -\n              TS M2 M1 \\<Omega> V m n\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma append_set_prefix :\n  assumes \"xs \\<in> append_set T X\"\n  shows \"butlast xs \\<in> T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. butlast xs \\<in> T", "using assms"], ["proof (prove)\nusing this:\n  xs \\<in> append_set T X\n\ngoal (1 subgoal):\n 1. butlast xs \\<in> T", "by auto"], ["", "lemma C_subset : \"C M2 M1 \\<Omega> V m i \\<subseteq> TS M2 M1 \\<Omega> V m i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m i \\<subseteq> TS M2 M1 \\<Omega> V m i", "by (simp add: TS_union)"], ["", "lemma TS_subset :\n  assumes \"i \\<le> j\"\n  shows \"TS M2 M1 \\<Omega> V m i \\<subseteq> TS M2 M1 \\<Omega> V m j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m i \\<subseteq> TS M2 M1 \\<Omega> V m j", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m i \\<subseteq> TS M2 M1 \\<Omega> V m j", "have \"TS M2 M1 \\<Omega> V m i = (\\<Union> k \\<in> (set [0..<Suc i]) . C M2 M1 \\<Omega> V m k)\" \n       \"TS M2 M1 \\<Omega> V m j = (\\<Union> k \\<in> (set [0..<Suc j]) . C M2 M1 \\<Omega> V m k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m i =\n    \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i]) &&&\n    TS M2 M1 \\<Omega> V m j =\n    \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc j])", "using TS_union"], ["proof (prove)\nusing this:\n  TS ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i =\n  \\<Union> (C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ` set [0..<Suc ?i])\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m i =\n    \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i]) &&&\n    TS M2 M1 \\<Omega> V m j =\n    \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc j])", "by assumption+"], ["proof (state)\nthis:\n  TS M2 M1 \\<Omega> V m i =\n  \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i])\n  TS M2 M1 \\<Omega> V m j =\n  \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc j])\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m i \\<subseteq> TS M2 M1 \\<Omega> V m j", "moreover"], ["proof (state)\nthis:\n  TS M2 M1 \\<Omega> V m i =\n  \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i])\n  TS M2 M1 \\<Omega> V m j =\n  \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc j])\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m i \\<subseteq> TS M2 M1 \\<Omega> V m j", "have \"set [0..<Suc i] \\<subseteq> set [0..<Suc j]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set [0..<Suc i] \\<subseteq> set [0..<Suc j]", "using assms"], ["proof (prove)\nusing this:\n  i \\<le> j\n\ngoal (1 subgoal):\n 1. set [0..<Suc i] \\<subseteq> set [0..<Suc j]", "by auto"], ["proof (state)\nthis:\n  set [0..<Suc i] \\<subseteq> set [0..<Suc j]\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m i \\<subseteq> TS M2 M1 \\<Omega> V m j", "ultimately"], ["proof (chain)\npicking this:\n  TS M2 M1 \\<Omega> V m i =\n  \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i])\n  TS M2 M1 \\<Omega> V m j =\n  \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc j])\n  set [0..<Suc i] \\<subseteq> set [0..<Suc j]", "show ?thesis"], ["proof (prove)\nusing this:\n  TS M2 M1 \\<Omega> V m i =\n  \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i])\n  TS M2 M1 \\<Omega> V m j =\n  \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc j])\n  set [0..<Suc i] \\<subseteq> set [0..<Suc j]\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m i \\<subseteq> TS M2 M1 \\<Omega> V m j", "by blast"], ["proof (state)\nthis:\n  TS M2 M1 \\<Omega> V m i \\<subseteq> TS M2 M1 \\<Omega> V m j\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma C_immediate_prefix_containment :\n  assumes \"vs@xs \\<in> C M2 M1 \\<Omega> V m (Suc (Suc i))\"\n  and     \"xs \\<noteq> []\"\nshows \"vs@(butlast xs) \\<in> C M2 M1 \\<Omega> V m (Suc i) - RM M2 M1 \\<Omega> V m (Suc i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ butlast xs\n    \\<in> C M2 M1 \\<Omega> V m (Suc i) - RM M2 M1 \\<Omega> V m (Suc i)", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ butlast xs\n    \\<notin> C M2 M1 \\<Omega> V m (Suc i) -\n             RM M2 M1 \\<Omega> V m (Suc i) \\<Longrightarrow>\n    False", "let ?TS = \"\\<lambda> n . TS M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ butlast xs\n    \\<notin> C M2 M1 \\<Omega> V m (Suc i) -\n             RM M2 M1 \\<Omega> V m (Suc i) \\<Longrightarrow>\n    False", "let ?C = \"\\<lambda> n . C M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ butlast xs\n    \\<notin> C M2 M1 \\<Omega> V m (Suc i) -\n             RM M2 M1 \\<Omega> V m (Suc i) \\<Longrightarrow>\n    False", "let ?RM = \"\\<lambda> n . RM M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ butlast xs\n    \\<notin> C M2 M1 \\<Omega> V m (Suc i) -\n             RM M2 M1 \\<Omega> V m (Suc i) \\<Longrightarrow>\n    False", "assume \"vs @ butlast xs \\<notin> C M2 M1 \\<Omega> V m (Suc i) - RM M2 M1 \\<Omega> V m (Suc i)\""], ["proof (state)\nthis:\n  vs @ butlast xs\n  \\<notin> C M2 M1 \\<Omega> V m (Suc i) - RM M2 M1 \\<Omega> V m (Suc i)\n\ngoal (1 subgoal):\n 1. vs @ butlast xs\n    \\<notin> C M2 M1 \\<Omega> V m (Suc i) -\n             RM M2 M1 \\<Omega> V m (Suc i) \\<Longrightarrow>\n    False", "have \"?C (Suc (Suc i)) \\<subseteq> append_set (?C (Suc i) - ?RM (Suc i)) (inputs M2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc (Suc i))\n    \\<subseteq> append_set\n                 (C M2 M1 \\<Omega> V m (Suc i) -\n                  RM M2 M1 \\<Omega> V m (Suc i))\n                 (inputs M2)", "using C.simps(3)"], ["proof (prove)\nusing this:\n  C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc (Suc ?v)) =\n  append_set\n   (C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v) -\n    RM ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v))\n   (inputs ?M2.0) -\n  TS ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v)\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc (Suc i))\n    \\<subseteq> append_set\n                 (C M2 M1 \\<Omega> V m (Suc i) -\n                  RM M2 M1 \\<Omega> V m (Suc i))\n                 (inputs M2)", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc (Suc i))\n  \\<subseteq> append_set\n               (C M2 M1 \\<Omega> V m (Suc i) -\n                RM M2 M1 \\<Omega> V m (Suc i))\n               (inputs M2)\n\ngoal (1 subgoal):\n 1. vs @ butlast xs\n    \\<notin> C M2 M1 \\<Omega> V m (Suc i) -\n             RM M2 M1 \\<Omega> V m (Suc i) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  C M2 M1 \\<Omega> V m (Suc (Suc i))\n  \\<subseteq> append_set\n               (C M2 M1 \\<Omega> V m (Suc i) -\n                RM M2 M1 \\<Omega> V m (Suc i))\n               (inputs M2)", "have \"?C (Suc (Suc i)) \\<subseteq> append_set (?C (Suc i) - ?RM (Suc i)) UNIV\""], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m (Suc (Suc i))\n  \\<subseteq> append_set\n               (C M2 M1 \\<Omega> V m (Suc i) -\n                RM M2 M1 \\<Omega> V m (Suc i))\n               (inputs M2)\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc (Suc i))\n    \\<subseteq> append_set\n                 (C M2 M1 \\<Omega> V m (Suc i) -\n                  RM M2 M1 \\<Omega> V m (Suc i))\n                 UNIV", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc (Suc i))\n  \\<subseteq> append_set\n               (C M2 M1 \\<Omega> V m (Suc i) -\n                RM M2 M1 \\<Omega> V m (Suc i))\n               UNIV\n\ngoal (1 subgoal):\n 1. vs @ butlast xs\n    \\<notin> C M2 M1 \\<Omega> V m (Suc i) -\n             RM M2 M1 \\<Omega> V m (Suc i) \\<Longrightarrow>\n    False", "moreover"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc (Suc i))\n  \\<subseteq> append_set\n               (C M2 M1 \\<Omega> V m (Suc i) -\n                RM M2 M1 \\<Omega> V m (Suc i))\n               UNIV\n\ngoal (1 subgoal):\n 1. vs @ butlast xs\n    \\<notin> C M2 M1 \\<Omega> V m (Suc i) -\n             RM M2 M1 \\<Omega> V m (Suc i) \\<Longrightarrow>\n    False", "have \"vs @ xs \\<notin> append_set (?C (Suc i) - ?RM (Suc i)) UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xs\n    \\<notin> append_set\n              (C M2 M1 \\<Omega> V m (Suc i) - RM M2 M1 \\<Omega> V m (Suc i))\n              UNIV", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ xs\n    \\<notin> append_set\n              (C M2 M1 \\<Omega> V m (Suc i) - RM M2 M1 \\<Omega> V m (Suc i))\n              UNIV", "have \"\\<forall>as a. vs @ xs \\<noteq> as @ [a] \n                  \\<or> as \\<notin> C M2 M1 \\<Omega> V m (Suc i) - RM M2 M1 \\<Omega> V m (Suc i) \n                  \\<or> a \\<notin> UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>as a.\n       vs @ xs \\<noteq> as @ [a] \\<or>\n       as \\<notin> C M2 M1 \\<Omega> V m (Suc i) -\n                   RM M2 M1 \\<Omega> V m (Suc i) \\<or>\n       a \\<notin> UNIV", "by (metis \\<open>vs @ butlast xs \\<notin> C M2 M1 \\<Omega> V m (Suc i) - RM M2 M1 \\<Omega> V m (Suc i)\\<close> \n          assms(2) butlast_append butlast_snoc)"], ["proof (state)\nthis:\n  \\<forall>as a.\n     vs @ xs \\<noteq> as @ [a] \\<or>\n     as \\<notin> C M2 M1 \\<Omega> V m (Suc i) -\n                 RM M2 M1 \\<Omega> V m (Suc i) \\<or>\n     a \\<notin> UNIV\n\ngoal (1 subgoal):\n 1. vs @ xs\n    \\<notin> append_set\n              (C M2 M1 \\<Omega> V m (Suc i) - RM M2 M1 \\<Omega> V m (Suc i))\n              UNIV", "then"], ["proof (chain)\npicking this:\n  \\<forall>as a.\n     vs @ xs \\<noteq> as @ [a] \\<or>\n     as \\<notin> C M2 M1 \\<Omega> V m (Suc i) -\n                 RM M2 M1 \\<Omega> V m (Suc i) \\<or>\n     a \\<notin> UNIV", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>as a.\n     vs @ xs \\<noteq> as @ [a] \\<or>\n     as \\<notin> C M2 M1 \\<Omega> V m (Suc i) -\n                 RM M2 M1 \\<Omega> V m (Suc i) \\<or>\n     a \\<notin> UNIV\n\ngoal (1 subgoal):\n 1. vs @ xs\n    \\<notin> append_set\n              (C M2 M1 \\<Omega> V m (Suc i) - RM M2 M1 \\<Omega> V m (Suc i))\n              UNIV", "by blast"], ["proof (state)\nthis:\n  vs @ xs\n  \\<notin> append_set\n            (C M2 M1 \\<Omega> V m (Suc i) - RM M2 M1 \\<Omega> V m (Suc i))\n            UNIV\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  vs @ xs\n  \\<notin> append_set\n            (C M2 M1 \\<Omega> V m (Suc i) - RM M2 M1 \\<Omega> V m (Suc i))\n            UNIV\n\ngoal (1 subgoal):\n 1. vs @ butlast xs\n    \\<notin> C M2 M1 \\<Omega> V m (Suc i) -\n             RM M2 M1 \\<Omega> V m (Suc i) \\<Longrightarrow>\n    False", "ultimately"], ["proof (chain)\npicking this:\n  C M2 M1 \\<Omega> V m (Suc (Suc i))\n  \\<subseteq> append_set\n               (C M2 M1 \\<Omega> V m (Suc i) -\n                RM M2 M1 \\<Omega> V m (Suc i))\n               UNIV\n  vs @ xs\n  \\<notin> append_set\n            (C M2 M1 \\<Omega> V m (Suc i) - RM M2 M1 \\<Omega> V m (Suc i))\n            UNIV", "have \"vs @ xs \\<notin> ?C (Suc (Suc i))\""], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m (Suc (Suc i))\n  \\<subseteq> append_set\n               (C M2 M1 \\<Omega> V m (Suc i) -\n                RM M2 M1 \\<Omega> V m (Suc i))\n               UNIV\n  vs @ xs\n  \\<notin> append_set\n            (C M2 M1 \\<Omega> V m (Suc i) - RM M2 M1 \\<Omega> V m (Suc i))\n            UNIV\n\ngoal (1 subgoal):\n 1. vs @ xs \\<notin> C M2 M1 \\<Omega> V m (Suc (Suc i))", "by blast"], ["proof (state)\nthis:\n  vs @ xs \\<notin> C M2 M1 \\<Omega> V m (Suc (Suc i))\n\ngoal (1 subgoal):\n 1. vs @ butlast xs\n    \\<notin> C M2 M1 \\<Omega> V m (Suc i) -\n             RM M2 M1 \\<Omega> V m (Suc i) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  vs @ xs \\<notin> C M2 M1 \\<Omega> V m (Suc (Suc i))", "show \"False\""], ["proof (prove)\nusing this:\n  vs @ xs \\<notin> C M2 M1 \\<Omega> V m (Suc (Suc i))\n\ngoal (1 subgoal):\n 1. False", "using assms(1)"], ["proof (prove)\nusing this:\n  vs @ xs \\<notin> C M2 M1 \\<Omega> V m (Suc (Suc i))\n  vs @ xs \\<in> C M2 M1 \\<Omega> V m (Suc (Suc i))\n\ngoal (1 subgoal):\n 1. False", "by blast"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma TS_immediate_prefix_containment :\n  assumes \"vs@xs \\<in> TS M2 M1 \\<Omega> V m i\"\n  and     \"mcp (vs@xs) V vs\"\n  and     \"0 < i\"\nshows \"vs@(butlast xs) \\<in> TS M2 M1 \\<Omega> V m i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "let ?TS = \"\\<lambda> n . TS M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "let ?C = \"\\<lambda> n . C M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "let ?RM = \"\\<lambda> n . RM M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "obtain j where j_def : \"j \\<le> i \\<and> vs@xs \\<in> ?C j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>j.\n        j \\<le> i \\<and>\n        vs @ xs \\<in> C M2 M1 \\<Omega> V m j \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using assms(1)  TS_union[where i=i]"], ["proof (prove)\nusing this:\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\n  TS ?M2.0 ?M1.0 ?\\<Omega> ?V ?m i =\n  \\<Union> (C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ` set [0..<Suc i])\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        j \\<le> i \\<and>\n        vs @ xs \\<in> C M2 M1 \\<Omega> V m j \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>j.\n                j \\<le> i \\<and>\n                vs @ xs \\<in> C M2 M1 \\<Omega> V m j \\<Longrightarrow>\n                thesis;\n     vs @ xs \\<in> TS M2 M1 \\<Omega> V m i;\n     \\<And>M2 M1 \\<Omega> V m.\n        TS M2 M1 \\<Omega> V m i =\n        \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i])\\<rbrakk>\n    \\<Longrightarrow> thesis", "assume a1: \"\\<And>j. j \\<le> i \\<and> vs @ xs \\<in> C M2 M1 \\<Omega> V m j \\<Longrightarrow> thesis\""], ["proof (state)\nthis:\n  ?j \\<le> i \\<and> vs @ xs \\<in> C M2 M1 \\<Omega> V m ?j \\<Longrightarrow>\n  thesis\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>j.\n                j \\<le> i \\<and>\n                vs @ xs \\<in> C M2 M1 \\<Omega> V m j \\<Longrightarrow>\n                thesis;\n     vs @ xs \\<in> TS M2 M1 \\<Omega> V m i;\n     \\<And>M2 M1 \\<Omega> V m.\n        TS M2 M1 \\<Omega> V m i =\n        \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i])\\<rbrakk>\n    \\<Longrightarrow> thesis", "obtain nn :: \"nat set \\<Rightarrow> (nat \\<Rightarrow> 'a list set) \\<Rightarrow> 'a list \\<Rightarrow> nat\" where\n      f2: \"\\<forall>x0 x1 x2. (\\<exists>v3. v3 \\<in> x0 \\<and> x2 \\<in> x1 v3) = (nn x0 x1 x2 \\<in> x0 \\<and> x2 \\<in> x1 (nn x0 x1 x2))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>nn.\n        \\<forall>x0 x1 x2.\n           (\\<exists>v3. v3 \\<in> x0 \\<and> x2 \\<in> x1 v3) =\n           (nn x0 x1 x2 \\<in> x0 \\<and>\n            x2 \\<in> x1 (nn x0 x1 x2)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by moura"], ["proof (state)\nthis:\n  \\<forall>x0 x1 x2.\n     (\\<exists>v3. v3 \\<in> x0 \\<and> x2 \\<in> x1 v3) =\n     (nn x0 x1 x2 \\<in> x0 \\<and> x2 \\<in> x1 (nn x0 x1 x2))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>j.\n                j \\<le> i \\<and>\n                vs @ xs \\<in> C M2 M1 \\<Omega> V m j \\<Longrightarrow>\n                thesis;\n     vs @ xs \\<in> TS M2 M1 \\<Omega> V m i;\n     \\<And>M2 M1 \\<Omega> V m.\n        TS M2 M1 \\<Omega> V m i =\n        \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i])\\<rbrakk>\n    \\<Longrightarrow> thesis", "have \"vs @ xs \\<in> UNION (set [0..<Suc i]) (C M2 M1 \\<Omega> V m)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xs \\<in> \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i])", "by (metis \\<open>\\<And>\\<Omega> V T S M2 M1. TS M2 M1 \\<Omega> V m i = (\\<Union>j\\<in>set [0..<Suc i]. C M2 M1 \\<Omega> V m j)\\<close> \n          \\<open>vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\\<close>)"], ["proof (state)\nthis:\n  vs @ xs \\<in> \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i])\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>j.\n                j \\<le> i \\<and>\n                vs @ xs \\<in> C M2 M1 \\<Omega> V m j \\<Longrightarrow>\n                thesis;\n     vs @ xs \\<in> TS M2 M1 \\<Omega> V m i;\n     \\<And>M2 M1 \\<Omega> V m.\n        TS M2 M1 \\<Omega> V m i =\n        \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i])\\<rbrakk>\n    \\<Longrightarrow> thesis", "then"], ["proof (chain)\npicking this:\n  vs @ xs \\<in> \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i])", "have \"nn (set [0..<Suc i]) (C M2 M1 \\<Omega> V m) (vs @ xs) \\<in> set [0..<Suc i] \n                  \\<and> vs @ xs \\<in> C M2 M1 \\<Omega> V m (nn (set [0..<Suc i]) (C M2 M1 \\<Omega> V m) (vs @ xs))\""], ["proof (prove)\nusing this:\n  vs @ xs \\<in> \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i])\n\ngoal (1 subgoal):\n 1. nn (set [0..<Suc i]) (C M2 M1 \\<Omega> V m) (vs @ xs)\n    \\<in> set [0..<Suc i] \\<and>\n    vs @ xs\n    \\<in> C M2 M1 \\<Omega> V m\n           (nn (set [0..<Suc i]) (C M2 M1 \\<Omega> V m) (vs @ xs))", "using f2"], ["proof (prove)\nusing this:\n  vs @ xs \\<in> \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i])\n  \\<forall>x0 x1 x2.\n     (\\<exists>v3. v3 \\<in> x0 \\<and> x2 \\<in> x1 v3) =\n     (nn x0 x1 x2 \\<in> x0 \\<and> x2 \\<in> x1 (nn x0 x1 x2))\n\ngoal (1 subgoal):\n 1. nn (set [0..<Suc i]) (C M2 M1 \\<Omega> V m) (vs @ xs)\n    \\<in> set [0..<Suc i] \\<and>\n    vs @ xs\n    \\<in> C M2 M1 \\<Omega> V m\n           (nn (set [0..<Suc i]) (C M2 M1 \\<Omega> V m) (vs @ xs))", "by blast"], ["proof (state)\nthis:\n  nn (set [0..<Suc i]) (C M2 M1 \\<Omega> V m) (vs @ xs)\n  \\<in> set [0..<Suc i] \\<and>\n  vs @ xs\n  \\<in> C M2 M1 \\<Omega> V m\n         (nn (set [0..<Suc i]) (C M2 M1 \\<Omega> V m) (vs @ xs))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>j.\n                j \\<le> i \\<and>\n                vs @ xs \\<in> C M2 M1 \\<Omega> V m j \\<Longrightarrow>\n                thesis;\n     vs @ xs \\<in> TS M2 M1 \\<Omega> V m i;\n     \\<And>M2 M1 \\<Omega> V m.\n        TS M2 M1 \\<Omega> V m i =\n        \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i])\\<rbrakk>\n    \\<Longrightarrow> thesis", "then"], ["proof (chain)\npicking this:\n  nn (set [0..<Suc i]) (C M2 M1 \\<Omega> V m) (vs @ xs)\n  \\<in> set [0..<Suc i] \\<and>\n  vs @ xs\n  \\<in> C M2 M1 \\<Omega> V m\n         (nn (set [0..<Suc i]) (C M2 M1 \\<Omega> V m) (vs @ xs))", "show ?thesis"], ["proof (prove)\nusing this:\n  nn (set [0..<Suc i]) (C M2 M1 \\<Omega> V m) (vs @ xs)\n  \\<in> set [0..<Suc i] \\<and>\n  vs @ xs\n  \\<in> C M2 M1 \\<Omega> V m\n         (nn (set [0..<Suc i]) (C M2 M1 \\<Omega> V m) (vs @ xs))\n\ngoal (1 subgoal):\n 1. thesis", "using a1"], ["proof (prove)\nusing this:\n  nn (set [0..<Suc i]) (C M2 M1 \\<Omega> V m) (vs @ xs)\n  \\<in> set [0..<Suc i] \\<and>\n  vs @ xs\n  \\<in> C M2 M1 \\<Omega> V m\n         (nn (set [0..<Suc i]) (C M2 M1 \\<Omega> V m) (vs @ xs))\n  ?j \\<le> i \\<and> vs @ xs \\<in> C M2 M1 \\<Omega> V m ?j \\<Longrightarrow>\n  thesis\n\ngoal (1 subgoal):\n 1. thesis", "by (metis (no_types) atLeastLessThan_iff leD not_less_eq_eq set_upt)"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  j \\<le> i \\<and> vs @ xs \\<in> C M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "proof (cases j)"], ["proof (state)\ngoal (2 subgoals):\n 1. j = 0 \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i\n 2. \\<And>nat.\n       j = Suc nat \\<Longrightarrow>\n       vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "case 0"], ["proof (state)\nthis:\n  j = 0\n\ngoal (2 subgoals):\n 1. j = 0 \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i\n 2. \\<And>nat.\n       j = Suc nat \\<Longrightarrow>\n       vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  j = 0", "have \"?C j = {}\""], ["proof (prove)\nusing this:\n  j = 0\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m j = {}", "by auto"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m j = {}\n\ngoal (2 subgoals):\n 1. j = 0 \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i\n 2. \\<And>nat.\n       j = Suc nat \\<Longrightarrow>\n       vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "moreover"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m j = {}\n\ngoal (2 subgoals):\n 1. j = 0 \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i\n 2. \\<And>nat.\n       j = Suc nat \\<Longrightarrow>\n       vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "have \"vs@xs \\<in> {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xs \\<in> {}", "using j_def 0"], ["proof (prove)\nusing this:\n  j \\<le> i \\<and> vs @ xs \\<in> C M2 M1 \\<Omega> V m j\n  j = 0\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> {}", "by auto"], ["proof (state)\nthis:\n  vs @ xs \\<in> {}\n\ngoal (2 subgoals):\n 1. j = 0 \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i\n 2. \\<And>nat.\n       j = Suc nat \\<Longrightarrow>\n       vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "ultimately"], ["proof (chain)\npicking this:\n  C M2 M1 \\<Omega> V m j = {}\n  vs @ xs \\<in> {}", "show ?thesis"], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m j = {}\n  vs @ xs \\<in> {}\n\ngoal (1 subgoal):\n 1. vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "by auto"], ["proof (state)\nthis:\n  vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       j = Suc nat \\<Longrightarrow>\n       vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>nat.\n       j = Suc nat \\<Longrightarrow>\n       vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "case (Suc k)"], ["proof (state)\nthis:\n  j = Suc k\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       j = Suc nat \\<Longrightarrow>\n       vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  j = Suc k", "show ?thesis"], ["proof (prove)\nusing this:\n  j = Suc k\n\ngoal (1 subgoal):\n 1. vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "proof (cases k)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>j = Suc k; k = 0\\<rbrakk>\n    \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i\n 2. \\<And>nat.\n       \\<lbrakk>j = Suc k; k = Suc nat\\<rbrakk>\n       \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "case 0"], ["proof (state)\nthis:\n  k = 0\n\ngoal (2 subgoals):\n 1. \\<lbrakk>j = Suc k; k = 0\\<rbrakk>\n    \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i\n 2. \\<And>nat.\n       \\<lbrakk>j = Suc k; k = Suc nat\\<rbrakk>\n       \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  k = 0", "have \"?C j = V\""], ["proof (prove)\nusing this:\n  k = 0\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m j = V", "using Suc"], ["proof (prove)\nusing this:\n  k = 0\n  j = Suc k\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m j = V", "by auto"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m j = V\n\ngoal (2 subgoals):\n 1. \\<lbrakk>j = Suc k; k = 0\\<rbrakk>\n    \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i\n 2. \\<And>nat.\n       \\<lbrakk>j = Suc k; k = Suc nat\\<rbrakk>\n       \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  C M2 M1 \\<Omega> V m j = V", "have \"vs@xs \\<in> V\""], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m j = V\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> V", "using j_def"], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m j = V\n  j \\<le> i \\<and> vs @ xs \\<in> C M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> V", "by auto"], ["proof (state)\nthis:\n  vs @ xs \\<in> V\n\ngoal (2 subgoals):\n 1. \\<lbrakk>j = Suc k; k = 0\\<rbrakk>\n    \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i\n 2. \\<And>nat.\n       \\<lbrakk>j = Suc k; k = Suc nat\\<rbrakk>\n       \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  vs @ xs \\<in> V", "have \"mcp (vs@xs) V (vs@xs)\""], ["proof (prove)\nusing this:\n  vs @ xs \\<in> V\n\ngoal (1 subgoal):\n 1. mcp (vs @ xs) V (vs @ xs)", "using assms(2)"], ["proof (prove)\nusing this:\n  vs @ xs \\<in> V\n  mcp (vs @ xs) V vs\n\ngoal (1 subgoal):\n 1. mcp (vs @ xs) V (vs @ xs)", "by auto"], ["proof (state)\nthis:\n  mcp (vs @ xs) V (vs @ xs)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>j = Suc k; k = 0\\<rbrakk>\n    \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i\n 2. \\<And>nat.\n       \\<lbrakk>j = Suc k; k = Suc nat\\<rbrakk>\n       \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  mcp (vs @ xs) V (vs @ xs)", "have \"vs@xs = vs\""], ["proof (prove)\nusing this:\n  mcp (vs @ xs) V (vs @ xs)\n\ngoal (1 subgoal):\n 1. vs @ xs = vs", "using assms(2) mcp_unique"], ["proof (prove)\nusing this:\n  mcp (vs @ xs) V (vs @ xs)\n  mcp (vs @ xs) V vs\n  \\<lbrakk>mcp ?z ?W ?p; mcp ?z ?W ?p'\\<rbrakk> \\<Longrightarrow> ?p = ?p'\n\ngoal (1 subgoal):\n 1. vs @ xs = vs", "by auto"], ["proof (state)\nthis:\n  vs @ xs = vs\n\ngoal (2 subgoals):\n 1. \\<lbrakk>j = Suc k; k = 0\\<rbrakk>\n    \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i\n 2. \\<And>nat.\n       \\<lbrakk>j = Suc k; k = Suc nat\\<rbrakk>\n       \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  vs @ xs = vs", "have \"butlast xs = []\""], ["proof (prove)\nusing this:\n  vs @ xs = vs\n\ngoal (1 subgoal):\n 1. butlast xs = []", "by auto"], ["proof (state)\nthis:\n  butlast xs = []\n\ngoal (2 subgoals):\n 1. \\<lbrakk>j = Suc k; k = 0\\<rbrakk>\n    \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i\n 2. \\<And>nat.\n       \\<lbrakk>j = Suc k; k = Suc nat\\<rbrakk>\n       \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  butlast xs = []", "show ?thesis"], ["proof (prove)\nusing this:\n  butlast xs = []\n\ngoal (1 subgoal):\n 1. vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "using \\<open>vs @ xs = vs\\<close> assms(1)"], ["proof (prove)\nusing this:\n  butlast xs = []\n  vs @ xs = vs\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "by auto"], ["proof (state)\nthis:\n  vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>j = Suc k; k = Suc nat\\<rbrakk>\n       \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>j = Suc k; k = Suc nat\\<rbrakk>\n       \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "case (Suc n)"], ["proof (state)\nthis:\n  k = Suc n\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>j = Suc k; k = Suc nat\\<rbrakk>\n       \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "assume j_assms : \"j = Suc k\" \n                       \"k = Suc n\""], ["proof (state)\nthis:\n  j = Suc k\n  k = Suc n\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>j = Suc k; k = Suc nat\\<rbrakk>\n       \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  j = Suc k\n  k = Suc n", "have \"?C (Suc (Suc n)) = append_set (?C (Suc n) - ?RM (Suc n)) (inputs M2) - ?TS (Suc n)\""], ["proof (prove)\nusing this:\n  j = Suc k\n  k = Suc n\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc (Suc n)) =\n    append_set\n     (C M2 M1 \\<Omega> V m (Suc n) - RM M2 M1 \\<Omega> V m (Suc n))\n     (inputs M2) -\n    TS M2 M1 \\<Omega> V m (Suc n)", "using C.simps(3)"], ["proof (prove)\nusing this:\n  j = Suc k\n  k = Suc n\n  C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc (Suc ?v)) =\n  append_set\n   (C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v) -\n    RM ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v))\n   (inputs ?M2.0) -\n  TS ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v)\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc (Suc n)) =\n    append_set\n     (C M2 M1 \\<Omega> V m (Suc n) - RM M2 M1 \\<Omega> V m (Suc n))\n     (inputs M2) -\n    TS M2 M1 \\<Omega> V m (Suc n)", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc (Suc n)) =\n  append_set (C M2 M1 \\<Omega> V m (Suc n) - RM M2 M1 \\<Omega> V m (Suc n))\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m (Suc n)\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>j = Suc k; k = Suc nat\\<rbrakk>\n       \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  C M2 M1 \\<Omega> V m (Suc (Suc n)) =\n  append_set (C M2 M1 \\<Omega> V m (Suc n) - RM M2 M1 \\<Omega> V m (Suc n))\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m (Suc n)", "have \"?C (Suc (Suc n)) \\<subseteq> append_set (?C (Suc n)) (inputs M2)\""], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m (Suc (Suc n)) =\n  append_set (C M2 M1 \\<Omega> V m (Suc n) - RM M2 M1 \\<Omega> V m (Suc n))\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m (Suc n)\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc (Suc n))\n    \\<subseteq> append_set (C M2 M1 \\<Omega> V m (Suc n)) (inputs M2)", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc (Suc n))\n  \\<subseteq> append_set (C M2 M1 \\<Omega> V m (Suc n)) (inputs M2)\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>j = Suc k; k = Suc nat\\<rbrakk>\n       \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "have \"vs@xs \\<in> ?C (Suc (Suc n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xs \\<in> C M2 M1 \\<Omega> V m (Suc (Suc n))", "using j_assms j_def"], ["proof (prove)\nusing this:\n  j = Suc k\n  k = Suc n\n  j \\<le> i \\<and> vs @ xs \\<in> C M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> C M2 M1 \\<Omega> V m (Suc (Suc n))", "by blast"], ["proof (state)\nthis:\n  vs @ xs \\<in> C M2 M1 \\<Omega> V m (Suc (Suc n))\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>j = Suc k; k = Suc nat\\<rbrakk>\n       \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "have \"butlast (vs@xs) \\<in> ?C (Suc n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. butlast (vs @ xs) \\<in> C M2 M1 \\<Omega> V m (Suc n)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. butlast (vs @ xs) \\<in> C M2 M1 \\<Omega> V m (Suc n)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. butlast (vs @ xs) \\<in> C M2 M1 \\<Omega> V m (Suc n)", "by (meson \\<open>?C (Suc (Suc n)) \\<subseteq> append_set (?C (Suc n)) (inputs M2)\\<close> \n              \\<open>vs @ xs \\<in> ?C (Suc (Suc n))\\<close> append_set_prefix subsetCE)"], ["proof (state)\nthis:\n  butlast (vs @ xs) \\<in> C M2 M1 \\<Omega> V m (Suc n)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  butlast (vs @ xs) \\<in> C M2 M1 \\<Omega> V m (Suc n)\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>j = Suc k; k = Suc nat\\<rbrakk>\n       \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "moreover"], ["proof (state)\nthis:\n  butlast (vs @ xs) \\<in> C M2 M1 \\<Omega> V m (Suc n)\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>j = Suc k; k = Suc nat\\<rbrakk>\n       \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "have \"xs \\<noteq> []\""], ["proof (prove)\ngoal (1 subgoal):\n 1. xs \\<noteq> []", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. xs \\<noteq> []", "have \"1 \\<le> k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> k", "using j_assms"], ["proof (prove)\nusing this:\n  j = Suc k\n  k = Suc n\n\ngoal (1 subgoal):\n 1. 1 \\<le> k", "by auto"], ["proof (state)\nthis:\n  1 \\<le> k\n\ngoal (1 subgoal):\n 1. xs \\<noteq> []", "then"], ["proof (chain)\npicking this:\n  1 \\<le> k", "have \"?C j \\<inter> ?C 1 = {}\""], ["proof (prove)\nusing this:\n  1 \\<le> k\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m j \\<inter> C M2 M1 \\<Omega> V m 1 = {}", "using C_disj_le_gz[of 1 k] j_assms(1) less_numeral_extra(1)"], ["proof (prove)\nusing this:\n  1 \\<le> k\n  \\<lbrakk>1 \\<le> k; 0 < 1\\<rbrakk>\n  \\<Longrightarrow> C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m 1 \\<inter>\n                    C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc k) =\n                    {}\n  j = Suc k\n  (0::?'a) < (1::?'a)\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m j \\<inter> C M2 M1 \\<Omega> V m 1 = {}", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m j \\<inter> C M2 M1 \\<Omega> V m 1 = {}\n\ngoal (1 subgoal):\n 1. xs \\<noteq> []", "then"], ["proof (chain)\npicking this:\n  C M2 M1 \\<Omega> V m j \\<inter> C M2 M1 \\<Omega> V m 1 = {}", "have \"?C j \\<inter> V = {}\""], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m j \\<inter> C M2 M1 \\<Omega> V m 1 = {}\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m j \\<inter> V = {}", "by auto"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m j \\<inter> V = {}\n\ngoal (1 subgoal):\n 1. xs \\<noteq> []", "then"], ["proof (chain)\npicking this:\n  C M2 M1 \\<Omega> V m j \\<inter> V = {}", "have \"vs@xs \\<notin> V\""], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m j \\<inter> V = {}\n\ngoal (1 subgoal):\n 1. vs @ xs \\<notin> V", "using j_def"], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m j \\<inter> V = {}\n  j \\<le> i \\<and> vs @ xs \\<in> C M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. vs @ xs \\<notin> V", "by auto"], ["proof (state)\nthis:\n  vs @ xs \\<notin> V\n\ngoal (1 subgoal):\n 1. xs \\<noteq> []", "then"], ["proof (chain)\npicking this:\n  vs @ xs \\<notin> V", "show ?thesis"], ["proof (prove)\nusing this:\n  vs @ xs \\<notin> V\n\ngoal (1 subgoal):\n 1. xs \\<noteq> []", "using assms(2)"], ["proof (prove)\nusing this:\n  vs @ xs \\<notin> V\n  mcp (vs @ xs) V vs\n\ngoal (1 subgoal):\n 1. xs \\<noteq> []", "by auto"], ["proof (state)\nthis:\n  xs \\<noteq> []\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  xs \\<noteq> []\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>j = Suc k; k = Suc nat\\<rbrakk>\n       \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "ultimately"], ["proof (chain)\npicking this:\n  butlast (vs @ xs) \\<in> C M2 M1 \\<Omega> V m (Suc n)\n  xs \\<noteq> []", "have \"vs@(butlast xs) \\<in> ?C (Suc n)\""], ["proof (prove)\nusing this:\n  butlast (vs @ xs) \\<in> C M2 M1 \\<Omega> V m (Suc n)\n  xs \\<noteq> []\n\ngoal (1 subgoal):\n 1. vs @ butlast xs \\<in> C M2 M1 \\<Omega> V m (Suc n)", "by (simp add: butlast_append)"], ["proof (state)\nthis:\n  vs @ butlast xs \\<in> C M2 M1 \\<Omega> V m (Suc n)\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>j = Suc k; k = Suc nat\\<rbrakk>\n       \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "have \"Suc n < Suc j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Suc n < Suc j", "using j_assms"], ["proof (prove)\nusing this:\n  j = Suc k\n  k = Suc n\n\ngoal (1 subgoal):\n 1. Suc n < Suc j", "by auto"], ["proof (state)\nthis:\n  Suc n < Suc j\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>j = Suc k; k = Suc nat\\<rbrakk>\n       \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "have \"?C (Suc n) \\<subseteq> ?TS j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n) \\<subseteq> TS M2 M1 \\<Omega> V m j", "using TS_union[of M2 M1 \\<Omega> V m j] \\<open>Suc n < Suc j\\<close>"], ["proof (prove)\nusing this:\n  TS M2 M1 \\<Omega> V m j =\n  \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc j])\n  Suc n < Suc j\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n) \\<subseteq> TS M2 M1 \\<Omega> V m j", "by (metis UN_upper atLeast_upt lessThan_iff)"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc n) \\<subseteq> TS M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>j = Suc k; k = Suc nat\\<rbrakk>\n       \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "have \"vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m j", "using \\<open>vs@(butlast xs) \\<in> ?C (Suc n)\\<close> \\<open>?C (Suc n) \\<subseteq> ?TS j\\<close> j_def"], ["proof (prove)\nusing this:\n  vs @ butlast xs \\<in> C M2 M1 \\<Omega> V m (Suc n)\n  C M2 M1 \\<Omega> V m (Suc n) \\<subseteq> TS M2 M1 \\<Omega> V m j\n  j \\<le> i \\<and> vs @ xs \\<in> C M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m j", "by auto"], ["proof (state)\nthis:\n  vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>j = Suc k; k = Suc nat\\<rbrakk>\n       \\<Longrightarrow> vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m j", "show ?thesis"], ["proof (prove)\nusing this:\n  vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "using j_def TS_subset[of j i]"], ["proof (prove)\nusing this:\n  vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m j\n  j \\<le> i \\<and> vs @ xs \\<in> C M2 M1 \\<Omega> V m j\n  j \\<le> i \\<Longrightarrow>\n  TS ?M2.0 ?M1.0 ?\\<Omega> ?V ?m j\n  \\<subseteq> TS ?M2.0 ?M1.0 ?\\<Omega> ?V ?m i\n\ngoal (1 subgoal):\n 1. vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i", "by blast"], ["proof (state)\nthis:\n  vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  vs @ butlast xs \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma TS_prefix_containment :\n  assumes \"vs@xs \\<in> TS M2 M1 \\<Omega> V m i\"\n  and     \"mcp (vs@xs) V vs\"\n  and     \"prefix xs' xs\"\nshows \"vs@xs' \\<in> TS M2 M1 \\<Omega> V m i\"\n\\<comment> \\<open> Proof sketch:\n       Perform induction on length difference, as from each prefix it is possible to deduce the \n       desired property for the prefix one element smaller than it via above results\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "using assms"], ["proof (prove)\nusing this:\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\n  mcp (vs @ xs) V vs\n  prefix xs' xs\n\ngoal (1 subgoal):\n 1. vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "proof (induction \"length xs - length xs'\" arbitrary: xs')"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>xs'.\n       \\<lbrakk>0 = length xs - length xs';\n        vs @ xs \\<in> TS M2 M1 \\<Omega> V m i; mcp (vs @ xs) V vs;\n        prefix xs' xs\\<rbrakk>\n       \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i\n 2. \\<And>x xs'.\n       \\<lbrakk>\\<And>xs'.\n                   \\<lbrakk>x = length xs - length xs';\n                    vs @ xs \\<in> TS M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs; prefix xs' xs\\<rbrakk>\n                   \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i;\n        Suc x = length xs - length xs';\n        vs @ xs \\<in> TS M2 M1 \\<Omega> V m i; mcp (vs @ xs) V vs;\n        prefix xs' xs\\<rbrakk>\n       \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "case 0"], ["proof (state)\nthis:\n  0 = length xs - length xs'\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\n  mcp (vs @ xs) V vs\n  prefix xs' xs\n\ngoal (2 subgoals):\n 1. \\<And>xs'.\n       \\<lbrakk>0 = length xs - length xs';\n        vs @ xs \\<in> TS M2 M1 \\<Omega> V m i; mcp (vs @ xs) V vs;\n        prefix xs' xs\\<rbrakk>\n       \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i\n 2. \\<And>x xs'.\n       \\<lbrakk>\\<And>xs'.\n                   \\<lbrakk>x = length xs - length xs';\n                    vs @ xs \\<in> TS M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs; prefix xs' xs\\<rbrakk>\n                   \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i;\n        Suc x = length xs - length xs';\n        vs @ xs \\<in> TS M2 M1 \\<Omega> V m i; mcp (vs @ xs) V vs;\n        prefix xs' xs\\<rbrakk>\n       \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  0 = length xs - length xs'\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\n  mcp (vs @ xs) V vs\n  prefix xs' xs", "have \"xs = xs'\""], ["proof (prove)\nusing this:\n  0 = length xs - length xs'\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\n  mcp (vs @ xs) V vs\n  prefix xs' xs\n\ngoal (1 subgoal):\n 1. xs = xs'", "by (metis append_Nil2 append_eq_conv_conj gr_implies_not0 length_drop length_greater_0_conv prefixE)"], ["proof (state)\nthis:\n  xs = xs'\n\ngoal (2 subgoals):\n 1. \\<And>xs'.\n       \\<lbrakk>0 = length xs - length xs';\n        vs @ xs \\<in> TS M2 M1 \\<Omega> V m i; mcp (vs @ xs) V vs;\n        prefix xs' xs\\<rbrakk>\n       \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i\n 2. \\<And>x xs'.\n       \\<lbrakk>\\<And>xs'.\n                   \\<lbrakk>x = length xs - length xs';\n                    vs @ xs \\<in> TS M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs; prefix xs' xs\\<rbrakk>\n                   \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i;\n        Suc x = length xs - length xs';\n        vs @ xs \\<in> TS M2 M1 \\<Omega> V m i; mcp (vs @ xs) V vs;\n        prefix xs' xs\\<rbrakk>\n       \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  xs = xs'", "show ?case"], ["proof (prove)\nusing this:\n  xs = xs'\n\ngoal (1 subgoal):\n 1. vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "using 0"], ["proof (prove)\nusing this:\n  xs = xs'\n  0 = length xs - length xs'\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\n  mcp (vs @ xs) V vs\n  prefix xs' xs\n\ngoal (1 subgoal):\n 1. vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "by auto"], ["proof (state)\nthis:\n  vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<And>x xs'.\n       \\<lbrakk>\\<And>xs'.\n                   \\<lbrakk>x = length xs - length xs';\n                    vs @ xs \\<in> TS M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs; prefix xs' xs\\<rbrakk>\n                   \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i;\n        Suc x = length xs - length xs';\n        vs @ xs \\<in> TS M2 M1 \\<Omega> V m i; mcp (vs @ xs) V vs;\n        prefix xs' xs\\<rbrakk>\n       \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x xs'.\n       \\<lbrakk>\\<And>xs'.\n                   \\<lbrakk>x = length xs - length xs';\n                    vs @ xs \\<in> TS M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs; prefix xs' xs\\<rbrakk>\n                   \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i;\n        Suc x = length xs - length xs';\n        vs @ xs \\<in> TS M2 M1 \\<Omega> V m i; mcp (vs @ xs) V vs;\n        prefix xs' xs\\<rbrakk>\n       \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "case (Suc k)"], ["proof (state)\nthis:\n  \\<lbrakk>k = length xs - length ?xs';\n   vs @ xs \\<in> TS M2 M1 \\<Omega> V m i; mcp (vs @ xs) V vs;\n   prefix ?xs' xs\\<rbrakk>\n  \\<Longrightarrow> vs @ ?xs' \\<in> TS M2 M1 \\<Omega> V m i\n  Suc k = length xs - length xs'\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\n  mcp (vs @ xs) V vs\n  prefix xs' xs\n\ngoal (1 subgoal):\n 1. \\<And>x xs'.\n       \\<lbrakk>\\<And>xs'.\n                   \\<lbrakk>x = length xs - length xs';\n                    vs @ xs \\<in> TS M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs; prefix xs' xs\\<rbrakk>\n                   \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i;\n        Suc x = length xs - length xs';\n        vs @ xs \\<in> TS M2 M1 \\<Omega> V m i; mcp (vs @ xs) V vs;\n        prefix xs' xs\\<rbrakk>\n       \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "have \"0 < i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < i", "using assms(1)"], ["proof (prove)\nusing this:\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. 0 < i", "using Suc.hyps(2) append_eq_append_conv assms(2)"], ["proof (prove)\nusing this:\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\n  Suc k = length xs - length xs'\n  length ?xs = length ?ys \\<or> length ?us = length ?vs \\<Longrightarrow>\n  (?xs @ ?us = ?ys @ ?vs) = (?xs = ?ys \\<and> ?us = ?vs)\n  mcp (vs @ xs) V vs\n\ngoal (1 subgoal):\n 1. 0 < i", "by auto"], ["proof (state)\nthis:\n  0 < i\n\ngoal (1 subgoal):\n 1. \\<And>x xs'.\n       \\<lbrakk>\\<And>xs'.\n                   \\<lbrakk>x = length xs - length xs';\n                    vs @ xs \\<in> TS M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs; prefix xs' xs\\<rbrakk>\n                   \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i;\n        Suc x = length xs - length xs';\n        vs @ xs \\<in> TS M2 M1 \\<Omega> V m i; mcp (vs @ xs) V vs;\n        prefix xs' xs\\<rbrakk>\n       \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "proof (cases xs')"], ["proof (state)\ngoal (2 subgoals):\n 1. xs' = [] \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i\n 2. \\<And>a list.\n       xs' = a # list \\<Longrightarrow>\n       vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "case Nil"], ["proof (state)\nthis:\n  xs' = []\n\ngoal (2 subgoals):\n 1. xs' = [] \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i\n 2. \\<And>a list.\n       xs' = a # list \\<Longrightarrow>\n       vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  xs' = []", "show ?thesis"], ["proof (prove)\nusing this:\n  xs' = []\n\ngoal (1 subgoal):\n 1. vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "by (metis (no_types, hide_lams) \\<open>0 < i\\<close> TS.simps(2) TS_subset append_Nil2 assms(2) \n          contra_subsetD leD mcp.elims(2) not_less_eq_eq)"], ["proof (state)\nthis:\n  vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<And>a list.\n       xs' = a # list \\<Longrightarrow>\n       vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a list.\n       xs' = a # list \\<Longrightarrow>\n       vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "case (Cons a list)"], ["proof (state)\nthis:\n  xs' = a # list\n\ngoal (1 subgoal):\n 1. \\<And>a list.\n       xs' = a # list \\<Longrightarrow>\n       vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  xs' = a # list", "show ?thesis"], ["proof (prove)\nusing this:\n  xs' = a # list\n\ngoal (1 subgoal):\n 1. vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "proof (cases \"xs = xs'\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>xs' = a # list; xs = xs'\\<rbrakk>\n    \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i\n 2. \\<lbrakk>xs' = a # list; xs \\<noteq> xs'\\<rbrakk>\n    \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "case True"], ["proof (state)\nthis:\n  xs = xs'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>xs' = a # list; xs = xs'\\<rbrakk>\n    \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i\n 2. \\<lbrakk>xs' = a # list; xs \\<noteq> xs'\\<rbrakk>\n    \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  xs = xs'", "show ?thesis"], ["proof (prove)\nusing this:\n  xs = xs'\n\ngoal (1 subgoal):\n 1. vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "using assms(1)"], ["proof (prove)\nusing this:\n  xs = xs'\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "by simp"], ["proof (state)\nthis:\n  vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<lbrakk>xs' = a # list; xs \\<noteq> xs'\\<rbrakk>\n    \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>xs' = a # list; xs \\<noteq> xs'\\<rbrakk>\n    \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "case False"], ["proof (state)\nthis:\n  xs \\<noteq> xs'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>xs' = a # list; xs \\<noteq> xs'\\<rbrakk>\n    \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  xs \\<noteq> xs'", "obtain xs'' where \"xs = xs'@xs''\""], ["proof (prove)\nusing this:\n  xs \\<noteq> xs'\n\ngoal (1 subgoal):\n 1. (\\<And>xs''. xs = xs' @ xs'' \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using Suc.prems(3) prefixE"], ["proof (prove)\nusing this:\n  xs \\<noteq> xs'\n  prefix xs' xs\n  \\<lbrakk>prefix ?xs ?ys;\n   \\<And>zs. ?ys = ?xs @ zs \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>xs''. xs = xs' @ xs'' \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  xs = xs' @ xs''\n\ngoal (1 subgoal):\n 1. \\<lbrakk>xs' = a # list; xs \\<noteq> xs'\\<rbrakk>\n    \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  xs = xs' @ xs''", "have \"xs'' \\<noteq> []\""], ["proof (prove)\nusing this:\n  xs = xs' @ xs''\n\ngoal (1 subgoal):\n 1. xs'' \\<noteq> []", "using False"], ["proof (prove)\nusing this:\n  xs = xs' @ xs''\n  xs \\<noteq> xs'\n\ngoal (1 subgoal):\n 1. xs'' \\<noteq> []", "by auto"], ["proof (state)\nthis:\n  xs'' \\<noteq> []\n\ngoal (1 subgoal):\n 1. \\<lbrakk>xs' = a # list; xs \\<noteq> xs'\\<rbrakk>\n    \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  xs'' \\<noteq> []", "have \"k = length xs - length (xs' @ [hd xs''])\""], ["proof (prove)\nusing this:\n  xs'' \\<noteq> []\n\ngoal (1 subgoal):\n 1. k = length xs - length (xs' @ [hd xs''])", "using \\<open>xs = xs'@xs''\\<close> Suc.hyps(2)"], ["proof (prove)\nusing this:\n  xs'' \\<noteq> []\n  xs = xs' @ xs''\n  Suc k = length xs - length xs'\n\ngoal (1 subgoal):\n 1. k = length xs - length (xs' @ [hd xs''])", "by auto"], ["proof (state)\nthis:\n  k = length xs - length (xs' @ [hd xs''])\n\ngoal (1 subgoal):\n 1. \\<lbrakk>xs' = a # list; xs \\<noteq> xs'\\<rbrakk>\n    \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "moreover"], ["proof (state)\nthis:\n  k = length xs - length (xs' @ [hd xs''])\n\ngoal (1 subgoal):\n 1. \\<lbrakk>xs' = a # list; xs \\<noteq> xs'\\<rbrakk>\n    \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "have \"prefix (xs' @ [hd xs'']) xs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prefix (xs' @ [hd xs'']) xs", "using \\<open>xs = xs'@xs''\\<close> \\<open>xs'' \\<noteq> []\\<close>"], ["proof (prove)\nusing this:\n  xs = xs' @ xs''\n  xs'' \\<noteq> []\n\ngoal (1 subgoal):\n 1. prefix (xs' @ [hd xs'']) xs", "by (metis Cons_prefix_Cons list.exhaust_sel prefix_code(1) same_prefix_prefix)"], ["proof (state)\nthis:\n  prefix (xs' @ [hd xs'']) xs\n\ngoal (1 subgoal):\n 1. \\<lbrakk>xs' = a # list; xs \\<noteq> xs'\\<rbrakk>\n    \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "ultimately"], ["proof (chain)\npicking this:\n  k = length xs - length (xs' @ [hd xs''])\n  prefix (xs' @ [hd xs'']) xs", "have \"vs @ (xs' @ [hd xs'']) \\<in> TS M2 M1 \\<Omega> V m i\""], ["proof (prove)\nusing this:\n  k = length xs - length (xs' @ [hd xs''])\n  prefix (xs' @ [hd xs'']) xs\n\ngoal (1 subgoal):\n 1. vs @ xs' @ [hd xs''] \\<in> TS M2 M1 \\<Omega> V m i", "using Suc.hyps(1)[OF _ Suc.prems(1,2)]"], ["proof (prove)\nusing this:\n  k = length xs - length (xs' @ [hd xs''])\n  prefix (xs' @ [hd xs'']) xs\n  \\<lbrakk>k = length xs - length ?xs'; prefix ?xs' xs\\<rbrakk>\n  \\<Longrightarrow> vs @ ?xs' \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ xs' @ [hd xs''] \\<in> TS M2 M1 \\<Omega> V m i", "by simp"], ["proof (state)\nthis:\n  vs @ xs' @ [hd xs''] \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<lbrakk>xs' = a # list; xs \\<noteq> xs'\\<rbrakk>\n    \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "have \"mcp (vs @ xs' @ [hd xs'']) V vs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mcp (vs @ xs' @ [hd xs'']) V vs", "using \\<open>xs = xs'@xs''\\<close> \\<open>xs'' \\<noteq> []\\<close> assms(2)"], ["proof (prove)\nusing this:\n  xs = xs' @ xs''\n  xs'' \\<noteq> []\n  mcp (vs @ xs) V vs\n\ngoal (1 subgoal):\n 1. mcp (vs @ xs' @ [hd xs'']) V vs", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>xs = xs' @ xs''; xs'' \\<noteq> []; mcp (vs @ xs) V vs\\<rbrakk>\n    \\<Longrightarrow> mcp (vs @ xs' @ [hd xs'']) V vs", "obtain aas :: \"'a list \\<Rightarrow> 'a list set \\<Rightarrow> 'a list \\<Rightarrow> 'a list\" where\n          \"\\<forall>x0 x1 x2. (\\<exists>v3. (prefix v3 x2 \\<and> v3 \\<in> x1) \\<and> \\<not> length v3 \\<le> length x0) \n                       = ((prefix (aas x0 x1 x2) x2 \\<and> aas x0 x1 x2 \\<in> x1) \n                           \\<and> \\<not> length (aas x0 x1 x2) \\<le> length x0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>aas.\n        \\<forall>x0 x1 x2.\n           (\\<exists>v3.\n               (prefix v3 x2 \\<and> v3 \\<in> x1) \\<and>\n               \\<not> length v3 \\<le> length x0) =\n           ((prefix (aas x0 x1 x2) x2 \\<and> aas x0 x1 x2 \\<in> x1) \\<and>\n            \\<not> length (aas x0 x1 x2) \\<le> length x0) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by moura"], ["proof (state)\nthis:\n  \\<forall>x0 x1 x2.\n     (\\<exists>v3.\n         (prefix v3 x2 \\<and> v3 \\<in> x1) \\<and>\n         \\<not> length v3 \\<le> length x0) =\n     ((prefix (aas x0 x1 x2) x2 \\<and> aas x0 x1 x2 \\<in> x1) \\<and>\n      \\<not> length (aas x0 x1 x2) \\<le> length x0)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>xs = xs' @ xs''; xs'' \\<noteq> []; mcp (vs @ xs) V vs\\<rbrakk>\n    \\<Longrightarrow> mcp (vs @ xs' @ [hd xs'']) V vs", "then"], ["proof (chain)\npicking this:\n  \\<forall>x0 x1 x2.\n     (\\<exists>v3.\n         (prefix v3 x2 \\<and> v3 \\<in> x1) \\<and>\n         \\<not> length v3 \\<le> length x0) =\n     ((prefix (aas x0 x1 x2) x2 \\<and> aas x0 x1 x2 \\<in> x1) \\<and>\n      \\<not> length (aas x0 x1 x2) \\<le> length x0)", "have f1: \"\\<forall>as A asa. (\\<not> mcp as A asa \n                                    \\<or> prefix asa as \\<and> asa \\<in> A \\<and> (\\<forall>asb. (\\<not> prefix asb as \\<or> asb \\<notin> A) \n                                                                        \\<or> length asb \\<le> length asa)) \n                                  \\<and> (mcp as A asa \n                                    \\<or> \\<not> prefix asa as \n                                    \\<or> asa \\<notin> A \n                                    \\<or> (prefix (aas asa A as) as \\<and> aas asa A as \\<in> A) \n                                        \\<and> \\<not> length (aas asa A as) \\<le> length asa)\""], ["proof (prove)\nusing this:\n  \\<forall>x0 x1 x2.\n     (\\<exists>v3.\n         (prefix v3 x2 \\<and> v3 \\<in> x1) \\<and>\n         \\<not> length v3 \\<le> length x0) =\n     ((prefix (aas x0 x1 x2) x2 \\<and> aas x0 x1 x2 \\<in> x1) \\<and>\n      \\<not> length (aas x0 x1 x2) \\<le> length x0)\n\ngoal (1 subgoal):\n 1. \\<forall>as A asa.\n       (\\<not> mcp as A asa \\<or>\n        prefix asa as \\<and>\n        asa \\<in> A \\<and>\n        (\\<forall>asb.\n            (\\<not> prefix asb as \\<or> asb \\<notin> A) \\<or>\n            length asb \\<le> length asa)) \\<and>\n       (mcp as A asa \\<or>\n        \\<not> prefix asa as \\<or>\n        asa \\<notin> A \\<or>\n        (prefix (aas asa A as) as \\<and> aas asa A as \\<in> A) \\<and>\n        \\<not> length (aas asa A as) \\<le> length asa)", "by auto"], ["proof (state)\nthis:\n  \\<forall>as A asa.\n     (\\<not> mcp as A asa \\<or>\n      prefix asa as \\<and>\n      asa \\<in> A \\<and>\n      (\\<forall>asb.\n          (\\<not> prefix asb as \\<or> asb \\<notin> A) \\<or>\n          length asb \\<le> length asa)) \\<and>\n     (mcp as A asa \\<or>\n      \\<not> prefix asa as \\<or>\n      asa \\<notin> A \\<or>\n      (prefix (aas asa A as) as \\<and> aas asa A as \\<in> A) \\<and>\n      \\<not> length (aas asa A as) \\<le> length asa)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>xs = xs' @ xs''; xs'' \\<noteq> []; mcp (vs @ xs) V vs\\<rbrakk>\n    \\<Longrightarrow> mcp (vs @ xs' @ [hd xs'']) V vs", "obtain aasa :: \"'a list \\<Rightarrow> 'a list \\<Rightarrow> 'a list\" where\n          f2: \"\\<forall>x0 x1. (\\<exists>v2. x0 = x1 @ v2) = (x0 = x1 @ aasa x0 x1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>aasa.\n        \\<forall>x0 x1.\n           (\\<exists>v2. x0 = x1 @ v2) =\n           (x0 = x1 @ aasa x0 x1) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by moura"], ["proof (state)\nthis:\n  \\<forall>x0 x1. (\\<exists>v2. x0 = x1 @ v2) = (x0 = x1 @ aasa x0 x1)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>xs = xs' @ xs''; xs'' \\<noteq> []; mcp (vs @ xs) V vs\\<rbrakk>\n    \\<Longrightarrow> mcp (vs @ xs' @ [hd xs'']) V vs", "then"], ["proof (chain)\npicking this:\n  \\<forall>x0 x1. (\\<exists>v2. x0 = x1 @ v2) = (x0 = x1 @ aasa x0 x1)", "have f3: \"([] @ [hd xs'']) @ aasa (xs' @ xs'') (xs' @ [hd xs'']) \n                        = ([] @ [hd xs'']) @ aasa (([] @ [hd xs'']) \n                            @ aasa (xs' @ xs'') (xs' @ [hd xs''])) ([] @ [hd xs''])\""], ["proof (prove)\nusing this:\n  \\<forall>x0 x1. (\\<exists>v2. x0 = x1 @ v2) = (x0 = x1 @ aasa x0 x1)\n\ngoal (1 subgoal):\n 1. ([] @ [hd xs'']) @ aasa (xs' @ xs'') (xs' @ [hd xs'']) =\n    ([] @ [hd xs'']) @\n    aasa (([] @ [hd xs'']) @ aasa (xs' @ xs'') (xs' @ [hd xs'']))\n     ([] @ [hd xs''])", "by (meson prefixE prefixI)"], ["proof (state)\nthis:\n  ([] @ [hd xs'']) @ aasa (xs' @ xs'') (xs' @ [hd xs'']) =\n  ([] @ [hd xs'']) @\n  aasa (([] @ [hd xs'']) @ aasa (xs' @ xs'') (xs' @ [hd xs'']))\n   ([] @ [hd xs''])\n\ngoal (1 subgoal):\n 1. \\<lbrakk>xs = xs' @ xs''; xs'' \\<noteq> []; mcp (vs @ xs) V vs\\<rbrakk>\n    \\<Longrightarrow> mcp (vs @ xs' @ [hd xs'']) V vs", "have \"xs' @ xs'' = (xs' @ [hd xs'']) @ aasa (xs' @ xs'') (xs' @ [hd xs''])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. xs' @ xs'' = (xs' @ [hd xs'']) @ aasa (xs' @ xs'') (xs' @ [hd xs''])", "using f2"], ["proof (prove)\nusing this:\n  \\<forall>x0 x1. (\\<exists>v2. x0 = x1 @ v2) = (x0 = x1 @ aasa x0 x1)\n\ngoal (1 subgoal):\n 1. xs' @ xs'' = (xs' @ [hd xs'']) @ aasa (xs' @ xs'') (xs' @ [hd xs''])", "by (metis (no_types) \\<open>prefix (xs' @ [hd xs'']) xs\\<close> \\<open>xs = xs' @ xs''\\<close> prefixE)"], ["proof (state)\nthis:\n  xs' @ xs'' = (xs' @ [hd xs'']) @ aasa (xs' @ xs'') (xs' @ [hd xs''])\n\ngoal (1 subgoal):\n 1. \\<lbrakk>xs = xs' @ xs''; xs'' \\<noteq> []; mcp (vs @ xs) V vs\\<rbrakk>\n    \\<Longrightarrow> mcp (vs @ xs' @ [hd xs'']) V vs", "then"], ["proof (chain)\npicking this:\n  xs' @ xs'' = (xs' @ [hd xs'']) @ aasa (xs' @ xs'') (xs' @ [hd xs''])", "have \"(vs @ (a # list) @ [hd xs'']) @ aasa (([] @ [hd xs'']) \n                      @ aasa (xs' @ xs'') (xs' @ [hd xs''])) ([] @ [hd xs'']) \n                    = vs @ xs\""], ["proof (prove)\nusing this:\n  xs' @ xs'' = (xs' @ [hd xs'']) @ aasa (xs' @ xs'') (xs' @ [hd xs''])\n\ngoal (1 subgoal):\n 1. (vs @ (a # list) @ [hd xs'']) @\n    aasa (([] @ [hd xs'']) @ aasa (xs' @ xs'') (xs' @ [hd xs'']))\n     ([] @ [hd xs'']) =\n    vs @ xs", "using f3"], ["proof (prove)\nusing this:\n  xs' @ xs'' = (xs' @ [hd xs'']) @ aasa (xs' @ xs'') (xs' @ [hd xs''])\n  ([] @ [hd xs'']) @ aasa (xs' @ xs'') (xs' @ [hd xs'']) =\n  ([] @ [hd xs'']) @\n  aasa (([] @ [hd xs'']) @ aasa (xs' @ xs'') (xs' @ [hd xs'']))\n   ([] @ [hd xs''])\n\ngoal (1 subgoal):\n 1. (vs @ (a # list) @ [hd xs'']) @\n    aasa (([] @ [hd xs'']) @ aasa (xs' @ xs'') (xs' @ [hd xs'']))\n     ([] @ [hd xs'']) =\n    vs @ xs", "by (simp add: \\<open>xs = xs' @ xs''\\<close> local.Cons)"], ["proof (state)\nthis:\n  (vs @ (a # list) @ [hd xs'']) @\n  aasa (([] @ [hd xs'']) @ aasa (xs' @ xs'') (xs' @ [hd xs'']))\n   ([] @ [hd xs'']) =\n  vs @ xs\n\ngoal (1 subgoal):\n 1. \\<lbrakk>xs = xs' @ xs''; xs'' \\<noteq> []; mcp (vs @ xs) V vs\\<rbrakk>\n    \\<Longrightarrow> mcp (vs @ xs' @ [hd xs'']) V vs", "then"], ["proof (chain)\npicking this:\n  (vs @ (a # list) @ [hd xs'']) @\n  aasa (([] @ [hd xs'']) @ aasa (xs' @ xs'') (xs' @ [hd xs'']))\n   ([] @ [hd xs'']) =\n  vs @ xs", "have \"\\<not> prefix (aas vs V (vs @ xs' @ [hd xs''])) (vs @ xs' @ [hd xs'']) \n                    \\<or> aas vs V (vs @ xs' @ [hd xs'']) \\<notin> V \n                    \\<or> length (aas vs V (vs @ xs' @ [hd xs''])) \\<le> length vs\""], ["proof (prove)\nusing this:\n  (vs @ (a # list) @ [hd xs'']) @\n  aasa (([] @ [hd xs'']) @ aasa (xs' @ xs'') (xs' @ [hd xs'']))\n   ([] @ [hd xs'']) =\n  vs @ xs\n\ngoal (1 subgoal):\n 1. \\<not> prefix (aas vs V (vs @ xs' @ [hd xs'']))\n            (vs @ xs' @ [hd xs'']) \\<or>\n    aas vs V (vs @ xs' @ [hd xs'']) \\<notin> V \\<or>\n    length (aas vs V (vs @ xs' @ [hd xs''])) \\<le> length vs", "using f1"], ["proof (prove)\nusing this:\n  (vs @ (a # list) @ [hd xs'']) @\n  aasa (([] @ [hd xs'']) @ aasa (xs' @ xs'') (xs' @ [hd xs'']))\n   ([] @ [hd xs'']) =\n  vs @ xs\n  \\<forall>as A asa.\n     (\\<not> mcp as A asa \\<or>\n      prefix asa as \\<and>\n      asa \\<in> A \\<and>\n      (\\<forall>asb.\n          (\\<not> prefix asb as \\<or> asb \\<notin> A) \\<or>\n          length asb \\<le> length asa)) \\<and>\n     (mcp as A asa \\<or>\n      \\<not> prefix asa as \\<or>\n      asa \\<notin> A \\<or>\n      (prefix (aas asa A as) as \\<and> aas asa A as \\<in> A) \\<and>\n      \\<not> length (aas asa A as) \\<le> length asa)\n\ngoal (1 subgoal):\n 1. \\<not> prefix (aas vs V (vs @ xs' @ [hd xs'']))\n            (vs @ xs' @ [hd xs'']) \\<or>\n    aas vs V (vs @ xs' @ [hd xs'']) \\<notin> V \\<or>\n    length (aas vs V (vs @ xs' @ [hd xs''])) \\<le> length vs", "by (metis (no_types) \\<open>mcp (vs @ xs) V vs\\<close> local.Cons prefix_append)"], ["proof (state)\nthis:\n  \\<not> prefix (aas vs V (vs @ xs' @ [hd xs'']))\n          (vs @ xs' @ [hd xs'']) \\<or>\n  aas vs V (vs @ xs' @ [hd xs'']) \\<notin> V \\<or>\n  length (aas vs V (vs @ xs' @ [hd xs''])) \\<le> length vs\n\ngoal (1 subgoal):\n 1. \\<lbrakk>xs = xs' @ xs''; xs'' \\<noteq> []; mcp (vs @ xs) V vs\\<rbrakk>\n    \\<Longrightarrow> mcp (vs @ xs' @ [hd xs'']) V vs", "then"], ["proof (chain)\npicking this:\n  \\<not> prefix (aas vs V (vs @ xs' @ [hd xs'']))\n          (vs @ xs' @ [hd xs'']) \\<or>\n  aas vs V (vs @ xs' @ [hd xs'']) \\<notin> V \\<or>\n  length (aas vs V (vs @ xs' @ [hd xs''])) \\<le> length vs", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> prefix (aas vs V (vs @ xs' @ [hd xs'']))\n          (vs @ xs' @ [hd xs'']) \\<or>\n  aas vs V (vs @ xs' @ [hd xs'']) \\<notin> V \\<or>\n  length (aas vs V (vs @ xs' @ [hd xs''])) \\<le> length vs\n\ngoal (1 subgoal):\n 1. mcp (vs @ xs' @ [hd xs'']) V vs", "using f1"], ["proof (prove)\nusing this:\n  \\<not> prefix (aas vs V (vs @ xs' @ [hd xs'']))\n          (vs @ xs' @ [hd xs'']) \\<or>\n  aas vs V (vs @ xs' @ [hd xs'']) \\<notin> V \\<or>\n  length (aas vs V (vs @ xs' @ [hd xs''])) \\<le> length vs\n  \\<forall>as A asa.\n     (\\<not> mcp as A asa \\<or>\n      prefix asa as \\<and>\n      asa \\<in> A \\<and>\n      (\\<forall>asb.\n          (\\<not> prefix asb as \\<or> asb \\<notin> A) \\<or>\n          length asb \\<le> length asa)) \\<and>\n     (mcp as A asa \\<or>\n      \\<not> prefix asa as \\<or>\n      asa \\<notin> A \\<or>\n      (prefix (aas asa A as) as \\<and> aas asa A as \\<in> A) \\<and>\n      \\<not> length (aas asa A as) \\<le> length asa)\n\ngoal (1 subgoal):\n 1. mcp (vs @ xs' @ [hd xs'']) V vs", "by (meson \\<open>mcp (vs @ xs) V vs\\<close> prefixI)"], ["proof (state)\nthis:\n  mcp (vs @ xs' @ [hd xs'']) V vs\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  mcp (vs @ xs' @ [hd xs'']) V vs\n\ngoal (1 subgoal):\n 1. \\<lbrakk>xs' = a # list; xs \\<noteq> xs'\\<rbrakk>\n    \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  mcp (vs @ xs' @ [hd xs'']) V vs", "have \"vs @ butlast (xs' @ [hd xs'']) \\<in> TS M2 M1 \\<Omega> V m i\""], ["proof (prove)\nusing this:\n  mcp (vs @ xs' @ [hd xs'']) V vs\n\ngoal (1 subgoal):\n 1. vs @ butlast (xs' @ [hd xs'']) \\<in> TS M2 M1 \\<Omega> V m i", "using TS_immediate_prefix_containment\n              [OF \\<open>vs @ (xs' @ [hd xs'']) \\<in> TS M2 M1 \\<Omega> V m i\\<close> _ \\<open>0 < i\\<close>]"], ["proof (prove)\nusing this:\n  mcp (vs @ xs' @ [hd xs'']) V vs\n  mcp (vs @ xs' @ [hd xs'']) V vs \\<Longrightarrow>\n  vs @ butlast (xs' @ [hd xs'']) \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ butlast (xs' @ [hd xs'']) \\<in> TS M2 M1 \\<Omega> V m i", "by simp"], ["proof (state)\nthis:\n  vs @ butlast (xs' @ [hd xs'']) \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<lbrakk>xs' = a # list; xs \\<noteq> xs'\\<rbrakk>\n    \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "moreover"], ["proof (state)\nthis:\n  vs @ butlast (xs' @ [hd xs'']) \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<lbrakk>xs' = a # list; xs \\<noteq> xs'\\<rbrakk>\n    \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "have \"xs' = butlast (xs' @ [hd xs''])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. xs' = butlast (xs' @ [hd xs''])", "using \\<open>xs'' \\<noteq> []\\<close>"], ["proof (prove)\nusing this:\n  xs'' \\<noteq> []\n\ngoal (1 subgoal):\n 1. xs' = butlast (xs' @ [hd xs''])", "by simp"], ["proof (state)\nthis:\n  xs' = butlast (xs' @ [hd xs''])\n\ngoal (1 subgoal):\n 1. \\<lbrakk>xs' = a # list; xs \\<noteq> xs'\\<rbrakk>\n    \\<Longrightarrow> vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "ultimately"], ["proof (chain)\npicking this:\n  vs @ butlast (xs' @ [hd xs'']) \\<in> TS M2 M1 \\<Omega> V m i\n  xs' = butlast (xs' @ [hd xs''])", "show ?thesis"], ["proof (prove)\nusing this:\n  vs @ butlast (xs' @ [hd xs'']) \\<in> TS M2 M1 \\<Omega> V m i\n  xs' = butlast (xs' @ [hd xs''])\n\ngoal (1 subgoal):\n 1. vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i", "by simp"], ["proof (state)\nthis:\n  vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  vs @ xs' \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma C_index :\n  assumes \"vs @ xs \\<in> C M2 M1 \\<Omega> V m i\"\n  and     \"mcp (vs@xs) V vs\"\nshows \"Suc (length xs) = i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Suc (length xs) = i", "using assms"], ["proof (prove)\nusing this:\n  vs @ xs \\<in> C M2 M1 \\<Omega> V m i\n  mcp (vs @ xs) V vs\n\ngoal (1 subgoal):\n 1. Suc (length xs) = i", "proof (induction xs arbitrary: i rule: rev_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       \\<lbrakk>vs @ [] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ []) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length []) = i\n 2. \\<And>x xs i.\n       \\<lbrakk>\\<And>i.\n                   \\<lbrakk>vs @ xs \\<in> C M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs\\<rbrakk>\n                   \\<Longrightarrow> Suc (length xs) = i;\n        vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ xs @ [x]) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length (xs @ [x])) = i", "case Nil"], ["proof (state)\nthis:\n  vs @ [] \\<in> C M2 M1 \\<Omega> V m i\n  mcp (vs @ []) V vs\n\ngoal (2 subgoals):\n 1. \\<And>i.\n       \\<lbrakk>vs @ [] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ []) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length []) = i\n 2. \\<And>x xs i.\n       \\<lbrakk>\\<And>i.\n                   \\<lbrakk>vs @ xs \\<in> C M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs\\<rbrakk>\n                   \\<Longrightarrow> Suc (length xs) = i;\n        vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ xs @ [x]) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length (xs @ [x])) = i", "then"], ["proof (chain)\npicking this:\n  vs @ [] \\<in> C M2 M1 \\<Omega> V m i\n  mcp (vs @ []) V vs", "have \"vs @ [] \\<in> C M2 M1 \\<Omega> V m 1\""], ["proof (prove)\nusing this:\n  vs @ [] \\<in> C M2 M1 \\<Omega> V m i\n  mcp (vs @ []) V vs\n\ngoal (1 subgoal):\n 1. vs @ [] \\<in> C M2 M1 \\<Omega> V m 1", "by auto"], ["proof (state)\nthis:\n  vs @ [] \\<in> C M2 M1 \\<Omega> V m 1\n\ngoal (2 subgoals):\n 1. \\<And>i.\n       \\<lbrakk>vs @ [] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ []) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length []) = i\n 2. \\<And>x xs i.\n       \\<lbrakk>\\<And>i.\n                   \\<lbrakk>vs @ xs \\<in> C M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs\\<rbrakk>\n                   \\<Longrightarrow> Suc (length xs) = i;\n        vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ xs @ [x]) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length (xs @ [x])) = i", "then"], ["proof (chain)\npicking this:\n  vs @ [] \\<in> C M2 M1 \\<Omega> V m 1", "have \"vs @ [] \\<in> C M2 M1 \\<Omega> V m (Suc (length []))\""], ["proof (prove)\nusing this:\n  vs @ [] \\<in> C M2 M1 \\<Omega> V m 1\n\ngoal (1 subgoal):\n 1. vs @ [] \\<in> C M2 M1 \\<Omega> V m (Suc (length []))", "by simp"], ["proof (state)\nthis:\n  vs @ [] \\<in> C M2 M1 \\<Omega> V m (Suc (length []))\n\ngoal (2 subgoals):\n 1. \\<And>i.\n       \\<lbrakk>vs @ [] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ []) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length []) = i\n 2. \\<And>x xs i.\n       \\<lbrakk>\\<And>i.\n                   \\<lbrakk>vs @ xs \\<in> C M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs\\<rbrakk>\n                   \\<Longrightarrow> Suc (length xs) = i;\n        vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ xs @ [x]) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length (xs @ [x])) = i", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. Suc (length []) = i", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. Suc (length []) \\<noteq> i \\<Longrightarrow> False", "assume \"Suc (length []) \\<noteq> i\""], ["proof (state)\nthis:\n  Suc (length []) \\<noteq> i\n\ngoal (1 subgoal):\n 1. Suc (length []) \\<noteq> i \\<Longrightarrow> False", "moreover"], ["proof (state)\nthis:\n  Suc (length []) \\<noteq> i\n\ngoal (1 subgoal):\n 1. Suc (length []) \\<noteq> i \\<Longrightarrow> False", "have \"vs @ [] \\<in> C M2 M1 \\<Omega> V m i \\<inter> C M2 M1 \\<Omega> V m (Suc (length []))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ []\n    \\<in> C M2 M1 \\<Omega> V m i \\<inter>\n          C M2 M1 \\<Omega> V m (Suc (length []))", "using Nil.prems(1) \\<open>vs @ [] \\<in> C M2 M1 \\<Omega> V m (Suc (length []))\\<close>"], ["proof (prove)\nusing this:\n  vs @ [] \\<in> C M2 M1 \\<Omega> V m i\n  vs @ [] \\<in> C M2 M1 \\<Omega> V m (Suc (length []))\n\ngoal (1 subgoal):\n 1. vs @ []\n    \\<in> C M2 M1 \\<Omega> V m i \\<inter>\n          C M2 M1 \\<Omega> V m (Suc (length []))", "by auto"], ["proof (state)\nthis:\n  vs @ []\n  \\<in> C M2 M1 \\<Omega> V m i \\<inter>\n        C M2 M1 \\<Omega> V m (Suc (length []))\n\ngoal (1 subgoal):\n 1. Suc (length []) \\<noteq> i \\<Longrightarrow> False", "ultimately"], ["proof (chain)\npicking this:\n  Suc (length []) \\<noteq> i\n  vs @ []\n  \\<in> C M2 M1 \\<Omega> V m i \\<inter>\n        C M2 M1 \\<Omega> V m (Suc (length []))", "show \"False\""], ["proof (prove)\nusing this:\n  Suc (length []) \\<noteq> i\n  vs @ []\n  \\<in> C M2 M1 \\<Omega> V m i \\<inter>\n        C M2 M1 \\<Omega> V m (Suc (length []))\n\ngoal (1 subgoal):\n 1. False", "using C_disj"], ["proof (prove)\nusing this:\n  Suc (length []) \\<noteq> i\n  vs @ []\n  \\<in> C M2 M1 \\<Omega> V m i \\<inter>\n        C M2 M1 \\<Omega> V m (Suc (length []))\n  ?i \\<noteq> ?j \\<Longrightarrow>\n  C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i \\<inter>\n  C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?j =\n  {}\n\ngoal (1 subgoal):\n 1. False", "by blast"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Suc (length []) = i\n\ngoal (1 subgoal):\n 1. \\<And>x xs i.\n       \\<lbrakk>\\<And>i.\n                   \\<lbrakk>vs @ xs \\<in> C M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs\\<rbrakk>\n                   \\<Longrightarrow> Suc (length xs) = i;\n        vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ xs @ [x]) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length (xs @ [x])) = i", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x xs i.\n       \\<lbrakk>\\<And>i.\n                   \\<lbrakk>vs @ xs \\<in> C M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs\\<rbrakk>\n                   \\<Longrightarrow> Suc (length xs) = i;\n        vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ xs @ [x]) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length (xs @ [x])) = i", "case (snoc x xs')"], ["proof (state)\nthis:\n  \\<lbrakk>vs @ xs' \\<in> C M2 M1 \\<Omega> V m ?i;\n   mcp (vs @ xs') V vs\\<rbrakk>\n  \\<Longrightarrow> Suc (length xs') = ?i\n  vs @ xs' @ [x] \\<in> C M2 M1 \\<Omega> V m i\n  mcp (vs @ xs' @ [x]) V vs\n\ngoal (1 subgoal):\n 1. \\<And>x xs i.\n       \\<lbrakk>\\<And>i.\n                   \\<lbrakk>vs @ xs \\<in> C M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs\\<rbrakk>\n                   \\<Longrightarrow> Suc (length xs) = i;\n        vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ xs @ [x]) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length (xs @ [x])) = i", "let ?TS = \"\\<lambda> n . TS M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x xs i.\n       \\<lbrakk>\\<And>i.\n                   \\<lbrakk>vs @ xs \\<in> C M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs\\<rbrakk>\n                   \\<Longrightarrow> Suc (length xs) = i;\n        vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ xs @ [x]) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length (xs @ [x])) = i", "let ?C = \"\\<lambda> n . C M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x xs i.\n       \\<lbrakk>\\<And>i.\n                   \\<lbrakk>vs @ xs \\<in> C M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs\\<rbrakk>\n                   \\<Longrightarrow> Suc (length xs) = i;\n        vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ xs @ [x]) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length (xs @ [x])) = i", "let ?RM = \"\\<lambda> n . RM M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x xs i.\n       \\<lbrakk>\\<And>i.\n                   \\<lbrakk>vs @ xs \\<in> C M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs\\<rbrakk>\n                   \\<Longrightarrow> Suc (length xs) = i;\n        vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ xs @ [x]) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length (xs @ [x])) = i", "have \"vs @ xs' @ [x] \\<notin> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xs' @ [x] \\<notin> V", "using snoc.prems(2)"], ["proof (prove)\nusing this:\n  mcp (vs @ xs' @ [x]) V vs\n\ngoal (1 subgoal):\n 1. vs @ xs' @ [x] \\<notin> V", "by auto"], ["proof (state)\nthis:\n  vs @ xs' @ [x] \\<notin> V\n\ngoal (1 subgoal):\n 1. \\<And>x xs i.\n       \\<lbrakk>\\<And>i.\n                   \\<lbrakk>vs @ xs \\<in> C M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs\\<rbrakk>\n                   \\<Longrightarrow> Suc (length xs) = i;\n        vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ xs @ [x]) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length (xs @ [x])) = i", "then"], ["proof (chain)\npicking this:\n  vs @ xs' @ [x] \\<notin> V", "have \"vs @ xs' @ [x] \\<notin> ?C 1\""], ["proof (prove)\nusing this:\n  vs @ xs' @ [x] \\<notin> V\n\ngoal (1 subgoal):\n 1. vs @ xs' @ [x] \\<notin> C M2 M1 \\<Omega> V m 1", "by auto"], ["proof (state)\nthis:\n  vs @ xs' @ [x] \\<notin> C M2 M1 \\<Omega> V m 1\n\ngoal (1 subgoal):\n 1. \\<And>x xs i.\n       \\<lbrakk>\\<And>i.\n                   \\<lbrakk>vs @ xs \\<in> C M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs\\<rbrakk>\n                   \\<Longrightarrow> Suc (length xs) = i;\n        vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ xs @ [x]) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length (xs @ [x])) = i", "moreover"], ["proof (state)\nthis:\n  vs @ xs' @ [x] \\<notin> C M2 M1 \\<Omega> V m 1\n\ngoal (1 subgoal):\n 1. \\<And>x xs i.\n       \\<lbrakk>\\<And>i.\n                   \\<lbrakk>vs @ xs \\<in> C M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs\\<rbrakk>\n                   \\<Longrightarrow> Suc (length xs) = i;\n        vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ xs @ [x]) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length (xs @ [x])) = i", "have \"vs @ xs' @ [x] \\<notin> ?C 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xs' @ [x] \\<notin> C M2 M1 \\<Omega> V m 0", "by auto"], ["proof (state)\nthis:\n  vs @ xs' @ [x] \\<notin> C M2 M1 \\<Omega> V m 0\n\ngoal (1 subgoal):\n 1. \\<And>x xs i.\n       \\<lbrakk>\\<And>i.\n                   \\<lbrakk>vs @ xs \\<in> C M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs\\<rbrakk>\n                   \\<Longrightarrow> Suc (length xs) = i;\n        vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ xs @ [x]) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length (xs @ [x])) = i", "ultimately"], ["proof (chain)\npicking this:\n  vs @ xs' @ [x] \\<notin> C M2 M1 \\<Omega> V m 1\n  vs @ xs' @ [x] \\<notin> C M2 M1 \\<Omega> V m 0", "have \"1 < i\""], ["proof (prove)\nusing this:\n  vs @ xs' @ [x] \\<notin> C M2 M1 \\<Omega> V m 1\n  vs @ xs' @ [x] \\<notin> C M2 M1 \\<Omega> V m 0\n\ngoal (1 subgoal):\n 1. 1 < i", "using snoc.prems(1)"], ["proof (prove)\nusing this:\n  vs @ xs' @ [x] \\<notin> C M2 M1 \\<Omega> V m 1\n  vs @ xs' @ [x] \\<notin> C M2 M1 \\<Omega> V m 0\n  vs @ xs' @ [x] \\<in> C M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. 1 < i", "by (metis less_one linorder_neqE_nat)"], ["proof (state)\nthis:\n  1 < i\n\ngoal (1 subgoal):\n 1. \\<And>x xs i.\n       \\<lbrakk>\\<And>i.\n                   \\<lbrakk>vs @ xs \\<in> C M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs\\<rbrakk>\n                   \\<Longrightarrow> Suc (length xs) = i;\n        vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ xs @ [x]) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length (xs @ [x])) = i", "then"], ["proof (chain)\npicking this:\n  1 < i", "have \"vs @ butlast (xs' @ [x]) \\<in> C M2 M1 \\<Omega> V m (i-1)\""], ["proof (prove)\nusing this:\n  1 < i\n\ngoal (1 subgoal):\n 1. vs @ butlast (xs' @ [x]) \\<in> C M2 M1 \\<Omega> V m (i - 1)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. 1 < i \\<Longrightarrow>\n    vs @ butlast (xs' @ [x]) \\<in> C M2 M1 \\<Omega> V m (i - 1)", "have \"Suc 0 < i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Suc 0 < i", "using \\<open>1 < i\\<close>"], ["proof (prove)\nusing this:\n  1 < i\n\ngoal (1 subgoal):\n 1. Suc 0 < i", "by auto"], ["proof (state)\nthis:\n  Suc 0 < i\n\ngoal (1 subgoal):\n 1. 1 < i \\<Longrightarrow>\n    vs @ butlast (xs' @ [x]) \\<in> C M2 M1 \\<Omega> V m (i - 1)", "then"], ["proof (chain)\npicking this:\n  Suc 0 < i", "have f1: \"Suc (i - Suc (Suc 0)) = i - Suc 0\""], ["proof (prove)\nusing this:\n  Suc 0 < i\n\ngoal (1 subgoal):\n 1. Suc (i - Suc (Suc 0)) = i - Suc 0", "using Suc_diff_Suc"], ["proof (prove)\nusing this:\n  Suc 0 < i\n  ?n < ?m \\<Longrightarrow> Suc (?m - Suc ?n) = ?m - ?n\n\ngoal (1 subgoal):\n 1. Suc (i - Suc (Suc 0)) = i - Suc 0", "by presburger"], ["proof (state)\nthis:\n  Suc (i - Suc (Suc 0)) = i - Suc 0\n\ngoal (1 subgoal):\n 1. 1 < i \\<Longrightarrow>\n    vs @ butlast (xs' @ [x]) \\<in> C M2 M1 \\<Omega> V m (i - 1)", "have \"0 < i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < i", "by (metis (no_types) One_nat_def Suc_lessD \\<open>1 < i\\<close>)"], ["proof (state)\nthis:\n  0 < i\n\ngoal (1 subgoal):\n 1. 1 < i \\<Longrightarrow>\n    vs @ butlast (xs' @ [x]) \\<in> C M2 M1 \\<Omega> V m (i - 1)", "then"], ["proof (chain)\npicking this:\n  0 < i", "show ?thesis"], ["proof (prove)\nusing this:\n  0 < i\n\ngoal (1 subgoal):\n 1. vs @ butlast (xs' @ [x]) \\<in> C M2 M1 \\<Omega> V m (i - 1)", "using f1"], ["proof (prove)\nusing this:\n  0 < i\n  Suc (i - Suc (Suc 0)) = i - Suc 0\n\ngoal (1 subgoal):\n 1. vs @ butlast (xs' @ [x]) \\<in> C M2 M1 \\<Omega> V m (i - 1)", "by (metis C_immediate_prefix_containment DiffD1 One_nat_def Suc_pred' snoc.prems(1) \n                    snoc_eq_iff_butlast)"], ["proof (state)\nthis:\n  vs @ butlast (xs' @ [x]) \\<in> C M2 M1 \\<Omega> V m (i - 1)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  vs @ butlast (xs' @ [x]) \\<in> C M2 M1 \\<Omega> V m (i - 1)\n\ngoal (1 subgoal):\n 1. \\<And>x xs i.\n       \\<lbrakk>\\<And>i.\n                   \\<lbrakk>vs @ xs \\<in> C M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs\\<rbrakk>\n                   \\<Longrightarrow> Suc (length xs) = i;\n        vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ xs @ [x]) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length (xs @ [x])) = i", "moreover"], ["proof (state)\nthis:\n  vs @ butlast (xs' @ [x]) \\<in> C M2 M1 \\<Omega> V m (i - 1)\n\ngoal (1 subgoal):\n 1. \\<And>x xs i.\n       \\<lbrakk>\\<And>i.\n                   \\<lbrakk>vs @ xs \\<in> C M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs\\<rbrakk>\n                   \\<Longrightarrow> Suc (length xs) = i;\n        vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ xs @ [x]) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length (xs @ [x])) = i", "have \"mcp (vs @ butlast (xs' @ [x])) V vs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mcp (vs @ butlast (xs' @ [x])) V vs", "by (meson mcp_prefix_of_suffix prefixeq_butlast snoc.prems(2))"], ["proof (state)\nthis:\n  mcp (vs @ butlast (xs' @ [x])) V vs\n\ngoal (1 subgoal):\n 1. \\<And>x xs i.\n       \\<lbrakk>\\<And>i.\n                   \\<lbrakk>vs @ xs \\<in> C M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs\\<rbrakk>\n                   \\<Longrightarrow> Suc (length xs) = i;\n        vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ xs @ [x]) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length (xs @ [x])) = i", "ultimately"], ["proof (chain)\npicking this:\n  vs @ butlast (xs' @ [x]) \\<in> C M2 M1 \\<Omega> V m (i - 1)\n  mcp (vs @ butlast (xs' @ [x])) V vs", "have \"Suc (length xs') = i-1\""], ["proof (prove)\nusing this:\n  vs @ butlast (xs' @ [x]) \\<in> C M2 M1 \\<Omega> V m (i - 1)\n  mcp (vs @ butlast (xs' @ [x])) V vs\n\ngoal (1 subgoal):\n 1. Suc (length xs') = i - 1", "using snoc.IH"], ["proof (prove)\nusing this:\n  vs @ butlast (xs' @ [x]) \\<in> C M2 M1 \\<Omega> V m (i - 1)\n  mcp (vs @ butlast (xs' @ [x])) V vs\n  \\<lbrakk>vs @ xs' \\<in> C M2 M1 \\<Omega> V m ?i;\n   mcp (vs @ xs') V vs\\<rbrakk>\n  \\<Longrightarrow> Suc (length xs') = ?i\n\ngoal (1 subgoal):\n 1. Suc (length xs') = i - 1", "by simp"], ["proof (state)\nthis:\n  Suc (length xs') = i - 1\n\ngoal (1 subgoal):\n 1. \\<And>x xs i.\n       \\<lbrakk>\\<And>i.\n                   \\<lbrakk>vs @ xs \\<in> C M2 M1 \\<Omega> V m i;\n                    mcp (vs @ xs) V vs\\<rbrakk>\n                   \\<Longrightarrow> Suc (length xs) = i;\n        vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m i;\n        mcp (vs @ xs @ [x]) V vs\\<rbrakk>\n       \\<Longrightarrow> Suc (length (xs @ [x])) = i", "then"], ["proof (chain)\npicking this:\n  Suc (length xs') = i - 1", "show ?case"], ["proof (prove)\nusing this:\n  Suc (length xs') = i - 1\n\ngoal (1 subgoal):\n 1. Suc (length (xs' @ [x])) = i", "by auto"], ["proof (state)\nthis:\n  Suc (length (xs' @ [x])) = i\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma TS_index :\n  assumes \"vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\"\n  and     \"mcp (vs@xs) V vs\"\nshows \"Suc (length xs) \\<le> i\" \"vs@xs \\<in> C M2 M1 \\<Omega> V m (Suc (length xs))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Suc (length xs) \\<le> i &&&\n    vs @ xs \\<in> C M2 M1 \\<Omega> V m (Suc (length xs))", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. Suc (length xs) \\<le> i\n 2. vs @ xs \\<in> C M2 M1 \\<Omega> V m (Suc (length xs))", "let ?TS = \"\\<lambda> n . TS M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (2 subgoals):\n 1. Suc (length xs) \\<le> i\n 2. vs @ xs \\<in> C M2 M1 \\<Omega> V m (Suc (length xs))", "let ?C = \"\\<lambda> n . C M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (2 subgoals):\n 1. Suc (length xs) \\<le> i\n 2. vs @ xs \\<in> C M2 M1 \\<Omega> V m (Suc (length xs))", "let ?RM = \"\\<lambda> n . RM M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (2 subgoals):\n 1. Suc (length xs) \\<le> i\n 2. vs @ xs \\<in> C M2 M1 \\<Omega> V m (Suc (length xs))", "obtain j where \"j < Suc i\" \"vs@xs \\<in> ?C j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<lbrakk>j < Suc i; vs @ xs \\<in> C M2 M1 \\<Omega> V m j\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using TS_union[of M2 M1 \\<Omega> V m i]"], ["proof (prove)\nusing this:\n  TS M2 M1 \\<Omega> V m i =\n  \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i])\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<lbrakk>j < Suc i; vs @ xs \\<in> C M2 M1 \\<Omega> V m j\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis (full_types) UN_iff assms(1) atLeastLessThan_iff set_upt)"], ["proof (state)\nthis:\n  j < Suc i\n  vs @ xs \\<in> C M2 M1 \\<Omega> V m j\n\ngoal (2 subgoals):\n 1. Suc (length xs) \\<le> i\n 2. vs @ xs \\<in> C M2 M1 \\<Omega> V m (Suc (length xs))", "then"], ["proof (chain)\npicking this:\n  j < Suc i\n  vs @ xs \\<in> C M2 M1 \\<Omega> V m j", "have \"Suc (length xs) = j\""], ["proof (prove)\nusing this:\n  j < Suc i\n  vs @ xs \\<in> C M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. Suc (length xs) = j", "using C_index assms(2)"], ["proof (prove)\nusing this:\n  j < Suc i\n  vs @ xs \\<in> C M2 M1 \\<Omega> V m j\n  \\<lbrakk>?vs @ ?xs \\<in> C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i;\n   mcp (?vs @ ?xs) ?V ?vs\\<rbrakk>\n  \\<Longrightarrow> Suc (length ?xs) = ?i\n  mcp (vs @ xs) V vs\n\ngoal (1 subgoal):\n 1. Suc (length xs) = j", "by blast"], ["proof (state)\nthis:\n  Suc (length xs) = j\n\ngoal (2 subgoals):\n 1. Suc (length xs) \\<le> i\n 2. vs @ xs \\<in> C M2 M1 \\<Omega> V m (Suc (length xs))", "then"], ["proof (chain)\npicking this:\n  Suc (length xs) = j", "show \"Suc (length xs) \\<le> i\""], ["proof (prove)\nusing this:\n  Suc (length xs) = j\n\ngoal (1 subgoal):\n 1. Suc (length xs) \\<le> i", "using \\<open>j < Suc i\\<close>"], ["proof (prove)\nusing this:\n  Suc (length xs) = j\n  j < Suc i\n\ngoal (1 subgoal):\n 1. Suc (length xs) \\<le> i", "by auto"], ["proof (state)\nthis:\n  Suc (length xs) \\<le> i\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> C M2 M1 \\<Omega> V m (Suc (length xs))", "show \"vs@xs \\<in> C M2 M1 \\<Omega> V m (Suc (length xs))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xs \\<in> C M2 M1 \\<Omega> V m (Suc (length xs))", "using \\<open>vs@xs \\<in> ?C j\\<close> \\<open>Suc (length xs) = j\\<close>"], ["proof (prove)\nusing this:\n  vs @ xs \\<in> C M2 M1 \\<Omega> V m j\n  Suc (length xs) = j\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> C M2 M1 \\<Omega> V m (Suc (length xs))", "by auto"], ["proof (state)\nthis:\n  vs @ xs \\<in> C M2 M1 \\<Omega> V m (Suc (length xs))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma C_extension_options :\n  assumes \"vs @ xs \\<in> C M2 M1 \\<Omega> V m i\"\n  and     \"mcp (vs @ xs @ [x]) V vs\"\n  and     \"x \\<in> inputs M2\"\n  and     \"0 < i\"\nshows \"vs@xs@[x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or> vs@xs \\<in> RM M2 M1 \\<Omega> V m i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or>\n    vs @ xs \\<in> RM M2 M1 \\<Omega> V m i", "proof (cases \"vs@xs \\<in> RM M2 M1 \\<Omega> V m i\")"], ["proof (state)\ngoal (2 subgoals):\n 1. vs @ xs \\<in> RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or>\n    vs @ xs \\<in> RM M2 M1 \\<Omega> V m i\n 2. vs @ xs \\<notin> RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or>\n    vs @ xs \\<in> RM M2 M1 \\<Omega> V m i", "case True"], ["proof (state)\nthis:\n  vs @ xs \\<in> RM M2 M1 \\<Omega> V m i\n\ngoal (2 subgoals):\n 1. vs @ xs \\<in> RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or>\n    vs @ xs \\<in> RM M2 M1 \\<Omega> V m i\n 2. vs @ xs \\<notin> RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or>\n    vs @ xs \\<in> RM M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  vs @ xs \\<in> RM M2 M1 \\<Omega> V m i", "show ?thesis"], ["proof (prove)\nusing this:\n  vs @ xs \\<in> RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or>\n    vs @ xs \\<in> RM M2 M1 \\<Omega> V m i", "by auto"], ["proof (state)\nthis:\n  vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or>\n  vs @ xs \\<in> RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ xs \\<notin> RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or>\n    vs @ xs \\<in> RM M2 M1 \\<Omega> V m i", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ xs \\<notin> RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or>\n    vs @ xs \\<in> RM M2 M1 \\<Omega> V m i", "case False"], ["proof (state)\nthis:\n  vs @ xs \\<notin> RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ xs \\<notin> RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or>\n    vs @ xs \\<in> RM M2 M1 \\<Omega> V m i", "let ?TS = \"\\<lambda> n . TS M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ xs \\<notin> RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or>\n    vs @ xs \\<in> RM M2 M1 \\<Omega> V m i", "let ?C = \"\\<lambda> n . C M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ xs \\<notin> RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or>\n    vs @ xs \\<in> RM M2 M1 \\<Omega> V m i", "let ?RM = \"\\<lambda> n . RM M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ xs \\<notin> RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or>\n    vs @ xs \\<in> RM M2 M1 \\<Omega> V m i", "obtain k where \"i = Suc k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>k. i = Suc k \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using assms(4) gr0_implies_Suc"], ["proof (prove)\nusing this:\n  0 < i\n  0 < ?n \\<Longrightarrow> \\<exists>m. ?n = Suc m\n\ngoal (1 subgoal):\n 1. (\\<And>k. i = Suc k \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by blast"], ["proof (state)\nthis:\n  i = Suc k\n\ngoal (1 subgoal):\n 1. vs @ xs \\<notin> RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or>\n    vs @ xs \\<in> RM M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  i = Suc k", "have \"?C (Suc i) = append_set (?C i - ?RM i) (inputs M2) - ?TS i\""], ["proof (prove)\nusing this:\n  i = Suc k\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc i) =\n    append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n     (inputs M2) -\n    TS M2 M1 \\<Omega> V m i", "using C.simps(3)"], ["proof (prove)\nusing this:\n  i = Suc k\n  C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc (Suc ?v)) =\n  append_set\n   (C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v) -\n    RM ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v))\n   (inputs ?M2.0) -\n  TS ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v)\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc i) =\n    append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n     (inputs M2) -\n    TS M2 M1 \\<Omega> V m i", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc i) =\n  append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ xs \\<notin> RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or>\n    vs @ xs \\<in> RM M2 M1 \\<Omega> V m i", "moreover"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc i) =\n  append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ xs \\<notin> RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or>\n    vs @ xs \\<in> RM M2 M1 \\<Omega> V m i", "have \"vs@xs \\<in> ?C i - ?RM i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xs \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "using assms(1) False"], ["proof (prove)\nusing this:\n  vs @ xs \\<in> C M2 M1 \\<Omega> V m i\n  vs @ xs \\<notin> RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "by blast"], ["proof (state)\nthis:\n  vs @ xs \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ xs \\<notin> RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or>\n    vs @ xs \\<in> RM M2 M1 \\<Omega> V m i", "ultimately"], ["proof (chain)\npicking this:\n  C M2 M1 \\<Omega> V m (Suc i) =\n  append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m i\n  vs @ xs \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "have \"vs@xs@[x] \\<in> append_set (?C i - ?RM i) (inputs M2)\""], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m (Suc i) =\n  append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m i\n  vs @ xs \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ xs @ [x]\n    \\<in> append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n           (inputs M2)", "by (simp add: assms(3))"], ["proof (state)\nthis:\n  vs @ xs @ [x]\n  \\<in> append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n         (inputs M2)\n\ngoal (1 subgoal):\n 1. vs @ xs \\<notin> RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or>\n    vs @ xs \\<in> RM M2 M1 \\<Omega> V m i", "moreover"], ["proof (state)\nthis:\n  vs @ xs @ [x]\n  \\<in> append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n         (inputs M2)\n\ngoal (1 subgoal):\n 1. vs @ xs \\<notin> RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or>\n    vs @ xs \\<in> RM M2 M1 \\<Omega> V m i", "have \"vs@xs@[x] \\<notin> ?TS i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xs @ [x] \\<notin> TS M2 M1 \\<Omega> V m i", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> vs @ xs @ [x] \\<notin> TS M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    False", "assume \"\\<not> vs @ xs @ [x] \\<notin> ?TS i\""], ["proof (state)\nthis:\n  \\<not> vs @ xs @ [x] \\<notin> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<not> vs @ xs @ [x] \\<notin> TS M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  \\<not> vs @ xs @ [x] \\<notin> TS M2 M1 \\<Omega> V m i", "obtain j where \"j < Suc i\" \"vs@xs@[x] \\<in> ?C j\""], ["proof (prove)\nusing this:\n  \\<not> vs @ xs @ [x] \\<notin> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<lbrakk>j < Suc i;\n         vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m j\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using TS_union[of M2 M1 \\<Omega> V m i]"], ["proof (prove)\nusing this:\n  \\<not> vs @ xs @ [x] \\<notin> TS M2 M1 \\<Omega> V m i\n  TS M2 M1 \\<Omega> V m i =\n  \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i])\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<lbrakk>j < Suc i;\n         vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m j\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  j < Suc i\n  vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. \\<not> vs @ xs @ [x] \\<notin> TS M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  j < Suc i\n  vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m j", "have \"Suc (length (xs@[x])) = j\""], ["proof (prove)\nusing this:\n  j < Suc i\n  vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. Suc (length (xs @ [x])) = j", "using C_index assms(2)"], ["proof (prove)\nusing this:\n  j < Suc i\n  vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m j\n  \\<lbrakk>?vs @ ?xs \\<in> C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i;\n   mcp (?vs @ ?xs) ?V ?vs\\<rbrakk>\n  \\<Longrightarrow> Suc (length ?xs) = ?i\n  mcp (vs @ xs @ [x]) V vs\n\ngoal (1 subgoal):\n 1. Suc (length (xs @ [x])) = j", "by blast"], ["proof (state)\nthis:\n  Suc (length (xs @ [x])) = j\n\ngoal (1 subgoal):\n 1. \\<not> vs @ xs @ [x] \\<notin> TS M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  Suc (length (xs @ [x])) = j", "have \"Suc (length (xs@[x])) < Suc i\""], ["proof (prove)\nusing this:\n  Suc (length (xs @ [x])) = j\n\ngoal (1 subgoal):\n 1. Suc (length (xs @ [x])) < Suc i", "using \\<open>j < Suc i\\<close>"], ["proof (prove)\nusing this:\n  Suc (length (xs @ [x])) = j\n  j < Suc i\n\ngoal (1 subgoal):\n 1. Suc (length (xs @ [x])) < Suc i", "by auto"], ["proof (state)\nthis:\n  Suc (length (xs @ [x])) < Suc i\n\ngoal (1 subgoal):\n 1. \\<not> vs @ xs @ [x] \\<notin> TS M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    False", "moreover"], ["proof (state)\nthis:\n  Suc (length (xs @ [x])) < Suc i\n\ngoal (1 subgoal):\n 1. \\<not> vs @ xs @ [x] \\<notin> TS M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    False", "have \"Suc (length xs) = i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Suc (length xs) = i", "using C_index"], ["proof (prove)\nusing this:\n  \\<lbrakk>?vs @ ?xs \\<in> C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i;\n   mcp (?vs @ ?xs) ?V ?vs\\<rbrakk>\n  \\<Longrightarrow> Suc (length ?xs) = ?i\n\ngoal (1 subgoal):\n 1. Suc (length xs) = i", "by (metis assms(1) assms(2) mcp_prefix_of_suffix prefixI)"], ["proof (state)\nthis:\n  Suc (length xs) = i\n\ngoal (1 subgoal):\n 1. \\<not> vs @ xs @ [x] \\<notin> TS M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    False", "ultimately"], ["proof (chain)\npicking this:\n  Suc (length (xs @ [x])) < Suc i\n  Suc (length xs) = i", "have \"Suc (length (xs@[x])) < Suc (Suc (length xs))\""], ["proof (prove)\nusing this:\n  Suc (length (xs @ [x])) < Suc i\n  Suc (length xs) = i\n\ngoal (1 subgoal):\n 1. Suc (length (xs @ [x])) < Suc (Suc (length xs))", "by auto"], ["proof (state)\nthis:\n  Suc (length (xs @ [x])) < Suc (Suc (length xs))\n\ngoal (1 subgoal):\n 1. \\<not> vs @ xs @ [x] \\<notin> TS M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  Suc (length (xs @ [x])) < Suc (Suc (length xs))", "show \"False\""], ["proof (prove)\nusing this:\n  Suc (length (xs @ [x])) < Suc (Suc (length xs))\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  vs @ xs @ [x] \\<notin> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ xs \\<notin> RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or>\n    vs @ xs \\<in> RM M2 M1 \\<Omega> V m i", "ultimately"], ["proof (chain)\npicking this:\n  vs @ xs @ [x]\n  \\<in> append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n         (inputs M2)\n  vs @ xs @ [x] \\<notin> TS M2 M1 \\<Omega> V m i", "show ?thesis"], ["proof (prove)\nusing this:\n  vs @ xs @ [x]\n  \\<in> append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n         (inputs M2)\n  vs @ xs @ [x] \\<notin> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or>\n    vs @ xs \\<in> RM M2 M1 \\<Omega> V m i", "by (simp add: \\<open>?C (Suc i) = append_set (?C i - ?RM i) (inputs M2) - ?TS i\\<close>)"], ["proof (state)\nthis:\n  vs @ xs @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<or>\n  vs @ xs \\<in> RM M2 M1 \\<Omega> V m i\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma TS_non_containment_causes :\n  assumes \"vs@xs \\<notin> TS M2 M1 \\<Omega> V m i\" \n  and     \"mcp (vs@xs) V vs\"\n  and     \"set xs \\<subseteq> inputs M2\"\n  and     \"0 < i\"\nshows \"(\\<exists> xr j . xr \\<noteq> xs \\<and> prefix xr xs \\<and> j \\<le> i \\<and> vs@xr \\<in> RM M2 M1 \\<Omega> V m j)\n       \\<or> (\\<exists> xc . xc \\<noteq> xs \\<and> prefix xc xs \\<and> vs@xc \\<in> (C M2 M1 \\<Omega> V m i) - (RM M2 M1 \\<Omega> V m i))\"\n  (is \"?PrefPreviouslyRemoved \\<or> ?PrefJustContained\")\n      \"\\<not> ((\\<exists> xr j . xr \\<noteq> xs \\<and> prefix xr xs \\<and> j \\<le> i \\<and> vs@xr \\<in> RM M2 M1 \\<Omega> V m j)\n         \\<and> (\\<exists> xc . xc \\<noteq> xs \\<and> prefix xc xs \\<and> vs@xc \\<in> (C M2 M1 \\<Omega> V m i) - (RM M2 M1 \\<Omega> V m i)))\"\n  \\<comment> \\<open>If a sequence is not contained in TS up to (incl.) iteration i, then either a prefix of it has \n      been removed or a prefix of it is contained in the C set for iteration i\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i) &&&\n    \\<not> ((\\<exists>xr j.\n                xr \\<noteq> xs \\<and>\n                prefix xr xs \\<and>\n                j \\<le> i \\<and>\n                vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n            (\\<exists>xc.\n                xc \\<noteq> xs \\<and>\n                prefix xc xs \\<and>\n                vs @ xc\n                \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i))", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n 2. \\<not> ((\\<exists>xr j.\n                xr \\<noteq> xs \\<and>\n                prefix xr xs \\<and>\n                j \\<le> i \\<and>\n                vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n            (\\<exists>xc.\n                xc \\<noteq> xs \\<and>\n                prefix xc xs \\<and>\n                vs @ xc\n                \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i))", "let ?TS = \"\\<lambda> n . TS M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n 2. \\<not> ((\\<exists>xr j.\n                xr \\<noteq> xs \\<and>\n                prefix xr xs \\<and>\n                j \\<le> i \\<and>\n                vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n            (\\<exists>xc.\n                xc \\<noteq> xs \\<and>\n                prefix xc xs \\<and>\n                vs @ xc\n                \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i))", "let ?C = \"\\<lambda> n . C M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n 2. \\<not> ((\\<exists>xr j.\n                xr \\<noteq> xs \\<and>\n                prefix xr xs \\<and>\n                j \\<le> i \\<and>\n                vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n            (\\<exists>xc.\n                xc \\<noteq> xs \\<and>\n                prefix xc xs \\<and>\n                vs @ xc\n                \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i))", "let ?RM = \"\\<lambda> n . RM M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n 2. \\<not> ((\\<exists>xr j.\n                xr \\<noteq> xs \\<and>\n                prefix xr xs \\<and>\n                j \\<le> i \\<and>\n                vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n            (\\<exists>xc.\n                xc \\<noteq> xs \\<and>\n                prefix xc xs \\<and>\n                vs @ xc\n                \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i))", "show \"?PrefPreviouslyRemoved \\<or> ?PrefJustContained\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> ((\\<exists>xr j.\n                xr \\<noteq> xs \\<and>\n                prefix xr xs \\<and>\n                j \\<le> i \\<and>\n                vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n            (\\<exists>xc.\n                xc \\<noteq> xs \\<and>\n                prefix xc xs \\<and>\n                vs @ xc\n                \\<in> C M2 M1 \\<Omega> V m i -\n                      RM M2 M1 \\<Omega> V m i)) \\<Longrightarrow>\n    False", "assume \"\\<not> (?PrefPreviouslyRemoved \\<or> ?PrefJustContained)\""], ["proof (state)\nthis:\n  \\<not> ((\\<exists>xr j.\n              xr \\<noteq> xs \\<and>\n              prefix xr xs \\<and>\n              j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n          (\\<exists>xc.\n              xc \\<noteq> xs \\<and>\n              prefix xc xs \\<and>\n              vs @ xc\n              \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i))\n\ngoal (1 subgoal):\n 1. \\<not> ((\\<exists>xr j.\n                xr \\<noteq> xs \\<and>\n                prefix xr xs \\<and>\n                j \\<le> i \\<and>\n                vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n            (\\<exists>xc.\n                xc \\<noteq> xs \\<and>\n                prefix xc xs \\<and>\n                vs @ xc\n                \\<in> C M2 M1 \\<Omega> V m i -\n                      RM M2 M1 \\<Omega> V m i)) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  \\<not> ((\\<exists>xr j.\n              xr \\<noteq> xs \\<and>\n              prefix xr xs \\<and>\n              j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n          (\\<exists>xc.\n              xc \\<noteq> xs \\<and>\n              prefix xc xs \\<and>\n              vs @ xc\n              \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i))", "have \"\\<not> ?PrefPreviouslyRemoved\" \"\\<not> ?PrefJustContained\""], ["proof (prove)\nusing this:\n  \\<not> ((\\<exists>xr j.\n              xr \\<noteq> xs \\<and>\n              prefix xr xs \\<and>\n              j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n          (\\<exists>xc.\n              xc \\<noteq> xs \\<and>\n              prefix xc xs \\<and>\n              vs @ xc\n              \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i))\n\ngoal (1 subgoal):\n 1. \\<nexists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j &&&\n    \\<nexists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "by auto"], ["proof (state)\nthis:\n  \\<nexists>xr j.\n     xr \\<noteq> xs \\<and>\n     prefix xr xs \\<and>\n     j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n  \\<nexists>xc.\n     xc \\<noteq> xs \\<and>\n     prefix xc xs \\<and>\n     vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<not> ((\\<exists>xr j.\n                xr \\<noteq> xs \\<and>\n                prefix xr xs \\<and>\n                j \\<le> i \\<and>\n                vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n            (\\<exists>xc.\n                xc \\<noteq> xs \\<and>\n                prefix xc xs \\<and>\n                vs @ xc\n                \\<in> C M2 M1 \\<Omega> V m i -\n                      RM M2 M1 \\<Omega> V m i)) \\<Longrightarrow>\n    False", "have \"\\<not> (\\<exists> xr j. prefix xr xs \\<and> j \\<le> i \\<and> vs @ xr \\<in> ?RM j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<nexists>xr j.\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       prefix xr xs \\<and>\n       j \\<le> i \\<and>\n       vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n    False", "assume \"\\<exists>xr j. prefix xr xs \\<and> j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\""], ["proof (state)\nthis:\n  \\<exists>xr j.\n     prefix xr xs \\<and>\n     j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       prefix xr xs \\<and>\n       j \\<le> i \\<and>\n       vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  \\<exists>xr j.\n     prefix xr xs \\<and>\n     j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "obtain xr j where \"prefix xr xs\" \"j \\<le> i\" \"vs @ xr \\<in> ?RM j\""], ["proof (prove)\nusing this:\n  \\<exists>xr j.\n     prefix xr xs \\<and>\n     j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. (\\<And>xr j.\n        \\<lbrakk>prefix xr xs; j \\<le> i;\n         vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  prefix xr xs\n  j \\<le> i\n  vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       prefix xr xs \\<and>\n       j \\<le> i \\<and>\n       vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  prefix xr xs\n  j \\<le> i\n  vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "show \"False\""], ["proof (prove)\nusing this:\n  prefix xr xs\n  j \\<le> i\n  vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. False", "proof (cases \"xr = xs\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>prefix xr xs; j \\<le> i; vs @ xr \\<in> RM M2 M1 \\<Omega> V m j;\n     xr = xs\\<rbrakk>\n    \\<Longrightarrow> False\n 2. \\<lbrakk>prefix xr xs; j \\<le> i; vs @ xr \\<in> RM M2 M1 \\<Omega> V m j;\n     xr \\<noteq> xs\\<rbrakk>\n    \\<Longrightarrow> False", "case True"], ["proof (state)\nthis:\n  xr = xs\n\ngoal (2 subgoals):\n 1. \\<lbrakk>prefix xr xs; j \\<le> i; vs @ xr \\<in> RM M2 M1 \\<Omega> V m j;\n     xr = xs\\<rbrakk>\n    \\<Longrightarrow> False\n 2. \\<lbrakk>prefix xr xs; j \\<le> i; vs @ xr \\<in> RM M2 M1 \\<Omega> V m j;\n     xr \\<noteq> xs\\<rbrakk>\n    \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  xr = xs", "have \"vs @ xs \\<in> ?RM j\""], ["proof (prove)\nusing this:\n  xr = xs\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> RM M2 M1 \\<Omega> V m j", "using \\<open>vs @ xr \\<in> ?RM j\\<close>"], ["proof (prove)\nusing this:\n  xr = xs\n  vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> RM M2 M1 \\<Omega> V m j", "by auto"], ["proof (state)\nthis:\n  vs @ xs \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (2 subgoals):\n 1. \\<lbrakk>prefix xr xs; j \\<le> i; vs @ xr \\<in> RM M2 M1 \\<Omega> V m j;\n     xr = xs\\<rbrakk>\n    \\<Longrightarrow> False\n 2. \\<lbrakk>prefix xr xs; j \\<le> i; vs @ xr \\<in> RM M2 M1 \\<Omega> V m j;\n     xr \\<noteq> xs\\<rbrakk>\n    \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  vs @ xs \\<in> RM M2 M1 \\<Omega> V m j", "have \"vs @ xs \\<in> ?TS j\""], ["proof (prove)\nusing this:\n  vs @ xs \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> TS M2 M1 \\<Omega> V m j", "using C_subset RM_subset \\<open>vs @ xr \\<in> ?RM j\\<close>"], ["proof (prove)\nusing this:\n  vs @ xs \\<in> RM M2 M1 \\<Omega> V m j\n  C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i\n  \\<subseteq> TS ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i\n  RM ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i\n  \\<subseteq> C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i\n  vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> TS M2 M1 \\<Omega> V m j", "by blast"], ["proof (state)\nthis:\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m j\n\ngoal (2 subgoals):\n 1. \\<lbrakk>prefix xr xs; j \\<le> i; vs @ xr \\<in> RM M2 M1 \\<Omega> V m j;\n     xr = xs\\<rbrakk>\n    \\<Longrightarrow> False\n 2. \\<lbrakk>prefix xr xs; j \\<le> i; vs @ xr \\<in> RM M2 M1 \\<Omega> V m j;\n     xr \\<noteq> xs\\<rbrakk>\n    \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m j", "have \"vs @ xs \\<in> ?TS i\""], ["proof (prove)\nusing this:\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> TS M2 M1 \\<Omega> V m i", "using TS_subset \\<open>j \\<le> i\\<close>"], ["proof (prove)\nusing this:\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m j\n  ?i \\<le> ?j \\<Longrightarrow>\n  TS ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i\n  \\<subseteq> TS ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?j\n  j \\<le> i\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> TS M2 M1 \\<Omega> V m i", "by blast"], ["proof (state)\nthis:\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (2 subgoals):\n 1. \\<lbrakk>prefix xr xs; j \\<le> i; vs @ xr \\<in> RM M2 M1 \\<Omega> V m j;\n     xr = xs\\<rbrakk>\n    \\<Longrightarrow> False\n 2. \\<lbrakk>prefix xr xs; j \\<le> i; vs @ xr \\<in> RM M2 M1 \\<Omega> V m j;\n     xr \\<noteq> xs\\<rbrakk>\n    \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i", "show ?thesis"], ["proof (prove)\nusing this:\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. False", "using assms(1)"], ["proof (prove)\nusing this:\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\n  vs @ xs \\<notin> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. False", "by blast"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<lbrakk>prefix xr xs; j \\<le> i; vs @ xr \\<in> RM M2 M1 \\<Omega> V m j;\n     xr \\<noteq> xs\\<rbrakk>\n    \\<Longrightarrow> False", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>prefix xr xs; j \\<le> i; vs @ xr \\<in> RM M2 M1 \\<Omega> V m j;\n     xr \\<noteq> xs\\<rbrakk>\n    \\<Longrightarrow> False", "case False"], ["proof (state)\nthis:\n  xr \\<noteq> xs\n\ngoal (1 subgoal):\n 1. \\<lbrakk>prefix xr xs; j \\<le> i; vs @ xr \\<in> RM M2 M1 \\<Omega> V m j;\n     xr \\<noteq> xs\\<rbrakk>\n    \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  xr \\<noteq> xs", "show ?thesis"], ["proof (prove)\nusing this:\n  xr \\<noteq> xs\n\ngoal (1 subgoal):\n 1. False", "using \\<open>\\<not> ?PrefPreviouslyRemoved\\<close> \\<open>prefix xr xs\\<close> \\<open>j \\<le> i\\<close> \\<open>vs @ xr \\<in> ?RM j\\<close>"], ["proof (prove)\nusing this:\n  xr \\<noteq> xs\n  \\<nexists>xr j.\n     xr \\<noteq> xs \\<and>\n     prefix xr xs \\<and>\n     j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n  prefix xr xs\n  j \\<le> i\n  vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. False", "by blast"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<nexists>xr j.\n     prefix xr xs \\<and>\n     j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. \\<not> ((\\<exists>xr j.\n                xr \\<noteq> xs \\<and>\n                prefix xr xs \\<and>\n                j \\<le> i \\<and>\n                vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n            (\\<exists>xc.\n                xc \\<noteq> xs \\<and>\n                prefix xc xs \\<and>\n                vs @ xc\n                \\<in> C M2 M1 \\<Omega> V m i -\n                      RM M2 M1 \\<Omega> V m i)) \\<Longrightarrow>\n    False", "have \"vs \\<in> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs \\<in> V", "using assms(2)"], ["proof (prove)\nusing this:\n  mcp (vs @ xs) V vs\n\ngoal (1 subgoal):\n 1. vs \\<in> V", "by auto"], ["proof (state)\nthis:\n  vs \\<in> V\n\ngoal (1 subgoal):\n 1. \\<not> ((\\<exists>xr j.\n                xr \\<noteq> xs \\<and>\n                prefix xr xs \\<and>\n                j \\<le> i \\<and>\n                vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n            (\\<exists>xc.\n                xc \\<noteq> xs \\<and>\n                prefix xc xs \\<and>\n                vs @ xc\n                \\<in> C M2 M1 \\<Omega> V m i -\n                      RM M2 M1 \\<Omega> V m i)) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  vs \\<in> V", "have \"vs \\<in> ?C 1\""], ["proof (prove)\nusing this:\n  vs \\<in> V\n\ngoal (1 subgoal):\n 1. vs \\<in> C M2 M1 \\<Omega> V m 1", "by auto"], ["proof (state)\nthis:\n  vs \\<in> C M2 M1 \\<Omega> V m 1\n\ngoal (1 subgoal):\n 1. \\<not> ((\\<exists>xr j.\n                xr \\<noteq> xs \\<and>\n                prefix xr xs \\<and>\n                j \\<le> i \\<and>\n                vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n            (\\<exists>xc.\n                xc \\<noteq> xs \\<and>\n                prefix xc xs \\<and>\n                vs @ xc\n                \\<in> C M2 M1 \\<Omega> V m i -\n                      RM M2 M1 \\<Omega> V m i)) \\<Longrightarrow>\n    False", "have \"\\<And> k . (1 \\<le> Suc k \\<and> Suc k \\<le> i) \\<longrightarrow> vs @ (take k xs) \\<in> ?C (Suc k) - ?RM (Suc k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k.\n       1 \\<le> Suc k \\<and> Suc k \\<le> i \\<longrightarrow>\n       vs @ take k xs\n       \\<in> C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k.\n       1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n       vs @ take k xs\n       \\<in> C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k)", "fix k"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k.\n       1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n       vs @ take k xs\n       \\<in> C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k)", "assume \"1 \\<le> Suc k \\<and> Suc k \\<le> i\""], ["proof (state)\nthis:\n  1 \\<le> Suc k \\<and> Suc k \\<le> i\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n       vs @ take k xs\n       \\<in> C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k)", "then"], ["proof (chain)\npicking this:\n  1 \\<le> Suc k \\<and> Suc k \\<le> i", "show \"vs @ (take k xs) \\<in> ?C (Suc k) - ?RM (Suc k)\""], ["proof (prove)\nusing this:\n  1 \\<le> Suc k \\<and> Suc k \\<le> i\n\ngoal (1 subgoal):\n 1. vs @ take k xs\n    \\<in> C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k)", "proof (induction k)"], ["proof (state)\ngoal (2 subgoals):\n 1. 1 \\<le> Suc 0 \\<and> Suc 0 \\<le> i \\<Longrightarrow>\n    vs @ take 0 xs\n    \\<in> C M2 M1 \\<Omega> V m (Suc 0) - RM M2 M1 \\<Omega> V m (Suc 0)\n 2. \\<And>k.\n       \\<lbrakk>1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n                vs @ take k xs\n                \\<in> C M2 M1 \\<Omega> V m (Suc k) -\n                      RM M2 M1 \\<Omega> V m (Suc k);\n        1 \\<le> Suc (Suc k) \\<and> Suc (Suc k) \\<le> i\\<rbrakk>\n       \\<Longrightarrow> vs @ take (Suc k) xs\n                         \\<in> C M2 M1 \\<Omega> V m (Suc (Suc k)) -\n                               RM M2 M1 \\<Omega> V m (Suc (Suc k))", "case 0"], ["proof (state)\nthis:\n  1 \\<le> Suc 0 \\<and> Suc 0 \\<le> i\n\ngoal (2 subgoals):\n 1. 1 \\<le> Suc 0 \\<and> Suc 0 \\<le> i \\<Longrightarrow>\n    vs @ take 0 xs\n    \\<in> C M2 M1 \\<Omega> V m (Suc 0) - RM M2 M1 \\<Omega> V m (Suc 0)\n 2. \\<And>k.\n       \\<lbrakk>1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n                vs @ take k xs\n                \\<in> C M2 M1 \\<Omega> V m (Suc k) -\n                      RM M2 M1 \\<Omega> V m (Suc k);\n        1 \\<le> Suc (Suc k) \\<and> Suc (Suc k) \\<le> i\\<rbrakk>\n       \\<Longrightarrow> vs @ take (Suc k) xs\n                         \\<in> C M2 M1 \\<Omega> V m (Suc (Suc k)) -\n                               RM M2 M1 \\<Omega> V m (Suc (Suc k))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ take 0 xs\n    \\<in> C M2 M1 \\<Omega> V m (Suc 0) - RM M2 M1 \\<Omega> V m (Suc 0)", "using \\<open>vs \\<in> ?C 1\\<close>"], ["proof (prove)\nusing this:\n  vs \\<in> C M2 M1 \\<Omega> V m 1\n\ngoal (1 subgoal):\n 1. vs @ take 0 xs\n    \\<in> C M2 M1 \\<Omega> V m (Suc 0) - RM M2 M1 \\<Omega> V m (Suc 0)", "by (metis \"0.prems\" DiffI One_nat_def \n              \\<open>\\<not> (\\<exists> xr j. prefix xr xs \\<and> j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j)\\<close> \n              append_Nil2 take_0 take_is_prefix)"], ["proof (state)\nthis:\n  vs @ take 0 xs\n  \\<in> C M2 M1 \\<Omega> V m (Suc 0) - RM M2 M1 \\<Omega> V m (Suc 0)\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n                vs @ take k xs\n                \\<in> C M2 M1 \\<Omega> V m (Suc k) -\n                      RM M2 M1 \\<Omega> V m (Suc k);\n        1 \\<le> Suc (Suc k) \\<and> Suc (Suc k) \\<le> i\\<rbrakk>\n       \\<Longrightarrow> vs @ take (Suc k) xs\n                         \\<in> C M2 M1 \\<Omega> V m (Suc (Suc k)) -\n                               RM M2 M1 \\<Omega> V m (Suc (Suc k))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n                vs @ take k xs\n                \\<in> C M2 M1 \\<Omega> V m (Suc k) -\n                      RM M2 M1 \\<Omega> V m (Suc k);\n        1 \\<le> Suc (Suc k) \\<and> Suc (Suc k) \\<le> i\\<rbrakk>\n       \\<Longrightarrow> vs @ take (Suc k) xs\n                         \\<in> C M2 M1 \\<Omega> V m (Suc (Suc k)) -\n                               RM M2 M1 \\<Omega> V m (Suc (Suc k))", "case (Suc k)"], ["proof (state)\nthis:\n  1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n  vs @ take k xs\n  \\<in> C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k)\n  1 \\<le> Suc (Suc k) \\<and> Suc (Suc k) \\<le> i\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n                vs @ take k xs\n                \\<in> C M2 M1 \\<Omega> V m (Suc k) -\n                      RM M2 M1 \\<Omega> V m (Suc k);\n        1 \\<le> Suc (Suc k) \\<and> Suc (Suc k) \\<le> i\\<rbrakk>\n       \\<Longrightarrow> vs @ take (Suc k) xs\n                         \\<in> C M2 M1 \\<Omega> V m (Suc (Suc k)) -\n                               RM M2 M1 \\<Omega> V m (Suc (Suc k))", "have \"1 \\<le> Suc k \\<and> Suc k \\<le> i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> Suc k \\<and> Suc k \\<le> i", "using Suc.prems"], ["proof (prove)\nusing this:\n  1 \\<le> Suc (Suc k) \\<and> Suc (Suc k) \\<le> i\n\ngoal (1 subgoal):\n 1. 1 \\<le> Suc k \\<and> Suc k \\<le> i", "by auto"], ["proof (state)\nthis:\n  1 \\<le> Suc k \\<and> Suc k \\<le> i\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n                vs @ take k xs\n                \\<in> C M2 M1 \\<Omega> V m (Suc k) -\n                      RM M2 M1 \\<Omega> V m (Suc k);\n        1 \\<le> Suc (Suc k) \\<and> Suc (Suc k) \\<le> i\\<rbrakk>\n       \\<Longrightarrow> vs @ take (Suc k) xs\n                         \\<in> C M2 M1 \\<Omega> V m (Suc (Suc k)) -\n                               RM M2 M1 \\<Omega> V m (Suc (Suc k))", "then"], ["proof (chain)\npicking this:\n  1 \\<le> Suc k \\<and> Suc k \\<le> i", "have \"vs @ take k xs \\<in> ?C (Suc k)\""], ["proof (prove)\nusing this:\n  1 \\<le> Suc k \\<and> Suc k \\<le> i\n\ngoal (1 subgoal):\n 1. vs @ take k xs \\<in> C M2 M1 \\<Omega> V m (Suc k)", "using Suc.IH"], ["proof (prove)\nusing this:\n  1 \\<le> Suc k \\<and> Suc k \\<le> i\n  1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n  vs @ take k xs\n  \\<in> C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k)\n\ngoal (1 subgoal):\n 1. vs @ take k xs \\<in> C M2 M1 \\<Omega> V m (Suc k)", "by simp"], ["proof (state)\nthis:\n  vs @ take k xs \\<in> C M2 M1 \\<Omega> V m (Suc k)\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n                vs @ take k xs\n                \\<in> C M2 M1 \\<Omega> V m (Suc k) -\n                      RM M2 M1 \\<Omega> V m (Suc k);\n        1 \\<le> Suc (Suc k) \\<and> Suc (Suc k) \\<le> i\\<rbrakk>\n       \\<Longrightarrow> vs @ take (Suc k) xs\n                         \\<in> C M2 M1 \\<Omega> V m (Suc (Suc k)) -\n                               RM M2 M1 \\<Omega> V m (Suc (Suc k))", "moreover"], ["proof (state)\nthis:\n  vs @ take k xs \\<in> C M2 M1 \\<Omega> V m (Suc k)\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n                vs @ take k xs\n                \\<in> C M2 M1 \\<Omega> V m (Suc k) -\n                      RM M2 M1 \\<Omega> V m (Suc k);\n        1 \\<le> Suc (Suc k) \\<and> Suc (Suc k) \\<le> i\\<rbrakk>\n       \\<Longrightarrow> vs @ take (Suc k) xs\n                         \\<in> C M2 M1 \\<Omega> V m (Suc (Suc k)) -\n                               RM M2 M1 \\<Omega> V m (Suc (Suc k))", "have \"vs @ take k xs \\<notin> ?RM (Suc k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ take k xs \\<notin> RM M2 M1 \\<Omega> V m (Suc k)", "using \\<open>1 \\<le> Suc k \\<and> Suc k \\<le> i\\<close> \\<open>\\<not> ?PrefPreviouslyRemoved\\<close> take_is_prefix Suc.IH"], ["proof (prove)\nusing this:\n  1 \\<le> Suc k \\<and> Suc k \\<le> i\n  \\<nexists>xr j.\n     xr \\<noteq> xs \\<and>\n     prefix xr xs \\<and>\n     j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n  prefix (take ?n ?xs) ?xs\n  1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n  vs @ take k xs\n  \\<in> C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k)\n\ngoal (1 subgoal):\n 1. vs @ take k xs \\<notin> RM M2 M1 \\<Omega> V m (Suc k)", "by blast"], ["proof (state)\nthis:\n  vs @ take k xs \\<notin> RM M2 M1 \\<Omega> V m (Suc k)\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n                vs @ take k xs\n                \\<in> C M2 M1 \\<Omega> V m (Suc k) -\n                      RM M2 M1 \\<Omega> V m (Suc k);\n        1 \\<le> Suc (Suc k) \\<and> Suc (Suc k) \\<le> i\\<rbrakk>\n       \\<Longrightarrow> vs @ take (Suc k) xs\n                         \\<in> C M2 M1 \\<Omega> V m (Suc (Suc k)) -\n                               RM M2 M1 \\<Omega> V m (Suc (Suc k))", "ultimately"], ["proof (chain)\npicking this:\n  vs @ take k xs \\<in> C M2 M1 \\<Omega> V m (Suc k)\n  vs @ take k xs \\<notin> RM M2 M1 \\<Omega> V m (Suc k)", "have \"vs @ take k xs \\<in> (?C (Suc k)) - (?RM (Suc k))\""], ["proof (prove)\nusing this:\n  vs @ take k xs \\<in> C M2 M1 \\<Omega> V m (Suc k)\n  vs @ take k xs \\<notin> RM M2 M1 \\<Omega> V m (Suc k)\n\ngoal (1 subgoal):\n 1. vs @ take k xs\n    \\<in> C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k)", "by blast"], ["proof (state)\nthis:\n  vs @ take k xs\n  \\<in> C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k)\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n                vs @ take k xs\n                \\<in> C M2 M1 \\<Omega> V m (Suc k) -\n                      RM M2 M1 \\<Omega> V m (Suc k);\n        1 \\<le> Suc (Suc k) \\<and> Suc (Suc k) \\<le> i\\<rbrakk>\n       \\<Longrightarrow> vs @ take (Suc k) xs\n                         \\<in> C M2 M1 \\<Omega> V m (Suc (Suc k)) -\n                               RM M2 M1 \\<Omega> V m (Suc (Suc k))", "have \"k < length xs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. k < length xs", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> k < length xs \\<Longrightarrow> False", "assume \"\\<not> k < length xs\""], ["proof (state)\nthis:\n  \\<not> k < length xs\n\ngoal (1 subgoal):\n 1. \\<not> k < length xs \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<not> k < length xs", "have \"vs @ xs \\<in> ?C (Suc k)\""], ["proof (prove)\nusing this:\n  \\<not> k < length xs\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> C M2 M1 \\<Omega> V m (Suc k)", "using \\<open>vs @ take k xs \\<in> ?C (Suc k)\\<close>"], ["proof (prove)\nusing this:\n  \\<not> k < length xs\n  vs @ take k xs \\<in> C M2 M1 \\<Omega> V m (Suc k)\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> C M2 M1 \\<Omega> V m (Suc k)", "by simp"], ["proof (state)\nthis:\n  vs @ xs \\<in> C M2 M1 \\<Omega> V m (Suc k)\n\ngoal (1 subgoal):\n 1. \\<not> k < length xs \\<Longrightarrow> False", "have \"vs @ xs \\<in> ?TS i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xs \\<in> TS M2 M1 \\<Omega> V m i", "by (metis C_subset TS_subset \\<open>1 \\<le> Suc k \\<and> Suc k \\<le> i\\<close> \\<open>vs @ xs \\<in> ?C (Suc k)\\<close> \n                contra_subsetD)"], ["proof (state)\nthis:\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<not> k < length xs \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i", "show \"False\""], ["proof (prove)\nusing this:\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. False", "using assms(1)"], ["proof (prove)\nusing this:\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\n  vs @ xs \\<notin> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  k < length xs\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n                vs @ take k xs\n                \\<in> C M2 M1 \\<Omega> V m (Suc k) -\n                      RM M2 M1 \\<Omega> V m (Suc k);\n        1 \\<le> Suc (Suc k) \\<and> Suc (Suc k) \\<le> i\\<rbrakk>\n       \\<Longrightarrow> vs @ take (Suc k) xs\n                         \\<in> C M2 M1 \\<Omega> V m (Suc (Suc k)) -\n                               RM M2 M1 \\<Omega> V m (Suc (Suc k))", "moreover"], ["proof (state)\nthis:\n  k < length xs\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n                vs @ take k xs\n                \\<in> C M2 M1 \\<Omega> V m (Suc k) -\n                      RM M2 M1 \\<Omega> V m (Suc k);\n        1 \\<le> Suc (Suc k) \\<and> Suc (Suc k) \\<le> i\\<rbrakk>\n       \\<Longrightarrow> vs @ take (Suc k) xs\n                         \\<in> C M2 M1 \\<Omega> V m (Suc (Suc k)) -\n                               RM M2 M1 \\<Omega> V m (Suc (Suc k))", "have \"set xs \\<subseteq> inputs M2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set xs \\<subseteq> inputs M2", "using assms(3)"], ["proof (prove)\nusing this:\n  set xs \\<subseteq> inputs M2\n\ngoal (1 subgoal):\n 1. set xs \\<subseteq> inputs M2", "by auto"], ["proof (state)\nthis:\n  set xs \\<subseteq> inputs M2\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n                vs @ take k xs\n                \\<in> C M2 M1 \\<Omega> V m (Suc k) -\n                      RM M2 M1 \\<Omega> V m (Suc k);\n        1 \\<le> Suc (Suc k) \\<and> Suc (Suc k) \\<le> i\\<rbrakk>\n       \\<Longrightarrow> vs @ take (Suc k) xs\n                         \\<in> C M2 M1 \\<Omega> V m (Suc (Suc k)) -\n                               RM M2 M1 \\<Omega> V m (Suc (Suc k))", "ultimately"], ["proof (chain)\npicking this:\n  k < length xs\n  set xs \\<subseteq> inputs M2", "have \"last (take (Suc k) xs) \\<in> inputs M2\""], ["proof (prove)\nusing this:\n  k < length xs\n  set xs \\<subseteq> inputs M2\n\ngoal (1 subgoal):\n 1. last (take (Suc k) xs) \\<in> inputs M2", "by (simp add: subset_eq take_Suc_conv_app_nth)"], ["proof (state)\nthis:\n  last (take (Suc k) xs) \\<in> inputs M2\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n                vs @ take k xs\n                \\<in> C M2 M1 \\<Omega> V m (Suc k) -\n                      RM M2 M1 \\<Omega> V m (Suc k);\n        1 \\<le> Suc (Suc k) \\<and> Suc (Suc k) \\<le> i\\<rbrakk>\n       \\<Longrightarrow> vs @ take (Suc k) xs\n                         \\<in> C M2 M1 \\<Omega> V m (Suc (Suc k)) -\n                               RM M2 M1 \\<Omega> V m (Suc (Suc k))", "have \"vs @ take (Suc k) xs \\<in> append_set ((?C (Suc k)) - (?RM (Suc k))) (inputs M2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ take (Suc k) xs\n    \\<in> append_set\n           (C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k))\n           (inputs M2)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ take (Suc k) xs\n    \\<in> append_set\n           (C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k))\n           (inputs M2)", "have f1: \"xs ! k \\<in> inputs M2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. xs ! k \\<in> inputs M2", "by (meson \\<open>k < length xs\\<close> \\<open>set xs \\<subseteq> inputs M2\\<close> nth_mem subset_iff)"], ["proof (state)\nthis:\n  xs ! k \\<in> inputs M2\n\ngoal (1 subgoal):\n 1. vs @ take (Suc k) xs\n    \\<in> append_set\n           (C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k))\n           (inputs M2)", "have \"vs @ take (Suc k) xs = (vs @ take k xs) @ [xs ! k]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ take (Suc k) xs = (vs @ take k xs) @ [xs ! k]", "by (simp add: \\<open>k < length xs\\<close> take_Suc_conv_app_nth)"], ["proof (state)\nthis:\n  vs @ take (Suc k) xs = (vs @ take k xs) @ [xs ! k]\n\ngoal (1 subgoal):\n 1. vs @ take (Suc k) xs\n    \\<in> append_set\n           (C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k))\n           (inputs M2)", "then"], ["proof (chain)\npicking this:\n  vs @ take (Suc k) xs = (vs @ take k xs) @ [xs ! k]", "show ?thesis"], ["proof (prove)\nusing this:\n  vs @ take (Suc k) xs = (vs @ take k xs) @ [xs ! k]\n\ngoal (1 subgoal):\n 1. vs @ take (Suc k) xs\n    \\<in> append_set\n           (C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k))\n           (inputs M2)", "using f1 \\<open>vs @ take k xs \\<in> C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k)\\<close>"], ["proof (prove)\nusing this:\n  vs @ take (Suc k) xs = (vs @ take k xs) @ [xs ! k]\n  xs ! k \\<in> inputs M2\n  vs @ take k xs\n  \\<in> C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k)\n\ngoal (1 subgoal):\n 1. vs @ take (Suc k) xs\n    \\<in> append_set\n           (C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k))\n           (inputs M2)", "by blast"], ["proof (state)\nthis:\n  vs @ take (Suc k) xs\n  \\<in> append_set\n         (C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k))\n         (inputs M2)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  vs @ take (Suc k) xs\n  \\<in> append_set\n         (C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k))\n         (inputs M2)\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n                vs @ take k xs\n                \\<in> C M2 M1 \\<Omega> V m (Suc k) -\n                      RM M2 M1 \\<Omega> V m (Suc k);\n        1 \\<le> Suc (Suc k) \\<and> Suc (Suc k) \\<le> i\\<rbrakk>\n       \\<Longrightarrow> vs @ take (Suc k) xs\n                         \\<in> C M2 M1 \\<Omega> V m (Suc (Suc k)) -\n                               RM M2 M1 \\<Omega> V m (Suc (Suc k))", "moreover"], ["proof (state)\nthis:\n  vs @ take (Suc k) xs\n  \\<in> append_set\n         (C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k))\n         (inputs M2)\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n                vs @ take k xs\n                \\<in> C M2 M1 \\<Omega> V m (Suc k) -\n                      RM M2 M1 \\<Omega> V m (Suc k);\n        1 \\<le> Suc (Suc k) \\<and> Suc (Suc k) \\<le> i\\<rbrakk>\n       \\<Longrightarrow> vs @ take (Suc k) xs\n                         \\<in> C M2 M1 \\<Omega> V m (Suc (Suc k)) -\n                               RM M2 M1 \\<Omega> V m (Suc (Suc k))", "have \"vs @ take (Suc k) xs \\<notin> ?TS (Suc k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ take (Suc k) xs \\<notin> TS M2 M1 \\<Omega> V m (Suc k)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ take (Suc k) xs\n    \\<in> TS M2 M1 \\<Omega> V m (Suc k) \\<Longrightarrow>\n    False", "assume \"vs @ take (Suc k) xs \\<in> ?TS (Suc k)\""], ["proof (state)\nthis:\n  vs @ take (Suc k) xs \\<in> TS M2 M1 \\<Omega> V m (Suc k)\n\ngoal (1 subgoal):\n 1. vs @ take (Suc k) xs\n    \\<in> TS M2 M1 \\<Omega> V m (Suc k) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  vs @ take (Suc k) xs \\<in> TS M2 M1 \\<Omega> V m (Suc k)", "have \"Suc (length (take (Suc k) xs)) \\<le> Suc k\""], ["proof (prove)\nusing this:\n  vs @ take (Suc k) xs \\<in> TS M2 M1 \\<Omega> V m (Suc k)\n\ngoal (1 subgoal):\n 1. Suc (length (take (Suc k) xs)) \\<le> Suc k", "using TS_index(1) assms(2) mcp_prefix_of_suffix take_is_prefix"], ["proof (prove)\nusing this:\n  vs @ take (Suc k) xs \\<in> TS M2 M1 \\<Omega> V m (Suc k)\n  \\<lbrakk>?vs @ ?xs \\<in> TS ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i;\n   mcp (?vs @ ?xs) ?V ?vs\\<rbrakk>\n  \\<Longrightarrow> Suc (length ?xs) \\<le> ?i\n  mcp (vs @ xs) V vs\n  \\<lbrakk>mcp (?vs @ ?xs) ?V ?vs; prefix ?xs' ?xs\\<rbrakk>\n  \\<Longrightarrow> mcp (?vs @ ?xs') ?V ?vs\n  prefix (take ?n ?xs) ?xs\n\ngoal (1 subgoal):\n 1. Suc (length (take (Suc k) xs)) \\<le> Suc k", "by blast"], ["proof (state)\nthis:\n  Suc (length (take (Suc k) xs)) \\<le> Suc k\n\ngoal (1 subgoal):\n 1. vs @ take (Suc k) xs\n    \\<in> TS M2 M1 \\<Omega> V m (Suc k) \\<Longrightarrow>\n    False", "moreover"], ["proof (state)\nthis:\n  Suc (length (take (Suc k) xs)) \\<le> Suc k\n\ngoal (1 subgoal):\n 1. vs @ take (Suc k) xs\n    \\<in> TS M2 M1 \\<Omega> V m (Suc k) \\<Longrightarrow>\n    False", "have \"Suc (length (take k xs)) = Suc k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Suc (length (take k xs)) = Suc k", "using C_index \\<open>vs @ take k xs \\<in> ?C (Suc k)\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>?vs @ ?xs \\<in> C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i;\n   mcp (?vs @ ?xs) ?V ?vs\\<rbrakk>\n  \\<Longrightarrow> Suc (length ?xs) = ?i\n  vs @ take k xs \\<in> C M2 M1 \\<Omega> V m (Suc k)\n\ngoal (1 subgoal):\n 1. Suc (length (take k xs)) = Suc k", "by (metis assms(2) mcp_prefix_of_suffix take_is_prefix)"], ["proof (state)\nthis:\n  Suc (length (take k xs)) = Suc k\n\ngoal (1 subgoal):\n 1. vs @ take (Suc k) xs\n    \\<in> TS M2 M1 \\<Omega> V m (Suc k) \\<Longrightarrow>\n    False", "ultimately"], ["proof (chain)\npicking this:\n  Suc (length (take (Suc k) xs)) \\<le> Suc k\n  Suc (length (take k xs)) = Suc k", "show \"False\""], ["proof (prove)\nusing this:\n  Suc (length (take (Suc k) xs)) \\<le> Suc k\n  Suc (length (take k xs)) = Suc k\n\ngoal (1 subgoal):\n 1. False", "using \\<open>k < length xs\\<close>"], ["proof (prove)\nusing this:\n  Suc (length (take (Suc k) xs)) \\<le> Suc k\n  Suc (length (take k xs)) = Suc k\n  k < length xs\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  vs @ take (Suc k) xs \\<notin> TS M2 M1 \\<Omega> V m (Suc k)\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>1 \\<le> Suc k \\<and> Suc k \\<le> i \\<Longrightarrow>\n                vs @ take k xs\n                \\<in> C M2 M1 \\<Omega> V m (Suc k) -\n                      RM M2 M1 \\<Omega> V m (Suc k);\n        1 \\<le> Suc (Suc k) \\<and> Suc (Suc k) \\<le> i\\<rbrakk>\n       \\<Longrightarrow> vs @ take (Suc k) xs\n                         \\<in> C M2 M1 \\<Omega> V m (Suc (Suc k)) -\n                               RM M2 M1 \\<Omega> V m (Suc (Suc k))", "show \"vs @ take (Suc k) xs \\<in> ?C (Suc (Suc k)) - ?RM (Suc (Suc k))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ take (Suc k) xs\n    \\<in> C M2 M1 \\<Omega> V m (Suc (Suc k)) -\n          RM M2 M1 \\<Omega> V m (Suc (Suc k))", "using C.simps(3)[of M2 M1 \\<Omega> V m k]"], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m (Suc (Suc k)) =\n  append_set (C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k))\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m (Suc k)\n\ngoal (1 subgoal):\n 1. vs @ take (Suc k) xs\n    \\<in> C M2 M1 \\<Omega> V m (Suc (Suc k)) -\n          RM M2 M1 \\<Omega> V m (Suc (Suc k))", "by (metis (no_types, lifting) DiffI Suc.prems \n              \\<open>\\<not> (\\<exists> xr j. prefix xr xs \\<and> j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j)\\<close> \n              \\<open>vs @ take (Suc k) xs \\<notin> TS M2 M1 \\<Omega> V m (Suc k)\\<close> calculation take_is_prefix)"], ["proof (state)\nthis:\n  vs @ take (Suc k) xs\n  \\<in> C M2 M1 \\<Omega> V m (Suc (Suc k)) -\n        RM M2 M1 \\<Omega> V m (Suc (Suc k))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  vs @ take k xs\n  \\<in> C M2 M1 \\<Omega> V m (Suc k) - RM M2 M1 \\<Omega> V m (Suc k)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  1 \\<le> Suc ?k \\<and> Suc ?k \\<le> i \\<longrightarrow>\n  vs @ take ?k xs\n  \\<in> C M2 M1 \\<Omega> V m (Suc ?k) - RM M2 M1 \\<Omega> V m (Suc ?k)\n\ngoal (1 subgoal):\n 1. \\<not> ((\\<exists>xr j.\n                xr \\<noteq> xs \\<and>\n                prefix xr xs \\<and>\n                j \\<le> i \\<and>\n                vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n            (\\<exists>xc.\n                xc \\<noteq> xs \\<and>\n                prefix xc xs \\<and>\n                vs @ xc\n                \\<in> C M2 M1 \\<Omega> V m i -\n                      RM M2 M1 \\<Omega> V m i)) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  1 \\<le> Suc ?k \\<and> Suc ?k \\<le> i \\<longrightarrow>\n  vs @ take ?k xs\n  \\<in> C M2 M1 \\<Omega> V m (Suc ?k) - RM M2 M1 \\<Omega> V m (Suc ?k)", "have \"vs @ take (i-1) xs \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\""], ["proof (prove)\nusing this:\n  1 \\<le> Suc ?k \\<and> Suc ?k \\<le> i \\<longrightarrow>\n  vs @ take ?k xs\n  \\<in> C M2 M1 \\<Omega> V m (Suc ?k) - RM M2 M1 \\<Omega> V m (Suc ?k)\n\ngoal (1 subgoal):\n 1. vs @ take (i - 1) xs\n    \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "using assms(4)"], ["proof (prove)\nusing this:\n  1 \\<le> Suc ?k \\<and> Suc ?k \\<le> i \\<longrightarrow>\n  vs @ take ?k xs\n  \\<in> C M2 M1 \\<Omega> V m (Suc ?k) - RM M2 M1 \\<Omega> V m (Suc ?k)\n  0 < i\n\ngoal (1 subgoal):\n 1. vs @ take (i - 1) xs\n    \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "by (metis One_nat_def Suc_diff_1 Suc_leI le_less)"], ["proof (state)\nthis:\n  vs @ take (i - 1) xs\n  \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<not> ((\\<exists>xr j.\n                xr \\<noteq> xs \\<and>\n                prefix xr xs \\<and>\n                j \\<le> i \\<and>\n                vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n            (\\<exists>xc.\n                xc \\<noteq> xs \\<and>\n                prefix xc xs \\<and>\n                vs @ xc\n                \\<in> C M2 M1 \\<Omega> V m i -\n                      RM M2 M1 \\<Omega> V m i)) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  vs @ take (i - 1) xs\n  \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "have \"?PrefJustContained\""], ["proof (prove)\nusing this:\n  vs @ take (i - 1) xs\n  \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "by (metis C_subset DiffD1 assms(1) subsetCE take_is_prefix)"], ["proof (state)\nthis:\n  \\<exists>xc.\n     xc \\<noteq> xs \\<and>\n     prefix xc xs \\<and>\n     vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<not> ((\\<exists>xr j.\n                xr \\<noteq> xs \\<and>\n                prefix xr xs \\<and>\n                j \\<le> i \\<and>\n                vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n            (\\<exists>xc.\n                xc \\<noteq> xs \\<and>\n                prefix xc xs \\<and>\n                vs @ xc\n                \\<in> C M2 M1 \\<Omega> V m i -\n                      RM M2 M1 \\<Omega> V m i)) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  \\<exists>xc.\n     xc \\<noteq> xs \\<and>\n     prefix xc xs \\<and>\n     vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "show \"False\""], ["proof (prove)\nusing this:\n  \\<exists>xc.\n     xc \\<noteq> xs \\<and>\n     prefix xc xs \\<and>\n     vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. False", "using \\<open>\\<not> ?PrefJustContained\\<close>"], ["proof (prove)\nusing this:\n  \\<exists>xc.\n     xc \\<noteq> xs \\<and>\n     prefix xc xs \\<and>\n     vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n  \\<nexists>xc.\n     xc \\<noteq> xs \\<and>\n     prefix xc xs \\<and>\n     vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<exists>xr j.\n      xr \\<noteq> xs \\<and>\n      prefix xr xs \\<and>\n      j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n  (\\<exists>xc.\n      xc \\<noteq> xs \\<and>\n      prefix xc xs \\<and>\n      vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n\ngoal (1 subgoal):\n 1. \\<not> ((\\<exists>xr j.\n                xr \\<noteq> xs \\<and>\n                prefix xr xs \\<and>\n                j \\<le> i \\<and>\n                vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n            (\\<exists>xc.\n                xc \\<noteq> xs \\<and>\n                prefix xc xs \\<and>\n                vs @ xc\n                \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i))", "show \"\\<not> (?PrefPreviouslyRemoved \\<and> ?PrefJustContained)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> ((\\<exists>xr j.\n                xr \\<noteq> xs \\<and>\n                prefix xr xs \\<and>\n                j \\<le> i \\<and>\n                vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n            (\\<exists>xc.\n                xc \\<noteq> xs \\<and>\n                prefix xc xs \\<and>\n                vs @ xc\n                \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i))", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc\n        \\<in> C M2 M1 \\<Omega> V m i -\n              RM M2 M1 \\<Omega> V m i) \\<Longrightarrow>\n    False", "assume \"?PrefPreviouslyRemoved \\<and> ?PrefJustContained\""], ["proof (state)\nthis:\n  (\\<exists>xr j.\n      xr \\<noteq> xs \\<and>\n      prefix xr xs \\<and>\n      j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n  (\\<exists>xc.\n      xc \\<noteq> xs \\<and>\n      prefix xc xs \\<and>\n      vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n\ngoal (1 subgoal):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc\n        \\<in> C M2 M1 \\<Omega> V m i -\n              RM M2 M1 \\<Omega> V m i) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  (\\<exists>xr j.\n      xr \\<noteq> xs \\<and>\n      prefix xr xs \\<and>\n      j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n  (\\<exists>xc.\n      xc \\<noteq> xs \\<and>\n      prefix xc xs \\<and>\n      vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)", "have \"?PrefPreviouslyRemoved\" \n              \"?PrefJustContained\""], ["proof (prove)\nusing this:\n  (\\<exists>xr j.\n      xr \\<noteq> xs \\<and>\n      prefix xr xs \\<and>\n      j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n  (\\<exists>xc.\n      xc \\<noteq> xs \\<and>\n      prefix xc xs \\<and>\n      vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j &&&\n    \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "by auto"], ["proof (state)\nthis:\n  \\<exists>xr j.\n     xr \\<noteq> xs \\<and>\n     prefix xr xs \\<and>\n     j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n  \\<exists>xc.\n     xc \\<noteq> xs \\<and>\n     prefix xc xs \\<and>\n     vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc\n        \\<in> C M2 M1 \\<Omega> V m i -\n              RM M2 M1 \\<Omega> V m i) \\<Longrightarrow>\n    False", "obtain xr j where \"prefix xr xs\" \"j \\<le> i\" \"vs@xr \\<in> ?RM j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>xr j.\n        \\<lbrakk>prefix xr xs; j \\<le> i;\n         vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>?PrefPreviouslyRemoved\\<close>"], ["proof (prove)\nusing this:\n  \\<exists>xr j.\n     xr \\<noteq> xs \\<and>\n     prefix xr xs \\<and>\n     j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. (\\<And>xr j.\n        \\<lbrakk>prefix xr xs; j \\<le> i;\n         vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  prefix xr xs\n  j \\<le> i\n  vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc\n        \\<in> C M2 M1 \\<Omega> V m i -\n              RM M2 M1 \\<Omega> V m i) \\<Longrightarrow>\n    False", "obtain xc where \"prefix xc xs\" \"vs@xc \\<in> ?C i - ?RM i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>xc.\n        \\<lbrakk>prefix xc xs;\n         vs @ xc\n         \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>?PrefJustContained\\<close>"], ["proof (prove)\nusing this:\n  \\<exists>xc.\n     xc \\<noteq> xs \\<and>\n     prefix xc xs \\<and>\n     vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. (\\<And>xc.\n        \\<lbrakk>prefix xc xs;\n         vs @ xc\n         \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  prefix xc xs\n  vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc\n        \\<in> C M2 M1 \\<Omega> V m i -\n              RM M2 M1 \\<Omega> V m i) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  prefix xc xs\n  vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "have \"Suc (length xc) = i\""], ["proof (prove)\nusing this:\n  prefix xc xs\n  vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. Suc (length xc) = i", "using C_index"], ["proof (prove)\nusing this:\n  prefix xc xs\n  vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n  \\<lbrakk>?vs @ ?xs \\<in> C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i;\n   mcp (?vs @ ?xs) ?V ?vs\\<rbrakk>\n  \\<Longrightarrow> Suc (length ?xs) = ?i\n\ngoal (1 subgoal):\n 1. Suc (length xc) = i", "by (metis Diff_iff assms(2) mcp_prefix_of_suffix)"], ["proof (state)\nthis:\n  Suc (length xc) = i\n\ngoal (1 subgoal):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc\n        \\<in> C M2 M1 \\<Omega> V m i -\n              RM M2 M1 \\<Omega> V m i) \\<Longrightarrow>\n    False", "moreover"], ["proof (state)\nthis:\n  Suc (length xc) = i\n\ngoal (1 subgoal):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc\n        \\<in> C M2 M1 \\<Omega> V m i -\n              RM M2 M1 \\<Omega> V m i) \\<Longrightarrow>\n    False", "have \"length xc \\<le> length xs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. length xc \\<le> length xs", "using \\<open>prefix xc xs\\<close>"], ["proof (prove)\nusing this:\n  prefix xc xs\n\ngoal (1 subgoal):\n 1. length xc \\<le> length xs", "by (simp add: prefix_length_le)"], ["proof (state)\nthis:\n  length xc \\<le> length xs\n\ngoal (1 subgoal):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc\n        \\<in> C M2 M1 \\<Omega> V m i -\n              RM M2 M1 \\<Omega> V m i) \\<Longrightarrow>\n    False", "moreover"], ["proof (state)\nthis:\n  length xc \\<le> length xs\n\ngoal (1 subgoal):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc\n        \\<in> C M2 M1 \\<Omega> V m i -\n              RM M2 M1 \\<Omega> V m i) \\<Longrightarrow>\n    False", "have \"xc \\<noteq> xs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. xc \\<noteq> xs", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. xc = xs \\<Longrightarrow> False", "assume \"xc = xs\""], ["proof (state)\nthis:\n  xc = xs\n\ngoal (1 subgoal):\n 1. xc = xs \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  xc = xs", "have \"vs@xs \\<in> ?C i\""], ["proof (prove)\nusing this:\n  xc = xs\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> C M2 M1 \\<Omega> V m i", "using \\<open>vs@xc \\<in> ?C i - ?RM i\\<close>"], ["proof (prove)\nusing this:\n  xc = xs\n  vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> C M2 M1 \\<Omega> V m i", "by auto"], ["proof (state)\nthis:\n  vs @ xs \\<in> C M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. xc = xs \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  vs @ xs \\<in> C M2 M1 \\<Omega> V m i", "have \"vs@xs \\<in> ?TS i\""], ["proof (prove)\nusing this:\n  vs @ xs \\<in> C M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> TS M2 M1 \\<Omega> V m i", "using C_subset"], ["proof (prove)\nusing this:\n  vs @ xs \\<in> C M2 M1 \\<Omega> V m i\n  C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i\n  \\<subseteq> TS ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> TS M2 M1 \\<Omega> V m i", "by blast"], ["proof (state)\nthis:\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. xc = xs \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i", "show \"False\""], ["proof (prove)\nusing this:\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. False", "using assms(1)"], ["proof (prove)\nusing this:\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\n  vs @ xs \\<notin> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. False", "by blast"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  xc \\<noteq> xs\n\ngoal (1 subgoal):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc\n        \\<in> C M2 M1 \\<Omega> V m i -\n              RM M2 M1 \\<Omega> V m i) \\<Longrightarrow>\n    False", "ultimately"], ["proof (chain)\npicking this:\n  Suc (length xc) = i\n  length xc \\<le> length xs\n  xc \\<noteq> xs", "have \"i \\<le> length xs\""], ["proof (prove)\nusing this:\n  Suc (length xc) = i\n  length xc \\<le> length xs\n  xc \\<noteq> xs\n\ngoal (1 subgoal):\n 1. i \\<le> length xs", "using \\<open>prefix xc xs\\<close> not_less_eq_eq prefix_length_prefix prefix_order.antisym"], ["proof (prove)\nusing this:\n  Suc (length xc) = i\n  length xc \\<le> length xs\n  xc \\<noteq> xs\n  prefix xc xs\n  (\\<not> ?m \\<le> ?n) = (Suc ?n \\<le> ?m)\n  \\<lbrakk>prefix ?ps ?xs; prefix ?qs ?xs;\n   length ?ps \\<le> length ?qs\\<rbrakk>\n  \\<Longrightarrow> prefix ?ps ?qs\n  \\<lbrakk>prefix ?x ?y; prefix ?y ?x\\<rbrakk> \\<Longrightarrow> ?x = ?y\n\ngoal (1 subgoal):\n 1. i \\<le> length xs", "by blast"], ["proof (state)\nthis:\n  i \\<le> length xs\n\ngoal (1 subgoal):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc\n        \\<in> C M2 M1 \\<Omega> V m i -\n              RM M2 M1 \\<Omega> V m i) \\<Longrightarrow>\n    False", "have \"\\<And> n . (n < i) \\<Longrightarrow> vs@(take n xs) \\<in> ?C (Suc n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < i \\<Longrightarrow>\n       vs @ take n xs \\<in> C M2 M1 \\<Omega> V m (Suc n)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < i \\<Longrightarrow>\n       vs @ take n xs \\<in> C M2 M1 \\<Omega> V m (Suc n)", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < i \\<Longrightarrow>\n       vs @ take n xs \\<in> C M2 M1 \\<Omega> V m (Suc n)", "assume \"n < i\""], ["proof (state)\nthis:\n  n < i\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < i \\<Longrightarrow>\n       vs @ take n xs \\<in> C M2 M1 \\<Omega> V m (Suc n)", "show \"vs @ take n xs \\<in> C M2 M1 \\<Omega> V m (Suc n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ take n xs \\<in> C M2 M1 \\<Omega> V m (Suc n)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ take n xs \\<in> C M2 M1 \\<Omega> V m (Suc n)", "have \"n \\<le> length xc\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n \\<le> length xc", "using \\<open>n < i\\<close> \\<open>Suc (length xc) = i\\<close> less_Suc_eq_le"], ["proof (prove)\nusing this:\n  n < i\n  Suc (length xc) = i\n  (?m < Suc ?n) = (?m \\<le> ?n)\n\ngoal (1 subgoal):\n 1. n \\<le> length xc", "by blast"], ["proof (state)\nthis:\n  n \\<le> length xc\n\ngoal (1 subgoal):\n 1. vs @ take n xs \\<in> C M2 M1 \\<Omega> V m (Suc n)", "then"], ["proof (chain)\npicking this:\n  n \\<le> length xc", "have \"prefix (vs @ (take n xs)) (vs @ xc)\""], ["proof (prove)\nusing this:\n  n \\<le> length xc\n\ngoal (1 subgoal):\n 1. prefix (vs @ take n xs) (vs @ xc)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. n \\<le> length xc \\<Longrightarrow> prefix (vs @ take n xs) (vs @ xc)", "have \"n \\<le> length xs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n \\<le> length xs", "using \\<open>length xc \\<le> length xs\\<close> \\<open>n \\<le> length xc\\<close> order_trans"], ["proof (prove)\nusing this:\n  length xc \\<le> length xs\n  n \\<le> length xc\n  \\<lbrakk>?x \\<le> ?y; ?y \\<le> ?z\\<rbrakk> \\<Longrightarrow> ?x \\<le> ?z\n\ngoal (1 subgoal):\n 1. n \\<le> length xs", "by blast"], ["proof (state)\nthis:\n  n \\<le> length xs\n\ngoal (1 subgoal):\n 1. n \\<le> length xc \\<Longrightarrow> prefix (vs @ take n xs) (vs @ xc)", "then"], ["proof (chain)\npicking this:\n  n \\<le> length xs", "have \"prefix (take n xs) xc\""], ["proof (prove)\nusing this:\n  n \\<le> length xs\n\ngoal (1 subgoal):\n 1. prefix (take n xs) xc", "by (metis (no_types) \\<open>n \\<le> length xc\\<close> \\<open>prefix xc xs\\<close> length_take min.absorb2 \n                prefix_length_prefix take_is_prefix)"], ["proof (state)\nthis:\n  prefix (take n xs) xc\n\ngoal (1 subgoal):\n 1. n \\<le> length xc \\<Longrightarrow> prefix (vs @ take n xs) (vs @ xc)", "then"], ["proof (chain)\npicking this:\n  prefix (take n xs) xc", "show ?thesis"], ["proof (prove)\nusing this:\n  prefix (take n xs) xc\n\ngoal (1 subgoal):\n 1. prefix (vs @ take n xs) (vs @ xc)", "by simp"], ["proof (state)\nthis:\n  prefix (vs @ take n xs) (vs @ xc)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  prefix (vs @ take n xs) (vs @ xc)\n\ngoal (1 subgoal):\n 1. vs @ take n xs \\<in> C M2 M1 \\<Omega> V m (Suc n)", "then"], ["proof (chain)\npicking this:\n  prefix (vs @ take n xs) (vs @ xc)", "have \"vs @ take n xs \\<in> ?TS i\""], ["proof (prove)\nusing this:\n  prefix (vs @ take n xs) (vs @ xc)\n\ngoal (1 subgoal):\n 1. vs @ take n xs \\<in> TS M2 M1 \\<Omega> V m i", "by (meson C_subset DiffD1 TS_prefix_containment \\<open>prefix xc xs\\<close> \n              \\<open>vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\\<close> assms(2) contra_subsetD \n              mcp_prefix_of_suffix same_prefix_prefix)"], ["proof (state)\nthis:\n  vs @ take n xs \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ take n xs \\<in> C M2 M1 \\<Omega> V m (Suc n)", "then"], ["proof (chain)\npicking this:\n  vs @ take n xs \\<in> TS M2 M1 \\<Omega> V m i", "obtain jn where \"jn < Suc i\" \"vs@(take n xs) \\<in> ?C jn\""], ["proof (prove)\nusing this:\n  vs @ take n xs \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. (\\<And>jn.\n        \\<lbrakk>jn < Suc i;\n         vs @ take n xs \\<in> C M2 M1 \\<Omega> V m jn\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using TS_union[of M2 M1 \\<Omega> V m i]"], ["proof (prove)\nusing this:\n  vs @ take n xs \\<in> TS M2 M1 \\<Omega> V m i\n  TS M2 M1 \\<Omega> V m i =\n  \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i])\n\ngoal (1 subgoal):\n 1. (\\<And>jn.\n        \\<lbrakk>jn < Suc i;\n         vs @ take n xs \\<in> C M2 M1 \\<Omega> V m jn\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis UN_iff atLeast_upt lessThan_iff)"], ["proof (state)\nthis:\n  jn < Suc i\n  vs @ take n xs \\<in> C M2 M1 \\<Omega> V m jn\n\ngoal (1 subgoal):\n 1. vs @ take n xs \\<in> C M2 M1 \\<Omega> V m (Suc n)", "moreover"], ["proof (state)\nthis:\n  jn < Suc i\n  vs @ take n xs \\<in> C M2 M1 \\<Omega> V m jn\n\ngoal (1 subgoal):\n 1. vs @ take n xs \\<in> C M2 M1 \\<Omega> V m (Suc n)", "have \"mcp (vs @ take n xs) V vs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mcp (vs @ take n xs) V vs", "by (meson assms(2) mcp_prefix_of_suffix take_is_prefix)"], ["proof (state)\nthis:\n  mcp (vs @ take n xs) V vs\n\ngoal (1 subgoal):\n 1. vs @ take n xs \\<in> C M2 M1 \\<Omega> V m (Suc n)", "ultimately"], ["proof (chain)\npicking this:\n  jn < Suc i\n  vs @ take n xs \\<in> C M2 M1 \\<Omega> V m jn\n  mcp (vs @ take n xs) V vs", "have \"jn = Suc (length (take n xs))\""], ["proof (prove)\nusing this:\n  jn < Suc i\n  vs @ take n xs \\<in> C M2 M1 \\<Omega> V m jn\n  mcp (vs @ take n xs) V vs\n\ngoal (1 subgoal):\n 1. jn = Suc (length (take n xs))", "using C_index[of vs \"take n xs\" M2 M1 \\<Omega> V m jn]"], ["proof (prove)\nusing this:\n  jn < Suc i\n  vs @ take n xs \\<in> C M2 M1 \\<Omega> V m jn\n  mcp (vs @ take n xs) V vs\n  \\<lbrakk>vs @ take n xs \\<in> C M2 M1 \\<Omega> V m jn;\n   mcp (vs @ take n xs) V vs\\<rbrakk>\n  \\<Longrightarrow> Suc (length (take n xs)) = jn\n\ngoal (1 subgoal):\n 1. jn = Suc (length (take n xs))", "by auto"], ["proof (state)\nthis:\n  jn = Suc (length (take n xs))\n\ngoal (1 subgoal):\n 1. vs @ take n xs \\<in> C M2 M1 \\<Omega> V m (Suc n)", "then"], ["proof (chain)\npicking this:\n  jn = Suc (length (take n xs))", "have \"jn = Suc n\""], ["proof (prove)\nusing this:\n  jn = Suc (length (take n xs))\n\ngoal (1 subgoal):\n 1. jn = Suc n", "using \\<open>length xc \\<le> length xs\\<close> \\<open>n \\<le> length xc\\<close>"], ["proof (prove)\nusing this:\n  jn = Suc (length (take n xs))\n  length xc \\<le> length xs\n  n \\<le> length xc\n\ngoal (1 subgoal):\n 1. jn = Suc n", "by auto"], ["proof (state)\nthis:\n  jn = Suc n\n\ngoal (1 subgoal):\n 1. vs @ take n xs \\<in> C M2 M1 \\<Omega> V m (Suc n)", "then"], ["proof (chain)\npicking this:\n  jn = Suc n", "show \"vs@(take n xs) \\<in> ?C (Suc n)\""], ["proof (prove)\nusing this:\n  jn = Suc n\n\ngoal (1 subgoal):\n 1. vs @ take n xs \\<in> C M2 M1 \\<Omega> V m (Suc n)", "using \\<open>vs@(take n xs) \\<in> ?C jn\\<close>"], ["proof (prove)\nusing this:\n  jn = Suc n\n  vs @ take n xs \\<in> C M2 M1 \\<Omega> V m jn\n\ngoal (1 subgoal):\n 1. vs @ take n xs \\<in> C M2 M1 \\<Omega> V m (Suc n)", "by auto"], ["proof (state)\nthis:\n  vs @ take n xs \\<in> C M2 M1 \\<Omega> V m (Suc n)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  vs @ take n xs \\<in> C M2 M1 \\<Omega> V m (Suc n)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?n < i \\<Longrightarrow>\n  vs @ take ?n xs \\<in> C M2 M1 \\<Omega> V m (Suc ?n)\n\ngoal (1 subgoal):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc\n        \\<in> C M2 M1 \\<Omega> V m i -\n              RM M2 M1 \\<Omega> V m i) \\<Longrightarrow>\n    False", "have \"\\<And> n . (n < i) \\<Longrightarrow> vs@(take n xs) \\<notin> ?RM (Suc n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < i \\<Longrightarrow>\n       vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < i \\<Longrightarrow>\n       vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < i \\<Longrightarrow>\n       vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "assume \"n < i\""], ["proof (state)\nthis:\n  n < i\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       n < i \\<Longrightarrow>\n       vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "show \"vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "proof (cases \"n = length xc\")"], ["proof (state)\ngoal (2 subgoals):\n 1. n = length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)\n 2. n \\<noteq> length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "case True"], ["proof (state)\nthis:\n  n = length xc\n\ngoal (2 subgoals):\n 1. n = length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)\n 2. n \\<noteq> length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "then"], ["proof (chain)\npicking this:\n  n = length xc", "show ?thesis"], ["proof (prove)\nusing this:\n  n = length xc\n\ngoal (1 subgoal):\n 1. vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "using \\<open>vs@xc \\<in> ?C i - ?RM i\\<close>"], ["proof (prove)\nusing this:\n  n = length xc\n  vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "by (metis DiffD2 \\<open>Suc (length xc) = i\\<close> \\<open>prefix xc xs\\<close> append_eq_conv_conj prefixE)"], ["proof (state)\nthis:\n  vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)\n\ngoal (1 subgoal):\n 1. n \\<noteq> length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. n \\<noteq> length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "case False"], ["proof (state)\nthis:\n  n \\<noteq> length xc\n\ngoal (1 subgoal):\n 1. n \\<noteq> length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "then"], ["proof (chain)\npicking this:\n  n \\<noteq> length xc", "have \"n < length xc\""], ["proof (prove)\nusing this:\n  n \\<noteq> length xc\n\ngoal (1 subgoal):\n 1. n < length xc", "using \\<open>n < i\\<close> \\<open>Suc (length xc) = i\\<close>"], ["proof (prove)\nusing this:\n  n \\<noteq> length xc\n  n < i\n  Suc (length xc) = i\n\ngoal (1 subgoal):\n 1. n < length xc", "by linarith"], ["proof (state)\nthis:\n  n < length xc\n\ngoal (1 subgoal):\n 1. n \\<noteq> length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "proof (cases \"Suc n < length xc\")"], ["proof (state)\ngoal (2 subgoals):\n 1. Suc n < length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)\n 2. \\<not> Suc n < length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "case True"], ["proof (state)\nthis:\n  Suc n < length xc\n\ngoal (2 subgoals):\n 1. Suc n < length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)\n 2. \\<not> Suc n < length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "then"], ["proof (chain)\npicking this:\n  Suc n < length xc", "have \"Suc n < i\""], ["proof (prove)\nusing this:\n  Suc n < length xc\n\ngoal (1 subgoal):\n 1. Suc n < i", "using \\<open>Suc (length xc) = i\\<close> \\<open>n < length xc\\<close>"], ["proof (prove)\nusing this:\n  Suc n < length xc\n  Suc (length xc) = i\n  n < length xc\n\ngoal (1 subgoal):\n 1. Suc n < i", "by blast"], ["proof (state)\nthis:\n  Suc n < i\n\ngoal (2 subgoals):\n 1. Suc n < length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)\n 2. \\<not> Suc n < length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "then"], ["proof (chain)\npicking this:\n  Suc n < i", "have \"vs @ (take (Suc n) xs) \\<in> ?C (Suc (Suc n))\""], ["proof (prove)\nusing this:\n  Suc n < i\n\ngoal (1 subgoal):\n 1. vs @ take (Suc n) xs \\<in> C M2 M1 \\<Omega> V m (Suc (Suc n))", "using \\<open>\\<And> n . (n < i) \\<Longrightarrow> vs@(take n xs) \\<in> ?C (Suc n)\\<close>"], ["proof (prove)\nusing this:\n  Suc n < i\n  ?n < i \\<Longrightarrow>\n  vs @ take ?n xs \\<in> C M2 M1 \\<Omega> V m (Suc ?n)\n\ngoal (1 subgoal):\n 1. vs @ take (Suc n) xs \\<in> C M2 M1 \\<Omega> V m (Suc (Suc n))", "by blast"], ["proof (state)\nthis:\n  vs @ take (Suc n) xs \\<in> C M2 M1 \\<Omega> V m (Suc (Suc n))\n\ngoal (2 subgoals):\n 1. Suc n < length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)\n 2. \\<not> Suc n < length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "then"], ["proof (chain)\npicking this:\n  vs @ take (Suc n) xs \\<in> C M2 M1 \\<Omega> V m (Suc (Suc n))", "have \"vs @ butlast (take (Suc n) xs) \\<in> ?C (Suc n) - ?RM (Suc n)\""], ["proof (prove)\nusing this:\n  vs @ take (Suc n) xs \\<in> C M2 M1 \\<Omega> V m (Suc (Suc n))\n\ngoal (1 subgoal):\n 1. vs @ butlast (take (Suc n) xs)\n    \\<in> C M2 M1 \\<Omega> V m (Suc n) - RM M2 M1 \\<Omega> V m (Suc n)", "using True C_immediate_prefix_containment[of vs \"take (Suc n) xs\" M2 M1 \\<Omega> V m n]"], ["proof (prove)\nusing this:\n  vs @ take (Suc n) xs \\<in> C M2 M1 \\<Omega> V m (Suc (Suc n))\n  Suc n < length xc\n  \\<lbrakk>vs @ take (Suc n) xs \\<in> C M2 M1 \\<Omega> V m (Suc (Suc n));\n   take (Suc n) xs \\<noteq> []\\<rbrakk>\n  \\<Longrightarrow> vs @ butlast (take (Suc n) xs)\n                    \\<in> C M2 M1 \\<Omega> V m (Suc n) -\n                          RM M2 M1 \\<Omega> V m (Suc n)\n\ngoal (1 subgoal):\n 1. vs @ butlast (take (Suc n) xs)\n    \\<in> C M2 M1 \\<Omega> V m (Suc n) - RM M2 M1 \\<Omega> V m (Suc n)", "by (metis Suc_neq_Zero \\<open>prefix xc xs\\<close> \\<open>xc \\<noteq> xs\\<close> prefix_Nil take_eq_Nil)"], ["proof (state)\nthis:\n  vs @ butlast (take (Suc n) xs)\n  \\<in> C M2 M1 \\<Omega> V m (Suc n) - RM M2 M1 \\<Omega> V m (Suc n)\n\ngoal (2 subgoals):\n 1. Suc n < length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)\n 2. \\<not> Suc n < length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "then"], ["proof (chain)\npicking this:\n  vs @ butlast (take (Suc n) xs)\n  \\<in> C M2 M1 \\<Omega> V m (Suc n) - RM M2 M1 \\<Omega> V m (Suc n)", "show ?thesis"], ["proof (prove)\nusing this:\n  vs @ butlast (take (Suc n) xs)\n  \\<in> C M2 M1 \\<Omega> V m (Suc n) - RM M2 M1 \\<Omega> V m (Suc n)\n\ngoal (1 subgoal):\n 1. vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "by (metis DiffD2 Suc_lessD True \\<open>length xc \\<le> length xs\\<close> butlast_snoc less_le_trans \n                take_Suc_conv_app_nth)"], ["proof (state)\nthis:\n  vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)\n\ngoal (1 subgoal):\n 1. \\<not> Suc n < length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> Suc n < length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "case False"], ["proof (state)\nthis:\n  \\<not> Suc n < length xc\n\ngoal (1 subgoal):\n 1. \\<not> Suc n < length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "then"], ["proof (chain)\npicking this:\n  \\<not> Suc n < length xc", "have \"Suc n = length xc\""], ["proof (prove)\nusing this:\n  \\<not> Suc n < length xc\n\ngoal (1 subgoal):\n 1. Suc n = length xc", "using Suc_lessI \\<open>n < length xc\\<close>"], ["proof (prove)\nusing this:\n  \\<not> Suc n < length xc\n  \\<lbrakk>?m < ?n; Suc ?m \\<noteq> ?n\\<rbrakk>\n  \\<Longrightarrow> Suc ?m < ?n\n  n < length xc\n\ngoal (1 subgoal):\n 1. Suc n = length xc", "by blast"], ["proof (state)\nthis:\n  Suc n = length xc\n\ngoal (1 subgoal):\n 1. \\<not> Suc n < length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "then"], ["proof (chain)\npicking this:\n  Suc n = length xc", "have \"vs @ (take (Suc n) xs) \\<in> ?C (Suc (Suc n))\""], ["proof (prove)\nusing this:\n  Suc n = length xc\n\ngoal (1 subgoal):\n 1. vs @ take (Suc n) xs \\<in> C M2 M1 \\<Omega> V m (Suc (Suc n))", "using \\<open>Suc (length xc) = i\\<close> \\<open>\\<And>n. n < i \\<Longrightarrow> vs @ take n xs \\<in> C M2 M1 \\<Omega> V m (Suc n)\\<close>"], ["proof (prove)\nusing this:\n  Suc n = length xc\n  Suc (length xc) = i\n  ?n < i \\<Longrightarrow>\n  vs @ take ?n xs \\<in> C M2 M1 \\<Omega> V m (Suc ?n)\n\ngoal (1 subgoal):\n 1. vs @ take (Suc n) xs \\<in> C M2 M1 \\<Omega> V m (Suc (Suc n))", "by auto"], ["proof (state)\nthis:\n  vs @ take (Suc n) xs \\<in> C M2 M1 \\<Omega> V m (Suc (Suc n))\n\ngoal (1 subgoal):\n 1. \\<not> Suc n < length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "then"], ["proof (chain)\npicking this:\n  vs @ take (Suc n) xs \\<in> C M2 M1 \\<Omega> V m (Suc (Suc n))", "have \"vs @ butlast (take (Suc n) xs) \\<in> ?C (Suc n) - ?RM (Suc n)\""], ["proof (prove)\nusing this:\n  vs @ take (Suc n) xs \\<in> C M2 M1 \\<Omega> V m (Suc (Suc n))\n\ngoal (1 subgoal):\n 1. vs @ butlast (take (Suc n) xs)\n    \\<in> C M2 M1 \\<Omega> V m (Suc n) - RM M2 M1 \\<Omega> V m (Suc n)", "using False C_immediate_prefix_containment[of vs \"take (Suc n) xs\" M2 M1 \\<Omega> V m n]"], ["proof (prove)\nusing this:\n  vs @ take (Suc n) xs \\<in> C M2 M1 \\<Omega> V m (Suc (Suc n))\n  \\<not> Suc n < length xc\n  \\<lbrakk>vs @ take (Suc n) xs \\<in> C M2 M1 \\<Omega> V m (Suc (Suc n));\n   take (Suc n) xs \\<noteq> []\\<rbrakk>\n  \\<Longrightarrow> vs @ butlast (take (Suc n) xs)\n                    \\<in> C M2 M1 \\<Omega> V m (Suc n) -\n                          RM M2 M1 \\<Omega> V m (Suc n)\n\ngoal (1 subgoal):\n 1. vs @ butlast (take (Suc n) xs)\n    \\<in> C M2 M1 \\<Omega> V m (Suc n) - RM M2 M1 \\<Omega> V m (Suc n)", "by (metis Suc_neq_Zero \\<open>prefix xc xs\\<close> \\<open>xc \\<noteq> xs\\<close> prefix_Nil take_eq_Nil)"], ["proof (state)\nthis:\n  vs @ butlast (take (Suc n) xs)\n  \\<in> C M2 M1 \\<Omega> V m (Suc n) - RM M2 M1 \\<Omega> V m (Suc n)\n\ngoal (1 subgoal):\n 1. \\<not> Suc n < length xc \\<Longrightarrow>\n    vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "then"], ["proof (chain)\npicking this:\n  vs @ butlast (take (Suc n) xs)\n  \\<in> C M2 M1 \\<Omega> V m (Suc n) - RM M2 M1 \\<Omega> V m (Suc n)", "show ?thesis"], ["proof (prove)\nusing this:\n  vs @ butlast (take (Suc n) xs)\n  \\<in> C M2 M1 \\<Omega> V m (Suc n) - RM M2 M1 \\<Omega> V m (Suc n)\n\ngoal (1 subgoal):\n 1. vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)", "by (metis Diff_iff \\<open>Suc n = length xc\\<close> \\<open>length xc \\<le> length xs\\<close> butlast_take diff_Suc_1)"], ["proof (state)\nthis:\n  vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?n < i \\<Longrightarrow>\n  vs @ take ?n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc ?n)\n\ngoal (1 subgoal):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc\n        \\<in> C M2 M1 \\<Omega> V m i -\n              RM M2 M1 \\<Omega> V m i) \\<Longrightarrow>\n    False", "have \"xr = take j xs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. xr = take j xs", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. xr = take j xs", "have \"vs@xr \\<in> ?C j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xr \\<in> C M2 M1 \\<Omega> V m j", "using \\<open>vs@xr \\<in> ?RM j\\<close> RM_subset"], ["proof (prove)\nusing this:\n  vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n  RM ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i\n  \\<subseteq> C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i\n\ngoal (1 subgoal):\n 1. vs @ xr \\<in> C M2 M1 \\<Omega> V m j", "by blast"], ["proof (state)\nthis:\n  vs @ xr \\<in> C M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. xr = take j xs", "then"], ["proof (chain)\npicking this:\n  vs @ xr \\<in> C M2 M1 \\<Omega> V m j", "show ?thesis"], ["proof (prove)\nusing this:\n  vs @ xr \\<in> C M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. xr = take j xs", "using C_index"], ["proof (prove)\nusing this:\n  vs @ xr \\<in> C M2 M1 \\<Omega> V m j\n  \\<lbrakk>?vs @ ?xs \\<in> C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i;\n   mcp (?vs @ ?xs) ?V ?vs\\<rbrakk>\n  \\<Longrightarrow> Suc (length ?xs) = ?i\n\ngoal (1 subgoal):\n 1. xr = take j xs", "by (metis Suc_le_lessD \\<open>\\<And>n. n < i \\<Longrightarrow> vs @ take n xs \\<notin> RM M2 M1 \\<Omega> V m (Suc n)\\<close> \\<open>j \\<le> i\\<close> \n            \\<open>prefix xr xs\\<close> \\<open>vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\\<close> append_eq_conv_conj assms(2) \n            mcp_prefix_of_suffix prefix_def)"], ["proof (state)\nthis:\n  xr = take j xs\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  xr = take j xs\n\ngoal (1 subgoal):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc\n        \\<in> C M2 M1 \\<Omega> V m i -\n              RM M2 M1 \\<Omega> V m i) \\<Longrightarrow>\n    False", "have \"vs@xr \\<notin> ?RM j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xr \\<notin> RM M2 M1 \\<Omega> V m j", "by (metis (no_types) C_index RM_subset \\<open>i \\<le> length xs\\<close> \\<open>j \\<le> i\\<close> \\<open>prefix xr xs\\<close> \n          \\<open>xr = take j xs\\<close> assms(2) contra_subsetD dual_order.trans length_take lessI less_irrefl \n          mcp_prefix_of_suffix min.absorb2)"], ["proof (state)\nthis:\n  vs @ xr \\<notin> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc\n        \\<in> C M2 M1 \\<Omega> V m i -\n              RM M2 M1 \\<Omega> V m i) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  vs @ xr \\<notin> RM M2 M1 \\<Omega> V m j", "show \"False\""], ["proof (prove)\nusing this:\n  vs @ xr \\<notin> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. False", "using \\<open>vs@xr \\<in> ?RM j\\<close>"], ["proof (prove)\nusing this:\n  vs @ xr \\<notin> RM M2 M1 \\<Omega> V m j\n  vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<not> ((\\<exists>xr j.\n              xr \\<noteq> xs \\<and>\n              prefix xr xs \\<and>\n              j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n          (\\<exists>xc.\n              xc \\<noteq> xs \\<and>\n              prefix xc xs \\<and>\n              vs @ xc\n              \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma TS_non_containment_causes_rev : \n  assumes \"mcp (vs@xs) V vs\"\n  and \"(\\<exists> xr j . xr \\<noteq> xs \\<and> prefix xr xs \\<and> j \\<le> i \\<and> vs@xr \\<in> RM M2 M1 \\<Omega> V m j)\n       \\<or> (\\<exists> xc . xc \\<noteq> xs \\<and> prefix xc xs \\<and> vs@xc \\<in> (C M2 M1 \\<Omega> V m i) - (RM M2 M1 \\<Omega> V m i))\"\n      (is \"?PrefPreviouslyRemoved \\<or> ?PrefJustContained\")\nshows \"vs@xs \\<notin> TS M2 M1 \\<Omega> V m i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xs \\<notin> TS M2 M1 \\<Omega> V m i", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ xs \\<in> TS M2 M1 \\<Omega> V m i \\<Longrightarrow> False", "let ?TS = \"\\<lambda> n . TS M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ xs \\<in> TS M2 M1 \\<Omega> V m i \\<Longrightarrow> False", "let ?C = \"\\<lambda> n . C M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ xs \\<in> TS M2 M1 \\<Omega> V m i \\<Longrightarrow> False", "let ?RM = \"\\<lambda> n . RM M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ xs \\<in> TS M2 M1 \\<Omega> V m i \\<Longrightarrow> False", "assume \"vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\""], ["proof (state)\nthis:\n  vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> TS M2 M1 \\<Omega> V m i \\<Longrightarrow> False", "have \"?PrefPreviouslyRemoved \\<Longrightarrow> False\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and>\n       vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n    False", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and>\n       vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n    False", "assume ?PrefPreviouslyRemoved"], ["proof (state)\nthis:\n  \\<exists>xr j.\n     xr \\<noteq> xs \\<and>\n     prefix xr xs \\<and>\n     j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and>\n       vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  \\<exists>xr j.\n     xr \\<noteq> xs \\<and>\n     prefix xr xs \\<and>\n     j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "obtain xr j where \"xr \\<noteq> xs\" \"prefix xr xs\" \"j \\<le> i\" \"vs@xr \\<in> ?RM j\""], ["proof (prove)\nusing this:\n  \\<exists>xr j.\n     xr \\<noteq> xs \\<and>\n     prefix xr xs \\<and>\n     j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. (\\<And>xr j.\n        \\<lbrakk>xr \\<noteq> xs; prefix xr xs; j \\<le> i;\n         vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  xr \\<noteq> xs\n  prefix xr xs\n  j \\<le> i\n  vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and>\n       vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  xr \\<noteq> xs\n  prefix xr xs\n  j \\<le> i\n  vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "have \"vs@xr \\<notin> ?C j - ?RM j\""], ["proof (prove)\nusing this:\n  xr \\<noteq> xs\n  prefix xr xs\n  j \\<le> i\n  vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. vs @ xr \\<notin> C M2 M1 \\<Omega> V m j - RM M2 M1 \\<Omega> V m j", "by blast"], ["proof (state)\nthis:\n  vs @ xr \\<notin> C M2 M1 \\<Omega> V m j - RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and>\n       vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n    False", "have \"vs@(take (Suc (length xr)) xs) \\<notin> ?C (Suc j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)", "have \"vs@(take (length xr) xs) \\<notin> ?C j - ?RM j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ take (length xr) xs\n    \\<notin> C M2 M1 \\<Omega> V m j - RM M2 M1 \\<Omega> V m j", "by (metis \\<open>prefix xr xs\\<close> \\<open>vs @ xr \\<notin> C M2 M1 \\<Omega> V m j - RM M2 M1 \\<Omega> V m j\\<close> \n            append_eq_conv_conj prefix_def)"], ["proof (state)\nthis:\n  vs @ take (length xr) xs\n  \\<notin> C M2 M1 \\<Omega> V m j - RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)", "proof (cases j)"], ["proof (state)\ngoal (2 subgoals):\n 1. j = 0 \\<Longrightarrow>\n    vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)\n 2. \\<And>nat.\n       j = Suc nat \\<Longrightarrow>\n       vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)", "case 0"], ["proof (state)\nthis:\n  j = 0\n\ngoal (2 subgoals):\n 1. j = 0 \\<Longrightarrow>\n    vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)\n 2. \\<And>nat.\n       j = Suc nat \\<Longrightarrow>\n       vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)", "then"], ["proof (chain)\npicking this:\n  j = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  j = 0\n\ngoal (1 subgoal):\n 1. vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)", "using RM.simps(1) \\<open>vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\\<close>"], ["proof (prove)\nusing this:\n  j = 0\n  RM ?M2.0 ?M1.0 ?\\<Omega> ?V ?m 0 = {}\n  vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)", "by blast"], ["proof (state)\nthis:\n  vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       j = Suc nat \\<Longrightarrow>\n       vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>nat.\n       j = Suc nat \\<Longrightarrow>\n       vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)", "case (Suc j')"], ["proof (state)\nthis:\n  j = Suc j'\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       j = Suc nat \\<Longrightarrow>\n       vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)", "then"], ["proof (chain)\npicking this:\n  j = Suc j'", "have \"?C (Suc j) \\<subseteq> append_set (?C j - ?RM j) (inputs M2)\""], ["proof (prove)\nusing this:\n  j = Suc j'\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc j)\n    \\<subseteq> append_set\n                 (C M2 M1 \\<Omega> V m j - RM M2 M1 \\<Omega> V m j)\n                 (inputs M2)", "using C.simps(3) Suc"], ["proof (prove)\nusing this:\n  j = Suc j'\n  C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc (Suc ?v)) =\n  append_set\n   (C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v) -\n    RM ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v))\n   (inputs ?M2.0) -\n  TS ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v)\n  j = Suc j'\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc j)\n    \\<subseteq> append_set\n                 (C M2 M1 \\<Omega> V m j - RM M2 M1 \\<Omega> V m j)\n                 (inputs M2)", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc j)\n  \\<subseteq> append_set (C M2 M1 \\<Omega> V m j - RM M2 M1 \\<Omega> V m j)\n               (inputs M2)\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       j = Suc nat \\<Longrightarrow>\n       vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)", "obtain x where \"vs@(take (Suc (length xr)) xs) = vs@(take (length xr) xs) @ [x]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>x.\n        vs @ take (Suc (length xr)) xs =\n        vs @ take (length xr) xs @ [x] \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis \\<open>prefix xr xs\\<close> \\<open>xr \\<noteq> xs\\<close> append_eq_conv_conj not_le prefix_def \n              take_Suc_conv_app_nth take_all)"], ["proof (state)\nthis:\n  vs @ take (Suc (length xr)) xs = vs @ take (length xr) xs @ [x]\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       j = Suc nat \\<Longrightarrow>\n       vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)", "have \"vs@(take (length xr) xs) @ [x] \\<notin> append_set (?C j - ?RM j) (inputs M2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ take (length xr) xs @ [x]\n    \\<notin> append_set (C M2 M1 \\<Omega> V m j - RM M2 M1 \\<Omega> V m j)\n              (inputs M2)", "using \\<open>vs@(take (length xr) xs) \\<notin> ?C j - ?RM j\\<close>"], ["proof (prove)\nusing this:\n  vs @ take (length xr) xs\n  \\<notin> C M2 M1 \\<Omega> V m j - RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. vs @ take (length xr) xs @ [x]\n    \\<notin> append_set (C M2 M1 \\<Omega> V m j - RM M2 M1 \\<Omega> V m j)\n              (inputs M2)", "by simp"], ["proof (state)\nthis:\n  vs @ take (length xr) xs @ [x]\n  \\<notin> append_set (C M2 M1 \\<Omega> V m j - RM M2 M1 \\<Omega> V m j)\n            (inputs M2)\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       j = Suc nat \\<Longrightarrow>\n       vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)", "then"], ["proof (chain)\npicking this:\n  vs @ take (length xr) xs @ [x]\n  \\<notin> append_set (C M2 M1 \\<Omega> V m j - RM M2 M1 \\<Omega> V m j)\n            (inputs M2)", "have \"vs@(take (length xr) xs) @ [x] \\<notin> ?C (Suc j)\""], ["proof (prove)\nusing this:\n  vs @ take (length xr) xs @ [x]\n  \\<notin> append_set (C M2 M1 \\<Omega> V m j - RM M2 M1 \\<Omega> V m j)\n            (inputs M2)\n\ngoal (1 subgoal):\n 1. vs @ take (length xr) xs @ [x] \\<notin> C M2 M1 \\<Omega> V m (Suc j)", "using \\<open>?C (Suc j) \\<subseteq> append_set (?C j - ?RM j) (inputs M2)\\<close>"], ["proof (prove)\nusing this:\n  vs @ take (length xr) xs @ [x]\n  \\<notin> append_set (C M2 M1 \\<Omega> V m j - RM M2 M1 \\<Omega> V m j)\n            (inputs M2)\n  C M2 M1 \\<Omega> V m (Suc j)\n  \\<subseteq> append_set (C M2 M1 \\<Omega> V m j - RM M2 M1 \\<Omega> V m j)\n               (inputs M2)\n\ngoal (1 subgoal):\n 1. vs @ take (length xr) xs @ [x] \\<notin> C M2 M1 \\<Omega> V m (Suc j)", "by blast"], ["proof (state)\nthis:\n  vs @ take (length xr) xs @ [x] \\<notin> C M2 M1 \\<Omega> V m (Suc j)\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       j = Suc nat \\<Longrightarrow>\n       vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)", "then"], ["proof (chain)\npicking this:\n  vs @ take (length xr) xs @ [x] \\<notin> C M2 M1 \\<Omega> V m (Suc j)", "show ?thesis"], ["proof (prove)\nusing this:\n  vs @ take (length xr) xs @ [x] \\<notin> C M2 M1 \\<Omega> V m (Suc j)\n\ngoal (1 subgoal):\n 1. vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)", "using \\<open>vs@(take (Suc (length xr)) xs) = vs@(take (length xr) xs) @ [x]\\<close>"], ["proof (prove)\nusing this:\n  vs @ take (length xr) xs @ [x] \\<notin> C M2 M1 \\<Omega> V m (Suc j)\n  vs @ take (Suc (length xr)) xs = vs @ take (length xr) xs @ [x]\n\ngoal (1 subgoal):\n 1. vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)", "by auto"], ["proof (state)\nthis:\n  vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)\n\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and>\n       vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n    False", "have \"prefix (take (Suc (length xr)) xs) xs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prefix (take (Suc (length xr)) xs) xs", "by (simp add: take_is_prefix)"], ["proof (state)\nthis:\n  prefix (take (Suc (length xr)) xs) xs\n\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and>\n       vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  prefix (take (Suc (length xr)) xs) xs", "have \"vs@(take (Suc (length xr)) xs) \\<in> ?TS i\""], ["proof (prove)\nusing this:\n  prefix (take (Suc (length xr)) xs) xs\n\ngoal (1 subgoal):\n 1. vs @ take (Suc (length xr)) xs \\<in> TS M2 M1 \\<Omega> V m i", "using TS_prefix_containment[OF \\<open>vs @ xs \\<in> TS M2 M1 \\<Omega> V m i\\<close> assms(1)]"], ["proof (prove)\nusing this:\n  prefix (take (Suc (length xr)) xs) xs\n  prefix ?xs' xs \\<Longrightarrow> vs @ ?xs' \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ take (Suc (length xr)) xs \\<in> TS M2 M1 \\<Omega> V m i", "by simp"], ["proof (state)\nthis:\n  vs @ take (Suc (length xr)) xs \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and>\n       vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  vs @ take (Suc (length xr)) xs \\<in> TS M2 M1 \\<Omega> V m i", "obtain j' where \"j' < Suc i \\<and> vs@(take (Suc (length xr)) xs) \\<in> ?C j'\""], ["proof (prove)\nusing this:\n  vs @ take (Suc (length xr)) xs \\<in> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. (\\<And>j'.\n        j' < Suc i \\<and>\n        vs @ take (Suc (length xr)) xs\n        \\<in> C M2 M1 \\<Omega> V m j' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using TS_union[of M2 M1 \\<Omega> V m i]"], ["proof (prove)\nusing this:\n  vs @ take (Suc (length xr)) xs \\<in> TS M2 M1 \\<Omega> V m i\n  TS M2 M1 \\<Omega> V m i =\n  \\<Union> (C M2 M1 \\<Omega> V m ` set [0..<Suc i])\n\ngoal (1 subgoal):\n 1. (\\<And>j'.\n        j' < Suc i \\<and>\n        vs @ take (Suc (length xr)) xs\n        \\<in> C M2 M1 \\<Omega> V m j' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  j' < Suc i \\<and>\n  vs @ take (Suc (length xr)) xs \\<in> C M2 M1 \\<Omega> V m j'\n\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and>\n       vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  j' < Suc i \\<and>\n  vs @ take (Suc (length xr)) xs \\<in> C M2 M1 \\<Omega> V m j'", "have \"Suc (Suc (length xr)) = j'\""], ["proof (prove)\nusing this:\n  j' < Suc i \\<and>\n  vs @ take (Suc (length xr)) xs \\<in> C M2 M1 \\<Omega> V m j'\n\ngoal (1 subgoal):\n 1. Suc (Suc (length xr)) = j'", "using C_index[of vs \"take (Suc (length xr)) xs\"]"], ["proof (prove)\nusing this:\n  j' < Suc i \\<and>\n  vs @ take (Suc (length xr)) xs \\<in> C M2 M1 \\<Omega> V m j'\n  \\<lbrakk>vs @ take (Suc (length xr)) xs\n           \\<in> C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i;\n   mcp (vs @ take (Suc (length xr)) xs) ?V vs\\<rbrakk>\n  \\<Longrightarrow> Suc (length (take (Suc (length xr)) xs)) = ?i\n\ngoal (1 subgoal):\n 1. Suc (Suc (length xr)) = j'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>j' < Suc i \\<and>\n             vs @ take (Suc (length xr)) xs \\<in> C M2 M1 \\<Omega> V m j';\n     \\<And>M2 M1 \\<Omega> V m i.\n        \\<lbrakk>vs @ take (Suc (length xr)) xs\n                 \\<in> C M2 M1 \\<Omega> V m i;\n         mcp (vs @ take (Suc (length xr)) xs) V vs\\<rbrakk>\n        \\<Longrightarrow> Suc (length (take (Suc (length xr)) xs)) =\n                          i\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (length xr)) = j'", "have \"\\<not> length xs \\<le> length xr\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> length xs \\<le> length xr", "by (metis (no_types) \\<open>prefix xr xs\\<close> \\<open>xr \\<noteq> xs\\<close> append_Nil2 append_eq_conv_conj leD \n            nat_less_le prefix_def prefix_length_le)"], ["proof (state)\nthis:\n  \\<not> length xs \\<le> length xr\n\ngoal (1 subgoal):\n 1. \\<lbrakk>j' < Suc i \\<and>\n             vs @ take (Suc (length xr)) xs \\<in> C M2 M1 \\<Omega> V m j';\n     \\<And>M2 M1 \\<Omega> V m i.\n        \\<lbrakk>vs @ take (Suc (length xr)) xs\n                 \\<in> C M2 M1 \\<Omega> V m i;\n         mcp (vs @ take (Suc (length xr)) xs) V vs\\<rbrakk>\n        \\<Longrightarrow> Suc (length (take (Suc (length xr)) xs)) =\n                          i\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (length xr)) = j'", "then"], ["proof (chain)\npicking this:\n  \\<not> length xs \\<le> length xr", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> length xs \\<le> length xr\n\ngoal (1 subgoal):\n 1. Suc (Suc (length xr)) = j'", "by (metis (no_types) \\<open>\\<And>i \\<Omega> V T S M2 M1. \\<lbrakk>vs @ take (Suc (length xr)) xs \\<in> C M2 M1 \\<Omega> V m i; \n                                                    mcp (vs @ take (Suc (length xr)) xs) V vs\\<rbrakk> \n                                                  \\<Longrightarrow> Suc (length (take (Suc (length xr)) xs)) = i\\<close> \n            \\<open>j' < Suc i \\<and> vs @ take (Suc (length xr)) xs \\<in> C M2 M1 \\<Omega> V m j'\\<close> \n            append_eq_conv_conj assms(1) length_take mcp_prefix_of_suffix min.absorb2 \n            not_less_eq_eq prefix_def)"], ["proof (state)\nthis:\n  Suc (Suc (length xr)) = j'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Suc (Suc (length xr)) = j'\n\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and>\n       vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n    False", "moreover"], ["proof (state)\nthis:\n  Suc (Suc (length xr)) = j'\n\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and>\n       vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n    False", "have \"Suc (length xr) = j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Suc (length xr) = j", "using \\<open>vs@xr \\<in> ?RM j\\<close> RM_subset C_index"], ["proof (prove)\nusing this:\n  vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n  RM ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i\n  \\<subseteq> C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i\n  \\<lbrakk>?vs @ ?xs \\<in> C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i;\n   mcp (?vs @ ?xs) ?V ?vs\\<rbrakk>\n  \\<Longrightarrow> Suc (length ?xs) = ?i\n\ngoal (1 subgoal):\n 1. Suc (length xr) = j", "by (metis \\<open>prefix xr xs\\<close> assms(1) mcp_prefix_of_suffix subsetCE)"], ["proof (state)\nthis:\n  Suc (length xr) = j\n\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and>\n       vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n    False", "ultimately"], ["proof (chain)\npicking this:\n  Suc (Suc (length xr)) = j'\n  Suc (length xr) = j", "have \"j' = Suc j\""], ["proof (prove)\nusing this:\n  Suc (Suc (length xr)) = j'\n  Suc (length xr) = j\n\ngoal (1 subgoal):\n 1. j' = Suc j", "by auto"], ["proof (state)\nthis:\n  j' = Suc j\n\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and>\n       vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  j' = Suc j", "have \"vs@(take (Suc (length xr)) xs) \\<in> ?C (Suc j)\""], ["proof (prove)\nusing this:\n  j' = Suc j\n\ngoal (1 subgoal):\n 1. vs @ take (Suc (length xr)) xs \\<in> C M2 M1 \\<Omega> V m (Suc j)", "using \\<open>j' < Suc i \\<and> vs@(take (Suc (length xr)) xs) \\<in> ?C j'\\<close>"], ["proof (prove)\nusing this:\n  j' = Suc j\n  j' < Suc i \\<and>\n  vs @ take (Suc (length xr)) xs \\<in> C M2 M1 \\<Omega> V m j'\n\ngoal (1 subgoal):\n 1. vs @ take (Suc (length xr)) xs \\<in> C M2 M1 \\<Omega> V m (Suc j)", "by auto"], ["proof (state)\nthis:\n  vs @ take (Suc (length xr)) xs \\<in> C M2 M1 \\<Omega> V m (Suc j)\n\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and>\n       vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  vs @ take (Suc (length xr)) xs \\<in> C M2 M1 \\<Omega> V m (Suc j)", "show \"False\""], ["proof (prove)\nusing this:\n  vs @ take (Suc (length xr)) xs \\<in> C M2 M1 \\<Omega> V m (Suc j)\n\ngoal (1 subgoal):\n 1. False", "using \\<open>vs@(take (Suc (length xr)) xs) \\<notin> ?C (Suc j)\\<close>"], ["proof (prove)\nusing this:\n  vs @ take (Suc (length xr)) xs \\<in> C M2 M1 \\<Omega> V m (Suc j)\n  vs @ take (Suc (length xr)) xs \\<notin> C M2 M1 \\<Omega> V m (Suc j)\n\ngoal (1 subgoal):\n 1. False", "by blast"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>xr j.\n     xr \\<noteq> xs \\<and>\n     prefix xr xs \\<and>\n     j \\<le> i \\<and>\n     vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n  False\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> TS M2 M1 \\<Omega> V m i \\<Longrightarrow> False", "moreover"], ["proof (state)\nthis:\n  \\<exists>xr j.\n     xr \\<noteq> xs \\<and>\n     prefix xr xs \\<and>\n     j \\<le> i \\<and>\n     vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n  False\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> TS M2 M1 \\<Omega> V m i \\<Longrightarrow> False", "have \"?PrefJustContained \\<Longrightarrow> False\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    False", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    False", "assume ?PrefJustContained"], ["proof (state)\nthis:\n  \\<exists>xc.\n     xc \\<noteq> xs \\<and>\n     prefix xc xs \\<and>\n     vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  \\<exists>xc.\n     xc \\<noteq> xs \\<and>\n     prefix xc xs \\<and>\n     vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "obtain xc where \"xc \\<noteq> xs\" \n                         \"prefix xc xs\" \n                         \"vs @ xc \\<in> ?C i - ?RM i\""], ["proof (prove)\nusing this:\n  \\<exists>xc.\n     xc \\<noteq> xs \\<and>\n     prefix xc xs \\<and>\n     vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. (\\<And>xc.\n        \\<lbrakk>xc \\<noteq> xs; prefix xc xs;\n         vs @ xc\n         \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast\n    \n    \\<comment> \\<open> only possible if xc = xs \\<close>"], ["proof (state)\nthis:\n  xc \\<noteq> xs\n  prefix xc xs\n  vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  xc \\<noteq> xs\n  prefix xc xs\n  vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "show \"False\""], ["proof (prove)\nusing this:\n  xc \\<noteq> xs\n  prefix xc xs\n  vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. False", "by (metis C_index DiffD1 Suc_less_eq TS_index(1) \\<open>vs @ xs \\<in> ?TS i\\<close> assms(1) leD le_neq_trans \n          mcp_prefix_of_suffix prefix_length_le prefix_length_prefix \n          prefix_order.dual_order.antisym prefix_order.order_refl)"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>xc.\n     xc \\<noteq> xs \\<and>\n     prefix xc xs \\<and>\n     vs @ xc\n     \\<in> C M2 M1 \\<Omega> V m i -\n           RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n  False\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> TS M2 M1 \\<Omega> V m i \\<Longrightarrow> False", "ultimately"], ["proof (chain)\npicking this:\n  \\<exists>xr j.\n     xr \\<noteq> xs \\<and>\n     prefix xr xs \\<and>\n     j \\<le> i \\<and>\n     vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n  False\n  \\<exists>xc.\n     xc \\<noteq> xs \\<and>\n     prefix xc xs \\<and>\n     vs @ xc\n     \\<in> C M2 M1 \\<Omega> V m i -\n           RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n  False", "show \"False\""], ["proof (prove)\nusing this:\n  \\<exists>xr j.\n     xr \\<noteq> xs \\<and>\n     prefix xr xs \\<and>\n     j \\<le> i \\<and>\n     vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n  False\n  \\<exists>xc.\n     xc \\<noteq> xs \\<and>\n     prefix xc xs \\<and>\n     vs @ xc\n     \\<in> C M2 M1 \\<Omega> V m i -\n           RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n  False\n\ngoal (1 subgoal):\n 1. False", "using assms(2)"], ["proof (prove)\nusing this:\n  \\<exists>xr j.\n     xr \\<noteq> xs \\<and>\n     prefix xr xs \\<and>\n     j \\<le> i \\<and>\n     vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n  False\n  \\<exists>xc.\n     xc \\<noteq> xs \\<and>\n     prefix xc xs \\<and>\n     vs @ xc\n     \\<in> C M2 M1 \\<Omega> V m i -\n           RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n  False\n  (\\<exists>xr j.\n      xr \\<noteq> xs \\<and>\n      prefix xr xs \\<and>\n      j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n  (\\<exists>xc.\n      xc \\<noteq> xs \\<and>\n      prefix xc xs \\<and>\n      vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma TS_finite :\n  assumes \"finite V\"\n  and     \"finite (inputs M2)\"\nshows \"finite (TS M2 M1 \\<Omega> V m n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (TS M2 M1 \\<Omega> V m n)", "using assms"], ["proof (prove)\nusing this:\n  finite V\n  finite (inputs M2)\n\ngoal (1 subgoal):\n 1. finite (TS M2 M1 \\<Omega> V m n)", "proof (induction n)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>finite V; finite (inputs M2)\\<rbrakk>\n    \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m 0)\n 2. \\<And>n.\n       \\<lbrakk>\\<lbrakk>finite V; finite (inputs M2)\\<rbrakk>\n                \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m n);\n        finite V; finite (inputs M2)\\<rbrakk>\n       \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m (Suc n))", "case 0"], ["proof (state)\nthis:\n  finite V\n  finite (inputs M2)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>finite V; finite (inputs M2)\\<rbrakk>\n    \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m 0)\n 2. \\<And>n.\n       \\<lbrakk>\\<lbrakk>finite V; finite (inputs M2)\\<rbrakk>\n                \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m n);\n        finite V; finite (inputs M2)\\<rbrakk>\n       \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m (Suc n))", "then"], ["proof (chain)\npicking this:\n  finite V\n  finite (inputs M2)", "show ?case"], ["proof (prove)\nusing this:\n  finite V\n  finite (inputs M2)\n\ngoal (1 subgoal):\n 1. finite (TS M2 M1 \\<Omega> V m 0)", "by auto"], ["proof (state)\nthis:\n  finite (TS M2 M1 \\<Omega> V m 0)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<lbrakk>\\<lbrakk>finite V; finite (inputs M2)\\<rbrakk>\n                \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m n);\n        finite V; finite (inputs M2)\\<rbrakk>\n       \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m (Suc n))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<lbrakk>\\<lbrakk>finite V; finite (inputs M2)\\<rbrakk>\n                \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m n);\n        finite V; finite (inputs M2)\\<rbrakk>\n       \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m (Suc n))", "case (Suc n)"], ["proof (state)\nthis:\n  \\<lbrakk>finite V; finite (inputs M2)\\<rbrakk>\n  \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m n)\n  finite V\n  finite (inputs M2)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<lbrakk>\\<lbrakk>finite V; finite (inputs M2)\\<rbrakk>\n                \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m n);\n        finite V; finite (inputs M2)\\<rbrakk>\n       \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m (Suc n))", "let ?TS = \"\\<lambda> n . TS M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<lbrakk>\\<lbrakk>finite V; finite (inputs M2)\\<rbrakk>\n                \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m n);\n        finite V; finite (inputs M2)\\<rbrakk>\n       \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m (Suc n))", "let ?C = \"\\<lambda> n . C M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<lbrakk>\\<lbrakk>finite V; finite (inputs M2)\\<rbrakk>\n                \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m n);\n        finite V; finite (inputs M2)\\<rbrakk>\n       \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m (Suc n))", "let ?RM = \"\\<lambda> n . RM M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<lbrakk>\\<lbrakk>finite V; finite (inputs M2)\\<rbrakk>\n                \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m n);\n        finite V; finite (inputs M2)\\<rbrakk>\n       \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m (Suc n))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (TS M2 M1 \\<Omega> V m (Suc n))", "proof (cases \"n=0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m (Suc n))\n 2. n \\<noteq> 0 \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m (Suc n))", "case True"], ["proof (state)\nthis:\n  n = 0\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m (Suc n))\n 2. n \\<noteq> 0 \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m (Suc n))", "then"], ["proof (chain)\npicking this:\n  n = 0", "have \"?TS (Suc n) = V\""], ["proof (prove)\nusing this:\n  n = 0\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc n) = V", "by auto"], ["proof (state)\nthis:\n  TS M2 M1 \\<Omega> V m (Suc n) = V\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m (Suc n))\n 2. n \\<noteq> 0 \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m (Suc n))", "then"], ["proof (chain)\npicking this:\n  TS M2 M1 \\<Omega> V m (Suc n) = V", "show ?thesis"], ["proof (prove)\nusing this:\n  TS M2 M1 \\<Omega> V m (Suc n) = V\n\ngoal (1 subgoal):\n 1. finite (TS M2 M1 \\<Omega> V m (Suc n))", "using \\<open>finite V\\<close>"], ["proof (prove)\nusing this:\n  TS M2 M1 \\<Omega> V m (Suc n) = V\n  finite V\n\ngoal (1 subgoal):\n 1. finite (TS M2 M1 \\<Omega> V m (Suc n))", "by auto"], ["proof (state)\nthis:\n  finite (TS M2 M1 \\<Omega> V m (Suc n))\n\ngoal (1 subgoal):\n 1. n \\<noteq> 0 \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m (Suc n))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. n \\<noteq> 0 \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m (Suc n))", "case False"], ["proof (state)\nthis:\n  n \\<noteq> 0\n\ngoal (1 subgoal):\n 1. n \\<noteq> 0 \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m (Suc n))", "then"], ["proof (chain)\npicking this:\n  n \\<noteq> 0", "have \"?TS (Suc n) = ?TS n \\<union> ?C (Suc n)\""], ["proof (prove)\nusing this:\n  n \\<noteq> 0\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc n) =\n    TS M2 M1 \\<Omega> V m n \\<union> C M2 M1 \\<Omega> V m (Suc n)", "by (metis TS.simps(3) gr0_implies_Suc neq0_conv)"], ["proof (state)\nthis:\n  TS M2 M1 \\<Omega> V m (Suc n) =\n  TS M2 M1 \\<Omega> V m n \\<union> C M2 M1 \\<Omega> V m (Suc n)\n\ngoal (1 subgoal):\n 1. n \\<noteq> 0 \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m (Suc n))", "moreover"], ["proof (state)\nthis:\n  TS M2 M1 \\<Omega> V m (Suc n) =\n  TS M2 M1 \\<Omega> V m n \\<union> C M2 M1 \\<Omega> V m (Suc n)\n\ngoal (1 subgoal):\n 1. n \\<noteq> 0 \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m (Suc n))", "have \"finite (?TS n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (TS M2 M1 \\<Omega> V m n)", "using Suc.IH[OF Suc.prems]"], ["proof (prove)\nusing this:\n  finite (TS M2 M1 \\<Omega> V m n)\n\ngoal (1 subgoal):\n 1. finite (TS M2 M1 \\<Omega> V m n)", "by assumption"], ["proof (state)\nthis:\n  finite (TS M2 M1 \\<Omega> V m n)\n\ngoal (1 subgoal):\n 1. n \\<noteq> 0 \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m (Suc n))", "moreover"], ["proof (state)\nthis:\n  finite (TS M2 M1 \\<Omega> V m n)\n\ngoal (1 subgoal):\n 1. n \\<noteq> 0 \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m (Suc n))", "have \"finite (?C (Suc n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (C M2 M1 \\<Omega> V m (Suc n))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. finite (C M2 M1 \\<Omega> V m (Suc n))", "have \"?C (Suc n) \\<subseteq> append_set (?C n) (inputs M2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n)\n    \\<subseteq> append_set (C M2 M1 \\<Omega> V m n) (inputs M2)", "using C_step False"], ["proof (prove)\nusing this:\n  0 < ?n \\<Longrightarrow>\n  C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?n)\n  \\<subseteq> append_set (C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?n) (inputs ?M2.0) -\n              C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?n\n  n \\<noteq> 0\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n)\n    \\<subseteq> append_set (C M2 M1 \\<Omega> V m n) (inputs M2)", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc n)\n  \\<subseteq> append_set (C M2 M1 \\<Omega> V m n) (inputs M2)\n\ngoal (1 subgoal):\n 1. finite (C M2 M1 \\<Omega> V m (Suc n))", "moreover"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc n)\n  \\<subseteq> append_set (C M2 M1 \\<Omega> V m n) (inputs M2)\n\ngoal (1 subgoal):\n 1. finite (C M2 M1 \\<Omega> V m (Suc n))", "have \"?C n \\<subseteq> ?TS n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m n \\<subseteq> TS M2 M1 \\<Omega> V m n", "by (simp add: C_subset)"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m n \\<subseteq> TS M2 M1 \\<Omega> V m n\n\ngoal (1 subgoal):\n 1. finite (C M2 M1 \\<Omega> V m (Suc n))", "ultimately"], ["proof (chain)\npicking this:\n  C M2 M1 \\<Omega> V m (Suc n)\n  \\<subseteq> append_set (C M2 M1 \\<Omega> V m n) (inputs M2)\n  C M2 M1 \\<Omega> V m n \\<subseteq> TS M2 M1 \\<Omega> V m n", "have \"?C (Suc n) \\<subseteq> append_set (?TS n) (inputs M2)\""], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m (Suc n)\n  \\<subseteq> append_set (C M2 M1 \\<Omega> V m n) (inputs M2)\n  C M2 M1 \\<Omega> V m n \\<subseteq> TS M2 M1 \\<Omega> V m n\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc n)\n    \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2)", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc n)\n  \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2)\n\ngoal (1 subgoal):\n 1. finite (C M2 M1 \\<Omega> V m (Suc n))", "moreover"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc n)\n  \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2)\n\ngoal (1 subgoal):\n 1. finite (C M2 M1 \\<Omega> V m (Suc n))", "have \"finite (append_set (?TS n) (inputs M2))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (append_set (TS M2 M1 \\<Omega> V m n) (inputs M2))", "by (simp add: \\<open>finite (TS M2 M1 \\<Omega> V m n)\\<close> assms(2) finite_image_set2)"], ["proof (state)\nthis:\n  finite (append_set (TS M2 M1 \\<Omega> V m n) (inputs M2))\n\ngoal (1 subgoal):\n 1. finite (C M2 M1 \\<Omega> V m (Suc n))", "ultimately"], ["proof (chain)\npicking this:\n  C M2 M1 \\<Omega> V m (Suc n)\n  \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2)\n  finite (append_set (TS M2 M1 \\<Omega> V m n) (inputs M2))", "show ?thesis"], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m (Suc n)\n  \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2)\n  finite (append_set (TS M2 M1 \\<Omega> V m n) (inputs M2))\n\ngoal (1 subgoal):\n 1. finite (C M2 M1 \\<Omega> V m (Suc n))", "using infinite_subset"], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m (Suc n)\n  \\<subseteq> append_set (TS M2 M1 \\<Omega> V m n) (inputs M2)\n  finite (append_set (TS M2 M1 \\<Omega> V m n) (inputs M2))\n  \\<lbrakk>infinite ?A; ?A \\<subseteq> ?B\\<rbrakk>\n  \\<Longrightarrow> infinite ?B\n\ngoal (1 subgoal):\n 1. finite (C M2 M1 \\<Omega> V m (Suc n))", "by auto"], ["proof (state)\nthis:\n  finite (C M2 M1 \\<Omega> V m (Suc n))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  finite (C M2 M1 \\<Omega> V m (Suc n))\n\ngoal (1 subgoal):\n 1. n \\<noteq> 0 \\<Longrightarrow> finite (TS M2 M1 \\<Omega> V m (Suc n))", "ultimately"], ["proof (chain)\npicking this:\n  TS M2 M1 \\<Omega> V m (Suc n) =\n  TS M2 M1 \\<Omega> V m n \\<union> C M2 M1 \\<Omega> V m (Suc n)\n  finite (TS M2 M1 \\<Omega> V m n)\n  finite (C M2 M1 \\<Omega> V m (Suc n))", "show ?thesis"], ["proof (prove)\nusing this:\n  TS M2 M1 \\<Omega> V m (Suc n) =\n  TS M2 M1 \\<Omega> V m n \\<union> C M2 M1 \\<Omega> V m (Suc n)\n  finite (TS M2 M1 \\<Omega> V m n)\n  finite (C M2 M1 \\<Omega> V m (Suc n))\n\ngoal (1 subgoal):\n 1. finite (TS M2 M1 \\<Omega> V m (Suc n))", "by auto"], ["proof (state)\nthis:\n  finite (TS M2 M1 \\<Omega> V m (Suc n))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  finite (TS M2 M1 \\<Omega> V m (Suc n))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma C_finite :\n  assumes \"finite V\"\n  and     \"finite (inputs M2)\"\nshows \"finite (C M2 M1 \\<Omega> V m n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (C M2 M1 \\<Omega> V m n)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. finite (C M2 M1 \\<Omega> V m n)", "have \"C M2 M1 \\<Omega> V m n \\<subseteq> TS M2 M1 \\<Omega> V m n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m n \\<subseteq> TS M2 M1 \\<Omega> V m n", "by (simp add: C_subset)"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m n \\<subseteq> TS M2 M1 \\<Omega> V m n\n\ngoal (1 subgoal):\n 1. finite (C M2 M1 \\<Omega> V m n)", "then"], ["proof (chain)\npicking this:\n  C M2 M1 \\<Omega> V m n \\<subseteq> TS M2 M1 \\<Omega> V m n", "show ?thesis"], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m n \\<subseteq> TS M2 M1 \\<Omega> V m n\n\ngoal (1 subgoal):\n 1. finite (C M2 M1 \\<Omega> V m n)", "using TS_finite[OF assms]"], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m n \\<subseteq> TS M2 M1 \\<Omega> V m n\n  finite (TS M2 ?M1.0 ?\\<Omega> V ?m ?n)\n\ngoal (1 subgoal):\n 1. finite (C M2 M1 \\<Omega> V m n)", "using Finite_Set.finite_subset"], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m n \\<subseteq> TS M2 M1 \\<Omega> V m n\n  finite (TS M2 ?M1.0 ?\\<Omega> V ?m ?n)\n  \\<lbrakk>?A \\<subseteq> ?B; finite ?B\\<rbrakk> \\<Longrightarrow> finite ?A\n\ngoal (1 subgoal):\n 1. finite (C M2 M1 \\<Omega> V m n)", "by blast"], ["proof (state)\nthis:\n  finite (C M2 M1 \\<Omega> V m n)\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open> Final iteration \\<close>"], ["", "text \\<open>\nThe result of calculating @{verbatim TS} for some iteration is final if the result does not change \nfor the next iteration.\n\nSuch a final iteration exists and is at most equal to the number of states of FSM @{verbatim M2} \nmultiplied by an upper bound on the number of states of FSM @{verbatim M1}.\n\nFurthermore, for any sequence not contained in the final iteration of the test suite, a prefix of\nthis sequence must be contained in the latter.\n\\<close>"], ["", "abbreviation \"final_iteration M2 M1 \\<Omega> V m i \\<equiv> TS M2 M1 \\<Omega> V m i = TS M2 M1 \\<Omega> V m (Suc i)\""], ["", "lemma final_iteration_ex :\n  assumes \"OFSM M1\"\n  and     \"OFSM M2\"\n  and     \"asc_fault_domain M2 M1 m\"\n  and     \"test_tools M2 M1 FAIL PM V \\<Omega>\"\n  shows \"final_iteration M2 M1 \\<Omega> V m (Suc ( |M2| * m ))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. final_iteration M2 M1 \\<Omega> V m (Suc (|M2| * m))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. final_iteration M2 M1 \\<Omega> V m (Suc (|M2| * m))", "let ?i = \"Suc ( |M2| * m )\""], ["proof (state)\ngoal (1 subgoal):\n 1. final_iteration M2 M1 \\<Omega> V m (Suc (|M2| * m))", "let ?TS = \"\\<lambda> n . TS M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. final_iteration M2 M1 \\<Omega> V m (Suc (|M2| * m))", "let ?C = \"\\<lambda> n . C M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. final_iteration M2 M1 \\<Omega> V m (Suc (|M2| * m))", "let ?RM = \"\\<lambda> n . RM M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. final_iteration M2 M1 \\<Omega> V m (Suc (|M2| * m))", "have \"is_det_state_cover M2 V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_det_state_cover M2 V", "using assms"], ["proof (prove)\nusing this:\n  OFSM M1\n  OFSM M2\n  asc_fault_domain M2 M1 m\n  test_tools M2 M1 FAIL PM V \\<Omega>\n\ngoal (1 subgoal):\n 1. is_det_state_cover M2 V", "by auto"], ["proof (state)\nthis:\n  is_det_state_cover M2 V\n\ngoal (1 subgoal):\n 1. final_iteration M2 M1 \\<Omega> V m (Suc (|M2| * m))", "moreover"], ["proof (state)\nthis:\n  is_det_state_cover M2 V\n\ngoal (1 subgoal):\n 1. final_iteration M2 M1 \\<Omega> V m (Suc (|M2| * m))", "have \"finite (nodes M2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (nodes M2)", "using assms(2)"], ["proof (prove)\nusing this:\n  OFSM M2\n\ngoal (1 subgoal):\n 1. finite (nodes M2)", "by auto"], ["proof (state)\nthis:\n  finite (nodes M2)\n\ngoal (1 subgoal):\n 1. final_iteration M2 M1 \\<Omega> V m (Suc (|M2| * m))", "moreover"], ["proof (state)\nthis:\n  finite (nodes M2)\n\ngoal (1 subgoal):\n 1. final_iteration M2 M1 \\<Omega> V m (Suc (|M2| * m))", "have \"d_reachable M2 (initial M2) \\<subseteq> nodes M2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. d_reachable M2 (initial M2) \\<subseteq> nodes M2", "by auto"], ["proof (state)\nthis:\n  d_reachable M2 (initial M2) \\<subseteq> nodes M2\n\ngoal (1 subgoal):\n 1. final_iteration M2 M1 \\<Omega> V m (Suc (|M2| * m))", "ultimately"], ["proof (chain)\npicking this:\n  is_det_state_cover M2 V\n  finite (nodes M2)\n  d_reachable M2 (initial M2) \\<subseteq> nodes M2", "have \"finite V\""], ["proof (prove)\nusing this:\n  is_det_state_cover M2 V\n  finite (nodes M2)\n  d_reachable M2 (initial M2) \\<subseteq> nodes M2\n\ngoal (1 subgoal):\n 1. finite V", "using det_state_cover_card[of M2 V]"], ["proof (prove)\nusing this:\n  is_det_state_cover M2 V\n  finite (nodes M2)\n  d_reachable M2 (initial M2) \\<subseteq> nodes M2\n  \\<lbrakk>is_det_state_cover M2 V; finite (nodes M2)\\<rbrakk>\n  \\<Longrightarrow> card (d_reachable M2 (initial M2)) = card V\n\ngoal (1 subgoal):\n 1. finite V", "by (metis finite_if_finite_subsets_card_bdd infinite_subset is_det_state_cover.elims(2) \n        surj_card_le)"], ["proof (state)\nthis:\n  finite V\n\ngoal (1 subgoal):\n 1. final_iteration M2 M1 \\<Omega> V m (Suc (|M2| * m))", "have \"\\<forall> seq \\<in> ?C ?i . seq \\<in> ?RM ?i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>seq\\<in>C M2 M1 \\<Omega> V m (Suc (|M2| * m)).\n       seq \\<in> RM M2 M1 \\<Omega> V m (Suc (|M2| * m))", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>seq.\n       seq \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m)) \\<Longrightarrow>\n       seq \\<in> RM M2 M1 \\<Omega> V m (Suc (|M2| * m))", "fix seq"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>seq.\n       seq \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m)) \\<Longrightarrow>\n       seq \\<in> RM M2 M1 \\<Omega> V m (Suc (|M2| * m))", "assume \"seq \\<in> ?C ?i\""], ["proof (state)\nthis:\n  seq \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m))\n\ngoal (1 subgoal):\n 1. \\<And>seq.\n       seq \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m)) \\<Longrightarrow>\n       seq \\<in> RM M2 M1 \\<Omega> V m (Suc (|M2| * m))", "show \"seq \\<in> ?RM ?i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. seq \\<in> RM M2 M1 \\<Omega> V m (Suc (|M2| * m))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. seq \\<in> RM M2 M1 \\<Omega> V m (Suc (|M2| * m))", "have \"[] \\<in> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [] \\<in> V", "using \\<open>is_det_state_cover M2 V\\<close> det_state_cover_empty"], ["proof (prove)\nusing this:\n  is_det_state_cover M2 V\n  is_det_state_cover ?M ?V \\<Longrightarrow> [] \\<in> ?V\n\ngoal (1 subgoal):\n 1. [] \\<in> V", "by blast"], ["proof (state)\nthis:\n  [] \\<in> V\n\ngoal (1 subgoal):\n 1. seq \\<in> RM M2 M1 \\<Omega> V m (Suc (|M2| * m))", "then"], ["proof (chain)\npicking this:\n  [] \\<in> V", "obtain vs where \"mcp seq V vs\""], ["proof (prove)\nusing this:\n  [] \\<in> V\n\ngoal (1 subgoal):\n 1. (\\<And>vs. mcp seq V vs \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using mcp_ex[OF _ \\<open>finite V\\<close>]"], ["proof (prove)\nusing this:\n  [] \\<in> V\n  \\<lbrakk>[] \\<in> V;\n   \\<And>p. mcp ?z V p \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>vs. mcp seq V vs \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  mcp seq V vs\n\ngoal (1 subgoal):\n 1. seq \\<in> RM M2 M1 \\<Omega> V m (Suc (|M2| * m))", "then"], ["proof (chain)\npicking this:\n  mcp seq V vs", "obtain xs where \"seq = vs@xs\""], ["proof (prove)\nusing this:\n  mcp seq V vs\n\ngoal (1 subgoal):\n 1. (\\<And>xs. seq = vs @ xs \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using prefixE"], ["proof (prove)\nusing this:\n  mcp seq V vs\n  \\<lbrakk>prefix ?xs ?ys;\n   \\<And>zs. ?ys = ?xs @ zs \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>xs. seq = vs @ xs \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  seq = vs @ xs\n\ngoal (1 subgoal):\n 1. seq \\<in> RM M2 M1 \\<Omega> V m (Suc (|M2| * m))", "then"], ["proof (chain)\npicking this:\n  seq = vs @ xs", "have \"Suc (length xs) = ?i\""], ["proof (prove)\nusing this:\n  seq = vs @ xs\n\ngoal (1 subgoal):\n 1. Suc (length xs) = Suc (|M2| * m)", "using C_index"], ["proof (prove)\nusing this:\n  seq = vs @ xs\n  \\<lbrakk>?vs @ ?xs \\<in> C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i;\n   mcp (?vs @ ?xs) ?V ?vs\\<rbrakk>\n  \\<Longrightarrow> Suc (length ?xs) = ?i\n\ngoal (1 subgoal):\n 1. Suc (length xs) = Suc (|M2| * m)", "using \\<open>mcp seq V vs\\<close> \\<open>seq \\<in> C M2 M1 \\<Omega> V m (Suc ( |M2| * m))\\<close>"], ["proof (prove)\nusing this:\n  seq = vs @ xs\n  \\<lbrakk>?vs @ ?xs \\<in> C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i;\n   mcp (?vs @ ?xs) ?V ?vs\\<rbrakk>\n  \\<Longrightarrow> Suc (length ?xs) = ?i\n  mcp seq V vs\n  seq \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m))\n\ngoal (1 subgoal):\n 1. Suc (length xs) = Suc (|M2| * m)", "by blast"], ["proof (state)\nthis:\n  Suc (length xs) = Suc (|M2| * m)\n\ngoal (1 subgoal):\n 1. seq \\<in> RM M2 M1 \\<Omega> V m (Suc (|M2| * m))", "then"], ["proof (chain)\npicking this:\n  Suc (length xs) = Suc (|M2| * m)", "have \"length xs = ( |M2| * m)\""], ["proof (prove)\nusing this:\n  Suc (length xs) = Suc (|M2| * m)\n\ngoal (1 subgoal):\n 1. length xs = |M2| * m", "by auto"], ["proof (state)\nthis:\n  length xs = |M2| * m\n\ngoal (1 subgoal):\n 1. seq \\<in> RM M2 M1 \\<Omega> V m (Suc (|M2| * m))", "have RM_def : \"?RM ?i =  {xs' \\<in> C M2 M1 \\<Omega> V m ?i .\n                          (\\<not> (L\\<^sub>i\\<^sub>n M1 {xs'} \\<subseteq> L\\<^sub>i\\<^sub>n M2 {xs'}))\n                          \\<or> (\\<forall> io \\<in> L\\<^sub>i\\<^sub>n M1 {xs'} .\n                              (\\<exists> V'' \\<in> N io M1 V .  \n                                (\\<exists> S1 . \n                                  (\\<exists> vs xs .\n                                    io = (vs@xs)\n                                    \\<and> mcp (vs@xs) V'' vs\n                                    \\<and> S1 \\<subseteq> nodes M2\n                                    \\<and> (\\<forall> s1 \\<in> S1 . \\<forall> s2 \\<in> S1 .\n                                      s1 \\<noteq> s2 \\<longrightarrow> \n                                        (\\<forall> io1 \\<in> RP M2 s1 vs xs V'' .\n                                           \\<forall> io2 \\<in> RP M2 s2 vs xs V'' .\n                                             B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega> ))\n            \\<and> m < LB M2 M1 vs xs (?TS (( |M2| * m)) \\<union> V) S1 \\<Omega> V'' ))))}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. RM M2 M1 \\<Omega> V m (Suc (|M2| * m)) =\n    {xs' \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m)).\n     \\<not> M1 \\<preceq>\\<lbrakk>{xs'}\\<rbrakk> M2 \\<or>\n     (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {xs'}.\n         \\<exists>V''\\<in>N io M1 V.\n            \\<exists>S1 vs xs.\n               io = vs @ xs \\<and>\n               mcp (vs @ xs) V'' vs \\<and>\n               S1 \\<subseteq> nodes M2 \\<and>\n               (\\<forall>s1\\<in>S1.\n                   \\<forall>s2\\<in>S1.\n                      s1 \\<noteq> s2 \\<longrightarrow>\n                      (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                          \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                             B M1 io1 \\<Omega> \\<noteq>\n                             B M1 io2 \\<Omega>)) \\<and>\n               m < LB M2 M1 vs xs\n                    (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1\n                    \\<Omega> V'')}", "using RM.simps(2)[of M2 M1 \\<Omega> V m \"((card (nodes M2))*m)\"]"], ["proof (prove)\nusing this:\n  RM M2 M1 \\<Omega> V m (Suc (|M2| * m)) =\n  {xs' \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m)).\n   \\<not> M1 \\<preceq>\\<lbrakk>{xs'}\\<rbrakk> M2 \\<or>\n   (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {xs'}.\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V'')}\n\ngoal (1 subgoal):\n 1. RM M2 M1 \\<Omega> V m (Suc (|M2| * m)) =\n    {xs' \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m)).\n     \\<not> M1 \\<preceq>\\<lbrakk>{xs'}\\<rbrakk> M2 \\<or>\n     (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {xs'}.\n         \\<exists>V''\\<in>N io M1 V.\n            \\<exists>S1 vs xs.\n               io = vs @ xs \\<and>\n               mcp (vs @ xs) V'' vs \\<and>\n               S1 \\<subseteq> nodes M2 \\<and>\n               (\\<forall>s1\\<in>S1.\n                   \\<forall>s2\\<in>S1.\n                      s1 \\<noteq> s2 \\<longrightarrow>\n                      (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                          \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                             B M1 io1 \\<Omega> \\<noteq>\n                             B M1 io2 \\<Omega>)) \\<and>\n               m < LB M2 M1 vs xs\n                    (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1\n                    \\<Omega> V'')}", "by assumption"], ["proof (state)\nthis:\n  RM M2 M1 \\<Omega> V m (Suc (|M2| * m)) =\n  {xs' \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m)).\n   \\<not> M1 \\<preceq>\\<lbrakk>{xs'}\\<rbrakk> M2 \\<or>\n   (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {xs'}.\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V'')}\n\ngoal (1 subgoal):\n 1. seq \\<in> RM M2 M1 \\<Omega> V m (Suc (|M2| * m))", "have \"(\\<not> (L\\<^sub>i\\<^sub>n M1 {seq} \\<subseteq> L\\<^sub>i\\<^sub>n M2 {seq}))\n          \\<or> (\\<forall> io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} .\n              (\\<exists> V'' \\<in> N io M1 V .  \n                (\\<exists> S1 . \n                  (\\<exists> vs xs .\n                    io = (vs@xs)\n                    \\<and> mcp (vs@xs) V'' vs\n                    \\<and> S1 \\<subseteq> nodes M2\n                    \\<and> (\\<forall> s1 \\<in> S1 . \\<forall> s2 \\<in> S1 .\n                      s1 \\<noteq> s2 \\<longrightarrow> \n                        (\\<forall> io1 \\<in> RP M2 s1 vs xs V'' .\n                           \\<forall> io2 \\<in> RP M2 s2 vs xs V'' .\n                             B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega> ))\n                    \\<and> m < LB M2 M1 vs xs (?TS (( |M2| * m)) \\<union> V) S1 \\<Omega> V'' ))))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<or>\n    (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}.\n        \\<exists>V''\\<in>N io M1 V.\n           \\<exists>S1 vs xs.\n              io = vs @ xs \\<and>\n              mcp (vs @ xs) V'' vs \\<and>\n              S1 \\<subseteq> nodes M2 \\<and>\n              (\\<forall>s1\\<in>S1.\n                  \\<forall>s2\\<in>S1.\n                     s1 \\<noteq> s2 \\<longrightarrow>\n                     (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                         \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                            B M1 io1 \\<Omega> \\<noteq>\n                            B M1 io2 \\<Omega>)) \\<and>\n              m < LB M2 M1 vs xs\n                   (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                   V'')", "proof (cases \"(\\<not> (L\\<^sub>i\\<^sub>n M1 {seq} \\<subseteq> L\\<^sub>i\\<^sub>n M2 {seq}))\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<Longrightarrow>\n    \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<or>\n    (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}.\n        \\<exists>V''\\<in>N io M1 V.\n           \\<exists>S1 vs xs.\n              io = vs @ xs \\<and>\n              mcp (vs @ xs) V'' vs \\<and>\n              S1 \\<subseteq> nodes M2 \\<and>\n              (\\<forall>s1\\<in>S1.\n                  \\<forall>s2\\<in>S1.\n                     s1 \\<noteq> s2 \\<longrightarrow>\n                     (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                         \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                            B M1 io1 \\<Omega> \\<noteq>\n                            B M1 io2 \\<Omega>)) \\<and>\n              m < LB M2 M1 vs xs\n                   (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                   V'')\n 2. \\<not> \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<Longrightarrow>\n    \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<or>\n    (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}.\n        \\<exists>V''\\<in>N io M1 V.\n           \\<exists>S1 vs xs.\n              io = vs @ xs \\<and>\n              mcp (vs @ xs) V'' vs \\<and>\n              S1 \\<subseteq> nodes M2 \\<and>\n              (\\<forall>s1\\<in>S1.\n                  \\<forall>s2\\<in>S1.\n                     s1 \\<noteq> s2 \\<longrightarrow>\n                     (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                         \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                            B M1 io1 \\<Omega> \\<noteq>\n                            B M1 io2 \\<Omega>)) \\<and>\n              m < LB M2 M1 vs xs\n                   (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                   V'')", "case True"], ["proof (state)\nthis:\n  \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2\n\ngoal (2 subgoals):\n 1. \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<Longrightarrow>\n    \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<or>\n    (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}.\n        \\<exists>V''\\<in>N io M1 V.\n           \\<exists>S1 vs xs.\n              io = vs @ xs \\<and>\n              mcp (vs @ xs) V'' vs \\<and>\n              S1 \\<subseteq> nodes M2 \\<and>\n              (\\<forall>s1\\<in>S1.\n                  \\<forall>s2\\<in>S1.\n                     s1 \\<noteq> s2 \\<longrightarrow>\n                     (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                         \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                            B M1 io1 \\<Omega> \\<noteq>\n                            B M1 io2 \\<Omega>)) \\<and>\n              m < LB M2 M1 vs xs\n                   (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                   V'')\n 2. \\<not> \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<Longrightarrow>\n    \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<or>\n    (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}.\n        \\<exists>V''\\<in>N io M1 V.\n           \\<exists>S1 vs xs.\n              io = vs @ xs \\<and>\n              mcp (vs @ xs) V'' vs \\<and>\n              S1 \\<subseteq> nodes M2 \\<and>\n              (\\<forall>s1\\<in>S1.\n                  \\<forall>s2\\<in>S1.\n                     s1 \\<noteq> s2 \\<longrightarrow>\n                     (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                         \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                            B M1 io1 \\<Omega> \\<noteq>\n                            B M1 io2 \\<Omega>)) \\<and>\n              m < LB M2 M1 vs xs\n                   (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                   V'')", "then"], ["proof (chain)\npicking this:\n  \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2\n\ngoal (1 subgoal):\n 1. \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<or>\n    (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}.\n        \\<exists>V''\\<in>N io M1 V.\n           \\<exists>S1 vs xs.\n              io = vs @ xs \\<and>\n              mcp (vs @ xs) V'' vs \\<and>\n              S1 \\<subseteq> nodes M2 \\<and>\n              (\\<forall>s1\\<in>S1.\n                  \\<forall>s2\\<in>S1.\n                     s1 \\<noteq> s2 \\<longrightarrow>\n                     (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                         \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                            B M1 io1 \\<Omega> \\<noteq>\n                            B M1 io2 \\<Omega>)) \\<and>\n              m < LB M2 M1 vs xs\n                   (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                   V'')", "using RM_def"], ["proof (prove)\nusing this:\n  \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2\n  RM M2 M1 \\<Omega> V m (Suc (|M2| * m)) =\n  {xs' \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m)).\n   \\<not> M1 \\<preceq>\\<lbrakk>{xs'}\\<rbrakk> M2 \\<or>\n   (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {xs'}.\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V'')}\n\ngoal (1 subgoal):\n 1. \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<or>\n    (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}.\n        \\<exists>V''\\<in>N io M1 V.\n           \\<exists>S1 vs xs.\n              io = vs @ xs \\<and>\n              mcp (vs @ xs) V'' vs \\<and>\n              S1 \\<subseteq> nodes M2 \\<and>\n              (\\<forall>s1\\<in>S1.\n                  \\<forall>s2\\<in>S1.\n                     s1 \\<noteq> s2 \\<longrightarrow>\n                     (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                         \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                            B M1 io1 \\<Omega> \\<noteq>\n                            B M1 io2 \\<Omega>)) \\<and>\n              m < LB M2 M1 vs xs\n                   (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                   V'')", "by blast"], ["proof (state)\nthis:\n  \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<or>\n  (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}.\n      \\<exists>V''\\<in>N io M1 V.\n         \\<exists>S1 vs xs.\n            io = vs @ xs \\<and>\n            mcp (vs @ xs) V'' vs \\<and>\n            S1 \\<subseteq> nodes M2 \\<and>\n            (\\<forall>s1\\<in>S1.\n                \\<forall>s2\\<in>S1.\n                   s1 \\<noteq> s2 \\<longrightarrow>\n                   (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                       \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                          B M1 io1 \\<Omega> \\<noteq>\n                          B M1 io2 \\<Omega>)) \\<and>\n            m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V)\n                 S1 \\<Omega> V'')\n\ngoal (1 subgoal):\n 1. \\<not> \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<Longrightarrow>\n    \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<or>\n    (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}.\n        \\<exists>V''\\<in>N io M1 V.\n           \\<exists>S1 vs xs.\n              io = vs @ xs \\<and>\n              mcp (vs @ xs) V'' vs \\<and>\n              S1 \\<subseteq> nodes M2 \\<and>\n              (\\<forall>s1\\<in>S1.\n                  \\<forall>s2\\<in>S1.\n                     s1 \\<noteq> s2 \\<longrightarrow>\n                     (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                         \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                            B M1 io1 \\<Omega> \\<noteq>\n                            B M1 io2 \\<Omega>)) \\<and>\n              m < LB M2 M1 vs xs\n                   (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                   V'')", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<Longrightarrow>\n    \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<or>\n    (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}.\n        \\<exists>V''\\<in>N io M1 V.\n           \\<exists>S1 vs xs.\n              io = vs @ xs \\<and>\n              mcp (vs @ xs) V'' vs \\<and>\n              S1 \\<subseteq> nodes M2 \\<and>\n              (\\<forall>s1\\<in>S1.\n                  \\<forall>s2\\<in>S1.\n                     s1 \\<noteq> s2 \\<longrightarrow>\n                     (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                         \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                            B M1 io1 \\<Omega> \\<noteq>\n                            B M1 io2 \\<Omega>)) \\<and>\n              m < LB M2 M1 vs xs\n                   (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                   V'')", "case False"], ["proof (state)\nthis:\n  \\<not> \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2\n\ngoal (1 subgoal):\n 1. \\<not> \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<Longrightarrow>\n    \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<or>\n    (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}.\n        \\<exists>V''\\<in>N io M1 V.\n           \\<exists>S1 vs xs.\n              io = vs @ xs \\<and>\n              mcp (vs @ xs) V'' vs \\<and>\n              S1 \\<subseteq> nodes M2 \\<and>\n              (\\<forall>s1\\<in>S1.\n                  \\<forall>s2\\<in>S1.\n                     s1 \\<noteq> s2 \\<longrightarrow>\n                     (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                         \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                            B M1 io1 \\<Omega> \\<noteq>\n                            B M1 io2 \\<Omega>)) \\<and>\n              m < LB M2 M1 vs xs\n                   (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                   V'')", "have \"(\\<forall> io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} .\n              (\\<exists> V'' \\<in> N io M1 V .  \n                (\\<exists> S1 . \n                  (\\<exists> vs xs .\n                    io = (vs@xs)\n                    \\<and> mcp (vs@xs) V'' vs\n                    \\<and> S1 \\<subseteq> nodes M2\n                    \\<and> (\\<forall> s1 \\<in> S1 . \\<forall> s2 \\<in> S1 .\n                      s1 \\<noteq> s2 \\<longrightarrow> \n                        (\\<forall> io1 \\<in> RP M2 s1 vs xs V'' .\n                           \\<forall> io2 \\<in> RP M2 s2 vs xs V'' .\n                             B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega> ))\n                    \\<and> m < LB M2 M1 vs xs (?TS (( |M2| * m)) \\<union> V) S1 \\<Omega> V'' ))))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}.\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "fix io"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "assume \"io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}\""], ["proof (state)\nthis:\n  io \\<in> L\\<^sub>i\\<^sub>n M1 {seq}\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "then"], ["proof (chain)\npicking this:\n  io \\<in> L\\<^sub>i\\<^sub>n M1 {seq}", "have \"io \\<in> L M1\""], ["proof (prove)\nusing this:\n  io \\<in> L\\<^sub>i\\<^sub>n M1 {seq}\n\ngoal (1 subgoal):\n 1. io \\<in> L M1", "by auto"], ["proof (state)\nthis:\n  io \\<in> L M1\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "moreover"], ["proof (state)\nthis:\n  io \\<in> L M1\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "have \"is_det_state_cover M2 V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_det_state_cover M2 V", "using assms(4)"], ["proof (prove)\nusing this:\n  test_tools M2 M1 FAIL PM V \\<Omega>\n\ngoal (1 subgoal):\n 1. is_det_state_cover M2 V", "by auto"], ["proof (state)\nthis:\n  is_det_state_cover M2 V\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "ultimately"], ["proof (chain)\npicking this:\n  io \\<in> L M1\n  is_det_state_cover M2 V", "obtain V'' where \"V'' \\<in> N io M1 V\""], ["proof (prove)\nusing this:\n  io \\<in> L M1\n  is_det_state_cover M2 V\n\ngoal (1 subgoal):\n 1. (\\<And>V''.\n        V'' \\<in> N io M1 V \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using N_nonempty[OF _ assms(1-3), of V io]"], ["proof (prove)\nusing this:\n  io \\<in> L M1\n  is_det_state_cover M2 V\n  \\<lbrakk>is_det_state_cover M2 V; io \\<in> L M1\\<rbrakk>\n  \\<Longrightarrow> N io M1 V \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>V''.\n        V'' \\<in> N io M1 V \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  V'' \\<in> N io M1 V\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "have \"io \\<in> L M2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. io \\<in> L M2", "using \\<open>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}\\<close> False"], ["proof (prove)\nusing this:\n  io \\<in> L\\<^sub>i\\<^sub>n M1 {seq}\n  \\<not> \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2\n\ngoal (1 subgoal):\n 1. io \\<in> L M2", "by auto"], ["proof (state)\nthis:\n  io \\<in> L M2\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "have \"V'' \\<in> Perm V M1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. V'' \\<in> Perm V M1", "using \\<open>V'' \\<in> N io M1 V\\<close>"], ["proof (prove)\nusing this:\n  V'' \\<in> N io M1 V\n\ngoal (1 subgoal):\n 1. V'' \\<in> Perm V M1", "by auto"], ["proof (state)\nthis:\n  V'' \\<in> Perm V M1\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "have \"[] \\<in> V''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [] \\<in> V''", "using \\<open>V'' \\<in> Perm V M1\\<close> assms(4) perm_empty"], ["proof (prove)\nusing this:\n  V'' \\<in> Perm V M1\n  test_tools M2 M1 FAIL PM V \\<Omega>\n  \\<lbrakk>is_det_state_cover ?M2.0 ?V; ?V'' \\<in> Perm ?V ?M1.0\\<rbrakk>\n  \\<Longrightarrow> [] \\<in> ?V''\n\ngoal (1 subgoal):\n 1. [] \\<in> V''", "by blast"], ["proof (state)\nthis:\n  [] \\<in> V''\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "have \"finite V''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite V''", "using \\<open>V'' \\<in> Perm V M1\\<close> assms(2) assms(4) perm_elem_finite"], ["proof (prove)\nusing this:\n  V'' \\<in> Perm V M1\n  OFSM M2\n  test_tools M2 M1 FAIL PM V \\<Omega>\n  \\<lbrakk>is_det_state_cover ?M2.0 ?V; well_formed ?M2.0;\n   ?V'' \\<in> Perm ?V ?M1.0\\<rbrakk>\n  \\<Longrightarrow> finite ?V''\n\ngoal (1 subgoal):\n 1. finite V''", "by blast"], ["proof (state)\nthis:\n  finite V''\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "obtain vs where \"mcp io V'' vs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>vs. mcp io V'' vs \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using mcp_ex[OF \\<open>[] \\<in> V''\\<close> \\<open>finite V''\\<close>]"], ["proof (prove)\nusing this:\n  (\\<And>p. mcp ?z V'' p \\<Longrightarrow> ?thesis) \\<Longrightarrow>\n  ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>vs. mcp io V'' vs \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  mcp io V'' vs\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "obtain xs where \"io = (vs@xs)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>xs. io = vs @ xs \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>mcp io V'' vs\\<close> prefixE"], ["proof (prove)\nusing this:\n  mcp io V'' vs\n  \\<lbrakk>prefix ?xs ?ys;\n   \\<And>zs. ?ys = ?xs @ zs \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>xs. io = vs @ xs \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  io = vs @ xs\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "then"], ["proof (chain)\npicking this:\n  io = vs @ xs", "have \"vs@xs \\<in> L M1\" \"vs@xs \\<in> L M2\""], ["proof (prove)\nusing this:\n  io = vs @ xs\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> L M1 &&& vs @ xs \\<in> L M2", "using \\<open>io \\<in> L M1\\<close> \\<open>io \\<in> L M2\\<close>"], ["proof (prove)\nusing this:\n  io = vs @ xs\n  io \\<in> L M1\n  io \\<in> L M2\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> L M1 &&& vs @ xs \\<in> L M2", "by auto"], ["proof (state)\nthis:\n  vs @ xs \\<in> L M1\n  vs @ xs \\<in> L M2\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "have \"io \\<in> L M1\" \"map fst io \\<in> {seq}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. io \\<in> L M1 &&& map fst io \\<in> {seq}", "using \\<open>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}\\<close>"], ["proof (prove)\nusing this:\n  io \\<in> L\\<^sub>i\\<^sub>n M1 {seq}\n\ngoal (1 subgoal):\n 1. io \\<in> L M1 &&& map fst io \\<in> {seq}", "by auto"], ["proof (state)\nthis:\n  io \\<in> L M1\n  map fst io \\<in> {seq}\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "then"], ["proof (chain)\npicking this:\n  io \\<in> L M1\n  map fst io \\<in> {seq}", "have \"map fst io = seq\""], ["proof (prove)\nusing this:\n  io \\<in> L M1\n  map fst io \\<in> {seq}\n\ngoal (1 subgoal):\n 1. map fst io = seq", "by auto"], ["proof (state)\nthis:\n  map fst io = seq\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "then"], ["proof (chain)\npicking this:\n  map fst io = seq", "have \"map fst io \\<in> ?C ?i\""], ["proof (prove)\nusing this:\n  map fst io = seq\n\ngoal (1 subgoal):\n 1. map fst io \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m))", "using \\<open>seq \\<in> ?C ?i\\<close>"], ["proof (prove)\nusing this:\n  map fst io = seq\n  seq \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m))\n\ngoal (1 subgoal):\n 1. map fst io \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m))", "by blast"], ["proof (state)\nthis:\n  map fst io \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m))\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "then"], ["proof (chain)\npicking this:\n  map fst io \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m))", "have \"(map fst vs) @ (map fst xs) \\<in> ?C ?i\""], ["proof (prove)\nusing this:\n  map fst io \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m))\n\ngoal (1 subgoal):\n 1. map fst vs @ map fst xs \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m))", "using \\<open>io = (vs@xs)\\<close>"], ["proof (prove)\nusing this:\n  map fst io \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m))\n  io = vs @ xs\n\ngoal (1 subgoal):\n 1. map fst vs @ map fst xs \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m))", "by (metis map_append)"], ["proof (state)\nthis:\n  map fst vs @ map fst xs \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m))\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "have \"mcp' io V'' = vs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mcp' io V'' = vs", "using \\<open>mcp io V'' vs\\<close> mcp'_intro"], ["proof (prove)\nusing this:\n  mcp io V'' vs\n  mcp ?z ?W ?p \\<Longrightarrow> mcp' ?z ?W = ?p\n\ngoal (1 subgoal):\n 1. mcp' io V'' = vs", "by blast"], ["proof (state)\nthis:\n  mcp' io V'' = vs\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "have \"mcp' (map fst io) V = (map fst vs)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mcp' (map fst io) V = map fst vs", "using \\<open>V'' \\<in> N io M1 V\\<close> \\<open>mcp' io V'' = vs\\<close>"], ["proof (prove)\nusing this:\n  V'' \\<in> N io M1 V\n  mcp' io V'' = vs\n\ngoal (1 subgoal):\n 1. mcp' (map fst io) V = map fst vs", "by auto"], ["proof (state)\nthis:\n  mcp' (map fst io) V = map fst vs\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "then"], ["proof (chain)\npicking this:\n  mcp' (map fst io) V = map fst vs", "have \"mcp (map fst io) V (map fst vs)\""], ["proof (prove)\nusing this:\n  mcp' (map fst io) V = map fst vs\n\ngoal (1 subgoal):\n 1. mcp (map fst io) V (map fst vs)", "by (metis \\<open>\\<And>thesis. (\\<And>vs. mcp seq V vs \\<Longrightarrow> thesis) \\<Longrightarrow> thesis\\<close> \n                \\<open>map fst io = seq\\<close> mcp'_intro)"], ["proof (state)\nthis:\n  mcp (map fst io) V (map fst vs)\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "then"], ["proof (chain)\npicking this:\n  mcp (map fst io) V (map fst vs)", "have \"mcp (map fst vs @ map fst xs) V (map fst vs)\""], ["proof (prove)\nusing this:\n  mcp (map fst io) V (map fst vs)\n\ngoal (1 subgoal):\n 1. mcp (map fst vs @ map fst xs) V (map fst vs)", "by (simp add: \\<open>io = vs @ xs\\<close>)"], ["proof (state)\nthis:\n  mcp (map fst vs @ map fst xs) V (map fst vs)\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "then"], ["proof (chain)\npicking this:\n  mcp (map fst vs @ map fst xs) V (map fst vs)", "have \"Suc (length xs) = ?i\""], ["proof (prove)\nusing this:\n  mcp (map fst vs @ map fst xs) V (map fst vs)\n\ngoal (1 subgoal):\n 1. Suc (length xs) = Suc (|M2| * m)", "using C_index[OF \\<open>(map fst vs) @ (map fst xs) \\<in> ?C ?i\\<close>]"], ["proof (prove)\nusing this:\n  mcp (map fst vs @ map fst xs) V (map fst vs)\n  mcp (map fst vs @ map fst xs) V (map fst vs) \\<Longrightarrow>\n  Suc (length (map fst xs)) = Suc (|M2| * m)\n\ngoal (1 subgoal):\n 1. Suc (length xs) = Suc (|M2| * m)", "by simp"], ["proof (state)\nthis:\n  Suc (length xs) = Suc (|M2| * m)\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "then"], ["proof (chain)\npicking this:\n  Suc (length xs) = Suc (|M2| * m)", "have \"( |M2| * m) \\<le> length xs\""], ["proof (prove)\nusing this:\n  Suc (length xs) = Suc (|M2| * m)\n\ngoal (1 subgoal):\n 1. |M2| * m \\<le> length xs", "by simp"], ["proof (state)\nthis:\n  |M2| * m \\<le> length xs\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "have \"|M1| \\<le> m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. |M1| \\<le> m", "using assms(3)"], ["proof (prove)\nusing this:\n  asc_fault_domain M2 M1 m\n\ngoal (1 subgoal):\n 1. |M1| \\<le> m", "by auto"], ["proof (state)\nthis:\n  |M1| \\<le> m\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "have \"vs @ xs \\<in> L M2 \\<inter> L M1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xs \\<in> L M2 \\<inter> L M1", "using \\<open>vs @ xs \\<in> L M1\\<close> \\<open>vs @ xs \\<in> L M2\\<close>"], ["proof (prove)\nusing this:\n  vs @ xs \\<in> L M1\n  vs @ xs \\<in> L M2\n\ngoal (1 subgoal):\n 1. vs @ xs \\<in> L M2 \\<inter> L M1", "by blast"], ["proof (state)\nthis:\n  vs @ xs \\<in> L M2 \\<inter> L M1\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "obtain q where \"q \\<in> nodes M2\" \"m < card (RP M2 q vs xs V'')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>q.\n        \\<lbrakk>q \\<in> nodes M2; m < card (RP M2 q vs xs V'')\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using RP_state_repetition_distribution_productF\n                  [OF assms(2,1) \\<open>( |M2| * m) \\<le> length xs\\<close> \\<open>|M1| \\<le> m\\<close> \\<open>vs @ xs \\<in> L M2 \\<inter> L M1\\<close> \n                      \\<open>is_det_state_cover M2 V\\<close> \\<open>V'' \\<in> Perm V M1\\<close>]"], ["proof (prove)\nusing this:\n  \\<exists>q\\<in>nodes M2. m < card (RP M2 q vs xs V'')\n\ngoal (1 subgoal):\n 1. (\\<And>q.\n        \\<lbrakk>q \\<in> nodes M2; m < card (RP M2 q vs xs V'')\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  q \\<in> nodes M2\n  m < card (RP M2 q vs xs V'')\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "have \"m < LB M2 M1 vs xs (?TS (( |M2| * m)) \\<union> V) {q} \\<Omega> V''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) {q}\n         \\<Omega> V''", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) {q}\n         \\<Omega> V''", "have \"m < (sum (\\<lambda> s . card (RP M2 s vs xs V'')) {q})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. m < (\\<Sum>s\\<in>{q}. card (RP M2 s vs xs V''))", "using \\<open>m < card (RP M2 q vs xs V'')\\<close>"], ["proof (prove)\nusing this:\n  m < card (RP M2 q vs xs V'')\n\ngoal (1 subgoal):\n 1. m < (\\<Sum>s\\<in>{q}. card (RP M2 s vs xs V''))", "by auto"], ["proof (state)\nthis:\n  m < (\\<Sum>s\\<in>{q}. card (RP M2 s vs xs V''))\n\ngoal (1 subgoal):\n 1. m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) {q}\n         \\<Omega> V''", "moreover"], ["proof (state)\nthis:\n  m < (\\<Sum>s\\<in>{q}. card (RP M2 s vs xs V''))\n\ngoal (1 subgoal):\n 1. m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) {q}\n         \\<Omega> V''", "have \"(sum (\\<lambda> s . card (RP M2 s vs xs V'')) {q}) \n                              \\<le> LB M2 M1 vs xs (?TS (( |M2| * m)) \\<union> V) {q} \\<Omega> V''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>s\\<in>{q}. card (RP M2 s vs xs V''))\n    \\<le> LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) {q}\n           \\<Omega> V''", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>s\\<in>{q}. card (RP M2 s vs xs V''))\n  \\<le> LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) {q}\n         \\<Omega> V''\n\ngoal (1 subgoal):\n 1. m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) {q}\n         \\<Omega> V''", "ultimately"], ["proof (chain)\npicking this:\n  m < (\\<Sum>s\\<in>{q}. card (RP M2 s vs xs V''))\n  (\\<Sum>s\\<in>{q}. card (RP M2 s vs xs V''))\n  \\<le> LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) {q}\n         \\<Omega> V''", "show ?thesis"], ["proof (prove)\nusing this:\n  m < (\\<Sum>s\\<in>{q}. card (RP M2 s vs xs V''))\n  (\\<Sum>s\\<in>{q}. card (RP M2 s vs xs V''))\n  \\<le> LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) {q}\n         \\<Omega> V''\n\ngoal (1 subgoal):\n 1. m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) {q}\n         \\<Omega> V''", "by linarith"], ["proof (state)\nthis:\n  m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) {q}\n       \\<Omega> V''\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) {q}\n       \\<Omega> V''\n\ngoal (1 subgoal):\n 1. \\<And>io.\n       io \\<in> L\\<^sub>i\\<^sub>n M1 {seq} \\<Longrightarrow>\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V''", "show \"\\<exists>V''\\<in>N io M1 V.\n                 \\<exists>S1 vs xs.\n                    io = vs @ xs \\<and>\n                    mcp (vs @ xs) V'' vs \\<and>\n                    S1 \\<subseteq> nodes M2 \\<and>\n                    (\\<forall>s1\\<in>S1.\n                        \\<forall>s2\\<in>S1.\n                           s1 \\<noteq> s2 \\<longrightarrow>\n                           (\\<forall>io1\\<in>RP M2 s1 vs xs V''. \\<forall>io2\\<in>RP M2 s2 vs xs V''. \n                                                                      B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega>)) \\<and>\n                    m < LB M2 M1 vs xs (?TS (( |M2| * m)) \\<union> V) S1 \\<Omega> V''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>V''\\<in>N io M1 V.\n       \\<exists>S1 vs xs.\n          io = vs @ xs \\<and>\n          mcp (vs @ xs) V'' vs \\<and>\n          S1 \\<subseteq> nodes M2 \\<and>\n          (\\<forall>s1\\<in>S1.\n              \\<forall>s2\\<in>S1.\n                 s1 \\<noteq> s2 \\<longrightarrow>\n                 (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                     \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                        B M1 io1 \\<Omega> \\<noteq>\n                        B M1 io2 \\<Omega>)) \\<and>\n          m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V)\n               S1 \\<Omega> V''", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>V''\\<in>N io M1 V.\n       \\<exists>S1 vs xs.\n          io = vs @ xs \\<and>\n          mcp (vs @ xs) V'' vs \\<and>\n          S1 \\<subseteq> nodes M2 \\<and>\n          (\\<forall>s1\\<in>S1.\n              \\<forall>s2\\<in>S1.\n                 s1 \\<noteq> s2 \\<longrightarrow>\n                 (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                     \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                        B M1 io1 \\<Omega> \\<noteq>\n                        B M1 io2 \\<Omega>)) \\<and>\n          m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V)\n               S1 \\<Omega> V''", "have \"io = vs@xs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. io = vs @ xs", "using \\<open>io = vs@xs\\<close>"], ["proof (prove)\nusing this:\n  io = vs @ xs\n\ngoal (1 subgoal):\n 1. io = vs @ xs", "by assumption"], ["proof (state)\nthis:\n  io = vs @ xs\n\ngoal (1 subgoal):\n 1. \\<exists>V''\\<in>N io M1 V.\n       \\<exists>S1 vs xs.\n          io = vs @ xs \\<and>\n          mcp (vs @ xs) V'' vs \\<and>\n          S1 \\<subseteq> nodes M2 \\<and>\n          (\\<forall>s1\\<in>S1.\n              \\<forall>s2\\<in>S1.\n                 s1 \\<noteq> s2 \\<longrightarrow>\n                 (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                     \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                        B M1 io1 \\<Omega> \\<noteq>\n                        B M1 io2 \\<Omega>)) \\<and>\n          m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V)\n               S1 \\<Omega> V''", "moreover"], ["proof (state)\nthis:\n  io = vs @ xs\n\ngoal (1 subgoal):\n 1. \\<exists>V''\\<in>N io M1 V.\n       \\<exists>S1 vs xs.\n          io = vs @ xs \\<and>\n          mcp (vs @ xs) V'' vs \\<and>\n          S1 \\<subseteq> nodes M2 \\<and>\n          (\\<forall>s1\\<in>S1.\n              \\<forall>s2\\<in>S1.\n                 s1 \\<noteq> s2 \\<longrightarrow>\n                 (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                     \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                        B M1 io1 \\<Omega> \\<noteq>\n                        B M1 io2 \\<Omega>)) \\<and>\n          m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V)\n               S1 \\<Omega> V''", "have \"mcp (vs@xs) V'' vs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mcp (vs @ xs) V'' vs", "using \\<open>io = vs @ xs\\<close> \\<open>mcp io V'' vs\\<close>"], ["proof (prove)\nusing this:\n  io = vs @ xs\n  mcp io V'' vs\n\ngoal (1 subgoal):\n 1. mcp (vs @ xs) V'' vs", "by presburger"], ["proof (state)\nthis:\n  mcp (vs @ xs) V'' vs\n\ngoal (1 subgoal):\n 1. \\<exists>V''\\<in>N io M1 V.\n       \\<exists>S1 vs xs.\n          io = vs @ xs \\<and>\n          mcp (vs @ xs) V'' vs \\<and>\n          S1 \\<subseteq> nodes M2 \\<and>\n          (\\<forall>s1\\<in>S1.\n              \\<forall>s2\\<in>S1.\n                 s1 \\<noteq> s2 \\<longrightarrow>\n                 (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                     \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                        B M1 io1 \\<Omega> \\<noteq>\n                        B M1 io2 \\<Omega>)) \\<and>\n          m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V)\n               S1 \\<Omega> V''", "moreover"], ["proof (state)\nthis:\n  mcp (vs @ xs) V'' vs\n\ngoal (1 subgoal):\n 1. \\<exists>V''\\<in>N io M1 V.\n       \\<exists>S1 vs xs.\n          io = vs @ xs \\<and>\n          mcp (vs @ xs) V'' vs \\<and>\n          S1 \\<subseteq> nodes M2 \\<and>\n          (\\<forall>s1\\<in>S1.\n              \\<forall>s2\\<in>S1.\n                 s1 \\<noteq> s2 \\<longrightarrow>\n                 (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                     \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                        B M1 io1 \\<Omega> \\<noteq>\n                        B M1 io2 \\<Omega>)) \\<and>\n          m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V)\n               S1 \\<Omega> V''", "have \"{q} \\<subseteq> nodes M2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {q} \\<subseteq> nodes M2", "using \\<open>q \\<in> nodes M2\\<close>"], ["proof (prove)\nusing this:\n  q \\<in> nodes M2\n\ngoal (1 subgoal):\n 1. {q} \\<subseteq> nodes M2", "by auto"], ["proof (state)\nthis:\n  {q} \\<subseteq> nodes M2\n\ngoal (1 subgoal):\n 1. \\<exists>V''\\<in>N io M1 V.\n       \\<exists>S1 vs xs.\n          io = vs @ xs \\<and>\n          mcp (vs @ xs) V'' vs \\<and>\n          S1 \\<subseteq> nodes M2 \\<and>\n          (\\<forall>s1\\<in>S1.\n              \\<forall>s2\\<in>S1.\n                 s1 \\<noteq> s2 \\<longrightarrow>\n                 (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                     \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                        B M1 io1 \\<Omega> \\<noteq>\n                        B M1 io2 \\<Omega>)) \\<and>\n          m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V)\n               S1 \\<Omega> V''", "moreover"], ["proof (state)\nthis:\n  {q} \\<subseteq> nodes M2\n\ngoal (1 subgoal):\n 1. \\<exists>V''\\<in>N io M1 V.\n       \\<exists>S1 vs xs.\n          io = vs @ xs \\<and>\n          mcp (vs @ xs) V'' vs \\<and>\n          S1 \\<subseteq> nodes M2 \\<and>\n          (\\<forall>s1\\<in>S1.\n              \\<forall>s2\\<in>S1.\n                 s1 \\<noteq> s2 \\<longrightarrow>\n                 (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                     \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                        B M1 io1 \\<Omega> \\<noteq>\n                        B M1 io2 \\<Omega>)) \\<and>\n          m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V)\n               S1 \\<Omega> V''", "have \"(\\<forall> s1 \\<in> {q} . \\<forall> s2 \\<in> {q} .\n                        s1 \\<noteq> s2 \\<longrightarrow> \n                          (\\<forall> io1 \\<in> RP M2 s1 vs xs V'' .\n                             \\<forall> io2 \\<in> RP M2 s2 vs xs V'' .\n                               B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega> ))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>s1\\<in>{q}.\n       \\<forall>s2\\<in>{q}.\n          s1 \\<noteq> s2 \\<longrightarrow>\n          (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n              \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                 B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega>)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>s1\\<in>{q}.\n       \\<forall>s2\\<in>{q}.\n          s1 \\<noteq> s2 \\<longrightarrow>\n          (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n              \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                 B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega>)", "have \"\\<forall> s1 \\<in> {q} . \\<forall> s2 \\<in> {q} . s1 = s2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>s1\\<in>{q}. \\<forall>s2\\<in>{q}. s1 = s2", "by blast"], ["proof (state)\nthis:\n  \\<forall>s1\\<in>{q}. \\<forall>s2\\<in>{q}. s1 = s2\n\ngoal (1 subgoal):\n 1. \\<forall>s1\\<in>{q}.\n       \\<forall>s2\\<in>{q}.\n          s1 \\<noteq> s2 \\<longrightarrow>\n          (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n              \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                 B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega>)", "then"], ["proof (chain)\npicking this:\n  \\<forall>s1\\<in>{q}. \\<forall>s2\\<in>{q}. s1 = s2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>s1\\<in>{q}. \\<forall>s2\\<in>{q}. s1 = s2\n\ngoal (1 subgoal):\n 1. \\<forall>s1\\<in>{q}.\n       \\<forall>s2\\<in>{q}.\n          s1 \\<noteq> s2 \\<longrightarrow>\n          (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n              \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                 B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega>)", "by blast"], ["proof (state)\nthis:\n  \\<forall>s1\\<in>{q}.\n     \\<forall>s2\\<in>{q}.\n        s1 \\<noteq> s2 \\<longrightarrow>\n        (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n            \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n               B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>s1\\<in>{q}.\n     \\<forall>s2\\<in>{q}.\n        s1 \\<noteq> s2 \\<longrightarrow>\n        (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n            \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n               B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega>)\n\ngoal (1 subgoal):\n 1. \\<exists>V''\\<in>N io M1 V.\n       \\<exists>S1 vs xs.\n          io = vs @ xs \\<and>\n          mcp (vs @ xs) V'' vs \\<and>\n          S1 \\<subseteq> nodes M2 \\<and>\n          (\\<forall>s1\\<in>S1.\n              \\<forall>s2\\<in>S1.\n                 s1 \\<noteq> s2 \\<longrightarrow>\n                 (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                     \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                        B M1 io1 \\<Omega> \\<noteq>\n                        B M1 io2 \\<Omega>)) \\<and>\n          m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V)\n               S1 \\<Omega> V''", "ultimately"], ["proof (chain)\npicking this:\n  io = vs @ xs\n  mcp (vs @ xs) V'' vs\n  {q} \\<subseteq> nodes M2\n  \\<forall>s1\\<in>{q}.\n     \\<forall>s2\\<in>{q}.\n        s1 \\<noteq> s2 \\<longrightarrow>\n        (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n            \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n               B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega>)", "have RM_body : \"io = (vs@xs)\n                      \\<and> mcp (vs@xs) V'' vs\n                      \\<and> {q} \\<subseteq> nodes M2\n                      \\<and> (\\<forall> s1 \\<in> {q} . \\<forall> s2 \\<in> {q} .\n                        s1 \\<noteq> s2 \\<longrightarrow> \n                          (\\<forall> io1 \\<in> RP M2 s1 vs xs V'' .\n                             \\<forall> io2 \\<in> RP M2 s2 vs xs V'' .\n                               B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega> ))\n                      \\<and> m < LB M2 M1 vs xs (?TS (( |M2| * m)) \\<union> V) {q} \\<Omega> V'' \""], ["proof (prove)\nusing this:\n  io = vs @ xs\n  mcp (vs @ xs) V'' vs\n  {q} \\<subseteq> nodes M2\n  \\<forall>s1\\<in>{q}.\n     \\<forall>s2\\<in>{q}.\n        s1 \\<noteq> s2 \\<longrightarrow>\n        (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n            \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n               B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega>)\n\ngoal (1 subgoal):\n 1. io = vs @ xs \\<and>\n    mcp (vs @ xs) V'' vs \\<and>\n    {q} \\<subseteq> nodes M2 \\<and>\n    (\\<forall>s1\\<in>{q}.\n        \\<forall>s2\\<in>{q}.\n           s1 \\<noteq> s2 \\<longrightarrow>\n           (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n               \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                  B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega>)) \\<and>\n    m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) {q}\n         \\<Omega> V''", "using \\<open>m < LB M2 M1 vs xs (?TS (( |M2| * m)) \\<union> V) {q} \\<Omega> V''\\<close>"], ["proof (prove)\nusing this:\n  io = vs @ xs\n  mcp (vs @ xs) V'' vs\n  {q} \\<subseteq> nodes M2\n  \\<forall>s1\\<in>{q}.\n     \\<forall>s2\\<in>{q}.\n        s1 \\<noteq> s2 \\<longrightarrow>\n        (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n            \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n               B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega>)\n  m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) {q}\n       \\<Omega> V''\n\ngoal (1 subgoal):\n 1. io = vs @ xs \\<and>\n    mcp (vs @ xs) V'' vs \\<and>\n    {q} \\<subseteq> nodes M2 \\<and>\n    (\\<forall>s1\\<in>{q}.\n        \\<forall>s2\\<in>{q}.\n           s1 \\<noteq> s2 \\<longrightarrow>\n           (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n               \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                  B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega>)) \\<and>\n    m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) {q}\n         \\<Omega> V''", "by linarith"], ["proof (state)\nthis:\n  io = vs @ xs \\<and>\n  mcp (vs @ xs) V'' vs \\<and>\n  {q} \\<subseteq> nodes M2 \\<and>\n  (\\<forall>s1\\<in>{q}.\n      \\<forall>s2\\<in>{q}.\n         s1 \\<noteq> s2 \\<longrightarrow>\n         (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n             \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega>)) \\<and>\n  m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) {q}\n       \\<Omega> V''\n\ngoal (1 subgoal):\n 1. \\<exists>V''\\<in>N io M1 V.\n       \\<exists>S1 vs xs.\n          io = vs @ xs \\<and>\n          mcp (vs @ xs) V'' vs \\<and>\n          S1 \\<subseteq> nodes M2 \\<and>\n          (\\<forall>s1\\<in>S1.\n              \\<forall>s2\\<in>S1.\n                 s1 \\<noteq> s2 \\<longrightarrow>\n                 (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                     \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                        B M1 io1 \\<Omega> \\<noteq>\n                        B M1 io2 \\<Omega>)) \\<and>\n          m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V)\n               S1 \\<Omega> V''", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>V''\\<in>N io M1 V.\n       \\<exists>S1 vs xs.\n          io = vs @ xs \\<and>\n          mcp (vs @ xs) V'' vs \\<and>\n          S1 \\<subseteq> nodes M2 \\<and>\n          (\\<forall>s1\\<in>S1.\n              \\<forall>s2\\<in>S1.\n                 s1 \\<noteq> s2 \\<longrightarrow>\n                 (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                     \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                        B M1 io1 \\<Omega> \\<noteq>\n                        B M1 io2 \\<Omega>)) \\<and>\n          m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V)\n               S1 \\<Omega> V''", "using \\<open>V''\\<in>N io M1 V\\<close> RM_body"], ["proof (prove)\nusing this:\n  V'' \\<in> N io M1 V\n  io = vs @ xs \\<and>\n  mcp (vs @ xs) V'' vs \\<and>\n  {q} \\<subseteq> nodes M2 \\<and>\n  (\\<forall>s1\\<in>{q}.\n      \\<forall>s2\\<in>{q}.\n         s1 \\<noteq> s2 \\<longrightarrow>\n         (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n             \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega>)) \\<and>\n  m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) {q}\n       \\<Omega> V''\n\ngoal (1 subgoal):\n 1. \\<exists>V''\\<in>N io M1 V.\n       \\<exists>S1 vs xs.\n          io = vs @ xs \\<and>\n          mcp (vs @ xs) V'' vs \\<and>\n          S1 \\<subseteq> nodes M2 \\<and>\n          (\\<forall>s1\\<in>S1.\n              \\<forall>s2\\<in>S1.\n                 s1 \\<noteq> s2 \\<longrightarrow>\n                 (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                     \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                        B M1 io1 \\<Omega> \\<noteq>\n                        B M1 io2 \\<Omega>)) \\<and>\n          m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V)\n               S1 \\<Omega> V''", "by metis"], ["proof (state)\nthis:\n  \\<exists>V''\\<in>N io M1 V.\n     \\<exists>S1 vs xs.\n        io = vs @ xs \\<and>\n        mcp (vs @ xs) V'' vs \\<and>\n        S1 \\<subseteq> nodes M2 \\<and>\n        (\\<forall>s1\\<in>S1.\n            \\<forall>s2\\<in>S1.\n               s1 \\<noteq> s2 \\<longrightarrow>\n               (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                   \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                      B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega>)) \\<and>\n        m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1\n             \\<Omega> V''\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>V''\\<in>N io M1 V.\n     \\<exists>S1 vs xs.\n        io = vs @ xs \\<and>\n        mcp (vs @ xs) V'' vs \\<and>\n        S1 \\<subseteq> nodes M2 \\<and>\n        (\\<forall>s1\\<in>S1.\n            \\<forall>s2\\<in>S1.\n               s1 \\<noteq> s2 \\<longrightarrow>\n               (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                   \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                      B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega>)) \\<and>\n        m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1\n             \\<Omega> V''\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}.\n     \\<exists>V''\\<in>N io M1 V.\n        \\<exists>S1 vs xs.\n           io = vs @ xs \\<and>\n           mcp (vs @ xs) V'' vs \\<and>\n           S1 \\<subseteq> nodes M2 \\<and>\n           (\\<forall>s1\\<in>S1.\n               \\<forall>s2\\<in>S1.\n                  s1 \\<noteq> s2 \\<longrightarrow>\n                  (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                      \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                         B M1 io1 \\<Omega> \\<noteq>\n                         B M1 io2 \\<Omega>)) \\<and>\n           m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V)\n                S1 \\<Omega> V''\n\ngoal (1 subgoal):\n 1. \\<not> \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<Longrightarrow>\n    \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<or>\n    (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}.\n        \\<exists>V''\\<in>N io M1 V.\n           \\<exists>S1 vs xs.\n              io = vs @ xs \\<and>\n              mcp (vs @ xs) V'' vs \\<and>\n              S1 \\<subseteq> nodes M2 \\<and>\n              (\\<forall>s1\\<in>S1.\n                  \\<forall>s2\\<in>S1.\n                     s1 \\<noteq> s2 \\<longrightarrow>\n                     (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                         \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                            B M1 io1 \\<Omega> \\<noteq>\n                            B M1 io2 \\<Omega>)) \\<and>\n              m < LB M2 M1 vs xs\n                   (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                   V'')", "then"], ["proof (chain)\npicking this:\n  \\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}.\n     \\<exists>V''\\<in>N io M1 V.\n        \\<exists>S1 vs xs.\n           io = vs @ xs \\<and>\n           mcp (vs @ xs) V'' vs \\<and>\n           S1 \\<subseteq> nodes M2 \\<and>\n           (\\<forall>s1\\<in>S1.\n               \\<forall>s2\\<in>S1.\n                  s1 \\<noteq> s2 \\<longrightarrow>\n                  (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                      \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                         B M1 io1 \\<Omega> \\<noteq>\n                         B M1 io2 \\<Omega>)) \\<and>\n           m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V)\n                S1 \\<Omega> V''", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}.\n     \\<exists>V''\\<in>N io M1 V.\n        \\<exists>S1 vs xs.\n           io = vs @ xs \\<and>\n           mcp (vs @ xs) V'' vs \\<and>\n           S1 \\<subseteq> nodes M2 \\<and>\n           (\\<forall>s1\\<in>S1.\n               \\<forall>s2\\<in>S1.\n                  s1 \\<noteq> s2 \\<longrightarrow>\n                  (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                      \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                         B M1 io1 \\<Omega> \\<noteq>\n                         B M1 io2 \\<Omega>)) \\<and>\n           m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V)\n                S1 \\<Omega> V''\n\ngoal (1 subgoal):\n 1. \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<or>\n    (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}.\n        \\<exists>V''\\<in>N io M1 V.\n           \\<exists>S1 vs xs.\n              io = vs @ xs \\<and>\n              mcp (vs @ xs) V'' vs \\<and>\n              S1 \\<subseteq> nodes M2 \\<and>\n              (\\<forall>s1\\<in>S1.\n                  \\<forall>s2\\<in>S1.\n                     s1 \\<noteq> s2 \\<longrightarrow>\n                     (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                         \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                            B M1 io1 \\<Omega> \\<noteq>\n                            B M1 io2 \\<Omega>)) \\<and>\n              m < LB M2 M1 vs xs\n                   (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                   V'')", "by metis"], ["proof (state)\nthis:\n  \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<or>\n  (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}.\n      \\<exists>V''\\<in>N io M1 V.\n         \\<exists>S1 vs xs.\n            io = vs @ xs \\<and>\n            mcp (vs @ xs) V'' vs \\<and>\n            S1 \\<subseteq> nodes M2 \\<and>\n            (\\<forall>s1\\<in>S1.\n                \\<forall>s2\\<in>S1.\n                   s1 \\<noteq> s2 \\<longrightarrow>\n                   (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                       \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                          B M1 io1 \\<Omega> \\<noteq>\n                          B M1 io2 \\<Omega>)) \\<and>\n            m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V)\n                 S1 \\<Omega> V'')\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<or>\n  (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}.\n      \\<exists>V''\\<in>N io M1 V.\n         \\<exists>S1 vs xs.\n            io = vs @ xs \\<and>\n            mcp (vs @ xs) V'' vs \\<and>\n            S1 \\<subseteq> nodes M2 \\<and>\n            (\\<forall>s1\\<in>S1.\n                \\<forall>s2\\<in>S1.\n                   s1 \\<noteq> s2 \\<longrightarrow>\n                   (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                       \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                          B M1 io1 \\<Omega> \\<noteq>\n                          B M1 io2 \\<Omega>)) \\<and>\n            m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V)\n                 S1 \\<Omega> V'')\n\ngoal (1 subgoal):\n 1. seq \\<in> RM M2 M1 \\<Omega> V m (Suc (|M2| * m))", "then"], ["proof (chain)\npicking this:\n  \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<or>\n  (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}.\n      \\<exists>V''\\<in>N io M1 V.\n         \\<exists>S1 vs xs.\n            io = vs @ xs \\<and>\n            mcp (vs @ xs) V'' vs \\<and>\n            S1 \\<subseteq> nodes M2 \\<and>\n            (\\<forall>s1\\<in>S1.\n                \\<forall>s2\\<in>S1.\n                   s1 \\<noteq> s2 \\<longrightarrow>\n                   (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                       \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                          B M1 io1 \\<Omega> \\<noteq>\n                          B M1 io2 \\<Omega>)) \\<and>\n            m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V)\n                 S1 \\<Omega> V'')", "have \"seq \\<in> {xs' \\<in> C M2 M1 \\<Omega> V m ((Suc ( |M2| * m))).\n                         \\<not> L\\<^sub>i\\<^sub>n M1 {xs'} \\<subseteq> L\\<^sub>i\\<^sub>n M2 {xs'} \\<or>\n                         (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {xs'}.\n                             \\<exists>V''\\<in>N io M1 V.\n                                \\<exists>S1 vs xs.\n                                   io = vs @ xs \\<and>\n                                   mcp (vs @ xs) V'' vs \\<and>\n                                   S1 \\<subseteq> nodes M2 \\<and>\n                                   (\\<forall>s1\\<in>S1.\n                                       \\<forall>s2\\<in>S1.\n                                          s1 \\<noteq> s2 \\<longrightarrow>\n                                          (\\<forall>io1\\<in>RP M2 s1 vs xs V''. \\<forall>io2\\<in>RP M2 s2 vs xs V''. \n                                                                      B M1 io1 \\<Omega> \\<noteq> B M1 io2 \\<Omega>)) \\<and>\n                                   m < LB M2 M1 vs xs (?TS (( |M2| * m)) \\<union> V) S1 \\<Omega> V'')}\""], ["proof (prove)\nusing this:\n  \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<or>\n  (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}.\n      \\<exists>V''\\<in>N io M1 V.\n         \\<exists>S1 vs xs.\n            io = vs @ xs \\<and>\n            mcp (vs @ xs) V'' vs \\<and>\n            S1 \\<subseteq> nodes M2 \\<and>\n            (\\<forall>s1\\<in>S1.\n                \\<forall>s2\\<in>S1.\n                   s1 \\<noteq> s2 \\<longrightarrow>\n                   (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                       \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                          B M1 io1 \\<Omega> \\<noteq>\n                          B M1 io2 \\<Omega>)) \\<and>\n            m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V)\n                 S1 \\<Omega> V'')\n\ngoal (1 subgoal):\n 1. seq\n    \\<in> {xs' \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m)).\n           \\<not> M1 \\<preceq>\\<lbrakk>{xs'}\\<rbrakk> M2 \\<or>\n           (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {xs'}.\n               \\<exists>V''\\<in>N io M1 V.\n                  \\<exists>S1 vs xs.\n                     io = vs @ xs \\<and>\n                     mcp (vs @ xs) V'' vs \\<and>\n                     S1 \\<subseteq> nodes M2 \\<and>\n                     (\\<forall>s1\\<in>S1.\n                         \\<forall>s2\\<in>S1.\n                            s1 \\<noteq> s2 \\<longrightarrow>\n                            (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                                \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                                   B M1 io1 \\<Omega> \\<noteq>\n                                   B M1 io2 \\<Omega>)) \\<and>\n                     m < LB M2 M1 vs xs\n                          (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1\n                          \\<Omega> V'')}", "using \\<open>seq \\<in> ?C ?i\\<close>"], ["proof (prove)\nusing this:\n  \\<not> M1 \\<preceq>\\<lbrakk>{seq}\\<rbrakk> M2 \\<or>\n  (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {seq}.\n      \\<exists>V''\\<in>N io M1 V.\n         \\<exists>S1 vs xs.\n            io = vs @ xs \\<and>\n            mcp (vs @ xs) V'' vs \\<and>\n            S1 \\<subseteq> nodes M2 \\<and>\n            (\\<forall>s1\\<in>S1.\n                \\<forall>s2\\<in>S1.\n                   s1 \\<noteq> s2 \\<longrightarrow>\n                   (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                       \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                          B M1 io1 \\<Omega> \\<noteq>\n                          B M1 io2 \\<Omega>)) \\<and>\n            m < LB M2 M1 vs xs (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V)\n                 S1 \\<Omega> V'')\n  seq \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m))\n\ngoal (1 subgoal):\n 1. seq\n    \\<in> {xs' \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m)).\n           \\<not> M1 \\<preceq>\\<lbrakk>{xs'}\\<rbrakk> M2 \\<or>\n           (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {xs'}.\n               \\<exists>V''\\<in>N io M1 V.\n                  \\<exists>S1 vs xs.\n                     io = vs @ xs \\<and>\n                     mcp (vs @ xs) V'' vs \\<and>\n                     S1 \\<subseteq> nodes M2 \\<and>\n                     (\\<forall>s1\\<in>S1.\n                         \\<forall>s2\\<in>S1.\n                            s1 \\<noteq> s2 \\<longrightarrow>\n                            (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                                \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                                   B M1 io1 \\<Omega> \\<noteq>\n                                   B M1 io2 \\<Omega>)) \\<and>\n                     m < LB M2 M1 vs xs\n                          (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1\n                          \\<Omega> V'')}", "by blast"], ["proof (state)\nthis:\n  seq\n  \\<in> {xs' \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m)).\n         \\<not> M1 \\<preceq>\\<lbrakk>{xs'}\\<rbrakk> M2 \\<or>\n         (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {xs'}.\n             \\<exists>V''\\<in>N io M1 V.\n                \\<exists>S1 vs xs.\n                   io = vs @ xs \\<and>\n                   mcp (vs @ xs) V'' vs \\<and>\n                   S1 \\<subseteq> nodes M2 \\<and>\n                   (\\<forall>s1\\<in>S1.\n                       \\<forall>s2\\<in>S1.\n                          s1 \\<noteq> s2 \\<longrightarrow>\n                          (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                              \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                                 B M1 io1 \\<Omega> \\<noteq>\n                                 B M1 io2 \\<Omega>)) \\<and>\n                   m < LB M2 M1 vs xs\n                        (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1\n                        \\<Omega> V'')}\n\ngoal (1 subgoal):\n 1. seq \\<in> RM M2 M1 \\<Omega> V m (Suc (|M2| * m))", "then"], ["proof (chain)\npicking this:\n  seq\n  \\<in> {xs' \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m)).\n         \\<not> M1 \\<preceq>\\<lbrakk>{xs'}\\<rbrakk> M2 \\<or>\n         (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {xs'}.\n             \\<exists>V''\\<in>N io M1 V.\n                \\<exists>S1 vs xs.\n                   io = vs @ xs \\<and>\n                   mcp (vs @ xs) V'' vs \\<and>\n                   S1 \\<subseteq> nodes M2 \\<and>\n                   (\\<forall>s1\\<in>S1.\n                       \\<forall>s2\\<in>S1.\n                          s1 \\<noteq> s2 \\<longrightarrow>\n                          (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                              \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                                 B M1 io1 \\<Omega> \\<noteq>\n                                 B M1 io2 \\<Omega>)) \\<and>\n                   m < LB M2 M1 vs xs\n                        (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1\n                        \\<Omega> V'')}", "show ?thesis"], ["proof (prove)\nusing this:\n  seq\n  \\<in> {xs' \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m)).\n         \\<not> M1 \\<preceq>\\<lbrakk>{xs'}\\<rbrakk> M2 \\<or>\n         (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {xs'}.\n             \\<exists>V''\\<in>N io M1 V.\n                \\<exists>S1 vs xs.\n                   io = vs @ xs \\<and>\n                   mcp (vs @ xs) V'' vs \\<and>\n                   S1 \\<subseteq> nodes M2 \\<and>\n                   (\\<forall>s1\\<in>S1.\n                       \\<forall>s2\\<in>S1.\n                          s1 \\<noteq> s2 \\<longrightarrow>\n                          (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                              \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                                 B M1 io1 \\<Omega> \\<noteq>\n                                 B M1 io2 \\<Omega>)) \\<and>\n                   m < LB M2 M1 vs xs\n                        (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1\n                        \\<Omega> V'')}\n\ngoal (1 subgoal):\n 1. seq \\<in> RM M2 M1 \\<Omega> V m (Suc (|M2| * m))", "using RM_def"], ["proof (prove)\nusing this:\n  seq\n  \\<in> {xs' \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m)).\n         \\<not> M1 \\<preceq>\\<lbrakk>{xs'}\\<rbrakk> M2 \\<or>\n         (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {xs'}.\n             \\<exists>V''\\<in>N io M1 V.\n                \\<exists>S1 vs xs.\n                   io = vs @ xs \\<and>\n                   mcp (vs @ xs) V'' vs \\<and>\n                   S1 \\<subseteq> nodes M2 \\<and>\n                   (\\<forall>s1\\<in>S1.\n                       \\<forall>s2\\<in>S1.\n                          s1 \\<noteq> s2 \\<longrightarrow>\n                          (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                              \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                                 B M1 io1 \\<Omega> \\<noteq>\n                                 B M1 io2 \\<Omega>)) \\<and>\n                   m < LB M2 M1 vs xs\n                        (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1\n                        \\<Omega> V'')}\n  RM M2 M1 \\<Omega> V m (Suc (|M2| * m)) =\n  {xs' \\<in> C M2 M1 \\<Omega> V m (Suc (|M2| * m)).\n   \\<not> M1 \\<preceq>\\<lbrakk>{xs'}\\<rbrakk> M2 \\<or>\n   (\\<forall>io\\<in>L\\<^sub>i\\<^sub>n M1 {xs'}.\n       \\<exists>V''\\<in>N io M1 V.\n          \\<exists>S1 vs xs.\n             io = vs @ xs \\<and>\n             mcp (vs @ xs) V'' vs \\<and>\n             S1 \\<subseteq> nodes M2 \\<and>\n             (\\<forall>s1\\<in>S1.\n                 \\<forall>s2\\<in>S1.\n                    s1 \\<noteq> s2 \\<longrightarrow>\n                    (\\<forall>io1\\<in>RP M2 s1 vs xs V''.\n                        \\<forall>io2\\<in>RP M2 s2 vs xs V''.\n                           B M1 io1 \\<Omega> \\<noteq>\n                           B M1 io2 \\<Omega>)) \\<and>\n             m < LB M2 M1 vs xs\n                  (TS M2 M1 \\<Omega> V m (|M2| * m) \\<union> V) S1 \\<Omega>\n                  V'')}\n\ngoal (1 subgoal):\n 1. seq \\<in> RM M2 M1 \\<Omega> V m (Suc (|M2| * m))", "by blast"], ["proof (state)\nthis:\n  seq \\<in> RM M2 M1 \\<Omega> V m (Suc (|M2| * m))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  seq \\<in> RM M2 M1 \\<Omega> V m (Suc (|M2| * m))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>seq\\<in>C M2 M1 \\<Omega> V m (Suc (|M2| * m)).\n     seq \\<in> RM M2 M1 \\<Omega> V m (Suc (|M2| * m))\n\ngoal (1 subgoal):\n 1. final_iteration M2 M1 \\<Omega> V m (Suc (|M2| * m))", "then"], ["proof (chain)\npicking this:\n  \\<forall>seq\\<in>C M2 M1 \\<Omega> V m (Suc (|M2| * m)).\n     seq \\<in> RM M2 M1 \\<Omega> V m (Suc (|M2| * m))", "have \"?C ?i - ?RM ?i = {}\""], ["proof (prove)\nusing this:\n  \\<forall>seq\\<in>C M2 M1 \\<Omega> V m (Suc (|M2| * m)).\n     seq \\<in> RM M2 M1 \\<Omega> V m (Suc (|M2| * m))\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc (|M2| * m)) -\n    RM M2 M1 \\<Omega> V m (Suc (|M2| * m)) =\n    {}", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc (|M2| * m)) -\n  RM M2 M1 \\<Omega> V m (Suc (|M2| * m)) =\n  {}\n\ngoal (1 subgoal):\n 1. final_iteration M2 M1 \\<Omega> V m (Suc (|M2| * m))", "have \"?C (Suc ?i) = append_set (?C ?i - ?RM ?i) (inputs M2) - ?TS ?i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc (Suc (|M2| * m))) =\n    append_set\n     (C M2 M1 \\<Omega> V m (Suc (|M2| * m)) -\n      RM M2 M1 \\<Omega> V m (Suc (|M2| * m)))\n     (inputs M2) -\n    TS M2 M1 \\<Omega> V m (Suc (|M2| * m))", "using C.simps(3)"], ["proof (prove)\nusing this:\n  C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc (Suc ?v)) =\n  append_set\n   (C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v) -\n    RM ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v))\n   (inputs ?M2.0) -\n  TS ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v)\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc (Suc (|M2| * m))) =\n    append_set\n     (C M2 M1 \\<Omega> V m (Suc (|M2| * m)) -\n      RM M2 M1 \\<Omega> V m (Suc (|M2| * m)))\n     (inputs M2) -\n    TS M2 M1 \\<Omega> V m (Suc (|M2| * m))", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc (Suc (|M2| * m))) =\n  append_set\n   (C M2 M1 \\<Omega> V m (Suc (|M2| * m)) -\n    RM M2 M1 \\<Omega> V m (Suc (|M2| * m)))\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m (Suc (|M2| * m))\n\ngoal (1 subgoal):\n 1. final_iteration M2 M1 \\<Omega> V m (Suc (|M2| * m))", "then"], ["proof (chain)\npicking this:\n  C M2 M1 \\<Omega> V m (Suc (Suc (|M2| * m))) =\n  append_set\n   (C M2 M1 \\<Omega> V m (Suc (|M2| * m)) -\n    RM M2 M1 \\<Omega> V m (Suc (|M2| * m)))\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m (Suc (|M2| * m))", "have \"?C (Suc ?i) = {}\""], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m (Suc (Suc (|M2| * m))) =\n  append_set\n   (C M2 M1 \\<Omega> V m (Suc (|M2| * m)) -\n    RM M2 M1 \\<Omega> V m (Suc (|M2| * m)))\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m (Suc (|M2| * m))\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc (Suc (|M2| * m))) = {}", "using \\<open>?C ?i - ?RM ?i = {}\\<close>"], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m (Suc (Suc (|M2| * m))) =\n  append_set\n   (C M2 M1 \\<Omega> V m (Suc (|M2| * m)) -\n    RM M2 M1 \\<Omega> V m (Suc (|M2| * m)))\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m (Suc (|M2| * m))\n  C M2 M1 \\<Omega> V m (Suc (|M2| * m)) -\n  RM M2 M1 \\<Omega> V m (Suc (|M2| * m)) =\n  {}\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc (Suc (|M2| * m))) = {}", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc (Suc (|M2| * m))) = {}\n\ngoal (1 subgoal):\n 1. final_iteration M2 M1 \\<Omega> V m (Suc (|M2| * m))", "then"], ["proof (chain)\npicking this:\n  C M2 M1 \\<Omega> V m (Suc (Suc (|M2| * m))) = {}", "have \"?TS (Suc ?i) = ?TS ?i\""], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m (Suc (Suc (|M2| * m))) = {}\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc (Suc (|M2| * m))) =\n    TS M2 M1 \\<Omega> V m (Suc (|M2| * m))", "using TS.simps(3)"], ["proof (prove)\nusing this:\n  C M2 M1 \\<Omega> V m (Suc (Suc (|M2| * m))) = {}\n  TS ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc (Suc ?v)) =\n  TS ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v) \\<union>\n  C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc (Suc ?v))\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc (Suc (|M2| * m))) =\n    TS M2 M1 \\<Omega> V m (Suc (|M2| * m))", "by blast"], ["proof (state)\nthis:\n  TS M2 M1 \\<Omega> V m (Suc (Suc (|M2| * m))) =\n  TS M2 M1 \\<Omega> V m (Suc (|M2| * m))\n\ngoal (1 subgoal):\n 1. final_iteration M2 M1 \\<Omega> V m (Suc (|M2| * m))", "then"], ["proof (chain)\npicking this:\n  TS M2 M1 \\<Omega> V m (Suc (Suc (|M2| * m))) =\n  TS M2 M1 \\<Omega> V m (Suc (|M2| * m))", "show \"final_iteration M2 M1 \\<Omega> V m ?i\""], ["proof (prove)\nusing this:\n  TS M2 M1 \\<Omega> V m (Suc (Suc (|M2| * m))) =\n  TS M2 M1 \\<Omega> V m (Suc (|M2| * m))\n\ngoal (1 subgoal):\n 1. final_iteration M2 M1 \\<Omega> V m (Suc (|M2| * m))", "by blast"], ["proof (state)\nthis:\n  final_iteration M2 M1 \\<Omega> V m (Suc (|M2| * m))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma TS_non_containment_causes_final :\n  assumes \"vs@xs \\<notin> TS M2 M1 \\<Omega> V m i\" \n  and     \"mcp (vs@xs) V vs\"\n  and     \"set xs \\<subseteq> inputs M2\"\n  and     \"final_iteration M2 M1 \\<Omega> V m i\"\n  and     \"OFSM M2\"\nshows \"(\\<exists> xr j . xr \\<noteq> xs \n                  \\<and> prefix xr xs \n                  \\<and> j \\<le> i \n                  \\<and> vs@xr \\<in> RM M2 M1 \\<Omega> V m j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "let ?TS = \"\\<lambda> n . TS M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "let ?C = \"\\<lambda> n . C M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "let ?RM = \"\\<lambda> n . RM M2 M1 \\<Omega> V m n\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "have \"{} \\<noteq> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<noteq> V", "using assms(2)"], ["proof (prove)\nusing this:\n  mcp (vs @ xs) V vs\n\ngoal (1 subgoal):\n 1. {} \\<noteq> V", "by fastforce"], ["proof (state)\nthis:\n  {} \\<noteq> V\n\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "then"], ["proof (chain)\npicking this:\n  {} \\<noteq> V", "have \"?TS 0 \\<noteq> ?TS (Suc 0)\""], ["proof (prove)\nusing this:\n  {} \\<noteq> V\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m 0 \\<noteq> TS M2 M1 \\<Omega> V m (Suc 0)", "by simp"], ["proof (state)\nthis:\n  TS M2 M1 \\<Omega> V m 0 \\<noteq> TS M2 M1 \\<Omega> V m (Suc 0)\n\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "then"], ["proof (chain)\npicking this:\n  TS M2 M1 \\<Omega> V m 0 \\<noteq> TS M2 M1 \\<Omega> V m (Suc 0)", "have \"0 < i\""], ["proof (prove)\nusing this:\n  TS M2 M1 \\<Omega> V m 0 \\<noteq> TS M2 M1 \\<Omega> V m (Suc 0)\n\ngoal (1 subgoal):\n 1. 0 < i", "using assms(4)"], ["proof (prove)\nusing this:\n  TS M2 M1 \\<Omega> V m 0 \\<noteq> TS M2 M1 \\<Omega> V m (Suc 0)\n  final_iteration M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. 0 < i", "by auto"], ["proof (state)\nthis:\n  0 < i\n\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "have ncc1 : \"(\\<exists>xr j. xr \\<noteq> xs \\<and> prefix xr xs \\<and> j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n          (\\<exists>xc. xc \\<noteq> xs \\<and> prefix xc xs \\<and> vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)", "using TS_non_containment_causes(1)[OF assms(1-3) \\<open>0 < i\\<close>]"], ["proof (prove)\nusing this:\n  (\\<exists>xr j.\n      xr \\<noteq> xs \\<and>\n      prefix xr xs \\<and>\n      j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n  (\\<exists>xc.\n      xc \\<noteq> xs \\<and>\n      prefix xc xs \\<and>\n      vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n\ngoal (1 subgoal):\n 1. (\\<exists>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n    (\\<exists>xc.\n        xc \\<noteq> xs \\<and>\n        prefix xc xs \\<and>\n        vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)", "by assumption"], ["proof (state)\nthis:\n  (\\<exists>xr j.\n      xr \\<noteq> xs \\<and>\n      prefix xr xs \\<and>\n      j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n  (\\<exists>xc.\n      xc \\<noteq> xs \\<and>\n      prefix xc xs \\<and>\n      vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "have ncc2 : \"\\<not> ((\\<exists>xr j. xr \\<noteq> xs \\<and> prefix xr xs \\<and> j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n        (\\<exists>xc. xc \\<noteq> xs \\<and> prefix xc xs \\<and> vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> ((\\<exists>xr j.\n                xr \\<noteq> xs \\<and>\n                prefix xr xs \\<and>\n                j \\<le> i \\<and>\n                vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n            (\\<exists>xc.\n                xc \\<noteq> xs \\<and>\n                prefix xc xs \\<and>\n                vs @ xc\n                \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i))", "using TS_non_containment_causes(2)[OF assms(1-3) \\<open>0 < i\\<close>]"], ["proof (prove)\nusing this:\n  \\<not> ((\\<exists>xr j.\n              xr \\<noteq> xs \\<and>\n              prefix xr xs \\<and>\n              j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n          (\\<exists>xc.\n              xc \\<noteq> xs \\<and>\n              prefix xc xs \\<and>\n              vs @ xc\n              \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i))\n\ngoal (1 subgoal):\n 1. \\<not> ((\\<exists>xr j.\n                xr \\<noteq> xs \\<and>\n                prefix xr xs \\<and>\n                j \\<le> i \\<and>\n                vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n            (\\<exists>xc.\n                xc \\<noteq> xs \\<and>\n                prefix xc xs \\<and>\n                vs @ xc\n                \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i))", "by assumption"], ["proof (state)\nthis:\n  \\<not> ((\\<exists>xr j.\n              xr \\<noteq> xs \\<and>\n              prefix xr xs \\<and>\n              j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<and>\n          (\\<exists>xc.\n              xc \\<noteq> xs \\<and>\n              prefix xc xs \\<and>\n              vs @ xc\n              \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i))\n\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "from ncc1"], ["proof (chain)\npicking this:\n  (\\<exists>xr j.\n      xr \\<noteq> xs \\<and>\n      prefix xr xs \\<and>\n      j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n  (\\<exists>xc.\n      xc \\<noteq> xs \\<and>\n      prefix xc xs \\<and>\n      vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<exists>xr j.\n      xr \\<noteq> xs \\<and>\n      prefix xr xs \\<and>\n      j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j) \\<or>\n  (\\<exists>xc.\n      xc \\<noteq> xs \\<and>\n      prefix xc xs \\<and>\n      vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and>\n       vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n 2. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "show \"\\<exists>xr j. xr \\<noteq> xs \\<and> prefix xr xs \\<and> j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n          \\<exists>xr j. xr \\<noteq> xs \\<and> prefix xr xs \\<and> j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and>\n       vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "by simp"], ["proof (state)\nthis:\n  \\<exists>xr j.\n     xr \\<noteq> xs \\<and>\n     prefix xr xs \\<and>\n     j \\<le> i \\<and>\n     vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n  \\<exists>xr j.\n     xr \\<noteq> xs \\<and>\n     prefix xr xs \\<and>\n     j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "show \"\\<exists>xc. xc \\<noteq> xs \\<and> prefix xc xs \\<and> vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n          \\<exists>xr j. xr \\<noteq> xs \\<and> prefix xr xs \\<and> j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "assume \"\\<exists>xc. xc \\<noteq> xs \\<and> prefix xc xs \\<and> vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\""], ["proof (state)\nthis:\n  \\<exists>xc.\n     xc \\<noteq> xs \\<and>\n     prefix xc xs \\<and>\n     vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "then"], ["proof (chain)\npicking this:\n  \\<exists>xc.\n     xc \\<noteq> xs \\<and>\n     prefix xc xs \\<and>\n     vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "obtain xc where \"xc \\<noteq> xs\" \"prefix xc xs\" \"vs @ xc \\<in> ?C i - ?RM i\""], ["proof (prove)\nusing this:\n  \\<exists>xc.\n     xc \\<noteq> xs \\<and>\n     prefix xc xs \\<and>\n     vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. (\\<And>xc.\n        \\<lbrakk>xc \\<noteq> xs; prefix xc xs;\n         vs @ xc\n         \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  xc \\<noteq> xs\n  prefix xc xs\n  vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "then"], ["proof (chain)\npicking this:\n  xc \\<noteq> xs\n  prefix xc xs\n  vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "have \"vs @ xc \\<in> ?C i\""], ["proof (prove)\nusing this:\n  xc \\<noteq> xs\n  prefix xc xs\n  vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ xc \\<in> C M2 M1 \\<Omega> V m i", "by blast"], ["proof (state)\nthis:\n  vs @ xc \\<in> C M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "have \"mcp (vs @ xc) V vs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mcp (vs @ xc) V vs", "using \\<open>prefix xc xs\\<close> assms(2) mcp_prefix_of_suffix"], ["proof (prove)\nusing this:\n  prefix xc xs\n  mcp (vs @ xs) V vs\n  \\<lbrakk>mcp (?vs @ ?xs) ?V ?vs; prefix ?xs' ?xs\\<rbrakk>\n  \\<Longrightarrow> mcp (?vs @ ?xs') ?V ?vs\n\ngoal (1 subgoal):\n 1. mcp (vs @ xc) V vs", "by blast"], ["proof (state)\nthis:\n  mcp (vs @ xc) V vs\n\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "then"], ["proof (chain)\npicking this:\n  mcp (vs @ xc) V vs", "have \"Suc (length xc) = i\""], ["proof (prove)\nusing this:\n  mcp (vs @ xc) V vs\n\ngoal (1 subgoal):\n 1. Suc (length xc) = i", "using C_index[OF \\<open>vs @ xc \\<in> ?C i\\<close>]"], ["proof (prove)\nusing this:\n  mcp (vs @ xc) V vs\n  mcp (vs @ xc) V vs \\<Longrightarrow> Suc (length xc) = i\n\ngoal (1 subgoal):\n 1. Suc (length xc) = i", "by simp"], ["proof (state)\nthis:\n  Suc (length xc) = i\n\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "have \"length xc < length xs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. length xc < length xs", "by (metis \\<open>prefix xc xs\\<close> \\<open>xc \\<noteq> xs\\<close> append_eq_conv_conj nat_less_le prefix_def prefix_length_le take_all)"], ["proof (state)\nthis:\n  length xc < length xs\n\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "then"], ["proof (chain)\npicking this:\n  length xc < length xs", "obtain x where \"prefix (vs@xc@[x]) (vs@xs)\""], ["proof (prove)\nusing this:\n  length xc < length xs\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        prefix (vs @ xc @ [x]) (vs @ xs) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<open>prefix xc xs\\<close> append_one_prefix same_prefix_prefix"], ["proof (prove)\nusing this:\n  length xc < length xs\n  prefix xc xs\n  \\<lbrakk>prefix ?xs ?ys; length ?xs < length ?ys\\<rbrakk>\n  \\<Longrightarrow> prefix (?xs @ [?ys ! length ?xs]) ?ys\n  prefix (?xs @ ?ys) (?xs @ ?zs) = prefix ?ys ?zs\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        prefix (vs @ xc @ [x]) (vs @ xs) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast \n      \n\n      \\<comment> \\<open>Proof sketch:\n           vs-xs-x must not be in TS (i+1), else not final iteration\n           vs-xs-x can not be in TS i due to its length\n           vs-xs-x must therefore not be contained in (append-set (C i - R i) (inputs M2))\n           vs-xs must therefore not be contained in (C i - R i)\n           contradiction \\<close>"], ["proof (state)\nthis:\n  prefix (vs @ xc @ [x]) (vs @ xs)\n\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "have \"?TS (Suc i) = ?TS i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc i) = TS M2 M1 \\<Omega> V m i", "using assms(4)"], ["proof (prove)\nusing this:\n  final_iteration M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m (Suc i) = TS M2 M1 \\<Omega> V m i", "by auto"], ["proof (state)\nthis:\n  TS M2 M1 \\<Omega> V m (Suc i) = TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "have \"vs@xc@[x] \\<notin> ?C (Suc i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xc @ [x] \\<notin> C M2 M1 \\<Omega> V m (Suc i)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ xc @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<Longrightarrow> False", "assume \"vs @ xc @ [x] \\<in> ?C (Suc i)\""], ["proof (state)\nthis:\n  vs @ xc @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i)\n\ngoal (1 subgoal):\n 1. vs @ xc @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  vs @ xc @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i)", "have \"vs @ xc @ [x] \\<notin> ?TS i\""], ["proof (prove)\nusing this:\n  vs @ xc @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i)\n\ngoal (1 subgoal):\n 1. vs @ xc @ [x] \\<notin> TS M2 M1 \\<Omega> V m i", "by (metis (no_types, lifting) C.simps(3) DiffE \\<open>Suc (length xc) = i\\<close>)"], ["proof (state)\nthis:\n  vs @ xc @ [x] \\<notin> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ xc @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  vs @ xc @ [x] \\<notin> TS M2 M1 \\<Omega> V m i", "have \"?TS i \\<noteq> ?TS (Suc i)\""], ["proof (prove)\nusing this:\n  vs @ xc @ [x] \\<notin> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m i \\<noteq> TS M2 M1 \\<Omega> V m (Suc i)", "using C_subset \\<open>vs @ xc @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i)\\<close>"], ["proof (prove)\nusing this:\n  vs @ xc @ [x] \\<notin> TS M2 M1 \\<Omega> V m i\n  C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i\n  \\<subseteq> TS ?M2.0 ?M1.0 ?\\<Omega> ?V ?m ?i\n  vs @ xc @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i)\n\ngoal (1 subgoal):\n 1. TS M2 M1 \\<Omega> V m i \\<noteq> TS M2 M1 \\<Omega> V m (Suc i)", "by blast"], ["proof (state)\nthis:\n  TS M2 M1 \\<Omega> V m i \\<noteq> TS M2 M1 \\<Omega> V m (Suc i)\n\ngoal (1 subgoal):\n 1. vs @ xc @ [x] \\<in> C M2 M1 \\<Omega> V m (Suc i) \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  TS M2 M1 \\<Omega> V m i \\<noteq> TS M2 M1 \\<Omega> V m (Suc i)", "show \"False\""], ["proof (prove)\nusing this:\n  TS M2 M1 \\<Omega> V m i \\<noteq> TS M2 M1 \\<Omega> V m (Suc i)\n\ngoal (1 subgoal):\n 1. False", "using assms(4)"], ["proof (prove)\nusing this:\n  TS M2 M1 \\<Omega> V m i \\<noteq> TS M2 M1 \\<Omega> V m (Suc i)\n  final_iteration M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  vs @ xc @ [x] \\<notin> C M2 M1 \\<Omega> V m (Suc i)\n\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "moreover"], ["proof (state)\nthis:\n  vs @ xc @ [x] \\<notin> C M2 M1 \\<Omega> V m (Suc i)\n\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "have \"?C (Suc i) = append_set (?C i - ?RM i) (inputs M2) - ?TS i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc i) =\n    append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n     (inputs M2) -\n    TS M2 M1 \\<Omega> V m i", "using C.simps(3) \\<open>Suc (length xc) = i\\<close>"], ["proof (prove)\nusing this:\n  C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc (Suc ?v)) =\n  append_set\n   (C ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v) -\n    RM ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v))\n   (inputs ?M2.0) -\n  TS ?M2.0 ?M1.0 ?\\<Omega> ?V ?m (Suc ?v)\n  Suc (length xc) = i\n\ngoal (1 subgoal):\n 1. C M2 M1 \\<Omega> V m (Suc i) =\n    append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n     (inputs M2) -\n    TS M2 M1 \\<Omega> V m i", "by blast"], ["proof (state)\nthis:\n  C M2 M1 \\<Omega> V m (Suc i) =\n  append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "ultimately"], ["proof (chain)\npicking this:\n  vs @ xc @ [x] \\<notin> C M2 M1 \\<Omega> V m (Suc i)\n  C M2 M1 \\<Omega> V m (Suc i) =\n  append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m i", "have \"vs @ xc @ [x] \\<notin> append_set (?C i - ?RM i) (inputs M2) - ?TS i\""], ["proof (prove)\nusing this:\n  vs @ xc @ [x] \\<notin> C M2 M1 \\<Omega> V m (Suc i)\n  C M2 M1 \\<Omega> V m (Suc i) =\n  append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n   (inputs M2) -\n  TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ xc @ [x]\n    \\<notin> append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n              (inputs M2) -\n             TS M2 M1 \\<Omega> V m i", "by blast"], ["proof (state)\nthis:\n  vs @ xc @ [x]\n  \\<notin> append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n            (inputs M2) -\n           TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "have \"vs @ xc @ [x] \\<notin> ?TS (Suc i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xc @ [x] \\<notin> TS M2 M1 \\<Omega> V m (Suc i)", "by (metis Suc_n_not_le_n TS_index(1) \\<open>Suc (length xc) = i\\<close> \n            \\<open>prefix (vs @ xc @ [x]) (vs @ xs)\\<close> assms(2) assms(4) length_append_singleton \n            mcp_prefix_of_suffix same_prefix_prefix)"], ["proof (state)\nthis:\n  vs @ xc @ [x] \\<notin> TS M2 M1 \\<Omega> V m (Suc i)\n\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "then"], ["proof (chain)\npicking this:\n  vs @ xc @ [x] \\<notin> TS M2 M1 \\<Omega> V m (Suc i)", "have \"vs @ xc @ [x] \\<notin> ?TS i\""], ["proof (prove)\nusing this:\n  vs @ xc @ [x] \\<notin> TS M2 M1 \\<Omega> V m (Suc i)\n\ngoal (1 subgoal):\n 1. vs @ xc @ [x] \\<notin> TS M2 M1 \\<Omega> V m i", "by (simp add: assms(4))"], ["proof (state)\nthis:\n  vs @ xc @ [x] \\<notin> TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "have \"vs @ xc @ [x] \\<notin> append_set (?C i - ?RM i) (inputs M2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vs @ xc @ [x]\n    \\<notin> append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n              (inputs M2)", "using \\<open>vs @ xc @ [x] \\<notin> TS M2 M1 \\<Omega> V m i\\<close> \n              \\<open>vs @ xc @ [x] \\<notin> append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i) (inputs M2) \n                                - TS M2 M1 \\<Omega> V m i\\<close>"], ["proof (prove)\nusing this:\n  vs @ xc @ [x] \\<notin> TS M2 M1 \\<Omega> V m i\n  vs @ xc @ [x]\n  \\<notin> append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n            (inputs M2) -\n           TS M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. vs @ xc @ [x]\n    \\<notin> append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n              (inputs M2)", "by blast"], ["proof (state)\nthis:\n  vs @ xc @ [x]\n  \\<notin> append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n            (inputs M2)\n\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "then"], ["proof (chain)\npicking this:\n  vs @ xc @ [x]\n  \\<notin> append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n            (inputs M2)", "have \"vs @ xc \\<notin> (?C i - ?RM i)\""], ["proof (prove)\nusing this:\n  vs @ xc @ [x]\n  \\<notin> append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n            (inputs M2)\n\ngoal (1 subgoal):\n 1. vs @ xc \\<notin> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. vs @ xc @ [x]\n    \\<notin> append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n              (inputs M2) \\<Longrightarrow>\n    vs @ xc \\<notin> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "have f1: \"\\<forall>a A Aa. (a::'a) \\<notin> A \\<and> a \\<notin> Aa \\<or> a \\<in> Aa \\<union> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>a A Aa.\n       a \\<notin> A \\<and> a \\<notin> Aa \\<or> a \\<in> Aa \\<union> A", "by (meson UnCI)"], ["proof (state)\nthis:\n  \\<forall>a A Aa.\n     a \\<notin> A \\<and> a \\<notin> Aa \\<or> a \\<in> Aa \\<union> A\n\ngoal (1 subgoal):\n 1. vs @ xc @ [x]\n    \\<notin> append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n              (inputs M2) \\<Longrightarrow>\n    vs @ xc \\<notin> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "obtain aas :: \"'a list \\<Rightarrow> 'a list \\<Rightarrow> 'a list\" where\n          \"\\<forall>x0 x1. (\\<exists>v2. x0 = x1 @ v2) = (x0 = x1 @ aas x0 x1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>aas.\n        \\<forall>x0 x1.\n           (\\<exists>v2. x0 = x1 @ v2) =\n           (x0 = x1 @ aas x0 x1) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by moura"], ["proof (state)\nthis:\n  \\<forall>x0 x1. (\\<exists>v2. x0 = x1 @ v2) = (x0 = x1 @ aas x0 x1)\n\ngoal (1 subgoal):\n 1. vs @ xc @ [x]\n    \\<notin> append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n              (inputs M2) \\<Longrightarrow>\n    vs @ xc \\<notin> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  \\<forall>x0 x1. (\\<exists>v2. x0 = x1 @ v2) = (x0 = x1 @ aas x0 x1)", "have \"vs @ xs = (vs @ xc @ [x]) @ aas (vs @ xs) (vs @ xc @ [x])\""], ["proof (prove)\nusing this:\n  \\<forall>x0 x1. (\\<exists>v2. x0 = x1 @ v2) = (x0 = x1 @ aas x0 x1)\n\ngoal (1 subgoal):\n 1. vs @ xs = (vs @ xc @ [x]) @ aas (vs @ xs) (vs @ xc @ [x])", "by (meson \\<open>prefix (vs @ xc @ [x]) (vs @ xs)\\<close> prefixE)"], ["proof (state)\nthis:\n  vs @ xs = (vs @ xc @ [x]) @ aas (vs @ xs) (vs @ xc @ [x])\n\ngoal (1 subgoal):\n 1. vs @ xc @ [x]\n    \\<notin> append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n              (inputs M2) \\<Longrightarrow>\n    vs @ xc \\<notin> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  vs @ xs = (vs @ xc @ [x]) @ aas (vs @ xs) (vs @ xc @ [x])", "have \"xs = (xc @ [x]) @ aas (vs @ xs) (vs @ xc @ [x])\""], ["proof (prove)\nusing this:\n  vs @ xs = (vs @ xc @ [x]) @ aas (vs @ xs) (vs @ xc @ [x])\n\ngoal (1 subgoal):\n 1. xs = (xc @ [x]) @ aas (vs @ xs) (vs @ xc @ [x])", "by simp"], ["proof (state)\nthis:\n  xs = (xc @ [x]) @ aas (vs @ xs) (vs @ xc @ [x])\n\ngoal (1 subgoal):\n 1. vs @ xc @ [x]\n    \\<notin> append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n              (inputs M2) \\<Longrightarrow>\n    vs @ xc \\<notin> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  xs = (xc @ [x]) @ aas (vs @ xs) (vs @ xc @ [x])", "have \"x \\<in> inputs M2\""], ["proof (prove)\nusing this:\n  xs = (xc @ [x]) @ aas (vs @ xs) (vs @ xc @ [x])\n\ngoal (1 subgoal):\n 1. x \\<in> inputs M2", "using f1"], ["proof (prove)\nusing this:\n  xs = (xc @ [x]) @ aas (vs @ xs) (vs @ xc @ [x])\n  \\<forall>a A Aa.\n     a \\<notin> A \\<and> a \\<notin> Aa \\<or> a \\<in> Aa \\<union> A\n\ngoal (1 subgoal):\n 1. x \\<in> inputs M2", "by (metis (no_types) assms(3) contra_subsetD insert_iff list.set(2) set_append)"], ["proof (state)\nthis:\n  x \\<in> inputs M2\n\ngoal (1 subgoal):\n 1. vs @ xc @ [x]\n    \\<notin> append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n              (inputs M2) \\<Longrightarrow>\n    vs @ xc \\<notin> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "then"], ["proof (chain)\npicking this:\n  x \\<in> inputs M2", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<in> inputs M2\n\ngoal (1 subgoal):\n 1. vs @ xc \\<notin> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "using \\<open>vs @ xc @ [x] \\<notin> append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i) (inputs M2)\\<close>"], ["proof (prove)\nusing this:\n  x \\<in> inputs M2\n  vs @ xc @ [x]\n  \\<notin> append_set (C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i)\n            (inputs M2)\n\ngoal (1 subgoal):\n 1. vs @ xc \\<notin> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "by force"], ["proof (state)\nthis:\n  vs @ xc \\<notin> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  vs @ xc \\<notin> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "then"], ["proof (chain)\npicking this:\n  vs @ xc \\<notin> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i", "have \"False\""], ["proof (prove)\nusing this:\n  vs @ xc \\<notin> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. False", "using \\<open>vs @ xc \\<in> ?C i - ?RM i\\<close>"], ["proof (prove)\nusing this:\n  vs @ xc \\<notin> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n  vs @ xc \\<in> C M2 M1 \\<Omega> V m i - RM M2 M1 \\<Omega> V m i\n\ngoal (1 subgoal):\n 1. False", "by blast"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>xc.\n       xc \\<noteq> xs \\<and>\n       prefix xc xs \\<and>\n       vs @ xc\n       \\<in> C M2 M1 \\<Omega> V m i -\n             RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n    \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "then"], ["proof (chain)\npicking this:\n  False", "show ?thesis"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>xr j.\n       xr \\<noteq> xs \\<and>\n       prefix xr xs \\<and>\n       j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j", "by simp"], ["proof (state)\nthis:\n  \\<exists>xr j.\n     xr \\<noteq> xs \\<and>\n     prefix xr xs \\<and>\n     j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>xc.\n     xc \\<noteq> xs \\<and>\n     prefix xc xs \\<and>\n     vs @ xc\n     \\<in> C M2 M1 \\<Omega> V m i -\n           RM M2 M1 \\<Omega> V m i \\<Longrightarrow>\n  \\<exists>xr j.\n     xr \\<noteq> xs \\<and>\n     prefix xr xs \\<and>\n     j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>xr j.\n     xr \\<noteq> xs \\<and>\n     prefix xr xs \\<and>\n     j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma TS_non_containment_causes_final_suc :\n  assumes \"vs@xs \\<notin> TS M2 M1 \\<Omega> V m i\" \n  and     \"mcp (vs@xs) V vs\"\n  and     \"set xs \\<subseteq> inputs M2\"\n  and     \"final_iteration M2 M1 \\<Omega> V m i\"\n  and     \"OFSM M2\"\nobtains xr j\nwhere \"xr \\<noteq> xs\" \"prefix xr xs\" \"Suc j \\<le> i\" \"vs@xr \\<in> RM M2 M1 \\<Omega> V m (Suc j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>xr j.\n        \\<lbrakk>xr \\<noteq> xs; prefix xr xs; Suc j \\<le> i;\n         vs @ xr \\<in> RM M2 M1 \\<Omega> V m (Suc j)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>xr j.\n        \\<lbrakk>xr \\<noteq> xs; prefix xr xs; Suc j \\<le> i;\n         vs @ xr \\<in> RM M2 M1 \\<Omega> V m (Suc j)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "obtain xr j where \"xr \\<noteq> xs \\<and> prefix xr xs \\<and> j \\<le> i \\<and> vs@xr \\<in> RM M2 M1 \\<Omega> V m j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and>\n        vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using TS_non_containment_causes_final[OF assms]"], ["proof (prove)\nusing this:\n  \\<exists>xr j.\n     xr \\<noteq> xs \\<and>\n     prefix xr xs \\<and>\n     j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. (\\<And>xr j.\n        xr \\<noteq> xs \\<and>\n        prefix xr xs \\<and>\n        j \\<le> i \\<and>\n        vs @ xr \\<in> RM M2 M1 \\<Omega> V m j \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  xr \\<noteq> xs \\<and>\n  prefix xr xs \\<and> j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. (\\<And>xr j.\n        \\<lbrakk>xr \\<noteq> xs; prefix xr xs; Suc j \\<le> i;\n         vs @ xr \\<in> RM M2 M1 \\<Omega> V m (Suc j)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "moreover"], ["proof (state)\nthis:\n  xr \\<noteq> xs \\<and>\n  prefix xr xs \\<and> j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. (\\<And>xr j.\n        \\<lbrakk>xr \\<noteq> xs; prefix xr xs; Suc j \\<le> i;\n         vs @ xr \\<in> RM M2 M1 \\<Omega> V m (Suc j)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have \"RM M2 M1 \\<Omega> V m 0 = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. RM M2 M1 \\<Omega> V m 0 = {}", "by auto"], ["proof (state)\nthis:\n  RM M2 M1 \\<Omega> V m 0 = {}\n\ngoal (1 subgoal):\n 1. (\\<And>xr j.\n        \\<lbrakk>xr \\<noteq> xs; prefix xr xs; Suc j \\<le> i;\n         vs @ xr \\<in> RM M2 M1 \\<Omega> V m (Suc j)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "ultimately"], ["proof (chain)\npicking this:\n  xr \\<noteq> xs \\<and>\n  prefix xr xs \\<and> j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n  RM M2 M1 \\<Omega> V m 0 = {}", "have \"j \\<noteq> 0\""], ["proof (prove)\nusing this:\n  xr \\<noteq> xs \\<and>\n  prefix xr xs \\<and> j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n  RM M2 M1 \\<Omega> V m 0 = {}\n\ngoal (1 subgoal):\n 1. j \\<noteq> 0", "by (metis empty_iff)"], ["proof (state)\nthis:\n  j \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (\\<And>xr j.\n        \\<lbrakk>xr \\<noteq> xs; prefix xr xs; Suc j \\<le> i;\n         vs @ xr \\<in> RM M2 M1 \\<Omega> V m (Suc j)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "then"], ["proof (chain)\npicking this:\n  j \\<noteq> 0", "obtain jp where \"j = Suc jp\""], ["proof (prove)\nusing this:\n  j \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (\\<And>jp. j = Suc jp \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using not0_implies_Suc"], ["proof (prove)\nusing this:\n  j \\<noteq> 0\n  ?n \\<noteq> 0 \\<Longrightarrow> \\<exists>m. ?n = Suc m\n\ngoal (1 subgoal):\n 1. (\\<And>jp. j = Suc jp \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by blast"], ["proof (state)\nthis:\n  j = Suc jp\n\ngoal (1 subgoal):\n 1. (\\<And>xr j.\n        \\<lbrakk>xr \\<noteq> xs; prefix xr xs; Suc j \\<le> i;\n         vs @ xr \\<in> RM M2 M1 \\<Omega> V m (Suc j)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "then"], ["proof (chain)\npicking this:\n  j = Suc jp", "have \"xr \\<noteq> xs \\<and> prefix xr xs \\<and> Suc jp \\<le> i \\<and> vs@xr \\<in> RM M2 M1 \\<Omega> V m (Suc jp)\""], ["proof (prove)\nusing this:\n  j = Suc jp\n\ngoal (1 subgoal):\n 1. xr \\<noteq> xs \\<and>\n    prefix xr xs \\<and>\n    Suc jp \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m (Suc jp)", "using \\<open>xr \\<noteq> xs \\<and> prefix xr xs \\<and> j \\<le> i \\<and> vs@xr \\<in> RM M2 M1 \\<Omega> V m j\\<close>"], ["proof (prove)\nusing this:\n  j = Suc jp\n  xr \\<noteq> xs \\<and>\n  prefix xr xs \\<and> j \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m j\n\ngoal (1 subgoal):\n 1. xr \\<noteq> xs \\<and>\n    prefix xr xs \\<and>\n    Suc jp \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m (Suc jp)", "by blast"], ["proof (state)\nthis:\n  xr \\<noteq> xs \\<and>\n  prefix xr xs \\<and>\n  Suc jp \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m (Suc jp)\n\ngoal (1 subgoal):\n 1. (\\<And>xr j.\n        \\<lbrakk>xr \\<noteq> xs; prefix xr xs; Suc j \\<le> i;\n         vs @ xr \\<in> RM M2 M1 \\<Omega> V m (Suc j)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "then"], ["proof (chain)\npicking this:\n  xr \\<noteq> xs \\<and>\n  prefix xr xs \\<and>\n  Suc jp \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m (Suc jp)", "show ?thesis"], ["proof (prove)\nusing this:\n  xr \\<noteq> xs \\<and>\n  prefix xr xs \\<and>\n  Suc jp \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m (Suc jp)\n\ngoal (1 subgoal):\n 1. thesis", "using that"], ["proof (prove)\nusing this:\n  xr \\<noteq> xs \\<and>\n  prefix xr xs \\<and>\n  Suc jp \\<le> i \\<and> vs @ xr \\<in> RM M2 M1 \\<Omega> V m (Suc jp)\n  \\<lbrakk>?xr \\<noteq> xs; prefix ?xr xs; Suc ?j \\<le> i;\n   vs @ ?xr \\<in> RM M2 M1 \\<Omega> V m (Suc ?j)\\<rbrakk>\n  \\<Longrightarrow> thesis\n\ngoal (1 subgoal):\n 1. thesis", "by blast"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}