{"file_name": "/home/qj213/afp-2021-10-22/thys/Twelvefold_Way/Card_Bijections_Direct.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Twelvefold_Way", "problem_names": ["lemma bijections_in_domain_permutation:\n  assumes \"finite A\" \"finite B\"\n  assumes \"card A = card B\"\n  shows \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // domain_permutation A B\"", "lemma bij_betw_quotient_domain_permutation_eq:\n  assumes \"finite A\" \"finite B\"\n  assumes \"card A = card B\"\n  shows \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // domain_permutation A B = {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\"", "lemma\n  assumes \"finite A\" \"finite B\"\n  assumes \"card A = card B\"\n  shows \"card ({f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // domain_permutation A B) = 1\"", "lemma bijections_in_range_permutation:\n  assumes \"finite A\" \"finite B\"\n  assumes \"card A = card B\"\n  shows \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // range_permutation A B\"", "lemma bij_betw_quotient_range_permutation_eq:\n  assumes \"finite A\" \"finite B\"\n  assumes \"card A = card B\"\n  shows \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // range_permutation A B = {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\"", "lemma card_bijections_range_permutation_eq_1:\n  assumes \"finite A\" \"finite B\"\n  assumes \"card A = card B\"\n  shows \"card ({f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // range_permutation A B) = 1\"", "lemma bijections_in_domain_and_range_permutation:\n  assumes \"finite A\" \"finite B\"\n  assumes \"card A = card B\"\n  shows \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // domain_and_range_permutation A B\"", "lemma bij_betw_quotient_domain_and_range_permutation_eq:\n  assumes \"finite A\" \"finite B\"\n  assumes \"card A = card B\"\n  shows \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // domain_and_range_permutation A B = {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\"", "lemma card_bijections_domain_and_range_permutation_eq_1:\n  assumes \"finite A\" \"finite B\"\n  assumes \"card A = card B\"\n  shows \"card ({f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // domain_and_range_permutation A B) = 1\""], "translations": [["", "lemma bijections_in_domain_permutation:\n  assumes \"finite A\" \"finite B\"\n  assumes \"card A = card B\"\n  shows \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // domain_permutation A B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          domain_permutation A B", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          domain_permutation A B", "from assms"], ["proof (chain)\npicking this:\n  finite A\n  finite B\n  card A = card B", "obtain f where f: \"f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\""], ["proof (prove)\nusing this:\n  finite A\n  finite B\n  card A = card B\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                 bij_betw f A B} \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis finite_same_card_bij_on_ext_funcset mem_Collect_eq)"], ["proof (state)\nthis:\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          domain_permutation A B", "moreover"], ["proof (state)\nthis:\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          domain_permutation A B", "have proj_f: \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} = domain_permutation A B `` {f}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} =\n    domain_permutation A B `` {f}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<subseteq> domain_permutation A B `` {f}\n 2. domain_permutation A B `` {f}\n    \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "from f"], ["proof (chain)\npicking this:\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "show \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> domain_permutation A B `` {f}\""], ["proof (prove)\nusing this:\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<subseteq> domain_permutation A B `` {f}", "unfolding domain_permutation_def"], ["proof (prove)\nusing this:\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<subseteq> {(f, f').\n                 (f, f')\n                 \\<in> (A \\<rightarrow>\\<^sub>E B) \\<times>\n                       (A \\<rightarrow>\\<^sub>E B) \\<and>\n                 (\\<exists>p.\n                     p permutes A \\<and>\n                     (\\<forall>x\\<in>A. f x = f' (p x)))} ``\n                {f}", "by (auto elim: obtain_domain_permutation_for_two_bijections)"], ["proof (state)\nthis:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n  \\<subseteq> domain_permutation A B `` {f}\n\ngoal (1 subgoal):\n 1. domain_permutation A B `` {f}\n    \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. domain_permutation A B `` {f}\n    \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "show \"domain_permutation A B `` {f} \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. domain_permutation A B `` {f}\n    \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> domain_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "fix f'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> domain_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "assume \"f' \\<in> domain_permutation A B `` {f}\""], ["proof (state)\nthis:\n  f' \\<in> domain_permutation A B `` {f}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> domain_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "have \"(f', f) \\<in> domain_permutation A B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f', f) \\<in> domain_permutation A B", "using \\<open>f' \\<in> domain_permutation A B `` {f}\\<close> equiv_domain_permutation[of A B]"], ["proof (prove)\nusing this:\n  f' \\<in> domain_permutation A B `` {f}\n  equiv (A \\<rightarrow>\\<^sub>E B) (domain_permutation A B)\n\ngoal (1 subgoal):\n 1. (f', f) \\<in> domain_permutation A B", "by (simp add: equiv_class_eq_iff)"], ["proof (state)\nthis:\n  (f', f) \\<in> domain_permutation A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> domain_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "from this"], ["proof (chain)\npicking this:\n  (f', f) \\<in> domain_permutation A B", "obtain p where \"p permutes A\" \"\\<forall>x\\<in>A. f' x = f (p x)\""], ["proof (prove)\nusing this:\n  (f', f) \\<in> domain_permutation A B\n\ngoal (1 subgoal):\n 1. (\\<And>p.\n        \\<lbrakk>p permutes A; \\<forall>x\\<in>A. f' x = f (p x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding domain_permutation_def"], ["proof (prove)\nusing this:\n  (f', f)\n  \\<in> {(f, f').\n         (f, f')\n         \\<in> (A \\<rightarrow>\\<^sub>E B) \\<times>\n               (A \\<rightarrow>\\<^sub>E B) \\<and>\n         (\\<exists>p.\n             p permutes A \\<and> (\\<forall>x\\<in>A. f x = f' (p x)))}\n\ngoal (1 subgoal):\n 1. (\\<And>p.\n        \\<lbrakk>p permutes A; \\<forall>x\\<in>A. f' x = f (p x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  p permutes A\n  \\<forall>x\\<in>A. f' x = f (p x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> domain_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "from this"], ["proof (chain)\npicking this:\n  p permutes A\n  \\<forall>x\\<in>A. f' x = f (p x)", "have \"bij_betw (f \\<circ> p) A B\""], ["proof (prove)\nusing this:\n  p permutes A\n  \\<forall>x\\<in>A. f' x = f (p x)\n\ngoal (1 subgoal):\n 1. bij_betw (f \\<circ> p) A B", "using bij_betw_comp_iff f permutes_imp_bij"], ["proof (prove)\nusing this:\n  p permutes A\n  \\<forall>x\\<in>A. f' x = f (p x)\n  bij_betw ?f ?A ?A' \\<Longrightarrow>\n  bij_betw ?f' ?A' ?A'' = bij_betw (?f' \\<circ> ?f) ?A ?A''\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n  ?p permutes ?S \\<Longrightarrow> bij_betw ?p ?S ?S\n\ngoal (1 subgoal):\n 1. bij_betw (f \\<circ> p) A B", "by fastforce"], ["proof (state)\nthis:\n  bij_betw (f \\<circ> p) A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> domain_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "from this"], ["proof (chain)\npicking this:\n  bij_betw (f \\<circ> p) A B", "have \"bij_betw f' A B\""], ["proof (prove)\nusing this:\n  bij_betw (f \\<circ> p) A B\n\ngoal (1 subgoal):\n 1. bij_betw f' A B", "using \\<open>\\<forall>x\\<in>A. f' x = f (p x)\\<close>"], ["proof (prove)\nusing this:\n  bij_betw (f \\<circ> p) A B\n  \\<forall>x\\<in>A. f' x = f (p x)\n\ngoal (1 subgoal):\n 1. bij_betw f' A B", "by (metis (mono_tags, lifting) bij_betw_cong comp_apply)"], ["proof (state)\nthis:\n  bij_betw f' A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> domain_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "moreover"], ["proof (state)\nthis:\n  bij_betw f' A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> domain_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "have \"f' \\<in> A \\<rightarrow>\\<^sub>E B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f' \\<in> A \\<rightarrow>\\<^sub>E B", "using \\<open>f' \\<in> domain_permutation A B `` {f}\\<close>"], ["proof (prove)\nusing this:\n  f' \\<in> domain_permutation A B `` {f}\n\ngoal (1 subgoal):\n 1. f' \\<in> A \\<rightarrow>\\<^sub>E B", "unfolding domain_permutation_def"], ["proof (prove)\nusing this:\n  f' \\<in> {(f, f').\n            (f, f')\n            \\<in> (A \\<rightarrow>\\<^sub>E B) \\<times>\n                  (A \\<rightarrow>\\<^sub>E B) \\<and>\n            (\\<exists>p.\n                p permutes A \\<and> (\\<forall>x\\<in>A. f x = f' (p x)))} ``\n           {f}\n\ngoal (1 subgoal):\n 1. f' \\<in> A \\<rightarrow>\\<^sub>E B", "by auto"], ["proof (state)\nthis:\n  f' \\<in> A \\<rightarrow>\\<^sub>E B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> domain_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "ultimately"], ["proof (chain)\npicking this:\n  bij_betw f' A B\n  f' \\<in> A \\<rightarrow>\\<^sub>E B", "show \"f' \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\""], ["proof (prove)\nusing this:\n  bij_betw f' A B\n  f' \\<in> A \\<rightarrow>\\<^sub>E B\n\ngoal (1 subgoal):\n 1. f' \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "by simp"], ["proof (state)\nthis:\n  f' \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  domain_permutation A B `` {f}\n  \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} =\n  domain_permutation A B `` {f}\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          domain_permutation A B", "ultimately"], ["proof (chain)\npicking this:\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} =\n  domain_permutation A B `` {f}", "show ?thesis"], ["proof (prove)\nusing this:\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} =\n  domain_permutation A B `` {f}\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          domain_permutation A B", "by (simp add: quotientI)"], ["proof (state)\nthis:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n  \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n        domain_permutation A B\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma bij_betw_quotient_domain_permutation_eq:\n  assumes \"finite A\" \"finite B\"\n  assumes \"card A = card B\"\n  shows \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // domain_permutation A B = {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n    domain_permutation A B =\n    {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n    domain_permutation A B\n    \\<subseteq> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n 2. {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n    \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n                domain_permutation A B", "show \"{{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}} \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // domain_permutation A B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n    \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n                domain_permutation A B", "by (simp add: bijections_in_domain_permutation[OF assms])"], ["proof (state)\nthis:\n  {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n  \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n              domain_permutation A B\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n    domain_permutation A B\n    \\<subseteq> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n    domain_permutation A B\n    \\<subseteq> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "show \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // domain_permutation A B \\<subseteq> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n    domain_permutation A B\n    \\<subseteq> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n               domain_permutation A B \\<Longrightarrow>\n       x \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "fix F"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n               domain_permutation A B \\<Longrightarrow>\n       x \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "assume F_in: \"F \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // domain_permutation A B\""], ["proof (state)\nthis:\n  F \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          domain_permutation A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n               domain_permutation A B \\<Longrightarrow>\n       x \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "have \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // domain_permutation A B = {F \\<in> ((A \\<rightarrow>\\<^sub>E B) // domain_permutation A B). univ (\\<lambda>f. bij_betw f A B) F}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n    domain_permutation A B =\n    {F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_permutation A B.\n     univ (\\<lambda>f. bij_betw f A B) F}", "using equiv_domain_permutation[of A B] bij_betw_respects_domain_permutation[of A B]"], ["proof (prove)\nusing this:\n  equiv (A \\<rightarrow>\\<^sub>E B) (domain_permutation A B)\n  (\\<lambda>f. bij_betw f A B) respects domain_permutation A B\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n    domain_permutation A B =\n    {F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_permutation A B.\n     univ (\\<lambda>f. bij_betw f A B) F}", "by (simp only: univ_preserves_predicate)"], ["proof (state)\nthis:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n  domain_permutation A B =\n  {F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_permutation A B.\n   univ (\\<lambda>f. bij_betw f A B) F}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n               domain_permutation A B \\<Longrightarrow>\n       x \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "from F_in this"], ["proof (chain)\npicking this:\n  F \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          domain_permutation A B\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n  domain_permutation A B =\n  {F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_permutation A B.\n   univ (\\<lambda>f. bij_betw f A B) F}", "have \"F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_permutation A B\"\n      and \"univ (\\<lambda>f. bij_betw f A B) F\""], ["proof (prove)\nusing this:\n  F \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          domain_permutation A B\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n  domain_permutation A B =\n  {F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_permutation A B.\n   univ (\\<lambda>f. bij_betw f A B) F}\n\ngoal (1 subgoal):\n 1. F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_permutation A B &&&\n    univ (\\<lambda>f. bij_betw f A B) F", "by blast+"], ["proof (state)\nthis:\n  F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_permutation A B\n  univ (\\<lambda>f. bij_betw f A B) F\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n               domain_permutation A B \\<Longrightarrow>\n       x \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "have \"F = {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. F = {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. F \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n 2. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F", "have \"\\<forall>f \\<in> F. f \\<in> A \\<rightarrow>\\<^sub>E B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. f \\<in> A \\<rightarrow>\\<^sub>E B", "using \\<open>F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_permutation A B\\<close>"], ["proof (prove)\nusing this:\n  F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_permutation A B\n\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. f \\<in> A \\<rightarrow>\\<^sub>E B", "by (metis ImageE equiv_class_eq_iff equiv_domain_permutation quotientE)"], ["proof (state)\nthis:\n  \\<forall>f\\<in>F. f \\<in> A \\<rightarrow>\\<^sub>E B\n\ngoal (2 subgoals):\n 1. F \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n 2. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F", "moreover"], ["proof (state)\nthis:\n  \\<forall>f\\<in>F. f \\<in> A \\<rightarrow>\\<^sub>E B\n\ngoal (2 subgoals):\n 1. F \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n 2. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F", "have \"\\<forall>f \\<in> F. bij_betw f A B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. bij_betw f A B", "using univ_predicate_impl_forall[OF equiv_domain_permutation bij_betw_respects_domain_permutation]"], ["proof (prove)\nusing this:\n  \\<lbrakk>?X \\<in> (?A1 \\<rightarrow>\\<^sub>E ?B1) //\n                    domain_permutation ?A1 ?B1;\n   univ (\\<lambda>f. bij_betw f ?A1 ?B1) ?X\\<rbrakk>\n  \\<Longrightarrow> \\<forall>x\\<in>?X. bij_betw x ?A1 ?B1\n\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. bij_betw f A B", "using \\<open>F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_permutation A B\\<close> \\<open>univ (\\<lambda>f. bij_betw f A B) F\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>?X \\<in> (?A1 \\<rightarrow>\\<^sub>E ?B1) //\n                    domain_permutation ?A1 ?B1;\n   univ (\\<lambda>f. bij_betw f ?A1 ?B1) ?X\\<rbrakk>\n  \\<Longrightarrow> \\<forall>x\\<in>?X. bij_betw x ?A1 ?B1\n  F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_permutation A B\n  univ (\\<lambda>f. bij_betw f A B) F\n\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. bij_betw f A B", "by auto"], ["proof (state)\nthis:\n  \\<forall>f\\<in>F. bij_betw f A B\n\ngoal (2 subgoals):\n 1. F \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n 2. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>f\\<in>F. f \\<in> A \\<rightarrow>\\<^sub>E B\n  \\<forall>f\\<in>F. bij_betw f A B", "show \"F \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\""], ["proof (prove)\nusing this:\n  \\<forall>f\\<in>F. f \\<in> A \\<rightarrow>\\<^sub>E B\n  \\<forall>f\\<in>F. bij_betw f A B\n\ngoal (1 subgoal):\n 1. F \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "by auto"], ["proof (state)\nthis:\n  F \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F", "show \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "fix f'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "assume \"f' \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\""], ["proof (state)\nthis:\n  f' \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "from this"], ["proof (chain)\npicking this:\n  f' \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "have \"f' \\<in> A \\<rightarrow>\\<^sub>E B\" \"bij_betw f' A B\""], ["proof (prove)\nusing this:\n  f' \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. f' \\<in> A \\<rightarrow>\\<^sub>E B &&& bij_betw f' A B", "by auto"], ["proof (state)\nthis:\n  f' \\<in> A \\<rightarrow>\\<^sub>E B\n  bij_betw f' A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "obtain f where \"f \\<in> A \\<rightarrow>\\<^sub>E B\" and \"F = domain_permutation A B `` {f}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>f \\<in> A \\<rightarrow>\\<^sub>E B;\n         F = domain_permutation A B `` {f}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_permutation A B\\<close>"], ["proof (prove)\nusing this:\n  F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_permutation A B\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>f \\<in> A \\<rightarrow>\\<^sub>E B;\n         F = domain_permutation A B `` {f}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto elim: quotientE)"], ["proof (state)\nthis:\n  f \\<in> A \\<rightarrow>\\<^sub>E B\n  F = domain_permutation A B `` {f}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "have \"bij_betw f A B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bij_betw f A B", "using univ_commute'[OF equiv_domain_permutation bij_betw_respects_domain_permutation]"], ["proof (prove)\nusing this:\n  ?x \\<in> ?A1 \\<rightarrow>\\<^sub>E ?B1 \\<Longrightarrow>\n  univ (\\<lambda>f. bij_betw f ?A1 ?B1)\n   (domain_permutation ?A1 ?B1 `` {?x}) =\n  bij_betw ?x ?A1 ?B1\n\ngoal (1 subgoal):\n 1. bij_betw f A B", "using \\<open>f \\<in> A \\<rightarrow>\\<^sub>E B\\<close> \\<open>F = domain_permutation A B `` {f}\\<close> \\<open>univ (\\<lambda>f. bij_betw f A B) F\\<close>"], ["proof (prove)\nusing this:\n  ?x \\<in> ?A1 \\<rightarrow>\\<^sub>E ?B1 \\<Longrightarrow>\n  univ (\\<lambda>f. bij_betw f ?A1 ?B1)\n   (domain_permutation ?A1 ?B1 `` {?x}) =\n  bij_betw ?x ?A1 ?B1\n  f \\<in> A \\<rightarrow>\\<^sub>E B\n  F = domain_permutation A B `` {f}\n  univ (\\<lambda>f. bij_betw f A B) F\n\ngoal (1 subgoal):\n 1. bij_betw f A B", "by auto"], ["proof (state)\nthis:\n  bij_betw f A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "obtain p where \"p permutes A\" \"\\<forall>x\\<in>A. f x = f' (p x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>p.\n        \\<lbrakk>p permutes A; \\<forall>x\\<in>A. f x = f' (p x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using obtain_domain_permutation_for_two_bijections"], ["proof (prove)\nusing this:\n  \\<lbrakk>bij_betw ?f ?A ?B; bij_betw ?f' ?A ?B;\n   \\<And>p.\n      \\<lbrakk>p permutes ?A; \\<forall>a\\<in>?A. ?f a = ?f' (p a)\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>p.\n        \\<lbrakk>p permutes A; \\<forall>x\\<in>A. f x = f' (p x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>bij_betw f A B\\<close> \\<open>bij_betw f' A B\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>bij_betw ?f ?A ?B; bij_betw ?f' ?A ?B;\n   \\<And>p.\n      \\<lbrakk>p permutes ?A; \\<forall>a\\<in>?A. ?f a = ?f' (p a)\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  bij_betw f A B\n  bij_betw f' A B\n\ngoal (1 subgoal):\n 1. (\\<And>p.\n        \\<lbrakk>p permutes A; \\<forall>x\\<in>A. f x = f' (p x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  p permutes A\n  \\<forall>x\\<in>A. f x = f' (p x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "from this \\<open>f \\<in> A \\<rightarrow>\\<^sub>E B\\<close> \\<open>f' \\<in> A \\<rightarrow>\\<^sub>E B\\<close>"], ["proof (chain)\npicking this:\n  p permutes A\n  \\<forall>x\\<in>A. f x = f' (p x)\n  f \\<in> A \\<rightarrow>\\<^sub>E B\n  f' \\<in> A \\<rightarrow>\\<^sub>E B", "have \"(f, f') \\<in> domain_permutation A B\""], ["proof (prove)\nusing this:\n  p permutes A\n  \\<forall>x\\<in>A. f x = f' (p x)\n  f \\<in> A \\<rightarrow>\\<^sub>E B\n  f' \\<in> A \\<rightarrow>\\<^sub>E B\n\ngoal (1 subgoal):\n 1. (f, f') \\<in> domain_permutation A B", "unfolding domain_permutation_def"], ["proof (prove)\nusing this:\n  p permutes A\n  \\<forall>x\\<in>A. f x = f' (p x)\n  f \\<in> A \\<rightarrow>\\<^sub>E B\n  f' \\<in> A \\<rightarrow>\\<^sub>E B\n\ngoal (1 subgoal):\n 1. (f, f')\n    \\<in> {(f, f').\n           (f, f')\n           \\<in> (A \\<rightarrow>\\<^sub>E B) \\<times>\n                 (A \\<rightarrow>\\<^sub>E B) \\<and>\n           (\\<exists>p.\n               p permutes A \\<and> (\\<forall>x\\<in>A. f x = f' (p x)))}", "by auto"], ["proof (state)\nthis:\n  (f, f') \\<in> domain_permutation A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "from this"], ["proof (chain)\npicking this:\n  (f, f') \\<in> domain_permutation A B", "show \"f' \\<in> F\""], ["proof (prove)\nusing this:\n  (f, f') \\<in> domain_permutation A B\n\ngoal (1 subgoal):\n 1. f' \\<in> F", "using \\<open>F = domain_permutation A B `` {f}\\<close>"], ["proof (prove)\nusing this:\n  (f, f') \\<in> domain_permutation A B\n  F = domain_permutation A B `` {f}\n\ngoal (1 subgoal):\n 1. f' \\<in> F", "by simp"], ["proof (state)\nthis:\n  f' \\<in> F\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  F = {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n               domain_permutation A B \\<Longrightarrow>\n       x \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "from this"], ["proof (chain)\npicking this:\n  F = {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "show \"F \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\""], ["proof (prove)\nusing this:\n  F = {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. F \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "by simp"], ["proof (state)\nthis:\n  F \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n  domain_permutation A B\n  \\<subseteq> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n\ngoal:\nNo subgoals!", "qed"], ["", "subsubsection \\<open>Cardinality\\<close>"], ["", "lemma\n  assumes \"finite A\" \"finite B\"\n  assumes \"card A = card B\"\n  shows \"card ({f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // domain_permutation A B) = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card\n     ({f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n      domain_permutation A B) =\n    1", "using bij_betw_quotient_domain_permutation_eq[OF assms]"], ["proof (prove)\nusing this:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n  domain_permutation A B =\n  {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n\ngoal (1 subgoal):\n 1. card\n     ({f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n      domain_permutation A B) =\n    1", "by auto"], ["", "subsection \\<open>Bijections from A to B up to a Permutation on B\\<close>"], ["", "subsubsection \\<open>Equivalence Class\\<close>"], ["", "lemma bijections_in_range_permutation:\n  assumes \"finite A\" \"finite B\"\n  assumes \"card A = card B\"\n  shows \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // range_permutation A B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          range_permutation A B", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          range_permutation A B", "from assms"], ["proof (chain)\npicking this:\n  finite A\n  finite B\n  card A = card B", "obtain f where f: \"f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\""], ["proof (prove)\nusing this:\n  finite A\n  finite B\n  card A = card B\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                 bij_betw f A B} \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis finite_same_card_bij_on_ext_funcset mem_Collect_eq)"], ["proof (state)\nthis:\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          range_permutation A B", "moreover"], ["proof (state)\nthis:\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          range_permutation A B", "have proj_f: \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} = range_permutation A B `` {f}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} =\n    range_permutation A B `` {f}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<subseteq> range_permutation A B `` {f}\n 2. range_permutation A B `` {f}\n    \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "from f"], ["proof (chain)\npicking this:\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "show \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> range_permutation A B `` {f}\""], ["proof (prove)\nusing this:\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<subseteq> range_permutation A B `` {f}", "unfolding range_permutation_def"], ["proof (prove)\nusing this:\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<subseteq> {(f, f').\n                 (f, f')\n                 \\<in> (A \\<rightarrow>\\<^sub>E B) \\<times>\n                       (A \\<rightarrow>\\<^sub>E B) \\<and>\n                 (\\<exists>p.\n                     p permutes B \\<and>\n                     (\\<forall>x\\<in>A. f x = p (f' x)))} ``\n                {f}", "by (auto elim: obtain_range_permutation_for_two_bijections)"], ["proof (state)\nthis:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n  \\<subseteq> range_permutation A B `` {f}\n\ngoal (1 subgoal):\n 1. range_permutation A B `` {f}\n    \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. range_permutation A B `` {f}\n    \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "show \"range_permutation A B `` {f} \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. range_permutation A B `` {f}\n    \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> range_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "fix f'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> range_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "assume \"f' \\<in> range_permutation A B `` {f}\""], ["proof (state)\nthis:\n  f' \\<in> range_permutation A B `` {f}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> range_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "have \"(f', f) \\<in> range_permutation A B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f', f) \\<in> range_permutation A B", "using \\<open>f' \\<in> range_permutation A B `` {f}\\<close> equiv_range_permutation[of A B]"], ["proof (prove)\nusing this:\n  f' \\<in> range_permutation A B `` {f}\n  equiv (A \\<rightarrow>\\<^sub>E B) (range_permutation A B)\n\ngoal (1 subgoal):\n 1. (f', f) \\<in> range_permutation A B", "by (simp add: equiv_class_eq_iff)"], ["proof (state)\nthis:\n  (f', f) \\<in> range_permutation A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> range_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "from this"], ["proof (chain)\npicking this:\n  (f', f) \\<in> range_permutation A B", "obtain p where \"p permutes B\" \"\\<forall>x\\<in>A. f' x = p (f x)\""], ["proof (prove)\nusing this:\n  (f', f) \\<in> range_permutation A B\n\ngoal (1 subgoal):\n 1. (\\<And>p.\n        \\<lbrakk>p permutes B; \\<forall>x\\<in>A. f' x = p (f x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding range_permutation_def"], ["proof (prove)\nusing this:\n  (f', f)\n  \\<in> {(f, f').\n         (f, f')\n         \\<in> (A \\<rightarrow>\\<^sub>E B) \\<times>\n               (A \\<rightarrow>\\<^sub>E B) \\<and>\n         (\\<exists>p.\n             p permutes B \\<and> (\\<forall>x\\<in>A. f x = p (f' x)))}\n\ngoal (1 subgoal):\n 1. (\\<And>p.\n        \\<lbrakk>p permutes B; \\<forall>x\\<in>A. f' x = p (f x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  p permutes B\n  \\<forall>x\\<in>A. f' x = p (f x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> range_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "from this"], ["proof (chain)\npicking this:\n  p permutes B\n  \\<forall>x\\<in>A. f' x = p (f x)", "have \"bij_betw (p \\<circ> f) A B\""], ["proof (prove)\nusing this:\n  p permutes B\n  \\<forall>x\\<in>A. f' x = p (f x)\n\ngoal (1 subgoal):\n 1. bij_betw (p \\<circ> f) A B", "using bij_betw_comp_iff f permutes_imp_bij"], ["proof (prove)\nusing this:\n  p permutes B\n  \\<forall>x\\<in>A. f' x = p (f x)\n  bij_betw ?f ?A ?A' \\<Longrightarrow>\n  bij_betw ?f' ?A' ?A'' = bij_betw (?f' \\<circ> ?f) ?A ?A''\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n  ?p permutes ?S \\<Longrightarrow> bij_betw ?p ?S ?S\n\ngoal (1 subgoal):\n 1. bij_betw (p \\<circ> f) A B", "by fastforce"], ["proof (state)\nthis:\n  bij_betw (p \\<circ> f) A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> range_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "from this"], ["proof (chain)\npicking this:\n  bij_betw (p \\<circ> f) A B", "have \"bij_betw f' A B\""], ["proof (prove)\nusing this:\n  bij_betw (p \\<circ> f) A B\n\ngoal (1 subgoal):\n 1. bij_betw f' A B", "using \\<open>\\<forall>x\\<in>A. f' x = p (f x)\\<close>"], ["proof (prove)\nusing this:\n  bij_betw (p \\<circ> f) A B\n  \\<forall>x\\<in>A. f' x = p (f x)\n\ngoal (1 subgoal):\n 1. bij_betw f' A B", "by (metis (mono_tags, lifting) bij_betw_cong comp_apply)"], ["proof (state)\nthis:\n  bij_betw f' A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> range_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "moreover"], ["proof (state)\nthis:\n  bij_betw f' A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> range_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "have \"f' \\<in> A \\<rightarrow>\\<^sub>E B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f' \\<in> A \\<rightarrow>\\<^sub>E B", "using \\<open>f' \\<in> range_permutation A B `` {f}\\<close>"], ["proof (prove)\nusing this:\n  f' \\<in> range_permutation A B `` {f}\n\ngoal (1 subgoal):\n 1. f' \\<in> A \\<rightarrow>\\<^sub>E B", "unfolding range_permutation_def"], ["proof (prove)\nusing this:\n  f' \\<in> {(f, f').\n            (f, f')\n            \\<in> (A \\<rightarrow>\\<^sub>E B) \\<times>\n                  (A \\<rightarrow>\\<^sub>E B) \\<and>\n            (\\<exists>p.\n                p permutes B \\<and> (\\<forall>x\\<in>A. f x = p (f' x)))} ``\n           {f}\n\ngoal (1 subgoal):\n 1. f' \\<in> A \\<rightarrow>\\<^sub>E B", "by auto"], ["proof (state)\nthis:\n  f' \\<in> A \\<rightarrow>\\<^sub>E B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> range_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "ultimately"], ["proof (chain)\npicking this:\n  bij_betw f' A B\n  f' \\<in> A \\<rightarrow>\\<^sub>E B", "show \"f' \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\""], ["proof (prove)\nusing this:\n  bij_betw f' A B\n  f' \\<in> A \\<rightarrow>\\<^sub>E B\n\ngoal (1 subgoal):\n 1. f' \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "by simp"], ["proof (state)\nthis:\n  f' \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  range_permutation A B `` {f}\n  \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} =\n  range_permutation A B `` {f}\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          range_permutation A B", "ultimately"], ["proof (chain)\npicking this:\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} =\n  range_permutation A B `` {f}", "show ?thesis"], ["proof (prove)\nusing this:\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} =\n  range_permutation A B `` {f}\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          range_permutation A B", "by (simp add: quotientI)"], ["proof (state)\nthis:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n  \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n        range_permutation A B\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma bij_betw_quotient_range_permutation_eq:\n  assumes \"finite A\" \"finite B\"\n  assumes \"card A = card B\"\n  shows \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // range_permutation A B = {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n    range_permutation A B =\n    {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n    range_permutation A B\n    \\<subseteq> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n 2. {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n    \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n                range_permutation A B", "show \"{{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}} \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // range_permutation A B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n    \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n                range_permutation A B", "by (simp add: bijections_in_range_permutation[OF assms])"], ["proof (state)\nthis:\n  {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n  \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n              range_permutation A B\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n    range_permutation A B\n    \\<subseteq> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n    range_permutation A B\n    \\<subseteq> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "show \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // range_permutation A B \\<subseteq> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n    range_permutation A B\n    \\<subseteq> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n               range_permutation A B \\<Longrightarrow>\n       x \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "fix F"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n               range_permutation A B \\<Longrightarrow>\n       x \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "assume F_in: \"F \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // range_permutation A B\""], ["proof (state)\nthis:\n  F \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          range_permutation A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n               range_permutation A B \\<Longrightarrow>\n       x \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "have \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // range_permutation A B = {F \\<in> ((A \\<rightarrow>\\<^sub>E B) // range_permutation A B). univ (\\<lambda>f. bij_betw f A B) F}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n    range_permutation A B =\n    {F \\<in> (A \\<rightarrow>\\<^sub>E B) // range_permutation A B.\n     univ (\\<lambda>f. bij_betw f A B) F}", "using equiv_range_permutation[of A B] bij_betw_respects_range_permutation[of A B]"], ["proof (prove)\nusing this:\n  equiv (A \\<rightarrow>\\<^sub>E B) (range_permutation A B)\n  (\\<lambda>f. bij_betw f A B) respects range_permutation A B\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n    range_permutation A B =\n    {F \\<in> (A \\<rightarrow>\\<^sub>E B) // range_permutation A B.\n     univ (\\<lambda>f. bij_betw f A B) F}", "by (simp only: univ_preserves_predicate)"], ["proof (state)\nthis:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n  range_permutation A B =\n  {F \\<in> (A \\<rightarrow>\\<^sub>E B) // range_permutation A B.\n   univ (\\<lambda>f. bij_betw f A B) F}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n               range_permutation A B \\<Longrightarrow>\n       x \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "from this F_in"], ["proof (chain)\npicking this:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n  range_permutation A B =\n  {F \\<in> (A \\<rightarrow>\\<^sub>E B) // range_permutation A B.\n   univ (\\<lambda>f. bij_betw f A B) F}\n  F \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          range_permutation A B", "have \"F \\<in> (A \\<rightarrow>\\<^sub>E B) // range_permutation A B\"\n      and \"univ (\\<lambda>f. bij_betw f A B) F\""], ["proof (prove)\nusing this:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n  range_permutation A B =\n  {F \\<in> (A \\<rightarrow>\\<^sub>E B) // range_permutation A B.\n   univ (\\<lambda>f. bij_betw f A B) F}\n  F \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          range_permutation A B\n\ngoal (1 subgoal):\n 1. F \\<in> (A \\<rightarrow>\\<^sub>E B) // range_permutation A B &&&\n    univ (\\<lambda>f. bij_betw f A B) F", "by blast+"], ["proof (state)\nthis:\n  F \\<in> (A \\<rightarrow>\\<^sub>E B) // range_permutation A B\n  univ (\\<lambda>f. bij_betw f A B) F\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n               range_permutation A B \\<Longrightarrow>\n       x \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "have \"F = {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. F = {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. F \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n 2. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F", "have \"\\<forall>f \\<in> F. f \\<in> A \\<rightarrow>\\<^sub>E B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. f \\<in> A \\<rightarrow>\\<^sub>E B", "using \\<open>F \\<in> (A \\<rightarrow>\\<^sub>E B) // range_permutation A B\\<close>"], ["proof (prove)\nusing this:\n  F \\<in> (A \\<rightarrow>\\<^sub>E B) // range_permutation A B\n\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. f \\<in> A \\<rightarrow>\\<^sub>E B", "by (metis ImageE equiv_class_eq_iff equiv_range_permutation quotientE)"], ["proof (state)\nthis:\n  \\<forall>f\\<in>F. f \\<in> A \\<rightarrow>\\<^sub>E B\n\ngoal (2 subgoals):\n 1. F \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n 2. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F", "moreover"], ["proof (state)\nthis:\n  \\<forall>f\\<in>F. f \\<in> A \\<rightarrow>\\<^sub>E B\n\ngoal (2 subgoals):\n 1. F \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n 2. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F", "have \"\\<forall>f \\<in> F. bij_betw f A B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. bij_betw f A B", "using univ_predicate_impl_forall[OF equiv_range_permutation bij_betw_respects_range_permutation]"], ["proof (prove)\nusing this:\n  \\<lbrakk>?X \\<in> (?A1 \\<rightarrow>\\<^sub>E ?B1) //\n                    range_permutation ?A1 ?B1;\n   univ (\\<lambda>f. bij_betw f ?A1 ?B1) ?X\\<rbrakk>\n  \\<Longrightarrow> \\<forall>x\\<in>?X. bij_betw x ?A1 ?B1\n\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. bij_betw f A B", "using \\<open>F \\<in> (A \\<rightarrow>\\<^sub>E B) // range_permutation A B\\<close> \\<open>univ (\\<lambda>f. bij_betw f A B) F\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>?X \\<in> (?A1 \\<rightarrow>\\<^sub>E ?B1) //\n                    range_permutation ?A1 ?B1;\n   univ (\\<lambda>f. bij_betw f ?A1 ?B1) ?X\\<rbrakk>\n  \\<Longrightarrow> \\<forall>x\\<in>?X. bij_betw x ?A1 ?B1\n  F \\<in> (A \\<rightarrow>\\<^sub>E B) // range_permutation A B\n  univ (\\<lambda>f. bij_betw f A B) F\n\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. bij_betw f A B", "by auto"], ["proof (state)\nthis:\n  \\<forall>f\\<in>F. bij_betw f A B\n\ngoal (2 subgoals):\n 1. F \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n 2. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>f\\<in>F. f \\<in> A \\<rightarrow>\\<^sub>E B\n  \\<forall>f\\<in>F. bij_betw f A B", "show \"F \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\""], ["proof (prove)\nusing this:\n  \\<forall>f\\<in>F. f \\<in> A \\<rightarrow>\\<^sub>E B\n  \\<forall>f\\<in>F. bij_betw f A B\n\ngoal (1 subgoal):\n 1. F \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "by auto"], ["proof (state)\nthis:\n  F \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F", "show \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "fix f'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "assume \"f' \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\""], ["proof (state)\nthis:\n  f' \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "from this"], ["proof (chain)\npicking this:\n  f' \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "have \"f' \\<in> A \\<rightarrow>\\<^sub>E B\" \"bij_betw f' A B\""], ["proof (prove)\nusing this:\n  f' \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. f' \\<in> A \\<rightarrow>\\<^sub>E B &&& bij_betw f' A B", "by auto"], ["proof (state)\nthis:\n  f' \\<in> A \\<rightarrow>\\<^sub>E B\n  bij_betw f' A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "obtain f where \"f \\<in> A \\<rightarrow>\\<^sub>E B\" and \"F = range_permutation A B `` {f}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>f \\<in> A \\<rightarrow>\\<^sub>E B;\n         F = range_permutation A B `` {f}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>F \\<in> (A \\<rightarrow>\\<^sub>E B) // range_permutation A B\\<close>"], ["proof (prove)\nusing this:\n  F \\<in> (A \\<rightarrow>\\<^sub>E B) // range_permutation A B\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>f \\<in> A \\<rightarrow>\\<^sub>E B;\n         F = range_permutation A B `` {f}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto elim: quotientE)"], ["proof (state)\nthis:\n  f \\<in> A \\<rightarrow>\\<^sub>E B\n  F = range_permutation A B `` {f}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "have \"bij_betw f A B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bij_betw f A B", "using univ_commute'[OF equiv_range_permutation bij_betw_respects_range_permutation]"], ["proof (prove)\nusing this:\n  ?x \\<in> ?A1 \\<rightarrow>\\<^sub>E ?B1 \\<Longrightarrow>\n  univ (\\<lambda>f. bij_betw f ?A1 ?B1)\n   (range_permutation ?A1 ?B1 `` {?x}) =\n  bij_betw ?x ?A1 ?B1\n\ngoal (1 subgoal):\n 1. bij_betw f A B", "using \\<open>f \\<in> A \\<rightarrow>\\<^sub>E B\\<close> \\<open>F = range_permutation A B `` {f}\\<close> \\<open>univ (\\<lambda>f. bij_betw f A B) F\\<close>"], ["proof (prove)\nusing this:\n  ?x \\<in> ?A1 \\<rightarrow>\\<^sub>E ?B1 \\<Longrightarrow>\n  univ (\\<lambda>f. bij_betw f ?A1 ?B1)\n   (range_permutation ?A1 ?B1 `` {?x}) =\n  bij_betw ?x ?A1 ?B1\n  f \\<in> A \\<rightarrow>\\<^sub>E B\n  F = range_permutation A B `` {f}\n  univ (\\<lambda>f. bij_betw f A B) F\n\ngoal (1 subgoal):\n 1. bij_betw f A B", "by auto"], ["proof (state)\nthis:\n  bij_betw f A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "obtain p where \"p permutes B\" \"\\<forall>x\\<in>A. f x = p (f' x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>p.\n        \\<lbrakk>p permutes B; \\<forall>x\\<in>A. f x = p (f' x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using obtain_range_permutation_for_two_bijections"], ["proof (prove)\nusing this:\n  \\<lbrakk>bij_betw ?f ?A ?B; bij_betw ?f' ?A ?B;\n   \\<And>p.\n      \\<lbrakk>p permutes ?B; \\<forall>a\\<in>?A. ?f a = p (?f' a)\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>p.\n        \\<lbrakk>p permutes B; \\<forall>x\\<in>A. f x = p (f' x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>bij_betw f A B\\<close> \\<open>bij_betw f' A B\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>bij_betw ?f ?A ?B; bij_betw ?f' ?A ?B;\n   \\<And>p.\n      \\<lbrakk>p permutes ?B; \\<forall>a\\<in>?A. ?f a = p (?f' a)\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  bij_betw f A B\n  bij_betw f' A B\n\ngoal (1 subgoal):\n 1. (\\<And>p.\n        \\<lbrakk>p permutes B; \\<forall>x\\<in>A. f x = p (f' x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  p permutes B\n  \\<forall>x\\<in>A. f x = p (f' x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "from this \\<open>f \\<in> A \\<rightarrow>\\<^sub>E B\\<close> \\<open>f' \\<in> A \\<rightarrow>\\<^sub>E B\\<close>"], ["proof (chain)\npicking this:\n  p permutes B\n  \\<forall>x\\<in>A. f x = p (f' x)\n  f \\<in> A \\<rightarrow>\\<^sub>E B\n  f' \\<in> A \\<rightarrow>\\<^sub>E B", "have \"(f, f') \\<in> range_permutation A B\""], ["proof (prove)\nusing this:\n  p permutes B\n  \\<forall>x\\<in>A. f x = p (f' x)\n  f \\<in> A \\<rightarrow>\\<^sub>E B\n  f' \\<in> A \\<rightarrow>\\<^sub>E B\n\ngoal (1 subgoal):\n 1. (f, f') \\<in> range_permutation A B", "unfolding range_permutation_def"], ["proof (prove)\nusing this:\n  p permutes B\n  \\<forall>x\\<in>A. f x = p (f' x)\n  f \\<in> A \\<rightarrow>\\<^sub>E B\n  f' \\<in> A \\<rightarrow>\\<^sub>E B\n\ngoal (1 subgoal):\n 1. (f, f')\n    \\<in> {(f, f').\n           (f, f')\n           \\<in> (A \\<rightarrow>\\<^sub>E B) \\<times>\n                 (A \\<rightarrow>\\<^sub>E B) \\<and>\n           (\\<exists>p.\n               p permutes B \\<and> (\\<forall>x\\<in>A. f x = p (f' x)))}", "by auto"], ["proof (state)\nthis:\n  (f, f') \\<in> range_permutation A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "from this"], ["proof (chain)\npicking this:\n  (f, f') \\<in> range_permutation A B", "show \"f' \\<in> F\""], ["proof (prove)\nusing this:\n  (f, f') \\<in> range_permutation A B\n\ngoal (1 subgoal):\n 1. f' \\<in> F", "using \\<open>F = range_permutation A B `` {f}\\<close>"], ["proof (prove)\nusing this:\n  (f, f') \\<in> range_permutation A B\n  F = range_permutation A B `` {f}\n\ngoal (1 subgoal):\n 1. f' \\<in> F", "by simp"], ["proof (state)\nthis:\n  f' \\<in> F\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  F = {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n               range_permutation A B \\<Longrightarrow>\n       x \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "from this"], ["proof (chain)\npicking this:\n  F = {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "show \"F \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\""], ["proof (prove)\nusing this:\n  F = {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. F \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "by simp"], ["proof (state)\nthis:\n  F \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n  range_permutation A B\n  \\<subseteq> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n\ngoal:\nNo subgoals!", "qed"], ["", "subsubsection \\<open>Cardinality\\<close>"], ["", "lemma card_bijections_range_permutation_eq_1:\n  assumes \"finite A\" \"finite B\"\n  assumes \"card A = card B\"\n  shows \"card ({f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // range_permutation A B) = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card\n     ({f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n      range_permutation A B) =\n    1", "using bij_betw_quotient_range_permutation_eq[OF assms]"], ["proof (prove)\nusing this:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n  range_permutation A B =\n  {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n\ngoal (1 subgoal):\n 1. card\n     ({f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n      range_permutation A B) =\n    1", "by auto"], ["", "subsection \\<open>Bijections from A to B up to a Permutation on A and B\\<close>"], ["", "subsubsection \\<open>Equivalence Class\\<close>"], ["", "lemma bijections_in_domain_and_range_permutation:\n  assumes \"finite A\" \"finite B\"\n  assumes \"card A = card B\"\n  shows \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // domain_and_range_permutation A B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          domain_and_range_permutation A B", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          domain_and_range_permutation A B", "from assms"], ["proof (chain)\npicking this:\n  finite A\n  finite B\n  card A = card B", "obtain f where f: \"f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\""], ["proof (prove)\nusing this:\n  finite A\n  finite B\n  card A = card B\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                 bij_betw f A B} \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis finite_same_card_bij_on_ext_funcset mem_Collect_eq)"], ["proof (state)\nthis:\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          domain_and_range_permutation A B", "moreover"], ["proof (state)\nthis:\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          domain_and_range_permutation A B", "have proj_f: \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} = domain_and_range_permutation A B `` {f}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} =\n    domain_and_range_permutation A B `` {f}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<subseteq> domain_and_range_permutation A B `` {f}\n 2. domain_and_range_permutation A B `` {f}\n    \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "have \"id permutes A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. id permutes A", "by (simp add: permutes_id)"], ["proof (state)\nthis:\n  id permutes A\n\ngoal (2 subgoals):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<subseteq> domain_and_range_permutation A B `` {f}\n 2. domain_and_range_permutation A B `` {f}\n    \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "from f this"], ["proof (chain)\npicking this:\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n  id permutes A", "show \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> domain_and_range_permutation A B `` {f}\""], ["proof (prove)\nusing this:\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n  id permutes A\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<subseteq> domain_and_range_permutation A B `` {f}", "unfolding domain_and_range_permutation_def"], ["proof (prove)\nusing this:\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n  id permutes A\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<subseteq> {(f, f').\n                 (f, f')\n                 \\<in> (A \\<rightarrow>\\<^sub>E B) \\<times>\n                       (A \\<rightarrow>\\<^sub>E B) \\<and>\n                 (\\<exists>p\\<^sub>A p\\<^sub>B.\n                     p\\<^sub>A permutes A \\<and>\n                     p\\<^sub>B permutes B \\<and>\n                     (\\<forall>x\\<in>A.\n                         f x = p\\<^sub>B (f' (p\\<^sub>A x))))} ``\n                {f}", "by (fastforce elim: obtain_range_permutation_for_two_bijections)"], ["proof (state)\nthis:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n  \\<subseteq> domain_and_range_permutation A B `` {f}\n\ngoal (1 subgoal):\n 1. domain_and_range_permutation A B `` {f}\n    \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. domain_and_range_permutation A B `` {f}\n    \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "show \"domain_and_range_permutation A B `` {f} \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. domain_and_range_permutation A B `` {f}\n    \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> domain_and_range_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "fix f'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> domain_and_range_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "assume \"f' \\<in> domain_and_range_permutation A B `` {f}\""], ["proof (state)\nthis:\n  f' \\<in> domain_and_range_permutation A B `` {f}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> domain_and_range_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "have \"(f', f) \\<in> domain_and_range_permutation A B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f', f) \\<in> domain_and_range_permutation A B", "using \\<open>f' \\<in> domain_and_range_permutation A B `` {f}\\<close> equiv_domain_and_range_permutation[of A B]"], ["proof (prove)\nusing this:\n  f' \\<in> domain_and_range_permutation A B `` {f}\n  equiv (A \\<rightarrow>\\<^sub>E B) (domain_and_range_permutation A B)\n\ngoal (1 subgoal):\n 1. (f', f) \\<in> domain_and_range_permutation A B", "by (simp add: equiv_class_eq_iff)"], ["proof (state)\nthis:\n  (f', f) \\<in> domain_and_range_permutation A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> domain_and_range_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "from this"], ["proof (chain)\npicking this:\n  (f', f) \\<in> domain_and_range_permutation A B", "obtain p\\<^sub>A p\\<^sub>B where \"p\\<^sub>A permutes A\" \"p\\<^sub>B permutes B\"\n        and \"\\<forall>x\\<in>A. f' x = p\\<^sub>B (f (p\\<^sub>A x))\""], ["proof (prove)\nusing this:\n  (f', f) \\<in> domain_and_range_permutation A B\n\ngoal (1 subgoal):\n 1. (\\<And>p\\<^sub>A p\\<^sub>B.\n        \\<lbrakk>p\\<^sub>A permutes A; p\\<^sub>B permutes B;\n         \\<forall>x\\<in>A. f' x = p\\<^sub>B (f (p\\<^sub>A x))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding domain_and_range_permutation_def"], ["proof (prove)\nusing this:\n  (f', f)\n  \\<in> {(f, f').\n         (f, f')\n         \\<in> (A \\<rightarrow>\\<^sub>E B) \\<times>\n               (A \\<rightarrow>\\<^sub>E B) \\<and>\n         (\\<exists>p\\<^sub>A p\\<^sub>B.\n             p\\<^sub>A permutes A \\<and>\n             p\\<^sub>B permutes B \\<and>\n             (\\<forall>x\\<in>A. f x = p\\<^sub>B (f' (p\\<^sub>A x))))}\n\ngoal (1 subgoal):\n 1. (\\<And>p\\<^sub>A p\\<^sub>B.\n        \\<lbrakk>p\\<^sub>A permutes A; p\\<^sub>B permutes B;\n         \\<forall>x\\<in>A. f' x = p\\<^sub>B (f (p\\<^sub>A x))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  p\\<^sub>A permutes A\n  p\\<^sub>B permutes B\n  \\<forall>x\\<in>A. f' x = p\\<^sub>B (f (p\\<^sub>A x))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> domain_and_range_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "from this"], ["proof (chain)\npicking this:\n  p\\<^sub>A permutes A\n  p\\<^sub>B permutes B\n  \\<forall>x\\<in>A. f' x = p\\<^sub>B (f (p\\<^sub>A x))", "have \"bij_betw (p\\<^sub>B \\<circ> f \\<circ> p\\<^sub>A) A B\""], ["proof (prove)\nusing this:\n  p\\<^sub>A permutes A\n  p\\<^sub>B permutes B\n  \\<forall>x\\<in>A. f' x = p\\<^sub>B (f (p\\<^sub>A x))\n\ngoal (1 subgoal):\n 1. bij_betw (p\\<^sub>B \\<circ> f \\<circ> p\\<^sub>A) A B", "using bij_betw_comp_iff f permutes_imp_bij"], ["proof (prove)\nusing this:\n  p\\<^sub>A permutes A\n  p\\<^sub>B permutes B\n  \\<forall>x\\<in>A. f' x = p\\<^sub>B (f (p\\<^sub>A x))\n  bij_betw ?f ?A ?A' \\<Longrightarrow>\n  bij_betw ?f' ?A' ?A'' = bij_betw (?f' \\<circ> ?f) ?A ?A''\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n  ?p permutes ?S \\<Longrightarrow> bij_betw ?p ?S ?S\n\ngoal (1 subgoal):\n 1. bij_betw (p\\<^sub>B \\<circ> f \\<circ> p\\<^sub>A) A B", "by (metis (no_types, lifting) mem_Collect_eq)"], ["proof (state)\nthis:\n  bij_betw (p\\<^sub>B \\<circ> f \\<circ> p\\<^sub>A) A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> domain_and_range_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "from this"], ["proof (chain)\npicking this:\n  bij_betw (p\\<^sub>B \\<circ> f \\<circ> p\\<^sub>A) A B", "have \"bij_betw f' A B\""], ["proof (prove)\nusing this:\n  bij_betw (p\\<^sub>B \\<circ> f \\<circ> p\\<^sub>A) A B\n\ngoal (1 subgoal):\n 1. bij_betw f' A B", "using \\<open>\\<forall>x\\<in>A. f' x = p\\<^sub>B (f (p\\<^sub>A x))\\<close>"], ["proof (prove)\nusing this:\n  bij_betw (p\\<^sub>B \\<circ> f \\<circ> p\\<^sub>A) A B\n  \\<forall>x\\<in>A. f' x = p\\<^sub>B (f (p\\<^sub>A x))\n\ngoal (1 subgoal):\n 1. bij_betw f' A B", "by (auto intro: bij_betw_congI)"], ["proof (state)\nthis:\n  bij_betw f' A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> domain_and_range_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "moreover"], ["proof (state)\nthis:\n  bij_betw f' A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> domain_and_range_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "have \"f' \\<in> A \\<rightarrow>\\<^sub>E B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f' \\<in> A \\<rightarrow>\\<^sub>E B", "using \\<open>f' \\<in> domain_and_range_permutation A B `` {f}\\<close>"], ["proof (prove)\nusing this:\n  f' \\<in> domain_and_range_permutation A B `` {f}\n\ngoal (1 subgoal):\n 1. f' \\<in> A \\<rightarrow>\\<^sub>E B", "unfolding domain_and_range_permutation_def"], ["proof (prove)\nusing this:\n  f' \\<in> {(f, f').\n            (f, f')\n            \\<in> (A \\<rightarrow>\\<^sub>E B) \\<times>\n                  (A \\<rightarrow>\\<^sub>E B) \\<and>\n            (\\<exists>p\\<^sub>A p\\<^sub>B.\n                p\\<^sub>A permutes A \\<and>\n                p\\<^sub>B permutes B \\<and>\n                (\\<forall>x\\<in>A. f x = p\\<^sub>B (f' (p\\<^sub>A x))))} ``\n           {f}\n\ngoal (1 subgoal):\n 1. f' \\<in> A \\<rightarrow>\\<^sub>E B", "by auto"], ["proof (state)\nthis:\n  f' \\<in> A \\<rightarrow>\\<^sub>E B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> domain_and_range_permutation A B `` {f} \\<Longrightarrow>\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "ultimately"], ["proof (chain)\npicking this:\n  bij_betw f' A B\n  f' \\<in> A \\<rightarrow>\\<^sub>E B", "show \"f' \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\""], ["proof (prove)\nusing this:\n  bij_betw f' A B\n  f' \\<in> A \\<rightarrow>\\<^sub>E B\n\ngoal (1 subgoal):\n 1. f' \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "by simp"], ["proof (state)\nthis:\n  f' \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  domain_and_range_permutation A B `` {f}\n  \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} =\n  domain_and_range_permutation A B `` {f}\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          domain_and_range_permutation A B", "ultimately"], ["proof (chain)\npicking this:\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} =\n  domain_and_range_permutation A B `` {f}", "show ?thesis"], ["proof (prove)\nusing this:\n  f \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} =\n  domain_and_range_permutation A B `` {f}\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n    \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          domain_and_range_permutation A B", "by (simp add: quotientI)"], ["proof (state)\nthis:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n  \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n        domain_and_range_permutation A B\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma bij_betw_quotient_domain_and_range_permutation_eq:\n  assumes \"finite A\" \"finite B\"\n  assumes \"card A = card B\"\n  shows \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // domain_and_range_permutation A B = {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n    domain_and_range_permutation A B =\n    {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n    domain_and_range_permutation A B\n    \\<subseteq> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n 2. {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n    \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n                domain_and_range_permutation A B", "show \"{{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n    \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // domain_and_range_permutation A B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n    \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n                domain_and_range_permutation A B", "using bijections_in_domain_and_range_permutation[OF assms]"], ["proof (prove)\nusing this:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n  \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n        domain_and_range_permutation A B\n\ngoal (1 subgoal):\n 1. {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n    \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n                domain_and_range_permutation A B", "by auto"], ["proof (state)\nthis:\n  {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n  \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n              domain_and_range_permutation A B\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n    domain_and_range_permutation A B\n    \\<subseteq> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n    domain_and_range_permutation A B\n    \\<subseteq> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "show \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // domain_and_range_permutation A B \\<subseteq> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n    domain_and_range_permutation A B\n    \\<subseteq> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n               domain_and_range_permutation A B \\<Longrightarrow>\n       x \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "fix F"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n               domain_and_range_permutation A B \\<Longrightarrow>\n       x \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "assume F_in: \"F \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // domain_and_range_permutation A B\""], ["proof (state)\nthis:\n  F \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          domain_and_range_permutation A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n               domain_and_range_permutation A B \\<Longrightarrow>\n       x \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "have \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // domain_and_range_permutation A B = {F \\<in> ((A \\<rightarrow>\\<^sub>E B) // domain_and_range_permutation A B). univ (\\<lambda>f. bij_betw f A B) F}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n    domain_and_range_permutation A B =\n    {F \\<in> (A \\<rightarrow>\\<^sub>E B) //\n             domain_and_range_permutation A B.\n     univ (\\<lambda>f. bij_betw f A B) F}", "using equiv_domain_and_range_permutation[of A B] bij_betw_respects_domain_and_range_permutation[of A B]"], ["proof (prove)\nusing this:\n  equiv (A \\<rightarrow>\\<^sub>E B) (domain_and_range_permutation A B)\n  (\\<lambda>f. bij_betw f A B) respects domain_and_range_permutation A B\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n    domain_and_range_permutation A B =\n    {F \\<in> (A \\<rightarrow>\\<^sub>E B) //\n             domain_and_range_permutation A B.\n     univ (\\<lambda>f. bij_betw f A B) F}", "by (simp only: univ_preserves_predicate)"], ["proof (state)\nthis:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n  domain_and_range_permutation A B =\n  {F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_and_range_permutation A B.\n   univ (\\<lambda>f. bij_betw f A B) F}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n               domain_and_range_permutation A B \\<Longrightarrow>\n       x \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "from F_in this"], ["proof (chain)\npicking this:\n  F \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          domain_and_range_permutation A B\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n  domain_and_range_permutation A B =\n  {F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_and_range_permutation A B.\n   univ (\\<lambda>f. bij_betw f A B) F}", "have \"F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_and_range_permutation A B\"\n      and \"univ (\\<lambda>f. bij_betw f A B) F\""], ["proof (prove)\nusing this:\n  F \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n          domain_and_range_permutation A B\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n  domain_and_range_permutation A B =\n  {F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_and_range_permutation A B.\n   univ (\\<lambda>f. bij_betw f A B) F}\n\ngoal (1 subgoal):\n 1. F \\<in> (A \\<rightarrow>\\<^sub>E B) //\n            domain_and_range_permutation A B &&&\n    univ (\\<lambda>f. bij_betw f A B) F", "by blast+"], ["proof (state)\nthis:\n  F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_and_range_permutation A B\n  univ (\\<lambda>f. bij_betw f A B) F\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n               domain_and_range_permutation A B \\<Longrightarrow>\n       x \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "have \"F = {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. F = {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. F \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n 2. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F", "have \"\\<forall>f \\<in> F. f \\<in> A \\<rightarrow>\\<^sub>E B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. f \\<in> A \\<rightarrow>\\<^sub>E B", "using \\<open>F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_and_range_permutation A B\\<close>"], ["proof (prove)\nusing this:\n  F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_and_range_permutation A B\n\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. f \\<in> A \\<rightarrow>\\<^sub>E B", "by (metis ImageE equiv_class_eq_iff equiv_domain_and_range_permutation quotientE)"], ["proof (state)\nthis:\n  \\<forall>f\\<in>F. f \\<in> A \\<rightarrow>\\<^sub>E B\n\ngoal (2 subgoals):\n 1. F \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n 2. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F", "moreover"], ["proof (state)\nthis:\n  \\<forall>f\\<in>F. f \\<in> A \\<rightarrow>\\<^sub>E B\n\ngoal (2 subgoals):\n 1. F \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n 2. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F", "have \"\\<forall>f \\<in> F. bij_betw f A B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. bij_betw f A B", "using univ_predicate_impl_forall[OF equiv_domain_and_range_permutation bij_betw_respects_domain_and_range_permutation]"], ["proof (prove)\nusing this:\n  \\<lbrakk>?X \\<in> (?A1 \\<rightarrow>\\<^sub>E ?B1) //\n                    domain_and_range_permutation ?A1 ?B1;\n   univ (\\<lambda>f. bij_betw f ?A1 ?B1) ?X\\<rbrakk>\n  \\<Longrightarrow> \\<forall>x\\<in>?X. bij_betw x ?A1 ?B1\n\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. bij_betw f A B", "using \\<open>F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_and_range_permutation A B\\<close> \\<open>univ (\\<lambda>f. bij_betw f A B) F\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>?X \\<in> (?A1 \\<rightarrow>\\<^sub>E ?B1) //\n                    domain_and_range_permutation ?A1 ?B1;\n   univ (\\<lambda>f. bij_betw f ?A1 ?B1) ?X\\<rbrakk>\n  \\<Longrightarrow> \\<forall>x\\<in>?X. bij_betw x ?A1 ?B1\n  F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_and_range_permutation A B\n  univ (\\<lambda>f. bij_betw f A B) F\n\ngoal (1 subgoal):\n 1. \\<forall>f\\<in>F. bij_betw f A B", "by auto"], ["proof (state)\nthis:\n  \\<forall>f\\<in>F. bij_betw f A B\n\ngoal (2 subgoals):\n 1. F \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n 2. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>f\\<in>F. f \\<in> A \\<rightarrow>\\<^sub>E B\n  \\<forall>f\\<in>F. bij_betw f A B", "show \"F \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\""], ["proof (prove)\nusing this:\n  \\<forall>f\\<in>F. f \\<in> A \\<rightarrow>\\<^sub>E B\n  \\<forall>f\\<in>F. bij_betw f A B\n\ngoal (1 subgoal):\n 1. F \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "by auto"], ["proof (state)\nthis:\n  F \\<subseteq> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F", "show \"{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "fix f'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "assume \"f' \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\""], ["proof (state)\nthis:\n  f' \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "from this"], ["proof (chain)\npicking this:\n  f' \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "have \"f' \\<in> A \\<rightarrow>\\<^sub>E B\" \"bij_betw f' A B\""], ["proof (prove)\nusing this:\n  f' \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. f' \\<in> A \\<rightarrow>\\<^sub>E B &&& bij_betw f' A B", "by auto"], ["proof (state)\nthis:\n  f' \\<in> A \\<rightarrow>\\<^sub>E B\n  bij_betw f' A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "obtain f where \"f \\<in> A \\<rightarrow>\\<^sub>E B\" and \"F = domain_and_range_permutation A B `` {f}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>f \\<in> A \\<rightarrow>\\<^sub>E B;\n         F = domain_and_range_permutation A B `` {f}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_and_range_permutation A B\\<close>"], ["proof (prove)\nusing this:\n  F \\<in> (A \\<rightarrow>\\<^sub>E B) // domain_and_range_permutation A B\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>f \\<in> A \\<rightarrow>\\<^sub>E B;\n         F = domain_and_range_permutation A B `` {f}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto elim: quotientE)"], ["proof (state)\nthis:\n  f \\<in> A \\<rightarrow>\\<^sub>E B\n  F = domain_and_range_permutation A B `` {f}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "have \"bij_betw f A B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bij_betw f A B", "using univ_commute'[OF equiv_domain_and_range_permutation bij_betw_respects_domain_and_range_permutation]"], ["proof (prove)\nusing this:\n  ?x \\<in> ?A1 \\<rightarrow>\\<^sub>E ?B1 \\<Longrightarrow>\n  univ (\\<lambda>f. bij_betw f ?A1 ?B1)\n   (domain_and_range_permutation ?A1 ?B1 `` {?x}) =\n  bij_betw ?x ?A1 ?B1\n\ngoal (1 subgoal):\n 1. bij_betw f A B", "using \\<open>f \\<in> A \\<rightarrow>\\<^sub>E B\\<close> \\<open>F = domain_and_range_permutation A B `` {f}\\<close> \\<open>univ (\\<lambda>f. bij_betw f A B) F\\<close>"], ["proof (prove)\nusing this:\n  ?x \\<in> ?A1 \\<rightarrow>\\<^sub>E ?B1 \\<Longrightarrow>\n  univ (\\<lambda>f. bij_betw f ?A1 ?B1)\n   (domain_and_range_permutation ?A1 ?B1 `` {?x}) =\n  bij_betw ?x ?A1 ?B1\n  f \\<in> A \\<rightarrow>\\<^sub>E B\n  F = domain_and_range_permutation A B `` {f}\n  univ (\\<lambda>f. bij_betw f A B) F\n\ngoal (1 subgoal):\n 1. bij_betw f A B", "by auto"], ["proof (state)\nthis:\n  bij_betw f A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "obtain p where \"p permutes A\" \"\\<forall>x\\<in>A. f x = f' (p x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>p.\n        \\<lbrakk>p permutes A; \\<forall>x\\<in>A. f x = f' (p x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using obtain_domain_permutation_for_two_bijections"], ["proof (prove)\nusing this:\n  \\<lbrakk>bij_betw ?f ?A ?B; bij_betw ?f' ?A ?B;\n   \\<And>p.\n      \\<lbrakk>p permutes ?A; \\<forall>a\\<in>?A. ?f a = ?f' (p a)\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>p.\n        \\<lbrakk>p permutes A; \\<forall>x\\<in>A. f x = f' (p x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>bij_betw f A B\\<close> \\<open>bij_betw f' A B\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>bij_betw ?f ?A ?B; bij_betw ?f' ?A ?B;\n   \\<And>p.\n      \\<lbrakk>p permutes ?A; \\<forall>a\\<in>?A. ?f a = ?f' (p a)\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  bij_betw f A B\n  bij_betw f' A B\n\ngoal (1 subgoal):\n 1. (\\<And>p.\n        \\<lbrakk>p permutes A; \\<forall>x\\<in>A. f x = f' (p x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  p permutes A\n  \\<forall>x\\<in>A. f x = f' (p x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "moreover"], ["proof (state)\nthis:\n  p permutes A\n  \\<forall>x\\<in>A. f x = f' (p x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "have \"id permutes B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. id permutes B", "by (simp add: permutes_id)"], ["proof (state)\nthis:\n  id permutes B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "moreover"], ["proof (state)\nthis:\n  id permutes B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "note \\<open>f \\<in> A \\<rightarrow>\\<^sub>E B\\<close> \\<open>f' \\<in> A \\<rightarrow>\\<^sub>E B\\<close>"], ["proof (state)\nthis:\n  f \\<in> A \\<rightarrow>\\<^sub>E B\n  f' \\<in> A \\<rightarrow>\\<^sub>E B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "ultimately"], ["proof (chain)\npicking this:\n  p permutes A\n  \\<forall>x\\<in>A. f x = f' (p x)\n  id permutes B\n  f \\<in> A \\<rightarrow>\\<^sub>E B\n  f' \\<in> A \\<rightarrow>\\<^sub>E B", "have \"(f, f') \\<in> domain_and_range_permutation A B\""], ["proof (prove)\nusing this:\n  p permutes A\n  \\<forall>x\\<in>A. f x = f' (p x)\n  id permutes B\n  f \\<in> A \\<rightarrow>\\<^sub>E B\n  f' \\<in> A \\<rightarrow>\\<^sub>E B\n\ngoal (1 subgoal):\n 1. (f, f') \\<in> domain_and_range_permutation A B", "unfolding domain_and_range_permutation_def id_def"], ["proof (prove)\nusing this:\n  p permutes A\n  \\<forall>x\\<in>A. f x = f' (p x)\n  (\\<lambda>x. x) permutes B\n  f \\<in> A \\<rightarrow>\\<^sub>E B\n  f' \\<in> A \\<rightarrow>\\<^sub>E B\n\ngoal (1 subgoal):\n 1. (f, f')\n    \\<in> {(f, f').\n           (f, f')\n           \\<in> (A \\<rightarrow>\\<^sub>E B) \\<times>\n                 (A \\<rightarrow>\\<^sub>E B) \\<and>\n           (\\<exists>p\\<^sub>A p\\<^sub>B.\n               p\\<^sub>A permutes A \\<and>\n               p\\<^sub>B permutes B \\<and>\n               (\\<forall>x\\<in>A. f x = p\\<^sub>B (f' (p\\<^sub>A x))))}", "by auto"], ["proof (state)\nthis:\n  (f, f') \\<in> domain_and_range_permutation A B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B.\n                bij_betw f A B} \\<Longrightarrow>\n       x \\<in> F", "from this"], ["proof (chain)\npicking this:\n  (f, f') \\<in> domain_and_range_permutation A B", "show \"f' \\<in> F\""], ["proof (prove)\nusing this:\n  (f, f') \\<in> domain_and_range_permutation A B\n\ngoal (1 subgoal):\n 1. f' \\<in> F", "using \\<open>F = domain_and_range_permutation A B `` {f}\\<close>"], ["proof (prove)\nusing this:\n  (f, f') \\<in> domain_and_range_permutation A B\n  F = domain_and_range_permutation A B `` {f}\n\ngoal (1 subgoal):\n 1. f' \\<in> F", "by simp"], ["proof (state)\nthis:\n  f' \\<in> F\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} \\<subseteq> F\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  F = {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n               domain_and_range_permutation A B \\<Longrightarrow>\n       x \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "from this"], ["proof (chain)\npicking this:\n  F = {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}", "show \"F \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\""], ["proof (prove)\nusing this:\n  F = {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}\n\ngoal (1 subgoal):\n 1. F \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}", "by simp"], ["proof (state)\nthis:\n  F \\<in> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n  domain_and_range_permutation A B\n  \\<subseteq> {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n\ngoal:\nNo subgoals!", "qed"], ["", "subsubsection \\<open>Cardinality\\<close>"], ["", "lemma card_bijections_domain_and_range_permutation_eq_1:\n  assumes \"finite A\" \"finite B\"\n  assumes \"card A = card B\"\n  shows \"card ({f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} // domain_and_range_permutation A B) = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card\n     ({f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n      domain_and_range_permutation A B) =\n    1", "using bij_betw_quotient_domain_and_range_permutation_eq[OF assms]"], ["proof (prove)\nusing this:\n  {f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n  domain_and_range_permutation A B =\n  {{f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B}}\n\ngoal (1 subgoal):\n 1. card\n     ({f \\<in> A \\<rightarrow>\\<^sub>E B. bij_betw f A B} //\n      domain_and_range_permutation A B) =\n    1", "by auto"], ["", "end"]]}