{"file_name": "/home/qj213/afp-2021-10-22/thys/Prime_Number_Theorem/Mertens_Theorems.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Prime_Number_Theorem", "problem_names": ["lemma exponents_le_finite:\n  assumes \"p > (1 :: nat)\" \"k > 0\"\n  shows   \"finite {i. real (p ^ (k * i + l)) \\<le> x}\"", "lemma deriv_zeta_2_bound: \"Re (deriv zeta 2) > -1\"", "lemma mertens_remainder_aux_bound:\n  fixes x :: real\n  defines \"R \\<equiv> (\\<Sum>(p,i) | prime p \\<and> i > 1 \\<and> real (p ^ i) \\<le> x. ln (real p) / p ^ i)\"\n  shows   \"R < 9 / pi\\<^sup>2\"", "theorem mertens_bound_strong:\n  fixes n :: nat assumes n: \"n > 0\"\n  shows   \"\\<MM> n - ln n \\<in> {-1 - 9 / pi\\<^sup>2<..ln 4}\"", "lemma mertens_bound_real_strong:\n  fixes x :: real assumes x: \"x \\<ge> 1\"\n  shows   \"\\<MM> x - ln x \\<in> {-1 - 9 / pi ^ 2 - ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>)) <.. ln 4}\"", "lemma mertens_bound_real':\n  fixes x :: real assumes x: \"x \\<ge> 1\"\n  shows   \"\\<MM> x - ln x \\<in> {-2<..25/18}\"", "lemma integral_one_over_x_ln_x_squared:\n  assumes a: \"(a::real) > 1\"\n  shows \"set_integrable lborel {a<..} (\\<lambda>t. 1 / (t * ln t ^ 2))\" (is ?th1)\n    and \"set_lebesgue_integral lborel {a<..} (\\<lambda>t. 1 / (t * ln t ^ 2)) = 1 / ln a\" (is ?th2)\n    and \"((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral 1 / ln a) {a<..}\" (is ?th3)", "lemma\n  assumes \"a > (1 :: real)\"\n  defines \"r \\<equiv> (\\<lambda>t. (\\<MM> t - ln t) / (t * ln t ^ 2))\"\n  shows integrable_meissel_mertens:  \"set_integrable lborel {a<..} r\"\n    and meissel_mertens_integral_le: \"norm (integral {a<..} r) \\<le> 2 / ln a\"", "lemma integrable_on_meissel_mertens:\n  assumes \"A \\<subseteq> {1..}\" \"Inf A > 1\" \"A \\<in> sets borel\"\n  shows   \"(\\<lambda>t. (\\<MM> t - ln t) / (t * ln t ^ 2)) integrable_on A\"", "lemma meissel_mertens_bounds: \"\\<bar>meissel_mertens - 1 + ln (ln 2)\\<bar> \\<le> 2 / ln 2\"", "theorem mertens_second_theorem:\n  defines \"f \\<equiv> prime_sum_upto (\\<lambda>p. 1 / p)\"\n  shows   \"\\<And>x. x \\<ge> 2 \\<Longrightarrow> \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\"\n    and   \"(\\<lambda>x. f x - ln (ln x) - meissel_mertens) \\<in> O(\\<lambda>x. 1 / ln x)\""], "translations": [["", "lemma exponents_le_finite:\n  assumes \"p > (1 :: nat)\" \"k > 0\"\n  shows   \"finite {i. real (p ^ (k * i + l)) \\<le> x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {i. real (p ^ (k * i + l)) \\<le> x}", "proof (rule finite_subset)"], ["proof (state)\ngoal (2 subgoals):\n 1. {i. real (p ^ (k * i + l)) \\<le> x} \\<subseteq> ?B\n 2. finite ?B", "show \"{i. real (p ^ (k * i + l)) \\<le> x} \\<subseteq> {..nat \\<lfloor>x\\<rfloor>}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {i. real (p ^ (k * i + l)) \\<le> x}\n    \\<subseteq> {..nat \\<lfloor>x\\<rfloor>}", "proof safe"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       real (p ^ (k * xa + l)) \\<le> x \\<Longrightarrow>\n       xa \\<le> nat \\<lfloor>x\\<rfloor>", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       real (p ^ (k * xa + l)) \\<le> x \\<Longrightarrow>\n       xa \\<le> nat \\<lfloor>x\\<rfloor>", "assume i: \"real (p ^ (k * i + l)) \\<le> x\""], ["proof (state)\nthis:\n  real (p ^ (k * i + l)) \\<le> x\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       real (p ^ (k * xa + l)) \\<le> x \\<Longrightarrow>\n       xa \\<le> nat \\<lfloor>x\\<rfloor>", "have \"i < 2 ^ i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i < 2 ^ i", "by (induction i) auto"], ["proof (state)\nthis:\n  i < 2 ^ i\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       real (p ^ (k * xa + l)) \\<le> x \\<Longrightarrow>\n       xa \\<le> nat \\<lfloor>x\\<rfloor>", "also"], ["proof (state)\nthis:\n  i < 2 ^ i\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       real (p ^ (k * xa + l)) \\<le> x \\<Longrightarrow>\n       xa \\<le> nat \\<lfloor>x\\<rfloor>", "from assms"], ["proof (chain)\npicking this:\n  1 < p\n  0 < k", "have \"i \\<le> k * i + l\""], ["proof (prove)\nusing this:\n  1 < p\n  0 < k\n\ngoal (1 subgoal):\n 1. i \\<le> k * i + l", "by (cases k) auto"], ["proof (state)\nthis:\n  i \\<le> k * i + l\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       real (p ^ (k * xa + l)) \\<le> x \\<Longrightarrow>\n       xa \\<le> nat \\<lfloor>x\\<rfloor>", "hence \"2 ^ i \\<le> (2 ^ (k * i + l) :: nat)\""], ["proof (prove)\nusing this:\n  i \\<le> k * i + l\n\ngoal (1 subgoal):\n 1. 2 ^ i \\<le> 2 ^ (k * i + l)", "using assms"], ["proof (prove)\nusing this:\n  i \\<le> k * i + l\n  1 < p\n  0 < k\n\ngoal (1 subgoal):\n 1. 2 ^ i \\<le> 2 ^ (k * i + l)", "by (intro power_increasing) auto"], ["proof (state)\nthis:\n  2 ^ i \\<le> 2 ^ (k * i + l)\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       real (p ^ (k * xa + l)) \\<le> x \\<Longrightarrow>\n       xa \\<le> nat \\<lfloor>x\\<rfloor>", "also"], ["proof (state)\nthis:\n  2 ^ i \\<le> 2 ^ (k * i + l)\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       real (p ^ (k * xa + l)) \\<le> x \\<Longrightarrow>\n       xa \\<le> nat \\<lfloor>x\\<rfloor>", "have \"\\<dots> \\<le> p ^ (k * i + l)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 ^ (k * i + l) \\<le> p ^ (k * i + l)", "using assms"], ["proof (prove)\nusing this:\n  1 < p\n  0 < k\n\ngoal (1 subgoal):\n 1. 2 ^ (k * i + l) \\<le> p ^ (k * i + l)", "by (intro power_mono) auto"], ["proof (state)\nthis:\n  2 ^ (k * i + l) \\<le> p ^ (k * i + l)\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       real (p ^ (k * xa + l)) \\<le> x \\<Longrightarrow>\n       xa \\<le> nat \\<lfloor>x\\<rfloor>", "also"], ["proof (state)\nthis:\n  2 ^ (k * i + l) \\<le> p ^ (k * i + l)\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       real (p ^ (k * xa + l)) \\<le> x \\<Longrightarrow>\n       xa \\<le> nat \\<lfloor>x\\<rfloor>", "have \"real \\<dots> \\<le> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (p ^ (k * i + l)) \\<le> x", "using i"], ["proof (prove)\nusing this:\n  real (p ^ (k * i + l)) \\<le> x\n\ngoal (1 subgoal):\n 1. real (p ^ (k * i + l)) \\<le> x", "by simp"], ["proof (state)\nthis:\n  real (p ^ (k * i + l)) \\<le> x\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       real (p ^ (k * xa + l)) \\<le> x \\<Longrightarrow>\n       xa \\<le> nat \\<lfloor>x\\<rfloor>", "finally"], ["proof (chain)\npicking this:\n  (\\<And>x y. x < y \\<Longrightarrow> real x < real y) \\<Longrightarrow>\n  real i < x", "show \"i \\<le> nat \\<lfloor>x\\<rfloor>\""], ["proof (prove)\nusing this:\n  (\\<And>x y. x < y \\<Longrightarrow> real x < real y) \\<Longrightarrow>\n  real i < x\n\ngoal (1 subgoal):\n 1. i \\<le> nat \\<lfloor>x\\<rfloor>", "by linarith"], ["proof (state)\nthis:\n  i \\<le> nat \\<lfloor>x\\<rfloor>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {i. real (p ^ (k * i + l)) \\<le> x}\n  \\<subseteq> {..nat \\<lfloor>x\\<rfloor>}\n\ngoal (1 subgoal):\n 1. finite {..nat \\<lfloor>x\\<rfloor>}", "qed auto"], ["", "text \\<open>\n  Next, we need the following bound on $\\zeta'(2)$:\n\\<close>"], ["", "lemma deriv_zeta_2_bound: \"Re (deriv zeta 2) > -1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "have \"((\\<lambda>x::real. ln (x + 3) * (x + 3) powr -2) has_integral (ln 3 + 1) / 3) (interior {0..})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. ln (x + 3) * (x + 3) powr - 2) has_integral\n     (ln 3 + 1) / 3)\n     (interior {0..})", "using ln_powr_has_integral_at_top[of 1 0 3 \"-2\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>1 \\<le> 1 * 0 + 3; - 2 < - 1; 0 < 1\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>x.\n                         ln (1 * x + 3) * (1 * x + 3) powr - 2) has_integral\n                     - ((ln (1 * 0 + 3) - 1 / (- 2 + 1)) *\n                        (1 * 0 + 3) powr (- 2 + 1) /\n                        (1 * (- 2 + 1))))\n                     {0<..}\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. ln (x + 3) * (x + 3) powr - 2) has_integral\n     (ln 3 + 1) / 3)\n     (interior {0..})", "by (simp add: interior_real_atLeast powr_minus)"], ["proof (state)\nthis:\n  ((\\<lambda>x. ln (x + 3) * (x + 3) powr - 2) has_integral (ln 3 + 1) / 3)\n   (interior {0..})\n\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "hence \"((\\<lambda>x::real. ln (x + 3) * (x + 3) powr -2) has_integral (ln 3 + 1) / 3) {0..}\""], ["proof (prove)\nusing this:\n  ((\\<lambda>x. ln (x + 3) * (x + 3) powr - 2) has_integral (ln 3 + 1) / 3)\n   (interior {0..})\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. ln (x + 3) * (x + 3) powr - 2) has_integral\n     (ln 3 + 1) / 3)\n     {0..}", "by (subst (asm) has_integral_interior) auto"], ["proof (state)\nthis:\n  ((\\<lambda>x. ln (x + 3) * (x + 3) powr - 2) has_integral (ln 3 + 1) / 3)\n   {0..}\n\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "also"], ["proof (state)\nthis:\n  ((\\<lambda>x. ln (x + 3) * (x + 3) powr - 2) has_integral (ln 3 + 1) / 3)\n   {0..}\n\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "have \"?this \\<longleftrightarrow> ((\\<lambda>x::real. ln (x + 3) / (x + 3) ^ 2) has_integral (ln 3 + 1) / 3) {0..}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. ln (x + 3) * (x + 3) powr - 2) has_integral\n     (ln 3 + 1) / 3)\n     {0..} =\n    ((\\<lambda>x. ln (x + 3) / (x + 3)\\<^sup>2) has_integral (ln 3 + 1) / 3)\n     {0..}", "by (intro has_integral_cong) (auto simp: powr_minus field_simps)"], ["proof (state)\nthis:\n  ((\\<lambda>x. ln (x + 3) * (x + 3) powr - 2) has_integral (ln 3 + 1) / 3)\n   {0..} =\n  ((\\<lambda>x. ln (x + 3) / (x + 3)\\<^sup>2) has_integral (ln 3 + 1) / 3)\n   {0..}\n\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "finally"], ["proof (chain)\npicking this:\n  ((\\<lambda>x. ln (x + 3) / (x + 3)\\<^sup>2) has_integral (ln 3 + 1) / 3)\n   {0..}", "have int: \\<dots>"], ["proof (prove)\nusing this:\n  ((\\<lambda>x. ln (x + 3) / (x + 3)\\<^sup>2) has_integral (ln 3 + 1) / 3)\n   {0..}\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. ln (x + 3) / (x + 3)\\<^sup>2) has_integral (ln 3 + 1) / 3)\n     {0..}", "."], ["proof (state)\nthis:\n  ((\\<lambda>x. ln (x + 3) / (x + 3)\\<^sup>2) has_integral (ln 3 + 1) / 3)\n   {0..}\n\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "have \"exp (1 / 2 :: real) ^ 2 \\<le> 2 ^ 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (exp (1 / 2))\\<^sup>2 \\<le> 2\\<^sup>2", "using exp_le"], ["proof (prove)\nusing this:\n  exp 1 \\<le> 3\n\ngoal (1 subgoal):\n 1. (exp (1 / 2))\\<^sup>2 \\<le> 2\\<^sup>2", "by (subst exp_double [symmetric]) simp_all"], ["proof (state)\nthis:\n  (exp (1 / 2))\\<^sup>2 \\<le> 2\\<^sup>2\n\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "hence exp_half: \"exp (1 / 2 :: real) \\<le> 2\""], ["proof (prove)\nusing this:\n  (exp (1 / 2))\\<^sup>2 \\<le> 2\\<^sup>2\n\ngoal (1 subgoal):\n 1. exp (1 / 2) \\<le> 2", "by (rule power2_le_imp_le) auto"], ["proof (state)\nthis:\n  exp (1 / 2) \\<le> 2\n\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "have mono: \"ln x / x ^ 2 \\<le> ln y / y ^ 2\" if \"y \\<ge> exp (1/2)\" \"x \\<ge> y\" for x y :: real"], ["proof (prove)\ngoal (1 subgoal):\n 1. ln x / x\\<^sup>2 \\<le> ln y / y\\<^sup>2", "proof (rule DERIV_nonpos_imp_nonincreasing[of _ _ \"\\<lambda>x. ln x / x ^ 2\"])"], ["proof (state)\ngoal (2 subgoals):\n 1. y \\<le> x\n 2. \\<And>xa.\n       \\<lbrakk>y \\<le> xa; xa \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            ((\\<lambda>x.\n                                 ln x / x\\<^sup>2) has_real_derivative\n                             y)\n                             (at xa) \\<and>\n                            y \\<le> 0", "fix t"], ["proof (state)\ngoal (2 subgoals):\n 1. y \\<le> x\n 2. \\<And>xa.\n       \\<lbrakk>y \\<le> xa; xa \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            ((\\<lambda>x.\n                                 ln x / x\\<^sup>2) has_real_derivative\n                             y)\n                             (at xa) \\<and>\n                            y \\<le> 0", "assume t: \"t \\<ge> y\" \"t \\<le> x\""], ["proof (state)\nthis:\n  y \\<le> t\n  t \\<le> x\n\ngoal (2 subgoals):\n 1. y \\<le> x\n 2. \\<And>xa.\n       \\<lbrakk>y \\<le> xa; xa \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            ((\\<lambda>x.\n                                 ln x / x\\<^sup>2) has_real_derivative\n                             y)\n                             (at xa) \\<and>\n                            y \\<le> 0", "have \"y > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < y", "by (rule less_le_trans[OF _ that(1)]) auto"], ["proof (state)\nthis:\n  0 < y\n\ngoal (2 subgoals):\n 1. y \\<le> x\n 2. \\<And>xa.\n       \\<lbrakk>y \\<le> xa; xa \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            ((\\<lambda>x.\n                                 ln x / x\\<^sup>2) has_real_derivative\n                             y)\n                             (at xa) \\<and>\n                            y \\<le> 0", "with t that"], ["proof (chain)\npicking this:\n  y \\<le> t\n  t \\<le> x\n  exp (1 / 2) \\<le> y\n  y \\<le> x\n  0 < y", "have \"ln t \\<ge> ln (exp (1 / 2))\""], ["proof (prove)\nusing this:\n  y \\<le> t\n  t \\<le> x\n  exp (1 / 2) \\<le> y\n  y \\<le> x\n  0 < y\n\ngoal (1 subgoal):\n 1. ln (exp (1 / 2)) \\<le> ln t", "by (subst ln_le_cancel_iff) auto"], ["proof (state)\nthis:\n  ln (exp (1 / 2)) \\<le> ln t\n\ngoal (2 subgoals):\n 1. y \\<le> x\n 2. \\<And>xa.\n       \\<lbrakk>y \\<le> xa; xa \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            ((\\<lambda>x.\n                                 ln x / x\\<^sup>2) has_real_derivative\n                             y)\n                             (at xa) \\<and>\n                            y \\<le> 0", "hence \"ln t \\<ge> 1 / 2\""], ["proof (prove)\nusing this:\n  ln (exp (1 / 2)) \\<le> ln t\n\ngoal (1 subgoal):\n 1. 1 / 2 \\<le> ln t", "by (simp only: ln_exp)"], ["proof (state)\nthis:\n  1 / 2 \\<le> ln t\n\ngoal (2 subgoals):\n 1. y \\<le> x\n 2. \\<And>xa.\n       \\<lbrakk>y \\<le> xa; xa \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            ((\\<lambda>x.\n                                 ln x / x\\<^sup>2) has_real_derivative\n                             y)\n                             (at xa) \\<and>\n                            y \\<le> 0", "from t \\<open>y > 0\\<close>"], ["proof (chain)\npicking this:\n  y \\<le> t\n  t \\<le> x\n  0 < y", "have \"((\\<lambda>x. ln x / x ^ 2) has_field_derivative ((1 - 2 * ln t) / t ^ 3)) (at t)\""], ["proof (prove)\nusing this:\n  y \\<le> t\n  t \\<le> x\n  0 < y\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. ln x / x\\<^sup>2) has_real_derivative\n     (1 - 2 * ln t) / t ^ 3)\n     (at t)", "by (auto intro!: derivative_eq_intros simp: eval_nat_numeral field_simps)"], ["proof (state)\nthis:\n  ((\\<lambda>x. ln x / x\\<^sup>2) has_real_derivative\n   (1 - 2 * ln t) / t ^ 3)\n   (at t)\n\ngoal (2 subgoals):\n 1. y \\<le> x\n 2. \\<And>xa.\n       \\<lbrakk>y \\<le> xa; xa \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            ((\\<lambda>x.\n                                 ln x / x\\<^sup>2) has_real_derivative\n                             y)\n                             (at xa) \\<and>\n                            y \\<le> 0", "moreover"], ["proof (state)\nthis:\n  ((\\<lambda>x. ln x / x\\<^sup>2) has_real_derivative\n   (1 - 2 * ln t) / t ^ 3)\n   (at t)\n\ngoal (2 subgoals):\n 1. y \\<le> x\n 2. \\<And>xa.\n       \\<lbrakk>y \\<le> xa; xa \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            ((\\<lambda>x.\n                                 ln x / x\\<^sup>2) has_real_derivative\n                             y)\n                             (at xa) \\<and>\n                            y \\<le> 0", "have \"(1 - 2 * ln t) / t ^ 3 \\<le> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (1 - 2 * ln t) / t ^ 3 \\<le> 0", "using t that \\<open>y > 0\\<close> \\<open>ln t \\<ge> 1 / 2\\<close>"], ["proof (prove)\nusing this:\n  y \\<le> t\n  t \\<le> x\n  exp (1 / 2) \\<le> y\n  y \\<le> x\n  0 < y\n  1 / 2 \\<le> ln t\n\ngoal (1 subgoal):\n 1. (1 - 2 * ln t) / t ^ 3 \\<le> 0", "by (intro divide_nonpos_pos) auto"], ["proof (state)\nthis:\n  (1 - 2 * ln t) / t ^ 3 \\<le> 0\n\ngoal (2 subgoals):\n 1. y \\<le> x\n 2. \\<And>xa.\n       \\<lbrakk>y \\<le> xa; xa \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            ((\\<lambda>x.\n                                 ln x / x\\<^sup>2) has_real_derivative\n                             y)\n                             (at xa) \\<and>\n                            y \\<le> 0", "ultimately"], ["proof (chain)\npicking this:\n  ((\\<lambda>x. ln x / x\\<^sup>2) has_real_derivative\n   (1 - 2 * ln t) / t ^ 3)\n   (at t)\n  (1 - 2 * ln t) / t ^ 3 \\<le> 0", "show \"\\<exists>f'. ((\\<lambda>x. ln x / x ^ 2) has_field_derivative f') (at t) \\<and> f' \\<le> 0\""], ["proof (prove)\nusing this:\n  ((\\<lambda>x. ln x / x\\<^sup>2) has_real_derivative\n   (1 - 2 * ln t) / t ^ 3)\n   (at t)\n  (1 - 2 * ln t) / t ^ 3 \\<le> 0\n\ngoal (1 subgoal):\n 1. \\<exists>f'.\n       ((\\<lambda>x. ln x / x\\<^sup>2) has_real_derivative f') (at t) \\<and>\n       f' \\<le> 0", "by blast"], ["proof (state)\nthis:\n  \\<exists>f'.\n     ((\\<lambda>x. ln x / x\\<^sup>2) has_real_derivative f') (at t) \\<and>\n     f' \\<le> 0\n\ngoal (1 subgoal):\n 1. y \\<le> x", "qed fact+"], ["proof (state)\nthis:\n  \\<lbrakk>exp (1 / 2) \\<le> ?y; ?y \\<le> ?x\\<rbrakk>\n  \\<Longrightarrow> ln ?x / ?x\\<^sup>2 \\<le> ln ?y / ?y\\<^sup>2\n\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "have \"fds_converges (fds_deriv fds_zeta) (2 :: complex)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fds_converges (fds_deriv fds_zeta) 2", "by (intro fds_converges_deriv) auto"], ["proof (state)\nthis:\n  fds_converges (fds_deriv fds_zeta) 2\n\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "hence \"(\\<lambda>n. of_real (-ln (real (Suc n)) / (of_nat (Suc n)) ^ 2)) sums deriv zeta 2\""], ["proof (prove)\nusing this:\n  fds_converges (fds_deriv fds_zeta) 2\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        complex_of_real (- ln (real (Suc n)) / (real (Suc n))\\<^sup>2)) sums\n    deriv zeta 2", "by (auto simp: fds_converges_altdef add_ac eval_fds_deriv_zeta fds_nth_deriv scaleR_conv_of_real \n             simp del: of_nat_Suc)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      complex_of_real (- ln (real (Suc n)) / (real (Suc n))\\<^sup>2)) sums\n  deriv zeta 2\n\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "note * = sums_split_initial_segment[OF sums_minus[OF sums_Re[OF this]], of 3]"], ["proof (state)\nthis:\n  (\\<lambda>i.\n      - Re (complex_of_real\n             (- ln (real (Suc (i + 3))) /\n              (real (Suc (i + 3)))\\<^sup>2))) sums\n  (- Re (deriv zeta 2) -\n   (\\<Sum>i<3.\n       - Re (complex_of_real\n              (- ln (real (Suc i)) / (real (Suc i))\\<^sup>2))))\n\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "have \"(\\<lambda>n. ln (real (n+4)) / real (n+4) ^ 2) sums (-Re (deriv zeta 2) - (ln 2 / 4 + ln 3 / 9))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. ln (real (n + 4)) / (real (n + 4))\\<^sup>2) sums\n    (- Re (deriv zeta 2) - (ln 2 / 4 + ln 3 / 9))", "using *"], ["proof (prove)\nusing this:\n  (\\<lambda>i.\n      - Re (complex_of_real\n             (- ln (real (Suc (i + 3))) /\n              (real (Suc (i + 3)))\\<^sup>2))) sums\n  (- Re (deriv zeta 2) -\n   (\\<Sum>i<3.\n       - Re (complex_of_real\n              (- ln (real (Suc i)) / (real (Suc i))\\<^sup>2))))\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. ln (real (n + 4)) / (real (n + 4))\\<^sup>2) sums\n    (- Re (deriv zeta 2) - (ln 2 / 4 + ln 3 / 9))", "by (simp add: eval_nat_numeral)"], ["proof (state)\nthis:\n  (\\<lambda>n. ln (real (n + 4)) / (real (n + 4))\\<^sup>2) sums\n  (- Re (deriv zeta 2) - (ln 2 / 4 + ln 3 / 9))\n\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "hence \"-Re (deriv zeta 2) - (ln 2 / 4 + ln 3 / 9) =\n            (\\<Sum>n. ln (real (Suc n) + 3) / (real (Suc n) + 3) ^ 2)\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. ln (real (n + 4)) / (real (n + 4))\\<^sup>2) sums\n  (- Re (deriv zeta 2) - (ln 2 / 4 + ln 3 / 9))\n\ngoal (1 subgoal):\n 1. - Re (deriv zeta 2) - (ln 2 / 4 + ln 3 / 9) =\n    (\\<Sum>n. ln (real (Suc n) + 3) / (real (Suc n) + 3)\\<^sup>2)", "by (simp_all add: sums_iff algebra_simps)"], ["proof (state)\nthis:\n  - Re (deriv zeta 2) - (ln 2 / 4 + ln 3 / 9) =\n  (\\<Sum>n. ln (real (Suc n) + 3) / (real (Suc n) + 3)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "also"], ["proof (state)\nthis:\n  - Re (deriv zeta 2) - (ln 2 / 4 + ln 3 / 9) =\n  (\\<Sum>n. ln (real (Suc n) + 3) / (real (Suc n) + 3)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "have \"\\<dots> \\<le> (ln 3 + 1) / 3\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n. ln (real (Suc n) + 3) / (real (Suc n) + 3)\\<^sup>2)\n    \\<le> (ln 3 + 1) / 3", "using int exp_half"], ["proof (prove)\nusing this:\n  ((\\<lambda>x. ln (x + 3) / (x + 3)\\<^sup>2) has_integral (ln 3 + 1) / 3)\n   {0..}\n  exp (1 / 2) \\<le> 2\n\ngoal (1 subgoal):\n 1. (\\<Sum>n. ln (real (Suc n) + 3) / (real (Suc n) + 3)\\<^sup>2)\n    \\<le> (ln 3 + 1) / 3", "by (intro decreasing_sum_le_integral divide_nonneg_pos mono) (auto simp: powr_minus field_simps)"], ["proof (state)\nthis:\n  (\\<Sum>n. ln (real (Suc n) + 3) / (real (Suc n) + 3)\\<^sup>2)\n  \\<le> (ln 3 + 1) / 3\n\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "finally"], ["proof (chain)\npicking this:\n  - Re (deriv zeta 2) - (ln 2 / 4 + ln 3 / 9) \\<le> (ln 3 + 1) / 3", "have \"-Re (deriv zeta 2) \\<le> (16 * ln 3 + 9 * ln 2 + 12) / 36\""], ["proof (prove)\nusing this:\n  - Re (deriv zeta 2) - (ln 2 / 4 + ln 3 / 9) \\<le> (ln 3 + 1) / 3\n\ngoal (1 subgoal):\n 1. - Re (deriv zeta 2) \\<le> (16 * ln 3 + 9 * ln 2 + 12) / 36", "by simp"], ["proof (state)\nthis:\n  - Re (deriv zeta 2) \\<le> (16 * ln 3 + 9 * ln 2 + 12) / 36\n\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "also"], ["proof (state)\nthis:\n  - Re (deriv zeta 2) \\<le> (16 * ln 3 + 9 * ln 2 + 12) / 36\n\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "have \"ln 3 \\<le> (11 / 10 :: real)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln 3 \\<le> 11 / 10", "using ln_approx_bounds[of 3 2]"], ["proof (prove)\nusing this:\n  1 < 3 \\<Longrightarrow>\n  ln 3\n  \\<in> {\\<Sum>k<2.\n            2 * ((3 - 1) / (3 + 1)) ^ (2 * k + 1) /\n            real\n             (2 * k +\n              1)..(\\<Sum>k<2.\n                      2 * ((3 - 1) / (3 + 1)) ^ (2 * k + 1) /\n                      real (2 * k + 1)) +\n                  2 *\n                  (((3 - 1) / (3 + 1)) ^ (2 * 2 + 1) /\n                   (1 - ((3 - 1) / (3 + 1))\\<^sup>2) /\n                   real (2 * 2 + 1))}\n\ngoal (1 subgoal):\n 1. ln 3 \\<le> 11 / 10", "by (simp add: power_numeral_reduce numeral_2_eq_2)"], ["proof (state)\nthis:\n  ln 3 \\<le> 11 / 10\n\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "hence \"(16 * ln 3 + 9 * ln 2 + 12) / 36 \\<le> (16 * (11 / 10) + 9 * 25 / 36 + 12) / (36 :: real)\""], ["proof (prove)\nusing this:\n  ln 3 \\<le> 11 / 10\n\ngoal (1 subgoal):\n 1. (16 * ln 3 + 9 * ln 2 + 12) / 36\n    \\<le> (16 * (11 / 10) + 9 * 25 / 36 + 12) / 36", "using ln2_le_25_over_36"], ["proof (prove)\nusing this:\n  ln 3 \\<le> 11 / 10\n  ln 2 \\<le> 25 / 36\n\ngoal (1 subgoal):\n 1. (16 * ln 3 + 9 * ln 2 + 12) / 36\n    \\<le> (16 * (11 / 10) + 9 * 25 / 36 + 12) / 36", "by (intro add_mono mult_left_mono divide_right_mono) auto"], ["proof (state)\nthis:\n  (16 * ln 3 + 9 * ln 2 + 12) / 36\n  \\<le> (16 * (11 / 10) + 9 * 25 / 36 + 12) / 36\n\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "also"], ["proof (state)\nthis:\n  (16 * ln 3 + 9 * ln 2 + 12) / 36\n  \\<le> (16 * (11 / 10) + 9 * 25 / 36 + 12) / 36\n\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "have \"\\<dots> < 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (16 * (11 / 10) + 9 * 25 / 36 + 12) / 36 < 1", "by simp"], ["proof (state)\nthis:\n  (16 * (11 / 10) + 9 * 25 / 36 + 12) / 36 < 1\n\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "finally"], ["proof (chain)\npicking this:\n  - Re (deriv zeta 2) < 1", "show ?thesis"], ["proof (prove)\nusing this:\n  - Re (deriv zeta 2) < 1\n\ngoal (1 subgoal):\n 1. - 1 < Re (deriv zeta 2)", "by simp"], ["proof (state)\nthis:\n  - 1 < Re (deriv zeta 2)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\n  Using the logarithmic derivative of Euler's product formula for $\\zeta(s)$ at $s = 2$\n  and the bound on $\\zeta'(2)$ we have just derived, we can obtain the bound\n  \\[\\sum_{p^i \\leq x, i \\geq 2} \\frac{\\ln p}{p^i} < \\frac{9}{\\pi^2}\\ .\\]\n\\<close>"], ["", "lemma mertens_remainder_aux_bound:\n  fixes x :: real\n  defines \"R \\<equiv> (\\<Sum>(p,i) | prime p \\<and> i > 1 \\<and> real (p ^ i) \\<le> x. ln (real p) / p ^ i)\"\n  shows   \"R < 9 / pi\\<^sup>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "define S' where \"S' = {(p, i). prime p \\<and> i > 1 \\<and> real (p ^ i) \\<le> x}\""], ["proof (state)\nthis:\n  S' = {(p, i). prime p \\<and> 1 < i \\<and> real (p ^ i) \\<le> x}\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "define S'' where \"S'' = {(p, i). prime p \\<and> i > 1 \\<and> real (p ^ Suc i) \\<le> x}\""], ["proof (state)\nthis:\n  S'' = {(p, i). prime p \\<and> 1 < i \\<and> real (p ^ Suc i) \\<le> x}\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "have finite_row: \"finite {i. i > 1 \\<and> real (p ^ (i + k)) \\<le> x}\" if p: \"prime p\" for p k"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {i. 1 < i \\<and> real (p ^ (i + k)) \\<le> x}", "proof (rule finite_subset)"], ["proof (state)\ngoal (2 subgoals):\n 1. {i. 1 < i \\<and> real (p ^ (i + k)) \\<le> x} \\<subseteq> ?B\n 2. finite ?B", "show \"{i. i > 1 \\<and> real (p ^ (i + k)) \\<le> x} \\<subseteq> {..nat \\<lfloor>x\\<rfloor>}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {i. 1 < i \\<and> real (p ^ (i + k)) \\<le> x}\n    \\<subseteq> {..nat \\<lfloor>x\\<rfloor>}", "proof safe"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>1 < xa; real (p ^ (xa + k)) \\<le> x\\<rbrakk>\n       \\<Longrightarrow> xa \\<le> nat \\<lfloor>x\\<rfloor>", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>1 < xa; real (p ^ (xa + k)) \\<le> x\\<rbrakk>\n       \\<Longrightarrow> xa \\<le> nat \\<lfloor>x\\<rfloor>", "assume i: \"i > 1\" \"real (p ^ (i + k)) \\<le> x\""], ["proof (state)\nthis:\n  1 < i\n  real (p ^ (i + k)) \\<le> x\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>1 < xa; real (p ^ (xa + k)) \\<le> x\\<rbrakk>\n       \\<Longrightarrow> xa \\<le> nat \\<lfloor>x\\<rfloor>", "have \"i < 2 ^ (i + k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i < 2 ^ (i + k)", "by (induction i) auto"], ["proof (state)\nthis:\n  i < 2 ^ (i + k)\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>1 < xa; real (p ^ (xa + k)) \\<le> x\\<rbrakk>\n       \\<Longrightarrow> xa \\<le> nat \\<lfloor>x\\<rfloor>", "also"], ["proof (state)\nthis:\n  i < 2 ^ (i + k)\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>1 < xa; real (p ^ (xa + k)) \\<le> x\\<rbrakk>\n       \\<Longrightarrow> xa \\<le> nat \\<lfloor>x\\<rfloor>", "from p"], ["proof (chain)\npicking this:\n  prime p", "have \"\\<dots> \\<le> p ^ (i + k)\""], ["proof (prove)\nusing this:\n  prime p\n\ngoal (1 subgoal):\n 1. 2 ^ (i + k) \\<le> p ^ (i + k)", "by (intro power_mono) (auto dest: prime_gt_1_nat)"], ["proof (state)\nthis:\n  2 ^ (i + k) \\<le> p ^ (i + k)\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>1 < xa; real (p ^ (xa + k)) \\<le> x\\<rbrakk>\n       \\<Longrightarrow> xa \\<le> nat \\<lfloor>x\\<rfloor>", "also"], ["proof (state)\nthis:\n  2 ^ (i + k) \\<le> p ^ (i + k)\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>1 < xa; real (p ^ (xa + k)) \\<le> x\\<rbrakk>\n       \\<Longrightarrow> xa \\<le> nat \\<lfloor>x\\<rfloor>", "have \"real \\<dots> \\<le> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (p ^ (i + k)) \\<le> x", "using i"], ["proof (prove)\nusing this:\n  1 < i\n  real (p ^ (i + k)) \\<le> x\n\ngoal (1 subgoal):\n 1. real (p ^ (i + k)) \\<le> x", "by simp"], ["proof (state)\nthis:\n  real (p ^ (i + k)) \\<le> x\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>1 < xa; real (p ^ (xa + k)) \\<le> x\\<rbrakk>\n       \\<Longrightarrow> xa \\<le> nat \\<lfloor>x\\<rfloor>", "finally"], ["proof (chain)\npicking this:\n  (\\<And>x y. x < y \\<Longrightarrow> real x < real y) \\<Longrightarrow>\n  real i < x", "show \"i \\<le> nat \\<lfloor>x\\<rfloor>\""], ["proof (prove)\nusing this:\n  (\\<And>x y. x < y \\<Longrightarrow> real x < real y) \\<Longrightarrow>\n  real i < x\n\ngoal (1 subgoal):\n 1. i \\<le> nat \\<lfloor>x\\<rfloor>", "by linarith"], ["proof (state)\nthis:\n  i \\<le> nat \\<lfloor>x\\<rfloor>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {i. 1 < i \\<and> real (p ^ (i + k)) \\<le> x}\n  \\<subseteq> {..nat \\<lfloor>x\\<rfloor>}\n\ngoal (1 subgoal):\n 1. finite {..nat \\<lfloor>x\\<rfloor>}", "qed auto"], ["proof (state)\nthis:\n  prime ?p \\<Longrightarrow>\n  finite {i. 1 < i \\<and> real (?p ^ (i + ?k)) \\<le> x}\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "have \"S'' \\<subseteq> S'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S'' \\<subseteq> S'", "unfolding S''_def S'_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {(p, i). prime p \\<and> 1 < i \\<and> real (p ^ Suc i) \\<le> x}\n    \\<subseteq> {(p, i). prime p \\<and> 1 < i \\<and> real (p ^ i) \\<le> x}", "proof safe"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>prime a; 1 < b; real (a ^ Suc b) \\<le> x\\<rbrakk>\n       \\<Longrightarrow> real (a ^ b) \\<le> x", "fix p i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>prime a; 1 < b; real (a ^ Suc b) \\<le> x\\<rbrakk>\n       \\<Longrightarrow> real (a ^ b) \\<le> x", "assume pi: \"prime p\" \"real (p ^ Suc i) \\<le> x\" \"i > 1\""], ["proof (state)\nthis:\n  prime p\n  real (p ^ Suc i) \\<le> x\n  1 < i\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>prime a; 1 < b; real (a ^ Suc b) \\<le> x\\<rbrakk>\n       \\<Longrightarrow> real (a ^ b) \\<le> x", "have \"real (p ^ i) \\<le> real (p ^ Suc i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (p ^ i) \\<le> real (p ^ Suc i)", "using pi"], ["proof (prove)\nusing this:\n  prime p\n  real (p ^ Suc i) \\<le> x\n  1 < i\n\ngoal (1 subgoal):\n 1. real (p ^ i) \\<le> real (p ^ Suc i)", "unfolding of_nat_le_iff"], ["proof (prove)\nusing this:\n  prime p\n  real (p ^ Suc i) \\<le> x\n  1 < i\n\ngoal (1 subgoal):\n 1. p ^ i \\<le> p ^ Suc i", "by (intro power_increasing) (auto dest: prime_gt_1_nat)"], ["proof (state)\nthis:\n  real (p ^ i) \\<le> real (p ^ Suc i)\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>prime a; 1 < b; real (a ^ Suc b) \\<le> x\\<rbrakk>\n       \\<Longrightarrow> real (a ^ b) \\<le> x", "also"], ["proof (state)\nthis:\n  real (p ^ i) \\<le> real (p ^ Suc i)\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>prime a; 1 < b; real (a ^ Suc b) \\<le> x\\<rbrakk>\n       \\<Longrightarrow> real (a ^ b) \\<le> x", "have \"\\<dots> \\<le> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (p ^ Suc i) \\<le> x", "by fact"], ["proof (state)\nthis:\n  real (p ^ Suc i) \\<le> x\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>prime a; 1 < b; real (a ^ Suc b) \\<le> x\\<rbrakk>\n       \\<Longrightarrow> real (a ^ b) \\<le> x", "finally"], ["proof (chain)\npicking this:\n  real (p ^ i) \\<le> x", "show \"real (p ^ i) \\<le> x\""], ["proof (prove)\nusing this:\n  real (p ^ i) \\<le> x\n\ngoal (1 subgoal):\n 1. real (p ^ i) \\<le> x", "."], ["proof (state)\nthis:\n  real (p ^ i) \\<le> x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  S'' \\<subseteq> S'\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "have S'_alt:  \"S' = (SIGMA p:{p. prime p \\<and> real p \\<le> x}. {i. i > 1 \\<and> real (p ^ i) \\<le> x})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S' =\n    (SIGMA p:{p. prime p \\<and> real p \\<le> x}.\n        {i. 1 < i \\<and> real (p ^ i) \\<le> x})", "unfolding S'_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {(p, i). prime p \\<and> 1 < i \\<and> real (p ^ i) \\<le> x} =\n    (SIGMA p:{p. prime p \\<and> real p \\<le> x}.\n        {i. 1 < i \\<and> real (p ^ i) \\<le> x})", "proof safe"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>prime a; 1 < b; real (a ^ b) \\<le> x\\<rbrakk>\n       \\<Longrightarrow> real a \\<le> x", "fix p i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>prime a; 1 < b; real (a ^ b) \\<le> x\\<rbrakk>\n       \\<Longrightarrow> real a \\<le> x", "assume \"prime p\" \"real (p ^ i) \\<le> x\" \"i > 1\""], ["proof (state)\nthis:\n  prime p\n  real (p ^ i) \\<le> x\n  1 < i\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>prime a; 1 < b; real (a ^ b) \\<le> x\\<rbrakk>\n       \\<Longrightarrow> real a \\<le> x", "hence \"p ^ 1 \\<le> p ^ i\""], ["proof (prove)\nusing this:\n  prime p\n  real (p ^ i) \\<le> x\n  1 < i\n\ngoal (1 subgoal):\n 1. p ^ 1 \\<le> p ^ i", "by (intro power_increasing) (auto dest: prime_gt_1_nat)"], ["proof (state)\nthis:\n  p ^ 1 \\<le> p ^ i\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>prime a; 1 < b; real (a ^ b) \\<le> x\\<rbrakk>\n       \\<Longrightarrow> real a \\<le> x", "also"], ["proof (state)\nthis:\n  p ^ 1 \\<le> p ^ i\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>prime a; 1 < b; real (a ^ b) \\<le> x\\<rbrakk>\n       \\<Longrightarrow> real a \\<le> x", "have \"real \\<dots> \\<le> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (p ^ i) \\<le> x", "by fact"], ["proof (state)\nthis:\n  real (p ^ i) \\<le> x\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>prime a; 1 < b; real (a ^ b) \\<le> x\\<rbrakk>\n       \\<Longrightarrow> real a \\<le> x", "finally"], ["proof (chain)\npicking this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow> real x \\<le> real y) \\<Longrightarrow>\n  real (p ^ 1) \\<le> x", "show \"real p \\<le> x\""], ["proof (prove)\nusing this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow> real x \\<le> real y) \\<Longrightarrow>\n  real (p ^ 1) \\<le> x\n\ngoal (1 subgoal):\n 1. real p \\<le> x", "by simp"], ["proof (state)\nthis:\n  real p \\<le> x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  S' =\n  (SIGMA p:{p. prime p \\<and> real p \\<le> x}.\n      {i. 1 < i \\<and> real (p ^ i) \\<le> x})\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "have finite: \"finite {p. prime p \\<and> real p \\<le> x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {p. prime p \\<and> real p \\<le> x}", "by (rule finite_subset[OF _ finite_Nats_le_real[of x]]) (auto dest: prime_gt_0_nat)"], ["proof (state)\nthis:\n  finite {p. prime p \\<and> real p \\<le> x}\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "have \"finite S'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite S'", "unfolding S'_alt"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite\n     (SIGMA p:{p. prime p \\<and> real p \\<le> x}.\n         {i. 1 < i \\<and> real (p ^ i) \\<le> x})", "using finite_row[of _ 0]"], ["proof (prove)\nusing this:\n  prime ?p \\<Longrightarrow>\n  finite {i. 1 < i \\<and> real (?p ^ (i + 0)) \\<le> x}\n\ngoal (1 subgoal):\n 1. finite\n     (SIGMA p:{p. prime p \\<and> real p \\<le> x}.\n         {i. 1 < i \\<and> real (p ^ i) \\<le> x})", "by (intro finite_SigmaI finite) auto"], ["proof (state)\nthis:\n  finite S'\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "have \"R \\<le> 3 / 2 * (\\<Sum>(p, i) | (p, i) \\<in> S' \\<and> even i. ln (real p) / real (p ^ i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R \\<le> 3 / 2 *\n            (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n               ln (real p) / real (p ^ i))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. R \\<le> 3 / 2 *\n            (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n               ln (real p) / real (p ^ i))", "have \"R = (\\<Sum>y\\<in>{0, 1}. \\<Sum>z | z \\<in> S' \\<and> snd z mod 2 = y. ln (real (fst z)) / real (fst z ^ snd z))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R =\n    (\\<Sum>y\\<in>{0, 1}.\n       \\<Sum>z | z \\<in> S' \\<and> snd z mod 2 = y.\n         ln (real (fst z)) / real (fst z ^ snd z))", "using \\<open>finite S'\\<close>"], ["proof (prove)\nusing this:\n  finite S'\n\ngoal (1 subgoal):\n 1. R =\n    (\\<Sum>y\\<in>{0, 1}.\n       \\<Sum>z | z \\<in> S' \\<and> snd z mod 2 = y.\n         ln (real (fst z)) / real (fst z ^ snd z))", "by (subst sum.group) (auto simp: case_prod_unfold R_def S'_def)"], ["proof (state)\nthis:\n  R =\n  (\\<Sum>y\\<in>{0, 1}.\n     \\<Sum>z | z \\<in> S' \\<and> snd z mod 2 = y.\n       ln (real (fst z)) / real (fst z ^ snd z))\n\ngoal (1 subgoal):\n 1. R \\<le> 3 / 2 *\n            (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n               ln (real p) / real (p ^ i))", "also"], ["proof (state)\nthis:\n  R =\n  (\\<Sum>y\\<in>{0, 1}.\n     \\<Sum>z | z \\<in> S' \\<and> snd z mod 2 = y.\n       ln (real (fst z)) / real (fst z ^ snd z))\n\ngoal (1 subgoal):\n 1. R \\<le> 3 / 2 *\n            (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n               ln (real p) / real (p ^ i))", "have \"\\<dots> = (\\<Sum>(p,i) | (p, i) \\<in> S' \\<and> even i. ln (real p) / real (p ^ i)) +\n                    (\\<Sum>(p,i) | (p, i) \\<in> S' \\<and> odd i. ln (real p) / real (p ^ i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>y\\<in>{0, 1}.\n       \\<Sum>z | z \\<in> S' \\<and> snd z mod 2 = y.\n         ln (real (fst z)) / real (fst z ^ snd z)) =\n    (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n       ln (real p) / real (p ^ i)) +\n    (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> odd i}.\n       ln (real p) / real (p ^ i))", "unfolding even_iff_mod_2_eq_zero odd_iff_mod_2_eq_one"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>y\\<in>{0, 1}.\n       \\<Sum>z | z \\<in> S' \\<and> snd z mod 2 = y.\n         ln (real (fst z)) / real (fst z ^ snd z)) =\n    (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> i mod 2 = 0}.\n       ln (real p) / real (p ^ i)) +\n    (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> i mod 2 \\<noteq> 0}.\n       ln (real p) / real (p ^ i))", "by (simp add: case_prod_unfold)"], ["proof (state)\nthis:\n  (\\<Sum>y\\<in>{0, 1}.\n     \\<Sum>z | z \\<in> S' \\<and> snd z mod 2 = y.\n       ln (real (fst z)) / real (fst z ^ snd z)) =\n  (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n     ln (real p) / real (p ^ i)) +\n  (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> odd i}.\n     ln (real p) / real (p ^ i))\n\ngoal (1 subgoal):\n 1. R \\<le> 3 / 2 *\n            (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n               ln (real p) / real (p ^ i))", "also"], ["proof (state)\nthis:\n  (\\<Sum>y\\<in>{0, 1}.\n     \\<Sum>z | z \\<in> S' \\<and> snd z mod 2 = y.\n       ln (real (fst z)) / real (fst z ^ snd z)) =\n  (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n     ln (real p) / real (p ^ i)) +\n  (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> odd i}.\n     ln (real p) / real (p ^ i))\n\ngoal (1 subgoal):\n 1. R \\<le> 3 / 2 *\n            (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n               ln (real p) / real (p ^ i))", "have \"(\\<Sum>(p,i) | (p, i) \\<in> S' \\<and> odd i. ln (real p) / real (p ^ i)) =\n                 (\\<Sum>(p,i) | (p, i) \\<in> S'' \\<and> even i. ln (real p) / real (p ^ Suc i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> odd i}.\n       ln (real p) / real (p ^ i)) =\n    (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S'' \\<and> even i}.\n       ln (real p) / real (p ^ Suc i))", "by (intro sum.reindex_bij_witness[of _ \"\\<lambda>(p,i). (p, Suc i)\" \"\\<lambda>(p,i). (p, i - 1)\"])\n         (auto simp: case_prod_unfold S'_def S''_def elim: oddE simp del: power_Suc)"], ["proof (state)\nthis:\n  (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> odd i}.\n     ln (real p) / real (p ^ i)) =\n  (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S'' \\<and> even i}.\n     ln (real p) / real (p ^ Suc i))\n\ngoal (1 subgoal):\n 1. R \\<le> 3 / 2 *\n            (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n               ln (real p) / real (p ^ i))", "also"], ["proof (state)\nthis:\n  (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> odd i}.\n     ln (real p) / real (p ^ i)) =\n  (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S'' \\<and> even i}.\n     ln (real p) / real (p ^ Suc i))\n\ngoal (1 subgoal):\n 1. R \\<le> 3 / 2 *\n            (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n               ln (real p) / real (p ^ i))", "have \"\\<dots> \\<le> (\\<Sum>(p,i) | (p, i) \\<in> S' \\<and> even i. ln (real p) / real (p ^ Suc i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S'' \\<and> even i}.\n       ln (real p) / real (p ^ Suc i))\n    \\<le> (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n             ln (real p) / real (p ^ Suc i))", "using \\<open>S'' \\<subseteq> S'\\<close>"], ["proof (prove)\nusing this:\n  S'' \\<subseteq> S'\n\ngoal (1 subgoal):\n 1. (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S'' \\<and> even i}.\n       ln (real p) / real (p ^ Suc i))\n    \\<le> (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n             ln (real p) / real (p ^ Suc i))", "unfolding case_prod_unfold"], ["proof (prove)\nusing this:\n  S'' \\<subseteq> S'\n\ngoal (1 subgoal):\n 1. (\\<Sum>p | (fst p, snd p) \\<in> S'' \\<and> even (snd p).\n       ln (real (fst p)) / real (fst p ^ Suc (snd p)))\n    \\<le> (\\<Sum>p | (fst p, snd p) \\<in> S' \\<and> even (snd p).\n             ln (real (fst p)) / real (fst p ^ Suc (snd p)))", "by (intro sum_mono2 divide_nonneg_pos ln_ge_zero finite_subset[OF _ \\<open>finite S'\\<close>])\n         (auto simp: S'_def S''_def case_prod_unfold dest: prime_gt_0_nat simp del: power_Suc)"], ["proof (state)\nthis:\n  (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S'' \\<and> even i}.\n     ln (real p) / real (p ^ Suc i))\n  \\<le> (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n           ln (real p) / real (p ^ Suc i))\n\ngoal (1 subgoal):\n 1. R \\<le> 3 / 2 *\n            (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n               ln (real p) / real (p ^ i))", "also"], ["proof (state)\nthis:\n  (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S'' \\<and> even i}.\n     ln (real p) / real (p ^ Suc i))\n  \\<le> (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n           ln (real p) / real (p ^ Suc i))\n\ngoal (1 subgoal):\n 1. R \\<le> 3 / 2 *\n            (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n               ln (real p) / real (p ^ i))", "have \"\\<dots> \\<le> (\\<Sum>(p,i) | (p, i) \\<in> S' \\<and> even i. ln (real p) / real (2 * p ^ i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n       ln (real p) / real (p ^ Suc i))\n    \\<le> (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n             ln (real p) / real (2 * p ^ i))", "unfolding case_prod_unfold"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>p | (fst p, snd p) \\<in> S' \\<and> even (snd p).\n       ln (real (fst p)) / real (fst p ^ Suc (snd p)))\n    \\<le> (\\<Sum>p | (fst p, snd p) \\<in> S' \\<and> even (snd p).\n             ln (real (fst p)) / real (2 * fst p ^ snd p))", "by (intro sum_mono divide_left_mono) (auto simp: S'_def dest!: prime_gt_1_nat)"], ["proof (state)\nthis:\n  (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n     ln (real p) / real (p ^ Suc i))\n  \\<le> (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n           ln (real p) / real (2 * p ^ i))\n\ngoal (1 subgoal):\n 1. R \\<le> 3 / 2 *\n            (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n               ln (real p) / real (p ^ i))", "also"], ["proof (state)\nthis:\n  (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n     ln (real p) / real (p ^ Suc i))\n  \\<le> (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n           ln (real p) / real (2 * p ^ i))\n\ngoal (1 subgoal):\n 1. R \\<le> 3 / 2 *\n            (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n               ln (real p) / real (p ^ i))", "have \"\\<dots> = (1 / 2) * (\\<Sum>(p,i) | (p, i) \\<in> S' \\<and> even i. ln (real p) / real (p ^ i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n       ln (real p) / real (2 * p ^ i)) =\n    1 / 2 *\n    (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n       ln (real p) / real (p ^ i))", "by (subst sum_distrib_left) (auto simp: case_prod_unfold)"], ["proof (state)\nthis:\n  (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n     ln (real p) / real (2 * p ^ i)) =\n  1 / 2 *\n  (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n     ln (real p) / real (p ^ i))\n\ngoal (1 subgoal):\n 1. R \\<le> 3 / 2 *\n            (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n               ln (real p) / real (p ^ i))", "also"], ["proof (state)\nthis:\n  (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n     ln (real p) / real (2 * p ^ i)) =\n  1 / 2 *\n  (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n     ln (real p) / real (p ^ i))\n\ngoal (1 subgoal):\n 1. R \\<le> 3 / 2 *\n            (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n               ln (real p) / real (p ^ i))", "have \"(\\<Sum>(p,i) | (p, i) \\<in> S' \\<and> even i. ln (real p) / real (p ^ i)) + \\<dots> =\n                   3 / 2 * (\\<Sum>(p,i) | (p, i) \\<in> S' \\<and> even i. ln (real p) / real (p ^ i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n       ln (real p) / real (p ^ i)) +\n    1 / 2 *\n    (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n       ln (real p) / real (p ^ i)) =\n    3 / 2 *\n    (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n       ln (real p) / real (p ^ i))", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n     ln (real p) / real (p ^ i)) +\n  1 / 2 *\n  (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n     ln (real p) / real (p ^ i)) =\n  3 / 2 *\n  (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n     ln (real p) / real (p ^ i))\n\ngoal (1 subgoal):\n 1. R \\<le> 3 / 2 *\n            (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n               ln (real p) / real (p ^ i))", "finally"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<And>x y.\n              x \\<le> y \\<Longrightarrow>\n              (\\<Sum> | case  of\n                        (p, i) \\<Rightarrow> (p, i) \\<in> S' \\<and> even i.\n                 case  of (p, i) \\<Rightarrow> ln (real p) / real (p ^ i)) +\n              x\n              \\<le> (\\<Sum> | case  of\n                              (p, i) \\<Rightarrow>\n                                (p, i) \\<in> S' \\<and> even i.\n                       case  of\n                       (p, i) \\<Rightarrow> ln (real p) / real (p ^ i)) +\n                    y;\n   \\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      (\\<Sum> | case  of (p, i) \\<Rightarrow> (p, i) \\<in> S' \\<and> even i.\n         case  of (p, i) \\<Rightarrow> ln (real p) / real (p ^ i)) +\n      x\n      \\<le> (\\<Sum> | case  of\n                      (p, i) \\<Rightarrow> (p, i) \\<in> S' \\<and> even i.\n               case  of (p, i) \\<Rightarrow> ln (real p) / real (p ^ i)) +\n            y\\<rbrakk>\n  \\<Longrightarrow> R \\<le> 3 / 2 *\n                            (\\<Sum>(p, i)\n                                   \\<in>{(p, i).\n   (p, i) \\<in> S' \\<and> even i}.\n                               ln (real p) / real (p ^ i))", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>x y.\n              x \\<le> y \\<Longrightarrow>\n              (\\<Sum> | case  of\n                        (p, i) \\<Rightarrow> (p, i) \\<in> S' \\<and> even i.\n                 case  of (p, i) \\<Rightarrow> ln (real p) / real (p ^ i)) +\n              x\n              \\<le> (\\<Sum> | case  of\n                              (p, i) \\<Rightarrow>\n                                (p, i) \\<in> S' \\<and> even i.\n                       case  of\n                       (p, i) \\<Rightarrow> ln (real p) / real (p ^ i)) +\n                    y;\n   \\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      (\\<Sum> | case  of (p, i) \\<Rightarrow> (p, i) \\<in> S' \\<and> even i.\n         case  of (p, i) \\<Rightarrow> ln (real p) / real (p ^ i)) +\n      x\n      \\<le> (\\<Sum> | case  of\n                      (p, i) \\<Rightarrow> (p, i) \\<in> S' \\<and> even i.\n               case  of (p, i) \\<Rightarrow> ln (real p) / real (p ^ i)) +\n            y\\<rbrakk>\n  \\<Longrightarrow> R \\<le> 3 / 2 *\n                            (\\<Sum>(p, i)\n                                   \\<in>{(p, i).\n   (p, i) \\<in> S' \\<and> even i}.\n                               ln (real p) / real (p ^ i))\n\ngoal (1 subgoal):\n 1. R \\<le> 3 / 2 *\n            (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n               ln (real p) / real (p ^ i))", "by simp"], ["proof (state)\nthis:\n  R \\<le> 3 / 2 *\n          (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n             ln (real p) / real (p ^ i))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  R \\<le> 3 / 2 *\n          (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n             ln (real p) / real (p ^ i))\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "also"], ["proof (state)\nthis:\n  R \\<le> 3 / 2 *\n          (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n             ln (real p) / real (p ^ i))\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "have \"(\\<Sum>(p,i) | (p, i) \\<in> S' \\<and> even i. ln (real p) / real (p ^ i)) =\n               (\\<Sum>p | prime p \\<and> real p \\<le> x. ln (real p) * \n                 (\\<Sum>i | i > 0 \\<and> even i \\<and> real (p ^ i) \\<le> x. (1 / real p) ^ i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n       ln (real p) / real (p ^ i)) =\n    (\\<Sum>p | prime p \\<and> real p \\<le> x.\n       ln (real p) *\n       (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n          (1 / real p) ^ i))", "unfolding sum_distrib_left"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n       ln (real p) / real (p ^ i)) =\n    (\\<Sum>p | prime p \\<and> real p \\<le> x.\n       \\<Sum>n\\<in>{i. 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x}.\n         ln (real p) * (1 / real p) ^ n)", "proof (subst sum.Sigma[OF _ ballI])"], ["proof (state)\ngoal (3 subgoals):\n 1. finite {p. prime p \\<and> real p \\<le> x}\n 2. \\<And>xa.\n       xa \\<in> {p. prime p \\<and> real p \\<le> x} \\<Longrightarrow>\n       finite {i. 0 < i \\<and> even i \\<and> real (xa ^ i) \\<le> x}\n 3. (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n       ln (real p) / real (p ^ i)) =\n    (\\<Sum>(p, n)\n           \\<in>(SIGMA xa:{p. prime p \\<and> real p \\<le> x}.\n                    {i. 0 < i \\<and> even i \\<and> real (xa ^ i) \\<le> x}).\n       ln (real p) * (1 / real p) ^ n)", "fix p"], ["proof (state)\ngoal (3 subgoals):\n 1. finite {p. prime p \\<and> real p \\<le> x}\n 2. \\<And>xa.\n       xa \\<in> {p. prime p \\<and> real p \\<le> x} \\<Longrightarrow>\n       finite {i. 0 < i \\<and> even i \\<and> real (xa ^ i) \\<le> x}\n 3. (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n       ln (real p) / real (p ^ i)) =\n    (\\<Sum>(p, n)\n           \\<in>(SIGMA xa:{p. prime p \\<and> real p \\<le> x}.\n                    {i. 0 < i \\<and> even i \\<and> real (xa ^ i) \\<le> x}).\n       ln (real p) * (1 / real p) ^ n)", "assume p: \"p \\<in> {p. prime p \\<and> real p \\<le> x}\""], ["proof (state)\nthis:\n  p \\<in> {p. prime p \\<and> real p \\<le> x}\n\ngoal (3 subgoals):\n 1. finite {p. prime p \\<and> real p \\<le> x}\n 2. \\<And>xa.\n       xa \\<in> {p. prime p \\<and> real p \\<le> x} \\<Longrightarrow>\n       finite {i. 0 < i \\<and> even i \\<and> real (xa ^ i) \\<le> x}\n 3. (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n       ln (real p) / real (p ^ i)) =\n    (\\<Sum>(p, n)\n           \\<in>(SIGMA xa:{p. prime p \\<and> real p \\<le> x}.\n                    {i. 0 < i \\<and> even i \\<and> real (xa ^ i) \\<le> x}).\n       ln (real p) * (1 / real p) ^ n)", "thus \"finite {i. 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x}\""], ["proof (prove)\nusing this:\n  p \\<in> {p. prime p \\<and> real p \\<le> x}\n\ngoal (1 subgoal):\n 1. finite {i. 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x}", "by (intro finite_subset[OF _ exponents_le_finite[of p 1 0 x]]) (auto dest: prime_gt_1_nat)"], ["proof (state)\nthis:\n  finite {i. 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x}\n\ngoal (2 subgoals):\n 1. finite {p. prime p \\<and> real p \\<le> x}\n 2. (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n       ln (real p) / real (p ^ i)) =\n    (\\<Sum>(p, n)\n           \\<in>(SIGMA xa:{p. prime p \\<and> real p \\<le> x}.\n                    {i. 0 < i \\<and> even i \\<and> real (xa ^ i) \\<le> x}).\n       ln (real p) * (1 / real p) ^ n)", "qed (auto intro!: sum.cong finite_subset[OF _ finite_Nats_le_real[of x]]\n            dest: prime_gt_0_nat simp: S'_alt power_divide)"], ["proof (state)\nthis:\n  (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n     ln (real p) / real (p ^ i)) =\n  (\\<Sum>p | prime p \\<and> real p \\<le> x.\n     ln (real p) *\n     (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n        (1 / real p) ^ i))\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "also"], ["proof (state)\nthis:\n  (\\<Sum>(p, i)\\<in>{(p, i). (p, i) \\<in> S' \\<and> even i}.\n     ln (real p) / real (p ^ i)) =\n  (\\<Sum>p | prime p \\<and> real p \\<le> x.\n     ln (real p) *\n     (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n        (1 / real p) ^ i))\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "have \"\\<dots> \\<le> (\\<Sum>p | prime p \\<and> real p \\<le> x. ln (real p) / (real p ^ 2 - 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>p | prime p \\<and> real p \\<le> x.\n       ln (real p) *\n       (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n          (1 / real p) ^ i))\n    \\<le> (\\<Sum>p | prime p \\<and> real p \\<le> x.\n             ln (real p) / ((real p)\\<^sup>2 - 1))", "proof (rule sum_mono)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>p.\n       p \\<in> {p. prime p \\<and> real p \\<le> x} \\<Longrightarrow>\n       ln (real p) *\n       (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n          (1 / real p) ^ i)\n       \\<le> ln (real p) / ((real p)\\<^sup>2 - 1)", "fix p"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>p.\n       p \\<in> {p. prime p \\<and> real p \\<le> x} \\<Longrightarrow>\n       ln (real p) *\n       (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n          (1 / real p) ^ i)\n       \\<le> ln (real p) / ((real p)\\<^sup>2 - 1)", "assume p: \"p \\<in> {p. prime p \\<and> real p \\<le> x}\""], ["proof (state)\nthis:\n  p \\<in> {p. prime p \\<and> real p \\<le> x}\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       p \\<in> {p. prime p \\<and> real p \\<le> x} \\<Longrightarrow>\n       ln (real p) *\n       (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n          (1 / real p) ^ i)\n       \\<le> ln (real p) / ((real p)\\<^sup>2 - 1)", "have \"p > 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 < p", "using p"], ["proof (prove)\nusing this:\n  p \\<in> {p. prime p \\<and> real p \\<le> x}\n\ngoal (1 subgoal):\n 1. 1 < p", "by (auto dest: prime_gt_1_nat)"], ["proof (state)\nthis:\n  1 < p\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       p \\<in> {p. prime p \\<and> real p \\<le> x} \\<Longrightarrow>\n       ln (real p) *\n       (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n          (1 / real p) ^ i)\n       \\<le> ln (real p) / ((real p)\\<^sup>2 - 1)", "have \"(\\<Sum>i | i > 0 \\<and> even i \\<and> real (p ^ i) \\<le> x. (1 / real p) ^ i) =\n            (\\<Sum>i | real (p ^ (2 * i + 2)) \\<le> x. (1 / real p) ^ (2 * i)) / real p ^ 2\"\n      (is \"_ = ?S / _\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n       (1 / real p) ^ i) =\n    (\\<Sum>i | real (p ^ (2 * i + 2)) \\<le> x. (1 / real p) ^ (2 * i)) /\n    (real p)\\<^sup>2", "unfolding sum_divide_distrib"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n       (1 / real p) ^ i) =\n    (\\<Sum>n\\<in>{i. real (p ^ (2 * i + 2)) \\<le> x}.\n       (1 / real p) ^ (2 * n) / (real p)\\<^sup>2)", "by (rule sum.reindex_bij_witness[of _ \"\\<lambda>i. 2 * Suc i\" \"\\<lambda>i. (i - 2) div 2\"])\n         (insert \\<open>p > 1\\<close>, auto simp: numeral_3_eq_3 power2_eq_square power_diff\n                 algebra_simps elim!: evenE)"], ["proof (state)\nthis:\n  (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n     (1 / real p) ^ i) =\n  (\\<Sum>i | real (p ^ (2 * i + 2)) \\<le> x. (1 / real p) ^ (2 * i)) /\n  (real p)\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       p \\<in> {p. prime p \\<and> real p \\<le> x} \\<Longrightarrow>\n       ln (real p) *\n       (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n          (1 / real p) ^ i)\n       \\<le> ln (real p) / ((real p)\\<^sup>2 - 1)", "also"], ["proof (state)\nthis:\n  (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n     (1 / real p) ^ i) =\n  (\\<Sum>i | real (p ^ (2 * i + 2)) \\<le> x. (1 / real p) ^ (2 * i)) /\n  (real p)\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       p \\<in> {p. prime p \\<and> real p \\<le> x} \\<Longrightarrow>\n       ln (real p) *\n       (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n          (1 / real p) ^ i)\n       \\<le> ln (real p) / ((real p)\\<^sup>2 - 1)", "have \"?S = (\\<Sum>i | real (p ^ (2 * i + 2)) \\<le> x. (1 / real p ^ 2) ^ i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i | real (p ^ (2 * i + 2)) \\<le> x. (1 / real p) ^ (2 * i)) =\n    (\\<Sum>i | real (p ^ (2 * i + 2)) \\<le> x. (1 / (real p)\\<^sup>2) ^ i)", "by (subst power_mult) (simp_all add: algebra_simps power_divide)"], ["proof (state)\nthis:\n  (\\<Sum>i | real (p ^ (2 * i + 2)) \\<le> x. (1 / real p) ^ (2 * i)) =\n  (\\<Sum>i | real (p ^ (2 * i + 2)) \\<le> x. (1 / (real p)\\<^sup>2) ^ i)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       p \\<in> {p. prime p \\<and> real p \\<le> x} \\<Longrightarrow>\n       ln (real p) *\n       (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n          (1 / real p) ^ i)\n       \\<le> ln (real p) / ((real p)\\<^sup>2 - 1)", "also"], ["proof (state)\nthis:\n  (\\<Sum>i | real (p ^ (2 * i + 2)) \\<le> x. (1 / real p) ^ (2 * i)) =\n  (\\<Sum>i | real (p ^ (2 * i + 2)) \\<le> x. (1 / (real p)\\<^sup>2) ^ i)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       p \\<in> {p. prime p \\<and> real p \\<le> x} \\<Longrightarrow>\n       ln (real p) *\n       (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n          (1 / real p) ^ i)\n       \\<le> ln (real p) / ((real p)\\<^sup>2 - 1)", "have \"\\<dots> \\<le> (\\<Sum>i. (1 / real p ^ 2) ^ i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i | real (p ^ (2 * i + 2)) \\<le> x. (1 / (real p)\\<^sup>2) ^ i)\n    \\<le> (\\<Sum>i. (1 / (real p)\\<^sup>2) ^ i)", "using exponents_le_finite[of p 2 2 x] \\<open>p > 1\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>1 < p; 0 < 2\\<rbrakk>\n  \\<Longrightarrow> finite {i. real (p ^ (2 * i + 2)) \\<le> x}\n  1 < p\n\ngoal (1 subgoal):\n 1. (\\<Sum>i | real (p ^ (2 * i + 2)) \\<le> x. (1 / (real p)\\<^sup>2) ^ i)\n    \\<le> (\\<Sum>i. (1 / (real p)\\<^sup>2) ^ i)", "by (intro sum_le_suminf) (auto simp: summable_geometric_iff)"], ["proof (state)\nthis:\n  (\\<Sum>i | real (p ^ (2 * i + 2)) \\<le> x. (1 / (real p)\\<^sup>2) ^ i)\n  \\<le> (\\<Sum>i. (1 / (real p)\\<^sup>2) ^ i)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       p \\<in> {p. prime p \\<and> real p \\<le> x} \\<Longrightarrow>\n       ln (real p) *\n       (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n          (1 / real p) ^ i)\n       \\<le> ln (real p) / ((real p)\\<^sup>2 - 1)", "also"], ["proof (state)\nthis:\n  (\\<Sum>i | real (p ^ (2 * i + 2)) \\<le> x. (1 / (real p)\\<^sup>2) ^ i)\n  \\<le> (\\<Sum>i. (1 / (real p)\\<^sup>2) ^ i)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       p \\<in> {p. prime p \\<and> real p \\<le> x} \\<Longrightarrow>\n       ln (real p) *\n       (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n          (1 / real p) ^ i)\n       \\<le> ln (real p) / ((real p)\\<^sup>2 - 1)", "have \"\\<dots> = real p ^ 2 / (real p ^ 2 - 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i. (1 / (real p)\\<^sup>2) ^ i) =\n    (real p)\\<^sup>2 / ((real p)\\<^sup>2 - 1)", "using \\<open>p > 1\\<close>"], ["proof (prove)\nusing this:\n  1 < p\n\ngoal (1 subgoal):\n 1. (\\<Sum>i. (1 / (real p)\\<^sup>2) ^ i) =\n    (real p)\\<^sup>2 / ((real p)\\<^sup>2 - 1)", "by (subst suminf_geometric) (auto simp: field_simps)"], ["proof (state)\nthis:\n  (\\<Sum>i. (1 / (real p)\\<^sup>2) ^ i) =\n  (real p)\\<^sup>2 / ((real p)\\<^sup>2 - 1)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       p \\<in> {p. prime p \\<and> real p \\<le> x} \\<Longrightarrow>\n       ln (real p) *\n       (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n          (1 / real p) ^ i)\n       \\<le> ln (real p) / ((real p)\\<^sup>2 - 1)", "also"], ["proof (state)\nthis:\n  (\\<Sum>i. (1 / (real p)\\<^sup>2) ^ i) =\n  (real p)\\<^sup>2 / ((real p)\\<^sup>2 - 1)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       p \\<in> {p. prime p \\<and> real p \\<le> x} \\<Longrightarrow>\n       ln (real p) *\n       (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n          (1 / real p) ^ i)\n       \\<le> ln (real p) / ((real p)\\<^sup>2 - 1)", "have \"\\<dots> / real p ^ 2 = 1 / (real p ^ 2 - 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real p)\\<^sup>2 / ((real p)\\<^sup>2 - 1) / (real p)\\<^sup>2 =\n    1 / ((real p)\\<^sup>2 - 1)", "using \\<open>p > 1 \\<close>"], ["proof (prove)\nusing this:\n  1 < p\n\ngoal (1 subgoal):\n 1. (real p)\\<^sup>2 / ((real p)\\<^sup>2 - 1) / (real p)\\<^sup>2 =\n    1 / ((real p)\\<^sup>2 - 1)", "by (simp add: divide_simps)"], ["proof (state)\nthis:\n  (real p)\\<^sup>2 / ((real p)\\<^sup>2 - 1) / (real p)\\<^sup>2 =\n  1 / ((real p)\\<^sup>2 - 1)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       p \\<in> {p. prime p \\<and> real p \\<le> x} \\<Longrightarrow>\n       ln (real p) *\n       (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n          (1 / real p) ^ i)\n       \\<le> ln (real p) / ((real p)\\<^sup>2 - 1)", "finally"], ["proof (chain)\npicking this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      x / (real p)\\<^sup>2 \\<le> y / (real p)\\<^sup>2) \\<Longrightarrow>\n  (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n     (1 / real p) ^ i)\n  \\<le> 1 / ((real p)\\<^sup>2 - 1)", "have \"(\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x. (1 / real p) ^ i) \\<le>\n                     1 / (real p ^ 2 - 1)\" (is \"?lhs \\<le> ?rhs\")"], ["proof (prove)\nusing this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      x / (real p)\\<^sup>2 \\<le> y / (real p)\\<^sup>2) \\<Longrightarrow>\n  (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n     (1 / real p) ^ i)\n  \\<le> 1 / ((real p)\\<^sup>2 - 1)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n       (1 / real p) ^ i)\n    \\<le> 1 / ((real p)\\<^sup>2 - 1)", "using \\<open>p > 1\\<close>"], ["proof (prove)\nusing this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      x / (real p)\\<^sup>2 \\<le> y / (real p)\\<^sup>2) \\<Longrightarrow>\n  (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n     (1 / real p) ^ i)\n  \\<le> 1 / ((real p)\\<^sup>2 - 1)\n  1 < p\n\ngoal (1 subgoal):\n 1. (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n       (1 / real p) ^ i)\n    \\<le> 1 / ((real p)\\<^sup>2 - 1)", "by (simp add: divide_right_mono)"], ["proof (state)\nthis:\n  (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n     (1 / real p) ^ i)\n  \\<le> 1 / ((real p)\\<^sup>2 - 1)\n\ngoal (1 subgoal):\n 1. \\<And>p.\n       p \\<in> {p. prime p \\<and> real p \\<le> x} \\<Longrightarrow>\n       ln (real p) *\n       (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n          (1 / real p) ^ i)\n       \\<le> ln (real p) / ((real p)\\<^sup>2 - 1)", "thus \"ln (real p) * ?lhs \\<le> ln (real p) / (real p ^ 2 - 1)\""], ["proof (prove)\nusing this:\n  (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n     (1 / real p) ^ i)\n  \\<le> 1 / ((real p)\\<^sup>2 - 1)\n\ngoal (1 subgoal):\n 1. ln (real p) *\n    (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n       (1 / real p) ^ i)\n    \\<le> ln (real p) / ((real p)\\<^sup>2 - 1)", "using \\<open>p > 1\\<close>"], ["proof (prove)\nusing this:\n  (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n     (1 / real p) ^ i)\n  \\<le> 1 / ((real p)\\<^sup>2 - 1)\n  1 < p\n\ngoal (1 subgoal):\n 1. ln (real p) *\n    (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n       (1 / real p) ^ i)\n    \\<le> ln (real p) / ((real p)\\<^sup>2 - 1)", "by (simp add: divide_simps)"], ["proof (state)\nthis:\n  ln (real p) *\n  (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n     (1 / real p) ^ i)\n  \\<le> ln (real p) / ((real p)\\<^sup>2 - 1)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>p | prime p \\<and> real p \\<le> x.\n     ln (real p) *\n     (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n        (1 / real p) ^ i))\n  \\<le> (\\<Sum>p | prime p \\<and> real p \\<le> x.\n           ln (real p) / ((real p)\\<^sup>2 - 1))\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "also"], ["proof (state)\nthis:\n  (\\<Sum>p | prime p \\<and> real p \\<le> x.\n     ln (real p) *\n     (\\<Sum>i | 0 < i \\<and> even i \\<and> real (p ^ i) \\<le> x.\n        (1 / real p) ^ i))\n  \\<le> (\\<Sum>p | prime p \\<and> real p \\<le> x.\n           ln (real p) / ((real p)\\<^sup>2 - 1))\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "have \"\\<dots> = (\\<Sum>\\<^sub>a p | prime p \\<and> real p \\<le> x. ln (real p) / (real p ^ 2 - 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>p | prime p \\<and> real p \\<le> x.\n       ln (real p) / ((real p)\\<^sup>2 - 1)) =\n    (\\<Sum>\\<^sub>ap | prime p \\<and> real p \\<le> x.\n       ln (real p) / ((real p)\\<^sup>2 - 1))", "using finite"], ["proof (prove)\nusing this:\n  finite {p. prime p \\<and> real p \\<le> x}\n\ngoal (1 subgoal):\n 1. (\\<Sum>p | prime p \\<and> real p \\<le> x.\n       ln (real p) / ((real p)\\<^sup>2 - 1)) =\n    (\\<Sum>\\<^sub>ap | prime p \\<and> real p \\<le> x.\n       ln (real p) / ((real p)\\<^sup>2 - 1))", "by (intro infsetsum_finite [symmetric]) auto"], ["proof (state)\nthis:\n  (\\<Sum>p | prime p \\<and> real p \\<le> x.\n     ln (real p) / ((real p)\\<^sup>2 - 1)) =\n  (\\<Sum>\\<^sub>ap | prime p \\<and> real p \\<le> x.\n     ln (real p) / ((real p)\\<^sup>2 - 1))\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "also"], ["proof (state)\nthis:\n  (\\<Sum>p | prime p \\<and> real p \\<le> x.\n     ln (real p) / ((real p)\\<^sup>2 - 1)) =\n  (\\<Sum>\\<^sub>ap | prime p \\<and> real p \\<le> x.\n     ln (real p) / ((real p)\\<^sup>2 - 1))\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "have \"\\<dots> \\<le> (\\<Sum>\\<^sub>a p | prime p. ln (real p) / (real p ^ 2 - 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>\\<^sub>ap | prime p \\<and> real p \\<le> x.\n       ln (real p) / ((real p)\\<^sup>2 - 1))\n    \\<le> (\\<Sum>\\<^sub>ap | prime p. ln (real p) / ((real p)\\<^sup>2 - 1))", "using eval_fds_logderiv_zeta_real[of 2] finite"], ["proof (prove)\nusing this:\n  1 < 2 \\<Longrightarrow>\n  (\\<lambda>p. ln (real p) / (real p powr 2 - 1)) abs_summable_on\n  {p. prime p}\n  1 < 2 \\<Longrightarrow>\n  deriv zeta (complex_of_real 2) / zeta (complex_of_real 2) =\n  - complex_of_real\n     (\\<Sum>\\<^sub>ap | prime p. ln (real p) / (real p powr 2 - 1))\n  finite {p. prime p \\<and> real p \\<le> x}\n\ngoal (1 subgoal):\n 1. (\\<Sum>\\<^sub>ap | prime p \\<and> real p \\<le> x.\n       ln (real p) / ((real p)\\<^sup>2 - 1))\n    \\<le> (\\<Sum>\\<^sub>ap | prime p. ln (real p) / ((real p)\\<^sup>2 - 1))", "by (intro infsetsum_mono_neutral_left divide_nonneg_pos) (auto simp: dest: prime_gt_1_nat)"], ["proof (state)\nthis:\n  (\\<Sum>\\<^sub>ap | prime p \\<and> real p \\<le> x.\n     ln (real p) / ((real p)\\<^sup>2 - 1))\n  \\<le> (\\<Sum>\\<^sub>ap | prime p. ln (real p) / ((real p)\\<^sup>2 - 1))\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "also"], ["proof (state)\nthis:\n  (\\<Sum>\\<^sub>ap | prime p \\<and> real p \\<le> x.\n     ln (real p) / ((real p)\\<^sup>2 - 1))\n  \\<le> (\\<Sum>\\<^sub>ap | prime p. ln (real p) / ((real p)\\<^sup>2 - 1))\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "have \"\\<dots> = -Re (deriv zeta (of_real 2) / zeta (of_real 2))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>\\<^sub>ap | prime p. ln (real p) / ((real p)\\<^sup>2 - 1)) =\n    - Re (deriv zeta (complex_of_real 2) / zeta (complex_of_real 2))", "by (subst eval_fds_logderiv_zeta_real) auto"], ["proof (state)\nthis:\n  (\\<Sum>\\<^sub>ap | prime p. ln (real p) / ((real p)\\<^sup>2 - 1)) =\n  - Re (deriv zeta (complex_of_real 2) / zeta (complex_of_real 2))\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "also"], ["proof (state)\nthis:\n  (\\<Sum>\\<^sub>ap | prime p. ln (real p) / ((real p)\\<^sup>2 - 1)) =\n  - Re (deriv zeta (complex_of_real 2) / zeta (complex_of_real 2))\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "have \"\\<dots> = (-Re (deriv zeta 2)) * (6 / pi\\<^sup>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - Re (deriv zeta (complex_of_real 2) / zeta (complex_of_real 2)) =\n    - Re (deriv zeta 2) * (6 / pi\\<^sup>2)", "by (simp add: zeta_even_numeral)"], ["proof (state)\nthis:\n  - Re (deriv zeta (complex_of_real 2) / zeta (complex_of_real 2)) =\n  - Re (deriv zeta 2) * (6 / pi\\<^sup>2)\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "also"], ["proof (state)\nthis:\n  - Re (deriv zeta (complex_of_real 2) / zeta (complex_of_real 2)) =\n  - Re (deriv zeta 2) * (6 / pi\\<^sup>2)\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "have \"\\<dots> < 1 * (6 / pi\\<^sup>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - Re (deriv zeta 2) * (6 / pi\\<^sup>2) < 1 * (6 / pi\\<^sup>2)", "using deriv_zeta_2_bound"], ["proof (prove)\nusing this:\n  - 1 < Re (deriv zeta 2)\n\ngoal (1 subgoal):\n 1. - Re (deriv zeta 2) * (6 / pi\\<^sup>2) < 1 * (6 / pi\\<^sup>2)", "by (intro mult_strict_right_mono) auto"], ["proof (state)\nthis:\n  - Re (deriv zeta 2) * (6 / pi\\<^sup>2) < 1 * (6 / pi\\<^sup>2)\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "also"], ["proof (state)\nthis:\n  - Re (deriv zeta 2) * (6 / pi\\<^sup>2) < 1 * (6 / pi\\<^sup>2)\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "have \"3 / 2 * \\<dots> = 9 / pi\\<^sup>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 / 2 * (1 * (6 / pi\\<^sup>2)) = 9 / pi\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  3 / 2 * (1 * (6 / pi\\<^sup>2)) = 9 / pi\\<^sup>2\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "finally"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<And>x y. x \\<le> y \\<Longrightarrow> 3 / 2 * x \\<le> 3 / 2 * y;\n   \\<And>x y. x \\<le> y \\<Longrightarrow> 3 / 2 * x \\<le> 3 / 2 * y;\n   \\<And>x y. x < y \\<Longrightarrow> 3 / 2 * x < 3 / 2 * y\\<rbrakk>\n  \\<Longrightarrow> R < 9 / pi\\<^sup>2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>x y. x \\<le> y \\<Longrightarrow> 3 / 2 * x \\<le> 3 / 2 * y;\n   \\<And>x y. x \\<le> y \\<Longrightarrow> 3 / 2 * x \\<le> 3 / 2 * y;\n   \\<And>x y. x < y \\<Longrightarrow> 3 / 2 * x < 3 / 2 * y\\<rbrakk>\n  \\<Longrightarrow> R < 9 / pi\\<^sup>2\n\ngoal (1 subgoal):\n 1. R < 9 / pi\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  R < 9 / pi\\<^sup>2\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\n  We now consider the equation\n  \\[\\ln (n!) = \\sum_{k\\leq n} \\Lambda(k) \\left\\lfloor\\frac{n}{k}\\right\\rfloor\\]\n  and estimate both sides in different ways. The left-hand-side can be estimated\n  using Stirling's formula, and we can simplify the right-hand side to\n  \\[\\sum_{k\\leq n} \\Lambda(k) \\left\\lfloor\\frac{n}{k}\\right\\rfloor =\n      \\sum_{p^i \\leq x, i \\geq 1} \\ln p \\left\\lfloor\\frac{n}{p^i}\\right\\rfloor\\]\n  and then split the sum into those $p^i$ with $i = 1$ and those with $i \\geq 2$.\n  Applying the bound we have just shown and some more routine estimates, we obtain the\n  following reasonably strong version of Mertens' First Theorem on the naturals:\n  $\\mathfrak M(n) - \\ln(n) \\in (-1-\\frac{9}{\\pi^2}; \\ln 4]$\n\\<close>"], ["", "theorem mertens_bound_strong:\n  fixes n :: nat assumes n: \"n > 0\"\n  shows   \"\\<MM> n - ln n \\<in> {-1 - 9 / pi\\<^sup>2<..ln 4}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "proof (cases \"n \\<ge> 3\")"], ["proof (state)\ngoal (2 subgoals):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}\n 2. \\<not> 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "case False"], ["proof (state)\nthis:\n  \\<not> 3 \\<le> n\n\ngoal (2 subgoals):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}\n 2. \\<not> 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "with n"], ["proof (chain)\npicking this:\n  0 < n\n  \\<not> 3 \\<le> n", "consider \"n = 1\" | \"n = 2\""], ["proof (prove)\nusing this:\n  0 < n\n  \\<not> 3 \\<le> n\n\ngoal (1 subgoal):\n 1. \\<lbrakk>n = 1 \\<Longrightarrow> thesis;\n     n = 2 \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by force"], ["proof (state)\nthis:\n  \\<lbrakk>n = 1 \\<Longrightarrow> ?thesis;\n   n = 2 \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (2 subgoals):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}\n 2. \\<not> 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>n = 1 \\<Longrightarrow> ?thesis;\n   n = 2 \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. n = 1 \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}\n 2. n = 2 \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "assume [simp]: \"n = 1\""], ["proof (state)\nthis:\n  n = 1\n\ngoal (2 subgoals):\n 1. n = 1 \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}\n 2. n = 2 \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"-1 + (-9 / pi\\<^sup>2) < 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - 1 + - 9 / pi\\<^sup>2 < 0", "by (intro add_neg_neg divide_neg_pos) auto"], ["proof (state)\nthis:\n  - 1 + - 9 / pi\\<^sup>2 < 0\n\ngoal (2 subgoals):\n 1. n = 1 \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}\n 2. n = 2 \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "thus ?thesis"], ["proof (prove)\nusing this:\n  - 1 + - 9 / pi\\<^sup>2 < 0\n\ngoal (1 subgoal):\n 1. \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "by simp"], ["proof (state)\nthis:\n  \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}\n\ngoal (1 subgoal):\n 1. n = 2 \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. n = 2 \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "assume [simp]: \"n = 2\""], ["proof (state)\nthis:\n  n = 2\n\ngoal (1 subgoal):\n 1. n = 2 \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have eq: \"\\<MM> n - ln n = -ln 2 / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<MM> (real n) - ln (real n) = - ln 2 / 2", "by (simp add: eval_\\<MM>)"], ["proof (state)\nthis:\n  \\<MM> (real n) - ln (real n) = - ln 2 / 2\n\ngoal (1 subgoal):\n 1. n = 2 \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"-1 - 9 / pi ^ 2 + ln 2 / 2 \\<le> -1 - 9 / 4 ^ 2 + 25 / 36 / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - 1 - 9 / pi\\<^sup>2 + ln 2 / 2 \\<le> - 1 - 9 / 4\\<^sup>2 + 25 / 36 / 2", "using pi_less_4 ln2_le_25_over_36"], ["proof (prove)\nusing this:\n  pi < 4\n  ln 2 \\<le> 25 / 36\n\ngoal (1 subgoal):\n 1. - 1 - 9 / pi\\<^sup>2 + ln 2 / 2 \\<le> - 1 - 9 / 4\\<^sup>2 + 25 / 36 / 2", "by (intro diff_mono add_mono divide_left_mono divide_right_mono power_mono) auto"], ["proof (state)\nthis:\n  - 1 - 9 / pi\\<^sup>2 + ln 2 / 2 \\<le> - 1 - 9 / 4\\<^sup>2 + 25 / 36 / 2\n\ngoal (1 subgoal):\n 1. n = 2 \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  - 1 - 9 / pi\\<^sup>2 + ln 2 / 2 \\<le> - 1 - 9 / 4\\<^sup>2 + 25 / 36 / 2\n\ngoal (1 subgoal):\n 1. n = 2 \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"\\<dots> < 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - 1 - 9 / 4\\<^sup>2 + 25 / 36 / 2 < 0", "by simp"], ["proof (state)\nthis:\n  - 1 - 9 / 4\\<^sup>2 + 25 / 36 / 2 < 0\n\ngoal (1 subgoal):\n 1. n = 2 \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "finally"], ["proof (chain)\npicking this:\n  - 1 - 9 / pi\\<^sup>2 + ln 2 / 2 < 0", "have \"-ln 2 / 2 > -1 - 9 / pi\\<^sup>2\""], ["proof (prove)\nusing this:\n  - 1 - 9 / pi\\<^sup>2 + ln 2 / 2 < 0\n\ngoal (1 subgoal):\n 1. - 1 - 9 / pi\\<^sup>2 < - ln 2 / 2", "by simp"], ["proof (state)\nthis:\n  - 1 - 9 / pi\\<^sup>2 < - ln 2 / 2\n\ngoal (1 subgoal):\n 1. n = 2 \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "moreover"], ["proof (state)\nthis:\n  - 1 - 9 / pi\\<^sup>2 < - ln 2 / 2\n\ngoal (1 subgoal):\n 1. n = 2 \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "{"], ["proof (state)\nthis:\n  - 1 - 9 / pi\\<^sup>2 < - ln 2 / 2\n\ngoal (1 subgoal):\n 1. n = 2 \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"-ln 2 / 2 \\<le> (0::real)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - ln 2 / 2 \\<le> 0", "by (intro divide_nonpos_pos) auto"], ["proof (state)\nthis:\n  - ln 2 / 2 \\<le> 0\n\ngoal (1 subgoal):\n 1. n = 2 \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  - ln 2 / 2 \\<le> 0\n\ngoal (1 subgoal):\n 1. n = 2 \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"\\<dots> \\<le> ln 4\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> ln 4", "by simp"], ["proof (state)\nthis:\n  0 \\<le> ln 4\n\ngoal (1 subgoal):\n 1. n = 2 \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "finally"], ["proof (chain)\npicking this:\n  - ln 2 / 2 \\<le> ln 4", "have \"-ln 2 / 2 \\<le> ln (4 :: real)\""], ["proof (prove)\nusing this:\n  - ln 2 / 2 \\<le> ln 4\n\ngoal (1 subgoal):\n 1. - ln 2 / 2 \\<le> ln 4", "by simp"], ["proof (state)\nthis:\n  - ln 2 / 2 \\<le> ln 4\n\ngoal (1 subgoal):\n 1. n = 2 \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "}"], ["proof (state)\nthis:\n  - ln 2 / 2 \\<le> ln 4\n\ngoal (1 subgoal):\n 1. n = 2 \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "ultimately"], ["proof (chain)\npicking this:\n  - 1 - 9 / pi\\<^sup>2 < - ln 2 / 2\n  - ln 2 / 2 \\<le> ln 4", "show ?thesis"], ["proof (prove)\nusing this:\n  - 1 - 9 / pi\\<^sup>2 < - ln 2 / 2\n  - ln 2 / 2 \\<le> ln 4\n\ngoal (1 subgoal):\n 1. \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "unfolding eq"], ["proof (prove)\nusing this:\n  - 1 - 9 / pi\\<^sup>2 < - ln 2 / 2\n  - ln 2 / 2 \\<le> ln 4\n\ngoal (1 subgoal):\n 1. - ln 2 / 2 \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "by simp"], ["proof (state)\nthis:\n  \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "case True"], ["proof (state)\nthis:\n  3 \\<le> n\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "hence n: \"n \\<ge> 3\""], ["proof (prove)\nusing this:\n  3 \\<le> n\n\ngoal (1 subgoal):\n 1. 3 \\<le> n", "by simp"], ["proof (state)\nthis:\n  3 \\<le> n\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have finite: \"finite {(p, i). prime p \\<and> i \\<ge> 1 \\<and> p ^ i \\<le> n}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {(p, i). prime p \\<and> 1 \\<le> i \\<and> p ^ i \\<le> n}", "proof (rule finite_subset)"], ["proof (state)\ngoal (2 subgoals):\n 1. {(p, i). prime p \\<and> 1 \\<le> i \\<and> p ^ i \\<le> n} \\<subseteq> ?B\n 2. finite ?B", "show \"{(p, i). prime p \\<and> i \\<ge> 1 \\<and> p ^ i \\<le> n}\n            \\<subseteq> {..nat \\<lfloor>root 1 (real n)\\<rfloor>} \\<times> {..nat \\<lfloor>log 2 (real n)\\<rfloor>}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(p, i). prime p \\<and> 1 \\<le> i \\<and> p ^ i \\<le> n}\n    \\<subseteq> {..nat \\<lfloor>root 1 (real n)\\<rfloor>} \\<times>\n                {..nat \\<lfloor>log 2 (real n)\\<rfloor>}", "using primepows_le_subset[of \"real n\" 1] n"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < real n; 0 < 1\\<rbrakk>\n  \\<Longrightarrow> {(p, i).\n                     prime p \\<and>\n                     1 \\<le> i \\<and> real (p ^ i) \\<le> real n}\n                    \\<subseteq> {..nat \\<lfloor>root 1\n           (real n)\\<rfloor>} \\<times>\n                                {..nat \\<lfloor>log 2 (real n)\\<rfloor>}\n  3 \\<le> n\n\ngoal (1 subgoal):\n 1. {(p, i). prime p \\<and> 1 \\<le> i \\<and> p ^ i \\<le> n}\n    \\<subseteq> {..nat \\<lfloor>root 1 (real n)\\<rfloor>} \\<times>\n                {..nat \\<lfloor>log 2 (real n)\\<rfloor>}", "unfolding of_nat_le_iff"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < real n; 0 < 1\\<rbrakk>\n  \\<Longrightarrow> {(p, i). prime p \\<and> 1 \\<le> i \\<and> p ^ i \\<le> n}\n                    \\<subseteq> {..nat \\<lfloor>root 1\n           (real n)\\<rfloor>} \\<times>\n                                {..nat \\<lfloor>log 2 (real n)\\<rfloor>}\n  3 \\<le> n\n\ngoal (1 subgoal):\n 1. {(p, i). prime p \\<and> 1 \\<le> i \\<and> p ^ i \\<le> n}\n    \\<subseteq> {..nat \\<lfloor>root 1 (real n)\\<rfloor>} \\<times>\n                {..nat \\<lfloor>log 2 (real n)\\<rfloor>}", "by auto"], ["proof (state)\nthis:\n  {(p, i). prime p \\<and> 1 \\<le> i \\<and> p ^ i \\<le> n}\n  \\<subseteq> {..nat \\<lfloor>root 1 (real n)\\<rfloor>} \\<times>\n              {..nat \\<lfloor>log 2 (real n)\\<rfloor>}\n\ngoal (1 subgoal):\n 1. finite\n     ({..nat \\<lfloor>root 1 (real n)\\<rfloor>} \\<times>\n      {..nat \\<lfloor>log 2 (real n)\\<rfloor>})", "qed auto"], ["proof (state)\nthis:\n  finite {(p, i). prime p \\<and> 1 \\<le> i \\<and> p ^ i \\<le> n}\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "define r where \"r = prime_sum_upto (\\<lambda>p. ln (real p) * frac (real n / real p)) n\""], ["proof (state)\nthis:\n  r =\n  prime_sum_upto (\\<lambda>p. ln (real p) * frac (real n / real p)) (real n)\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "define R where \"R = (\\<Sum>(p,i) | prime p \\<and> i > 1 \\<and> p ^ i \\<le> n. ln (real p) * real (n div (p ^ i)))\""], ["proof (state)\nthis:\n  R =\n  (\\<Sum>(p, i)\\<in>{(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}.\n     ln (real p) * real (n div p ^ i))\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "define R' where \"R' = (\\<Sum>(p,i) | prime p \\<and> i > 1 \\<and> p ^ i \\<le> n. ln (real p) / p ^ i)\""], ["proof (state)\nthis:\n  R' =\n  (\\<Sum>(p, i)\\<in>{(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}.\n     ln (real p) / real (p ^ i))\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have [simp]: \"ln (4 :: real) = 2 * ln 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln 4 = 2 * ln 2", "using ln_realpow[of 2 2]"], ["proof (prove)\nusing this:\n  0 < 2 \\<Longrightarrow> ln (2\\<^sup>2) = real 2 * ln 2\n\ngoal (1 subgoal):\n 1. ln 4 = 2 * ln 2", "by simp"], ["proof (state)\nthis:\n  ln 4 = 2 * ln 2\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "from pi_less_4"], ["proof (chain)\npicking this:\n  pi < 4", "have \"ln pi \\<le> ln 4\""], ["proof (prove)\nusing this:\n  pi < 4\n\ngoal (1 subgoal):\n 1. ln pi \\<le> ln 4", "by (subst ln_le_cancel_iff) auto"], ["proof (state)\nthis:\n  ln pi \\<le> ln 4\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  ln pi \\<le> ln 4\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"\\<dots> = 2 * ln 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln 4 = 2 * ln 2", "by simp"], ["proof (state)\nthis:\n  ln 4 = 2 * ln 2\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  ln 4 = 2 * ln 2\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"\\<dots> \\<le> 2 * (25 / 36)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * ln 2 \\<le> 2 * (25 / 36)", "by (intro mult_left_mono ln2_le_25_over_36) auto"], ["proof (state)\nthis:\n  2 * ln 2 \\<le> 2 * (25 / 36)\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "finally"], ["proof (chain)\npicking this:\n  ln pi \\<le> 2 * (25 / 36)", "have ln_pi: \"ln pi \\<le> 25 / 18\""], ["proof (prove)\nusing this:\n  ln pi \\<le> 2 * (25 / 36)\n\ngoal (1 subgoal):\n 1. ln pi \\<le> 25 / 18", "by simp"], ["proof (state)\nthis:\n  ln pi \\<le> 25 / 18\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"ln 3 \\<le> ln (4::nat)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln 3 \\<le> ln (real 4)", "by (subst ln_le_cancel_iff) auto"], ["proof (state)\nthis:\n  ln 3 \\<le> ln (real 4)\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  ln 3 \\<le> ln (real 4)\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"\\<dots> = 2 * ln 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln (real 4) = 2 * ln 2", "by simp"], ["proof (state)\nthis:\n  ln (real 4) = 2 * ln 2\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  ln (real 4) = 2 * ln 2\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"\\<dots> \\<le> 2 * (25 / 36)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * ln 2 \\<le> 2 * (25 / 36)", "by (intro mult_left_mono ln2_le_25_over_36) auto"], ["proof (state)\nthis:\n  2 * ln 2 \\<le> 2 * (25 / 36)\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "finally"], ["proof (chain)\npicking this:\n  ln 3 \\<le> 2 * (25 / 36)", "have ln_3: \"ln (3::real) \\<le> 25 / 18\""], ["proof (prove)\nusing this:\n  ln 3 \\<le> 2 * (25 / 36)\n\ngoal (1 subgoal):\n 1. ln 3 \\<le> 25 / 18", "by simp"], ["proof (state)\nthis:\n  ln 3 \\<le> 25 / 18\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"R / n = (\\<Sum>(p,i) | prime p \\<and> i > 1 \\<and> p ^ i \\<le> n. ln (real p) * (real (n div (p ^ i)) / n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R / real n =\n    (\\<Sum>(p, i)\\<in>{(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}.\n       ln (real p) * (real (n div p ^ i) / real n))", "by (simp add: R_def sum_divide_distrib field_simps case_prod_unfold)"], ["proof (state)\nthis:\n  R / real n =\n  (\\<Sum>(p, i)\\<in>{(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}.\n     ln (real p) * (real (n div p ^ i) / real n))\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  R / real n =\n  (\\<Sum>(p, i)\\<in>{(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}.\n     ln (real p) * (real (n div p ^ i) / real n))\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"\\<dots> \\<le> (\\<Sum>(p,i) | prime p \\<and> i > 1 \\<and> p ^ i \\<le> n. ln (real p) * (1 / p ^ i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(p, i)\\<in>{(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}.\n       ln (real p) * (real (n div p ^ i) / real n))\n    \\<le> (\\<Sum>(p, i)\n                 \\<in>{(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}.\n             ln (real p) * (1 / real p ^ i))", "unfolding R'_def case_prod_unfold"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>p | prime (fst p) \\<and> 1 < snd p \\<and> fst p ^ snd p \\<le> n.\n       ln (real (fst p)) * (real (n div fst p ^ snd p) / real n))\n    \\<le> (\\<Sum>p | prime (fst p) \\<and>\n                     1 < snd p \\<and> fst p ^ snd p \\<le> n.\n             ln (real (fst p)) * (1 / real (fst p) ^ snd p))", "using n"], ["proof (prove)\nusing this:\n  3 \\<le> n\n\ngoal (1 subgoal):\n 1. (\\<Sum>p | prime (fst p) \\<and> 1 < snd p \\<and> fst p ^ snd p \\<le> n.\n       ln (real (fst p)) * (real (n div fst p ^ snd p) / real n))\n    \\<le> (\\<Sum>p | prime (fst p) \\<and>\n                     1 < snd p \\<and> fst p ^ snd p \\<le> n.\n             ln (real (fst p)) * (1 / real (fst p) ^ snd p))", "by (intro sum_mono mult_left_mono) (auto simp: field_simps real_of_nat_div dest: prime_gt_0_nat)"], ["proof (state)\nthis:\n  (\\<Sum>(p, i)\\<in>{(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}.\n     ln (real p) * (real (n div p ^ i) / real n))\n  \\<le> (\\<Sum>(p, i)\n               \\<in>{(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}.\n           ln (real p) * (1 / real p ^ i))\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  (\\<Sum>(p, i)\\<in>{(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}.\n     ln (real p) * (real (n div p ^ i) / real n))\n  \\<le> (\\<Sum>(p, i)\n               \\<in>{(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}.\n           ln (real p) * (1 / real p ^ i))\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"\\<dots> = R'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(p, i)\\<in>{(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}.\n       ln (real p) * (1 / real p ^ i)) =\n    R'", "by (simp add: R'_def)"], ["proof (state)\nthis:\n  (\\<Sum>(p, i)\\<in>{(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}.\n     ln (real p) * (1 / real p ^ i)) =\n  R'\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  (\\<Sum>(p, i)\\<in>{(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}.\n     ln (real p) * (1 / real p ^ i)) =\n  R'\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"R' < 9 / pi\\<^sup>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R' < 9 / pi\\<^sup>2", "unfolding R'_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(p, i)\\<in>{(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}.\n       ln (real p) / real (p ^ i))\n    < 9 / pi\\<^sup>2", "using mertens_remainder_aux_bound[of n]"], ["proof (prove)\nusing this:\n  (\\<Sum>(p, i)\n         \\<in>{(p, i).\n               prime p \\<and> 1 < i \\<and> real (p ^ i) \\<le> real n}.\n     ln (real p) / real (p ^ i))\n  < 9 / pi\\<^sup>2\n\ngoal (1 subgoal):\n 1. (\\<Sum>(p, i)\\<in>{(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}.\n       ln (real p) / real (p ^ i))\n    < 9 / pi\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  R' < 9 / pi\\<^sup>2\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "finally"], ["proof (chain)\npicking this:\n  R / real n < 9 / pi\\<^sup>2", "have \"R / n < 9 / pi\\<^sup>2\""], ["proof (prove)\nusing this:\n  R / real n < 9 / pi\\<^sup>2\n\ngoal (1 subgoal):\n 1. R / real n < 9 / pi\\<^sup>2", "."], ["proof (state)\nthis:\n  R / real n < 9 / pi\\<^sup>2\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "moreover"], ["proof (state)\nthis:\n  R / real n < 9 / pi\\<^sup>2\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"R \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> R", "unfolding R_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>(p, i)\n                   \\<in>{(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}.\n               ln (real p) * real (n div p ^ i))", "by (intro sum_nonneg mult_nonneg_nonneg) (auto dest: prime_gt_0_nat)"], ["proof (state)\nthis:\n  0 \\<le> R\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "ultimately"], ["proof (chain)\npicking this:\n  R / real n < 9 / pi\\<^sup>2\n  0 \\<le> R", "have R_bounds: \"R / n \\<in> {0..<9 / pi\\<^sup>2}\""], ["proof (prove)\nusing this:\n  R / real n < 9 / pi\\<^sup>2\n  0 \\<le> R\n\ngoal (1 subgoal):\n 1. R / real n \\<in> {0..<9 / pi\\<^sup>2}", "by simp"], ["proof (state)\nthis:\n  R / real n \\<in> {0..<9 / pi\\<^sup>2}\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"ln (fact n :: real) \\<le> ln (2 * pi * n) / 2 + n * ln n - n + 1 / (12 * n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln (fact n)\n    \\<le> ln (2 * pi * real n) / 2 + real n * ln (real n) - real n +\n          1 / real (12 * n)", "using ln_fact_bounds(2)[of n] n"], ["proof (prove)\nusing this:\n  0 < n \\<Longrightarrow>\n  ln (fact n)\n  \\<le> ln (2 * pi * real n) / 2 + real n * ln (real n) - real n +\n        1 / (12 * real n)\n  3 \\<le> n\n\ngoal (1 subgoal):\n 1. ln (fact n)\n    \\<le> ln (2 * pi * real n) / 2 + real n * ln (real n) - real n +\n          1 / real (12 * n)", "by simp"], ["proof (state)\nthis:\n  ln (fact n)\n  \\<le> ln (2 * pi * real n) / 2 + real n * ln (real n) - real n +\n        1 / real (12 * n)\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  ln (fact n)\n  \\<le> ln (2 * pi * real n) / 2 + real n * ln (real n) - real n +\n        1 / real (12 * n)\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"\\<dots> / n - ln n = -1 + (ln 2 + ln pi) / (2 * n) + (ln n / n) / 2 + 1 / (12 * real n ^ 2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (ln (2 * pi * real n) / 2 + real n * ln (real n) - real n +\n     1 / real (12 * n)) /\n    real n -\n    ln (real n) =\n    - 1 + (ln 2 + ln pi) / real (2 * n) + ln (real n) / real n / 2 +\n    1 / (12 * (real n)\\<^sup>2)", "using n"], ["proof (prove)\nusing this:\n  3 \\<le> n\n\ngoal (1 subgoal):\n 1. (ln (2 * pi * real n) / 2 + real n * ln (real n) - real n +\n     1 / real (12 * n)) /\n    real n -\n    ln (real n) =\n    - 1 + (ln 2 + ln pi) / real (2 * n) + ln (real n) / real n / 2 +\n    1 / (12 * (real n)\\<^sup>2)", "by (simp add: power2_eq_square field_simps ln_mult)"], ["proof (state)\nthis:\n  (ln (2 * pi * real n) / 2 + real n * ln (real n) - real n +\n   1 / real (12 * n)) /\n  real n -\n  ln (real n) =\n  - 1 + (ln 2 + ln pi) / real (2 * n) + ln (real n) / real n / 2 +\n  1 / (12 * (real n)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  (ln (2 * pi * real n) / 2 + real n * ln (real n) - real n +\n   1 / real (12 * n)) /\n  real n -\n  ln (real n) =\n  - 1 + (ln 2 + ln pi) / real (2 * n) + ln (real n) / real n / 2 +\n  1 / (12 * (real n)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"\\<dots> \\<le> -1 + (ln 2 + ln pi) / (2 * 3) + (ln 3 / 3) / 2 + 1 / (12 * 3\\<^sup>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - 1 + (ln 2 + ln pi) / real (2 * n) + ln (real n) / real n / 2 +\n    1 / (12 * (real n)\\<^sup>2)\n    \\<le> - 1 + (ln 2 + ln pi) / (2 * 3) + ln 3 / 3 / 2 +\n          1 / (12 * 3\\<^sup>2)", "using exp_le n pi_gt3"], ["proof (prove)\nusing this:\n  exp 1 \\<le> 3\n  3 \\<le> n\n  3 < pi\n\ngoal (1 subgoal):\n 1. - 1 + (ln 2 + ln pi) / real (2 * n) + ln (real n) / real n / 2 +\n    1 / (12 * (real n)\\<^sup>2)\n    \\<le> - 1 + (ln 2 + ln pi) / (2 * 3) + ln 3 / 3 / 2 +\n          1 / (12 * 3\\<^sup>2)", "by (intro add_mono divide_right_mono divide_left_mono mult_mono\n              mult_pos_pos ln_x_over_x_mono power_mono) auto"], ["proof (state)\nthis:\n  - 1 + (ln 2 + ln pi) / real (2 * n) + ln (real n) / real n / 2 +\n  1 / (12 * (real n)\\<^sup>2)\n  \\<le> - 1 + (ln 2 + ln pi) / (2 * 3) + ln 3 / 3 / 2 + 1 / (12 * 3\\<^sup>2)\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  - 1 + (ln 2 + ln pi) / real (2 * n) + ln (real n) / real n / 2 +\n  1 / (12 * (real n)\\<^sup>2)\n  \\<le> - 1 + (ln 2 + ln pi) / (2 * 3) + ln 3 / 3 / 2 + 1 / (12 * 3\\<^sup>2)\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"\\<dots> \\<le> -1 + (25 / 36 + 25 / 18) / (2 * 3) + (25 / 18 / 3) / 2 + 1 / (12 * 3\\<^sup>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - 1 + (ln 2 + ln pi) / (2 * 3) + ln 3 / 3 / 2 + 1 / (12 * 3\\<^sup>2)\n    \\<le> - 1 + (25 / 36 + 25 / 18) / (2 * 3) + 25 / 18 / 3 / 2 +\n          1 / (12 * 3\\<^sup>2)", "using ln_pi ln2_le_25_over_36 ln_3"], ["proof (prove)\nusing this:\n  ln pi \\<le> 25 / 18\n  ln 2 \\<le> 25 / 36\n  ln 3 \\<le> 25 / 18\n\ngoal (1 subgoal):\n 1. - 1 + (ln 2 + ln pi) / (2 * 3) + ln 3 / 3 / 2 + 1 / (12 * 3\\<^sup>2)\n    \\<le> - 1 + (25 / 36 + 25 / 18) / (2 * 3) + 25 / 18 / 3 / 2 +\n          1 / (12 * 3\\<^sup>2)", "by (intro add_mono divide_left_mono divide_right_mono) auto"], ["proof (state)\nthis:\n  - 1 + (ln 2 + ln pi) / (2 * 3) + ln 3 / 3 / 2 + 1 / (12 * 3\\<^sup>2)\n  \\<le> - 1 + (25 / 36 + 25 / 18) / (2 * 3) + 25 / 18 / 3 / 2 +\n        1 / (12 * 3\\<^sup>2)\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  - 1 + (ln 2 + ln pi) / (2 * 3) + ln 3 / 3 / 2 + 1 / (12 * 3\\<^sup>2)\n  \\<le> - 1 + (25 / 36 + 25 / 18) / (2 * 3) + 25 / 18 / 3 / 2 +\n        1 / (12 * 3\\<^sup>2)\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"\\<dots> \\<le> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - 1 + (25 / 36 + 25 / 18) / (2 * 3) + 25 / 18 / 3 / 2 +\n    1 / (12 * 3\\<^sup>2)\n    \\<le> 0", "by simp"], ["proof (state)\nthis:\n  - 1 + (25 / 36 + 25 / 18) / (2 * 3) + 25 / 18 / 3 / 2 +\n  1 / (12 * 3\\<^sup>2)\n  \\<le> 0\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "finally"], ["proof (chain)\npicking this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      x / real n - ln (real n)\n      \\<le> y / real n - ln (real n)) \\<Longrightarrow>\n  ln (fact n) / real n - ln (real n) \\<le> 0", "have \"ln n - ln (fact n) / n \\<ge> 0\""], ["proof (prove)\nusing this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      x / real n - ln (real n)\n      \\<le> y / real n - ln (real n)) \\<Longrightarrow>\n  ln (fact n) / real n - ln (real n) \\<le> 0\n\ngoal (1 subgoal):\n 1. 0 \\<le> ln (real n) - ln (fact n) / real n", "using n"], ["proof (prove)\nusing this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      x / real n - ln (real n)\n      \\<le> y / real n - ln (real n)) \\<Longrightarrow>\n  ln (fact n) / real n - ln (real n) \\<le> 0\n  3 \\<le> n\n\ngoal (1 subgoal):\n 1. 0 \\<le> ln (real n) - ln (fact n) / real n", "by (simp add: divide_right_mono)"], ["proof (state)\nthis:\n  0 \\<le> ln (real n) - ln (fact n) / real n\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"-ln (fact n) \\<le> -ln (2 * pi * n) / 2 - n * ln n + n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - ln (fact n)\n    \\<le> - ln (2 * pi * real n) / 2 - real n * ln (real n) + real n", "using ln_fact_bounds(1)[of n] n"], ["proof (prove)\nusing this:\n  0 < n \\<Longrightarrow>\n  ln (2 * pi * real n) / 2 + real n * ln (real n) - real n \\<le> ln (fact n)\n  3 \\<le> n\n\ngoal (1 subgoal):\n 1. - ln (fact n)\n    \\<le> - ln (2 * pi * real n) / 2 - real n * ln (real n) + real n", "by simp"], ["proof (state)\nthis:\n  - ln (fact n)\n  \\<le> - ln (2 * pi * real n) / 2 - real n * ln (real n) + real n\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  - ln (fact n)\n  \\<le> - ln (2 * pi * real n) / 2 - real n * ln (real n) + real n\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"ln n + \\<dots> / n = -ln (2 * pi) / (2 * n) - (ln n / n) / 2 + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln (real n) +\n    (- ln (2 * pi * real n) / 2 - real n * ln (real n) + real n) / real n =\n    - ln (2 * pi) / real (2 * n) - ln (real n) / real n / 2 + 1", "using n"], ["proof (prove)\nusing this:\n  3 \\<le> n\n\ngoal (1 subgoal):\n 1. ln (real n) +\n    (- ln (2 * pi * real n) / 2 - real n * ln (real n) + real n) / real n =\n    - ln (2 * pi) / real (2 * n) - ln (real n) / real n / 2 + 1", "by (simp add: field_simps ln_mult)"], ["proof (state)\nthis:\n  ln (real n) +\n  (- ln (2 * pi * real n) / 2 - real n * ln (real n) + real n) / real n =\n  - ln (2 * pi) / real (2 * n) - ln (real n) / real n / 2 + 1\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  ln (real n) +\n  (- ln (2 * pi * real n) / 2 - real n * ln (real n) + real n) / real n =\n  - ln (2 * pi) / real (2 * n) - ln (real n) / real n / 2 + 1\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"\\<dots> \\<le> 0 - 0 + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - ln (2 * pi) / real (2 * n) - ln (real n) / real n / 2 + 1\n    \\<le> 0 - 0 + 1", "using pi_gt3 n"], ["proof (prove)\nusing this:\n  3 < pi\n  3 \\<le> n\n\ngoal (1 subgoal):\n 1. - ln (2 * pi) / real (2 * n) - ln (real n) / real n / 2 + 1\n    \\<le> 0 - 0 + 1", "by (intro add_mono diff_mono) auto"], ["proof (state)\nthis:\n  - ln (2 * pi) / real (2 * n) - ln (real n) / real n / 2 + 1\n  \\<le> 0 - 0 + 1\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "finally"], ["proof (chain)\npicking this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      ln (real n) + x / real n\n      \\<le> ln (real n) + y / real n) \\<Longrightarrow>\n  ln (real n) + - ln (fact n) / real n \\<le> 0 - 0 + 1", "have upper: \"ln n - ln (fact n) / n \\<le> 1\""], ["proof (prove)\nusing this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      ln (real n) + x / real n\n      \\<le> ln (real n) + y / real n) \\<Longrightarrow>\n  ln (real n) + - ln (fact n) / real n \\<le> 0 - 0 + 1\n\ngoal (1 subgoal):\n 1. ln (real n) - ln (fact n) / real n \\<le> 1", "using n"], ["proof (prove)\nusing this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      ln (real n) + x / real n\n      \\<le> ln (real n) + y / real n) \\<Longrightarrow>\n  ln (real n) + - ln (fact n) / real n \\<le> 0 - 0 + 1\n  3 \\<le> n\n\ngoal (1 subgoal):\n 1. ln (real n) - ln (fact n) / real n \\<le> 1", "by (simp add: divide_right_mono)"], ["proof (state)\nthis:\n  ln (real n) - ln (fact n) / real n \\<le> 1\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "with \\<open>ln n - ln (fact n) / n \\<ge> 0\\<close>"], ["proof (chain)\npicking this:\n  0 \\<le> ln (real n) - ln (fact n) / real n\n  ln (real n) - ln (fact n) / real n \\<le> 1", "have fact_bounds: \"ln n - ln (fact n) / n \\<in> {0..1}\""], ["proof (prove)\nusing this:\n  0 \\<le> ln (real n) - ln (fact n) / real n\n  ln (real n) - ln (fact n) / real n \\<le> 1\n\ngoal (1 subgoal):\n 1. ln (real n) - ln (fact n) / real n \\<in> {0..1}", "by simp"], ["proof (state)\nthis:\n  ln (real n) - ln (fact n) / real n \\<in> {0..1}\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"r \\<le> prime_sum_upto (\\<lambda>p. ln p * 1) n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<le> prime_sum_upto (\\<lambda>p. ln (real p) * 1) (real n)", "using less_imp_le[OF frac_lt_1]"], ["proof (prove)\nusing this:\n  frac ?x1 \\<le> (1::?'a1)\n\ngoal (1 subgoal):\n 1. r \\<le> prime_sum_upto (\\<lambda>p. ln (real p) * 1) (real n)", "unfolding r_def \\<theta>_def prime_sum_upto_def"], ["proof (prove)\nusing this:\n  frac ?x1 \\<le> (1::?'a1)\n\ngoal (1 subgoal):\n 1. (\\<Sum>p | prime p \\<and> real p \\<le> real n.\n       ln (real p) * frac (real n / real p))\n    \\<le> (\\<Sum>p | prime p \\<and> real p \\<le> real n. ln (real p) * 1)", "by (intro sum_mono mult_left_mono) (auto simp: dest: prime_gt_0_nat)"], ["proof (state)\nthis:\n  r \\<le> prime_sum_upto (\\<lambda>p. ln (real p) * 1) (real n)\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  r \\<le> prime_sum_upto (\\<lambda>p. ln (real p) * 1) (real n)\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"\\<dots> = \\<theta> n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prime_sum_upto (\\<lambda>p. ln (real p) * 1) (real n) =\n    \\<theta> (real n)", "by (simp add: \\<theta>_def)"], ["proof (state)\nthis:\n  prime_sum_upto (\\<lambda>p. ln (real p) * 1) (real n) = \\<theta> (real n)\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  prime_sum_upto (\\<lambda>p. ln (real p) * 1) (real n) = \\<theta> (real n)\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"\\<dots> < ln 4 * n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<theta> (real n) < ln 4 * real n", "using n"], ["proof (prove)\nusing this:\n  3 \\<le> n\n\ngoal (1 subgoal):\n 1. \\<theta> (real n) < ln 4 * real n", "by (intro \\<theta>_upper_bound) auto"], ["proof (state)\nthis:\n  \\<theta> (real n) < ln 4 * real n\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "finally"], ["proof (chain)\npicking this:\n  r < ln 4 * real n", "have \"r / n < ln 4\""], ["proof (prove)\nusing this:\n  r < ln 4 * real n\n\ngoal (1 subgoal):\n 1. r / real n < ln 4", "using n"], ["proof (prove)\nusing this:\n  r < ln 4 * real n\n  3 \\<le> n\n\ngoal (1 subgoal):\n 1. r / real n < ln 4", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  r / real n < ln 4\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "moreover"], ["proof (state)\nthis:\n  r / real n < ln 4\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"r \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> r", "unfolding r_def prime_sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>p | prime p \\<and> real p \\<le> real n.\n               ln (real p) * frac (real n / real p))", "by (intro sum_nonneg mult_nonneg_nonneg) (auto dest: prime_gt_0_nat)"], ["proof (state)\nthis:\n  0 \\<le> r\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "ultimately"], ["proof (chain)\npicking this:\n  r / real n < ln 4\n  0 \\<le> r", "have r_bounds: \"r / n \\<in> {0..<ln 4}\""], ["proof (prove)\nusing this:\n  r / real n < ln 4\n  0 \\<le> r\n\ngoal (1 subgoal):\n 1. r / real n \\<in> {0..<ln 4}", "by simp"], ["proof (state)\nthis:\n  r / real n \\<in> {0..<ln 4}\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"ln (fact n :: real) = sum_upto (\\<lambda>k. mangoldt k * real (n div k)) (real n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln (fact n) =\n    sum_upto (\\<lambda>k. mangoldt k * real (n div k)) (real n)", "by (simp add: ln_fact_conv_sum_upto_mangoldt)"], ["proof (state)\nthis:\n  ln (fact n) = sum_upto (\\<lambda>k. mangoldt k * real (n div k)) (real n)\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  ln (fact n) = sum_upto (\\<lambda>k. mangoldt k * real (n div k)) (real n)\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"\\<dots> = (\\<Sum>(p,i) | prime p \\<and> i > 0 \\<and> real (p ^ i) \\<le> real n.\n                       ln (real p) * real (n div (p ^ i)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>k. mangoldt k * real (n div k)) (real n) =\n    (\\<Sum>(p, i)\n           \\<in>{(p, i).\n                 prime p \\<and> 0 < i \\<and> real (p ^ i) \\<le> real n}.\n       ln (real p) * real (n div p ^ i))", "by (intro sum_upto_primepows) (auto simp: mangoldt_non_primepow)"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>k. mangoldt k * real (n div k)) (real n) =\n  (\\<Sum>(p, i)\n         \\<in>{(p, i).\n               prime p \\<and> 0 < i \\<and> real (p ^ i) \\<le> real n}.\n     ln (real p) * real (n div p ^ i))\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>k. mangoldt k * real (n div k)) (real n) =\n  (\\<Sum>(p, i)\n         \\<in>{(p, i).\n               prime p \\<and> 0 < i \\<and> real (p ^ i) \\<le> real n}.\n     ln (real p) * real (n div p ^ i))\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"{(p, i). prime p \\<and> i > 0 \\<and> real (p ^ i) \\<le> real n} =\n               {(p, i). prime p \\<and> i = 1 \\<and> p \\<le> n} \\<union>\n               {(p, i). prime p \\<and> i > 1 \\<and> (p ^ i) \\<le> n}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(p, i). prime p \\<and> 0 < i \\<and> real (p ^ i) \\<le> real n} =\n    {(p, i). prime p \\<and> i = 1 \\<and> p \\<le> n} \\<union>\n    {(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}", "unfolding of_nat_le_iff"], ["proof (prove)\ngoal (1 subgoal):\n 1. {(p, i). prime p \\<and> 0 < i \\<and> p ^ i \\<le> n} =\n    {(p, i). prime p \\<and> i = 1 \\<and> p \\<le> n} \\<union>\n    {(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}", "by (auto simp: not_less le_Suc_eq)"], ["proof (state)\nthis:\n  {(p, i). prime p \\<and> 0 < i \\<and> real (p ^ i) \\<le> real n} =\n  {(p, i). prime p \\<and> i = 1 \\<and> p \\<le> n} \\<union>\n  {(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  {(p, i). prime p \\<and> 0 < i \\<and> real (p ^ i) \\<le> real n} =\n  {(p, i). prime p \\<and> i = 1 \\<and> p \\<le> n} \\<union>\n  {(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"(\\<Sum>(p,i)\\<in>\\<dots>. ln (real p) * real (n div (p ^ i))) =\n               (\\<Sum>(p,i) | prime p \\<and> i = 1 \\<and> p \\<le> n. ln (real p) * real (n div (p ^ i))) + R\"\n    (is \"_ = ?S + _\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(p, i)\n           \\<in>{(p, i). prime p \\<and> i = 1 \\<and> p \\<le> n} \\<union>\n                {(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}.\n       ln (real p) * real (n div p ^ i)) =\n    (\\<Sum>(p, i)\\<in>{(p, i). prime p \\<and> i = 1 \\<and> p \\<le> n}.\n       ln (real p) * real (n div p ^ i)) +\n    R", "by (subst sum.union_disjoint) (auto intro!: finite_subset[OF _ finite] simp: R_def)"], ["proof (state)\nthis:\n  (\\<Sum>(p, i)\n         \\<in>{(p, i). prime p \\<and> i = 1 \\<and> p \\<le> n} \\<union>\n              {(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}.\n     ln (real p) * real (n div p ^ i)) =\n  (\\<Sum>(p, i)\\<in>{(p, i). prime p \\<and> i = 1 \\<and> p \\<le> n}.\n     ln (real p) * real (n div p ^ i)) +\n  R\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  (\\<Sum>(p, i)\n         \\<in>{(p, i). prime p \\<and> i = 1 \\<and> p \\<le> n} \\<union>\n              {(p, i). prime p \\<and> 1 < i \\<and> p ^ i \\<le> n}.\n     ln (real p) * real (n div p ^ i)) =\n  (\\<Sum>(p, i)\\<in>{(p, i). prime p \\<and> i = 1 \\<and> p \\<le> n}.\n     ln (real p) * real (n div p ^ i)) +\n  R\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"?S = prime_sum_upto (\\<lambda>p. ln (real p) * real (n div p)) n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(p, i)\\<in>{(p, i). prime p \\<and> i = 1 \\<and> p \\<le> n}.\n       ln (real p) * real (n div p ^ i)) =\n    prime_sum_upto (\\<lambda>p. ln (real p) * real (n div p)) (real n)", "unfolding prime_sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(p, i)\\<in>{(p, i). prime p \\<and> i = 1 \\<and> p \\<le> n}.\n       ln (real p) * real (n div p ^ i)) =\n    (\\<Sum>p | prime p \\<and> real p \\<le> real n.\n       ln (real p) * real (n div p))", "by (intro sum.reindex_bij_witness[of _ \"\\<lambda>p. (p, 1)\" fst]) auto"], ["proof (state)\nthis:\n  (\\<Sum>(p, i)\\<in>{(p, i). prime p \\<and> i = 1 \\<and> p \\<le> n}.\n     ln (real p) * real (n div p ^ i)) =\n  prime_sum_upto (\\<lambda>p. ln (real p) * real (n div p)) (real n)\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  (\\<Sum>(p, i)\\<in>{(p, i). prime p \\<and> i = 1 \\<and> p \\<le> n}.\n     ln (real p) * real (n div p ^ i)) =\n  prime_sum_upto (\\<lambda>p. ln (real p) * real (n div p)) (real n)\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"\\<dots> = prime_sum_upto (\\<lambda>p. ln (real p) * real n / real p) n - r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prime_sum_upto (\\<lambda>p. ln (real p) * real (n div p)) (real n) =\n    prime_sum_upto (\\<lambda>p. ln (real p) * real n / real p) (real n) - r", "unfolding r_def prime_sum_upto_def sum_subtractf[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>p | prime p \\<and> real p \\<le> real n.\n       ln (real p) * real (n div p)) =\n    (\\<Sum>x\\<in>{p. prime p \\<and> real p \\<le> real n}.\n       ln (real x) * real n / real x - ln (real x) * frac (real n / real x))", "using n"], ["proof (prove)\nusing this:\n  3 \\<le> n\n\ngoal (1 subgoal):\n 1. (\\<Sum>p | prime p \\<and> real p \\<le> real n.\n       ln (real p) * real (n div p)) =\n    (\\<Sum>x\\<in>{p. prime p \\<and> real p \\<le> real n}.\n       ln (real x) * real n / real x - ln (real x) * frac (real n / real x))", "by (intro sum.cong) (auto simp: frac_def real_of_nat_div algebra_simps)"], ["proof (state)\nthis:\n  prime_sum_upto (\\<lambda>p. ln (real p) * real (n div p)) (real n) =\n  prime_sum_upto (\\<lambda>p. ln (real p) * real n / real p) (real n) - r\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "also"], ["proof (state)\nthis:\n  prime_sum_upto (\\<lambda>p. ln (real p) * real (n div p)) (real n) =\n  prime_sum_upto (\\<lambda>p. ln (real p) * real n / real p) (real n) - r\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "have \"prime_sum_upto (\\<lambda>p. ln (real p) * real n / real p) n = n * \\<MM> n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prime_sum_upto (\\<lambda>p. ln (real p) * real n / real p) (real n) =\n    real n * \\<MM> (real n)", "by (simp add: primes_M_def sum_distrib_left sum_distrib_right prime_sum_upto_def field_simps)"], ["proof (state)\nthis:\n  prime_sum_upto (\\<lambda>p. ln (real p) * real n / real p) (real n) =\n  real n * \\<MM> (real n)\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "finally"], ["proof (chain)\npicking this:\n  ln (fact n) = real n * \\<MM> (real n) - r + R", "have \"\\<MM> n - ln n = ln (fact n) / n - ln n + r / n - R / n\""], ["proof (prove)\nusing this:\n  ln (fact n) = real n * \\<MM> (real n) - r + R\n\ngoal (1 subgoal):\n 1. \\<MM> (real n) - ln (real n) =\n    ln (fact n) / real n - ln (real n) + r / real n - R / real n", "using n"], ["proof (prove)\nusing this:\n  ln (fact n) = real n * \\<MM> (real n) - r + R\n  3 \\<le> n\n\ngoal (1 subgoal):\n 1. \\<MM> (real n) - ln (real n) =\n    ln (fact n) / real n - ln (real n) + r / real n - R / real n", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  \\<MM> (real n) - ln (real n) =\n  ln (fact n) / real n - ln (real n) + r / real n - R / real n\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "hence \"ln n - \\<MM> n = ln n - ln (fact n) / n - r / n + R / n\""], ["proof (prove)\nusing this:\n  \\<MM> (real n) - ln (real n) =\n  ln (fact n) / real n - ln (real n) + r / real n - R / real n\n\ngoal (1 subgoal):\n 1. ln (real n) - \\<MM> (real n) =\n    ln (real n) - ln (fact n) / real n - r / real n + R / real n", "by simp"], ["proof (state)\nthis:\n  ln (real n) - \\<MM> (real n) =\n  ln (real n) - ln (fact n) / real n - r / real n + R / real n\n\ngoal (1 subgoal):\n 1. 3 \\<le> n \\<Longrightarrow>\n    \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "with fact_bounds r_bounds R_bounds"], ["proof (chain)\npicking this:\n  ln (real n) - ln (fact n) / real n \\<in> {0..1}\n  r / real n \\<in> {0..<ln 4}\n  R / real n \\<in> {0..<9 / pi\\<^sup>2}\n  ln (real n) - \\<MM> (real n) =\n  ln (real n) - ln (fact n) / real n - r / real n + R / real n", "show \"\\<MM> n - ln n \\<in> {-1 - 9 / pi\\<^sup>2<..ln 4}\""], ["proof (prove)\nusing this:\n  ln (real n) - ln (fact n) / real n \\<in> {0..1}\n  r / real n \\<in> {0..<ln 4}\n  R / real n \\<in> {0..<9 / pi\\<^sup>2}\n  ln (real n) - \\<MM> (real n) =\n  ln (real n) - ln (fact n) / real n - r / real n + R / real n\n\ngoal (1 subgoal):\n 1. \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}", "by simp"], ["proof (state)\nthis:\n  \\<MM> (real n) - ln (real n) \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\n  As a simple corollary, we obtain a similar bound on the reals.\n\\<close>"], ["", "lemma mertens_bound_real_strong:\n  fixes x :: real assumes x: \"x \\<ge> 1\"\n  shows   \"\\<MM> x - ln x \\<in> {-1 - 9 / pi ^ 2 - ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>)) <.. ln 4}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<MM> x - ln x\n    \\<in> {- 1 - 9 / pi\\<^sup>2 -\n           ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))<..ln 4}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<MM> x - ln x\n    \\<in> {- 1 - 9 / pi\\<^sup>2 -\n           ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))<..ln 4}", "have \"\\<MM> x - ln x \\<le> \\<MM> (real (nat \\<lfloor>x\\<rfloor>)) - ln (real (nat \\<lfloor>x\\<rfloor>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<MM> x - ln x\n    \\<le> \\<MM> (real (nat \\<lfloor>x\\<rfloor>)) -\n          ln (real (nat \\<lfloor>x\\<rfloor>))", "using assms"], ["proof (prove)\nusing this:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x\n    \\<le> \\<MM> (real (nat \\<lfloor>x\\<rfloor>)) -\n          ln (real (nat \\<lfloor>x\\<rfloor>))", "by simp"], ["proof (state)\nthis:\n  \\<MM> x - ln x\n  \\<le> \\<MM> (real (nat \\<lfloor>x\\<rfloor>)) -\n        ln (real (nat \\<lfloor>x\\<rfloor>))\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x\n    \\<in> {- 1 - 9 / pi\\<^sup>2 -\n           ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))<..ln 4}", "also"], ["proof (state)\nthis:\n  \\<MM> x - ln x\n  \\<le> \\<MM> (real (nat \\<lfloor>x\\<rfloor>)) -\n        ln (real (nat \\<lfloor>x\\<rfloor>))\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x\n    \\<in> {- 1 - 9 / pi\\<^sup>2 -\n           ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))<..ln 4}", "have \"\\<dots> \\<le> ln 4\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<MM> (real (nat \\<lfloor>x\\<rfloor>)) -\n    ln (real (nat \\<lfloor>x\\<rfloor>))\n    \\<le> ln 4", "using mertens_bound_strong[of \"nat \\<lfloor>x\\<rfloor>\"] assms"], ["proof (prove)\nusing this:\n  0 < nat \\<lfloor>x\\<rfloor> \\<Longrightarrow>\n  \\<MM> (real (nat \\<lfloor>x\\<rfloor>)) -\n  ln (real (nat \\<lfloor>x\\<rfloor>))\n  \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. \\<MM> (real (nat \\<lfloor>x\\<rfloor>)) -\n    ln (real (nat \\<lfloor>x\\<rfloor>))\n    \\<le> ln 4", "by simp"], ["proof (state)\nthis:\n  \\<MM> (real (nat \\<lfloor>x\\<rfloor>)) -\n  ln (real (nat \\<lfloor>x\\<rfloor>))\n  \\<le> ln 4\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x\n    \\<in> {- 1 - 9 / pi\\<^sup>2 -\n           ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))<..ln 4}", "finally"], ["proof (chain)\npicking this:\n  \\<MM> x - ln x \\<le> ln 4", "have \"\\<MM> x - ln x \\<le> ln 4\""], ["proof (prove)\nusing this:\n  \\<MM> x - ln x \\<le> ln 4\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x \\<le> ln 4", "."], ["proof (state)\nthis:\n  \\<MM> x - ln x \\<le> ln 4\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x\n    \\<in> {- 1 - 9 / pi\\<^sup>2 -\n           ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))<..ln 4}", "from assms"], ["proof (chain)\npicking this:\n  1 \\<le> x", "have pos: \"real_of_int \\<lfloor>x\\<rfloor> \\<noteq> 0\""], ["proof (prove)\nusing this:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. real_of_int \\<lfloor>x\\<rfloor> \\<noteq> 0", "by linarith"], ["proof (state)\nthis:\n  real_of_int \\<lfloor>x\\<rfloor> \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x\n    \\<in> {- 1 - 9 / pi\\<^sup>2 -\n           ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))<..ln 4}", "have \"frac x / real (nat \\<lfloor>x\\<rfloor>) \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> frac x / real (nat \\<lfloor>x\\<rfloor>)", "using assms"], ["proof (prove)\nusing this:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. 0 \\<le> frac x / real (nat \\<lfloor>x\\<rfloor>)", "by (intro divide_nonneg_pos) auto"], ["proof (state)\nthis:\n  0 \\<le> frac x / real (nat \\<lfloor>x\\<rfloor>)\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x\n    \\<in> {- 1 - 9 / pi\\<^sup>2 -\n           ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))<..ln 4}", "moreover"], ["proof (state)\nthis:\n  0 \\<le> frac x / real (nat \\<lfloor>x\\<rfloor>)\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x\n    \\<in> {- 1 - 9 / pi\\<^sup>2 -\n           ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))<..ln 4}", "have \"frac x / real (nat \\<lfloor>x\\<rfloor>) \\<le> 1 / 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. frac x / real (nat \\<lfloor>x\\<rfloor>) \\<le> 1 / 1", "using assms frac_lt_1[of x]"], ["proof (prove)\nusing this:\n  1 \\<le> x\n  frac x < 1\n\ngoal (1 subgoal):\n 1. frac x / real (nat \\<lfloor>x\\<rfloor>) \\<le> 1 / 1", "by (intro frac_le) auto"], ["proof (state)\nthis:\n  frac x / real (nat \\<lfloor>x\\<rfloor>) \\<le> 1 / 1\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x\n    \\<in> {- 1 - 9 / pi\\<^sup>2 -\n           ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))<..ln 4}", "ultimately"], ["proof (chain)\npicking this:\n  0 \\<le> frac x / real (nat \\<lfloor>x\\<rfloor>)\n  frac x / real (nat \\<lfloor>x\\<rfloor>) \\<le> 1 / 1", "have *: \"frac x / real (nat \\<lfloor>x\\<rfloor>) \\<in> {0..1}\""], ["proof (prove)\nusing this:\n  0 \\<le> frac x / real (nat \\<lfloor>x\\<rfloor>)\n  frac x / real (nat \\<lfloor>x\\<rfloor>) \\<le> 1 / 1\n\ngoal (1 subgoal):\n 1. frac x / real (nat \\<lfloor>x\\<rfloor>) \\<in> {0..1}", "by auto"], ["proof (state)\nthis:\n  frac x / real (nat \\<lfloor>x\\<rfloor>) \\<in> {0..1}\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x\n    \\<in> {- 1 - 9 / pi\\<^sup>2 -\n           ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))<..ln 4}", "have \"ln x - ln (real (nat \\<lfloor>x\\<rfloor>)) = ln (x / real (nat \\<lfloor>x\\<rfloor>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln x - ln (real (nat \\<lfloor>x\\<rfloor>)) =\n    ln (x / real (nat \\<lfloor>x\\<rfloor>))", "using assms"], ["proof (prove)\nusing this:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. ln x - ln (real (nat \\<lfloor>x\\<rfloor>)) =\n    ln (x / real (nat \\<lfloor>x\\<rfloor>))", "by (subst ln_div) auto"], ["proof (state)\nthis:\n  ln x - ln (real (nat \\<lfloor>x\\<rfloor>)) =\n  ln (x / real (nat \\<lfloor>x\\<rfloor>))\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x\n    \\<in> {- 1 - 9 / pi\\<^sup>2 -\n           ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))<..ln 4}", "also"], ["proof (state)\nthis:\n  ln x - ln (real (nat \\<lfloor>x\\<rfloor>)) =\n  ln (x / real (nat \\<lfloor>x\\<rfloor>))\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x\n    \\<in> {- 1 - 9 / pi\\<^sup>2 -\n           ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))<..ln 4}", "have \"x / real (nat \\<lfloor>x\\<rfloor>) = 1 + frac x / real (nat \\<lfloor>x\\<rfloor>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x / real (nat \\<lfloor>x\\<rfloor>) =\n    1 + frac x / real (nat \\<lfloor>x\\<rfloor>)", "using assms pos"], ["proof (prove)\nusing this:\n  1 \\<le> x\n  real_of_int \\<lfloor>x\\<rfloor> \\<noteq> 0\n\ngoal (1 subgoal):\n 1. x / real (nat \\<lfloor>x\\<rfloor>) =\n    1 + frac x / real (nat \\<lfloor>x\\<rfloor>)", "by (simp add: frac_def field_simps)"], ["proof (state)\nthis:\n  x / real (nat \\<lfloor>x\\<rfloor>) =\n  1 + frac x / real (nat \\<lfloor>x\\<rfloor>)\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x\n    \\<in> {- 1 - 9 / pi\\<^sup>2 -\n           ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))<..ln 4}", "finally"], ["proof (chain)\npicking this:\n  ln x - ln (real (nat \\<lfloor>x\\<rfloor>)) =\n  ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))", "have \"\\<MM> x - ln x > -1-9/pi^2-ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))\""], ["proof (prove)\nusing this:\n  ln x - ln (real (nat \\<lfloor>x\\<rfloor>)) =\n  ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))\n\ngoal (1 subgoal):\n 1. - 1 - 9 / pi\\<^sup>2 - ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))\n    < \\<MM> x - ln x", "using mertens_bound_strong[of \"nat \\<lfloor>x\\<rfloor>\"] x"], ["proof (prove)\nusing this:\n  ln x - ln (real (nat \\<lfloor>x\\<rfloor>)) =\n  ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))\n  0 < nat \\<lfloor>x\\<rfloor> \\<Longrightarrow>\n  \\<MM> (real (nat \\<lfloor>x\\<rfloor>)) -\n  ln (real (nat \\<lfloor>x\\<rfloor>))\n  \\<in> {- 1 - 9 / pi\\<^sup>2<..ln 4}\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. - 1 - 9 / pi\\<^sup>2 - ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))\n    < \\<MM> x - ln x", "by simp"], ["proof (state)\nthis:\n  - 1 - 9 / pi\\<^sup>2 - ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))\n  < \\<MM> x - ln x\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x\n    \\<in> {- 1 - 9 / pi\\<^sup>2 -\n           ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))<..ln 4}", "with \\<open>\\<MM> x - ln x \\<le> ln 4\\<close>"], ["proof (chain)\npicking this:\n  \\<MM> x - ln x \\<le> ln 4\n  - 1 - 9 / pi\\<^sup>2 - ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))\n  < \\<MM> x - ln x", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<MM> x - ln x \\<le> ln 4\n  - 1 - 9 / pi\\<^sup>2 - ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))\n  < \\<MM> x - ln x\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x\n    \\<in> {- 1 - 9 / pi\\<^sup>2 -\n           ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))<..ln 4}", "by simp"], ["proof (state)\nthis:\n  \\<MM> x - ln x\n  \\<in> {- 1 - 9 / pi\\<^sup>2 -\n         ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))<..ln 4}\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\n  We weaken this estimate a bit to obtain nicer bounds:\n\\<close>"], ["", "lemma mertens_bound_real':\n  fixes x :: real assumes x: \"x \\<ge> 1\"\n  shows   \"\\<MM> x - ln x \\<in> {-2<..25/18}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<MM> x - ln x \\<in> {- 2<..25 / 18}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<MM> x - ln x \\<in> {- 2<..25 / 18}", "have \"\\<MM> x - ln x \\<le> ln 4\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<MM> x - ln x \\<le> ln 4", "using mertens_bound_real_strong[of x] x"], ["proof (prove)\nusing this:\n  1 \\<le> x \\<Longrightarrow>\n  \\<MM> x - ln x\n  \\<in> {- 1 - 9 / pi\\<^sup>2 -\n         ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))<..ln 4}\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x \\<le> ln 4", "by simp"], ["proof (state)\nthis:\n  \\<MM> x - ln x \\<le> ln 4\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x \\<in> {- 2<..25 / 18}", "also"], ["proof (state)\nthis:\n  \\<MM> x - ln x \\<le> ln 4\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x \\<in> {- 2<..25 / 18}", "have \"\\<dots> \\<le> 25 / 18\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln 4 \\<le> 25 / 18", "using ln_realpow[of 2 2] ln2_le_25_over_36"], ["proof (prove)\nusing this:\n  0 < 2 \\<Longrightarrow> ln (2\\<^sup>2) = real 2 * ln 2\n  ln 2 \\<le> 25 / 36\n\ngoal (1 subgoal):\n 1. ln 4 \\<le> 25 / 18", "by simp"], ["proof (state)\nthis:\n  ln 4 \\<le> 25 / 18\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x \\<in> {- 2<..25 / 18}", "finally"], ["proof (chain)\npicking this:\n  \\<MM> x - ln x \\<le> 25 / 18", "have \"\\<MM> x - ln x \\<le> 25 / 18\""], ["proof (prove)\nusing this:\n  \\<MM> x - ln x \\<le> 25 / 18\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x \\<le> 25 / 18", "."], ["proof (state)\nthis:\n  \\<MM> x - ln x \\<le> 25 / 18\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x \\<in> {- 2<..25 / 18}", "have ln2: \"ln (2 :: real) \\<in> {2/3..25/36}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln 2 \\<in> {2 / 3..25 / 36}", "using ln_approx_bounds[of 2 1]"], ["proof (prove)\nusing this:\n  1 < 2 \\<Longrightarrow>\n  ln 2\n  \\<in> {\\<Sum>k<1.\n            2 * ((2 - 1) / (2 + 1)) ^ (2 * k + 1) /\n            real\n             (2 * k +\n              1)..(\\<Sum>k<1.\n                      2 * ((2 - 1) / (2 + 1)) ^ (2 * k + 1) /\n                      real (2 * k + 1)) +\n                  2 *\n                  (((2 - 1) / (2 + 1)) ^ (2 * 1 + 1) /\n                   (1 - ((2 - 1) / (2 + 1))\\<^sup>2) /\n                   real (2 * 1 + 1))}\n\ngoal (1 subgoal):\n 1. ln 2 \\<in> {2 / 3..25 / 36}", "by (simp add: eval_nat_numeral)"], ["proof (state)\nthis:\n  ln 2 \\<in> {2 / 3..25 / 36}\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x \\<in> {- 2<..25 / 18}", "have ln3: \"ln (3::real) \\<in> {1..10/9}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln 3 \\<in> {1..10 / 9}", "using ln_approx_bounds[of 3 1]"], ["proof (prove)\nusing this:\n  1 < 3 \\<Longrightarrow>\n  ln 3\n  \\<in> {\\<Sum>k<1.\n            2 * ((3 - 1) / (3 + 1)) ^ (2 * k + 1) /\n            real\n             (2 * k +\n              1)..(\\<Sum>k<1.\n                      2 * ((3 - 1) / (3 + 1)) ^ (2 * k + 1) /\n                      real (2 * k + 1)) +\n                  2 *\n                  (((3 - 1) / (3 + 1)) ^ (2 * 1 + 1) /\n                   (1 - ((3 - 1) / (3 + 1))\\<^sup>2) /\n                   real (2 * 1 + 1))}\n\ngoal (1 subgoal):\n 1. ln 3 \\<in> {1..10 / 9}", "by (simp add: eval_nat_numeral)"], ["proof (state)\nthis:\n  ln 3 \\<in> {1..10 / 9}\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x \\<in> {- 2<..25 / 18}", "have ln5: \"ln (5::real) \\<in> {4/3..76/45}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln 5 \\<in> {4 / 3..76 / 45}", "using ln_approx_bounds[of 5 1]"], ["proof (prove)\nusing this:\n  1 < 5 \\<Longrightarrow>\n  ln 5\n  \\<in> {\\<Sum>k<1.\n            2 * ((5 - 1) / (5 + 1)) ^ (2 * k + 1) /\n            real\n             (2 * k +\n              1)..(\\<Sum>k<1.\n                      2 * ((5 - 1) / (5 + 1)) ^ (2 * k + 1) /\n                      real (2 * k + 1)) +\n                  2 *\n                  (((5 - 1) / (5 + 1)) ^ (2 * 1 + 1) /\n                   (1 - ((5 - 1) / (5 + 1))\\<^sup>2) /\n                   real (2 * 1 + 1))}\n\ngoal (1 subgoal):\n 1. ln 5 \\<in> {4 / 3..76 / 45}", "by (simp add: eval_nat_numeral)"], ["proof (state)\nthis:\n  ln 5 \\<in> {4 / 3..76 / 45}\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x \\<in> {- 2<..25 / 18}", "have ln7: \"ln (7::real) \\<in> {3/2..15/7}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln 7 \\<in> {3 / 2..15 / 7}", "using ln_approx_bounds[of 7 1]"], ["proof (prove)\nusing this:\n  1 < 7 \\<Longrightarrow>\n  ln 7\n  \\<in> {\\<Sum>k<1.\n            2 * ((7 - 1) / (7 + 1)) ^ (2 * k + 1) /\n            real\n             (2 * k +\n              1)..(\\<Sum>k<1.\n                      2 * ((7 - 1) / (7 + 1)) ^ (2 * k + 1) /\n                      real (2 * k + 1)) +\n                  2 *\n                  (((7 - 1) / (7 + 1)) ^ (2 * 1 + 1) /\n                   (1 - ((7 - 1) / (7 + 1))\\<^sup>2) /\n                   real (2 * 1 + 1))}\n\ngoal (1 subgoal):\n 1. ln 7 \\<in> {3 / 2..15 / 7}", "by (simp add: eval_nat_numeral)"], ["proof (state)\nthis:\n  ln 7 \\<in> {3 / 2..15 / 7}\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x \\<in> {- 2<..25 / 18}", "have ln11: \"ln (11::real) \\<in> {5/3..290/99}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln 11 \\<in> {5 / 3..290 / 99}", "using ln_approx_bounds[of 11 1]"], ["proof (prove)\nusing this:\n  1 < 11 \\<Longrightarrow>\n  ln 11\n  \\<in> {\\<Sum>k<1.\n            2 * ((11 - 1) / (11 + 1)) ^ (2 * k + 1) /\n            real\n             (2 * k +\n              1)..(\\<Sum>k<1.\n                      2 * ((11 - 1) / (11 + 1)) ^ (2 * k + 1) /\n                      real (2 * k + 1)) +\n                  2 *\n                  (((11 - 1) / (11 + 1)) ^ (2 * 1 + 1) /\n                   (1 - ((11 - 1) / (11 + 1))\\<^sup>2) /\n                   real (2 * 1 + 1))}\n\ngoal (1 subgoal):\n 1. ln 11 \\<in> {5 / 3..290 / 99}", "by (simp add: eval_nat_numeral)\n\n  \\<comment> \\<open>Choosing the lower bound -2 is somewhat arbitrary here; it is a trade-off between getting\n      a reasonably tight bound and having to make lots of case distinctions. To get -2 as a lower\n      bound, we have to show the cases up to \\<open>x = 11\\<close> by case distinction,\\<close>"], ["proof (state)\nthis:\n  ln 11 \\<in> {5 / 3..290 / 99}\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x \\<in> {- 2<..25 / 18}", "have \"\\<MM> x - ln x > -2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - 2 < \\<MM> x - ln x", "proof (cases \"x \\<ge> 11\")"], ["proof (state)\ngoal (2 subgoals):\n 1. 11 \\<le> x \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. \\<not> 11 \\<le> x \\<Longrightarrow> - 2 < \\<MM> x - ln x", "case False"], ["proof (state)\nthis:\n  \\<not> 11 \\<le> x\n\ngoal (2 subgoals):\n 1. 11 \\<le> x \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. \\<not> 11 \\<le> x \\<Longrightarrow> - 2 < \\<MM> x - ln x", "hence \"x \\<in> {1..<2} \\<or> x \\<in> {2..<3} \\<or> x \\<in> {3..<5} \\<or> x \\<in> {5..<7} \\<or> x \\<in> {7..<11}\""], ["proof (prove)\nusing this:\n  \\<not> 11 \\<le> x\n\ngoal (1 subgoal):\n 1. x \\<in> {1..<2} \\<or>\n    x \\<in> {2..<3} \\<or>\n    x \\<in> {3..<5} \\<or> x \\<in> {5..<7} \\<or> x \\<in> {7..<11}", "using x"], ["proof (prove)\nusing this:\n  \\<not> 11 \\<le> x\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. x \\<in> {1..<2} \\<or>\n    x \\<in> {2..<3} \\<or>\n    x \\<in> {3..<5} \\<or> x \\<in> {5..<7} \\<or> x \\<in> {7..<11}", "by force"], ["proof (state)\nthis:\n  x \\<in> {1..<2} \\<or>\n  x \\<in> {2..<3} \\<or>\n  x \\<in> {3..<5} \\<or> x \\<in> {5..<7} \\<or> x \\<in> {7..<11}\n\ngoal (2 subgoals):\n 1. 11 \\<le> x \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. \\<not> 11 \\<le> x \\<Longrightarrow> - 2 < \\<MM> x - ln x", "thus ?thesis"], ["proof (prove)\nusing this:\n  x \\<in> {1..<2} \\<or>\n  x \\<in> {2..<3} \\<or>\n  x \\<in> {3..<5} \\<or> x \\<in> {5..<7} \\<or> x \\<in> {7..<11}\n\ngoal (1 subgoal):\n 1. - 2 < \\<MM> x - ln x", "proof (elim disjE)"], ["proof (state)\ngoal (5 subgoals):\n 1. x \\<in> {1..<2} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {2..<3} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 4. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 5. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "assume x: \"x \\<in> {1..<2}\""], ["proof (state)\nthis:\n  x \\<in> {1..<2}\n\ngoal (5 subgoals):\n 1. x \\<in> {1..<2} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {2..<3} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 4. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 5. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "hence \"ln x - \\<MM> x \\<le> ln 2 - 0\""], ["proof (prove)\nusing this:\n  x \\<in> {1..<2}\n\ngoal (1 subgoal):\n 1. ln x - \\<MM> x \\<le> ln 2 - 0", "by (intro diff_mono) auto"], ["proof (state)\nthis:\n  ln x - \\<MM> x \\<le> ln 2 - 0\n\ngoal (5 subgoals):\n 1. x \\<in> {1..<2} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {2..<3} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 4. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 5. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "also"], ["proof (state)\nthis:\n  ln x - \\<MM> x \\<le> ln 2 - 0\n\ngoal (5 subgoals):\n 1. x \\<in> {1..<2} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {2..<3} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 4. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 5. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "have \"\\<dots> < 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln 2 - 0 < 2", "using ln2_le_25_over_36"], ["proof (prove)\nusing this:\n  ln 2 \\<le> 25 / 36\n\ngoal (1 subgoal):\n 1. ln 2 - 0 < 2", "by simp"], ["proof (state)\nthis:\n  ln 2 - 0 < 2\n\ngoal (5 subgoals):\n 1. x \\<in> {1..<2} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {2..<3} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 4. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 5. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "finally"], ["proof (chain)\npicking this:\n  ln x - \\<MM> x < 2", "show ?thesis"], ["proof (prove)\nusing this:\n  ln x - \\<MM> x < 2\n\ngoal (1 subgoal):\n 1. - 2 < \\<MM> x - ln x", "by simp"], ["proof (state)\nthis:\n  - 2 < \\<MM> x - ln x\n\ngoal (4 subgoals):\n 1. x \\<in> {2..<3} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 4. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. x \\<in> {2..<3} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 4. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "assume x: \"x \\<in> {2..<3}\""], ["proof (state)\nthis:\n  x \\<in> {2..<3}\n\ngoal (4 subgoals):\n 1. x \\<in> {2..<3} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 4. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "hence [simp]: \"\\<lfloor>x\\<rfloor> = 2\""], ["proof (prove)\nusing this:\n  x \\<in> {2..<3}\n\ngoal (1 subgoal):\n 1. \\<lfloor>x\\<rfloor> = 2", "by (intro floor_unique) auto"], ["proof (state)\nthis:\n  \\<lfloor>x\\<rfloor> = 2\n\ngoal (4 subgoals):\n 1. x \\<in> {2..<3} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 4. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "from x"], ["proof (chain)\npicking this:\n  x \\<in> {2..<3}", "have \"ln x - \\<MM> x \\<le> ln 3 - ln 2 / 2\""], ["proof (prove)\nusing this:\n  x \\<in> {2..<3}\n\ngoal (1 subgoal):\n 1. ln x - \\<MM> x \\<le> ln 3 - ln 2 / 2", "by (intro diff_mono) (auto simp: eval_\\<MM>)"], ["proof (state)\nthis:\n  ln x - \\<MM> x \\<le> ln 3 - ln 2 / 2\n\ngoal (4 subgoals):\n 1. x \\<in> {2..<3} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 4. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "also"], ["proof (state)\nthis:\n  ln x - \\<MM> x \\<le> ln 3 - ln 2 / 2\n\ngoal (4 subgoals):\n 1. x \\<in> {2..<3} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 4. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "have \"\\<dots> = ln (9 / 2) / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln 3 - ln 2 / 2 = ln (9 / 2) / 2", "using ln_realpow[of 3 2]"], ["proof (prove)\nusing this:\n  0 < 3 \\<Longrightarrow> ln (3\\<^sup>2) = real 2 * ln 3\n\ngoal (1 subgoal):\n 1. ln 3 - ln 2 / 2 = ln (9 / 2) / 2", "by (simp add: ln_div)"], ["proof (state)\nthis:\n  ln 3 - ln 2 / 2 = ln (9 / 2) / 2\n\ngoal (4 subgoals):\n 1. x \\<in> {2..<3} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 4. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "also"], ["proof (state)\nthis:\n  ln 3 - ln 2 / 2 = ln (9 / 2) / 2\n\ngoal (4 subgoals):\n 1. x \\<in> {2..<3} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 4. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "have \"\\<dots> < 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln (9 / 2) / 2 < 2", "using ln_approx_bounds[of \"9 / 2\" 1]"], ["proof (prove)\nusing this:\n  1 < 9 / 2 \\<Longrightarrow>\n  ln (9 / 2)\n  \\<in> {\\<Sum>k<1.\n            2 * ((9 / 2 - 1) / (9 / 2 + 1)) ^ (2 * k + 1) /\n            real\n             (2 * k +\n              1)..(\\<Sum>k<1.\n                      2 * ((9 / 2 - 1) / (9 / 2 + 1)) ^ (2 * k + 1) /\n                      real (2 * k + 1)) +\n                  2 *\n                  (((9 / 2 - 1) / (9 / 2 + 1)) ^ (2 * 1 + 1) /\n                   (1 - ((9 / 2 - 1) / (9 / 2 + 1))\\<^sup>2) /\n                   real (2 * 1 + 1))}\n\ngoal (1 subgoal):\n 1. ln (9 / 2) / 2 < 2", "by (simp add: eval_nat_numeral)"], ["proof (state)\nthis:\n  ln (9 / 2) / 2 < 2\n\ngoal (4 subgoals):\n 1. x \\<in> {2..<3} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 4. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "finally"], ["proof (chain)\npicking this:\n  ln x - \\<MM> x < 2", "show ?thesis"], ["proof (prove)\nusing this:\n  ln x - \\<MM> x < 2\n\ngoal (1 subgoal):\n 1. - 2 < \\<MM> x - ln x", "by simp"], ["proof (state)\nthis:\n  - 2 < \\<MM> x - ln x\n\ngoal (3 subgoals):\n 1. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "assume x: \"x \\<in> {3..<5}\""], ["proof (state)\nthis:\n  x \\<in> {3..<5}\n\ngoal (3 subgoals):\n 1. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "hence \"\\<MM> 3 = \\<MM> x\""], ["proof (prove)\nusing this:\n  x \\<in> {3..<5}\n\ngoal (1 subgoal):\n 1. \\<MM> 3 = \\<MM> x", "unfolding primes_M_def"], ["proof (prove)\nusing this:\n  x \\<in> {3..<5}\n\ngoal (1 subgoal):\n 1. prime_sum_upto (\\<lambda>p. ln (real p) / real p) 3 =\n    prime_sum_upto (\\<lambda>p. ln (real p) / real p) x", "by (intro prime_sum_upto_eqI'[where a' = 3 and b' = 4])\n           (auto simp: nat_le_iff le_numeral_iff nat_eq_iff floor_eq_iff)"], ["proof (state)\nthis:\n  \\<MM> 3 = \\<MM> x\n\ngoal (3 subgoals):\n 1. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "also"], ["proof (state)\nthis:\n  \\<MM> 3 = \\<MM> x\n\ngoal (3 subgoals):\n 1. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "have \"\\<MM> 3 = ln 2 / 2 + ln 3 / 3\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<MM> 3 = ln 2 / 2 + ln 3 / 3", "by (simp add: eval_\\<MM> eval_nat_numeral mark_out_code)"], ["proof (state)\nthis:\n  \\<MM> 3 = ln 2 / 2 + ln 3 / 3\n\ngoal (3 subgoals):\n 1. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "finally"], ["proof (chain)\npicking this:\n  ln 2 / 2 + ln 3 / 3 = \\<MM> x", "have [simp]: \"\\<MM> x = ln 2 / 2 + ln 3 / 3\""], ["proof (prove)\nusing this:\n  ln 2 / 2 + ln 3 / 3 = \\<MM> x\n\ngoal (1 subgoal):\n 1. \\<MM> x = ln 2 / 2 + ln 3 / 3", ".."], ["proof (state)\nthis:\n  \\<MM> x = ln 2 / 2 + ln 3 / 3\n\ngoal (3 subgoals):\n 1. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "from x"], ["proof (chain)\npicking this:\n  x \\<in> {3..<5}", "have \"ln x - \\<MM> x \\<le> ln 5 - (ln 2 / 2 + ln 3 / 3)\""], ["proof (prove)\nusing this:\n  x \\<in> {3..<5}\n\ngoal (1 subgoal):\n 1. ln x - \\<MM> x \\<le> ln 5 - (ln 2 / 2 + ln 3 / 3)", "by (intro diff_mono) auto"], ["proof (state)\nthis:\n  ln x - \\<MM> x \\<le> ln 5 - (ln 2 / 2 + ln 3 / 3)\n\ngoal (3 subgoals):\n 1. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "also"], ["proof (state)\nthis:\n  ln x - \\<MM> x \\<le> ln 5 - (ln 2 / 2 + ln 3 / 3)\n\ngoal (3 subgoals):\n 1. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "have \"\\<dots> < 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln 5 - (ln 2 / 2 + ln 3 / 3) < 2", "using ln2 ln3 ln5"], ["proof (prove)\nusing this:\n  ln 2 \\<in> {2 / 3..25 / 36}\n  ln 3 \\<in> {1..10 / 9}\n  ln 5 \\<in> {4 / 3..76 / 45}\n\ngoal (1 subgoal):\n 1. ln 5 - (ln 2 / 2 + ln 3 / 3) < 2", "by simp"], ["proof (state)\nthis:\n  ln 5 - (ln 2 / 2 + ln 3 / 3) < 2\n\ngoal (3 subgoals):\n 1. x \\<in> {3..<5} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 3. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "finally"], ["proof (chain)\npicking this:\n  ln x - \\<MM> x < 2", "show ?thesis"], ["proof (prove)\nusing this:\n  ln x - \\<MM> x < 2\n\ngoal (1 subgoal):\n 1. - 2 < \\<MM> x - ln x", "by simp"], ["proof (state)\nthis:\n  - 2 < \\<MM> x - ln x\n\ngoal (2 subgoals):\n 1. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "assume x: \"x \\<in> {5..<7}\""], ["proof (state)\nthis:\n  x \\<in> {5..<7}\n\ngoal (2 subgoals):\n 1. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "hence \"\\<MM> 5 = \\<MM> x\""], ["proof (prove)\nusing this:\n  x \\<in> {5..<7}\n\ngoal (1 subgoal):\n 1. \\<MM> 5 = \\<MM> x", "unfolding primes_M_def"], ["proof (prove)\nusing this:\n  x \\<in> {5..<7}\n\ngoal (1 subgoal):\n 1. prime_sum_upto (\\<lambda>p. ln (real p) / real p) 5 =\n    prime_sum_upto (\\<lambda>p. ln (real p) / real p) x", "by (intro prime_sum_upto_eqI'[where a' = 5 and b' = 6])\n           (auto simp: nat_le_iff le_numeral_iff nat_eq_iff floor_eq_iff)"], ["proof (state)\nthis:\n  \\<MM> 5 = \\<MM> x\n\ngoal (2 subgoals):\n 1. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "also"], ["proof (state)\nthis:\n  \\<MM> 5 = \\<MM> x\n\ngoal (2 subgoals):\n 1. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "have \"\\<MM> 5 = ln 2 / 2 + ln 3 / 3 + ln 5 / 5\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<MM> 5 = ln 2 / 2 + ln 3 / 3 + ln 5 / 5", "by (simp add: eval_\\<MM> eval_nat_numeral mark_out_code)"], ["proof (state)\nthis:\n  \\<MM> 5 = ln 2 / 2 + ln 3 / 3 + ln 5 / 5\n\ngoal (2 subgoals):\n 1. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "finally"], ["proof (chain)\npicking this:\n  ln 2 / 2 + ln 3 / 3 + ln 5 / 5 = \\<MM> x", "have [simp]: \"\\<MM> x = ln 2 / 2 + ln 3 / 3 + ln 5 / 5\""], ["proof (prove)\nusing this:\n  ln 2 / 2 + ln 3 / 3 + ln 5 / 5 = \\<MM> x\n\ngoal (1 subgoal):\n 1. \\<MM> x = ln 2 / 2 + ln 3 / 3 + ln 5 / 5", ".."], ["proof (state)\nthis:\n  \\<MM> x = ln 2 / 2 + ln 3 / 3 + ln 5 / 5\n\ngoal (2 subgoals):\n 1. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "from x"], ["proof (chain)\npicking this:\n  x \\<in> {5..<7}", "have \"ln x - \\<MM> x \\<le> ln 7 - (ln 2 / 2 + ln 3 / 3 + ln 5 / 5)\""], ["proof (prove)\nusing this:\n  x \\<in> {5..<7}\n\ngoal (1 subgoal):\n 1. ln x - \\<MM> x \\<le> ln 7 - (ln 2 / 2 + ln 3 / 3 + ln 5 / 5)", "by (intro diff_mono) auto"], ["proof (state)\nthis:\n  ln x - \\<MM> x \\<le> ln 7 - (ln 2 / 2 + ln 3 / 3 + ln 5 / 5)\n\ngoal (2 subgoals):\n 1. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "also"], ["proof (state)\nthis:\n  ln x - \\<MM> x \\<le> ln 7 - (ln 2 / 2 + ln 3 / 3 + ln 5 / 5)\n\ngoal (2 subgoals):\n 1. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "have \"\\<dots> < 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln 7 - (ln 2 / 2 + ln 3 / 3 + ln 5 / 5) < 2", "using ln2 ln3 ln5 ln7"], ["proof (prove)\nusing this:\n  ln 2 \\<in> {2 / 3..25 / 36}\n  ln 3 \\<in> {1..10 / 9}\n  ln 5 \\<in> {4 / 3..76 / 45}\n  ln 7 \\<in> {3 / 2..15 / 7}\n\ngoal (1 subgoal):\n 1. ln 7 - (ln 2 / 2 + ln 3 / 3 + ln 5 / 5) < 2", "by simp"], ["proof (state)\nthis:\n  ln 7 - (ln 2 / 2 + ln 3 / 3 + ln 5 / 5) < 2\n\ngoal (2 subgoals):\n 1. x \\<in> {5..<7} \\<Longrightarrow> - 2 < \\<MM> x - ln x\n 2. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "finally"], ["proof (chain)\npicking this:\n  ln x - \\<MM> x < 2", "show ?thesis"], ["proof (prove)\nusing this:\n  ln x - \\<MM> x < 2\n\ngoal (1 subgoal):\n 1. - 2 < \\<MM> x - ln x", "by simp"], ["proof (state)\nthis:\n  - 2 < \\<MM> x - ln x\n\ngoal (1 subgoal):\n 1. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "assume x: \"x \\<in> {7..<11}\""], ["proof (state)\nthis:\n  x \\<in> {7..<11}\n\ngoal (1 subgoal):\n 1. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "hence \"\\<MM> 7 = \\<MM> x\""], ["proof (prove)\nusing this:\n  x \\<in> {7..<11}\n\ngoal (1 subgoal):\n 1. \\<MM> 7 = \\<MM> x", "unfolding primes_M_def"], ["proof (prove)\nusing this:\n  x \\<in> {7..<11}\n\ngoal (1 subgoal):\n 1. prime_sum_upto (\\<lambda>p. ln (real p) / real p) 7 =\n    prime_sum_upto (\\<lambda>p. ln (real p) / real p) x", "by (intro prime_sum_upto_eqI'[where a' = 7 and b' = 10])\n           (auto simp: nat_le_iff le_numeral_iff nat_eq_iff floor_eq_iff)"], ["proof (state)\nthis:\n  \\<MM> 7 = \\<MM> x\n\ngoal (1 subgoal):\n 1. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "also"], ["proof (state)\nthis:\n  \\<MM> 7 = \\<MM> x\n\ngoal (1 subgoal):\n 1. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "have \"\\<MM> 7 = ln 2 / 2 + ln 3 / 3 + ln 5 / 5 + ln 7 / 7\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<MM> 7 = ln 2 / 2 + ln 3 / 3 + ln 5 / 5 + ln 7 / 7", "by (simp add: eval_\\<MM> eval_nat_numeral mark_out_code)"], ["proof (state)\nthis:\n  \\<MM> 7 = ln 2 / 2 + ln 3 / 3 + ln 5 / 5 + ln 7 / 7\n\ngoal (1 subgoal):\n 1. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "finally"], ["proof (chain)\npicking this:\n  ln 2 / 2 + ln 3 / 3 + ln 5 / 5 + ln 7 / 7 = \\<MM> x", "have [simp]: \"\\<MM> x = ln 2 / 2 + ln 3 / 3 + ln 5 / 5 + ln 7 / 7\""], ["proof (prove)\nusing this:\n  ln 2 / 2 + ln 3 / 3 + ln 5 / 5 + ln 7 / 7 = \\<MM> x\n\ngoal (1 subgoal):\n 1. \\<MM> x = ln 2 / 2 + ln 3 / 3 + ln 5 / 5 + ln 7 / 7", ".."], ["proof (state)\nthis:\n  \\<MM> x = ln 2 / 2 + ln 3 / 3 + ln 5 / 5 + ln 7 / 7\n\ngoal (1 subgoal):\n 1. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "from x"], ["proof (chain)\npicking this:\n  x \\<in> {7..<11}", "have \"ln x - \\<MM> x \\<le> ln 11 - (ln 2 / 2 + ln 3 / 3 + ln 5 / 5 + ln 7 / 7)\""], ["proof (prove)\nusing this:\n  x \\<in> {7..<11}\n\ngoal (1 subgoal):\n 1. ln x - \\<MM> x \\<le> ln 11 - (ln 2 / 2 + ln 3 / 3 + ln 5 / 5 + ln 7 / 7)", "by (intro diff_mono) auto"], ["proof (state)\nthis:\n  ln x - \\<MM> x \\<le> ln 11 - (ln 2 / 2 + ln 3 / 3 + ln 5 / 5 + ln 7 / 7)\n\ngoal (1 subgoal):\n 1. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "also"], ["proof (state)\nthis:\n  ln x - \\<MM> x \\<le> ln 11 - (ln 2 / 2 + ln 3 / 3 + ln 5 / 5 + ln 7 / 7)\n\ngoal (1 subgoal):\n 1. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "have \"\\<dots> < 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln 11 - (ln 2 / 2 + ln 3 / 3 + ln 5 / 5 + ln 7 / 7) < 2", "using ln2 ln3 ln5 ln7 ln11"], ["proof (prove)\nusing this:\n  ln 2 \\<in> {2 / 3..25 / 36}\n  ln 3 \\<in> {1..10 / 9}\n  ln 5 \\<in> {4 / 3..76 / 45}\n  ln 7 \\<in> {3 / 2..15 / 7}\n  ln 11 \\<in> {5 / 3..290 / 99}\n\ngoal (1 subgoal):\n 1. ln 11 - (ln 2 / 2 + ln 3 / 3 + ln 5 / 5 + ln 7 / 7) < 2", "by simp"], ["proof (state)\nthis:\n  ln 11 - (ln 2 / 2 + ln 3 / 3 + ln 5 / 5 + ln 7 / 7) < 2\n\ngoal (1 subgoal):\n 1. x \\<in> {7..<11} \\<Longrightarrow> - 2 < \\<MM> x - ln x", "finally"], ["proof (chain)\npicking this:\n  ln x - \\<MM> x < 2", "show ?thesis"], ["proof (prove)\nusing this:\n  ln x - \\<MM> x < 2\n\ngoal (1 subgoal):\n 1. - 2 < \\<MM> x - ln x", "by simp"], ["proof (state)\nthis:\n  - 2 < \\<MM> x - ln x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  - 2 < \\<MM> x - ln x\n\ngoal (1 subgoal):\n 1. 11 \\<le> x \\<Longrightarrow> - 2 < \\<MM> x - ln x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. 11 \\<le> x \\<Longrightarrow> - 2 < \\<MM> x - ln x", "case True"], ["proof (state)\nthis:\n  11 \\<le> x\n\ngoal (1 subgoal):\n 1. 11 \\<le> x \\<Longrightarrow> - 2 < \\<MM> x - ln x", "have \"ln x - \\<MM> x \\<le> 1 + 9/pi^2 + ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln x - \\<MM> x\n    \\<le> 1 + 9 / pi\\<^sup>2 +\n          ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))", "using mertens_bound_real_strong[of x] x"], ["proof (prove)\nusing this:\n  1 \\<le> x \\<Longrightarrow>\n  \\<MM> x - ln x\n  \\<in> {- 1 - 9 / pi\\<^sup>2 -\n         ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))<..ln 4}\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. ln x - \\<MM> x\n    \\<le> 1 + 9 / pi\\<^sup>2 +\n          ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))", "by simp"], ["proof (state)\nthis:\n  ln x - \\<MM> x\n  \\<le> 1 + 9 / pi\\<^sup>2 +\n        ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))\n\ngoal (1 subgoal):\n 1. 11 \\<le> x \\<Longrightarrow> - 2 < \\<MM> x - ln x", "also"], ["proof (state)\nthis:\n  ln x - \\<MM> x\n  \\<le> 1 + 9 / pi\\<^sup>2 +\n        ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>))\n\ngoal (1 subgoal):\n 1. 11 \\<le> x \\<Longrightarrow> - 2 < \\<MM> x - ln x", "have \"1 + frac x / real (nat \\<lfloor>x\\<rfloor>) \\<le> 1 + 1 / 11\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 + frac x / real (nat \\<lfloor>x\\<rfloor>) \\<le> 1 + 1 / 11", "using True frac_lt_1[of x]"], ["proof (prove)\nusing this:\n  11 \\<le> x\n  frac x < 1\n\ngoal (1 subgoal):\n 1. 1 + frac x / real (nat \\<lfloor>x\\<rfloor>) \\<le> 1 + 1 / 11", "by (intro add_mono frac_le) auto"], ["proof (state)\nthis:\n  1 + frac x / real (nat \\<lfloor>x\\<rfloor>) \\<le> 1 + 1 / 11\n\ngoal (1 subgoal):\n 1. 11 \\<le> x \\<Longrightarrow> - 2 < \\<MM> x - ln x", "hence \"ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>)) \\<le> ln (1 + 1 / 11)\""], ["proof (prove)\nusing this:\n  1 + frac x / real (nat \\<lfloor>x\\<rfloor>) \\<le> 1 + 1 / 11\n\ngoal (1 subgoal):\n 1. ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>)) \\<le> ln (1 + 1 / 11)", "using x"], ["proof (prove)\nusing this:\n  1 + frac x / real (nat \\<lfloor>x\\<rfloor>) \\<le> 1 + 1 / 11\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>)) \\<le> ln (1 + 1 / 11)", "by (subst ln_le_cancel_iff) (auto intro!: add_pos_nonneg)"], ["proof (state)\nthis:\n  ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>)) \\<le> ln (1 + 1 / 11)\n\ngoal (1 subgoal):\n 1. 11 \\<le> x \\<Longrightarrow> - 2 < \\<MM> x - ln x", "also"], ["proof (state)\nthis:\n  ln (1 + frac x / real (nat \\<lfloor>x\\<rfloor>)) \\<le> ln (1 + 1 / 11)\n\ngoal (1 subgoal):\n 1. 11 \\<le> x \\<Longrightarrow> - 2 < \\<MM> x - ln x", "have \"\\<dots> = ln (12 / 11)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln (1 + 1 / 11) = ln (12 / 11)", "by simp"], ["proof (state)\nthis:\n  ln (1 + 1 / 11) = ln (12 / 11)\n\ngoal (1 subgoal):\n 1. 11 \\<le> x \\<Longrightarrow> - 2 < \\<MM> x - ln x", "also"], ["proof (state)\nthis:\n  ln (1 + 1 / 11) = ln (12 / 11)\n\ngoal (1 subgoal):\n 1. 11 \\<le> x \\<Longrightarrow> - 2 < \\<MM> x - ln x", "have \"\\<dots> \\<le> 1585 / 18216\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln (12 / 11) \\<le> 1585 / 18216", "using ln_approx_bounds[of \"12 / 11\" 1]"], ["proof (prove)\nusing this:\n  1 < 12 / 11 \\<Longrightarrow>\n  ln (12 / 11)\n  \\<in> {\\<Sum>k<1.\n            2 * ((12 / 11 - 1) / (12 / 11 + 1)) ^ (2 * k + 1) /\n            real\n             (2 * k +\n              1)..(\\<Sum>k<1.\n                      2 * ((12 / 11 - 1) / (12 / 11 + 1)) ^ (2 * k + 1) /\n                      real (2 * k + 1)) +\n                  2 *\n                  (((12 / 11 - 1) / (12 / 11 + 1)) ^ (2 * 1 + 1) /\n                   (1 - ((12 / 11 - 1) / (12 / 11 + 1))\\<^sup>2) /\n                   real (2 * 1 + 1))}\n\ngoal (1 subgoal):\n 1. ln (12 / 11) \\<le> 1585 / 18216", "by (simp add: eval_nat_numeral)"], ["proof (state)\nthis:\n  ln (12 / 11) \\<le> 1585 / 18216\n\ngoal (1 subgoal):\n 1. 11 \\<le> x \\<Longrightarrow> - 2 < \\<MM> x - ln x", "also"], ["proof (state)\nthis:\n  ln (12 / 11) \\<le> 1585 / 18216\n\ngoal (1 subgoal):\n 1. 11 \\<le> x \\<Longrightarrow> - 2 < \\<MM> x - ln x", "have \"9 / pi ^ 2 \\<le> 9 / 3.141592653588 ^ 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 9 / pi\\<^sup>2 \\<le> 9 / (3141592653588 / 10 ^ 12)\\<^sup>2", "using pi_approx"], ["proof (prove)\nusing this:\n  3141592653588 / 10 ^ 12 \\<le> pi\n  pi \\<le> 31415926535899 / 10 ^ 13\n\ngoal (1 subgoal):\n 1. 9 / pi\\<^sup>2 \\<le> 9 / (3141592653588 / 10 ^ 12)\\<^sup>2", "by (intro divide_left_mono power_mono mult_pos_pos) auto"], ["proof (state)\nthis:\n  9 / pi\\<^sup>2 \\<le> 9 / (3141592653588 / 10 ^ 12)\\<^sup>2\n\ngoal (1 subgoal):\n 1. 11 \\<le> x \\<Longrightarrow> - 2 < \\<MM> x - ln x", "also"], ["proof (state)\nthis:\n  9 / pi\\<^sup>2 \\<le> 9 / (3141592653588 / 10 ^ 12)\\<^sup>2\n\ngoal (1 subgoal):\n 1. 11 \\<le> x \\<Longrightarrow> - 2 < \\<MM> x - ln x", "have \"1 + \\<dots> + 1585 / 18216 < 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 + 9 / (3141592653588 / 10 ^ 12)\\<^sup>2 + 1585 / 18216 < 2", "by (simp add: power2_eq_square)"], ["proof (state)\nthis:\n  1 + 9 / (3141592653588 / 10 ^ 12)\\<^sup>2 + 1585 / 18216 < 2\n\ngoal (1 subgoal):\n 1. 11 \\<le> x \\<Longrightarrow> - 2 < \\<MM> x - ln x", "finally"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<And>x y.\n              x \\<le> y \\<Longrightarrow>\n              1 + 9 / pi\\<^sup>2 + x \\<le> 1 + 9 / pi\\<^sup>2 + y;\n   \\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      1 + 9 / pi\\<^sup>2 + x \\<le> 1 + 9 / pi\\<^sup>2 + y;\n   \\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      1 + x + 1585 / 18216 \\<le> 1 + y + 1585 / 18216\\<rbrakk>\n  \\<Longrightarrow> ln x - \\<MM> x < 2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>x y.\n              x \\<le> y \\<Longrightarrow>\n              1 + 9 / pi\\<^sup>2 + x \\<le> 1 + 9 / pi\\<^sup>2 + y;\n   \\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      1 + 9 / pi\\<^sup>2 + x \\<le> 1 + 9 / pi\\<^sup>2 + y;\n   \\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      1 + x + 1585 / 18216 \\<le> 1 + y + 1585 / 18216\\<rbrakk>\n  \\<Longrightarrow> ln x - \\<MM> x < 2\n\ngoal (1 subgoal):\n 1. - 2 < \\<MM> x - ln x", "by simp"], ["proof (state)\nthis:\n  - 2 < \\<MM> x - ln x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  - 2 < \\<MM> x - ln x\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x \\<in> {- 2<..25 / 18}", "with \\<open>\\<MM> x - ln x \\<le> 25 / 18\\<close>"], ["proof (chain)\npicking this:\n  \\<MM> x - ln x \\<le> 25 / 18\n  - 2 < \\<MM> x - ln x", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<MM> x - ln x \\<le> 25 / 18\n  - 2 < \\<MM> x - ln x\n\ngoal (1 subgoal):\n 1. \\<MM> x - ln x \\<in> {- 2<..25 / 18}", "by simp"], ["proof (state)\nthis:\n  \\<MM> x - ln x \\<in> {- 2<..25 / 18}\n\ngoal:\nNo subgoals!", "qed"], ["", "corollary mertens_first_theorem:\n  fixes x :: real assumes x: \"x \\<ge> 1\"\n  shows   \"\\<bar>\\<MM> x - ln x\\<bar> < 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>\\<MM> x - ln x\\<bar> < 2", "using mertens_bound_real'[of x] x"], ["proof (prove)\nusing this:\n  1 \\<le> x \\<Longrightarrow> \\<MM> x - ln x \\<in> {- 2<..25 / 18}\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. \\<bar>\\<MM> x - ln x\\<bar> < 2", "by (simp add: abs_if)"], ["", "subsection \\<open>Mertens' Second Theorem\\<close>"], ["", "text \\<open>\n  Mertens' Second Theorem concerns the asymptotics of the Prime Harmonic Series, namely\n  \\[\\sum\\limits_{p \\leq x} \\frac{1}{p} = \\ln\\ln x + M + O\\left(\\frac{1}{\\ln x}\\right)\\]\n  where $M \\approx 0.261497$ is the Meissel--Mertens constant.\n\n  We define the constant in the following way:\n\\<close>"], ["", "definition meissel_mertens where\n  \"meissel_mertens = 1 - ln (ln 2) + integral {2..} (\\<lambda>t. (\\<MM> t - ln t) / (t * ln t ^ 2))\""], ["", "text \\<open>\n  We will require the value of the integral\n  $\\int_a^\\infty \\frac{t}{\\ln^2 t} \\textrm{d}t = \\frac{1}{\\ln a}$\n  as an upper bound on the remainder term:\n\\<close>"], ["", "lemma integral_one_over_x_ln_x_squared:\n  assumes a: \"(a::real) > 1\"\n  shows \"set_integrable lborel {a<..} (\\<lambda>t. 1 / (t * ln t ^ 2))\" (is ?th1)\n    and \"set_lebesgue_integral lborel {a<..} (\\<lambda>t. 1 / (t * ln t ^ 2)) = 1 / ln a\" (is ?th2)\n    and \"((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral 1 / ln a) {a<..}\" (is ?th3)"], ["proof (prove)\ngoal (1 subgoal):\n 1. set_integrable lborel {a<..} (\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) &&&\n    LBINT t:{a<..}. 1 / (t * (ln t)\\<^sup>2) = 1 / ln a &&&\n    ((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral 1 / ln a) {a<..}", "proof -"], ["proof (state)\ngoal (3 subgoals):\n 1. set_integrable lborel {a<..} (\\<lambda>t. 1 / (t * (ln t)\\<^sup>2))\n 2. LBINT t:{a<..}. 1 / (t * (ln t)\\<^sup>2) = 1 / ln a\n 3. ((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral 1 / ln a) {a<..}", "have cont: \"isCont (\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) x\" if \"x > a\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. isCont (\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) x", "using that a"], ["proof (prove)\nusing this:\n  a < x\n  1 < a\n\ngoal (1 subgoal):\n 1. isCont (\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) x", "by (auto intro!: continuous_intros)"], ["proof (state)\nthis:\n  a < ?x \\<Longrightarrow> isCont (\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) ?x\n\ngoal (3 subgoals):\n 1. set_integrable lborel {a<..} (\\<lambda>t. 1 / (t * (ln t)\\<^sup>2))\n 2. LBINT t:{a<..}. 1 / (t * (ln t)\\<^sup>2) = 1 / ln a\n 3. ((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral 1 / ln a) {a<..}", "have deriv: \"((\\<lambda>x. -1 / ln x) has_real_derivative 1 / (x * (ln x)\\<^sup>2)) (at x)\" if \"x > a\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. - 1 / ln x) has_real_derivative 1 / (x * (ln x)\\<^sup>2))\n     (at x)", "using that a"], ["proof (prove)\nusing this:\n  a < x\n  1 < a\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. - 1 / ln x) has_real_derivative 1 / (x * (ln x)\\<^sup>2))\n     (at x)", "by (auto intro!: derivative_eq_intros simp: power2_eq_square field_simps)"], ["proof (state)\nthis:\n  a < ?x \\<Longrightarrow>\n  ((\\<lambda>x. - 1 / ln x) has_real_derivative 1 / (?x * (ln ?x)\\<^sup>2))\n   (at ?x)\n\ngoal (3 subgoals):\n 1. set_integrable lborel {a<..} (\\<lambda>t. 1 / (t * (ln t)\\<^sup>2))\n 2. LBINT t:{a<..}. 1 / (t * (ln t)\\<^sup>2) = 1 / ln a\n 3. ((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral 1 / ln a) {a<..}", "have lim1: \"(((\\<lambda>x. - 1 / ln x) \\<circ> real_of_ereal) \\<longlongrightarrow> -(1 / ln a)) (at_right (ereal a))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (((\\<lambda>x. - 1 / ln x) \\<circ> real_of_ereal) \\<longlongrightarrow>\n     - (1 / ln a))\n     (at_right (ereal a))", "unfolding ereal_tendsto_simps"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. - 1 / ln x) \\<longlongrightarrow> - (1 / ln a))\n     (at_right a)", "using a"], ["proof (prove)\nusing this:\n  1 < a\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. - 1 / ln x) \\<longlongrightarrow> - (1 / ln a))\n     (at_right a)", "by (real_asymp simp: field_simps)"], ["proof (state)\nthis:\n  (((\\<lambda>x. - 1 / ln x) \\<circ> real_of_ereal) \\<longlongrightarrow>\n   - (1 / ln a))\n   (at_right (ereal a))\n\ngoal (3 subgoals):\n 1. set_integrable lborel {a<..} (\\<lambda>t. 1 / (t * (ln t)\\<^sup>2))\n 2. LBINT t:{a<..}. 1 / (t * (ln t)\\<^sup>2) = 1 / ln a\n 3. ((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral 1 / ln a) {a<..}", "have lim2: \"(((\\<lambda>x. - 1 / ln x) \\<circ> real_of_ereal) \\<longlongrightarrow> 0) (at_left \\<infinity>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (((\\<lambda>x. - 1 / ln x) \\<circ> real_of_ereal) \\<longlongrightarrow>\n     0)\n     (at_left \\<infinity>)", "unfolding ereal_tendsto_simps"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. - 1 / ln x) \\<longlongrightarrow> 0) at_top", "using a"], ["proof (prove)\nusing this:\n  1 < a\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. - 1 / ln x) \\<longlongrightarrow> 0) at_top", "by (real_asymp simp: field_simps)"], ["proof (state)\nthis:\n  (((\\<lambda>x. - 1 / ln x) \\<circ> real_of_ereal) \\<longlongrightarrow> 0)\n   (at_left \\<infinity>)\n\ngoal (3 subgoals):\n 1. set_integrable lborel {a<..} (\\<lambda>t. 1 / (t * (ln t)\\<^sup>2))\n 2. LBINT t:{a<..}. 1 / (t * (ln t)\\<^sup>2) = 1 / ln a\n 3. ((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral 1 / ln a) {a<..}", "have \"set_integrable lborel (einterval a \\<infinity>) (\\<lambda>t. 1 / (t * ln t ^ 2))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set_integrable lborel (einterval (ereal a) \\<infinity>)\n     (\\<lambda>t. 1 / (t * (ln t)\\<^sup>2))", "by (rule interval_integral_FTC_nonneg[OF _ deriv cont _ lim1 lim2]) (use a in auto)"], ["proof (state)\nthis:\n  set_integrable lborel (einterval (ereal a) \\<infinity>)\n   (\\<lambda>t. 1 / (t * (ln t)\\<^sup>2))\n\ngoal (3 subgoals):\n 1. set_integrable lborel {a<..} (\\<lambda>t. 1 / (t * (ln t)\\<^sup>2))\n 2. LBINT t:{a<..}. 1 / (t * (ln t)\\<^sup>2) = 1 / ln a\n 3. ((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral 1 / ln a) {a<..}", "thus ?th1"], ["proof (prove)\nusing this:\n  set_integrable lborel (einterval (ereal a) \\<infinity>)\n   (\\<lambda>t. 1 / (t * (ln t)\\<^sup>2))\n\ngoal (1 subgoal):\n 1. set_integrable lborel {a<..} (\\<lambda>t. 1 / (t * (ln t)\\<^sup>2))", "by simp"], ["proof (state)\nthis:\n  set_integrable lborel {a<..} (\\<lambda>t. 1 / (t * (ln t)\\<^sup>2))\n\ngoal (2 subgoals):\n 1. LBINT t:{a<..}. 1 / (t * (ln t)\\<^sup>2) = 1 / ln a\n 2. ((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral 1 / ln a) {a<..}", "have \"interval_lebesgue_integral lborel (ereal a) \\<infinity> (\\<lambda>t. 1 / (t * ln t ^ 2)) = 0 - (-(1 / ln a))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LBINT t=ereal a..\\<infinity>. 1 / (t * (ln t)\\<^sup>2) =\n    0 - - (1 / ln a)", "by (rule interval_integral_FTC_nonneg[OF _ deriv cont _ lim1 lim2]) (use a in auto)"], ["proof (state)\nthis:\n  LBINT t=ereal a..\\<infinity>. 1 / (t * (ln t)\\<^sup>2) = 0 - - (1 / ln a)\n\ngoal (2 subgoals):\n 1. LBINT t:{a<..}. 1 / (t * (ln t)\\<^sup>2) = 1 / ln a\n 2. ((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral 1 / ln a) {a<..}", "thus ?th2"], ["proof (prove)\nusing this:\n  LBINT t=ereal a..\\<infinity>. 1 / (t * (ln t)\\<^sup>2) = 0 - - (1 / ln a)\n\ngoal (1 subgoal):\n 1. LBINT t:{a<..}. 1 / (t * (ln t)\\<^sup>2) = 1 / ln a", "by (simp add: interval_integral_to_infinity_eq)"], ["proof (state)\nthis:\n  LBINT t:{a<..}. 1 / (t * (ln t)\\<^sup>2) = 1 / ln a\n\ngoal (1 subgoal):\n 1. ((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral 1 / ln a) {a<..}", "have \"((\\<lambda>t. 1 / (t * ln t ^ 2)) has_integral\n           set_lebesgue_integral lebesgue {a<..} (\\<lambda>t. 1 / (t * ln t ^ 2))) {a<..}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral\n     \\<integral>t\\<in>{a<..}. (1 / (t * (ln t)\\<^sup>2))\\<partial>lebesgue)\n     {a<..}", "using \\<open>?th1\\<close>"], ["proof (prove)\nusing this:\n  set_integrable lborel {a<..} (\\<lambda>t. 1 / (t * (ln t)\\<^sup>2))\n\ngoal (1 subgoal):\n 1. ((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral\n     \\<integral>t\\<in>{a<..}. (1 / (t * (ln t)\\<^sup>2))\\<partial>lebesgue)\n     {a<..}", "by (intro has_integral_set_lebesgue)\n                    (auto simp: set_integrable_def integrable_completion)"], ["proof (state)\nthis:\n  ((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral\n   \\<integral>t\\<in>{a<..}. (1 / (t * (ln t)\\<^sup>2))\\<partial>lebesgue)\n   {a<..}\n\ngoal (1 subgoal):\n 1. ((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral 1 / ln a) {a<..}", "also"], ["proof (state)\nthis:\n  ((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral\n   \\<integral>t\\<in>{a<..}. (1 / (t * (ln t)\\<^sup>2))\\<partial>lebesgue)\n   {a<..}\n\ngoal (1 subgoal):\n 1. ((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral 1 / ln a) {a<..}", "have \"set_lebesgue_integral lebesgue {a<..} (\\<lambda>t. 1 / (t * ln t ^ 2)) = 1 / ln a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>t\\<in>{a<..}. (1 / (t * (ln t)\\<^sup>2))\\<partial>lebesgue =\n    1 / ln a", "using \\<open>?th2\\<close>"], ["proof (prove)\nusing this:\n  LBINT t:{a<..}. 1 / (t * (ln t)\\<^sup>2) = 1 / ln a\n\ngoal (1 subgoal):\n 1. \\<integral>t\\<in>{a<..}. (1 / (t * (ln t)\\<^sup>2))\\<partial>lebesgue =\n    1 / ln a", "unfolding set_lebesgue_integral_def"], ["proof (prove)\nusing this:\n  LBINT x. indicat_real {a<..} x *\\<^sub>R (1 / (x * (ln x)\\<^sup>2)) =\n  1 / ln a\n\ngoal (1 subgoal):\n 1. LINT x|lebesgue.\n       indicat_real {a<..} x *\\<^sub>R (1 / (x * (ln x)\\<^sup>2)) =\n    1 / ln a", "by (subst integral_completion) auto"], ["proof (state)\nthis:\n  \\<integral>t\\<in>{a<..}. (1 / (t * (ln t)\\<^sup>2))\\<partial>lebesgue =\n  1 / ln a\n\ngoal (1 subgoal):\n 1. ((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral 1 / ln a) {a<..}", "finally"], ["proof (chain)\npicking this:\n  ((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral 1 / ln a) {a<..}", "show ?th3"], ["proof (prove)\nusing this:\n  ((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral 1 / ln a) {a<..}\n\ngoal (1 subgoal):\n 1. ((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral 1 / ln a) {a<..}", "."], ["proof (state)\nthis:\n  ((\\<lambda>t. 1 / (t * (ln t)\\<^sup>2)) has_integral 1 / ln a) {a<..}\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\n  We show that the integral in our definition of the Meissel--Mertens constant is\n  well-defined and give an upper bound for its tails:\n\\<close>"], ["", "lemma\n  assumes \"a > (1 :: real)\"\n  defines \"r \\<equiv> (\\<lambda>t. (\\<MM> t - ln t) / (t * ln t ^ 2))\"\n  shows integrable_meissel_mertens:  \"set_integrable lborel {a<..} r\"\n    and meissel_mertens_integral_le: \"norm (integral {a<..} r) \\<le> 2 / ln a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set_integrable lborel {a<..} r &&&\n    norm (integral {a<..} r) \\<le> 2 / ln a", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. set_integrable lborel {a<..} r\n 2. norm (integral {a<..} r) \\<le> 2 / ln a", "have *: \"((\\<lambda>t. 2 * (1 / (t * ln t ^ 2))) has_integral 2 * (1 / ln a)) {a<..}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>t. 2 * (1 / (t * (ln t)\\<^sup>2))) has_integral\n     2 * (1 / ln a))\n     {a<..}", "using assms"], ["proof (prove)\nusing this:\n  1 < a\n  r \\<equiv> \\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>t. 2 * (1 / (t * (ln t)\\<^sup>2))) has_integral\n     2 * (1 / ln a))\n     {a<..}", "by (intro has_integral_mult_right integral_one_over_x_ln_x_squared) auto"], ["proof (state)\nthis:\n  ((\\<lambda>t. 2 * (1 / (t * (ln t)\\<^sup>2))) has_integral 2 * (1 / ln a))\n   {a<..}\n\ngoal (2 subgoals):\n 1. set_integrable lborel {a<..} r\n 2. norm (integral {a<..} r) \\<le> 2 / ln a", "show \"set_integrable lborel {a<..} r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set_integrable lborel {a<..} r", "unfolding set_integrable_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable lborel (\\<lambda>x. indicat_real {a<..} x *\\<^sub>R r x)", "proof (rule Bochner_Integration.integrable_bound[OF _ _ AE_I2])"], ["proof (state)\ngoal (3 subgoals):\n 1. integrable lborel ?f\n 2. (\\<lambda>x. indicat_real {a<..} x *\\<^sub>R r x)\n    \\<in> borel_measurable lborel\n 3. \\<And>x.\n       x \\<in> space lborel \\<Longrightarrow>\n       norm (indicat_real {a<..} x *\\<^sub>R r x) \\<le> norm (?f x)", "have \"integrable lborel (\\<lambda>t::real. indicator {a<..} t * (2 * (1 / (t * ln t ^ 2))))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable lborel\n     (\\<lambda>t. indicat_real {a<..} t * (2 * (1 / (t * (ln t)\\<^sup>2))))", "using integrable_mult_right[of 2, \n              OF integral_one_over_x_ln_x_squared(1)[of a, unfolded set_integrable_def]] assms"], ["proof (prove)\nusing this:\n  (2 \\<noteq> 0 \\<Longrightarrow> 1 < a) \\<Longrightarrow>\n  integrable lborel\n   (\\<lambda>x.\n       2 * indicat_real {a<..} x *\\<^sub>R (1 / (x * (ln x)\\<^sup>2)))\n  1 < a\n  r \\<equiv> \\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. integrable lborel\n     (\\<lambda>t. indicat_real {a<..} t * (2 * (1 / (t * (ln t)\\<^sup>2))))", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  integrable lborel\n   (\\<lambda>t. indicat_real {a<..} t * (2 * (1 / (t * (ln t)\\<^sup>2))))\n\ngoal (3 subgoals):\n 1. integrable lborel ?f\n 2. (\\<lambda>x. indicat_real {a<..} x *\\<^sub>R r x)\n    \\<in> borel_measurable lborel\n 3. \\<And>x.\n       x \\<in> space lborel \\<Longrightarrow>\n       norm (indicat_real {a<..} x *\\<^sub>R r x) \\<le> norm (?f x)", "thus \"integrable lborel (\\<lambda>t::real. indicator {a<..} t *\\<^sub>R (2 / (t * ln t ^ 2)))\""], ["proof (prove)\nusing this:\n  integrable lborel\n   (\\<lambda>t. indicat_real {a<..} t * (2 * (1 / (t * (ln t)\\<^sup>2))))\n\ngoal (1 subgoal):\n 1. integrable lborel\n     (\\<lambda>t.\n         indicat_real {a<..} t *\\<^sub>R (2 / (t * (ln t)\\<^sup>2)))", "by simp"], ["proof (state)\nthis:\n  integrable lborel\n   (\\<lambda>t. indicat_real {a<..} t *\\<^sub>R (2 / (t * (ln t)\\<^sup>2)))\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. indicat_real {a<..} x *\\<^sub>R r x)\n    \\<in> borel_measurable lborel\n 2. \\<And>x.\n       x \\<in> space lborel \\<Longrightarrow>\n       norm (indicat_real {a<..} x *\\<^sub>R r x)\n       \\<le> norm\n              (indicat_real {a<..} x *\\<^sub>R (2 / (x * (ln x)\\<^sup>2)))", "fix x :: real"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>x. indicat_real {a<..} x *\\<^sub>R r x)\n    \\<in> borel_measurable lborel\n 2. \\<And>x.\n       x \\<in> space lborel \\<Longrightarrow>\n       norm (indicat_real {a<..} x *\\<^sub>R r x)\n       \\<le> norm\n              (indicat_real {a<..} x *\\<^sub>R (2 / (x * (ln x)\\<^sup>2)))", "show \"norm (indicat_real {a<..} x *\\<^sub>R r x) \\<le>\n            norm (indicat_real {a<..} x *\\<^sub>R (2 / (x * ln x ^ 2)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. norm (indicat_real {a<..} x *\\<^sub>R r x)\n    \\<le> norm (indicat_real {a<..} x *\\<^sub>R (2 / (x * (ln x)\\<^sup>2)))", "proof (cases \"x > a\")"], ["proof (state)\ngoal (2 subgoals):\n 1. a < x \\<Longrightarrow>\n    norm (indicat_real {a<..} x *\\<^sub>R r x)\n    \\<le> norm (indicat_real {a<..} x *\\<^sub>R (2 / (x * (ln x)\\<^sup>2)))\n 2. \\<not> a < x \\<Longrightarrow>\n    norm (indicat_real {a<..} x *\\<^sub>R r x)\n    \\<le> norm (indicat_real {a<..} x *\\<^sub>R (2 / (x * (ln x)\\<^sup>2)))", "case True"], ["proof (state)\nthis:\n  a < x\n\ngoal (2 subgoals):\n 1. a < x \\<Longrightarrow>\n    norm (indicat_real {a<..} x *\\<^sub>R r x)\n    \\<le> norm (indicat_real {a<..} x *\\<^sub>R (2 / (x * (ln x)\\<^sup>2)))\n 2. \\<not> a < x \\<Longrightarrow>\n    norm (indicat_real {a<..} x *\\<^sub>R r x)\n    \\<le> norm (indicat_real {a<..} x *\\<^sub>R (2 / (x * (ln x)\\<^sup>2)))", "thus ?thesis"], ["proof (prove)\nusing this:\n  a < x\n\ngoal (1 subgoal):\n 1. norm (indicat_real {a<..} x *\\<^sub>R r x)\n    \\<le> norm (indicat_real {a<..} x *\\<^sub>R (2 / (x * (ln x)\\<^sup>2)))", "unfolding norm_scaleR norm_mult r_def norm_divide"], ["proof (prove)\nusing this:\n  a < x\n\ngoal (1 subgoal):\n 1. \\<bar>indicat_real {a<..} x\\<bar> *\n    (norm (\\<MM> x - ln x) / (norm x * norm ((ln x)\\<^sup>2)))\n    \\<le> \\<bar>indicat_real {a<..} x\\<bar> *\n          (norm 2 / (norm x * norm ((ln x)\\<^sup>2)))", "using mertens_first_theorem[of x] assms"], ["proof (prove)\nusing this:\n  a < x\n  1 \\<le> x \\<Longrightarrow> \\<bar>\\<MM> x - ln x\\<bar> < 2\n  1 < a\n  r \\<equiv> \\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<bar>indicat_real {a<..} x\\<bar> *\n    (norm (\\<MM> x - ln x) / (norm x * norm ((ln x)\\<^sup>2)))\n    \\<le> \\<bar>indicat_real {a<..} x\\<bar> *\n          (norm 2 / (norm x * norm ((ln x)\\<^sup>2)))", "by (intro mult_mono frac_le divide_nonneg_pos) (auto simp: indicator_def)"], ["proof (state)\nthis:\n  norm (indicat_real {a<..} x *\\<^sub>R r x)\n  \\<le> norm (indicat_real {a<..} x *\\<^sub>R (2 / (x * (ln x)\\<^sup>2)))\n\ngoal (1 subgoal):\n 1. \\<not> a < x \\<Longrightarrow>\n    norm (indicat_real {a<..} x *\\<^sub>R r x)\n    \\<le> norm (indicat_real {a<..} x *\\<^sub>R (2 / (x * (ln x)\\<^sup>2)))", "qed (auto simp: indicator_def)"], ["proof (state)\nthis:\n  norm (indicat_real {a<..} x *\\<^sub>R r x)\n  \\<le> norm (indicat_real {a<..} x *\\<^sub>R (2 / (x * (ln x)\\<^sup>2)))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. indicat_real {a<..} x *\\<^sub>R r x)\n    \\<in> borel_measurable lborel", "qed (auto simp: r_def)"], ["proof (state)\nthis:\n  set_integrable lborel {a<..} r\n\ngoal (1 subgoal):\n 1. norm (integral {a<..} r) \\<le> 2 / ln a", "hence \"r integrable_on {a<..}\""], ["proof (prove)\nusing this:\n  set_integrable lborel {a<..} r\n\ngoal (1 subgoal):\n 1. r integrable_on {a<..}", "by (simp add: set_borel_integral_eq_integral(1))"], ["proof (state)\nthis:\n  r integrable_on {a<..}\n\ngoal (1 subgoal):\n 1. norm (integral {a<..} r) \\<le> 2 / ln a", "hence \"norm (integral {a<..} r) \\<le> integral {a<..} (\\<lambda>x. 2 * (1 / (x * ln x ^ 2)))\""], ["proof (prove)\nusing this:\n  r integrable_on {a<..}\n\ngoal (1 subgoal):\n 1. norm (integral {a<..} r)\n    \\<le> integral {a<..} (\\<lambda>x. 2 * (1 / (x * (ln x)\\<^sup>2)))", "proof (rule integral_norm_bound_integral)"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>x. 2 * (1 / (x * (ln x)\\<^sup>2))) integrable_on {a<..}\n 2. \\<And>x.\n       x \\<in> {a<..} \\<Longrightarrow>\n       norm (r x) \\<le> 2 * (1 / (x * (ln x)\\<^sup>2))", "show  \"(\\<lambda>x. 2 * (1 / (x * (ln x)\\<^sup>2))) integrable_on {a<..}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. 2 * (1 / (x * (ln x)\\<^sup>2))) integrable_on {a<..}", "using *"], ["proof (prove)\nusing this:\n  ((\\<lambda>t. 2 * (1 / (t * (ln t)\\<^sup>2))) has_integral 2 * (1 / ln a))\n   {a<..}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. 2 * (1 / (x * (ln x)\\<^sup>2))) integrable_on {a<..}", "by (simp add: has_integral_iff)"], ["proof (state)\nthis:\n  (\\<lambda>x. 2 * (1 / (x * (ln x)\\<^sup>2))) integrable_on {a<..}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {a<..} \\<Longrightarrow>\n       norm (r x) \\<le> 2 * (1 / (x * (ln x)\\<^sup>2))", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {a<..} \\<Longrightarrow>\n       norm (r x) \\<le> 2 * (1 / (x * (ln x)\\<^sup>2))", "assume \"x \\<in> {a<..}\""], ["proof (state)\nthis:\n  x \\<in> {a<..}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {a<..} \\<Longrightarrow>\n       norm (r x) \\<le> 2 * (1 / (x * (ln x)\\<^sup>2))", "hence \"norm (r x) \\<le> 2 / (x * (ln x)\\<^sup>2)\""], ["proof (prove)\nusing this:\n  x \\<in> {a<..}\n\ngoal (1 subgoal):\n 1. norm (r x) \\<le> 2 / (x * (ln x)\\<^sup>2)", "unfolding r_def norm_divide"], ["proof (prove)\nusing this:\n  x \\<in> {a<..}\n\ngoal (1 subgoal):\n 1. norm (\\<MM> x - ln x) / norm (x * (ln x)\\<^sup>2)\n    \\<le> 2 / (x * (ln x)\\<^sup>2)", "using mertens_first_theorem[of x] assms"], ["proof (prove)\nusing this:\n  x \\<in> {a<..}\n  1 \\<le> x \\<Longrightarrow> \\<bar>\\<MM> x - ln x\\<bar> < 2\n  1 < a\n  r \\<equiv> \\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. norm (\\<MM> x - ln x) / norm (x * (ln x)\\<^sup>2)\n    \\<le> 2 / (x * (ln x)\\<^sup>2)", "by (intro mult_mono frac_le divide_nonneg_pos) (auto simp: indicator_def)"], ["proof (state)\nthis:\n  norm (r x) \\<le> 2 / (x * (ln x)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {a<..} \\<Longrightarrow>\n       norm (r x) \\<le> 2 * (1 / (x * (ln x)\\<^sup>2))", "thus \"norm (r x) \\<le> 2* (1 / (x * ln x ^ 2))\""], ["proof (prove)\nusing this:\n  norm (r x) \\<le> 2 / (x * (ln x)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. norm (r x) \\<le> 2 * (1 / (x * (ln x)\\<^sup>2))", "by simp"], ["proof (state)\nthis:\n  norm (r x) \\<le> 2 * (1 / (x * (ln x)\\<^sup>2))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  norm (integral {a<..} r)\n  \\<le> integral {a<..} (\\<lambda>x. 2 * (1 / (x * (ln x)\\<^sup>2)))\n\ngoal (1 subgoal):\n 1. norm (integral {a<..} r) \\<le> 2 / ln a", "also"], ["proof (state)\nthis:\n  norm (integral {a<..} r)\n  \\<le> integral {a<..} (\\<lambda>x. 2 * (1 / (x * (ln x)\\<^sup>2)))\n\ngoal (1 subgoal):\n 1. norm (integral {a<..} r) \\<le> 2 / ln a", "have \"\\<dots> = 2 / ln a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral {a<..} (\\<lambda>x. 2 * (1 / (x * (ln x)\\<^sup>2))) = 2 / ln a", "using *"], ["proof (prove)\nusing this:\n  ((\\<lambda>t. 2 * (1 / (t * (ln t)\\<^sup>2))) has_integral 2 * (1 / ln a))\n   {a<..}\n\ngoal (1 subgoal):\n 1. integral {a<..} (\\<lambda>x. 2 * (1 / (x * (ln x)\\<^sup>2))) = 2 / ln a", "by (simp add: has_integral_iff)"], ["proof (state)\nthis:\n  integral {a<..} (\\<lambda>x. 2 * (1 / (x * (ln x)\\<^sup>2))) = 2 / ln a\n\ngoal (1 subgoal):\n 1. norm (integral {a<..} r) \\<le> 2 / ln a", "finally"], ["proof (chain)\npicking this:\n  norm (integral {a<..} r) \\<le> 2 / ln a", "show \"norm (integral {a<..} r) \\<le> 2 / ln a\""], ["proof (prove)\nusing this:\n  norm (integral {a<..} r) \\<le> 2 / ln a\n\ngoal (1 subgoal):\n 1. norm (integral {a<..} r) \\<le> 2 / ln a", "."], ["proof (state)\nthis:\n  norm (integral {a<..} r) \\<le> 2 / ln a\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma integrable_on_meissel_mertens:\n  assumes \"A \\<subseteq> {1..}\" \"Inf A > 1\" \"A \\<in> sets borel\"\n  shows   \"(\\<lambda>t. (\\<MM> t - ln t) / (t * ln t ^ 2)) integrable_on A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)) integrable_on A", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)) integrable_on A", "from assms"], ["proof (chain)\npicking this:\n  A \\<subseteq> {1..}\n  1 < Inf A\n  A \\<in> sets borel", "obtain x where x: \"1 < x\" \"x < Inf A\""], ["proof (prove)\nusing this:\n  A \\<subseteq> {1..}\n  1 < Inf A\n  A \\<in> sets borel\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>1 < x; x < Inf A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using dense"], ["proof (prove)\nusing this:\n  A \\<subseteq> {1..}\n  1 < Inf A\n  A \\<in> sets borel\n  ?x < ?y \\<Longrightarrow> \\<exists>z>?x. z < ?y\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>1 < x; x < Inf A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  1 < x\n  x < Inf A\n\ngoal (1 subgoal):\n 1. (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)) integrable_on A", "from assms"], ["proof (chain)\npicking this:\n  A \\<subseteq> {1..}\n  1 < Inf A\n  A \\<in> sets borel", "have \"bdd_below A\""], ["proof (prove)\nusing this:\n  A \\<subseteq> {1..}\n  1 < Inf A\n  A \\<in> sets borel\n\ngoal (1 subgoal):\n 1. bdd_below A", "by (intro bdd_belowI[of _ 1]) auto"], ["proof (state)\nthis:\n  bdd_below A\n\ngoal (1 subgoal):\n 1. (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)) integrable_on A", "hence \"A \\<subseteq> {Inf A..}\""], ["proof (prove)\nusing this:\n  bdd_below A\n\ngoal (1 subgoal):\n 1. A \\<subseteq> {Inf A..}", "by (auto simp: cInf_lower)"], ["proof (state)\nthis:\n  A \\<subseteq> {Inf A..}\n\ngoal (1 subgoal):\n 1. (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)) integrable_on A", "also"], ["proof (state)\nthis:\n  A \\<subseteq> {Inf A..}\n\ngoal (1 subgoal):\n 1. (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)) integrable_on A", "have \"\\<dots> \\<subseteq> {x<..}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {Inf A..} \\<subseteq> {x<..}", "using x"], ["proof (prove)\nusing this:\n  1 < x\n  x < Inf A\n\ngoal (1 subgoal):\n 1. {Inf A..} \\<subseteq> {x<..}", "by auto"], ["proof (state)\nthis:\n  {Inf A..} \\<subseteq> {x<..}\n\ngoal (1 subgoal):\n 1. (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)) integrable_on A", "finally"], ["proof (chain)\npicking this:\n  A \\<subseteq> {x<..}", "have *: \"A \\<subseteq> {x<..}\""], ["proof (prove)\nusing this:\n  A \\<subseteq> {x<..}\n\ngoal (1 subgoal):\n 1. A \\<subseteq> {x<..}", "."], ["proof (state)\nthis:\n  A \\<subseteq> {x<..}\n\ngoal (1 subgoal):\n 1. (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)) integrable_on A", "have \"set_integrable lborel A (\\<lambda>t. (\\<MM> t - ln t) / (t * ln t ^ 2))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set_integrable lborel A\n     (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2))", "by (rule set_integrable_subset[OF integrable_meissel_mertens[of x]]) (use x * assms in auto)"], ["proof (state)\nthis:\n  set_integrable lborel A\n   (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2))\n\ngoal (1 subgoal):\n 1. (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)) integrable_on A", "thus ?thesis"], ["proof (prove)\nusing this:\n  set_integrable lborel A\n   (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2))\n\ngoal (1 subgoal):\n 1. (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)) integrable_on A", "by (simp add: set_borel_integral_eq_integral(1))"], ["proof (state)\nthis:\n  (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)) integrable_on A\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma meissel_mertens_bounds: \"\\<bar>meissel_mertens - 1 + ln (ln 2)\\<bar> \\<le> 2 / ln 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>meissel_mertens - 1 + ln (ln 2)\\<bar> \\<le> 2 / ln 2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>meissel_mertens - 1 + ln (ln 2)\\<bar> \\<le> 2 / ln 2", "have *: \"{2..} - {2<..} = {2::real}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {2..} - {2<..} = {2}", "by auto"], ["proof (state)\nthis:\n  {2..} - {2<..} = {2}\n\ngoal (1 subgoal):\n 1. \\<bar>meissel_mertens - 1 + ln (ln 2)\\<bar> \\<le> 2 / ln 2", "also"], ["proof (state)\nthis:\n  {2..} - {2<..} = {2}\n\ngoal (1 subgoal):\n 1. \\<bar>meissel_mertens - 1 + ln (ln 2)\\<bar> \\<le> 2 / ln 2", "have \"negligible \\<dots>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. negligible {2}", "by simp"], ["proof (state)\nthis:\n  negligible {2}\n\ngoal (1 subgoal):\n 1. \\<bar>meissel_mertens - 1 + ln (ln 2)\\<bar> \\<le> 2 / ln 2", "finally"], ["proof (chain)\npicking this:\n  negligible ({2..} - {2<..})", "have \"integral {2..} (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)) =\n                  integral {2<..} (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2))\""], ["proof (prove)\nusing this:\n  negligible ({2..} - {2<..})\n\ngoal (1 subgoal):\n 1. integral {2..} (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)) =\n    integral {2<..} (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2))", "by (intro sym[OF integral_subset_negligible]) auto"], ["proof (state)\nthis:\n  integral {2..} (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)) =\n  integral {2<..} (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2))\n\ngoal (1 subgoal):\n 1. \\<bar>meissel_mertens - 1 + ln (ln 2)\\<bar> \\<le> 2 / ln 2", "also"], ["proof (state)\nthis:\n  integral {2..} (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)) =\n  integral {2<..} (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2))\n\ngoal (1 subgoal):\n 1. \\<bar>meissel_mertens - 1 + ln (ln 2)\\<bar> \\<le> 2 / ln 2", "have \"norm \\<dots> \\<le> 2 / ln 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. norm\n     (integral {2<..} (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)))\n    \\<le> 2 / ln 2", "by (rule meissel_mertens_integral_le) auto"], ["proof (state)\nthis:\n  norm\n   (integral {2<..} (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)))\n  \\<le> 2 / ln 2\n\ngoal (1 subgoal):\n 1. \\<bar>meissel_mertens - 1 + ln (ln 2)\\<bar> \\<le> 2 / ln 2", "finally"], ["proof (chain)\npicking this:\n  norm\n   (integral {2..} (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)))\n  \\<le> 2 / ln 2", "show \"\\<bar>meissel_mertens - 1 + ln (ln 2)\\<bar> \\<le> 2 / ln 2\""], ["proof (prove)\nusing this:\n  norm\n   (integral {2..} (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)))\n  \\<le> 2 / ln 2\n\ngoal (1 subgoal):\n 1. \\<bar>meissel_mertens - 1 + ln (ln 2)\\<bar> \\<le> 2 / ln 2", "by (simp add: meissel_mertens_def)"], ["proof (state)\nthis:\n  \\<bar>meissel_mertens - 1 + ln (ln 2)\\<bar> \\<le> 2 / ln 2\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\n  Finally, obtaining Mertens' second theorem from the first one is nothing but a routine\n  summation by parts, followed by a use of the above bound:\n\\<close>"], ["", "theorem mertens_second_theorem:\n  defines \"f \\<equiv> prime_sum_upto (\\<lambda>p. 1 / p)\"\n  shows   \"\\<And>x. x \\<ge> 2 \\<Longrightarrow> \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\"\n    and   \"(\\<lambda>x. f x - ln (ln x) - meissel_mertens) \\<in> O(\\<lambda>x. 1 / ln x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>x.\n        2 \\<le> x \\<Longrightarrow>\n        \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x) &&&\n    (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "define r where \"r = (\\<lambda>t. (\\<MM> t - ln t) / (t * ln t ^ 2))\""], ["proof (state)\nthis:\n  r = (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2))\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "{"], ["proof (state)\nthis:\n  r = (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2))\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "fix x :: real"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "assume x: \"x > 2\""], ["proof (state)\nthis:\n  2 < x\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "have \"((\\<lambda>t. \\<MM> t * (-1 / (t * ln t ^ 2))) has_integral \\<MM> x * (1 / ln x) - \\<MM> 2 * (1 / ln 2) -\n            (\\<Sum>n\\<in>real -` {2<..x}. ind prime n * (ln n / real n) * (1 / ln n))) {2..x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>t. \\<MM> t * (- 1 / (t * (ln t)\\<^sup>2))) has_integral\n     \\<MM> x * (1 / ln x) - \\<MM> 2 * (1 / ln 2) -\n     (\\<Sum>n\\<in>real -` {2<..x}.\n        ind prime n * (ln (real n) / real n) * (1 / ln (real n))))\n     {2..x}", "unfolding primes_M_def prime_sum_upto_altdef1"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>t.\n         sum_upto (\\<lambda>p. ind prime p * (ln (real p) / real p)) t *\n         (- 1 / (t * (ln t)\\<^sup>2))) has_integral\n     sum_upto (\\<lambda>p. ind prime p * (ln (real p) / real p)) x *\n     (1 / ln x) -\n     sum_upto (\\<lambda>p. ind prime p * (ln (real p) / real p)) 2 *\n     (1 / ln 2) -\n     (\\<Sum>n\\<in>real -` {2<..x}.\n        ind prime n * (ln (real n) / real n) * (1 / ln (real n))))\n     {2..x}", "using x"], ["proof (prove)\nusing this:\n  2 < x\n\ngoal (1 subgoal):\n 1. ((\\<lambda>t.\n         sum_upto (\\<lambda>p. ind prime p * (ln (real p) / real p)) t *\n         (- 1 / (t * (ln t)\\<^sup>2))) has_integral\n     sum_upto (\\<lambda>p. ind prime p * (ln (real p) / real p)) x *\n     (1 / ln x) -\n     sum_upto (\\<lambda>p. ind prime p * (ln (real p) / real p)) 2 *\n     (1 / ln 2) -\n     (\\<Sum>n\\<in>real -` {2<..x}.\n        ind prime n * (ln (real n) / real n) * (1 / ln (real n))))\n     {2..x}", "by (intro partial_summation_strong[of \"{}\"])\n         (auto intro!: continuous_intros derivative_eq_intros simp: power2_eq_square\n               simp flip: has_field_derivative_iff_has_vector_derivative)"], ["proof (state)\nthis:\n  ((\\<lambda>t. \\<MM> t * (- 1 / (t * (ln t)\\<^sup>2))) has_integral\n   \\<MM> x * (1 / ln x) - \\<MM> 2 * (1 / ln 2) -\n   (\\<Sum>n\\<in>real -` {2<..x}.\n      ind prime n * (ln (real n) / real n) * (1 / ln (real n))))\n   {2..x}\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "also"], ["proof (state)\nthis:\n  ((\\<lambda>t. \\<MM> t * (- 1 / (t * (ln t)\\<^sup>2))) has_integral\n   \\<MM> x * (1 / ln x) - \\<MM> 2 * (1 / ln 2) -\n   (\\<Sum>n\\<in>real -` {2<..x}.\n      ind prime n * (ln (real n) / real n) * (1 / ln (real n))))\n   {2..x}\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "have \"\\<MM> x * (1 / ln x) - \\<MM> 2 * (1 / ln 2) - \n                 (\\<Sum>n\\<in>real -` {2<..x}. ind prime n * (ln n / n) * (1 / ln n)) =\n               \\<MM> x / ln x - (\\<Sum>n\\<in>insert 2 (real -` {2<..x}). ind prime n * (ln n / n) * (1 / ln n))\" \n      (is \"_ = _ - ?S\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<MM> x * (1 / ln x) - \\<MM> 2 * (1 / ln 2) -\n    (\\<Sum>n\\<in>real -` {2<..x}.\n       ind prime n * (ln (real n) / real n) * (1 / ln (real n))) =\n    \\<MM> x / ln x -\n    (\\<Sum>n\\<in>insert 2 (real -` {2<..x}).\n       ind prime n * (ln (real n) / real n) * (1 / ln (real n)))", "by (subst sum.insert)\n         (auto simp: primes_M_def finite_vimage_real_of_nat_greaterThanAtMost eval_prime_sum_upto)"], ["proof (state)\nthis:\n  \\<MM> x * (1 / ln x) - \\<MM> 2 * (1 / ln 2) -\n  (\\<Sum>n\\<in>real -` {2<..x}.\n     ind prime n * (ln (real n) / real n) * (1 / ln (real n))) =\n  \\<MM> x / ln x -\n  (\\<Sum>n\\<in>insert 2 (real -` {2<..x}).\n     ind prime n * (ln (real n) / real n) * (1 / ln (real n)))\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "also"], ["proof (state)\nthis:\n  \\<MM> x * (1 / ln x) - \\<MM> 2 * (1 / ln 2) -\n  (\\<Sum>n\\<in>real -` {2<..x}.\n     ind prime n * (ln (real n) / real n) * (1 / ln (real n))) =\n  \\<MM> x / ln x -\n  (\\<Sum>n\\<in>insert 2 (real -` {2<..x}).\n     ind prime n * (ln (real n) / real n) * (1 / ln (real n)))\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "have \"?S = f x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>insert 2 (real -` {2<..x}).\n       ind prime n * (ln (real n) / real n) * (1 / ln (real n))) =\n    f x", "unfolding f_def prime_sum_upto_altdef1 sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>insert 2 (real -` {2<..x}).\n       ind prime n * (ln (real n) / real n) * (1 / ln (real n))) =\n    (\\<Sum>p\\<in>{i. 0 < i \\<and> real i \\<le> x}.\n       ind prime p * (1 / real p))", "using x"], ["proof (prove)\nusing this:\n  2 < x\n\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>insert 2 (real -` {2<..x}).\n       ind prime n * (ln (real n) / real n) * (1 / ln (real n))) =\n    (\\<Sum>p\\<in>{i. 0 < i \\<and> real i \\<le> x}.\n       ind prime p * (1 / real p))", "by (intro sum.mono_neutral_cong_left) (auto simp: not_less numeral_2_eq_2 le_Suc_eq)"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>insert 2 (real -` {2<..x}).\n     ind prime n * (ln (real n) / real n) * (1 / ln (real n))) =\n  f x\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "finally"], ["proof (chain)\npicking this:\n  ((\\<lambda>t. \\<MM> t * (- 1 / (t * (ln t)\\<^sup>2))) has_integral\n   \\<MM> x / ln x - f x)\n   {2..x}", "have \"((\\<lambda>t. -\\<MM> t / (t * ln t ^ 2)) has_integral (\\<MM> x / ln x - f x)) {2..x}\""], ["proof (prove)\nusing this:\n  ((\\<lambda>t. \\<MM> t * (- 1 / (t * (ln t)\\<^sup>2))) has_integral\n   \\<MM> x / ln x - f x)\n   {2..x}\n\ngoal (1 subgoal):\n 1. ((\\<lambda>t. - \\<MM> t / (t * (ln t)\\<^sup>2)) has_integral\n     \\<MM> x / ln x - f x)\n     {2..x}", "by simp"], ["proof (state)\nthis:\n  ((\\<lambda>t. - \\<MM> t / (t * (ln t)\\<^sup>2)) has_integral\n   \\<MM> x / ln x - f x)\n   {2..x}\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "from has_integral_neg[OF this]"], ["proof (chain)\npicking this:\n  ((\\<lambda>x. - (- \\<MM> x / (x * (ln x)\\<^sup>2))) has_integral\n   - (\\<MM> x / ln x - f x))\n   {2..x}", "have \"((\\<lambda>t. \\<MM> t / (t * ln t ^ 2)) has_integral (f x - \\<MM> x / ln x)) {2..x}\""], ["proof (prove)\nusing this:\n  ((\\<lambda>x. - (- \\<MM> x / (x * (ln x)\\<^sup>2))) has_integral\n   - (\\<MM> x / ln x - f x))\n   {2..x}\n\ngoal (1 subgoal):\n 1. ((\\<lambda>t. \\<MM> t / (t * (ln t)\\<^sup>2)) has_integral\n     f x - \\<MM> x / ln x)\n     {2..x}", "by simp"], ["proof (state)\nthis:\n  ((\\<lambda>t. \\<MM> t / (t * (ln t)\\<^sup>2)) has_integral\n   f x - \\<MM> x / ln x)\n   {2..x}\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "hence \"((\\<lambda>t. \\<MM> t / (t * ln t ^ 2) - 1 / (t * ln t)) has_integral\n             (f x - \\<MM> x / ln x - (ln (ln x) - ln (ln 2)))) {2..x}\""], ["proof (prove)\nusing this:\n  ((\\<lambda>t. \\<MM> t / (t * (ln t)\\<^sup>2)) has_integral\n   f x - \\<MM> x / ln x)\n   {2..x}\n\ngoal (1 subgoal):\n 1. ((\\<lambda>t.\n         \\<MM> t / (t * (ln t)\\<^sup>2) - 1 / (t * ln t)) has_integral\n     f x - \\<MM> x / ln x - (ln (ln x) - ln (ln 2)))\n     {2..x}", "using x"], ["proof (prove)\nusing this:\n  ((\\<lambda>t. \\<MM> t / (t * (ln t)\\<^sup>2)) has_integral\n   f x - \\<MM> x / ln x)\n   {2..x}\n  2 < x\n\ngoal (1 subgoal):\n 1. ((\\<lambda>t.\n         \\<MM> t / (t * (ln t)\\<^sup>2) - 1 / (t * ln t)) has_integral\n     f x - \\<MM> x / ln x - (ln (ln x) - ln (ln 2)))\n     {2..x}", "by (intro has_integral_diff fundamental_theorem_of_calculus)\n         (auto simp flip: has_field_derivative_iff_has_vector_derivative\n               intro!: derivative_eq_intros)"], ["proof (state)\nthis:\n  ((\\<lambda>t.\n       \\<MM> t / (t * (ln t)\\<^sup>2) - 1 / (t * ln t)) has_integral\n   f x - \\<MM> x / ln x - (ln (ln x) - ln (ln 2)))\n   {2..x}\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "also"], ["proof (state)\nthis:\n  ((\\<lambda>t.\n       \\<MM> t / (t * (ln t)\\<^sup>2) - 1 / (t * ln t)) has_integral\n   f x - \\<MM> x / ln x - (ln (ln x) - ln (ln 2)))\n   {2..x}\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "have \"?this \\<longleftrightarrow> (r has_integral (f x - \\<MM> x / ln x - (ln (ln x) - ln (ln 2)))) {2..x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>t.\n         \\<MM> t / (t * (ln t)\\<^sup>2) - 1 / (t * ln t)) has_integral\n     f x - \\<MM> x / ln x - (ln (ln x) - ln (ln 2)))\n     {2..x} =\n    (r has_integral f x - \\<MM> x / ln x - (ln (ln x) - ln (ln 2))) {2..x}", "by (intro has_integral_cong) (auto simp: r_def field_simps power2_eq_square)"], ["proof (state)\nthis:\n  ((\\<lambda>t.\n       \\<MM> t / (t * (ln t)\\<^sup>2) - 1 / (t * ln t)) has_integral\n   f x - \\<MM> x / ln x - (ln (ln x) - ln (ln 2)))\n   {2..x} =\n  (r has_integral f x - \\<MM> x / ln x - (ln (ln x) - ln (ln 2))) {2..x}\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "finally"], ["proof (chain)\npicking this:\n  (r has_integral f x - \\<MM> x / ln x - (ln (ln x) - ln (ln 2))) {2..x}", "have \\<dots>"], ["proof (prove)\nusing this:\n  (r has_integral f x - \\<MM> x / ln x - (ln (ln x) - ln (ln 2))) {2..x}\n\ngoal (1 subgoal):\n 1. (r has_integral f x - \\<MM> x / ln x - (ln (ln x) - ln (ln 2))) {2..x}", "."], ["proof (state)\nthis:\n  (r has_integral f x - \\<MM> x / ln x - (ln (ln x) - ln (ln 2))) {2..x}\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "}"], ["proof (state)\nthis:\n  2 < ?x2 \\<Longrightarrow>\n  (r has_integral f ?x2 - \\<MM> ?x2 / ln ?x2 - (ln (ln ?x2) - ln (ln 2)))\n   {2..?x2}\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "note integral = this"], ["proof (state)\nthis:\n  2 < ?x2 \\<Longrightarrow>\n  (r has_integral f ?x2 - \\<MM> ?x2 / ln ?x2 - (ln (ln ?x2) - ln (ln 2)))\n   {2..?x2}\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "define R\\<^sub>\\<MM> where \"R\\<^sub>\\<MM> = (\\<lambda>x. \\<MM> x - ln x)\""], ["proof (state)\nthis:\n  R\\<^sub>\\<MM> = (\\<lambda>x. \\<MM> x - ln x)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "have \\<MM>: \"\\<MM> x = ln x + R\\<^sub>\\<MM> x\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<MM> x = ln x + R\\<^sub>\\<MM> x", "by (simp add: R\\<^sub>\\<MM>_def)"], ["proof (state)\nthis:\n  \\<MM> ?x = ln ?x + R\\<^sub>\\<MM> ?x\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "define I where \"I = (\\<lambda>x. integral {x..} r)\""], ["proof (state)\nthis:\n  I = (\\<lambda>x. integral {x..} r)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "define C where \"C = (1 - ln (ln 2) + I 2)\""], ["proof (state)\nthis:\n  C = 1 - ln (ln 2) + I 2\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "have C_altdef: \"C = meissel_mertens\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C = meissel_mertens", "by (simp add: I_def r_def C_def meissel_mertens_def)"], ["proof (state)\nthis:\n  C = meissel_mertens\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "show bound: \" \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\" if x: \"x \\<ge> 2\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "proof (cases \"x = 2\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x = 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "case True"], ["proof (state)\nthis:\n  x = 2\n\ngoal (2 subgoals):\n 1. x = 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "hence \"\\<bar>f x - ln (ln x) - meissel_mertens\\<bar> = \\<bar>1 / 2 - ln (ln 2) - meissel_mertens\\<bar>\""], ["proof (prove)\nusing this:\n  x = 2\n\ngoal (1 subgoal):\n 1. \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> =\n    \\<bar>1 / 2 - ln (ln 2) - meissel_mertens\\<bar>", "by (simp add: f_def eval_prime_sum_upto )"], ["proof (state)\nthis:\n  \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> =\n  \\<bar>1 / 2 - ln (ln 2) - meissel_mertens\\<bar>\n\ngoal (2 subgoals):\n 1. x = 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "also"], ["proof (state)\nthis:\n  \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> =\n  \\<bar>1 / 2 - ln (ln 2) - meissel_mertens\\<bar>\n\ngoal (2 subgoals):\n 1. x = 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "have \"\\<dots> \\<le> 2 / ln 2 + 1 / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>1 / 2 - ln (ln 2) - meissel_mertens\\<bar> \\<le> 2 / ln 2 + 1 / 2", "using meissel_mertens_bounds"], ["proof (prove)\nusing this:\n  \\<bar>meissel_mertens - 1 + ln (ln 2)\\<bar> \\<le> 2 / ln 2\n\ngoal (1 subgoal):\n 1. \\<bar>1 / 2 - ln (ln 2) - meissel_mertens\\<bar> \\<le> 2 / ln 2 + 1 / 2", "by linarith"], ["proof (state)\nthis:\n  \\<bar>1 / 2 - ln (ln 2) - meissel_mertens\\<bar> \\<le> 2 / ln 2 + 1 / 2\n\ngoal (2 subgoals):\n 1. x = 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "also"], ["proof (state)\nthis:\n  \\<bar>1 / 2 - ln (ln 2) - meissel_mertens\\<bar> \\<le> 2 / ln 2 + 1 / 2\n\ngoal (2 subgoals):\n 1. x = 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "have \"\\<dots> \\<le> 2 / ln 2 + 2 / ln 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 / ln 2 + 1 / 2 \\<le> 2 / ln 2 + 2 / ln 2", "using ln2_le_25_over_36"], ["proof (prove)\nusing this:\n  ln 2 \\<le> 25 / 36\n\ngoal (1 subgoal):\n 1. 2 / ln 2 + 1 / 2 \\<le> 2 / ln 2 + 2 / ln 2", "by (intro add_mono divide_left_mono) auto"], ["proof (state)\nthis:\n  2 / ln 2 + 1 / 2 \\<le> 2 / ln 2 + 2 / ln 2\n\ngoal (2 subgoals):\n 1. x = 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n 2. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "finally"], ["proof (chain)\npicking this:\n  \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 2 / ln 2 + 2 / ln 2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 2 / ln 2 + 2 / ln 2\n\ngoal (1 subgoal):\n 1. \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "using True"], ["proof (prove)\nusing this:\n  \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 2 / ln 2 + 2 / ln 2\n  x = 2\n\ngoal (1 subgoal):\n 1. \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "by simp"], ["proof (state)\nthis:\n  \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n\ngoal (1 subgoal):\n 1. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "case False"], ["proof (state)\nthis:\n  x \\<noteq> 2\n\ngoal (1 subgoal):\n 1. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "hence x: \"x > 2\""], ["proof (prove)\nusing this:\n  x \\<noteq> 2\n\ngoal (1 subgoal):\n 1. 2 < x", "using x"], ["proof (prove)\nusing this:\n  x \\<noteq> 2\n  2 \\<le> x\n\ngoal (1 subgoal):\n 1. 2 < x", "by simp"], ["proof (state)\nthis:\n  2 < x\n\ngoal (1 subgoal):\n 1. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "have \"integral {2..x} r + I x = integral ({2..x} \\<union> {x..}) r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral {2..x} r + I x = integral ({2..x} \\<union> {x..}) r", "unfolding I_def r_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. integral {2..x} (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)) +\n    integral {x..} (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)) =\n    integral ({2..x} \\<union> {x..})\n     (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2))", "using x"], ["proof (prove)\nusing this:\n  2 < x\n\ngoal (1 subgoal):\n 1. integral {2..x} (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)) +\n    integral {x..} (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)) =\n    integral ({2..x} \\<union> {x..})\n     (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2))", "by (intro integral_Un [symmetric] integrable_on_meissel_mertens) (auto simp: max_def r_def)"], ["proof (state)\nthis:\n  integral {2..x} r + I x = integral ({2..x} \\<union> {x..}) r\n\ngoal (1 subgoal):\n 1. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "also"], ["proof (state)\nthis:\n  integral {2..x} r + I x = integral ({2..x} \\<union> {x..}) r\n\ngoal (1 subgoal):\n 1. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "have \"{2..x} \\<union> {x..} = {2..}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {2..x} \\<union> {x..} = {2..}", "using x"], ["proof (prove)\nusing this:\n  2 < x\n\ngoal (1 subgoal):\n 1. {2..x} \\<union> {x..} = {2..}", "by auto"], ["proof (state)\nthis:\n  {2..x} \\<union> {x..} = {2..}\n\ngoal (1 subgoal):\n 1. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "finally"], ["proof (chain)\npicking this:\n  integral {2..x} r + I x = integral {2..} r", "have *: \"integral {2..x} r = I 2 - I x\""], ["proof (prove)\nusing this:\n  integral {2..x} r + I x = integral {2..} r\n\ngoal (1 subgoal):\n 1. integral {2..x} r = I 2 - I x", "unfolding I_def"], ["proof (prove)\nusing this:\n  integral {2..x} r + integral {x..} r = integral {2..} r\n\ngoal (1 subgoal):\n 1. integral {2..x} r = integral {2..} r - integral {x..} r", "by simp"], ["proof (state)\nthis:\n  integral {2..x} r = I 2 - I x\n\ngoal (1 subgoal):\n 1. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "have eq: \"f x - ln (ln x) - C = R\\<^sub>\\<MM> x / ln x - I x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f x - ln (ln x) - C = R\\<^sub>\\<MM> x / ln x - I x", "using integral[OF x] x"], ["proof (prove)\nusing this:\n  (r has_integral f x - \\<MM> x / ln x - (ln (ln x) - ln (ln 2))) {2..x}\n  2 < x\n\ngoal (1 subgoal):\n 1. f x - ln (ln x) - C = R\\<^sub>\\<MM> x / ln x - I x", "by (auto simp: C_def field_simps \\<MM> has_integral_iff *)"], ["proof (state)\nthis:\n  f x - ln (ln x) - C = R\\<^sub>\\<MM> x / ln x - I x\n\ngoal (1 subgoal):\n 1. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "also"], ["proof (state)\nthis:\n  f x - ln (ln x) - C = R\\<^sub>\\<MM> x / ln x - I x\n\ngoal (1 subgoal):\n 1. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "have \"\\<bar>\\<dots>\\<bar> \\<le> \\<bar>R\\<^sub>\\<MM> x / ln x\\<bar> + norm (I x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>R\\<^sub>\\<MM> x / ln x - I x\\<bar>\n    \\<le> \\<bar>R\\<^sub>\\<MM> x / ln x\\<bar> + norm (I x)", "unfolding real_norm_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>R\\<^sub>\\<MM> x / ln x - I x\\<bar>\n    \\<le> \\<bar>R\\<^sub>\\<MM> x / ln x\\<bar> + \\<bar>I x\\<bar>", "by (rule abs_triangle_ineq4)"], ["proof (state)\nthis:\n  \\<bar>R\\<^sub>\\<MM> x / ln x - I x\\<bar>\n  \\<le> \\<bar>R\\<^sub>\\<MM> x / ln x\\<bar> + norm (I x)\n\ngoal (1 subgoal):\n 1. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "also"], ["proof (state)\nthis:\n  \\<bar>R\\<^sub>\\<MM> x / ln x - I x\\<bar>\n  \\<le> \\<bar>R\\<^sub>\\<MM> x / ln x\\<bar> + norm (I x)\n\ngoal (1 subgoal):\n 1. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "have \"\\<bar>R\\<^sub>\\<MM> x / ln x\\<bar> \\<le> 2 / \\<bar>ln x\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>R\\<^sub>\\<MM> x / ln x\\<bar> \\<le> 2 / \\<bar>ln x\\<bar>", "unfolding R\\<^sub>\\<MM>_def abs_divide"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>\\<MM> x - ln x\\<bar> / \\<bar>ln x\\<bar> \\<le> 2 / \\<bar>ln x\\<bar>", "using mertens_first_theorem[of x] x"], ["proof (prove)\nusing this:\n  1 \\<le> x \\<Longrightarrow> \\<bar>\\<MM> x - ln x\\<bar> < 2\n  2 < x\n\ngoal (1 subgoal):\n 1. \\<bar>\\<MM> x - ln x\\<bar> / \\<bar>ln x\\<bar> \\<le> 2 / \\<bar>ln x\\<bar>", "by (intro divide_right_mono) auto"], ["proof (state)\nthis:\n  \\<bar>R\\<^sub>\\<MM> x / ln x\\<bar> \\<le> 2 / \\<bar>ln x\\<bar>\n\ngoal (1 subgoal):\n 1. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "also"], ["proof (state)\nthis:\n  \\<bar>R\\<^sub>\\<MM> x / ln x\\<bar> \\<le> 2 / \\<bar>ln x\\<bar>\n\ngoal (1 subgoal):\n 1. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "have \"{x..} - {x<..} = {x}\" and \"{x<..} \\<subseteq> {x..}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x..} - {x<..} = {x} &&& {x<..} \\<subseteq> {x..}", "by auto"], ["proof (state)\nthis:\n  {x..} - {x<..} = {x}\n  {x<..} \\<subseteq> {x..}\n\ngoal (1 subgoal):\n 1. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "hence \"I x = integral {x<..} r\""], ["proof (prove)\nusing this:\n  {x..} - {x<..} = {x}\n  {x<..} \\<subseteq> {x..}\n\ngoal (1 subgoal):\n 1. I x = integral {x<..} r", "unfolding I_def"], ["proof (prove)\nusing this:\n  {x..} - {x<..} = {x}\n  {x<..} \\<subseteq> {x..}\n\ngoal (1 subgoal):\n 1. integral {x..} r = integral {x<..} r", "by (intro integral_subset_negligible [symmetric]) simp_all"], ["proof (state)\nthis:\n  I x = integral {x<..} r\n\ngoal (1 subgoal):\n 1. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "also"], ["proof (state)\nthis:\n  I x = integral {x<..} r\n\ngoal (1 subgoal):\n 1. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "have \"norm \\<dots> \\<le> 2 / ln x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. norm (integral {x<..} r) \\<le> 2 / ln x", "using meissel_mertens_integral_le[of x] x"], ["proof (prove)\nusing this:\n  1 < x \\<Longrightarrow>\n  norm\n   (integral {x<..} (\\<lambda>t. (\\<MM> t - ln t) / (t * (ln t)\\<^sup>2)))\n  \\<le> 2 / ln x\n  2 < x\n\ngoal (1 subgoal):\n 1. norm (integral {x<..} r) \\<le> 2 / ln x", "by (simp add: r_def)"], ["proof (state)\nthis:\n  norm (integral {x<..} r) \\<le> 2 / ln x\n\ngoal (1 subgoal):\n 1. x \\<noteq> 2 \\<Longrightarrow>\n    \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "finally"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<And>xa y.\n              xa \\<le> y \\<Longrightarrow>\n              xa + norm (I x) \\<le> y + norm (I x);\n   \\<And>xa y.\n      xa \\<le> y \\<Longrightarrow>\n      2 / \\<bar>ln x\\<bar> + xa \\<le> 2 / \\<bar>ln x\\<bar> + y\\<rbrakk>\n  \\<Longrightarrow> \\<bar>f x - ln (ln x) - C\\<bar>\n                    \\<le> 2 / \\<bar>ln x\\<bar> + 2 / ln x", "show \"\\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>xa y.\n              xa \\<le> y \\<Longrightarrow>\n              xa + norm (I x) \\<le> y + norm (I x);\n   \\<And>xa y.\n      xa \\<le> y \\<Longrightarrow>\n      2 / \\<bar>ln x\\<bar> + xa \\<le> 2 / \\<bar>ln x\\<bar> + y\\<rbrakk>\n  \\<Longrightarrow> \\<bar>f x - ln (ln x) - C\\<bar>\n                    \\<le> 2 / \\<bar>ln x\\<bar> + 2 / ln x\n\ngoal (1 subgoal):\n 1. \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "using x"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>xa y.\n              xa \\<le> y \\<Longrightarrow>\n              xa + norm (I x) \\<le> y + norm (I x);\n   \\<And>xa y.\n      xa \\<le> y \\<Longrightarrow>\n      2 / \\<bar>ln x\\<bar> + xa \\<le> 2 / \\<bar>ln x\\<bar> + y\\<rbrakk>\n  \\<Longrightarrow> \\<bar>f x - ln (ln x) - C\\<bar>\n                    \\<le> 2 / \\<bar>ln x\\<bar> + 2 / ln x\n  2 < x\n\ngoal (1 subgoal):\n 1. \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x", "by (simp add: C_altdef)"], ["proof (state)\nthis:\n  \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  2 \\<le> ?x \\<Longrightarrow>\n  \\<bar>f ?x - ln (ln ?x) - meissel_mertens\\<bar> \\<le> 4 / ln ?x\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "have \"(\\<lambda>x. f x - ln (ln x) - C) \\<in> O(\\<lambda>x. 1 / ln x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x - ln (ln x) - C) \\<in> O(\\<lambda>x. 1 / ln x)", "proof (intro landau_o.bigI[of 4] eventually_mono[OF eventually_ge_at_top[of 2]])"], ["proof (state)\ngoal (2 subgoals):\n 1. 0 < 4\n 2. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       norm (f x - ln (ln x) - C) \\<le> 4 * norm (1 / ln x)", "fix x :: real"], ["proof (state)\ngoal (2 subgoals):\n 1. 0 < 4\n 2. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       norm (f x - ln (ln x) - C) \\<le> 4 * norm (1 / ln x)", "assume x: \"x \\<ge> 2\""], ["proof (state)\nthis:\n  2 \\<le> x\n\ngoal (2 subgoals):\n 1. 0 < 4\n 2. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       norm (f x - ln (ln x) - C) \\<le> 4 * norm (1 / ln x)", "with bound[OF x]"], ["proof (chain)\npicking this:\n  \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n  2 \\<le> x", "show \"norm (f x - ln (ln x) - C) \\<le> 4 * norm (1 / ln x)\""], ["proof (prove)\nusing this:\n  \\<bar>f x - ln (ln x) - meissel_mertens\\<bar> \\<le> 4 / ln x\n  2 \\<le> x\n\ngoal (1 subgoal):\n 1. norm (f x - ln (ln x) - C) \\<le> 4 * norm (1 / ln x)", "by (simp add: C_altdef)"], ["proof (state)\nthis:\n  norm (f x - ln (ln x) - C) \\<le> 4 * norm (1 / ln x)\n\ngoal (1 subgoal):\n 1. 0 < 4", "qed (auto intro!: add_pos_nonneg)"], ["proof (state)\nthis:\n  (\\<lambda>x. f x - ln (ln x) - C) \\<in> O(\\<lambda>x. 1 / ln x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "thus \"(\\<lambda>x. f x - ln (ln x) - meissel_mertens) \\<in> O(\\<lambda>x. 1 / ln x)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. f x - ln (ln x) - C) \\<in> O(\\<lambda>x. 1 / ln x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n    \\<in> O(\\<lambda>x. 1 / ln x)", "by (simp add: C_altdef)"], ["proof (state)\nthis:\n  (\\<lambda>x. f x - ln (ln x) - meissel_mertens)\n  \\<in> O(\\<lambda>x. 1 / ln x)\n\ngoal:\nNo subgoals!", "qed"], ["", "corollary prime_harmonic_asymp_equiv: \"prime_sum_upto (\\<lambda>p. 1 / p) \\<sim>[at_top] (\\<lambda>x. ln (ln x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prime_sum_upto\n     (\\<lambda>p. 1 / real p) \\<sim>[at_top] (\\<lambda>x. ln (ln x))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. prime_sum_upto\n     (\\<lambda>p. 1 / real p) \\<sim>[at_top] (\\<lambda>x. ln (ln x))", "define f where \"f = prime_sum_upto (\\<lambda>p. 1 / p)\""], ["proof (state)\nthis:\n  f = prime_sum_upto (\\<lambda>p. 1 / real p)\n\ngoal (1 subgoal):\n 1. prime_sum_upto\n     (\\<lambda>p. 1 / real p) \\<sim>[at_top] (\\<lambda>x. ln (ln x))", "have \"(\\<lambda>x. f x - ln (ln x) - meissel_mertens + meissel_mertens) \\<in> o(\\<lambda>x. ln (ln x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x - ln (ln x) - meissel_mertens + meissel_mertens)\n    \\<in> o(\\<lambda>x. ln (ln x))", "unfolding f_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        prime_sum_upto (\\<lambda>p. 1 / real p) x - ln (ln x) -\n        meissel_mertens +\n        meissel_mertens)\n    \\<in> o(\\<lambda>x. ln (ln x))", "by (rule sum_in_smallo[OF landau_o.big_small_trans[OF mertens_second_theorem(2)]]) real_asymp+"], ["proof (state)\nthis:\n  (\\<lambda>x. f x - ln (ln x) - meissel_mertens + meissel_mertens)\n  \\<in> o(\\<lambda>x. ln (ln x))\n\ngoal (1 subgoal):\n 1. prime_sum_upto\n     (\\<lambda>p. 1 / real p) \\<sim>[at_top] (\\<lambda>x. ln (ln x))", "hence \"(\\<lambda>x. f x - ln (ln x)) \\<in> o(\\<lambda>x. ln (ln x))\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. f x - ln (ln x) - meissel_mertens + meissel_mertens)\n  \\<in> o(\\<lambda>x. ln (ln x))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x - ln (ln x)) \\<in> o(\\<lambda>x. ln (ln x))", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>x. f x - ln (ln x)) \\<in> o(\\<lambda>x. ln (ln x))\n\ngoal (1 subgoal):\n 1. prime_sum_upto\n     (\\<lambda>p. 1 / real p) \\<sim>[at_top] (\\<lambda>x. ln (ln x))", "thus ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>x. f x - ln (ln x)) \\<in> o(\\<lambda>x. ln (ln x))\n\ngoal (1 subgoal):\n 1. prime_sum_upto\n     (\\<lambda>p. 1 / real p) \\<sim>[at_top] (\\<lambda>x. ln (ln x))", "unfolding f_def"], ["proof (prove)\nusing this:\n  (\\<lambda>x. prime_sum_upto (\\<lambda>p. 1 / real p) x - ln (ln x))\n  \\<in> o(\\<lambda>x. ln (ln x))\n\ngoal (1 subgoal):\n 1. prime_sum_upto\n     (\\<lambda>p. 1 / real p) \\<sim>[at_top] (\\<lambda>x. ln (ln x))", "by (rule smallo_imp_asymp_equiv)"], ["proof (state)\nthis:\n  prime_sum_upto\n   (\\<lambda>p. 1 / real p) \\<sim>[at_top] (\\<lambda>x. ln (ln x))\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\n  As a corollary, we get the divergence of the prime harmonic series.\n\\<close>"], ["", "corollary prime_harmonic_diverges: \"filterlim (prime_sum_upto (\\<lambda>p. 1 / p)) at_top at_top\""], ["proof (prove)\ngoal (1 subgoal):\n 1. filterlim (prime_sum_upto (\\<lambda>p. 1 / real p)) at_top at_top", "using asymp_equiv_symI[OF prime_harmonic_asymp_equiv]"], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      ln (ln x)) \\<sim>[at_top] prime_sum_upto (\\<lambda>p. 1 / real p)\n\ngoal (1 subgoal):\n 1. filterlim (prime_sum_upto (\\<lambda>p. 1 / real p)) at_top at_top", "by (rule asymp_equiv_at_top_transfer) real_asymp"], ["", "(*<*)"], ["", "unbundle no_prime_counting_notation"], ["", "(*>*)"], ["", "end"]]}