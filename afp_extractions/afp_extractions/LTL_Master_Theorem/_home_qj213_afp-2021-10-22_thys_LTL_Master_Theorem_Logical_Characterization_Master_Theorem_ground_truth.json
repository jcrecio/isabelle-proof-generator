{"file_name": "/home/qj213/afp-2021-10-22/thys/LTL_Master_Theorem/Logical_Characterization/Master_Theorem.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/LTL_Master_Theorem", "problem_names": ["lemma X_\\<G>\\<F>_Y_\\<F>\\<G>:\n  assumes\n    X_\\<mu>: \"X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\"\n  and\n    Y_\\<nu>: \"Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\"\n  and\n    X_GF: \"\\<forall>\\<psi> \\<in> X. w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\"\n  and\n    Y_FG: \"\\<forall>\\<psi> \\<in> Y. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\"\n  shows\n    \"X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w\"", "lemma \\<G>\\<F>_implies_GF:\n  \"\\<forall>\\<psi> \\<in> \\<G>\\<F> \\<phi> w. w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi> w]\\<^sub>\\<mu>)\"", "lemma \\<F>\\<G>_implies_FG:\n  \"\\<forall>\\<psi> \\<in> \\<F>\\<G> \\<phi> w. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>)\"", "theorem master_theorem_ltr:\n  assumes\n    \"w \\<Turnstile>\\<^sub>n \\<phi>\"\n  obtains X and Y where\n    \"X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\"\n  and\n    \"Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\"\n  and\n    \"\\<exists>i. suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>\"\n  and\n    \"\\<forall>\\<psi> \\<in> X. w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\"\n  and\n    \"\\<forall>\\<psi> \\<in> Y. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\"", "theorem master_theorem_rtl:\n  assumes\n    \"X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\"\n  and\n    \"Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\"\n  and\n    1: \"\\<exists>i. suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>\"\n  and\n    2: \"\\<forall>\\<psi> \\<in> X. w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\"\n  and\n    3: \"\\<forall>\\<psi> \\<in> Y. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\"\n  shows\n    \"w \\<Turnstile>\\<^sub>n \\<phi>\"", "theorem master_theorem:\n  \"w \\<Turnstile>\\<^sub>n \\<phi> \\<longleftrightarrow>\n    (\\<exists>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>.\n      (\\<exists>Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>.\n        (\\<exists>i. suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>)\n        \\<and> (\\<forall>\\<psi> \\<in> X. w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>))\n        \\<and> (\\<forall>\\<psi> \\<in> Y. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>))))\""], "translations": [["", "lemma X_\\<G>\\<F>_Y_\\<F>\\<G>:\n  assumes\n    X_\\<mu>: \"X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\"\n  and\n    Y_\\<nu>: \"Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\"\n  and\n    X_GF: \"\\<forall>\\<psi> \\<in> X. w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\"\n  and\n    Y_FG: \"\\<forall>\\<psi> \\<in> Y. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\"\n  shows\n    \"X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "proof -\n  \\<comment> \\<open>Custom induction rule with @{term size} as a partial order\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "note induct = finite_ranking_induct[where f = size]"], ["proof (state)\nthis:\n  \\<lbrakk>finite ?S; ?P {};\n   \\<And>x S.\n      \\<lbrakk>finite S;\n       \\<And>y. y \\<in> S \\<Longrightarrow> size y \\<le> size x;\n       ?P S\\<rbrakk>\n      \\<Longrightarrow> ?P (insert x S)\\<rbrakk>\n  \\<Longrightarrow> ?P ?S\n\ngoal (1 subgoal):\n 1. X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "have \"finite (X \\<union> Y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (X \\<union> Y)", "using subformulas\\<^sub>\\<mu>_finite subformulas\\<^sub>\\<nu>_finite X_\\<mu> Y_\\<nu> finite_subset"], ["proof (prove)\nusing this:\n  finite (subformulas\\<^sub>\\<mu> ?\\<phi>)\n  finite (subformulas\\<^sub>\\<nu> ?\\<phi>)\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  \\<lbrakk>?A \\<subseteq> ?B; finite ?B\\<rbrakk> \\<Longrightarrow> finite ?A\n\ngoal (1 subgoal):\n 1. finite (X \\<union> Y)", "by blast+"], ["proof (state)\nthis:\n  finite (X \\<union> Y)\n\ngoal (1 subgoal):\n 1. X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "then"], ["proof (chain)\npicking this:\n  finite (X \\<union> Y)", "show ?thesis"], ["proof (prove)\nusing this:\n  finite (X \\<union> Y)\n\ngoal (1 subgoal):\n 1. X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "using assms"], ["proof (prove)\nusing this:\n  finite (X \\<union> Y)\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  \\<forall>\\<psi>\\<in>X.\n     w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\n  \\<forall>\\<psi>\\<in>Y.\n     w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\n\ngoal (1 subgoal):\n 1. X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "proof (induction \"X \\<union> Y\" arbitrary: X Y \\<phi> rule: induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>X Y \\<phi>.\n       \\<lbrakk>{} = X \\<union> Y;\n        X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n        \\<forall>\\<psi>\\<in>X.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n        \\<forall>\\<psi>\\<in>Y.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n       \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                         Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<And>x S X Y \\<phi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> size y \\<le> size x;\n        \\<And>X Y \\<phi>.\n           \\<lbrakk>S = X \\<union> Y;\n            X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n            Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n            \\<forall>\\<psi>\\<in>X.\n               w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n            \\<forall>\\<psi>\\<in>Y.\n               w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n           \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                             Y \\<subseteq> \\<F>\\<G> \\<phi> w;\n        insert x S = X \\<union> Y;\n        X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n        \\<forall>\\<psi>\\<in>X.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n        \\<forall>\\<psi>\\<in>Y.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n       \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                         Y \\<subseteq> \\<F>\\<G> \\<phi> w", "case (insert \\<psi> S)"], ["proof (state)\nthis:\n  finite S\n  ?y \\<in> S \\<Longrightarrow> size ?y \\<le> size \\<psi>\n  \\<lbrakk>S = ?X \\<union> ?Y;\n   ?X \\<subseteq> subformulas\\<^sub>\\<mu> ?\\<phi>;\n   ?Y \\<subseteq> subformulas\\<^sub>\\<nu> ?\\<phi>;\n   \\<forall>\\<psi>\\<in>?X.\n      w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[?Y]\\<^sub>\\<mu>);\n   \\<forall>\\<psi>\\<in>?Y.\n      w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[?X]\\<^sub>\\<nu>)\\<rbrakk>\n  \\<Longrightarrow> ?X \\<subseteq> \\<G>\\<F> ?\\<phi> w \\<and>\n                    ?Y \\<subseteq> \\<F>\\<G> ?\\<phi> w\n  insert \\<psi> S = X \\<union> Y\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  \\<forall>\\<psi>\\<in>X.\n     w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\n  \\<forall>\\<psi>\\<in>Y.\n     w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\n\ngoal (2 subgoals):\n 1. \\<And>X Y \\<phi>.\n       \\<lbrakk>{} = X \\<union> Y;\n        X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n        \\<forall>\\<psi>\\<in>X.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n        \\<forall>\\<psi>\\<in>Y.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n       \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                         Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<And>x S X Y \\<phi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> size y \\<le> size x;\n        \\<And>X Y \\<phi>.\n           \\<lbrakk>S = X \\<union> Y;\n            X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n            Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n            \\<forall>\\<psi>\\<in>X.\n               w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n            \\<forall>\\<psi>\\<in>Y.\n               w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n           \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                             Y \\<subseteq> \\<F>\\<G> \\<phi> w;\n        insert x S = X \\<union> Y;\n        X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n        \\<forall>\\<psi>\\<in>X.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n        \\<forall>\\<psi>\\<in>Y.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n       \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                         Y \\<subseteq> \\<F>\\<G> \\<phi> w", "note IH = insert(3)"], ["proof (state)\nthis:\n  \\<lbrakk>S = ?X \\<union> ?Y;\n   ?X \\<subseteq> subformulas\\<^sub>\\<mu> ?\\<phi>;\n   ?Y \\<subseteq> subformulas\\<^sub>\\<nu> ?\\<phi>;\n   \\<forall>\\<psi>\\<in>?X.\n      w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[?Y]\\<^sub>\\<mu>);\n   \\<forall>\\<psi>\\<in>?Y.\n      w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[?X]\\<^sub>\\<nu>)\\<rbrakk>\n  \\<Longrightarrow> ?X \\<subseteq> \\<G>\\<F> ?\\<phi> w \\<and>\n                    ?Y \\<subseteq> \\<F>\\<G> ?\\<phi> w\n\ngoal (2 subgoals):\n 1. \\<And>X Y \\<phi>.\n       \\<lbrakk>{} = X \\<union> Y;\n        X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n        \\<forall>\\<psi>\\<in>X.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n        \\<forall>\\<psi>\\<in>Y.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n       \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                         Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<And>x S X Y \\<phi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> size y \\<le> size x;\n        \\<And>X Y \\<phi>.\n           \\<lbrakk>S = X \\<union> Y;\n            X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n            Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n            \\<forall>\\<psi>\\<in>X.\n               w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n            \\<forall>\\<psi>\\<in>Y.\n               w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n           \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                             Y \\<subseteq> \\<F>\\<G> \\<phi> w;\n        insert x S = X \\<union> Y;\n        X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n        \\<forall>\\<psi>\\<in>X.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n        \\<forall>\\<psi>\\<in>Y.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n       \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                         Y \\<subseteq> \\<F>\\<G> \\<phi> w", "note insert_S = \\<open>insert \\<psi> S = X \\<union> Y\\<close>"], ["proof (state)\nthis:\n  insert \\<psi> S = X \\<union> Y\n\ngoal (2 subgoals):\n 1. \\<And>X Y \\<phi>.\n       \\<lbrakk>{} = X \\<union> Y;\n        X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n        \\<forall>\\<psi>\\<in>X.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n        \\<forall>\\<psi>\\<in>Y.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n       \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                         Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<And>x S X Y \\<phi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> size y \\<le> size x;\n        \\<And>X Y \\<phi>.\n           \\<lbrakk>S = X \\<union> Y;\n            X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n            Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n            \\<forall>\\<psi>\\<in>X.\n               w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n            \\<forall>\\<psi>\\<in>Y.\n               w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n           \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                             Y \\<subseteq> \\<F>\\<G> \\<phi> w;\n        insert x S = X \\<union> Y;\n        X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n        \\<forall>\\<psi>\\<in>X.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n        \\<forall>\\<psi>\\<in>Y.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n       \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                         Y \\<subseteq> \\<F>\\<G> \\<phi> w", "note X_\\<mu> = \\<open>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\\<close>"], ["proof (state)\nthis:\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n\ngoal (2 subgoals):\n 1. \\<And>X Y \\<phi>.\n       \\<lbrakk>{} = X \\<union> Y;\n        X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n        \\<forall>\\<psi>\\<in>X.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n        \\<forall>\\<psi>\\<in>Y.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n       \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                         Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<And>x S X Y \\<phi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> size y \\<le> size x;\n        \\<And>X Y \\<phi>.\n           \\<lbrakk>S = X \\<union> Y;\n            X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n            Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n            \\<forall>\\<psi>\\<in>X.\n               w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n            \\<forall>\\<psi>\\<in>Y.\n               w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n           \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                             Y \\<subseteq> \\<F>\\<G> \\<phi> w;\n        insert x S = X \\<union> Y;\n        X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n        \\<forall>\\<psi>\\<in>X.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n        \\<forall>\\<psi>\\<in>Y.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n       \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                         Y \\<subseteq> \\<F>\\<G> \\<phi> w", "note Y_\\<nu> = \\<open>Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\\<close>"], ["proof (state)\nthis:\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n\ngoal (2 subgoals):\n 1. \\<And>X Y \\<phi>.\n       \\<lbrakk>{} = X \\<union> Y;\n        X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n        \\<forall>\\<psi>\\<in>X.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n        \\<forall>\\<psi>\\<in>Y.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n       \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                         Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<And>x S X Y \\<phi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> size y \\<le> size x;\n        \\<And>X Y \\<phi>.\n           \\<lbrakk>S = X \\<union> Y;\n            X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n            Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n            \\<forall>\\<psi>\\<in>X.\n               w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n            \\<forall>\\<psi>\\<in>Y.\n               w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n           \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                             Y \\<subseteq> \\<F>\\<G> \\<phi> w;\n        insert x S = X \\<union> Y;\n        X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n        \\<forall>\\<psi>\\<in>X.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n        \\<forall>\\<psi>\\<in>Y.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n       \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                         Y \\<subseteq> \\<F>\\<G> \\<phi> w", "note X_GF = \\<open>\\<forall>\\<psi> \\<in> X. w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\\<close>"], ["proof (state)\nthis:\n  \\<forall>\\<psi>\\<in>X.\n     w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\n\ngoal (2 subgoals):\n 1. \\<And>X Y \\<phi>.\n       \\<lbrakk>{} = X \\<union> Y;\n        X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n        \\<forall>\\<psi>\\<in>X.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n        \\<forall>\\<psi>\\<in>Y.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n       \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                         Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<And>x S X Y \\<phi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> size y \\<le> size x;\n        \\<And>X Y \\<phi>.\n           \\<lbrakk>S = X \\<union> Y;\n            X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n            Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n            \\<forall>\\<psi>\\<in>X.\n               w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n            \\<forall>\\<psi>\\<in>Y.\n               w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n           \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                             Y \\<subseteq> \\<F>\\<G> \\<phi> w;\n        insert x S = X \\<union> Y;\n        X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n        \\<forall>\\<psi>\\<in>X.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n        \\<forall>\\<psi>\\<in>Y.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n       \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                         Y \\<subseteq> \\<F>\\<G> \\<phi> w", "note Y_FG = \\<open>\\<forall>\\<psi> \\<in> Y. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<close>"], ["proof (state)\nthis:\n  \\<forall>\\<psi>\\<in>Y.\n     w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\n\ngoal (2 subgoals):\n 1. \\<And>X Y \\<phi>.\n       \\<lbrakk>{} = X \\<union> Y;\n        X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n        \\<forall>\\<psi>\\<in>X.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n        \\<forall>\\<psi>\\<in>Y.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n       \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                         Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<And>x S X Y \\<phi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> size y \\<le> size x;\n        \\<And>X Y \\<phi>.\n           \\<lbrakk>S = X \\<union> Y;\n            X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n            Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n            \\<forall>\\<psi>\\<in>X.\n               w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n            \\<forall>\\<psi>\\<in>Y.\n               w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n           \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                             Y \\<subseteq> \\<F>\\<G> \\<phi> w;\n        insert x S = X \\<union> Y;\n        X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n        \\<forall>\\<psi>\\<in>X.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n        \\<forall>\\<psi>\\<in>Y.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n       \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                         Y \\<subseteq> \\<F>\\<G> \\<phi> w", "from X_\\<mu> Y_\\<nu>"], ["proof (chain)\npicking this:\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>", "have \"X \\<inter> Y = {}\""], ["proof (prove)\nusing this:\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n\ngoal (1 subgoal):\n 1. X \\<inter> Y = {}", "using subformulas\\<^sub>\\<mu>\\<^sub>\\<nu>_disjoint"], ["proof (prove)\nusing this:\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  subformulas\\<^sub>\\<mu> ?\\<phi> \\<inter> subformulas\\<^sub>\\<nu> ?\\<phi> =\n  {}\n\ngoal (1 subgoal):\n 1. X \\<inter> Y = {}", "by fast"], ["proof (state)\nthis:\n  X \\<inter> Y = {}\n\ngoal (2 subgoals):\n 1. \\<And>X Y \\<phi>.\n       \\<lbrakk>{} = X \\<union> Y;\n        X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n        \\<forall>\\<psi>\\<in>X.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n        \\<forall>\\<psi>\\<in>Y.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n       \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                         Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<And>x S X Y \\<phi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> size y \\<le> size x;\n        \\<And>X Y \\<phi>.\n           \\<lbrakk>S = X \\<union> Y;\n            X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n            Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n            \\<forall>\\<psi>\\<in>X.\n               w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n            \\<forall>\\<psi>\\<in>Y.\n               w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n           \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                             Y \\<subseteq> \\<F>\\<G> \\<phi> w;\n        insert x S = X \\<union> Y;\n        X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n        \\<forall>\\<psi>\\<in>X.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n        \\<forall>\\<psi>\\<in>Y.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n       \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                         Y \\<subseteq> \\<F>\\<G> \\<phi> w", "from insert_S X_\\<mu> Y_\\<nu>"], ["proof (chain)\npicking this:\n  insert \\<psi> S = X \\<union> Y\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>", "have \"\\<psi> \\<in> subfrmlsn \\<phi>\""], ["proof (prove)\nusing this:\n  insert \\<psi> S = X \\<union> Y\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n\ngoal (1 subgoal):\n 1. \\<psi> \\<in> subfrmlsn \\<phi>", "using subformulas\\<^sub>\\<mu>_subfrmlsn subformulas\\<^sub>\\<nu>_subfrmlsn"], ["proof (prove)\nusing this:\n  insert \\<psi> S = X \\<union> Y\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  subformulas\\<^sub>\\<mu> ?\\<phi> \\<subseteq> subfrmlsn ?\\<phi>\n  subformulas\\<^sub>\\<nu> ?\\<phi> \\<subseteq> subfrmlsn ?\\<phi>\n\ngoal (1 subgoal):\n 1. \\<psi> \\<in> subfrmlsn \\<phi>", "by blast"], ["proof (state)\nthis:\n  \\<psi> \\<in> subfrmlsn \\<phi>\n\ngoal (2 subgoals):\n 1. \\<And>X Y \\<phi>.\n       \\<lbrakk>{} = X \\<union> Y;\n        X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n        \\<forall>\\<psi>\\<in>X.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n        \\<forall>\\<psi>\\<in>Y.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n       \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                         Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<And>x S X Y \\<phi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> size y \\<le> size x;\n        \\<And>X Y \\<phi>.\n           \\<lbrakk>S = X \\<union> Y;\n            X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n            Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n            \\<forall>\\<psi>\\<in>X.\n               w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n            \\<forall>\\<psi>\\<in>Y.\n               w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n           \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                             Y \\<subseteq> \\<F>\\<G> \\<phi> w;\n        insert x S = X \\<union> Y;\n        X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n        \\<forall>\\<psi>\\<in>X.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n        \\<forall>\\<psi>\\<in>Y.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n       \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                         Y \\<subseteq> \\<F>\\<G> \\<phi> w", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "proof (cases \"\\<psi> \\<notin> S\", cases \"\\<psi> \\<in> X\")"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "assume \"\\<psi> \\<notin> S\" and \"\\<psi> \\<in> X\""], ["proof (state)\nthis:\n  \\<psi> \\<notin> S\n  \\<psi> \\<in> X\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "{\n        \\<comment> \\<open>Show @{term \"X - {\\<psi>} \\<subseteq> \\<G>\\<F> \\<phi> w\"} and @{term \"Y \\<subseteq> \\<F>\\<G> \\<phi> w\"}\\<close>"], ["proof (state)\nthis:\n  \\<psi> \\<notin> S\n  \\<psi> \\<in> X\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "then"], ["proof (chain)\npicking this:\n  \\<psi> \\<notin> S\n  \\<psi> \\<in> X", "have \"\\<psi> \\<notin> Y\""], ["proof (prove)\nusing this:\n  \\<psi> \\<notin> S\n  \\<psi> \\<in> X\n\ngoal (1 subgoal):\n 1. \\<psi> \\<notin> Y", "using \\<open>X \\<inter> Y = {}\\<close>"], ["proof (prove)\nusing this:\n  \\<psi> \\<notin> S\n  \\<psi> \\<in> X\n  X \\<inter> Y = {}\n\ngoal (1 subgoal):\n 1. \\<psi> \\<notin> Y", "by auto"], ["proof (state)\nthis:\n  \\<psi> \\<notin> Y\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "then"], ["proof (chain)\npicking this:\n  \\<psi> \\<notin> Y", "have \"S = (X - {\\<psi>}) \\<union> Y\""], ["proof (prove)\nusing this:\n  \\<psi> \\<notin> Y\n\ngoal (1 subgoal):\n 1. S = X - {\\<psi>} \\<union> Y", "using insert_S \\<open>\\<psi> \\<notin> S\\<close>"], ["proof (prove)\nusing this:\n  \\<psi> \\<notin> Y\n  insert \\<psi> S = X \\<union> Y\n  \\<psi> \\<notin> S\n\ngoal (1 subgoal):\n 1. S = X - {\\<psi>} \\<union> Y", "by fast"], ["proof (state)\nthis:\n  S = X - {\\<psi>} \\<union> Y\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "moreover"], ["proof (state)\nthis:\n  S = X - {\\<psi>} \\<union> Y\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "have \"\\<forall>\\<psi>' \\<in> Y. \\<psi>'[X - {\\<psi>}]\\<^sub>\\<nu> = \\<psi>'[X]\\<^sub>\\<nu>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<psi>'\\<in>Y.\n       \\<psi>'[X - {\\<psi>}]\\<^sub>\\<nu> = \\<psi>'[X]\\<^sub>\\<nu>", "using GF_advice_minus_size insert(1,2,4) \\<open>\\<psi> \\<notin> Y\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>size ?\\<phi> \\<le> size ?\\<psi>;\n   ?\\<phi> \\<noteq> ?\\<psi>\\<rbrakk>\n  \\<Longrightarrow> ?\\<phi>[?X - {?\\<psi>}]\\<^sub>\\<nu> =\n                    ?\\<phi>[?X]\\<^sub>\\<nu>\n  finite S\n  ?y \\<in> S \\<Longrightarrow> size ?y \\<le> size \\<psi>\n  insert \\<psi> S = X \\<union> Y\n  \\<psi> \\<notin> Y\n\ngoal (1 subgoal):\n 1. \\<forall>\\<psi>'\\<in>Y.\n       \\<psi>'[X - {\\<psi>}]\\<^sub>\\<nu> = \\<psi>'[X]\\<^sub>\\<nu>", "by fast"], ["proof (state)\nthis:\n  \\<forall>\\<psi>'\\<in>Y.\n     \\<psi>'[X - {\\<psi>}]\\<^sub>\\<nu> = \\<psi>'[X]\\<^sub>\\<nu>\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "ultimately"], ["proof (chain)\npicking this:\n  S = X - {\\<psi>} \\<union> Y\n  \\<forall>\\<psi>'\\<in>Y.\n     \\<psi>'[X - {\\<psi>}]\\<^sub>\\<nu> = \\<psi>'[X]\\<^sub>\\<nu>", "have \"X - {\\<psi>} \\<subseteq> \\<G>\\<F> \\<phi> w\" and \"Y \\<subseteq> \\<F>\\<G> \\<phi> w\""], ["proof (prove)\nusing this:\n  S = X - {\\<psi>} \\<union> Y\n  \\<forall>\\<psi>'\\<in>Y.\n     \\<psi>'[X - {\\<psi>}]\\<^sub>\\<nu> = \\<psi>'[X]\\<^sub>\\<nu>\n\ngoal (1 subgoal):\n 1. X - {\\<psi>} \\<subseteq> \\<G>\\<F> \\<phi> w &&&\n    Y \\<subseteq> \\<F>\\<G> \\<phi> w", "using IH[of \"X - {\\<psi>}\" Y \\<phi>] X_\\<mu> Y_\\<nu> X_GF Y_FG"], ["proof (prove)\nusing this:\n  S = X - {\\<psi>} \\<union> Y\n  \\<forall>\\<psi>'\\<in>Y.\n     \\<psi>'[X - {\\<psi>}]\\<^sub>\\<nu> = \\<psi>'[X]\\<^sub>\\<nu>\n  \\<lbrakk>S = X - {\\<psi>} \\<union> Y;\n   X - {\\<psi>} \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n   Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n   \\<forall>\\<psi>\\<in>X - {\\<psi>}.\n      w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n   \\<forall>\\<psi>'\\<in>Y.\n      w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>'[X -\n                    {\\<psi>}]\\<^sub>\\<nu>)\\<rbrakk>\n  \\<Longrightarrow> X - {\\<psi>} \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                    Y \\<subseteq> \\<F>\\<G> \\<phi> w\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  \\<forall>\\<psi>\\<in>X.\n     w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\n  \\<forall>\\<psi>\\<in>Y.\n     w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\n\ngoal (1 subgoal):\n 1. X - {\\<psi>} \\<subseteq> \\<G>\\<F> \\<phi> w &&&\n    Y \\<subseteq> \\<F>\\<G> \\<phi> w", "by auto"], ["proof (state)\nthis:\n  X - {\\<psi>} \\<subseteq> \\<G>\\<F> \\<phi> w\n  Y \\<subseteq> \\<F>\\<G> \\<phi> w\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "}"], ["proof (state)\nthis:\n  X - {\\<psi>} \\<subseteq> \\<G>\\<F> \\<phi> w\n  Y \\<subseteq> \\<F>\\<G> \\<phi> w\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "moreover"], ["proof (state)\nthis:\n  X - {\\<psi>} \\<subseteq> \\<G>\\<F> \\<phi> w\n  Y \\<subseteq> \\<F>\\<G> \\<phi> w\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "{\n        \\<comment> \\<open>Show @{term \"\\<psi> \\<in> \\<G>\\<F> \\<phi> w\"}\\<close>"], ["proof (state)\nthis:\n  X - {\\<psi>} \\<subseteq> \\<G>\\<F> \\<phi> w\n  Y \\<subseteq> \\<F>\\<G> \\<phi> w\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "have \"w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)", "using X_GF \\<open>\\<psi> \\<in> X\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>\\<psi>\\<in>X.\n     w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\n  \\<psi> \\<in> X\n\ngoal (1 subgoal):\n 1. w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)", "by simp"], ["proof (state)\nthis:\n  w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "then"], ["proof (chain)\npicking this:\n  w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)", "have \"\\<exists>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>\""], ["proof (prove)\nusing this:\n  w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\n\ngoal (1 subgoal):\n 1. \\<exists>\\<^sub>\\<infinity>i.\n       suffix i w \\<Turnstile>\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>", "unfolding GF_Inf_many"], ["proof (prove)\nusing this:\n  \\<exists>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>\n\ngoal (1 subgoal):\n 1. \\<exists>\\<^sub>\\<infinity>i.\n       suffix i w \\<Turnstile>\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>", "by simp"], ["proof (state)\nthis:\n  \\<exists>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "moreover"], ["proof (state)\nthis:\n  \\<exists>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "from Y_\\<nu>"], ["proof (chain)\npicking this:\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>", "have \"finite Y\""], ["proof (prove)\nusing this:\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n\ngoal (1 subgoal):\n 1. finite Y", "using subformulas\\<^sub>\\<nu>_finite finite_subset"], ["proof (prove)\nusing this:\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  finite (subformulas\\<^sub>\\<nu> ?\\<phi>)\n  \\<lbrakk>?A \\<subseteq> ?B; finite ?B\\<rbrakk> \\<Longrightarrow> finite ?A\n\ngoal (1 subgoal):\n 1. finite Y", "by auto"], ["proof (state)\nthis:\n  finite Y\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "have \"\\<forall>\\<phi> \\<in> Y. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<phi>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<phi>\\<in>Y.\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<phi>)", "using \\<open>Y \\<subseteq> \\<F>\\<G> \\<phi> w\\<close>"], ["proof (prove)\nusing this:\n  Y \\<subseteq> \\<F>\\<G> \\<phi> w\n\ngoal (1 subgoal):\n 1. \\<forall>\\<phi>\\<in>Y.\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<phi>)", "by (blast dest: \\<F>\\<G>_elim)"], ["proof (state)\nthis:\n  \\<forall>\\<phi>\\<in>Y. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<phi>)\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<phi>\\<in>Y. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<phi>)", "have \"\\<forall>\\<phi> \\<in> Y. \\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n \\<phi>\""], ["proof (prove)\nusing this:\n  \\<forall>\\<phi>\\<in>Y. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<phi>)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<phi>\\<in>Y.\n       \\<forall>\\<^sub>\\<infinity>i.\n          suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n \\<phi>", "using FG_suffix_G"], ["proof (prove)\nusing this:\n  \\<forall>\\<phi>\\<in>Y. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<phi>)\n  ?w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n ?\\<phi>) \\<Longrightarrow>\n  \\<forall>\\<^sub>\\<infinity>i.\n     suffix i ?w \\<Turnstile>\\<^sub>n G\\<^sub>n ?\\<phi>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<phi>\\<in>Y.\n       \\<forall>\\<^sub>\\<infinity>i.\n          suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n \\<phi>", "by blast"], ["proof (state)\nthis:\n  \\<forall>\\<phi>\\<in>Y.\n     \\<forall>\\<^sub>\\<infinity>i.\n        suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n \\<phi>\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<phi>\\<in>Y.\n     \\<forall>\\<^sub>\\<infinity>i.\n        suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n \\<phi>", "have \"\\<forall>\\<^sub>\\<infinity>i. \\<forall>\\<phi> \\<in> Y. suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n \\<phi>\""], ["proof (prove)\nusing this:\n  \\<forall>\\<phi>\\<in>Y.\n     \\<forall>\\<^sub>\\<infinity>i.\n        suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n \\<phi>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       \\<forall>\\<phi>\\<in>Y.\n          suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n \\<phi>", "using \\<open>finite Y\\<close> eventually_ball_finite"], ["proof (prove)\nusing this:\n  \\<forall>\\<phi>\\<in>Y.\n     \\<forall>\\<^sub>\\<infinity>i.\n        suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n \\<phi>\n  finite Y\n  \\<lbrakk>finite ?A;\n   \\<forall>y\\<in>?A. \\<forall>\\<^sub>F x in ?net. ?P x y\\<rbrakk>\n  \\<Longrightarrow> \\<forall>\\<^sub>F x in ?net. \\<forall>y\\<in>?A. ?P x y\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       \\<forall>\\<phi>\\<in>Y.\n          suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n \\<phi>", "by fast"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<forall>\\<phi>\\<in>Y. suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n \\<phi>\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "ultimately"], ["proof (chain)\npicking this:\n  \\<exists>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<forall>\\<phi>\\<in>Y. suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n \\<phi>", "have \"\\<exists>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu> \\<and> (\\<forall>\\<phi> \\<in> Y. suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n \\<phi>)\""], ["proof (prove)\nusing this:\n  \\<exists>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<forall>\\<phi>\\<in>Y. suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n \\<phi>\n\ngoal (1 subgoal):\n 1. \\<exists>\\<^sub>\\<infinity>i.\n       suffix i w \\<Turnstile>\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu> \\<and>\n       (\\<forall>\\<phi>\\<in>Y.\n           suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n \\<phi>)", "using INFM_conjI"], ["proof (prove)\nusing this:\n  \\<exists>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<forall>\\<phi>\\<in>Y. suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n \\<phi>\n  \\<lbrakk>\\<exists>\\<^sub>\\<infinity>x. ?P x;\n   \\<forall>\\<^sub>\\<infinity>x. ?Q x\\<rbrakk>\n  \\<Longrightarrow> \\<exists>\\<^sub>\\<infinity>x. ?P x \\<and> ?Q x\n\ngoal (1 subgoal):\n 1. \\<exists>\\<^sub>\\<infinity>i.\n       suffix i w \\<Turnstile>\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu> \\<and>\n       (\\<forall>\\<phi>\\<in>Y.\n           suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n \\<phi>)", "by auto"], ["proof (state)\nthis:\n  \\<exists>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu> \\<and>\n     (\\<forall>\\<phi>\\<in>Y.\n         suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n \\<phi>)\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "then"], ["proof (chain)\npicking this:\n  \\<exists>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu> \\<and>\n     (\\<forall>\\<phi>\\<in>Y.\n         suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n \\<phi>)", "have \"\\<exists>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>\""], ["proof (prove)\nusing this:\n  \\<exists>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu> \\<and>\n     (\\<forall>\\<phi>\\<in>Y.\n         suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n \\<phi>)\n\ngoal (1 subgoal):\n 1. \\<exists>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>", "by (elim frequently_elim1) (metis FG_advice_b2_helper)"], ["proof (state)\nthis:\n  \\<exists>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "then"], ["proof (chain)\npicking this:\n  \\<exists>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>", "have \"w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>)\""], ["proof (prove)\nusing this:\n  \\<exists>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>\n\ngoal (1 subgoal):\n 1. w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>)", "unfolding GF_Inf_many"], ["proof (prove)\nusing this:\n  \\<exists>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>\n\ngoal (1 subgoal):\n 1. \\<exists>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>", "by simp"], ["proof (state)\nthis:\n  w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>)\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "then"], ["proof (chain)\npicking this:\n  w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>)", "have \"\\<psi> \\<in> \\<G>\\<F> \\<phi> w\""], ["proof (prove)\nusing this:\n  w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>)\n\ngoal (1 subgoal):\n 1. \\<psi> \\<in> \\<G>\\<F> \\<phi> w", "unfolding \\<G>\\<F>_semantics"], ["proof (prove)\nusing this:\n  w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>)\n\ngoal (1 subgoal):\n 1. \\<psi>\n    \\<in> {\\<psi> \\<in> subformulas\\<^sub>\\<mu> \\<phi>.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>)}", "using \\<open>\\<psi> \\<in> X\\<close> X_\\<mu>"], ["proof (prove)\nusing this:\n  w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>)\n  \\<psi> \\<in> X\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n\ngoal (1 subgoal):\n 1. \\<psi>\n    \\<in> {\\<psi> \\<in> subformulas\\<^sub>\\<mu> \\<phi>.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>)}", "by auto"], ["proof (state)\nthis:\n  \\<psi> \\<in> \\<G>\\<F> \\<phi> w\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "}"], ["proof (state)\nthis:\n  \\<psi> \\<in> \\<G>\\<F> \\<phi> w\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<in> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 3. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "ultimately"], ["proof (chain)\npicking this:\n  X - {\\<psi>} \\<subseteq> \\<G>\\<F> \\<phi> w\n  Y \\<subseteq> \\<F>\\<G> \\<phi> w\n  \\<psi> \\<in> \\<G>\\<F> \\<phi> w", "show ?thesis"], ["proof (prove)\nusing this:\n  X - {\\<psi>} \\<subseteq> \\<G>\\<F> \\<phi> w\n  Y \\<subseteq> \\<F>\\<G> \\<phi> w\n  \\<psi> \\<in> \\<G>\\<F> \\<phi> w\n\ngoal (1 subgoal):\n 1. X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "by auto"], ["proof (state)\nthis:\n  X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "assume \"\\<psi> \\<notin> S\" and \"\\<psi> \\<notin> X\""], ["proof (state)\nthis:\n  \\<psi> \\<notin> S\n  \\<psi> \\<notin> X\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "then"], ["proof (chain)\npicking this:\n  \\<psi> \\<notin> S\n  \\<psi> \\<notin> X", "have \"\\<psi> \\<in> Y\""], ["proof (prove)\nusing this:\n  \\<psi> \\<notin> S\n  \\<psi> \\<notin> X\n\ngoal (1 subgoal):\n 1. \\<psi> \\<in> Y", "using insert"], ["proof (prove)\nusing this:\n  \\<psi> \\<notin> S\n  \\<psi> \\<notin> X\n  finite S\n  ?y \\<in> S \\<Longrightarrow> size ?y \\<le> size \\<psi>\n  \\<lbrakk>S = ?X \\<union> ?Y;\n   ?X \\<subseteq> subformulas\\<^sub>\\<mu> ?\\<phi>;\n   ?Y \\<subseteq> subformulas\\<^sub>\\<nu> ?\\<phi>;\n   \\<forall>\\<psi>\\<in>?X.\n      w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[?Y]\\<^sub>\\<mu>);\n   \\<forall>\\<psi>\\<in>?Y.\n      w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[?X]\\<^sub>\\<nu>)\\<rbrakk>\n  \\<Longrightarrow> ?X \\<subseteq> \\<G>\\<F> ?\\<phi> w \\<and>\n                    ?Y \\<subseteq> \\<F>\\<G> ?\\<phi> w\n  insert \\<psi> S = X \\<union> Y\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  \\<forall>\\<psi>\\<in>X.\n     w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\n  \\<forall>\\<psi>\\<in>Y.\n     w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\n\ngoal (1 subgoal):\n 1. \\<psi> \\<in> Y", "by fast"], ["proof (state)\nthis:\n  \\<psi> \\<in> Y\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "{\n        \\<comment> \\<open>Show @{term \"X \\<subseteq> \\<G>\\<F> \\<phi> w\"} and @{term \"Y - {\\<psi>} \\<subseteq> \\<F>\\<G> \\<phi> w\"}\\<close>"], ["proof (state)\nthis:\n  \\<psi> \\<in> Y\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "then"], ["proof (chain)\npicking this:\n  \\<psi> \\<in> Y", "have \"S \\<inter> X = X\""], ["proof (prove)\nusing this:\n  \\<psi> \\<in> Y\n\ngoal (1 subgoal):\n 1. S \\<inter> X = X", "using insert \\<open>\\<psi> \\<notin> X\\<close>"], ["proof (prove)\nusing this:\n  \\<psi> \\<in> Y\n  finite S\n  ?y \\<in> S \\<Longrightarrow> size ?y \\<le> size \\<psi>\n  \\<lbrakk>S = ?X \\<union> ?Y;\n   ?X \\<subseteq> subformulas\\<^sub>\\<mu> ?\\<phi>;\n   ?Y \\<subseteq> subformulas\\<^sub>\\<nu> ?\\<phi>;\n   \\<forall>\\<psi>\\<in>?X.\n      w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[?Y]\\<^sub>\\<mu>);\n   \\<forall>\\<psi>\\<in>?Y.\n      w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[?X]\\<^sub>\\<nu>)\\<rbrakk>\n  \\<Longrightarrow> ?X \\<subseteq> \\<G>\\<F> ?\\<phi> w \\<and>\n                    ?Y \\<subseteq> \\<F>\\<G> ?\\<phi> w\n  insert \\<psi> S = X \\<union> Y\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  \\<forall>\\<psi>\\<in>X.\n     w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\n  \\<forall>\\<psi>\\<in>Y.\n     w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\n  \\<psi> \\<notin> X\n\ngoal (1 subgoal):\n 1. S \\<inter> X = X", "by fast"], ["proof (state)\nthis:\n  S \\<inter> X = X\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "then"], ["proof (chain)\npicking this:\n  S \\<inter> X = X", "have \"S = X \\<union> (Y - {\\<psi>})\""], ["proof (prove)\nusing this:\n  S \\<inter> X = X\n\ngoal (1 subgoal):\n 1. S = X \\<union> (Y - {\\<psi>})", "using insert_S \\<open>\\<psi> \\<notin> S\\<close>"], ["proof (prove)\nusing this:\n  S \\<inter> X = X\n  insert \\<psi> S = X \\<union> Y\n  \\<psi> \\<notin> S\n\ngoal (1 subgoal):\n 1. S = X \\<union> (Y - {\\<psi>})", "by fast"], ["proof (state)\nthis:\n  S = X \\<union> (Y - {\\<psi>})\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "moreover"], ["proof (state)\nthis:\n  S = X \\<union> (Y - {\\<psi>})\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "have \"\\<forall>\\<psi>' \\<in> X. \\<psi>'[Y - {\\<psi>}]\\<^sub>\\<mu> = \\<psi>'[Y]\\<^sub>\\<mu>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<psi>'\\<in>X.\n       \\<psi>'[Y - {\\<psi>}]\\<^sub>\\<mu> = \\<psi>'[Y]\\<^sub>\\<mu>", "using FG_advice_minus_size insert(1,2,4) \\<open>\\<psi> \\<notin> X\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>size ?\\<phi> \\<le> size ?\\<psi>;\n   ?\\<phi> \\<noteq> ?\\<psi>\\<rbrakk>\n  \\<Longrightarrow> ?\\<phi>[?Y - {?\\<psi>}]\\<^sub>\\<mu> =\n                    ?\\<phi>[?Y]\\<^sub>\\<mu>\n  finite S\n  ?y \\<in> S \\<Longrightarrow> size ?y \\<le> size \\<psi>\n  insert \\<psi> S = X \\<union> Y\n  \\<psi> \\<notin> X\n\ngoal (1 subgoal):\n 1. \\<forall>\\<psi>'\\<in>X.\n       \\<psi>'[Y - {\\<psi>}]\\<^sub>\\<mu> = \\<psi>'[Y]\\<^sub>\\<mu>", "by fast"], ["proof (state)\nthis:\n  \\<forall>\\<psi>'\\<in>X.\n     \\<psi>'[Y - {\\<psi>}]\\<^sub>\\<mu> = \\<psi>'[Y]\\<^sub>\\<mu>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "ultimately"], ["proof (chain)\npicking this:\n  S = X \\<union> (Y - {\\<psi>})\n  \\<forall>\\<psi>'\\<in>X.\n     \\<psi>'[Y - {\\<psi>}]\\<^sub>\\<mu> = \\<psi>'[Y]\\<^sub>\\<mu>", "have \"X \\<subseteq> \\<G>\\<F> \\<phi> w\" and \"Y - {\\<psi>} \\<subseteq> \\<F>\\<G> \\<phi> w\""], ["proof (prove)\nusing this:\n  S = X \\<union> (Y - {\\<psi>})\n  \\<forall>\\<psi>'\\<in>X.\n     \\<psi>'[Y - {\\<psi>}]\\<^sub>\\<mu> = \\<psi>'[Y]\\<^sub>\\<mu>\n\ngoal (1 subgoal):\n 1. X \\<subseteq> \\<G>\\<F> \\<phi> w &&&\n    Y - {\\<psi>} \\<subseteq> \\<F>\\<G> \\<phi> w", "using IH[of X \"Y - {\\<psi>}\" \\<phi>] X_\\<mu> Y_\\<nu> X_GF Y_FG"], ["proof (prove)\nusing this:\n  S = X \\<union> (Y - {\\<psi>})\n  \\<forall>\\<psi>'\\<in>X.\n     \\<psi>'[Y - {\\<psi>}]\\<^sub>\\<mu> = \\<psi>'[Y]\\<^sub>\\<mu>\n  \\<lbrakk>S = X \\<union> (Y - {\\<psi>});\n   X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n   Y - {\\<psi>} \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n   \\<forall>\\<psi>'\\<in>X.\n      w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>'[Y -\n                    {\\<psi>}]\\<^sub>\\<mu>);\n   \\<forall>\\<psi>\\<in>Y - {\\<psi>}.\n      w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n  \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                    Y - {\\<psi>} \\<subseteq> \\<F>\\<G> \\<phi> w\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  \\<forall>\\<psi>\\<in>X.\n     w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\n  \\<forall>\\<psi>\\<in>Y.\n     w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\n\ngoal (1 subgoal):\n 1. X \\<subseteq> \\<G>\\<F> \\<phi> w &&&\n    Y - {\\<psi>} \\<subseteq> \\<F>\\<G> \\<phi> w", "by auto"], ["proof (state)\nthis:\n  X \\<subseteq> \\<G>\\<F> \\<phi> w\n  Y - {\\<psi>} \\<subseteq> \\<F>\\<G> \\<phi> w\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "}"], ["proof (state)\nthis:\n  X \\<subseteq> \\<G>\\<F> \\<phi> w\n  Y - {\\<psi>} \\<subseteq> \\<F>\\<G> \\<phi> w\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "moreover"], ["proof (state)\nthis:\n  X \\<subseteq> \\<G>\\<F> \\<phi> w\n  Y - {\\<psi>} \\<subseteq> \\<F>\\<G> \\<phi> w\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "{\n        \\<comment> \\<open>Show @{term \"\\<psi> \\<in> \\<F>\\<G> \\<phi> w\"}\\<close>"], ["proof (state)\nthis:\n  X \\<subseteq> \\<G>\\<F> \\<phi> w\n  Y - {\\<psi>} \\<subseteq> \\<F>\\<G> \\<phi> w\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "have \"w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)", "using Y_FG \\<open>\\<psi> \\<in> Y\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>\\<psi>\\<in>Y.\n     w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\n  \\<psi> \\<in> Y\n\ngoal (1 subgoal):\n 1. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)", "by simp"], ["proof (state)\nthis:\n  w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "then"], ["proof (chain)\npicking this:\n  w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)", "have \"\\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>\""], ["proof (prove)\nusing this:\n  w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       suffix i w \\<Turnstile>\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>", "unfolding FG_Alm_all"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       suffix i w \\<Turnstile>\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>", "by simp"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "moreover"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "have \"\\<forall>\\<phi> \\<in> X. w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<phi>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<phi>\\<in>X.\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<phi>)", "using \\<open>X \\<subseteq> \\<G>\\<F> \\<phi> w\\<close>"], ["proof (prove)\nusing this:\n  X \\<subseteq> \\<G>\\<F> \\<phi> w\n\ngoal (1 subgoal):\n 1. \\<forall>\\<phi>\\<in>X.\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<phi>)", "by (blast dest: \\<G>\\<F>_elim)"], ["proof (state)\nthis:\n  \\<forall>\\<phi>\\<in>X. w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<phi>)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<phi>\\<in>X. w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<phi>)", "have \"\\<forall>\\<^sub>\\<infinity>i. \\<forall>\\<phi> \\<in> X. suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<phi>)\""], ["proof (prove)\nusing this:\n  \\<forall>\\<phi>\\<in>X. w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<phi>)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       \\<forall>\\<phi>\\<in>X.\n          suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<phi>)", "by simp"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<forall>\\<phi>\\<in>X.\n        suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<phi>)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<forall>\\<phi>\\<in>X.\n        suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<phi>)", "have \"\\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>[X]\\<^sub>\\<nu> \\<and> (\\<forall>\\<phi> \\<in> X. suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<phi>))\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<forall>\\<phi>\\<in>X.\n        suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<phi>)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       suffix i w \\<Turnstile>\\<^sub>n \\<psi>[X]\\<^sub>\\<nu> \\<and>\n       (\\<forall>\\<phi>\\<in>X.\n           suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<phi>))", "using MOST_conjI"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<forall>\\<phi>\\<in>X.\n        suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<phi>)\n  \\<lbrakk>\\<forall>\\<^sub>\\<infinity>x. ?P x;\n   \\<forall>\\<^sub>\\<infinity>x. ?Q x\\<rbrakk>\n  \\<Longrightarrow> \\<forall>\\<^sub>\\<infinity>x. ?P x \\<and> ?Q x\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       suffix i w \\<Turnstile>\\<^sub>n \\<psi>[X]\\<^sub>\\<nu> \\<and>\n       (\\<forall>\\<phi>\\<in>X.\n           suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<phi>))", "by auto"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[X]\\<^sub>\\<nu> \\<and>\n     (\\<forall>\\<phi>\\<in>X.\n         suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<phi>))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[X]\\<^sub>\\<nu> \\<and>\n     (\\<forall>\\<phi>\\<in>X.\n         suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<phi>))", "have \"\\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[X]\\<^sub>\\<nu> \\<and>\n     (\\<forall>\\<phi>\\<in>X.\n         suffix i w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<phi>))\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>", "by (elim MOST_mono) (metis GF_advice_a2_helper)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>", "have \"w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>)\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>\n\ngoal (1 subgoal):\n 1. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>)", "unfolding FG_Alm_all"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>", "by simp"], ["proof (state)\nthis:\n  w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "then"], ["proof (chain)\npicking this:\n  w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>)", "have \"\\<psi> \\<in> \\<F>\\<G> \\<phi> w\""], ["proof (prove)\nusing this:\n  w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>)\n\ngoal (1 subgoal):\n 1. \\<psi> \\<in> \\<F>\\<G> \\<phi> w", "unfolding \\<F>\\<G>_semantics"], ["proof (prove)\nusing this:\n  w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>)\n\ngoal (1 subgoal):\n 1. \\<psi>\n    \\<in> {\\<psi> \\<in> subformulas\\<^sub>\\<nu> \\<phi>.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>)}", "using \\<open>\\<psi> \\<in> Y\\<close> Y_\\<nu>"], ["proof (prove)\nusing this:\n  w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>)\n  \\<psi> \\<in> Y\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n\ngoal (1 subgoal):\n 1. \\<psi>\n    \\<in> {\\<psi> \\<in> subformulas\\<^sub>\\<nu> \\<phi>.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>)}", "by auto"], ["proof (state)\nthis:\n  \\<psi> \\<in> \\<F>\\<G> \\<phi> w\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "}"], ["proof (state)\nthis:\n  \\<psi> \\<in> \\<F>\\<G> \\<phi> w\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<psi> \\<notin> S; \\<psi> \\<notin> X\\<rbrakk>\n    \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                      Y \\<subseteq> \\<F>\\<G> \\<phi> w\n 2. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "ultimately"], ["proof (chain)\npicking this:\n  X \\<subseteq> \\<G>\\<F> \\<phi> w\n  Y - {\\<psi>} \\<subseteq> \\<F>\\<G> \\<phi> w\n  \\<psi> \\<in> \\<F>\\<G> \\<phi> w", "show ?thesis"], ["proof (prove)\nusing this:\n  X \\<subseteq> \\<G>\\<F> \\<phi> w\n  Y - {\\<psi>} \\<subseteq> \\<F>\\<G> \\<phi> w\n  \\<psi> \\<in> \\<F>\\<G> \\<phi> w\n\ngoal (1 subgoal):\n 1. X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "by auto"], ["proof (state)\nthis:\n  X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w\n\ngoal (1 subgoal):\n 1. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "assume \"\\<not> \\<psi> \\<notin> S\""], ["proof (state)\nthis:\n  \\<not> \\<psi> \\<notin> S\n\ngoal (1 subgoal):\n 1. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "then"], ["proof (chain)\npicking this:\n  \\<not> \\<psi> \\<notin> S", "have \"S = X \\<union> Y\""], ["proof (prove)\nusing this:\n  \\<not> \\<psi> \\<notin> S\n\ngoal (1 subgoal):\n 1. S = X \\<union> Y", "using insert"], ["proof (prove)\nusing this:\n  \\<not> \\<psi> \\<notin> S\n  finite S\n  ?y \\<in> S \\<Longrightarrow> size ?y \\<le> size \\<psi>\n  \\<lbrakk>S = ?X \\<union> ?Y;\n   ?X \\<subseteq> subformulas\\<^sub>\\<mu> ?\\<phi>;\n   ?Y \\<subseteq> subformulas\\<^sub>\\<nu> ?\\<phi>;\n   \\<forall>\\<psi>\\<in>?X.\n      w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[?Y]\\<^sub>\\<mu>);\n   \\<forall>\\<psi>\\<in>?Y.\n      w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[?X]\\<^sub>\\<nu>)\\<rbrakk>\n  \\<Longrightarrow> ?X \\<subseteq> \\<G>\\<F> ?\\<phi> w \\<and>\n                    ?Y \\<subseteq> \\<F>\\<G> ?\\<phi> w\n  insert \\<psi> S = X \\<union> Y\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  \\<forall>\\<psi>\\<in>X.\n     w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\n  \\<forall>\\<psi>\\<in>Y.\n     w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\n\ngoal (1 subgoal):\n 1. S = X \\<union> Y", "by fast"], ["proof (state)\nthis:\n  S = X \\<union> Y\n\ngoal (1 subgoal):\n 1. \\<not> \\<psi> \\<notin> S \\<Longrightarrow>\n    X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "then"], ["proof (chain)\npicking this:\n  S = X \\<union> Y", "show ?thesis"], ["proof (prove)\nusing this:\n  S = X \\<union> Y\n\ngoal (1 subgoal):\n 1. X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "using insert"], ["proof (prove)\nusing this:\n  S = X \\<union> Y\n  finite S\n  ?y \\<in> S \\<Longrightarrow> size ?y \\<le> size \\<psi>\n  \\<lbrakk>S = ?X \\<union> ?Y;\n   ?X \\<subseteq> subformulas\\<^sub>\\<mu> ?\\<phi>;\n   ?Y \\<subseteq> subformulas\\<^sub>\\<nu> ?\\<phi>;\n   \\<forall>\\<psi>\\<in>?X.\n      w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[?Y]\\<^sub>\\<mu>);\n   \\<forall>\\<psi>\\<in>?Y.\n      w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[?X]\\<^sub>\\<nu>)\\<rbrakk>\n  \\<Longrightarrow> ?X \\<subseteq> \\<G>\\<F> ?\\<phi> w \\<and>\n                    ?Y \\<subseteq> \\<F>\\<G> ?\\<phi> w\n  insert \\<psi> S = X \\<union> Y\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  \\<forall>\\<psi>\\<in>X.\n     w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\n  \\<forall>\\<psi>\\<in>Y.\n     w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\n\ngoal (1 subgoal):\n 1. X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w", "by auto"], ["proof (state)\nthis:\n  X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w\n\ngoal (1 subgoal):\n 1. \\<And>X Y \\<phi>.\n       \\<lbrakk>{} = X \\<union> Y;\n        X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n        \\<forall>\\<psi>\\<in>X.\n           w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n        \\<forall>\\<psi>\\<in>Y.\n           w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n       \\<Longrightarrow> X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n                         Y \\<subseteq> \\<F>\\<G> \\<phi> w", "qed fast"], ["proof (state)\nthis:\n  X \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> Y \\<subseteq> \\<F>\\<G> \\<phi> w\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma \\<G>\\<F>_implies_GF:\n  \"\\<forall>\\<psi> \\<in> \\<G>\\<F> \\<phi> w. w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi> w]\\<^sub>\\<mu>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<psi>\\<in>\\<G>\\<F> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi>\n                     w]\\<^sub>\\<mu>)", "proof safe"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<G>\\<F> \\<phi> w \\<Longrightarrow>\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi>\n                     w]\\<^sub>\\<mu>)", "fix \\<psi>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<G>\\<F> \\<phi> w \\<Longrightarrow>\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi>\n                     w]\\<^sub>\\<mu>)", "assume \"\\<psi> \\<in> \\<G>\\<F> \\<phi> w\""], ["proof (state)\nthis:\n  \\<psi> \\<in> \\<G>\\<F> \\<phi> w\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<G>\\<F> \\<phi> w \\<Longrightarrow>\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi>\n                     w]\\<^sub>\\<mu>)", "then"], ["proof (chain)\npicking this:\n  \\<psi> \\<in> \\<G>\\<F> \\<phi> w", "have \"\\<exists>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>\""], ["proof (prove)\nusing this:\n  \\<psi> \\<in> \\<G>\\<F> \\<phi> w\n\ngoal (1 subgoal):\n 1. \\<exists>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>", "using \\<G>\\<F>_elim GF_Inf_many"], ["proof (prove)\nusing this:\n  \\<psi> \\<in> \\<G>\\<F> \\<phi> w\n  ?\\<psi> \\<in> \\<G>\\<F> ?\\<phi> ?w \\<Longrightarrow>\n  ?w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n ?\\<psi>)\n  ?w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n ?\\<phi>) =\n  (\\<exists>\\<^sub>\\<infinity>i. suffix i ?w \\<Turnstile>\\<^sub>n ?\\<phi>)\n\ngoal (1 subgoal):\n 1. \\<exists>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>", "by blast"], ["proof (state)\nthis:\n  \\<exists>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<G>\\<F> \\<phi> w \\<Longrightarrow>\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi>\n                     w]\\<^sub>\\<mu>)", "moreover"], ["proof (state)\nthis:\n  \\<exists>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<G>\\<F> \\<phi> w \\<Longrightarrow>\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi>\n                     w]\\<^sub>\\<mu>)", "have \"\\<psi> \\<in> subfrmlsn \\<phi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<psi> \\<in> subfrmlsn \\<phi>", "using \\<open>\\<psi> \\<in> \\<G>\\<F> \\<phi> w\\<close> \\<G>\\<F>_subfrmlsn"], ["proof (prove)\nusing this:\n  \\<psi> \\<in> \\<G>\\<F> \\<phi> w\n  \\<G>\\<F> ?\\<phi> ?w \\<subseteq> subfrmlsn ?\\<phi>\n\ngoal (1 subgoal):\n 1. \\<psi> \\<in> subfrmlsn \\<phi>", "by blast"], ["proof (state)\nthis:\n  \\<psi> \\<in> subfrmlsn \\<phi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<G>\\<F> \\<phi> w \\<Longrightarrow>\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi>\n                     w]\\<^sub>\\<mu>)", "then"], ["proof (chain)\npicking this:\n  \\<psi> \\<in> subfrmlsn \\<phi>", "have \"\\<And>i w. \\<F>\\<G> \\<psi> (suffix i w) \\<subseteq> \\<F>\\<G> \\<phi> w\""], ["proof (prove)\nusing this:\n  \\<psi> \\<in> subfrmlsn \\<phi>\n\ngoal (1 subgoal):\n 1. \\<And>i w. \\<F>\\<G> \\<psi> (suffix i w) \\<subseteq> \\<F>\\<G> \\<phi> w", "using \\<F>\\<G>_suffix \\<F>\\<G>_subset"], ["proof (prove)\nusing this:\n  \\<psi> \\<in> subfrmlsn \\<phi>\n  \\<F>\\<G> ?\\<phi> (suffix ?i ?w) = \\<F>\\<G> ?\\<phi> ?w\n  ?\\<psi> \\<in> subfrmlsn ?\\<phi> \\<Longrightarrow>\n  \\<F>\\<G> ?\\<psi> ?w \\<subseteq> \\<F>\\<G> ?\\<phi> ?w\n\ngoal (1 subgoal):\n 1. \\<And>i w. \\<F>\\<G> \\<psi> (suffix i w) \\<subseteq> \\<F>\\<G> \\<phi> w", "by blast"], ["proof (state)\nthis:\n  \\<F>\\<G> \\<psi> (suffix ?i ?w) \\<subseteq> \\<F>\\<G> \\<phi> ?w\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<G>\\<F> \\<phi> w \\<Longrightarrow>\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi>\n                     w]\\<^sub>\\<mu>)", "ultimately"], ["proof (chain)\npicking this:\n  \\<exists>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>\n  \\<F>\\<G> \\<psi> (suffix ?i ?w) \\<subseteq> \\<F>\\<G> \\<phi> ?w", "have \"\\<exists>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi> w]\\<^sub>\\<mu>\""], ["proof (prove)\nusing this:\n  \\<exists>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>\n  \\<F>\\<G> \\<psi> (suffix ?i ?w) \\<subseteq> \\<F>\\<G> \\<phi> ?w\n\ngoal (1 subgoal):\n 1. \\<exists>\\<^sub>\\<infinity>i.\n       suffix i w \\<Turnstile>\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi> w]\\<^sub>\\<mu>", "by (elim frequently_elim1) (metis FG_advice_b1)"], ["proof (state)\nthis:\n  \\<exists>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi> w]\\<^sub>\\<mu>\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<G>\\<F> \\<phi> w \\<Longrightarrow>\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi>\n                     w]\\<^sub>\\<mu>)", "then"], ["proof (chain)\npicking this:\n  \\<exists>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi> w]\\<^sub>\\<mu>", "show \"w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi> w]\\<^sub>\\<mu>)\""], ["proof (prove)\nusing this:\n  \\<exists>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi> w]\\<^sub>\\<mu>\n\ngoal (1 subgoal):\n 1. w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi>\n                  w]\\<^sub>\\<mu>)", "unfolding GF_Inf_many"], ["proof (prove)\nusing this:\n  \\<exists>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi> w]\\<^sub>\\<mu>\n\ngoal (1 subgoal):\n 1. \\<exists>\\<^sub>\\<infinity>i.\n       suffix i w \\<Turnstile>\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi> w]\\<^sub>\\<mu>", "by simp"], ["proof (state)\nthis:\n  w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi>\n                w]\\<^sub>\\<mu>)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma \\<F>\\<G>_implies_FG:\n  \"\\<forall>\\<psi> \\<in> \\<F>\\<G> \\<phi> w. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<psi>\\<in>\\<F>\\<G> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "proof safe"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<F>\\<G> \\<phi> w \\<Longrightarrow>\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "fix \\<psi>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<F>\\<G> \\<phi> w \\<Longrightarrow>\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "assume \"\\<psi> \\<in> \\<F>\\<G> \\<phi> w\""], ["proof (state)\nthis:\n  \\<psi> \\<in> \\<F>\\<G> \\<phi> w\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<F>\\<G> \\<phi> w \\<Longrightarrow>\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "then"], ["proof (chain)\npicking this:\n  \\<psi> \\<in> \\<F>\\<G> \\<phi> w", "have \"\\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>\""], ["proof (prove)\nusing this:\n  \\<psi> \\<in> \\<F>\\<G> \\<phi> w\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>", "using \\<F>\\<G>_elim FG_Alm_all"], ["proof (prove)\nusing this:\n  \\<psi> \\<in> \\<F>\\<G> \\<phi> w\n  ?\\<psi> \\<in> \\<F>\\<G> ?\\<phi> ?w \\<Longrightarrow>\n  ?w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n ?\\<psi>)\n  ?w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n ?\\<phi>) =\n  (\\<forall>\\<^sub>\\<infinity>i. suffix i ?w \\<Turnstile>\\<^sub>n ?\\<phi>)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>", "by blast"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<F>\\<G> \\<phi> w \\<Longrightarrow>\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "moreover"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<F>\\<G> \\<phi> w \\<Longrightarrow>\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "{"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<F>\\<G> \\<phi> w \\<Longrightarrow>\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "have \"\\<psi> \\<in> subfrmlsn \\<phi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<psi> \\<in> subfrmlsn \\<phi>", "using \\<open>\\<psi> \\<in> \\<F>\\<G> \\<phi> w\\<close> \\<F>\\<G>_subfrmlsn"], ["proof (prove)\nusing this:\n  \\<psi> \\<in> \\<F>\\<G> \\<phi> w\n  \\<F>\\<G> ?\\<phi> ?w \\<subseteq> subfrmlsn ?\\<phi>\n\ngoal (1 subgoal):\n 1. \\<psi> \\<in> subfrmlsn \\<phi>", "by blast"], ["proof (state)\nthis:\n  \\<psi> \\<in> subfrmlsn \\<phi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<F>\\<G> \\<phi> w \\<Longrightarrow>\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "moreover"], ["proof (state)\nthis:\n  \\<psi> \\<in> subfrmlsn \\<phi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<F>\\<G> \\<phi> w \\<Longrightarrow>\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "have \"\\<forall>\\<^sub>\\<infinity>i. \\<G>\\<F> \\<psi> (suffix i w) = \\<F> \\<psi> (suffix i w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       \\<G>\\<F> \\<psi> (suffix i w) = \\<F> \\<psi> (suffix i w)", "using suffix_\\<mu>_stable"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>i. \\<mu>_stable ?\\<phi> (suffix i ?w)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       \\<G>\\<F> \\<psi> (suffix i w) = \\<F> \\<psi> (suffix i w)", "unfolding \\<mu>_stable_def"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<G>\\<F> ?\\<phi> (suffix i ?w) = \\<F> ?\\<phi> (suffix i ?w)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       \\<G>\\<F> \\<psi> (suffix i w) = \\<F> \\<psi> (suffix i w)", "by blast"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<G>\\<F> \\<psi> (suffix i w) = \\<F> \\<psi> (suffix i w)\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<F>\\<G> \\<phi> w \\<Longrightarrow>\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "ultimately"], ["proof (chain)\npicking this:\n  \\<psi> \\<in> subfrmlsn \\<phi>\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<G>\\<F> \\<psi> (suffix i w) = \\<F> \\<psi> (suffix i w)", "have \"\\<forall>\\<^sub>\\<infinity>i. \\<F> \\<psi> (suffix i w) \\<subseteq> \\<G>\\<F> \\<phi> w\""], ["proof (prove)\nusing this:\n  \\<psi> \\<in> subfrmlsn \\<phi>\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<G>\\<F> \\<psi> (suffix i w) = \\<F> \\<psi> (suffix i w)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       \\<F> \\<psi> (suffix i w) \\<subseteq> \\<G>\\<F> \\<phi> w", "unfolding MOST_nat_le"], ["proof (prove)\nusing this:\n  \\<psi> \\<in> subfrmlsn \\<phi>\n  \\<exists>m.\n     \\<forall>n\\<ge>m.\n        \\<G>\\<F> \\<psi> (suffix n w) = \\<F> \\<psi> (suffix n w)\n\ngoal (1 subgoal):\n 1. \\<exists>m.\n       \\<forall>n\\<ge>m.\n          \\<F> \\<psi> (suffix n w) \\<subseteq> \\<G>\\<F> \\<phi> w", "by (metis \\<G>\\<F>_subset \\<G>\\<F>_suffix)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<F> \\<psi> (suffix i w) \\<subseteq> \\<G>\\<F> \\<phi> w\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<F>\\<G> \\<phi> w \\<Longrightarrow>\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "}"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<F> \\<psi> (suffix i w) \\<subseteq> \\<G>\\<F> \\<phi> w\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<F>\\<G> \\<phi> w \\<Longrightarrow>\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<F> \\<psi> (suffix i w) \\<subseteq> \\<G>\\<F> \\<phi> w", "have \"\\<forall>\\<^sub>\\<infinity>i. \\<F> \\<psi> (suffix i w) \\<subseteq> \\<G>\\<F> \\<phi> w \\<and> suffix i w \\<Turnstile>\\<^sub>n \\<psi>\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<F> \\<psi> (suffix i w) \\<subseteq> \\<G>\\<F> \\<phi> w\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       \\<F> \\<psi> (suffix i w) \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n       suffix i w \\<Turnstile>\\<^sub>n \\<psi>", "using eventually_conj"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<F> \\<psi> (suffix i w) \\<subseteq> \\<G>\\<F> \\<phi> w\n  \\<lbrakk>eventually ?P ?F; eventually ?Q ?F\\<rbrakk>\n  \\<Longrightarrow> \\<forall>\\<^sub>F x in ?F. ?P x \\<and> ?Q x\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       \\<F> \\<psi> (suffix i w) \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n       suffix i w \\<Turnstile>\\<^sub>n \\<psi>", "by auto"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<F> \\<psi> (suffix i w) \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<F>\\<G> \\<phi> w \\<Longrightarrow>\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<F> \\<psi> (suffix i w) \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>", "have \"\\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile>\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<F> \\<psi> (suffix i w) \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       suffix i w \\<Turnstile>\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>", "using GF_advice_a1"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<F> \\<psi> (suffix i w) \\<subseteq> \\<G>\\<F> \\<phi> w \\<and>\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>\n  \\<lbrakk>\\<F> ?\\<phi> ?w \\<subseteq> ?X;\n   ?w \\<Turnstile>\\<^sub>n ?\\<phi>\\<rbrakk>\n  \\<Longrightarrow> ?w \\<Turnstile>\\<^sub>n ?\\<phi>[?X]\\<^sub>\\<nu>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       suffix i w \\<Turnstile>\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>", "by (elim eventually_mono) auto"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<F>\\<G> \\<phi> w \\<Longrightarrow>\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>", "show \"w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>)\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>\n\ngoal (1 subgoal):\n 1. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                  w]\\<^sub>\\<nu>)", "unfolding FG_Alm_all"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>i.\n     suffix i w \\<Turnstile>\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       suffix i w \\<Turnstile>\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>", "by simp"], ["proof (state)\nthis:\n  w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                w]\\<^sub>\\<nu>)\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Putting the pieces together: The Master Theorem\\<close>"], ["", "theorem master_theorem_ltr:\n  assumes\n    \"w \\<Turnstile>\\<^sub>n \\<phi>\"\n  obtains X and Y where\n    \"X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\"\n  and\n    \"Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\"\n  and\n    \"\\<exists>i. suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>\"\n  and\n    \"\\<forall>\\<psi> \\<in> X. w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\"\n  and\n    \"\\<forall>\\<psi> \\<in> Y. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof"], ["proof (state)\ngoal (5 subgoals):\n 1. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    ?X2 \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n 2. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    ?Y2 \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n 3. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<exists>i.\n       suffix i\n        w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[?X2]\\<^sub>\\<nu>\n 4. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>?X2.\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[?Y2]\\<^sub>\\<mu>)\n 5. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>?Y2.\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[?X2]\\<^sub>\\<nu>)", "show \"\\<G>\\<F> \\<phi> w \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<G>\\<F> \\<phi> w \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>", "by (rule \\<G>\\<F>_subformulas\\<^sub>\\<mu>)"], ["proof (state)\nthis:\n  \\<G>\\<F> \\<phi> w \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n\ngoal (4 subgoals):\n 1. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    ?Y2 \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n 2. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<exists>i.\n       suffix i\n        w \\<Turnstile>\\<^sub>n af \\<phi>\n                                (prefix i w)[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>\n 3. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>\\<G>\\<F> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[?Y2]\\<^sub>\\<mu>)\n 4. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>?Y2.\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    ?Y2 \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n 2. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<exists>i.\n       suffix i\n        w \\<Turnstile>\\<^sub>n af \\<phi>\n                                (prefix i w)[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>\n 3. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>\\<G>\\<F> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[?Y2]\\<^sub>\\<mu>)\n 4. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>?Y2.\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "show \"\\<F>\\<G> \\<phi> w \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<F>\\<G> \\<phi> w \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>", "by (rule \\<F>\\<G>_subformulas\\<^sub>\\<nu>)"], ["proof (state)\nthis:\n  \\<F>\\<G> \\<phi> w \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n\ngoal (3 subgoals):\n 1. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<exists>i.\n       suffix i\n        w \\<Turnstile>\\<^sub>n af \\<phi>\n                                (prefix i w)[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>\n 2. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>\\<G>\\<F> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi>\n                     w]\\<^sub>\\<mu>)\n 3. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>\\<F>\\<G> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<exists>i.\n       suffix i\n        w \\<Turnstile>\\<^sub>n af \\<phi>\n                                (prefix i w)[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>\n 2. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>\\<G>\\<F> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi>\n                     w]\\<^sub>\\<mu>)\n 3. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>\\<F>\\<G> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "obtain i where \"\\<G>\\<F> \\<phi> (suffix i w) = \\<F> \\<phi> (suffix i w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<G>\\<F> \\<phi> (suffix i w) =\n        \\<F> \\<phi> (suffix i w) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using suffix_\\<mu>_stable"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>i. \\<mu>_stable ?\\<phi> (suffix i ?w)\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<G>\\<F> \\<phi> (suffix i w) =\n        \\<F> \\<phi> (suffix i w) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding MOST_nat \\<mu>_stable_def"], ["proof (prove)\nusing this:\n  \\<exists>m.\n     \\<forall>n>m.\n        \\<G>\\<F> ?\\<phi> (suffix n ?w) = \\<F> ?\\<phi> (suffix n ?w)\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<G>\\<F> \\<phi> (suffix i w) =\n        \\<F> \\<phi> (suffix i w) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by fast"], ["proof (state)\nthis:\n  \\<G>\\<F> \\<phi> (suffix i w) = \\<F> \\<phi> (suffix i w)\n\ngoal (3 subgoals):\n 1. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<exists>i.\n       suffix i\n        w \\<Turnstile>\\<^sub>n af \\<phi>\n                                (prefix i w)[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>\n 2. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>\\<G>\\<F> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi>\n                     w]\\<^sub>\\<mu>)\n 3. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>\\<F>\\<G> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "then"], ["proof (chain)\npicking this:\n  \\<G>\\<F> \\<phi> (suffix i w) = \\<F> \\<phi> (suffix i w)", "have \"\\<F> (af \\<phi> (prefix i w)) (suffix i w) \\<subseteq> \\<G>\\<F> \\<phi> w\""], ["proof (prove)\nusing this:\n  \\<G>\\<F> \\<phi> (suffix i w) = \\<F> \\<phi> (suffix i w)\n\ngoal (1 subgoal):\n 1. \\<F> (af \\<phi> (prefix i w)) (suffix i w) \\<subseteq> \\<G>\\<F> \\<phi> w", "using \\<G>\\<F>_af \\<F>_af \\<G>\\<F>_suffix"], ["proof (prove)\nusing this:\n  \\<G>\\<F> \\<phi> (suffix i w) = \\<F> \\<phi> (suffix i w)\n  \\<G>\\<F> (af ?\\<phi> (prefix ?i ?w)) (suffix ?i ?w) =\n  \\<G>\\<F> ?\\<phi> (suffix ?i ?w)\n  \\<F> (af ?\\<phi> (prefix ?i ?w)) (suffix ?i ?w) =\n  \\<F> ?\\<phi> (suffix ?i ?w)\n  \\<G>\\<F> ?\\<phi> (suffix ?i ?w) = \\<G>\\<F> ?\\<phi> ?w\n\ngoal (1 subgoal):\n 1. \\<F> (af \\<phi> (prefix i w)) (suffix i w) \\<subseteq> \\<G>\\<F> \\<phi> w", "by fast"], ["proof (state)\nthis:\n  \\<F> (af \\<phi> (prefix i w)) (suffix i w) \\<subseteq> \\<G>\\<F> \\<phi> w\n\ngoal (3 subgoals):\n 1. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<exists>i.\n       suffix i\n        w \\<Turnstile>\\<^sub>n af \\<phi>\n                                (prefix i w)[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>\n 2. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>\\<G>\\<F> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi>\n                     w]\\<^sub>\\<mu>)\n 3. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>\\<F>\\<G> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "moreover"], ["proof (state)\nthis:\n  \\<F> (af \\<phi> (prefix i w)) (suffix i w) \\<subseteq> \\<G>\\<F> \\<phi> w\n\ngoal (3 subgoals):\n 1. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<exists>i.\n       suffix i\n        w \\<Turnstile>\\<^sub>n af \\<phi>\n                                (prefix i w)[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>\n 2. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>\\<G>\\<F> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi>\n                     w]\\<^sub>\\<mu>)\n 3. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>\\<F>\\<G> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "have \"suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)", "using af_ltl_continuation \\<open>w \\<Turnstile>\\<^sub>n \\<phi>\\<close>"], ["proof (prove)\nusing this:\n  (?w \\<frown> ?w') \\<Turnstile>\\<^sub>n ?\\<phi> =\n  ?w' \\<Turnstile>\\<^sub>n af ?\\<phi> ?w\n  w \\<Turnstile>\\<^sub>n \\<phi>\n\ngoal (1 subgoal):\n 1. suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)", "by fastforce"], ["proof (state)\nthis:\n  suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)\n\ngoal (3 subgoals):\n 1. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<exists>i.\n       suffix i\n        w \\<Turnstile>\\<^sub>n af \\<phi>\n                                (prefix i w)[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>\n 2. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>\\<G>\\<F> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi>\n                     w]\\<^sub>\\<mu>)\n 3. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>\\<F>\\<G> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "ultimately"], ["proof (chain)\npicking this:\n  \\<F> (af \\<phi> (prefix i w)) (suffix i w) \\<subseteq> \\<G>\\<F> \\<phi> w\n  suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)", "show \"\\<exists>i. suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>\""], ["proof (prove)\nusing this:\n  \\<F> (af \\<phi> (prefix i w)) (suffix i w) \\<subseteq> \\<G>\\<F> \\<phi> w\n  suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)\n\ngoal (1 subgoal):\n 1. \\<exists>i.\n       suffix i\n        w \\<Turnstile>\\<^sub>n af \\<phi>\n                                (prefix i w)[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>", "using GF_advice_a1"], ["proof (prove)\nusing this:\n  \\<F> (af \\<phi> (prefix i w)) (suffix i w) \\<subseteq> \\<G>\\<F> \\<phi> w\n  suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)\n  \\<lbrakk>\\<F> ?\\<phi> ?w \\<subseteq> ?X;\n   ?w \\<Turnstile>\\<^sub>n ?\\<phi>\\<rbrakk>\n  \\<Longrightarrow> ?w \\<Turnstile>\\<^sub>n ?\\<phi>[?X]\\<^sub>\\<nu>\n\ngoal (1 subgoal):\n 1. \\<exists>i.\n       suffix i\n        w \\<Turnstile>\\<^sub>n af \\<phi>\n                                (prefix i w)[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>", "by blast"], ["proof (state)\nthis:\n  \\<exists>i.\n     suffix i\n      w \\<Turnstile>\\<^sub>n af \\<phi>\n                              (prefix i w)[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>\n\ngoal (2 subgoals):\n 1. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>\\<G>\\<F> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi>\n                     w]\\<^sub>\\<mu>)\n 2. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>\\<F>\\<G> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>\\<G>\\<F> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi>\n                     w]\\<^sub>\\<mu>)\n 2. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>\\<F>\\<G> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "show \"\\<forall>\\<psi> \\<in> \\<G>\\<F> \\<phi> w. w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi> w]\\<^sub>\\<mu>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<psi>\\<in>\\<G>\\<F> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi>\n                     w]\\<^sub>\\<mu>)", "by (rule \\<G>\\<F>_implies_GF)"], ["proof (state)\nthis:\n  \\<forall>\\<psi>\\<in>\\<G>\\<F> \\<phi> w.\n     w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[\\<F>\\<G> \\<phi>\n                   w]\\<^sub>\\<mu>)\n\ngoal (1 subgoal):\n 1. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>\\<F>\\<G> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>\\<psi>\\<in>\\<F>\\<G> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "show \"\\<forall>\\<psi> \\<in> \\<F>\\<G> \\<phi> w. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi> w]\\<^sub>\\<nu>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<psi>\\<in>\\<F>\\<G> \\<phi> w.\n       w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                     w]\\<^sub>\\<nu>)", "by (rule \\<F>\\<G>_implies_FG)"], ["proof (state)\nthis:\n  \\<forall>\\<psi>\\<in>\\<F>\\<G> \\<phi> w.\n     w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[\\<G>\\<F> \\<phi>\n                   w]\\<^sub>\\<nu>)\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem master_theorem_rtl:\n  assumes\n    \"X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\"\n  and\n    \"Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\"\n  and\n    1: \"\\<exists>i. suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>\"\n  and\n    2: \"\\<forall>\\<psi> \\<in> X. w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\"\n  and\n    3: \"\\<forall>\\<psi> \\<in> Y. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\"\n  shows\n    \"w \\<Turnstile>\\<^sub>n \\<phi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w \\<Turnstile>\\<^sub>n \\<phi>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. w \\<Turnstile>\\<^sub>n \\<phi>", "from 1"], ["proof (chain)\npicking this:\n  \\<exists>i.\n     suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>", "obtain i where \"suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>\""], ["proof (prove)\nusing this:\n  \\<exists>i.\n     suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        suffix i\n         w \\<Turnstile>\\<^sub>n af \\<phi>\n                                 (prefix i\n                                   w)[X]\\<^sub>\\<nu> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>\n\ngoal (1 subgoal):\n 1. w \\<Turnstile>\\<^sub>n \\<phi>", "moreover"], ["proof (state)\nthis:\n  suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>\n\ngoal (1 subgoal):\n 1. w \\<Turnstile>\\<^sub>n \\<phi>", "from assms"], ["proof (chain)\npicking this:\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  \\<exists>i.\n     suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>\n  \\<forall>\\<psi>\\<in>X.\n     w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\n  \\<forall>\\<psi>\\<in>Y.\n     w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)", "have \"X \\<subseteq> \\<G>\\<F> \\<phi> w\""], ["proof (prove)\nusing this:\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  \\<exists>i.\n     suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>\n  \\<forall>\\<psi>\\<in>X.\n     w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\n  \\<forall>\\<psi>\\<in>Y.\n     w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\n\ngoal (1 subgoal):\n 1. X \\<subseteq> \\<G>\\<F> \\<phi> w", "using X_\\<G>\\<F>_Y_\\<F>\\<G>"], ["proof (prove)\nusing this:\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  \\<exists>i.\n     suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>\n  \\<forall>\\<psi>\\<in>X.\n     w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\n  \\<forall>\\<psi>\\<in>Y.\n     w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\n  \\<lbrakk>?X \\<subseteq> subformulas\\<^sub>\\<mu> ?\\<phi>;\n   ?Y \\<subseteq> subformulas\\<^sub>\\<nu> ?\\<phi>;\n   \\<forall>\\<psi>\\<in>?X.\n      ?w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[?Y]\\<^sub>\\<mu>);\n   \\<forall>\\<psi>\\<in>?Y.\n      ?w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[?X]\\<^sub>\\<nu>)\\<rbrakk>\n  \\<Longrightarrow> ?X \\<subseteq> \\<G>\\<F> ?\\<phi> ?w \\<and>\n                    ?Y \\<subseteq> \\<F>\\<G> ?\\<phi> ?w\n\ngoal (1 subgoal):\n 1. X \\<subseteq> \\<G>\\<F> \\<phi> w", "by blast"], ["proof (state)\nthis:\n  X \\<subseteq> \\<G>\\<F> \\<phi> w\n\ngoal (1 subgoal):\n 1. w \\<Turnstile>\\<^sub>n \\<phi>", "then"], ["proof (chain)\npicking this:\n  X \\<subseteq> \\<G>\\<F> \\<phi> w", "have \"X \\<subseteq> \\<G>\\<F> \\<phi> (suffix i w)\""], ["proof (prove)\nusing this:\n  X \\<subseteq> \\<G>\\<F> \\<phi> w\n\ngoal (1 subgoal):\n 1. X \\<subseteq> \\<G>\\<F> \\<phi> (suffix i w)", "using \\<G>\\<F>_suffix"], ["proof (prove)\nusing this:\n  X \\<subseteq> \\<G>\\<F> \\<phi> w\n  \\<G>\\<F> ?\\<phi> (suffix ?i ?w) = \\<G>\\<F> ?\\<phi> ?w\n\ngoal (1 subgoal):\n 1. X \\<subseteq> \\<G>\\<F> \\<phi> (suffix i w)", "by fast"], ["proof (state)\nthis:\n  X \\<subseteq> \\<G>\\<F> \\<phi> (suffix i w)\n\ngoal (1 subgoal):\n 1. w \\<Turnstile>\\<^sub>n \\<phi>", "ultimately"], ["proof (chain)\npicking this:\n  suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>\n  X \\<subseteq> \\<G>\\<F> \\<phi> (suffix i w)", "have \"suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)\""], ["proof (prove)\nusing this:\n  suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>\n  X \\<subseteq> \\<G>\\<F> \\<phi> (suffix i w)\n\ngoal (1 subgoal):\n 1. suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)", "using GF_advice_a2 \\<G>\\<F>_af"], ["proof (prove)\nusing this:\n  suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>\n  X \\<subseteq> \\<G>\\<F> \\<phi> (suffix i w)\n  \\<lbrakk>?X \\<subseteq> \\<G>\\<F> ?\\<phi> ?w;\n   ?w \\<Turnstile>\\<^sub>n ?\\<phi>[?X]\\<^sub>\\<nu>\\<rbrakk>\n  \\<Longrightarrow> ?w \\<Turnstile>\\<^sub>n ?\\<phi>\n  \\<G>\\<F> (af ?\\<phi> (prefix ?i ?w)) (suffix ?i ?w) =\n  \\<G>\\<F> ?\\<phi> (suffix ?i ?w)\n\ngoal (1 subgoal):\n 1. suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)", "by metis"], ["proof (state)\nthis:\n  suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)\n\ngoal (1 subgoal):\n 1. w \\<Turnstile>\\<^sub>n \\<phi>", "then"], ["proof (chain)\npicking this:\n  suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)", "show \"w \\<Turnstile>\\<^sub>n \\<phi>\""], ["proof (prove)\nusing this:\n  suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)\n\ngoal (1 subgoal):\n 1. w \\<Turnstile>\\<^sub>n \\<phi>", "using af_ltl_continuation"], ["proof (prove)\nusing this:\n  suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)\n  (?w \\<frown> ?w') \\<Turnstile>\\<^sub>n ?\\<phi> =\n  ?w' \\<Turnstile>\\<^sub>n af ?\\<phi> ?w\n\ngoal (1 subgoal):\n 1. w \\<Turnstile>\\<^sub>n \\<phi>", "by force"], ["proof (state)\nthis:\n  w \\<Turnstile>\\<^sub>n \\<phi>\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem master_theorem:\n  \"w \\<Turnstile>\\<^sub>n \\<phi> \\<longleftrightarrow>\n    (\\<exists>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>.\n      (\\<exists>Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>.\n        (\\<exists>i. suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>)\n        \\<and> (\\<forall>\\<psi> \\<in> X. w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>))\n        \\<and> (\\<forall>\\<psi> \\<in> Y. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>))))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w \\<Turnstile>\\<^sub>n \\<phi> =\n    (\\<exists>X\\<subseteq>subformulas\\<^sub>\\<mu> \\<phi>.\n        \\<exists>Y\\<subseteq>subformulas\\<^sub>\\<nu> \\<phi>.\n           (\\<exists>i.\n               suffix i\n                w \\<Turnstile>\\<^sub>n af \\<phi>\n  (prefix i w)[X]\\<^sub>\\<nu>) \\<and>\n           (\\<forall>\\<psi>\\<in>X.\n               w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)) \\<and>\n           (\\<forall>\\<psi>\\<in>Y.\n               w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)))", "by (metis master_theorem_ltr master_theorem_rtl)"], ["", "subsection \\<open>The Master Theorem on Languages\\<close>"], ["", "definition \"L\\<^sub>1 \\<phi> X = {w. \\<exists>i. suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>}\""], ["", "definition \"L\\<^sub>2 X Y = {w. \\<forall>\\<psi> \\<in> X. w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)}\""], ["", "definition \"L\\<^sub>3 X Y = {w. \\<forall>\\<psi> \\<in> Y. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)}\""], ["", "corollary master_theorem_language:\n  \"language_ltln \\<phi> = \\<Union> {L\\<^sub>1 \\<phi> X \\<inter> L\\<^sub>2 X Y \\<inter> L\\<^sub>3 X Y | X Y. X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi> \\<and> Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. language_ltln \\<phi> =\n    \\<Union>\n     {L\\<^sub>1 \\<phi> X \\<inter> L\\<^sub>2 X Y \\<inter> L\\<^sub>3 X Y |X Y.\n      X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi> \\<and>\n      Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>}", "proof safe"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> language_ltln \\<phi> \\<Longrightarrow>\n       x \\<in> \\<Union>\n                {L\\<^sub>1 \\<phi> X \\<inter> L\\<^sub>2 X Y \\<inter>\n                 L\\<^sub>3 X Y |\n                 X Y.\n                 X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi> \\<and>\n                 Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>}\n 2. \\<And>x X Xa Y.\n       \\<lbrakk>x \\<in> L\\<^sub>3 Xa Y; x \\<in> L\\<^sub>1 \\<phi> Xa;\n        x \\<in> L\\<^sub>2 Xa Y;\n        Xa \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> language_ltln \\<phi>", "fix w"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> language_ltln \\<phi> \\<Longrightarrow>\n       x \\<in> \\<Union>\n                {L\\<^sub>1 \\<phi> X \\<inter> L\\<^sub>2 X Y \\<inter>\n                 L\\<^sub>3 X Y |\n                 X Y.\n                 X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi> \\<and>\n                 Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>}\n 2. \\<And>x X Xa Y.\n       \\<lbrakk>x \\<in> L\\<^sub>3 Xa Y; x \\<in> L\\<^sub>1 \\<phi> Xa;\n        x \\<in> L\\<^sub>2 Xa Y;\n        Xa \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> language_ltln \\<phi>", "assume \"w \\<in> language_ltln \\<phi>\""], ["proof (state)\nthis:\n  w \\<in> language_ltln \\<phi>\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> language_ltln \\<phi> \\<Longrightarrow>\n       x \\<in> \\<Union>\n                {L\\<^sub>1 \\<phi> X \\<inter> L\\<^sub>2 X Y \\<inter>\n                 L\\<^sub>3 X Y |\n                 X Y.\n                 X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi> \\<and>\n                 Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>}\n 2. \\<And>x X Xa Y.\n       \\<lbrakk>x \\<in> L\\<^sub>3 Xa Y; x \\<in> L\\<^sub>1 \\<phi> Xa;\n        x \\<in> L\\<^sub>2 Xa Y;\n        Xa \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> language_ltln \\<phi>", "then"], ["proof (chain)\npicking this:\n  w \\<in> language_ltln \\<phi>", "have \"w \\<Turnstile>\\<^sub>n \\<phi>\""], ["proof (prove)\nusing this:\n  w \\<in> language_ltln \\<phi>\n\ngoal (1 subgoal):\n 1. w \\<Turnstile>\\<^sub>n \\<phi>", "unfolding language_ltln_def"], ["proof (prove)\nusing this:\n  w \\<in> {\\<xi>. \\<xi> \\<Turnstile>\\<^sub>n \\<phi>}\n\ngoal (1 subgoal):\n 1. w \\<Turnstile>\\<^sub>n \\<phi>", "by simp"], ["proof (state)\nthis:\n  w \\<Turnstile>\\<^sub>n \\<phi>\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> language_ltln \\<phi> \\<Longrightarrow>\n       x \\<in> \\<Union>\n                {L\\<^sub>1 \\<phi> X \\<inter> L\\<^sub>2 X Y \\<inter>\n                 L\\<^sub>3 X Y |\n                 X Y.\n                 X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi> \\<and>\n                 Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>}\n 2. \\<And>x X Xa Y.\n       \\<lbrakk>x \\<in> L\\<^sub>3 Xa Y; x \\<in> L\\<^sub>1 \\<phi> Xa;\n        x \\<in> L\\<^sub>2 Xa Y;\n        Xa \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> language_ltln \\<phi>", "then"], ["proof (chain)\npicking this:\n  w \\<Turnstile>\\<^sub>n \\<phi>", "obtain X Y where \"X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\" and \"Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\"\n    and \"\\<exists>i. suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>\"\n    and \"\\<forall>\\<psi> \\<in> X. w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\"\n    and \"\\<forall>\\<psi> \\<in> Y. w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\""], ["proof (prove)\nusing this:\n  w \\<Turnstile>\\<^sub>n \\<phi>\n\ngoal (1 subgoal):\n 1. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using master_theorem_ltr"], ["proof (prove)\nusing this:\n  w \\<Turnstile>\\<^sub>n \\<phi>\n  \\<lbrakk>?w \\<Turnstile>\\<^sub>n ?\\<phi>;\n   \\<And>X Y.\n      \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> ?\\<phi>;\n       Y \\<subseteq> subformulas\\<^sub>\\<nu> ?\\<phi>;\n       \\<exists>i.\n          suffix i\n           ?w \\<Turnstile>\\<^sub>n af ?\\<phi> (prefix i ?w)[X]\\<^sub>\\<nu>;\n       \\<forall>\\<psi>\\<in>X.\n          ?w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n       \\<forall>\\<psi>\\<in>Y.\n          ?w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>X Y.\n        \\<lbrakk>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n         Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>;\n         \\<exists>i.\n            suffix i\n             w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>;\n         \\<forall>\\<psi>\\<in>X.\n            w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>);\n         \\<forall>\\<psi>\\<in>Y.\n            w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  \\<exists>i.\n     suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>\n  \\<forall>\\<psi>\\<in>X.\n     w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\n  \\<forall>\\<psi>\\<in>Y.\n     w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> language_ltln \\<phi> \\<Longrightarrow>\n       x \\<in> \\<Union>\n                {L\\<^sub>1 \\<phi> X \\<inter> L\\<^sub>2 X Y \\<inter>\n                 L\\<^sub>3 X Y |\n                 X Y.\n                 X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi> \\<and>\n                 Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>}\n 2. \\<And>x X Xa Y.\n       \\<lbrakk>x \\<in> L\\<^sub>3 Xa Y; x \\<in> L\\<^sub>1 \\<phi> Xa;\n        x \\<in> L\\<^sub>2 Xa Y;\n        Xa \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> language_ltln \\<phi>", "then"], ["proof (chain)\npicking this:\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  \\<exists>i.\n     suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>\n  \\<forall>\\<psi>\\<in>X.\n     w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\n  \\<forall>\\<psi>\\<in>Y.\n     w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)", "have \"w \\<in> L\\<^sub>1 \\<phi> X\" and \"w \\<in> L\\<^sub>2 X Y\" and \"w \\<in> L\\<^sub>3 X Y\""], ["proof (prove)\nusing this:\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  \\<exists>i.\n     suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>\n  \\<forall>\\<psi>\\<in>X.\n     w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\n  \\<forall>\\<psi>\\<in>Y.\n     w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\n\ngoal (1 subgoal):\n 1. w \\<in> L\\<^sub>1 \\<phi> X &&&\n    w \\<in> L\\<^sub>2 X Y &&& w \\<in> L\\<^sub>3 X Y", "unfolding L\\<^sub>1_def L\\<^sub>2_def L\\<^sub>3_def"], ["proof (prove)\nusing this:\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  \\<exists>i.\n     suffix i w \\<Turnstile>\\<^sub>n af \\<phi> (prefix i w)[X]\\<^sub>\\<nu>\n  \\<forall>\\<psi>\\<in>X.\n     w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)\n  \\<forall>\\<psi>\\<in>Y.\n     w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)\n\ngoal (1 subgoal):\n 1. w \\<in> {w. \\<exists>i.\n                   suffix i\n                    w \\<Turnstile>\\<^sub>n af \\<phi>\n      (prefix i w)[X]\\<^sub>\\<nu>} &&&\n    w \\<in> {w. \\<forall>\\<psi>\\<in>X.\n                   w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)} &&&\n    w \\<in> {w. \\<forall>\\<psi>\\<in>Y.\n                   w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)}", "by simp+"], ["proof (state)\nthis:\n  w \\<in> L\\<^sub>1 \\<phi> X\n  w \\<in> L\\<^sub>2 X Y\n  w \\<in> L\\<^sub>3 X Y\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> language_ltln \\<phi> \\<Longrightarrow>\n       x \\<in> \\<Union>\n                {L\\<^sub>1 \\<phi> X \\<inter> L\\<^sub>2 X Y \\<inter>\n                 L\\<^sub>3 X Y |\n                 X Y.\n                 X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi> \\<and>\n                 Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>}\n 2. \\<And>x X Xa Y.\n       \\<lbrakk>x \\<in> L\\<^sub>3 Xa Y; x \\<in> L\\<^sub>1 \\<phi> Xa;\n        x \\<in> L\\<^sub>2 Xa Y;\n        Xa \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> language_ltln \\<phi>", "then"], ["proof (chain)\npicking this:\n  w \\<in> L\\<^sub>1 \\<phi> X\n  w \\<in> L\\<^sub>2 X Y\n  w \\<in> L\\<^sub>3 X Y", "show \"w \\<in> \\<Union> {L\\<^sub>1 \\<phi> X \\<inter> L\\<^sub>2 X Y \\<inter> L\\<^sub>3 X Y | X Y. X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi> \\<and> Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>}\""], ["proof (prove)\nusing this:\n  w \\<in> L\\<^sub>1 \\<phi> X\n  w \\<in> L\\<^sub>2 X Y\n  w \\<in> L\\<^sub>3 X Y\n\ngoal (1 subgoal):\n 1. w \\<in> \\<Union>\n             {L\\<^sub>1 \\<phi> X \\<inter> L\\<^sub>2 X Y \\<inter>\n              L\\<^sub>3 X Y |\n              X Y.\n              X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi> \\<and>\n              Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>}", "using \\<open>X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\\<close> \\<open>Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\\<close>"], ["proof (prove)\nusing this:\n  w \\<in> L\\<^sub>1 \\<phi> X\n  w \\<in> L\\<^sub>2 X Y\n  w \\<in> L\\<^sub>3 X Y\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n\ngoal (1 subgoal):\n 1. w \\<in> \\<Union>\n             {L\\<^sub>1 \\<phi> X \\<inter> L\\<^sub>2 X Y \\<inter>\n              L\\<^sub>3 X Y |\n              X Y.\n              X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi> \\<and>\n              Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>}", "by blast"], ["proof (state)\nthis:\n  w \\<in> \\<Union>\n           {L\\<^sub>1 \\<phi> X \\<inter> L\\<^sub>2 X Y \\<inter>\n            L\\<^sub>3 X Y |\n            X Y.\n            X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi> \\<and>\n            Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>}\n\ngoal (1 subgoal):\n 1. \\<And>x X Xa Y.\n       \\<lbrakk>x \\<in> L\\<^sub>3 Xa Y; x \\<in> L\\<^sub>1 \\<phi> Xa;\n        x \\<in> L\\<^sub>2 Xa Y;\n        Xa \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> language_ltln \\<phi>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x X Xa Y.\n       \\<lbrakk>x \\<in> L\\<^sub>3 Xa Y; x \\<in> L\\<^sub>1 \\<phi> Xa;\n        x \\<in> L\\<^sub>2 Xa Y;\n        Xa \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> language_ltln \\<phi>", "fix w X Y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x X Xa Y.\n       \\<lbrakk>x \\<in> L\\<^sub>3 Xa Y; x \\<in> L\\<^sub>1 \\<phi> Xa;\n        x \\<in> L\\<^sub>2 Xa Y;\n        Xa \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> language_ltln \\<phi>", "assume \"X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\" and \"Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\"\n    and \"w \\<in> L\\<^sub>1 \\<phi> X\" and \"w \\<in> L\\<^sub>2 X Y\" and \"w \\<in> L\\<^sub>3 X Y\""], ["proof (state)\nthis:\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  w \\<in> L\\<^sub>1 \\<phi> X\n  w \\<in> L\\<^sub>2 X Y\n  w \\<in> L\\<^sub>3 X Y\n\ngoal (1 subgoal):\n 1. \\<And>x X Xa Y.\n       \\<lbrakk>x \\<in> L\\<^sub>3 Xa Y; x \\<in> L\\<^sub>1 \\<phi> Xa;\n        x \\<in> L\\<^sub>2 Xa Y;\n        Xa \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>;\n        Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> x \\<in> language_ltln \\<phi>", "then"], ["proof (chain)\npicking this:\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  w \\<in> L\\<^sub>1 \\<phi> X\n  w \\<in> L\\<^sub>2 X Y\n  w \\<in> L\\<^sub>3 X Y", "show \"w \\<in> language_ltln \\<phi>\""], ["proof (prove)\nusing this:\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  w \\<in> L\\<^sub>1 \\<phi> X\n  w \\<in> L\\<^sub>2 X Y\n  w \\<in> L\\<^sub>3 X Y\n\ngoal (1 subgoal):\n 1. w \\<in> language_ltln \\<phi>", "unfolding language_ltln_def L\\<^sub>1_def L\\<^sub>2_def L\\<^sub>3_def"], ["proof (prove)\nusing this:\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  w \\<in> {w. \\<exists>i.\n                 suffix i\n                  w \\<Turnstile>\\<^sub>n af \\<phi>\n    (prefix i w)[X]\\<^sub>\\<nu>}\n  w \\<in> {w. \\<forall>\\<psi>\\<in>X.\n                 w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)}\n  w \\<in> {w. \\<forall>\\<psi>\\<in>Y.\n                 w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)}\n\ngoal (1 subgoal):\n 1. w \\<in> {\\<xi>. \\<xi> \\<Turnstile>\\<^sub>n \\<phi>}", "using master_theorem_rtl"], ["proof (prove)\nusing this:\n  X \\<subseteq> subformulas\\<^sub>\\<mu> \\<phi>\n  Y \\<subseteq> subformulas\\<^sub>\\<nu> \\<phi>\n  w \\<in> {w. \\<exists>i.\n                 suffix i\n                  w \\<Turnstile>\\<^sub>n af \\<phi>\n    (prefix i w)[X]\\<^sub>\\<nu>}\n  w \\<in> {w. \\<forall>\\<psi>\\<in>X.\n                 w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[Y]\\<^sub>\\<mu>)}\n  w \\<in> {w. \\<forall>\\<psi>\\<in>Y.\n                 w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[X]\\<^sub>\\<nu>)}\n  \\<lbrakk>?X \\<subseteq> subformulas\\<^sub>\\<mu> ?\\<phi>;\n   ?Y \\<subseteq> subformulas\\<^sub>\\<nu> ?\\<phi>;\n   \\<exists>i.\n      suffix i\n       ?w \\<Turnstile>\\<^sub>n af ?\\<phi> (prefix i ?w)[?X]\\<^sub>\\<nu>;\n   \\<forall>\\<psi>\\<in>?X.\n      ?w \\<Turnstile>\\<^sub>n G\\<^sub>n (F\\<^sub>n \\<psi>[?Y]\\<^sub>\\<mu>);\n   \\<forall>\\<psi>\\<in>?Y.\n      ?w \\<Turnstile>\\<^sub>n F\\<^sub>n (G\\<^sub>n \\<psi>[?X]\\<^sub>\\<nu>)\\<rbrakk>\n  \\<Longrightarrow> ?w \\<Turnstile>\\<^sub>n ?\\<phi>\n\ngoal (1 subgoal):\n 1. w \\<in> {\\<xi>. \\<xi> \\<Turnstile>\\<^sub>n \\<phi>}", "by blast"], ["proof (state)\nthis:\n  w \\<in> language_ltln \\<phi>\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}