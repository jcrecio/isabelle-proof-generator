{"file_name": "/home/qj213/afp-2021-10-22/thys/pGCL/Termination.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/pGCL", "problem_names": ["lemma maximal_Seq_term:\n  fixes r::\"'s prog\" and s::\"'s prog\"\n  assumes mr: \"maximal (wp r)\"\n      and ws: \"well_def s\"\n      and ts: \"(\\<lambda>s. 1) \\<tturnstile> wp s (\\<lambda>s. 1)\"\n  shows \"(\\<lambda>s. 1) \\<tturnstile> wp (r ;; s) (\\<lambda>s. 1)\"", "lemma term_onestep:\n  assumes wb: \"well_def body\"\n  shows \"\\<guillemotleft>\\<N> G\\<guillemotright> \\<tturnstile> wp do G \\<longrightarrow> body od (\\<lambda>s. 1)\"", "lemma loop_term_nat_measure_noinv:\n  fixes m :: \"'s \\<Rightarrow> nat\" and body :: \"'s prog\"\n  assumes wb: \"well_def body\"\n  and guard: \"\\<And>s. m s = 0 \\<longrightarrow> \\<not> G s\"\n  and variant: \"\\<And>n. \\<guillemotleft>\\<lambda>s. m s = Suc n\\<guillemotright> \\<tturnstile> wp body \\<guillemotleft>\\<lambda>s. m s = n\\<guillemotright>\"\n  shows \"\\<lambda>s. 1 \\<tturnstile> wp do G \\<longrightarrow> body od (\\<lambda>s. 1)\"", "lemma loop_term_nat_measure:\n  fixes m :: \"'s \\<Rightarrow> nat\" and body :: \"'s prog\"\n  assumes wb:  \"well_def body\"\n  and guard:   \"\\<And>s. m s = 0 \\<longrightarrow> \\<not> G s\"\n  and variant: \"\\<And>n. \\<guillemotleft>\\<lambda>s. m s = Suc n\\<guillemotright> && \\<guillemotleft>I\\<guillemotright> \\<tturnstile> wp body \\<guillemotleft>\\<lambda>s. m s = n\\<guillemotright>\"\n  and inv:     \"wp_inv G body \\<guillemotleft>I\\<guillemotright>\"\n  shows \"\\<guillemotleft>I\\<guillemotright> \\<tturnstile> wp do G \\<longrightarrow> body od (\\<lambda>s. 1)\"", "lemma termination_0_1:\n  fixes body :: \"'s prog\"\n  assumes wb: \"well_def body\"\n      \\<comment> \\<open>The loop terminates in one step with nonzero probability\\<close>\n      and onestep: \"(\\<lambda>s. p) \\<tturnstile> wp body \\<guillemotleft>\\<N> G\\<guillemotright>\"\n      and nzp:     \"0 < p\"\n      \\<comment> \\<open>The body is maximal i.e.~it terminates absolutely.\\<close>\n      and mb:      \"maximal (wp body)\"\n  shows \"\\<lambda>s. 1 \\<tturnstile> wp do G \\<longrightarrow> body od (\\<lambda>s. 1)\""], "translations": [["", "lemma maximal_Seq_term:\n  fixes r::\"'s prog\" and s::\"'s prog\"\n  assumes mr: \"maximal (wp r)\"\n      and ws: \"well_def s\"\n      and ts: \"(\\<lambda>s. 1) \\<tturnstile> wp s (\\<lambda>s. 1)\"\n  shows \"(\\<lambda>s. 1) \\<tturnstile> wp (r ;; s) (\\<lambda>s. 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lambda>s. 1 \\<tturnstile> wp (r ;; s) (\\<lambda>s. 1)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lambda>s. 1 \\<tturnstile> wp (r ;; s) (\\<lambda>s. 1)", "note hs = well_def_wp_healthy[OF ws]"], ["proof (state)\nthis:\n  healthy (wp s)\n\ngoal (1 subgoal):\n 1. \\<lambda>s. 1 \\<tturnstile> wp (r ;; s) (\\<lambda>s. 1)", "have \"wp s (\\<lambda>s. 1) = (\\<lambda>s. 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wp s (\\<lambda>s. 1) = (\\<lambda>s. 1)", "proof(rule antisym)"], ["proof (state)\ngoal (2 subgoals):\n 1. wp s (\\<lambda>s. 1) \\<tturnstile> \\<lambda>s. 1\n 2. \\<lambda>s. 1 \\<tturnstile> wp s (\\<lambda>s. 1)", "show \"(\\<lambda>s. 1) \\<tturnstile> wp s (\\<lambda>s. 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lambda>s. 1 \\<tturnstile> wp s (\\<lambda>s. 1)", "by(rule ts)"], ["proof (state)\nthis:\n  \\<lambda>s. 1 \\<tturnstile> wp s (\\<lambda>s. 1)\n\ngoal (1 subgoal):\n 1. wp s (\\<lambda>s. 1) \\<tturnstile> \\<lambda>s. 1", "have \"bounded_by 1 (wp s (\\<lambda>s. 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bounded_by 1 (wp s (\\<lambda>s. 1))", "by(auto intro!:healthy_bounded_byD[OF hs])"], ["proof (state)\nthis:\n  bounded_by 1 (wp s (\\<lambda>s. 1))\n\ngoal (1 subgoal):\n 1. wp s (\\<lambda>s. 1) \\<tturnstile> \\<lambda>s. 1", "thus \"wp s (\\<lambda>s. 1) \\<tturnstile> (\\<lambda>s. 1)\""], ["proof (prove)\nusing this:\n  bounded_by 1 (wp s (\\<lambda>s. 1))\n\ngoal (1 subgoal):\n 1. wp s (\\<lambda>s. 1) \\<tturnstile> \\<lambda>s. 1", "by(auto intro!:le_funI)"], ["proof (state)\nthis:\n  wp s (\\<lambda>s. 1) \\<tturnstile> \\<lambda>s. 1\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  wp s (\\<lambda>s. 1) = (\\<lambda>s. 1)\n\ngoal (1 subgoal):\n 1. \\<lambda>s. 1 \\<tturnstile> wp (r ;; s) (\\<lambda>s. 1)", "with mr"], ["proof (chain)\npicking this:\n  maximal (wp r)\n  wp s (\\<lambda>s. 1) = (\\<lambda>s. 1)", "show ?thesis"], ["proof (prove)\nusing this:\n  maximal (wp r)\n  wp s (\\<lambda>s. 1) = (\\<lambda>s. 1)\n\ngoal (1 subgoal):\n 1. \\<lambda>s. 1 \\<tturnstile> wp (r ;; s) (\\<lambda>s. 1)", "by(simp add:wp_eval embed_bool_def maximalD)"], ["proof (state)\nthis:\n  \\<lambda>s. 1 \\<tturnstile> wp (r ;; s) (\\<lambda>s. 1)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>From any state where the guard does not hold, a loop terminates\n  in a single step.\\<close>"], ["", "lemma term_onestep:\n  assumes wb: \"well_def body\"\n  shows \"\\<guillemotleft>\\<N> G\\<guillemotright> \\<tturnstile> wp do G \\<longrightarrow> body od (\\<lambda>s. 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<N>\n                      G \\<guillemotright> \\<tturnstile> wp\n                   (\\<mu>x.\n                       body ;;\n                       x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   (\\<lambda>s. 1)", "proof(rule le_funI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<guillemotleft> \\<N> G \\<guillemotright> x\n       \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              (\\<lambda>s. 1) x", "note hb = well_def_wp_healthy[OF wb]"], ["proof (state)\nthis:\n  healthy (wp body)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<guillemotleft> \\<N> G \\<guillemotright> x\n       \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              (\\<lambda>s. 1) x", "fix s"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<guillemotleft> \\<N> G \\<guillemotright> x\n       \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              (\\<lambda>s. 1) x", "show \"\\<guillemotleft>\\<N> G\\<guillemotright> s \\<le> wp do G \\<longrightarrow> body od (\\<lambda>s. 1) s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<N> G \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           (\\<lambda>s. 1) s", "proof(cases \"G s\", simp_all add:wp_loop_nguard hb)"], ["proof (state)\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    0 \\<le> wp (\\<mu>x.\n                   body ;;\n                   x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n             (\\<lambda>s. 1) s", "from hb"], ["proof (chain)\npicking this:\n  healthy (wp body)", "have \"sound (wp do G \\<longrightarrow> body od (\\<lambda>s. 1))\""], ["proof (prove)\nusing this:\n  healthy (wp body)\n\ngoal (1 subgoal):\n 1. sound\n     (wp (\\<mu>x.\n             body ;;\n             x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n       (\\<lambda>s. 1))", "by(auto intro:healthy_sound[OF healthy_wp_loop])"], ["proof (state)\nthis:\n  sound\n   (wp (\\<mu>x.\n           body ;;\n           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n     (\\<lambda>s. 1))\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    0 \\<le> wp (\\<mu>x.\n                   body ;;\n                   x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n             (\\<lambda>s. 1) s", "thus \"0 \\<le> wp do G \\<longrightarrow> body od (\\<lambda>s. 1) s\""], ["proof (prove)\nusing this:\n  sound\n   (wp (\\<mu>x.\n           body ;;\n           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n     (\\<lambda>s. 1))\n\ngoal (1 subgoal):\n 1. 0 \\<le> wp (\\<mu>x.\n                   body ;;\n                   x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n             (\\<lambda>s. 1) s", "by(auto)"], ["proof (state)\nthis:\n  0 \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           (\\<lambda>s. 1) s\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s\n  \\<le> wp (\\<mu>x.\n               body ;;\n               x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n         (\\<lambda>s. 1) s\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Classical Termination\\<close>"], ["", "text \\<open>The first non-trivial termination result is quite standard: If we can provide a\nnatural-number-valued measure, that decreases on every iteration, and implies termination on\nreaching zero, the loop terminates.\\<close>"], ["", "lemma loop_term_nat_measure_noinv:\n  fixes m :: \"'s \\<Rightarrow> nat\" and body :: \"'s prog\"\n  assumes wb: \"well_def body\"\n  and guard: \"\\<And>s. m s = 0 \\<longrightarrow> \\<not> G s\"\n  and variant: \"\\<And>n. \\<guillemotleft>\\<lambda>s. m s = Suc n\\<guillemotright> \\<tturnstile> wp body \\<guillemotleft>\\<lambda>s. m s = n\\<guillemotright>\"\n  shows \"\\<lambda>s. 1 \\<tturnstile> wp do G \\<longrightarrow> body od (\\<lambda>s. 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "note hb = well_def_wp_healthy[OF wb]"], ["proof (state)\nthis:\n  healthy (wp body)\n\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "have \"\\<And>n. (\\<forall>s. m s = n \\<longrightarrow> 1 \\<le> wp do G \\<longrightarrow> body od (\\<lambda>s. 1) s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<forall>s.\n          m s = n \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   (\\<lambda>s. 1) s", "proof(induct_tac n)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>n.\n       \\<forall>s.\n          m s = 0 \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   (\\<lambda>s. 1) s\n 2. \\<And>n na.\n       \\<forall>s.\n          m s = na \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   (\\<lambda>s. 1) s \\<Longrightarrow>\n       \\<forall>s.\n          m s = Suc na \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   (\\<lambda>s. 1) s", "fix n"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>n.\n       \\<forall>s.\n          m s = 0 \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   (\\<lambda>s. 1) s\n 2. \\<And>n na.\n       \\<forall>s.\n          m s = na \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   (\\<lambda>s. 1) s \\<Longrightarrow>\n       \\<forall>s.\n          m s = Suc na \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   (\\<lambda>s. 1) s", "show \"\\<forall>s. m s = 0 \\<longrightarrow> 1 \\<le> wp do G \\<longrightarrow> body od (\\<lambda>s. 1) s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>s.\n       m s = 0 \\<longrightarrow>\n       1 \\<le> wp (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                (\\<lambda>s. 1) s", "proof(clarify)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s.\n       m s = 0 \\<Longrightarrow>\n       1 \\<le> wp (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                (\\<lambda>s. 1) s", "fix s"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s.\n       m s = 0 \\<Longrightarrow>\n       1 \\<le> wp (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                (\\<lambda>s. 1) s", "assume \"m s = 0\""], ["proof (state)\nthis:\n  m s = 0\n\ngoal (1 subgoal):\n 1. \\<And>s.\n       m s = 0 \\<Longrightarrow>\n       1 \\<le> wp (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                (\\<lambda>s. 1) s", "with guard"], ["proof (chain)\npicking this:\n  m ?s = 0 \\<longrightarrow> \\<not> G ?s\n  m s = 0", "have \"\\<not> G s\""], ["proof (prove)\nusing this:\n  m ?s = 0 \\<longrightarrow> \\<not> G ?s\n  m s = 0\n\ngoal (1 subgoal):\n 1. \\<not> G s", "by(blast)"], ["proof (state)\nthis:\n  \\<not> G s\n\ngoal (1 subgoal):\n 1. \\<And>s.\n       m s = 0 \\<Longrightarrow>\n       1 \\<le> wp (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                (\\<lambda>s. 1) s", "with hb"], ["proof (chain)\npicking this:\n  healthy (wp body)\n  \\<not> G s", "show \"1 \\<le> wp do G \\<longrightarrow> body od (\\<lambda>s. 1) s\""], ["proof (prove)\nusing this:\n  healthy (wp body)\n  \\<not> G s\n\ngoal (1 subgoal):\n 1. 1 \\<le> wp (\\<mu>x.\n                   body ;;\n                   x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n             (\\<lambda>s. 1) s", "by(simp add:wp_loop_nguard)"], ["proof (state)\nthis:\n  1 \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           (\\<lambda>s. 1) s\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>s.\n     m s = 0 \\<longrightarrow>\n     1 \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              (\\<lambda>s. 1) s\n\ngoal (1 subgoal):\n 1. \\<And>n na.\n       \\<forall>s.\n          m s = na \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   (\\<lambda>s. 1) s \\<Longrightarrow>\n       \\<forall>s.\n          m s = Suc na \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   (\\<lambda>s. 1) s", "assume IH: \"\\<forall>s. m s = n \\<longrightarrow> 1 \\<le> wp do G \\<longrightarrow> body od (\\<lambda>s. 1) s\""], ["proof (state)\nthis:\n  \\<forall>s.\n     m s = n \\<longrightarrow>\n     1 \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              (\\<lambda>s. 1) s\n\ngoal (1 subgoal):\n 1. \\<And>n na.\n       \\<forall>s.\n          m s = na \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   (\\<lambda>s. 1) s \\<Longrightarrow>\n       \\<forall>s.\n          m s = Suc na \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   (\\<lambda>s. 1) s", "hence IH': \"\\<forall>s. m s = n \\<longrightarrow> 1 \\<le> wp do G \\<longrightarrow> body od \\<guillemotleft>\\<lambda>s. True\\<guillemotright> s\""], ["proof (prove)\nusing this:\n  \\<forall>s.\n     m s = n \\<longrightarrow>\n     1 \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              (\\<lambda>s. 1) s\n\ngoal (1 subgoal):\n 1. \\<forall>s.\n       m s = n \\<longrightarrow>\n       1 \\<le> wp (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "by(simp add:embed_bool_def)"], ["proof (state)\nthis:\n  \\<forall>s.\n     m s = n \\<longrightarrow>\n     1 \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal (1 subgoal):\n 1. \\<And>n na.\n       \\<forall>s.\n          m s = na \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   (\\<lambda>s. 1) s \\<Longrightarrow>\n       \\<forall>s.\n          m s = Suc na \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   (\\<lambda>s. 1) s", "have \"\\<forall>s. m s = Suc n \\<longrightarrow> 1 \\<le> wp do G \\<longrightarrow> body od \\<guillemotleft>\\<lambda>s. True\\<guillemotright> s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>s.\n       m s = Suc n \\<longrightarrow>\n       1 \\<le> wp (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "proof(intro fold_premise healthy_intros hb, rule le_funI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> x\n       \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              \\<guillemotleft> \\<lambda>a. True \\<guillemotright> x", "fix s"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> x\n       \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              \\<guillemotleft> \\<lambda>a. True \\<guillemotright> x", "show \"\\<guillemotleft>\\<lambda>s. m s = Suc n\\<guillemotright> s \\<le> wp do G \\<longrightarrow> body od \\<guillemotleft>\\<lambda>s. True\\<guillemotright> s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "proof(cases \"G s\")"], ["proof (state)\ngoal (2 subgoals):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n 2. \\<not> G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "case False"], ["proof (state)\nthis:\n  \\<not> G s\n\ngoal (2 subgoals):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n 2. \\<not> G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "hence \"1 = \\<guillemotleft>\\<N> G\\<guillemotright> s\""], ["proof (prove)\nusing this:\n  \\<not> G s\n\ngoal (1 subgoal):\n 1. 1 = \\<guillemotleft> \\<N> G \\<guillemotright> s", "by(auto)"], ["proof (state)\nthis:\n  1 = \\<guillemotleft> \\<N> G \\<guillemotright> s\n\ngoal (2 subgoals):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n 2. \\<not> G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "also"], ["proof (state)\nthis:\n  1 = \\<guillemotleft> \\<N> G \\<guillemotright> s\n\ngoal (2 subgoals):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n 2. \\<not> G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "from wb"], ["proof (chain)\npicking this:\n  well_def body", "have \"... \\<le> wp do G \\<longrightarrow> body od (\\<lambda>s. 1) s\""], ["proof (prove)\nusing this:\n  well_def body\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<N> G \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           (\\<lambda>s. 1) s", "by(rule le_funD[OF term_onestep])"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s\n  \\<le> wp (\\<mu>x.\n               body ;;\n               x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n         (\\<lambda>s. 1) s\n\ngoal (2 subgoals):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n 2. \\<not> G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "finally"], ["proof (chain)\npicking this:\n  1 \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           (\\<lambda>s. 1) s", "show ?thesis"], ["proof (prove)\nusing this:\n  1 \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           (\\<lambda>s. 1) s\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "by(simp add:embed_bool_def)"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n  \\<le> wp (\\<mu>x.\n               body ;;\n               x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n         \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "case True"], ["proof (state)\nthis:\n  G s\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "note G = this"], ["proof (state)\nthis:\n  G s\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "from IH'"], ["proof (chain)\npicking this:\n  \\<forall>s.\n     m s = n \\<longrightarrow>\n     1 \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "have \"\\<guillemotleft>\\<lambda>s. m s = n\\<guillemotright> \\<tturnstile> wp do G \\<longrightarrow> body od \\<guillemotleft>\\<lambda>s. True\\<guillemotright>\""], ["proof (prove)\nusing this:\n  \\<forall>s.\n     m s = n \\<longrightarrow>\n     1 \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<lambda>s.\n                        m s =\n                        n \\<guillemotright> \\<tturnstile> wp\n                     (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                     \\<guillemotleft> \\<lambda>s. True \\<guillemotright>", "by(blast intro:use_premise healthy_intros hb)"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s.\n                      m s =\n                      n \\<guillemotright> \\<tturnstile> wp\n                   (\\<mu>x.\n                       body ;;\n                       x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   \\<guillemotleft> \\<lambda>s. True \\<guillemotright>\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "with variant wb"], ["proof (chain)\npicking this:\n  \\<guillemotleft> \\<lambda>s.\n                      m s =\n                      Suc ?n \\<guillemotright> \\<tturnstile> wp body\n                        \\<guillemotleft> \\<lambda>s.\n      m s = ?n \\<guillemotright>\n  well_def body\n  \\<guillemotleft> \\<lambda>s.\n                      m s =\n                      n \\<guillemotright> \\<tturnstile> wp\n                   (\\<mu>x.\n                       body ;;\n                       x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   \\<guillemotleft> \\<lambda>s. True \\<guillemotright>", "have \"\\<guillemotleft>\\<lambda>s. m s = Suc n\\<guillemotright> \\<tturnstile> wp (body ;; do G \\<longrightarrow> body od) \\<guillemotleft>\\<lambda>s. True\\<guillemotright>\""], ["proof (prove)\nusing this:\n  \\<guillemotleft> \\<lambda>s.\n                      m s =\n                      Suc ?n \\<guillemotright> \\<tturnstile> wp body\n                        \\<guillemotleft> \\<lambda>s.\n      m s = ?n \\<guillemotright>\n  well_def body\n  \\<guillemotleft> \\<lambda>s.\n                      m s =\n                      n \\<guillemotright> \\<tturnstile> wp\n                   (\\<mu>x.\n                       body ;;\n                       x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   \\<guillemotleft> \\<lambda>s. True \\<guillemotright>\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<lambda>s.\n                        m s =\n                        Suc n \\<guillemotright> \\<tturnstile> wp\n                         (body ;;\n                          (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n                         \\<guillemotleft> \\<lambda>s. True \\<guillemotright>", "by(blast intro:wp_Seq wd_intros)"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s.\n                      m s =\n                      Suc n \\<guillemotright> \\<tturnstile> wp\n                       (body ;;\n                        (\\<mu>x.\n                            body ;;\n                            x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n                       \\<guillemotleft> \\<lambda>s. True \\<guillemotright>\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "hence \"\\<guillemotleft>\\<lambda>s. m s = Suc n\\<guillemotright> s \\<le> wp (body ;; do G \\<longrightarrow> body od) \\<guillemotleft>\\<lambda>s. True\\<guillemotright> s\""], ["proof (prove)\nusing this:\n  \\<guillemotleft> \\<lambda>s.\n                      m s =\n                      Suc n \\<guillemotright> \\<tturnstile> wp\n                       (body ;;\n                        (\\<mu>x.\n                            body ;;\n                            x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n                       \\<guillemotleft> \\<lambda>s. True \\<guillemotright>\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (body ;;\n              (\\<mu>x.\n                  body ;;\n                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "by(auto)"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n  \\<le> wp (body ;;\n            (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n         \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "also"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n  \\<le> wp (body ;;\n            (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n         \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "from hb G"], ["proof (chain)\npicking this:\n  healthy (wp body)\n  G s", "have \"... = wp do G \\<longrightarrow> body od \\<guillemotleft>\\<lambda>s. True\\<guillemotright> s\""], ["proof (prove)\nusing this:\n  healthy (wp body)\n  G s\n\ngoal (1 subgoal):\n 1. wp (body ;;\n        (\\<mu>x.\n            body ;;\n            x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n     \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s =\n    wp (\\<mu>x.\n           body ;;\n           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n     \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "by(simp add:wp_loop_guard)"], ["proof (state)\nthis:\n  wp (body ;;\n      (\\<mu>x.\n          body ;;\n          x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n   \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s =\n  wp (\\<mu>x.\n         body ;;\n         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n   \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "finally"], ["proof (chain)\npicking this:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n  \\<le> wp (\\<mu>x.\n               body ;;\n               x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n         \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n  \\<le> wp (\\<mu>x.\n               body ;;\n               x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n         \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "."], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n  \\<le> wp (\\<mu>x.\n               body ;;\n               x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n         \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> s\n  \\<le> wp (\\<mu>x.\n               body ;;\n               x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n         \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>s.\n     m s = Suc n \\<longrightarrow>\n     1 \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal (1 subgoal):\n 1. \\<And>n na.\n       \\<forall>s.\n          m s = na \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   (\\<lambda>s. 1) s \\<Longrightarrow>\n       \\<forall>s.\n          m s = Suc na \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   (\\<lambda>s. 1) s", "thus \"\\<forall>s. m s = Suc n \\<longrightarrow> 1 \\<le> wp do G \\<longrightarrow> body od (\\<lambda>s. 1) s\""], ["proof (prove)\nusing this:\n  \\<forall>s.\n     m s = Suc n \\<longrightarrow>\n     1 \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal (1 subgoal):\n 1. \\<forall>s.\n       m s = Suc n \\<longrightarrow>\n       1 \\<le> wp (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                (\\<lambda>s. 1) s", "by(simp add:embed_bool_def)"], ["proof (state)\nthis:\n  \\<forall>s.\n     m s = Suc n \\<longrightarrow>\n     1 \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              (\\<lambda>s. 1) s\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>s.\n     m s = ?n \\<longrightarrow>\n     1 \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              (\\<lambda>s. 1) s\n\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>s.\n     m s = ?n \\<longrightarrow>\n     1 \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              (\\<lambda>s. 1) s\n\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "by(auto)"], ["proof (state)\nthis:\n  \\<lambda>s.\n     1 \\<tturnstile> wp (\\<mu>x.\n                            body ;;\n                            x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                      (\\<lambda>s. 1)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>This version allows progress to depend on an invariant. Termination is then determined by\nthe invariant's value in the initial state.\\<close>"], ["", "lemma loop_term_nat_measure:\n  fixes m :: \"'s \\<Rightarrow> nat\" and body :: \"'s prog\"\n  assumes wb:  \"well_def body\"\n  and guard:   \"\\<And>s. m s = 0 \\<longrightarrow> \\<not> G s\"\n  and variant: \"\\<And>n. \\<guillemotleft>\\<lambda>s. m s = Suc n\\<guillemotright> && \\<guillemotleft>I\\<guillemotright> \\<tturnstile> wp body \\<guillemotleft>\\<lambda>s. m s = n\\<guillemotright>\"\n  and inv:     \"wp_inv G body \\<guillemotleft>I\\<guillemotright>\"\n  shows \"\\<guillemotleft>I\\<guillemotright> \\<tturnstile> wp do G \\<longrightarrow> body od (\\<lambda>s. 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp\n                  (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                  (\\<lambda>s. 1)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp\n                  (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                  (\\<lambda>s. 1)", "note hb = well_def_wp_healthy[OF wb]"], ["proof (state)\nthis:\n  healthy (wp body)\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp\n                  (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                  (\\<lambda>s. 1)", "note scb = sublinear_sub_conj[OF well_def_wp_sublinear, OF wb]"], ["proof (state)\nthis:\n  sub_conj (wp body)\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp\n                  (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                  (\\<lambda>s. 1)", "have \"\\<guillemotleft>I\\<guillemotright> \\<tturnstile> wp do G \\<longrightarrow> body od \\<guillemotleft>\\<lambda>s. True\\<guillemotright>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp\n                  (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                  \\<guillemotleft> \\<lambda>s. True \\<guillemotright>", "proof(rule use_premise, intro healthy_intros hb)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s.\n       I s \\<Longrightarrow>\n       1 \\<le> wp (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                \\<guillemotleft> \\<lambda>a. True \\<guillemotright> s", "fix s"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s.\n       I s \\<Longrightarrow>\n       1 \\<le> wp (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                \\<guillemotleft> \\<lambda>a. True \\<guillemotright> s", "have \"\\<And>n. (\\<forall>s. m s = n \\<and> I s \\<longrightarrow> 1 \\<le> wp do G \\<longrightarrow> body od \\<guillemotleft>\\<lambda>s. True\\<guillemotright> s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<forall>s.\n          m s = n \\<and> I s \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "proof(induct_tac n)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>n.\n       \\<forall>s.\n          m s = 0 \\<and> I s \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n 2. \\<And>n na.\n       \\<forall>s.\n          m s = na \\<and> I s \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   \\<guillemotleft> \\<lambda>s. True \\<guillemotright>\n                   s \\<Longrightarrow>\n       \\<forall>s.\n          m s = Suc na \\<and> I s \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "fix n"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>n.\n       \\<forall>s.\n          m s = 0 \\<and> I s \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n 2. \\<And>n na.\n       \\<forall>s.\n          m s = na \\<and> I s \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   \\<guillemotleft> \\<lambda>s. True \\<guillemotright>\n                   s \\<Longrightarrow>\n       \\<forall>s.\n          m s = Suc na \\<and> I s \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "show \"\\<forall>s. m s = 0 \\<and> I s \\<longrightarrow> 1 \\<le> wp do G \\<longrightarrow> body od \\<guillemotleft>\\<lambda>s. True\\<guillemotright> s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>s.\n       m s = 0 \\<and> I s \\<longrightarrow>\n       1 \\<le> wp (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "proof(clarify)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s.\n       \\<lbrakk>m s = 0; I s\\<rbrakk>\n       \\<Longrightarrow> 1 \\<le> wp (\\<mu>x.\n  body ;;\n  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                  \\<guillemotleft> \\<lambda>s.\n                True \\<guillemotright>\n                                  s", "fix s"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s.\n       \\<lbrakk>m s = 0; I s\\<rbrakk>\n       \\<Longrightarrow> 1 \\<le> wp (\\<mu>x.\n  body ;;\n  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                  \\<guillemotleft> \\<lambda>s.\n                True \\<guillemotright>\n                                  s", "assume \"m s = 0\""], ["proof (state)\nthis:\n  m s = 0\n\ngoal (1 subgoal):\n 1. \\<And>s.\n       \\<lbrakk>m s = 0; I s\\<rbrakk>\n       \\<Longrightarrow> 1 \\<le> wp (\\<mu>x.\n  body ;;\n  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                  \\<guillemotleft> \\<lambda>s.\n                True \\<guillemotright>\n                                  s", "with guard"], ["proof (chain)\npicking this:\n  m ?s = 0 \\<longrightarrow> \\<not> G ?s\n  m s = 0", "have \"\\<not> G s\""], ["proof (prove)\nusing this:\n  m ?s = 0 \\<longrightarrow> \\<not> G ?s\n  m s = 0\n\ngoal (1 subgoal):\n 1. \\<not> G s", "by(blast)"], ["proof (state)\nthis:\n  \\<not> G s\n\ngoal (1 subgoal):\n 1. \\<And>s.\n       \\<lbrakk>m s = 0; I s\\<rbrakk>\n       \\<Longrightarrow> 1 \\<le> wp (\\<mu>x.\n  body ;;\n  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                  \\<guillemotleft> \\<lambda>s.\n                True \\<guillemotright>\n                                  s", "with hb"], ["proof (chain)\npicking this:\n  healthy (wp body)\n  \\<not> G s", "show \"1 \\<le> wp do G \\<longrightarrow> body od \\<guillemotleft>\\<lambda>s. True\\<guillemotright> s\""], ["proof (prove)\nusing this:\n  healthy (wp body)\n  \\<not> G s\n\ngoal (1 subgoal):\n 1. 1 \\<le> wp (\\<mu>x.\n                   body ;;\n                   x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n             \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "by(simp add:wp_loop_nguard)"], ["proof (state)\nthis:\n  1 \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>s.\n     m s = 0 \\<and> I s \\<longrightarrow>\n     1 \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal (1 subgoal):\n 1. \\<And>n na.\n       \\<forall>s.\n          m s = na \\<and> I s \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   \\<guillemotleft> \\<lambda>s. True \\<guillemotright>\n                   s \\<Longrightarrow>\n       \\<forall>s.\n          m s = Suc na \\<and> I s \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "assume IH: \"\\<forall>s. m s = n \\<and> I s \\<longrightarrow> 1 \\<le> wp do G \\<longrightarrow> body od \\<guillemotleft>\\<lambda>s. True\\<guillemotright> s\""], ["proof (state)\nthis:\n  \\<forall>s.\n     m s = n \\<and> I s \\<longrightarrow>\n     1 \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal (1 subgoal):\n 1. \\<And>n na.\n       \\<forall>s.\n          m s = na \\<and> I s \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   \\<guillemotleft> \\<lambda>s. True \\<guillemotright>\n                   s \\<Longrightarrow>\n       \\<forall>s.\n          m s = Suc na \\<and> I s \\<longrightarrow>\n          1 \\<le> wp (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                   \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "show \"\\<forall>s. m s = Suc n \\<and> I s \\<longrightarrow> 1 \\<le> wp do G \\<longrightarrow> body od \\<guillemotleft>\\<lambda>s. True\\<guillemotright> s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>s.\n       m s = Suc n \\<and> I s \\<longrightarrow>\n       1 \\<le> wp (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "proof(intro fold_premise healthy_intros hb le_funI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright>\n        x\n       \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              \\<guillemotleft> \\<lambda>a. True \\<guillemotright> x", "fix s"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright>\n        x\n       \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              \\<guillemotleft> \\<lambda>a. True \\<guillemotright> x", "show \"\\<guillemotleft>\\<lambda>s. m s = Suc n \\<and> I s\\<guillemotright> s \\<le> wp do G \\<longrightarrow> body od \\<guillemotleft>\\<lambda>s. True\\<guillemotright> s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "proof(cases \"G s\")"], ["proof (state)\ngoal (2 subgoals):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n 2. \\<not> G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "case False"], ["proof (state)\nthis:\n  \\<not> G s\n\ngoal (2 subgoals):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n 2. \\<not> G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "with hb"], ["proof (chain)\npicking this:\n  healthy (wp body)\n  \\<not> G s", "show ?thesis"], ["proof (prove)\nusing this:\n  healthy (wp body)\n  \\<not> G s\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "by(simp add:wp_loop_nguard)"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n  \\<le> wp (\\<mu>x.\n               body ;;\n               x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n         \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "case True"], ["proof (state)\nthis:\n  G s\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "note G = this"], ["proof (state)\nthis:\n  G s\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "have \"\\<guillemotleft>\\<lambda>s. m s = Suc n\\<guillemotright> && \\<guillemotleft>I\\<guillemotright> && \\<guillemotleft>G\\<guillemotright> =\n                \\<guillemotleft>\\<lambda>s. m s = Suc n\\<guillemotright> && (\\<guillemotleft>I\\<guillemotright> && \\<guillemotleft>I\\<guillemotright>) && \\<guillemotleft>G\\<guillemotright>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n    \\<guillemotleft> I \\<guillemotright> &&\n    \\<guillemotleft> G \\<guillemotright> =\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n    (\\<guillemotleft> I \\<guillemotright> &&\n     \\<guillemotleft> I \\<guillemotright>) &&\n    \\<guillemotleft> G \\<guillemotright>", "by(simp)"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  \\<guillemotleft> G \\<guillemotright> =\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  (\\<guillemotleft> I \\<guillemotright> &&\n   \\<guillemotleft> I \\<guillemotright>) &&\n  \\<guillemotleft> G \\<guillemotright>\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "also"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  \\<guillemotleft> G \\<guillemotright> =\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  (\\<guillemotleft> I \\<guillemotright> &&\n   \\<guillemotleft> I \\<guillemotright>) &&\n  \\<guillemotleft> G \\<guillemotright>\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "have \"... = (\\<guillemotleft>\\<lambda>s. m s = Suc n\\<guillemotright> && \\<guillemotleft>I\\<guillemotright>) && (\\<guillemotleft>I\\<guillemotright> && \\<guillemotleft>G\\<guillemotright>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n    (\\<guillemotleft> I \\<guillemotright> &&\n     \\<guillemotleft> I \\<guillemotright>) &&\n    \\<guillemotleft> G \\<guillemotright> =\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n    \\<guillemotleft> I \\<guillemotright> &&\n    (\\<guillemotleft> I \\<guillemotright> &&\n     \\<guillemotleft> G \\<guillemotright>)", "by(simp add:exp_conj_assoc exp_conj_unitary del:exp_conj_idem)"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  (\\<guillemotleft> I \\<guillemotright> &&\n   \\<guillemotleft> I \\<guillemotright>) &&\n  \\<guillemotleft> G \\<guillemotright> =\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  (\\<guillemotleft> I \\<guillemotright> &&\n   \\<guillemotleft> G \\<guillemotright>)\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "also"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  (\\<guillemotleft> I \\<guillemotright> &&\n   \\<guillemotleft> I \\<guillemotright>) &&\n  \\<guillemotleft> G \\<guillemotright> =\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  (\\<guillemotleft> I \\<guillemotright> &&\n   \\<guillemotleft> G \\<guillemotright>)\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "have \"... = (\\<guillemotleft>\\<lambda>s. m s = Suc n\\<guillemotright> && \\<guillemotleft>I\\<guillemotright>) && (\\<guillemotleft>G\\<guillemotright> && \\<guillemotleft>I\\<guillemotright>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n    \\<guillemotleft> I \\<guillemotright> &&\n    (\\<guillemotleft> I \\<guillemotright> &&\n     \\<guillemotleft> G \\<guillemotright>) =\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n    \\<guillemotleft> I \\<guillemotright> &&\n    (\\<guillemotleft> G \\<guillemotright> &&\n     \\<guillemotleft> I \\<guillemotright>)", "by(simp only:exp_conj_comm)"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  (\\<guillemotleft> I \\<guillemotright> &&\n   \\<guillemotleft> G \\<guillemotright>) =\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  (\\<guillemotleft> G \\<guillemotright> &&\n   \\<guillemotleft> I \\<guillemotright>)\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "also"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  (\\<guillemotleft> I \\<guillemotright> &&\n   \\<guillemotleft> G \\<guillemotright>) =\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  (\\<guillemotleft> G \\<guillemotright> &&\n   \\<guillemotleft> I \\<guillemotright>)\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "{"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  (\\<guillemotleft> I \\<guillemotright> &&\n   \\<guillemotleft> G \\<guillemotright>) =\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  (\\<guillemotleft> G \\<guillemotright> &&\n   \\<guillemotleft> I \\<guillemotright>)\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "from inv hb"], ["proof (chain)\npicking this:\n  wp_inv G body \\<guillemotleft> I \\<guillemotright>\n  healthy (wp body)", "have \"\\<guillemotleft>G\\<guillemotright> && \\<guillemotleft>I\\<guillemotright> \\<tturnstile> wp body \\<guillemotleft>I\\<guillemotright>\""], ["proof (prove)\nusing this:\n  wp_inv G body \\<guillemotleft> I \\<guillemotright>\n  healthy (wp body)\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> G \\<guillemotright> &&\n    \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp body\n                  \\<guillemotleft> I \\<guillemotright>", "by(rule wp_inv_stdD)"], ["proof (state)\nthis:\n  \\<guillemotleft> G \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp body\n                \\<guillemotleft> I \\<guillemotright>\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "with variant"], ["proof (chain)\npicking this:\n  \\<guillemotleft> \\<lambda>s. m s = Suc ?n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp body\n                \\<guillemotleft> \\<lambda>s. m s = ?n \\<guillemotright>\n  \\<guillemotleft> G \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp body\n                \\<guillemotleft> I \\<guillemotright>", "have \"(\\<guillemotleft>\\<lambda>s. m s = Suc n\\<guillemotright> && \\<guillemotleft>I\\<guillemotright>) && (\\<guillemotleft>G\\<guillemotright> && \\<guillemotleft>I\\<guillemotright>) \\<tturnstile>\n                  wp body \\<guillemotleft>\\<lambda>s. m s = n\\<guillemotright> && wp body \\<guillemotleft>I\\<guillemotright>\""], ["proof (prove)\nusing this:\n  \\<guillemotleft> \\<lambda>s. m s = Suc ?n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp body\n                \\<guillemotleft> \\<lambda>s. m s = ?n \\<guillemotright>\n  \\<guillemotleft> G \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp body\n                \\<guillemotleft> I \\<guillemotright>\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n    \\<guillemotleft> I \\<guillemotright> &&\n    (\\<guillemotleft> G \\<guillemotright> &&\n     \\<guillemotleft> I \\<guillemotright>) \\<tturnstile> wp body\n                    \\<guillemotleft> \\<lambda>s.\n  m s = n \\<guillemotright> &&\n                   wp body \\<guillemotleft> I \\<guillemotright>", "by(rule entails_frame)"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  (\\<guillemotleft> G \\<guillemotright> &&\n   \\<guillemotleft> I \\<guillemotright>) \\<tturnstile> wp body\n                  \\<guillemotleft> \\<lambda>s. m s = n \\<guillemotright> &&\n                 wp body \\<guillemotleft> I \\<guillemotright>\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "}"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  (\\<guillemotleft> G \\<guillemotright> &&\n   \\<guillemotleft> I \\<guillemotright>) \\<tturnstile> wp body\n                  \\<guillemotleft> \\<lambda>s. m s = n \\<guillemotright> &&\n                 wp body \\<guillemotleft> I \\<guillemotright>\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "also"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  (\\<guillemotleft> G \\<guillemotright> &&\n   \\<guillemotleft> I \\<guillemotright>) \\<tturnstile> wp body\n                  \\<guillemotleft> \\<lambda>s. m s = n \\<guillemotright> &&\n                 wp body \\<guillemotleft> I \\<guillemotright>\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "from scb"], ["proof (chain)\npicking this:\n  sub_conj (wp body)", "have \"wp body \\<guillemotleft>\\<lambda>s. m s = n\\<guillemotright> && wp body \\<guillemotleft>I\\<guillemotright> \\<tturnstile>\n                wp body (\\<guillemotleft>\\<lambda>s. m s = n\\<guillemotright> && \\<guillemotleft>I\\<guillemotright>)\""], ["proof (prove)\nusing this:\n  sub_conj (wp body)\n\ngoal (1 subgoal):\n 1. wp body \\<guillemotleft> \\<lambda>s. m s = n \\<guillemotright> &&\n    wp body\n     \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp body\n                   (\\<guillemotleft> \\<lambda>s.\n  m s = n \\<guillemotright> &&\n                    \\<guillemotleft> I \\<guillemotright>)", "by(blast)"], ["proof (state)\nthis:\n  wp body \\<guillemotleft> \\<lambda>s. m s = n \\<guillemotright> &&\n  wp body\n   \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp body\n                 (\\<guillemotleft> \\<lambda>s. m s = n \\<guillemotright> &&\n                  \\<guillemotleft> I \\<guillemotright>)\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "finally"], ["proof (chain)\npicking this:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  \\<guillemotleft> G \\<guillemotright> \\<tturnstile> wp body\n                (\\<guillemotleft> \\<lambda>s. m s = n \\<guillemotright> &&\n                 \\<guillemotleft> I \\<guillemotright>)", "have \"\\<guillemotleft>\\<lambda>s. m s = Suc n \\<guillemotright> && \\<guillemotleft> I \\<guillemotright> && \\<guillemotleft> G \\<guillemotright> \\<tturnstile>\n                        wp body (\\<guillemotleft> \\<lambda>s. m s = n \\<guillemotright> && \\<guillemotleft> I \\<guillemotright>)\""], ["proof (prove)\nusing this:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  \\<guillemotleft> G \\<guillemotright> \\<tturnstile> wp body\n                (\\<guillemotleft> \\<lambda>s. m s = n \\<guillemotright> &&\n                 \\<guillemotleft> I \\<guillemotright>)\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n    \\<guillemotleft> I \\<guillemotright> &&\n    \\<guillemotleft> G \\<guillemotright> \\<tturnstile> wp body\n                  (\\<guillemotleft> \\<lambda>s. m s = n \\<guillemotright> &&\n                   \\<guillemotleft> I \\<guillemotright>)", "."], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  \\<guillemotleft> G \\<guillemotright> \\<tturnstile> wp body\n                (\\<guillemotleft> \\<lambda>s. m s = n \\<guillemotright> &&\n                 \\<guillemotleft> I \\<guillemotright>)\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "moreover"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  \\<guillemotleft> G \\<guillemotright> \\<tturnstile> wp body\n                (\\<guillemotleft> \\<lambda>s. m s = n \\<guillemotright> &&\n                 \\<guillemotleft> I \\<guillemotright>)\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "{"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  \\<guillemotleft> G \\<guillemotright> \\<tturnstile> wp body\n                (\\<guillemotleft> \\<lambda>s. m s = n \\<guillemotright> &&\n                 \\<guillemotleft> I \\<guillemotright>)\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "from IH"], ["proof (chain)\npicking this:\n  \\<forall>s.\n     m s = n \\<and> I s \\<longrightarrow>\n     1 \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "have \"\\<guillemotleft>\\<lambda>s. m s = n \\<and> I s\\<guillemotright> \\<tturnstile> wp do G \\<longrightarrow> body od \\<guillemotleft>\\<lambda>s. True\\<guillemotright>\""], ["proof (prove)\nusing this:\n  \\<forall>s.\n     m s = n \\<and> I s \\<longrightarrow>\n     1 \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<lambda>s.\n                        m s = n \\<and>\n                        I s \\<guillemotright> \\<tturnstile> wp\n                       (\\<mu>x.\n                           body ;;\n                           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                       \\<guillemotleft> \\<lambda>s. True \\<guillemotright>", "by(blast intro:use_premise healthy_intros hb)"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s.\n                      m s = n \\<and>\n                      I s \\<guillemotright> \\<tturnstile> wp\n                     (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                     \\<guillemotleft> \\<lambda>s. True \\<guillemotright>\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "hence \"\\<guillemotleft>\\<lambda>s. m s = n\\<guillemotright> && \\<guillemotleft>I\\<guillemotright> \\<tturnstile> wp do G \\<longrightarrow> body od \\<guillemotleft>\\<lambda>s. True\\<guillemotright>\""], ["proof (prove)\nusing this:\n  \\<guillemotleft> \\<lambda>s.\n                      m s = n \\<and>\n                      I s \\<guillemotright> \\<tturnstile> wp\n                     (\\<mu>x.\n                         body ;;\n                         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                     \\<guillemotleft> \\<lambda>s. True \\<guillemotright>\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<lambda>s. m s = n \\<guillemotright> &&\n    \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp\n                  (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                  \\<guillemotleft> \\<lambda>s. True \\<guillemotright>", "by(simp add:exp_conj_std_split)"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp\n                (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                \\<guillemotleft> \\<lambda>s. True \\<guillemotright>\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "}"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp\n                (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                \\<guillemotleft> \\<lambda>s. True \\<guillemotright>\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "ultimately"], ["proof (chain)\npicking this:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  \\<guillemotleft> G \\<guillemotright> \\<tturnstile> wp body\n                (\\<guillemotleft> \\<lambda>s. m s = n \\<guillemotright> &&\n                 \\<guillemotleft> I \\<guillemotright>)\n  \\<guillemotleft> \\<lambda>s. m s = n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp\n                (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                \\<guillemotleft> \\<lambda>s. True \\<guillemotright>", "have \"\\<guillemotleft>\\<lambda>s. m s = Suc n \\<guillemotright> && \\<guillemotleft> I \\<guillemotright> && \\<guillemotleft> G \\<guillemotright> \\<tturnstile>\n                wp (body ;; do G \\<longrightarrow> body od) \\<guillemotleft>\\<lambda>s. True\\<guillemotright>\""], ["proof (prove)\nusing this:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  \\<guillemotleft> G \\<guillemotright> \\<tturnstile> wp body\n                (\\<guillemotleft> \\<lambda>s. m s = n \\<guillemotright> &&\n                 \\<guillemotleft> I \\<guillemotright>)\n  \\<guillemotleft> \\<lambda>s. m s = n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp\n                (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                \\<guillemotleft> \\<lambda>s. True \\<guillemotright>\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n    \\<guillemotleft> I \\<guillemotright> &&\n    \\<guillemotleft> G \\<guillemotright> \\<tturnstile> wp\n                  (body ;;\n                   (\\<mu>x.\n                       body ;;\n                       x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n                  \\<guillemotleft> \\<lambda>s. True \\<guillemotright>", "using wb"], ["proof (prove)\nusing this:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  \\<guillemotleft> G \\<guillemotright> \\<tturnstile> wp body\n                (\\<guillemotleft> \\<lambda>s. m s = n \\<guillemotright> &&\n                 \\<guillemotleft> I \\<guillemotright>)\n  \\<guillemotleft> \\<lambda>s. m s = n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp\n                (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                \\<guillemotleft> \\<lambda>s. True \\<guillemotright>\n  well_def body\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n    \\<guillemotleft> I \\<guillemotright> &&\n    \\<guillemotleft> G \\<guillemotright> \\<tturnstile> wp\n                  (body ;;\n                   (\\<mu>x.\n                       body ;;\n                       x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n                  \\<guillemotleft> \\<lambda>s. True \\<guillemotright>", "by(blast intro:wp_Seq wd_intros)"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  \\<guillemotleft> G \\<guillemotright> \\<tturnstile> wp\n                (body ;;\n                 (\\<mu>x.\n                     body ;;\n                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n                \\<guillemotleft> \\<lambda>s. True \\<guillemotright>\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "hence \"(\\<guillemotleft>\\<lambda>s. m s = Suc n \\<and> I s\\<guillemotright> && \\<guillemotleft> G \\<guillemotright>) s \\<le>\n                 wp (body ;; do G \\<longrightarrow> body od) \\<guillemotleft>\\<lambda>s. True\\<guillemotright> s\""], ["proof (prove)\nusing this:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<guillemotright> &&\n  \\<guillemotleft> I \\<guillemotright> &&\n  \\<guillemotleft> G \\<guillemotright> \\<tturnstile> wp\n                (body ;;\n                 (\\<mu>x.\n                     body ;;\n                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n                \\<guillemotleft> \\<lambda>s. True \\<guillemotright>\n\ngoal (1 subgoal):\n 1. (\\<guillemotleft> \\<lambda>s.\n                         m s = Suc n \\<and> I s \\<guillemotright> &&\n     \\<guillemotleft> G \\<guillemotright>)\n     s\n    \\<le> wp (body ;;\n              (\\<mu>x.\n                  body ;;\n                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "by(auto simp:exp_conj_std_split)"], ["proof (state)\nthis:\n  (\\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> &&\n   \\<guillemotleft> G \\<guillemotright>)\n   s\n  \\<le> wp (body ;;\n            (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n         \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "with G"], ["proof (chain)\npicking this:\n  G s\n  (\\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> &&\n   \\<guillemotleft> G \\<guillemotright>)\n   s\n  \\<le> wp (body ;;\n            (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n         \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "have \"\\<guillemotleft>\\<lambda>s. m s = Suc n \\<and> I s\\<guillemotright> s \\<le>\n                       wp (body ;; do G \\<longrightarrow> body od) \\<guillemotleft>\\<lambda>s. True\\<guillemotright> s\""], ["proof (prove)\nusing this:\n  G s\n  (\\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> &&\n   \\<guillemotleft> G \\<guillemotright>)\n   s\n  \\<le> wp (body ;;\n            (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n         \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (body ;;\n              (\\<mu>x.\n                  body ;;\n                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "by(simp add:exp_conj_def)"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n  \\<le> wp (body ;;\n            (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n         \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "also"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n  \\<le> wp (body ;;\n            (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n         \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "from hb G"], ["proof (chain)\npicking this:\n  healthy (wp body)\n  G s", "have \"... = wp do G \\<longrightarrow> body od \\<guillemotleft>\\<lambda>s. True\\<guillemotright> s\""], ["proof (prove)\nusing this:\n  healthy (wp body)\n  G s\n\ngoal (1 subgoal):\n 1. wp (body ;;\n        (\\<mu>x.\n            body ;;\n            x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n     \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s =\n    wp (\\<mu>x.\n           body ;;\n           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n     \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "by(simp add:wp_loop_guard)"], ["proof (state)\nthis:\n  wp (body ;;\n      (\\<mu>x.\n          body ;;\n          x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n   \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s =\n  wp (\\<mu>x.\n         body ;;\n         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n   \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal (1 subgoal):\n 1. G s \\<Longrightarrow>\n    \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "finally"], ["proof (chain)\npicking this:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n  \\<le> wp (\\<mu>x.\n               body ;;\n               x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n         \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n  \\<le> wp (\\<mu>x.\n               body ;;\n               x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n         \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "."], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n  \\<le> wp (\\<mu>x.\n               body ;;\n               x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n         \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<lambda>s. m s = Suc n \\<and> I s \\<guillemotright> s\n  \\<le> wp (\\<mu>x.\n               body ;;\n               x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n         \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>s.\n     m s = Suc n \\<and> I s \\<longrightarrow>\n     1 \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>s.\n     m s = ?n \\<and> I s \\<longrightarrow>\n     1 \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal (1 subgoal):\n 1. \\<And>s.\n       I s \\<Longrightarrow>\n       1 \\<le> wp (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                \\<guillemotleft> \\<lambda>a. True \\<guillemotright> s", "moreover"], ["proof (state)\nthis:\n  \\<forall>s.\n     m s = ?n \\<and> I s \\<longrightarrow>\n     1 \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal (1 subgoal):\n 1. \\<And>s.\n       I s \\<Longrightarrow>\n       1 \\<le> wp (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                \\<guillemotleft> \\<lambda>a. True \\<guillemotright> s", "assume \"I s\""], ["proof (state)\nthis:\n  I s\n\ngoal (1 subgoal):\n 1. \\<And>s.\n       I s \\<Longrightarrow>\n       1 \\<le> wp (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                \\<guillemotleft> \\<lambda>a. True \\<guillemotright> s", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>s.\n     m s = ?n \\<and> I s \\<longrightarrow>\n     1 \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n  I s", "show \"1 \\<le> wp do G \\<longrightarrow> body od \\<guillemotleft>\\<lambda>s. True\\<guillemotright> s\""], ["proof (prove)\nusing this:\n  \\<forall>s.\n     m s = ?n \\<and> I s \\<longrightarrow>\n     1 \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n  I s\n\ngoal (1 subgoal):\n 1. 1 \\<le> wp (\\<mu>x.\n                   body ;;\n                   x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n             \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s", "by(auto)"], ["proof (state)\nthis:\n  1 \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           \\<guillemotleft> \\<lambda>s. True \\<guillemotright> s\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp\n                (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                \\<guillemotleft> \\<lambda>s. True \\<guillemotright>\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp\n                  (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                  (\\<lambda>s. 1)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp\n                (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                \\<guillemotleft> \\<lambda>s. True \\<guillemotright>\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp\n                  (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                  (\\<lambda>s. 1)", "by(simp add:embed_bool_def)"], ["proof (state)\nthis:\n  \\<guillemotleft> I \\<guillemotright> \\<tturnstile> wp\n                (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                (\\<lambda>s. 1)\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Probabilistic Termination\\<close>"], ["", "text \\<open>Any loop that has a non-zero chance of terminating after each step terminates with\nprobability 1.\\<close>"], ["", "lemma termination_0_1:\n  fixes body :: \"'s prog\"\n  assumes wb: \"well_def body\"\n      \\<comment> \\<open>The loop terminates in one step with nonzero probability\\<close>\n      and onestep: \"(\\<lambda>s. p) \\<tturnstile> wp body \\<guillemotleft>\\<N> G\\<guillemotright>\"\n      and nzp:     \"0 < p\"\n      \\<comment> \\<open>The body is maximal i.e.~it terminates absolutely.\\<close>\n      and mb:      \"maximal (wp body)\"\n  shows \"\\<lambda>s. 1 \\<tturnstile> wp do G \\<longrightarrow> body od (\\<lambda>s. 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "note hb = well_def_wp_healthy[OF wb]"], ["proof (state)\nthis:\n  healthy (wp body)\n\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "note sb = healthy_scalingD[OF hb]"], ["proof (state)\nthis:\n  scaling (wp body)\n\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "note sab = sublinear_subadd[OF well_def_wp_sublinear, OF wb, OF healthy_feasibleD, OF hb]"], ["proof (state)\nthis:\n  sub_add (wp body)\n\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "from hb"], ["proof (chain)\npicking this:\n  healthy (wp body)", "have hloop: \"healthy (wp do G \\<longrightarrow> body od)\""], ["proof (prove)\nusing this:\n  healthy (wp body)\n\ngoal (1 subgoal):\n 1. healthy\n     (wp (\\<mu>x.\n             body ;;\n             x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))", "by(rule healthy_intros)"], ["proof (state)\nthis:\n  healthy\n   (wp (\\<mu>x.\n           body ;;\n           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "hence swp: \"sound (wp do G \\<longrightarrow> body od (\\<lambda>s. 1))\""], ["proof (prove)\nusing this:\n  healthy\n   (wp (\\<mu>x.\n           body ;;\n           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n\ngoal (1 subgoal):\n 1. sound\n     (wp (\\<mu>x.\n             body ;;\n             x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n       (\\<lambda>s. 1))", "by(blast)"], ["proof (state)\nthis:\n  sound\n   (wp (\\<mu>x.\n           body ;;\n           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n     (\\<lambda>s. 1))\n\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "txt \\<open>@{term p} is no greater than $1$, by feasibility.\\<close>"], ["proof (state)\nthis:\n  sound\n   (wp (\\<mu>x.\n           body ;;\n           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n     (\\<lambda>s. 1))\n\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "from onestep"], ["proof (chain)\npicking this:\n  \\<lambda>s.\n     p \\<tturnstile> wp body \\<guillemotleft> \\<N> G \\<guillemotright>", "have onestep': \"\\<And>s. p \\<le> wp body \\<guillemotleft>\\<N> G\\<guillemotright> s\""], ["proof (prove)\nusing this:\n  \\<lambda>s.\n     p \\<tturnstile> wp body \\<guillemotleft> \\<N> G \\<guillemotright>\n\ngoal (1 subgoal):\n 1. \\<And>s. p \\<le> wp body \\<guillemotleft> \\<N> G \\<guillemotright> s", "by(auto)"], ["proof (state)\nthis:\n  p \\<le> wp body \\<guillemotleft> \\<N> G \\<guillemotright> ?s\n\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "also"], ["proof (state)\nthis:\n  p \\<le> wp body \\<guillemotleft> \\<N> G \\<guillemotright> ?s\n\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "{"], ["proof (state)\nthis:\n  p \\<le> wp body \\<guillemotleft> \\<N> G \\<guillemotright> ?s\n\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "from hb"], ["proof (chain)\npicking this:\n  healthy (wp body)", "have \"unitary (wp body \\<guillemotleft>\\<N> G\\<guillemotright>)\""], ["proof (prove)\nusing this:\n  healthy (wp body)\n\ngoal (1 subgoal):\n 1. unitary (wp body \\<guillemotleft> \\<N> G \\<guillemotright>)", "by(auto)"], ["proof (state)\nthis:\n  unitary (wp body \\<guillemotleft> \\<N> G \\<guillemotright>)\n\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "hence \"\\<And>s. wp body \\<guillemotleft>\\<N> G\\<guillemotright> s \\<le> 1\""], ["proof (prove)\nusing this:\n  unitary (wp body \\<guillemotleft> \\<N> G \\<guillemotright>)\n\ngoal (1 subgoal):\n 1. \\<And>s. wp body \\<guillemotleft> \\<N> G \\<guillemotright> s \\<le> 1", "by(auto)"], ["proof (state)\nthis:\n  wp body \\<guillemotleft> \\<N> G \\<guillemotright> ?s \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "}"], ["proof (state)\nthis:\n  wp body \\<guillemotleft> \\<N> G \\<guillemotright> ?s \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "finally"], ["proof (chain)\npicking this:\n  p \\<le> 1", "have p1: \"p \\<le> 1\""], ["proof (prove)\nusing this:\n  p \\<le> 1\n\ngoal (1 subgoal):\n 1. p \\<le> 1", "."], ["proof (state)\nthis:\n  p \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "txt \\<open>This is the crux of the proof: that given a lower bound below $1$, we can find another,\n    higher one.\\<close>"], ["proof (state)\nthis:\n  p \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "have new_bound: \"\\<And>k. 0 \\<le> k \\<Longrightarrow> k \\<le> 1 \\<Longrightarrow> (\\<lambda>s. k) \\<tturnstile> wp do G \\<longrightarrow> body od (\\<lambda>s. 1) \\<Longrightarrow>\n            (\\<lambda>s. p * (1-k) + k) \\<tturnstile> wp do G \\<longrightarrow> body od (\\<lambda>s. 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> \\<lambda>s.\n                            p * (1 - k) +\n                            k \\<tturnstile> wp\n       (\\<mu>x.\n           body ;;\n           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n       (\\<lambda>s. 1)", "proof(rule le_funI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "fix k s"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "assume X: \"\\<lambda>s. k \\<tturnstile> wp do G \\<longrightarrow> body od (\\<lambda>s. 1)\"\n       and k0: \"0 \\<le> k\" and k1: \"k \\<le> 1\""], ["proof (state)\nthis:\n  \\<lambda>s.\n     k \\<tturnstile> wp (\\<mu>x.\n                            body ;;\n                            x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                      (\\<lambda>s. 1)\n  0 \\<le> k\n  k \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "from k1"], ["proof (chain)\npicking this:\n  k \\<le> 1", "have nz1k: \"0 \\<le> 1 - k\""], ["proof (prove)\nusing this:\n  k \\<le> 1\n\ngoal (1 subgoal):\n 1. 0 \\<le> 1 - k", "by(auto)"], ["proof (state)\nthis:\n  0 \\<le> 1 - k\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "with p1"], ["proof (chain)\npicking this:\n  p \\<le> 1\n  0 \\<le> 1 - k", "have \"p * (1-k) + k \\<le> 1 * (1-k) + k\""], ["proof (prove)\nusing this:\n  p \\<le> 1\n  0 \\<le> 1 - k\n\ngoal (1 subgoal):\n 1. p * (1 - k) + k \\<le> 1 * (1 - k) + k", "by(blast intro:mult_right_mono add_mono)"], ["proof (state)\nthis:\n  p * (1 - k) + k \\<le> 1 * (1 - k) + k\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "hence \"p * (1 - k) + k \\<le> 1\""], ["proof (prove)\nusing this:\n  p * (1 - k) + k \\<le> 1 * (1 - k) + k\n\ngoal (1 subgoal):\n 1. p * (1 - k) + k \\<le> 1", "by(simp)"], ["proof (state)\nthis:\n  p * (1 - k) + k \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "txt \\<open>The new bound is @{term \"p * (1-k) + k\"}.\\<close>"], ["proof (state)\nthis:\n  p * (1 - k) + k \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "hence \"p * (1-k) + k \\<le> \\<guillemotleft>\\<N> G\\<guillemotright> s + \\<guillemotleft>G\\<guillemotright> s * (p * (1-k) + k)\""], ["proof (prove)\nusing this:\n  p * (1 - k) + k \\<le> 1\n\ngoal (1 subgoal):\n 1. p * (1 - k) + k\n    \\<le> \\<guillemotleft> \\<N> G \\<guillemotright> s +\n          \\<guillemotleft> G \\<guillemotright> s * (p * (1 - k) + k)", "by(cases \"G s\", simp_all)"], ["proof (state)\nthis:\n  p * (1 - k) + k\n  \\<le> \\<guillemotleft> \\<N> G \\<guillemotright> s +\n        \\<guillemotleft> G \\<guillemotright> s * (p * (1 - k) + k)\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "txt \\<open>By the one-step termination assumption:\\<close>"], ["proof (state)\nthis:\n  p * (1 - k) + k\n  \\<le> \\<guillemotleft> \\<N> G \\<guillemotright> s +\n        \\<guillemotleft> G \\<guillemotright> s * (p * (1 - k) + k)\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "also"], ["proof (state)\nthis:\n  p * (1 - k) + k\n  \\<le> \\<guillemotleft> \\<N> G \\<guillemotright> s +\n        \\<guillemotleft> G \\<guillemotright> s * (p * (1 - k) + k)\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "from onestep' nz1k"], ["proof (chain)\npicking this:\n  p \\<le> wp body \\<guillemotleft> \\<N> G \\<guillemotright> ?s\n  0 \\<le> 1 - k", "have \"... \\<le> \\<guillemotleft>\\<N> G\\<guillemotright> s + \\<guillemotleft>G\\<guillemotright> s * (wp body \\<guillemotleft>\\<N> G\\<guillemotright> s * (1-k) + k)\""], ["proof (prove)\nusing this:\n  p \\<le> wp body \\<guillemotleft> \\<N> G \\<guillemotright> ?s\n  0 \\<le> 1 - k\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<N> G \\<guillemotright> s +\n    \\<guillemotleft> G \\<guillemotright> s * (p * (1 - k) + k)\n    \\<le> \\<guillemotleft> \\<N> G \\<guillemotright> s +\n          \\<guillemotleft> G \\<guillemotright> s *\n          (wp body \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k) +\n           k)", "by (simp add: mult_right_mono ordered_comm_semiring_class.comm_mult_left_mono)"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s * (p * (1 - k) + k)\n  \\<le> \\<guillemotleft> \\<N> G \\<guillemotright> s +\n        \\<guillemotleft> G \\<guillemotright> s *\n        (wp body \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k) + k)\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "txt \\<open>By scaling:\\<close>"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s * (p * (1 - k) + k)\n  \\<le> \\<guillemotleft> \\<N> G \\<guillemotright> s +\n        \\<guillemotleft> G \\<guillemotright> s *\n        (wp body \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k) + k)\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "also"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s * (p * (1 - k) + k)\n  \\<le> \\<guillemotleft> \\<N> G \\<guillemotright> s +\n        \\<guillemotleft> G \\<guillemotright> s *\n        (wp body \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k) + k)\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "from nz1k"], ["proof (chain)\npicking this:\n  0 \\<le> 1 - k", "have \"... =  \\<guillemotleft>\\<N> G\\<guillemotright> s + \\<guillemotleft>G\\<guillemotright> s * (wp body (\\<lambda>s. \\<guillemotleft>\\<N> G\\<guillemotright> s * (1-k)) s + k)\""], ["proof (prove)\nusing this:\n  0 \\<le> 1 - k\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<N> G \\<guillemotright> s +\n    \\<guillemotleft> G \\<guillemotright> s *\n    (wp body \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k) + k) =\n    \\<guillemotleft> \\<N> G \\<guillemotright> s +\n    \\<guillemotleft> G \\<guillemotright> s *\n    (wp body\n      (\\<lambda>s. \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k))\n      s +\n     k)", "by(simp add:right_scalingD[OF sb])"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  (wp body \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k) + k) =\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  (wp body\n    (\\<lambda>s. \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k)) s +\n   k)\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "txt \\<open>By the maximality (termination) of the loop body:\\<close>"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  (wp body \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k) + k) =\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  (wp body\n    (\\<lambda>s. \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k)) s +\n   k)\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "also"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  (wp body \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k) + k) =\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  (wp body\n    (\\<lambda>s. \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k)) s +\n   k)\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "from mb k0"], ["proof (chain)\npicking this:\n  maximal (wp body)\n  0 \\<le> k", "have \"... =  \\<guillemotleft>\\<N> G\\<guillemotright> s + \\<guillemotleft>G\\<guillemotright> s * (wp body (\\<lambda>s. \\<guillemotleft>\\<N> G\\<guillemotright> s * (1-k)) s + wp body (\\<lambda>s. k) s)\""], ["proof (prove)\nusing this:\n  maximal (wp body)\n  0 \\<le> k\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<N> G \\<guillemotright> s +\n    \\<guillemotleft> G \\<guillemotright> s *\n    (wp body\n      (\\<lambda>s. \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k))\n      s +\n     k) =\n    \\<guillemotleft> \\<N> G \\<guillemotright> s +\n    \\<guillemotleft> G \\<guillemotright> s *\n    (wp body\n      (\\<lambda>s. \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k))\n      s +\n     wp body (\\<lambda>s. k) s)", "by(simp add:maximalD)"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  (wp body\n    (\\<lambda>s. \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k)) s +\n   k) =\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  (wp body\n    (\\<lambda>s. \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k)) s +\n   wp body (\\<lambda>s. k) s)\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "txt \\<open>By sub-additivity of the loop body:\\<close>"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  (wp body\n    (\\<lambda>s. \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k)) s +\n   k) =\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  (wp body\n    (\\<lambda>s. \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k)) s +\n   wp body (\\<lambda>s. k) s)\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "also"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  (wp body\n    (\\<lambda>s. \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k)) s +\n   k) =\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  (wp body\n    (\\<lambda>s. \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k)) s +\n   wp body (\\<lambda>s. k) s)\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "from k0 nz1k"], ["proof (chain)\npicking this:\n  0 \\<le> k\n  0 \\<le> 1 - k", "have \"... \\<le> \\<guillemotleft>\\<N> G\\<guillemotright> s + \\<guillemotleft>G\\<guillemotright> s * (wp body (\\<lambda>s. \\<guillemotleft>\\<N> G\\<guillemotright> s * (1-k) + k) s)\""], ["proof (prove)\nusing this:\n  0 \\<le> k\n  0 \\<le> 1 - k\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<N> G \\<guillemotright> s +\n    \\<guillemotleft> G \\<guillemotright> s *\n    (wp body\n      (\\<lambda>s. \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k))\n      s +\n     wp body (\\<lambda>s. k) s)\n    \\<le> \\<guillemotleft> \\<N> G \\<guillemotright> s +\n          \\<guillemotleft> G \\<guillemotright> s *\n          wp body\n           (\\<lambda>s.\n               \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k) + k)\n           s", "by(auto intro!:add_left_mono mult_left_mono sub_addD[OF sab] sound_intros)"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  (wp body\n    (\\<lambda>s. \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k)) s +\n   wp body (\\<lambda>s. k) s)\n  \\<le> \\<guillemotleft> \\<N> G \\<guillemotright> s +\n        \\<guillemotleft> G \\<guillemotright> s *\n        wp body\n         (\\<lambda>s.\n             \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k) + k)\n         s\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "also"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  (wp body\n    (\\<lambda>s. \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k)) s +\n   wp body (\\<lambda>s. k) s)\n  \\<le> \\<guillemotleft> \\<N> G \\<guillemotright> s +\n        \\<guillemotleft> G \\<guillemotright> s *\n        wp body\n         (\\<lambda>s.\n             \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k) + k)\n         s\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "have \"... = \\<guillemotleft>\\<N> G\\<guillemotright> s + \\<guillemotleft>G\\<guillemotright> s * (wp body (\\<lambda>s. \\<guillemotleft>\\<N> G\\<guillemotright> s + \\<guillemotleft>G\\<guillemotright> s * k) s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<N> G \\<guillemotright> s +\n    \\<guillemotleft> G \\<guillemotright> s *\n    wp body\n     (\\<lambda>s. \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k) + k)\n     s =\n    \\<guillemotleft> \\<N> G \\<guillemotright> s +\n    \\<guillemotleft> G \\<guillemotright> s *\n    wp body\n     (\\<lambda>s.\n         \\<guillemotleft> \\<N> G \\<guillemotright> s +\n         \\<guillemotleft> G \\<guillemotright> s * k)\n     s", "by(simp add:negate_embed algebra_simps)"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  wp body\n   (\\<lambda>s. \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k) + k)\n   s =\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  wp body\n   (\\<lambda>s.\n       \\<guillemotleft> \\<N> G \\<guillemotright> s +\n       \\<guillemotleft> G \\<guillemotright> s * k)\n   s\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "txt \\<open>By monotonicity of the loop body, and that @{term k} is a lower bound:\\<close>"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  wp body\n   (\\<lambda>s. \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k) + k)\n   s =\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  wp body\n   (\\<lambda>s.\n       \\<guillemotleft> \\<N> G \\<guillemotright> s +\n       \\<guillemotleft> G \\<guillemotright> s * k)\n   s\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "also"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  wp body\n   (\\<lambda>s. \\<guillemotleft> \\<N> G \\<guillemotright> s * (1 - k) + k)\n   s =\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  wp body\n   (\\<lambda>s.\n       \\<guillemotleft> \\<N> G \\<guillemotright> s +\n       \\<guillemotleft> G \\<guillemotright> s * k)\n   s\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "from k0 hloop le_funD[OF X]"], ["proof (chain)\npicking this:\n  0 \\<le> k\n  healthy\n   (wp (\\<mu>x.\n           body ;;\n           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n  k \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           (\\<lambda>s. 1) ?x", "have \"... \\<le> \\<guillemotleft>\\<N> G\\<guillemotright> s +\n      \\<guillemotleft>G\\<guillemotright> s * (wp body (\\<lambda>s. \\<guillemotleft>\\<N> G\\<guillemotright> s + \\<guillemotleft>G\\<guillemotright> s * wp do G \\<longrightarrow> body od (\\<lambda>s. 1) s) s)\""], ["proof (prove)\nusing this:\n  0 \\<le> k\n  healthy\n   (wp (\\<mu>x.\n           body ;;\n           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n  k \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           (\\<lambda>s. 1) ?x\n\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<N> G \\<guillemotright> s +\n    \\<guillemotleft> G \\<guillemotright> s *\n    wp body\n     (\\<lambda>s.\n         \\<guillemotleft> \\<N> G \\<guillemotright> s +\n         \\<guillemotleft> G \\<guillemotright> s * k)\n     s\n    \\<le> \\<guillemotleft> \\<N> G \\<guillemotright> s +\n          \\<guillemotleft> G \\<guillemotright> s *\n          wp body\n           (\\<lambda>s.\n               \\<guillemotleft> \\<N> G \\<guillemotright> s +\n               \\<guillemotleft> G \\<guillemotright> s *\n               wp (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                (\\<lambda>s. 1) s)\n           s", "by(iprover intro:add_left_mono mult_left_mono le_funI embed_ge_0\n                       le_funD[OF mono_transD, OF healthy_monoD, OF hb]\n                       sound_sum standard_sound sound_intros swp)"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  wp body\n   (\\<lambda>s.\n       \\<guillemotleft> \\<N> G \\<guillemotright> s +\n       \\<guillemotleft> G \\<guillemotright> s * k)\n   s\n  \\<le> \\<guillemotleft> \\<N> G \\<guillemotright> s +\n        \\<guillemotleft> G \\<guillemotright> s *\n        wp body\n         (\\<lambda>s.\n             \\<guillemotleft> \\<N> G \\<guillemotright> s +\n             \\<guillemotleft> G \\<guillemotright> s *\n             wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              (\\<lambda>s. 1) s)\n         s\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "txt \\<open>Unrolling the loop once and simplifying:\\<close>"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  wp body\n   (\\<lambda>s.\n       \\<guillemotleft> \\<N> G \\<guillemotright> s +\n       \\<guillemotleft> G \\<guillemotright> s * k)\n   s\n  \\<le> \\<guillemotleft> \\<N> G \\<guillemotright> s +\n        \\<guillemotleft> G \\<guillemotright> s *\n        wp body\n         (\\<lambda>s.\n             \\<guillemotleft> \\<N> G \\<guillemotright> s +\n             \\<guillemotleft> G \\<guillemotright> s *\n             wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              (\\<lambda>s. 1) s)\n         s\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "also"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  wp body\n   (\\<lambda>s.\n       \\<guillemotleft> \\<N> G \\<guillemotright> s +\n       \\<guillemotleft> G \\<guillemotright> s * k)\n   s\n  \\<le> \\<guillemotleft> \\<N> G \\<guillemotright> s +\n        \\<guillemotleft> G \\<guillemotright> s *\n        wp body\n         (\\<lambda>s.\n             \\<guillemotleft> \\<N> G \\<guillemotright> s +\n             \\<guillemotleft> G \\<guillemotright> s *\n             wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              (\\<lambda>s. 1) s)\n         s\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "{"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  wp body\n   (\\<lambda>s.\n       \\<guillemotleft> \\<N> G \\<guillemotright> s +\n       \\<guillemotleft> G \\<guillemotright> s * k)\n   s\n  \\<le> \\<guillemotleft> \\<N> G \\<guillemotright> s +\n        \\<guillemotleft> G \\<guillemotright> s *\n        wp body\n         (\\<lambda>s.\n             \\<guillemotleft> \\<N> G \\<guillemotright> s +\n             \\<guillemotleft> G \\<guillemotright> s *\n             wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              (\\<lambda>s. 1) s)\n         s\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "have \"\\<And>s. \\<guillemotleft>\\<N> G\\<guillemotright> s + \\<guillemotleft>G\\<guillemotright> s * wp body (wp do G \\<longrightarrow> body od (\\<lambda>s. 1)) s =\n        \\<guillemotleft>\\<N> G\\<guillemotright> s + \\<guillemotleft>G\\<guillemotright> s * (\\<guillemotleft>\\<N> G\\<guillemotright> s + \\<guillemotleft>G\\<guillemotright> s * wp body (wp do G \\<longrightarrow> body od (\\<lambda>s. 1)) s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s.\n       \\<guillemotleft> \\<N> G \\<guillemotright> s +\n       \\<guillemotleft> G \\<guillemotright> s *\n       wp body\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1))\n        s =\n       \\<guillemotleft> \\<N> G \\<guillemotright> s +\n       \\<guillemotleft> G \\<guillemotright> s *\n       (\\<guillemotleft> \\<N> G \\<guillemotright> s +\n        \\<guillemotleft> G \\<guillemotright> s *\n        wp body\n         (wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           (\\<lambda>s. 1))\n         s)", "by(simp only:distrib_left mult.assoc[symmetric] embed_bool_idem embed_bool_cancel)"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> ?s +\n  \\<guillemotleft> G \\<guillemotright> ?s *\n  wp body\n   (wp (\\<mu>x.\n           body ;;\n           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n     (\\<lambda>s. 1))\n   ?s =\n  \\<guillemotleft> \\<N> G \\<guillemotright> ?s +\n  \\<guillemotleft> G \\<guillemotright> ?s *\n  (\\<guillemotleft> \\<N> G \\<guillemotright> ?s +\n   \\<guillemotleft> G \\<guillemotright> ?s *\n   wp body\n    (wp (\\<mu>x.\n            body ;;\n            x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n      (\\<lambda>s. 1))\n    ?s)\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "also"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> ?s +\n  \\<guillemotleft> G \\<guillemotright> ?s *\n  wp body\n   (wp (\\<mu>x.\n           body ;;\n           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n     (\\<lambda>s. 1))\n   ?s =\n  \\<guillemotleft> \\<N> G \\<guillemotright> ?s +\n  \\<guillemotleft> G \\<guillemotright> ?s *\n  (\\<guillemotleft> \\<N> G \\<guillemotright> ?s +\n   \\<guillemotleft> G \\<guillemotright> ?s *\n   wp body\n    (wp (\\<mu>x.\n            body ;;\n            x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n      (\\<lambda>s. 1))\n    ?s)\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "have \"\\<And>s. ... s = \\<guillemotleft>\\<N> G\\<guillemotright> s + \\<guillemotleft>G\\<guillemotright> s * wp do G \\<longrightarrow> body od (\\<lambda>s. 1) s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s.\n       \\<guillemotleft> \\<N> G \\<guillemotright> s +\n       \\<guillemotleft> G \\<guillemotright> s *\n       (\\<guillemotleft> \\<N> G \\<guillemotright> s +\n        \\<guillemotleft> G \\<guillemotright> s *\n        wp body\n         (wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           (\\<lambda>s. 1))\n         s) =\n       \\<guillemotleft> \\<N> G \\<guillemotright> s +\n       \\<guillemotleft> G \\<guillemotright> s *\n       wp (\\<mu>x.\n              body ;;\n              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n        (\\<lambda>s. 1) s", "by(simp add:fun_cong[OF wp_loop_unfold[symmetric, where P=\"\\<lambda>s. 1\", simplified, OF hb]])"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> ?s +\n  \\<guillemotleft> G \\<guillemotright> ?s *\n  (\\<guillemotleft> \\<N> G \\<guillemotright> ?s +\n   \\<guillemotleft> G \\<guillemotright> ?s *\n   wp body\n    (wp (\\<mu>x.\n            body ;;\n            x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n      (\\<lambda>s. 1))\n    ?s) =\n  \\<guillemotleft> \\<N> G \\<guillemotright> ?s +\n  \\<guillemotleft> G \\<guillemotright> ?s *\n  wp (\\<mu>x.\n         body ;;\n         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n   (\\<lambda>s. 1) ?s\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "finally"], ["proof (chain)\npicking this:\n  \\<guillemotleft> \\<N> G \\<guillemotright> ?s1 +\n  \\<guillemotleft> G \\<guillemotright> ?s1 *\n  wp body\n   (wp (\\<mu>x.\n           body ;;\n           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n     (\\<lambda>s. 1))\n   ?s1 =\n  \\<guillemotleft> \\<N> G \\<guillemotright> ?s1 +\n  \\<guillemotleft> G \\<guillemotright> ?s1 *\n  wp (\\<mu>x.\n         body ;;\n         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n   (\\<lambda>s. 1) ?s1", "have X: \"\\<And>s. \\<guillemotleft>\\<N> G\\<guillemotright> s + \\<guillemotleft>G\\<guillemotright> s * wp body (wp do G \\<longrightarrow> body od (\\<lambda>s. 1)) s =\n        \\<guillemotleft>\\<N> G\\<guillemotright> s + \\<guillemotleft>G\\<guillemotright> s * wp do G \\<longrightarrow> body od (\\<lambda>s. 1) s\""], ["proof (prove)\nusing this:\n  \\<guillemotleft> \\<N> G \\<guillemotright> ?s1 +\n  \\<guillemotleft> G \\<guillemotright> ?s1 *\n  wp body\n   (wp (\\<mu>x.\n           body ;;\n           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n     (\\<lambda>s. 1))\n   ?s1 =\n  \\<guillemotleft> \\<N> G \\<guillemotright> ?s1 +\n  \\<guillemotleft> G \\<guillemotright> ?s1 *\n  wp (\\<mu>x.\n         body ;;\n         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n   (\\<lambda>s. 1) ?s1\n\ngoal (1 subgoal):\n 1. \\<And>s.\n       \\<guillemotleft> \\<N> G \\<guillemotright> s +\n       \\<guillemotleft> G \\<guillemotright> s *\n       wp body\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1))\n        s =\n       \\<guillemotleft> \\<N> G \\<guillemotright> s +\n       \\<guillemotleft> G \\<guillemotright> s *\n       wp (\\<mu>x.\n              body ;;\n              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n        (\\<lambda>s. 1) s", "."], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> ?s +\n  \\<guillemotleft> G \\<guillemotright> ?s *\n  wp body\n   (wp (\\<mu>x.\n           body ;;\n           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n     (\\<lambda>s. 1))\n   ?s =\n  \\<guillemotleft> \\<N> G \\<guillemotright> ?s +\n  \\<guillemotleft> G \\<guillemotright> ?s *\n  wp (\\<mu>x.\n         body ;;\n         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n   (\\<lambda>s. 1) ?s\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "have \"\\<guillemotleft>\\<N> G\\<guillemotright> s + \\<guillemotleft>G\\<guillemotright> s * (wp body (\\<lambda>s. \\<guillemotleft>\\<N> G\\<guillemotright> s + \\<guillemotleft>G\\<guillemotright> s *\n              wp do G \\<longrightarrow> body od (\\<lambda>s. 1) s) s) =\n            \\<guillemotleft>\\<N> G\\<guillemotright> s + \\<guillemotleft>G\\<guillemotright> s * (wp body (\\<lambda>s. \\<guillemotleft>\\<N> G\\<guillemotright> s + \\<guillemotleft>G\\<guillemotright> s *\n              wp body (wp do G \\<longrightarrow> body od (\\<lambda>s. 1)) s) s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<N> G \\<guillemotright> s +\n    \\<guillemotleft> G \\<guillemotright> s *\n    wp body\n     (\\<lambda>s.\n         \\<guillemotleft> \\<N> G \\<guillemotright> s +\n         \\<guillemotleft> G \\<guillemotright> s *\n         wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1) s)\n     s =\n    \\<guillemotleft> \\<N> G \\<guillemotright> s +\n    \\<guillemotleft> G \\<guillemotright> s *\n    wp body\n     (\\<lambda>s.\n         \\<guillemotleft> \\<N> G \\<guillemotright> s +\n         \\<guillemotleft> G \\<guillemotright> s *\n         wp body\n          (wp (\\<mu>x.\n                  body ;;\n                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n            (\\<lambda>s. 1))\n          s)\n     s", "by(simp only:X)"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  wp body\n   (\\<lambda>s.\n       \\<guillemotleft> \\<N> G \\<guillemotright> s +\n       \\<guillemotleft> G \\<guillemotright> s *\n       wp (\\<mu>x.\n              body ;;\n              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n        (\\<lambda>s. 1) s)\n   s =\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  wp body\n   (\\<lambda>s.\n       \\<guillemotleft> \\<N> G \\<guillemotright> s +\n       \\<guillemotleft> G \\<guillemotright> s *\n       wp body\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1))\n        s)\n   s\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "}"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  wp body\n   (\\<lambda>s.\n       \\<guillemotleft> \\<N> G \\<guillemotright> s +\n       \\<guillemotleft> G \\<guillemotright> s *\n       wp (\\<mu>x.\n              body ;;\n              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n        (\\<lambda>s. 1) s)\n   s =\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  wp body\n   (\\<lambda>s.\n       \\<guillemotleft> \\<N> G \\<guillemotright> s +\n       \\<guillemotleft> G \\<guillemotright> s *\n       wp body\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1))\n        s)\n   s\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "txt \\<open>Lastly, by folding two loop iterations:\\<close>"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  wp body\n   (\\<lambda>s.\n       \\<guillemotleft> \\<N> G \\<guillemotright> s +\n       \\<guillemotleft> G \\<guillemotright> s *\n       wp (\\<mu>x.\n              body ;;\n              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n        (\\<lambda>s. 1) s)\n   s =\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  wp body\n   (\\<lambda>s.\n       \\<guillemotleft> \\<N> G \\<guillemotright> s +\n       \\<guillemotleft> G \\<guillemotright> s *\n       wp body\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1))\n        s)\n   s\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "also"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  wp body\n   (\\<lambda>s.\n       \\<guillemotleft> \\<N> G \\<guillemotright> s +\n       \\<guillemotleft> G \\<guillemotright> s *\n       wp (\\<mu>x.\n              body ;;\n              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n        (\\<lambda>s. 1) s)\n   s =\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  wp body\n   (\\<lambda>s.\n       \\<guillemotleft> \\<N> G \\<guillemotright> s +\n       \\<guillemotleft> G \\<guillemotright> s *\n       wp body\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1))\n        s)\n   s\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "have \"\\<guillemotleft>\\<N> G\\<guillemotright> s + \\<guillemotleft>G\\<guillemotright> s * (wp body (\\<lambda>s. \\<guillemotleft>\\<N> G\\<guillemotright> s + \\<guillemotleft>G\\<guillemotright> s *\n            wp body (wp do G \\<longrightarrow> body od (\\<lambda>s. 1)) s) s) =\n          wp do G \\<longrightarrow> body od (\\<lambda>s. 1) s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<guillemotleft> \\<N> G \\<guillemotright> s +\n    \\<guillemotleft> G \\<guillemotright> s *\n    wp body\n     (\\<lambda>s.\n         \\<guillemotleft> \\<N> G \\<guillemotright> s +\n         \\<guillemotleft> G \\<guillemotright> s *\n         wp body\n          (wp (\\<mu>x.\n                  body ;;\n                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n            (\\<lambda>s. 1))\n          s)\n     s =\n    wp (\\<mu>x.\n           body ;;\n           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n     (\\<lambda>s. 1) s", "by(simp add:wp_loop_unfold[OF _ hb, where P=\"\\<lambda>s. 1\", simplified, symmetric]\n                  fun_cong[OF wp_loop_unfold[OF _ hb, where P=\"\\<lambda>s. 1\", simplified, symmetric]])"], ["proof (state)\nthis:\n  \\<guillemotleft> \\<N> G \\<guillemotright> s +\n  \\<guillemotleft> G \\<guillemotright> s *\n  wp body\n   (\\<lambda>s.\n       \\<guillemotleft> \\<N> G \\<guillemotright> s +\n       \\<guillemotleft> G \\<guillemotright> s *\n       wp body\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1))\n        s)\n   s =\n  wp (\\<mu>x.\n         body ;;\n         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n   (\\<lambda>s. 1) s\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>0 \\<le> k; k \\<le> 1;\n        \\<lambda>s.\n           k \\<tturnstile> wp (\\<mu>x.\n                                  body ;;\n                                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                            (\\<lambda>s. 1)\\<rbrakk>\n       \\<Longrightarrow> p * (1 - k) + k\n                         \\<le> wp (\\<mu>x.\nbody ;; x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                (\\<lambda>s. 1) x", "finally"], ["proof (chain)\npicking this:\n  p * (1 - k) + k\n  \\<le> wp (\\<mu>x.\n               body ;;\n               x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n         (\\<lambda>s. 1) s", "show \"p * (1-k) + k \\<le> wp do G \\<longrightarrow> body od (\\<lambda>s. 1) s\""], ["proof (prove)\nusing this:\n  p * (1 - k) + k\n  \\<le> wp (\\<mu>x.\n               body ;;\n               x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n         (\\<lambda>s. 1) s\n\ngoal (1 subgoal):\n 1. p * (1 - k) + k\n    \\<le> wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           (\\<lambda>s. 1) s", "."], ["proof (state)\nthis:\n  p * (1 - k) + k\n  \\<le> wp (\\<mu>x.\n               body ;;\n               x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n         (\\<lambda>s. 1) s\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>0 \\<le> ?k; ?k \\<le> 1;\n   \\<lambda>s.\n      ?k \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)\\<rbrakk>\n  \\<Longrightarrow> \\<lambda>s.\n                       p * (1 - ?k) +\n                       ?k \\<tturnstile> wp\n   (\\<mu>x.\n       body ;;\n       x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n   (\\<lambda>s. 1)\n\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "txt \\<open>If the previous bound lay in $[0,1)$, the new bound is strictly greater.  This is where\n    we appeal to the fact that @{term p} is nonzero.\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>0 \\<le> ?k; ?k \\<le> 1;\n   \\<lambda>s.\n      ?k \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)\\<rbrakk>\n  \\<Longrightarrow> \\<lambda>s.\n                       p * (1 - ?k) +\n                       ?k \\<tturnstile> wp\n   (\\<mu>x.\n       body ;;\n       x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n   (\\<lambda>s. 1)\n\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "from nzp"], ["proof (chain)\npicking this:\n  0 < p", "have inc: \"\\<And>k. 0 \\<le> k \\<Longrightarrow> k < 1 \\<Longrightarrow> k < p * (1 - k) + k\""], ["proof (prove)\nusing this:\n  0 < p\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>0 \\<le> k; k < 1\\<rbrakk>\n       \\<Longrightarrow> k < p * (1 - k) + k", "by(auto intro:mult_pos_pos)"], ["proof (state)\nthis:\n  \\<lbrakk>0 \\<le> ?k; ?k < 1\\<rbrakk>\n  \\<Longrightarrow> ?k < p * (1 - ?k) + ?k\n\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "txt \\<open>The result follows by contradiction.\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>0 \\<le> ?k; ?k < 1\\<rbrakk>\n  \\<Longrightarrow> ?k < p * (1 - ?k) + ?k\n\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       1 \\<tturnstile> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1)", "proof(rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "txt \\<open>If the loop does not terminate everywhere, then there must exist some state\n      from which the probability of termination is strictly less than one.\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "assume \"\\<not> ?thesis\""], ["proof (state)\nthis:\n  \\<not> \\<lambda>s.\n            1 \\<tturnstile> wp (\\<mu>x.\n                                   body ;;\n                                   x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                             (\\<lambda>s. 1)\n\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "hence \"\\<not> (\\<forall>s. 1 \\<le> wp do G \\<longrightarrow> body od (\\<lambda>s. 1) s)\""], ["proof (prove)\nusing this:\n  \\<not> \\<lambda>s.\n            1 \\<tturnstile> wp (\\<mu>x.\n                                   body ;;\n                                   x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                             (\\<lambda>s. 1)\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>s.\n               1 \\<le> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1) s)", "by(auto)"], ["proof (state)\nthis:\n  \\<not> (\\<forall>s.\n             1 \\<le> wp (\\<mu>x.\n                            body ;;\n                            x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                      (\\<lambda>s. 1) s)\n\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  \\<not> (\\<forall>s.\n             1 \\<le> wp (\\<mu>x.\n                            body ;;\n                            x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                      (\\<lambda>s. 1) s)", "obtain s where point: \"\\<not> 1 \\<le> wp do G \\<longrightarrow> body od (\\<lambda>s. 1) s\""], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>s.\n             1 \\<le> wp (\\<mu>x.\n                            body ;;\n                            x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                      (\\<lambda>s. 1) s)\n\ngoal (1 subgoal):\n 1. (\\<And>s.\n        \\<not> 1 \\<le> wp (\\<mu>x.\n                              body ;;\n                              x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                        (\\<lambda>s. 1) s \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by(auto)"], ["proof (state)\nthis:\n  \\<not> 1 \\<le> wp (\\<mu>x.\n                        body ;;\n                        x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                  (\\<lambda>s. 1) s\n\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "let ?k = \"Inf (range (wp do G \\<longrightarrow> body od (\\<lambda>s. 1)))\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "from hloop"], ["proof (chain)\npicking this:\n  healthy\n   (wp (\\<mu>x.\n           body ;;\n           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))", "have Inflb: \"\\<And>s. ?k \\<le> wp do G \\<longrightarrow> body od (\\<lambda>s. 1) s\""], ["proof (prove)\nusing this:\n  healthy\n   (wp (\\<mu>x.\n           body ;;\n           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n\ngoal (1 subgoal):\n 1. \\<And>s.\n       Inf (range\n             (wp (\\<mu>x.\n                     body ;;\n                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n               (\\<lambda>s. 1)))\n       \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              (\\<lambda>s. 1) s", "by(intro cInf_lower bdd_belowI, auto)"], ["proof (state)\nthis:\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  \\<le> wp (\\<mu>x.\n               body ;;\n               x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n         (\\<lambda>s. 1) ?s\n\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  \\<le> wp (\\<mu>x.\n               body ;;\n               x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n         (\\<lambda>s. 1) ?s\n\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "from point"], ["proof (chain)\npicking this:\n  \\<not> 1 \\<le> wp (\\<mu>x.\n                        body ;;\n                        x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                  (\\<lambda>s. 1) s", "have \"wp do G \\<longrightarrow> body od (\\<lambda>s. 1) s < 1\""], ["proof (prove)\nusing this:\n  \\<not> 1 \\<le> wp (\\<mu>x.\n                        body ;;\n                        x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                  (\\<lambda>s. 1) s\n\ngoal (1 subgoal):\n 1. wp (\\<mu>x.\n           body ;;\n           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n     (\\<lambda>s. 1) s\n    < 1", "by(auto)"], ["proof (state)\nthis:\n  wp (\\<mu>x.\n         body ;;\n         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n   (\\<lambda>s. 1) s\n  < 1\n\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "txt \\<open>Thus the least (infimum) probabilty of termination is strictly less than one.\\<close>"], ["proof (state)\nthis:\n  wp (\\<mu>x.\n         body ;;\n         x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n   (\\<lambda>s. 1) s\n  < 1\n\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "finally"], ["proof (chain)\npicking this:\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  < 1", "have k1: \"?k < 1\""], ["proof (prove)\nusing this:\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  < 1\n\ngoal (1 subgoal):\n 1. Inf (range\n          (wp (\\<mu>x.\n                  body ;;\n                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n            (\\<lambda>s. 1)))\n    < 1", "."], ["proof (state)\nthis:\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  < 1\n\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "hence \"?k \\<le> 1\""], ["proof (prove)\nusing this:\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  < 1\n\ngoal (1 subgoal):\n 1. Inf (range\n          (wp (\\<mu>x.\n                  body ;;\n                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n            (\\<lambda>s. 1)))\n    \\<le> 1", "by(auto)"], ["proof (state)\nthis:\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "moreover"], ["proof (state)\nthis:\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "from hloop"], ["proof (chain)\npicking this:\n  healthy\n   (wp (\\<mu>x.\n           body ;;\n           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))", "have k0: \"0 \\<le> ?k\""], ["proof (prove)\nusing this:\n  healthy\n   (wp (\\<mu>x.\n           body ;;\n           x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip))\n\ngoal (1 subgoal):\n 1. 0 \\<le> Inf (range\n                  (wp (\\<mu>x.\n                          body ;;\n                          x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                    (\\<lambda>s. 1)))", "by(intro cInf_greatest, auto)"], ["proof (state)\nthis:\n  0 \\<le> Inf (range\n                (wp (\\<mu>x.\n                        body ;;\n                        x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                  (\\<lambda>s. 1)))\n\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "txt \\<open>The infimum is, naturally, a lower bound.\\<close>"], ["proof (state)\nthis:\n  0 \\<le> Inf (range\n                (wp (\\<mu>x.\n                        body ;;\n                        x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                  (\\<lambda>s. 1)))\n\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "moreover"], ["proof (state)\nthis:\n  0 \\<le> Inf (range\n                (wp (\\<mu>x.\n                        body ;;\n                        x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                  (\\<lambda>s. 1)))\n\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "from Inflb"], ["proof (chain)\npicking this:\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  \\<le> wp (\\<mu>x.\n               body ;;\n               x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n         (\\<lambda>s. 1) ?s", "have \"(\\<lambda>s. ?k) \\<tturnstile> wp do G \\<longrightarrow> body od (\\<lambda>s. 1)\""], ["proof (prove)\nusing this:\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  \\<le> wp (\\<mu>x.\n               body ;;\n               x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n         (\\<lambda>s. 1) ?s\n\ngoal (1 subgoal):\n 1. \\<lambda>s.\n       Inf (range\n             (wp (\\<mu>x.\n                     body ;;\n                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n               (\\<lambda>s.\n                   1))) \\<tturnstile> wp\n (\\<mu>x.\n     body ;;\n     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n (\\<lambda>s. 1)", "by(auto)"], ["proof (state)\nthis:\n  \\<lambda>s.\n     Inf (range\n           (wp (\\<mu>x.\n                   body ;;\n                   x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n             (\\<lambda>s.\n                 1))) \\<tturnstile> wp (\\<mu>x.\n     body ;;\n     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                     (\\<lambda>s. 1)\n\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "ultimately"], ["proof (chain)\npicking this:\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  \\<le> 1\n  0 \\<le> Inf (range\n                (wp (\\<mu>x.\n                        body ;;\n                        x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                  (\\<lambda>s. 1)))\n  \\<lambda>s.\n     Inf (range\n           (wp (\\<mu>x.\n                   body ;;\n                   x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n             (\\<lambda>s.\n                 1))) \\<tturnstile> wp (\\<mu>x.\n     body ;;\n     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                     (\\<lambda>s. 1)", "txt \\<open>We can therefore use the previous result to find a new bound, \\ldots\\<close>"], ["proof (chain)\npicking this:\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  \\<le> 1\n  0 \\<le> Inf (range\n                (wp (\\<mu>x.\n                        body ;;\n                        x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                  (\\<lambda>s. 1)))\n  \\<lambda>s.\n     Inf (range\n           (wp (\\<mu>x.\n                   body ;;\n                   x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n             (\\<lambda>s.\n                 1))) \\<tturnstile> wp (\\<mu>x.\n     body ;;\n     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                     (\\<lambda>s. 1)", "have \"\\<And>s. p * (1 - ?k) + ?k \\<le> wp do G \\<longrightarrow> body od (\\<lambda>s. 1) s\""], ["proof (prove)\nusing this:\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  \\<le> 1\n  0 \\<le> Inf (range\n                (wp (\\<mu>x.\n                        body ;;\n                        x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                  (\\<lambda>s. 1)))\n  \\<lambda>s.\n     Inf (range\n           (wp (\\<mu>x.\n                   body ;;\n                   x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n             (\\<lambda>s.\n                 1))) \\<tturnstile> wp (\\<mu>x.\n     body ;;\n     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                                     (\\<lambda>s. 1)\n\ngoal (1 subgoal):\n 1. \\<And>s.\n       p *\n       (1 -\n        Inf (range\n              (wp (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                (\\<lambda>s. 1)))) +\n       Inf (range\n             (wp (\\<mu>x.\n                     body ;;\n                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n               (\\<lambda>s. 1)))\n       \\<le> wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              (\\<lambda>s. 1) s", "by(blast intro:le_funD[OF new_bound])"], ["proof (state)\nthis:\n  p *\n  (1 -\n   Inf (range\n         (wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           (\\<lambda>s. 1)))) +\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  \\<le> wp (\\<mu>x.\n               body ;;\n               x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n         (\\<lambda>s. 1) ?s\n\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "txt \\<open>\\ldots which is lower than the infimum, by minimality, \\ldots\\<close>"], ["proof (state)\nthis:\n  p *\n  (1 -\n   Inf (range\n         (wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           (\\<lambda>s. 1)))) +\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  \\<le> wp (\\<mu>x.\n               body ;;\n               x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n         (\\<lambda>s. 1) ?s\n\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "hence \"p * (1 - ?k) + ?k \\<le> ?k\""], ["proof (prove)\nusing this:\n  p *\n  (1 -\n   Inf (range\n         (wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           (\\<lambda>s. 1)))) +\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  \\<le> wp (\\<mu>x.\n               body ;;\n               x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n         (\\<lambda>s. 1) ?s\n\ngoal (1 subgoal):\n 1. p *\n    (1 -\n     Inf (range\n           (wp (\\<mu>x.\n                   body ;;\n                   x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n             (\\<lambda>s. 1)))) +\n    Inf (range\n          (wp (\\<mu>x.\n                  body ;;\n                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n            (\\<lambda>s. 1)))\n    \\<le> Inf (range\n                (wp (\\<mu>x.\n                        body ;;\n                        x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                  (\\<lambda>s. 1)))", "by(blast intro:cInf_greatest)"], ["proof (state)\nthis:\n  p *\n  (1 -\n   Inf (range\n         (wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           (\\<lambda>s. 1)))) +\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  \\<le> Inf (range\n              (wp (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                (\\<lambda>s. 1)))\n\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "txt \\<open>\\ldots yet also strictly greater than it.\\<close>"], ["proof (state)\nthis:\n  p *\n  (1 -\n   Inf (range\n         (wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           (\\<lambda>s. 1)))) +\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  \\<le> Inf (range\n              (wp (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                (\\<lambda>s. 1)))\n\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "moreover"], ["proof (state)\nthis:\n  p *\n  (1 -\n   Inf (range\n         (wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           (\\<lambda>s. 1)))) +\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  \\<le> Inf (range\n              (wp (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                (\\<lambda>s. 1)))\n\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "from k0 k1"], ["proof (chain)\npicking this:\n  0 \\<le> Inf (range\n                (wp (\\<mu>x.\n                        body ;;\n                        x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                  (\\<lambda>s. 1)))\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  < 1", "have \"?k < p * (1 - ?k) + ?k\""], ["proof (prove)\nusing this:\n  0 \\<le> Inf (range\n                (wp (\\<mu>x.\n                        body ;;\n                        x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                  (\\<lambda>s. 1)))\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  < 1\n\ngoal (1 subgoal):\n 1. Inf (range\n          (wp (\\<mu>x.\n                  body ;;\n                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n            (\\<lambda>s. 1)))\n    < p *\n      (1 -\n       Inf (range\n             (wp (\\<mu>x.\n                     body ;;\n                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n               (\\<lambda>s. 1)))) +\n      Inf (range\n            (wp (\\<mu>x.\n                    body ;;\n                    x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n              (\\<lambda>s. 1)))", "by(rule inc)"], ["proof (state)\nthis:\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  < p *\n    (1 -\n     Inf (range\n           (wp (\\<mu>x.\n                   body ;;\n                   x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n             (\\<lambda>s. 1)))) +\n    Inf (range\n          (wp (\\<mu>x.\n                  body ;;\n                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n            (\\<lambda>s. 1)))\n\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "txt \\<open>We thus have a contradiction.\\<close>"], ["proof (state)\nthis:\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  < p *\n    (1 -\n     Inf (range\n           (wp (\\<mu>x.\n                   body ;;\n                   x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n             (\\<lambda>s. 1)))) +\n    Inf (range\n          (wp (\\<mu>x.\n                  body ;;\n                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n            (\\<lambda>s. 1)))\n\ngoal (1 subgoal):\n 1. \\<not> \\<lambda>s.\n              1 \\<tturnstile> wp (\\<mu>x.\n                                     body ;;\n                                     x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                               (\\<lambda>s. 1) \\<Longrightarrow>\n    False", "ultimately"], ["proof (chain)\npicking this:\n  p *\n  (1 -\n   Inf (range\n         (wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           (\\<lambda>s. 1)))) +\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  \\<le> Inf (range\n              (wp (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                (\\<lambda>s. 1)))\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  < p *\n    (1 -\n     Inf (range\n           (wp (\\<mu>x.\n                   body ;;\n                   x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n             (\\<lambda>s. 1)))) +\n    Inf (range\n          (wp (\\<mu>x.\n                  body ;;\n                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n            (\\<lambda>s. 1)))", "show False"], ["proof (prove)\nusing this:\n  p *\n  (1 -\n   Inf (range\n         (wp (\\<mu>x.\n                 body ;;\n                 x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n           (\\<lambda>s. 1)))) +\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  \\<le> Inf (range\n              (wp (\\<mu>x.\n                      body ;;\n                      x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                (\\<lambda>s. 1)))\n  Inf (range\n        (wp (\\<mu>x.\n                body ;;\n                x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n          (\\<lambda>s. 1)))\n  < p *\n    (1 -\n     Inf (range\n           (wp (\\<mu>x.\n                   body ;;\n                   x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n             (\\<lambda>s. 1)))) +\n    Inf (range\n          (wp (\\<mu>x.\n                  body ;;\n                  x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n            (\\<lambda>s. 1)))\n\ngoal (1 subgoal):\n 1. False", "by(simp)"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lambda>s.\n     1 \\<tturnstile> wp (\\<mu>x.\n                            body ;;\n                            x \\<^bsub>\\<guillemotleft> G \\<guillemotright>\\<^esub>\\<oplus> Skip)\n                      (\\<lambda>s. 1)\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}