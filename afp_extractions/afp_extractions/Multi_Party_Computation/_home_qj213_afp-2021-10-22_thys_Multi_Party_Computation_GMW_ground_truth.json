{"file_name": "/home/qj213/afp-2021-10-22/thys/Multi_Party_Computation/GMW.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Multi_Party_Computation", "problem_names": ["lemma  funct_14: \"funct_OT_14 (m00,m01,m10,m11) (c0,c1) \n                      = return_spmf ((),if c0 then (if c1 then m11 else m10) else (if c1 then m01 else m00))\"", "lemma inf_th_14_OT_P4: \"R2_14_OT msgs C = (funct_OT_14 msgs C \\<bind> (\\<lambda> (s1, s2). S2_14_OT C s2))\"", "lemma ass_adv_14_OT: \"\\<bar>spmf (bind_spmf (S1_14_OT msgs ()) (\\<lambda> view. (D view))) True - \n                    spmf (bind_spmf (R1_14_OT msgs (c0,c1)) (\\<lambda> view. (D view))) True \\<bar> \\<le> adv_14_OT\"\n  (is \"?lhs \\<le> adv_14_OT\")", "lemma lossless_share [simp]: \"lossless_spmf (share x)\"", "lemma lossless_reconstruct [simp]: \"lossless_spmf (reconstruct s)\"", "lemma reconstruct_share : \"(bind_spmf (share x) reconstruct) = (return_spmf x)\"", "lemma \"(reconstruct (s1,s2) \\<bind> (\\<lambda> rec. share rec \\<bind> (\\<lambda> shares. reconstruct shares))) = return_spmf (s1 \\<oplus> s2)\"", "lemma lossless_xor_funct: \"lossless_spmf (xor_funct A B)\"", "lemma lossless_xor_protocol: \"lossless_spmf (xor_protocol A B)\"", "lemma share_xor_reconstruct: \n  shows \"share x \\<bind> (\\<lambda> w1. share y \\<bind> (\\<lambda> w2. xor_protocol w1 w2 \n              \\<bind> (\\<lambda> (a, b). reconstruct (a, b)))) = xor_evaluate x y\"", "lemma lossless_R1_xor: \"lossless_spmf (R1_xor A B)\"", "lemma lossless_S1_xor: \"lossless_spmf (S1_xor A out)\"", "lemma P1_xor_inf_th: \"R1_xor A B = xor_funct A B \\<bind> (\\<lambda> (out1, out2). S1_xor A out1)\"", "lemma lossless_R2_xor: \"lossless_spmf (R2_xor A B)\"", "lemma lossless_S2_xor: \"lossless_spmf (S2_xor A out)\"", "lemma P2_xor_inf_th: \"R2_xor A B = xor_funct A B \\<bind> (\\<lambda> (out1, out2). S2_xor B out2)\"", "lemma \"xor_sim_det.perfect_sec_P1 m1 m2\"", "lemma \"xor_sim_det.perfect_sec_P2 m1 m2\"", "lemma lossless_and_funct: \"lossless_spmf (and_funct A B)\"", "lemma lossless_and_protocol: \"lossless_spmf (and_protocol A B)\"", "lemma and_correct: \"and_protocol (a1, b1) (a2,b2) = and_funct (a1, b1) (a2,b2)\"", "lemma share_and_reconstruct: \n  shows \"share x \\<bind> (\\<lambda> (a1,a2). share y \\<bind> (\\<lambda> (b1,b2).\n             and_protocol (a1,b1) (a2,b2) \\<bind> (\\<lambda> (a, b). reconstruct (a, b)))) = and_evaluate x y\"", "lemma lossless_and_R1: \"lossless_spmf (and_R1 A B)\"", "lemma sec_ex_P1_and: \n  shows \"\\<exists> (A :: 'v_14_OT1 \\<Rightarrow> bool \\<Rightarrow> bool spmf).\n          \\<bar>spmf ((and_funct (a1, a2) (b1,b2)) \\<bind> (\\<lambda> (s1, s2). (S1_and' (a1,a2) (b1,b2) s1) \n            \\<bind> (D :: (((bool \\<times> bool) \\<times> bool \\<times> 'v_14_OT1) \\<times> (share_1 \\<times> share_2)) \\<Rightarrow> bool spmf))) True - spmf ((and_R1 (a1, a2) (b1,b2)) \\<bind> D) True\\<bar> =\n              \\<bar>spmf (coin_spmf \\<bind> (\\<lambda> \\<sigma>. S1_14_OT ((\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> True))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> True)))) () \n                \\<bind>  (\\<lambda> view. A view \\<sigma>))) True \n                  - spmf (coin_spmf \\<bind> (\\<lambda> \\<sigma>. R1_14_OT ((\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> True))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> True)))) (b1, b2) \n                    \\<bind> (\\<lambda> view. A view \\<sigma>))) True\\<bar>\"", "lemma bound_14_OT:\n  \"\\<bar>spmf (coin_spmf \\<bind> (\\<lambda> \\<sigma>. S1_14_OT ((\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> True))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> True)))) () \n        \\<bind>  (\\<lambda> view. (A :: 'v_14_OT1 \\<Rightarrow> bool \\<Rightarrow> bool spmf) view \\<sigma>))) True - spmf (coin_spmf \\<bind> (\\<lambda> \\<sigma>. R1_14_OT ((\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> True))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> True)))) (b1, b2) \n              \\<bind> (\\<lambda> view. A view \\<sigma>))) True\\<bar> \\<le> adv_14_OT\"\n  (is \"?lhs \\<le> adv_14_OT\")", "lemma security_and_P1:\n  shows \"\\<bar>spmf ((and_funct (a1, a2) (b1,b2)) \\<bind> (\\<lambda> (s1, s2). (S1_and' (a1,a2) (b1,b2) s1) \n              \\<bind> (D :: (((bool \\<times> bool) \\<times> bool \\<times> 'v_14_OT1) \\<times> (share_1 \\<times> share_2)) \\<Rightarrow> bool spmf))) True - \n                    spmf ((and_R1 (a1, a2) (b1,b2)) \\<bind> D) True\\<bar> \\<le> adv_14_OT\"", "lemma security_and_P1':\n  shows \"\\<bar>spmf ((and_R1 (a1, a2) (b1,b2)) \\<bind> D) True - \n           spmf ((and_funct (a1, a2) (b1,b2)) \\<bind> (\\<lambda> (s1, s2). (S1_and' (a1,a2) (b1,b2) s1) \n            \\<bind> (D :: (((bool \\<times> bool) \\<times> bool \\<times> 'v_14_OT1) \\<times> (share_1 \\<times> share_2)) \\<Rightarrow> bool spmf))) True\\<bar> \\<le> adv_14_OT\"", "lemma lossless_and_R2: \"lossless_spmf (and_R2 A B)\"", "lemma lossless_S2_and: \"lossless_spmf (S2_and B s2)\"", "lemma ideal_S1_and: \"and_secret_sharing.Ideal1 (a1, b1) (a2, b2) s2 = S1_and' (a1, b1) (a2, b2) s2\"", "lemma and_P2_security: \"and_secret_sharing.perfect_sec_P2 m1 m2\"", "lemma and_P1_security: \"and_secret_sharing.adv_P1 m1 m2 D \\<le> adv_14_OT\"", "lemma share_reconstruct_xor: \"share x \\<bind> (\\<lambda>(a1, a2). share y \\<bind> (\\<lambda>(b1, b2). \n          xor_protocol (a1, b1) (a2, b2) \\<bind> (\\<lambda>(a, b). \n              reconstruct (a, b)))) = xor_evaluate x y\"", "lemma \"share_correct.sharing_correct input\"", "lemma \"share_correct.correct_share_eval input1 input2\"", "lemma \"xor_sim_det.perfect_sec_P1 m1 m2\"", "lemma \"xor_sim_det.perfect_sec_P2 m1 m2\"", "lemma and_P1_adv_negligible:\n  assumes \"negligible (\\<lambda> n. adv_14_OT n)\"\n  shows \"negligible (\\<lambda> n. and_secret_sharing.adv_P1 n m1 m2 D)\"", "lemma and_P2_security: \"and_secret_sharing.perfect_sec_P2 n m1 m2\""], "translations": [["", "lemma  funct_14: \"funct_OT_14 (m00,m01,m10,m11) (c0,c1) \n                      = return_spmf ((),if c0 then (if c1 then m11 else m10) else (if c1 then m01 else m00))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. funct_OT_14 (m00, m01, m10, m11) (c0, c1) =\n    return_spmf\n     ((), if c0 then if c1 then m11 else m10 else if c1 then m01 else m00)", "by(simp add: funct_OT_14_def)"], ["", "sublocale OT_14_sim: sim_det_def R1_14_OT S1_14_OT R2_14_OT S2_14_OT funct_14_OT protocol_14_OT"], ["proof (prove)\ngoal (1 subgoal):\n 1. sim_det_def R1_14_OT S1_14_OT R2_14_OT S2_14_OT funct_14_OT", "unfolding sim_det_def_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<forall>m1 m2. lossless_spmf (R1_14_OT m1 m2)) \\<and>\n     (\\<forall>m1 out1. lossless_spmf (S1_14_OT m1 out1))) \\<and>\n    (\\<forall>m1 m2. lossless_spmf (R2_14_OT m1 m2)) \\<and>\n    (\\<forall>m2 out2. lossless_spmf (S2_14_OT m2 out2)) \\<and>\n    (\\<forall>m1 m2. lossless_spmf (funct_14_OT m1 m2))", "by(simp add: lossless_R1_14_OT lossless_S1_14_OT lossless_funct_14_OT lossless_R2_14_OT lossless_S2_14_OT)"], ["", "lemma inf_th_14_OT_P4: \"R2_14_OT msgs C = (funct_OT_14 msgs C \\<bind> (\\<lambda> (s1, s2). S2_14_OT C s2))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R2_14_OT msgs C =\n    funct_OT_14 msgs C \\<bind> (\\<lambda>(s1, s2). S2_14_OT C s2)", "using P2_OT_12_inf_theoretic sim_det_def.perfect_sec_P2_def OT_14_sim.perfect_sec_P2_def"], ["proof (prove)\nusing this:\n  OT_14_sim.perfect_sec_P2 ?funct_14_OT ?M ?C\n  sim_det_def ?R1.0 ?S1.0 ?R2.0 ?S2.0 ?funct \\<Longrightarrow>\n  sim_det_def.perfect_sec_P2 ?R2.0 ?S2.0 ?funct ?m1.0 ?m2.0 \\<equiv>\n  ?R2.0 ?m1.0 ?m2.0 =\n  ?funct ?m1.0 ?m2.0 \\<bind> (\\<lambda>(s1, s2). ?S2.0 ?m2.0 s2)\n  OT_14_sim.perfect_sec_P2 ?funct_14_OT ?m1.0 ?m2.0 \\<equiv>\n  R2_14_OT ?m1.0 ?m2.0 =\n  ?funct_14_OT ?m1.0 ?m2.0 \\<bind> (\\<lambda>(s1, s2). S2_14_OT ?m2.0 s2)\n\ngoal (1 subgoal):\n 1. R2_14_OT msgs C =\n    funct_OT_14 msgs C \\<bind> (\\<lambda>(s1, s2). S2_14_OT C s2)", "by auto"], ["", "lemma ass_adv_14_OT: \"\\<bar>spmf (bind_spmf (S1_14_OT msgs ()) (\\<lambda> view. (D view))) True - \n                    spmf (bind_spmf (R1_14_OT msgs (c0,c1)) (\\<lambda> view. (D view))) True \\<bar> \\<le> adv_14_OT\"\n  (is \"?lhs \\<le> adv_14_OT\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>spmf (S1_14_OT msgs () \\<bind> D) True -\n          spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True\\<bar>\n    \\<le> adv_14_OT", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>spmf (S1_14_OT msgs () \\<bind> D) True -\n          spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True\\<bar>\n    \\<le> adv_14_OT", "have \"funct_OT_14 (m0,m1,m2,m3) (c0, c1) \\<bind> (\\<lambda>(o1, o2). S1_14_OT (m0,m1,m2,m3) () \\<bind> D) = S1_14_OT (m0,m1,m2,m3) () \\<bind> D\" \n    for m0 m1 m2 m3"], ["proof (prove)\ngoal (1 subgoal):\n 1. funct_OT_14 (m0, m1, m2, m3) (c0, c1) \\<bind>\n    (\\<lambda>(o1, o2). S1_14_OT (m0, m1, m2, m3) () \\<bind> D) =\n    S1_14_OT (m0, m1, m2, m3) () \\<bind> D", "by(simp add: funct_14)"], ["proof (state)\nthis:\n  funct_OT_14 (?m0.0, ?m1.0, ?m2.0, ?m3.0) (c0, c1) \\<bind>\n  (\\<lambda>(o1, o2). S1_14_OT (?m0.0, ?m1.0, ?m2.0, ?m3.0) () \\<bind> D) =\n  S1_14_OT (?m0.0, ?m1.0, ?m2.0, ?m3.0) () \\<bind> D\n\ngoal (1 subgoal):\n 1. \\<bar>spmf (S1_14_OT msgs () \\<bind> D) True -\n          spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True\\<bar>\n    \\<le> adv_14_OT", "hence funct: \"funct_OT_14 msgs (c0, c1) \\<bind> (\\<lambda>(o1, o2). S1_14_OT msgs () \\<bind> D) = S1_14_OT msgs () \\<bind> D\""], ["proof (prove)\nusing this:\n  funct_OT_14 (?m0.0, ?m1.0, ?m2.0, ?m3.0) (c0, c1) \\<bind>\n  (\\<lambda>(o1, o2). S1_14_OT (?m0.0, ?m1.0, ?m2.0, ?m3.0) () \\<bind> D) =\n  S1_14_OT (?m0.0, ?m1.0, ?m2.0, ?m3.0) () \\<bind> D\n\ngoal (1 subgoal):\n 1. funct_OT_14 msgs (c0, c1) \\<bind>\n    (\\<lambda>(o1, o2). S1_14_OT msgs () \\<bind> D) =\n    S1_14_OT msgs () \\<bind> D", "by (metis prod_cases4)"], ["proof (state)\nthis:\n  funct_OT_14 msgs (c0, c1) \\<bind>\n  (\\<lambda>(o1, o2). S1_14_OT msgs () \\<bind> D) =\n  S1_14_OT msgs () \\<bind> D\n\ngoal (1 subgoal):\n 1. \\<bar>spmf (S1_14_OT msgs () \\<bind> D) True -\n          spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True\\<bar>\n    \\<le> adv_14_OT", "have \"?lhs = \\<bar>spmf (bind_spmf (R1_14_OT msgs (c0,c1)) (\\<lambda> view. (D view))) True \n                  - spmf (bind_spmf (S1_14_OT msgs ()) (\\<lambda> view. (D view))) True\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>spmf (S1_14_OT msgs () \\<bind> D) True -\n          spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True\\<bar> =\n    \\<bar>spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True -\n          spmf (S1_14_OT msgs () \\<bind> D) True\\<bar>", "by linarith"], ["proof (state)\nthis:\n  \\<bar>spmf (S1_14_OT msgs () \\<bind> D) True -\n        spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True\\<bar> =\n  \\<bar>spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True -\n        spmf (S1_14_OT msgs () \\<bind> D) True\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>spmf (S1_14_OT msgs () \\<bind> D) True -\n          spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True\\<bar>\n    \\<le> adv_14_OT", "hence \"... = \\<bar>(spmf (R1_14_OT msgs (c0,c1) \\<bind> (\\<lambda> view. D view)) True) \n            - spmf (funct_OT_14 msgs (c0,c1) \\<bind> (\\<lambda> (o1, o2). S1_14_OT msgs o1 \\<bind> (\\<lambda> view. D view))) True\\<bar>\""], ["proof (prove)\nusing this:\n  \\<bar>spmf (S1_14_OT msgs () \\<bind> D) True -\n        spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True\\<bar> =\n  \\<bar>spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True -\n        spmf (S1_14_OT msgs () \\<bind> D) True\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True -\n          spmf (S1_14_OT msgs () \\<bind> D) True\\<bar> =\n    \\<bar>spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True -\n          spmf\n           (funct_OT_14 msgs (c0, c1) \\<bind>\n            (\\<lambda>(o1, o2). S1_14_OT msgs o1 \\<bind> D))\n           True\\<bar>", "by(simp add: funct)"], ["proof (state)\nthis:\n  \\<bar>spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True -\n        spmf (S1_14_OT msgs () \\<bind> D) True\\<bar> =\n  \\<bar>spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True -\n        spmf\n         (funct_OT_14 msgs (c0, c1) \\<bind>\n          (\\<lambda>(o1, o2). S1_14_OT msgs o1 \\<bind> D))\n         True\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>spmf (S1_14_OT msgs () \\<bind> D) True -\n          spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True\\<bar>\n    \\<le> adv_14_OT", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True -\n        spmf (S1_14_OT msgs () \\<bind> D) True\\<bar> =\n  \\<bar>spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True -\n        spmf\n         (funct_OT_14 msgs (c0, c1) \\<bind>\n          (\\<lambda>(o1, o2). S1_14_OT msgs o1 \\<bind> D))\n         True\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>spmf (S1_14_OT msgs () \\<bind> D) True -\n          spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True\\<bar>\n    \\<le> adv_14_OT", "using P1_OT_14_adv_bound sim_det_def.adv_P1_def"], ["proof (prove)\nusing this:\n  \\<bar>spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True -\n        spmf (S1_14_OT msgs () \\<bind> D) True\\<bar> =\n  \\<bar>spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True -\n        spmf\n         (funct_OT_14 msgs (c0, c1) \\<bind>\n          (\\<lambda>(o1, o2). S1_14_OT msgs o1 \\<bind> D))\n         True\\<bar>\n  OT_14_sim.adv_P1 ?funct_14_OT ?M ?C ?D \\<le> adv_14_OT\n  sim_det_def ?R1.0 ?S1.0 ?R2.0 ?S2.0 ?funct \\<Longrightarrow>\n  sim_det_def.adv_P1 ?R1.0 ?S1.0 ?funct ?m1.0 ?m2.0 ?D \\<equiv>\n  \\<bar>spmf (?R1.0 ?m1.0 ?m2.0 \\<bind> ?D) True -\n        spmf\n         (?funct ?m1.0 ?m2.0 \\<bind>\n          (\\<lambda>(o1, o2). ?S1.0 ?m1.0 o1 \\<bind> ?D))\n         True\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>spmf (S1_14_OT msgs () \\<bind> D) True -\n          spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True\\<bar>\n    \\<le> adv_14_OT", "by (simp add: OT_14_sim.adv_P1_def abs_minus_commute)"], ["proof (state)\nthis:\n  \\<bar>spmf (S1_14_OT msgs () \\<bind> D) True -\n        spmf (R1_14_OT msgs (c0, c1) \\<bind> D) True\\<bar>\n  \\<le> adv_14_OT\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The sharing scheme\\<close>"], ["", "definition share :: \"bool \\<Rightarrow> share_wire spmf\"\n  where \"share x = do {\n    a\\<^sub>1 \\<leftarrow> coin_spmf;\n    let b\\<^sub>1 = x \\<oplus> a\\<^sub>1;\n    return_spmf (a\\<^sub>1, b\\<^sub>1)}\""], ["", "lemma lossless_share [simp]: \"lossless_spmf (share x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lossless_spmf (share x)", "by(simp add: share_def)"], ["", "definition reconstruct :: \"(share_1 \\<times> share_2) \\<Rightarrow> bool spmf\"\n  where \"reconstruct shares = do {\n    let (a,b) = shares;\n    return_spmf (a \\<oplus> b)}\""], ["", "lemma lossless_reconstruct [simp]: \"lossless_spmf (reconstruct s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lossless_spmf (reconstruct s)", "by(simp add: reconstruct_def split_def)"], ["", "lemma reconstruct_share : \"(bind_spmf (share x) reconstruct) = (return_spmf x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. share x \\<bind> reconstruct = return_spmf x", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. share x \\<bind> reconstruct = return_spmf x", "have \"y = (y = x) = x\" for y"], ["proof (prove)\ngoal (1 subgoal):\n 1. (y = (y = x)) = x", "by auto"], ["proof (state)\nthis:\n  (?y = (?y = x)) = x\n\ngoal (1 subgoal):\n 1. share x \\<bind> reconstruct = return_spmf x", "thus ?thesis"], ["proof (prove)\nusing this:\n  (?y = (?y = x)) = x\n\ngoal (1 subgoal):\n 1. share x \\<bind> reconstruct = return_spmf x", "by(auto simp add: share_def reconstruct_def bind_spmf_const eq_commute)"], ["proof (state)\nthis:\n  share x \\<bind> reconstruct = return_spmf x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma \"(reconstruct (s1,s2) \\<bind> (\\<lambda> rec. share rec \\<bind> (\\<lambda> shares. reconstruct shares))) = return_spmf (s1 \\<oplus> s2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. reconstruct (s1, s2) \\<bind>\n    (\\<lambda>rec. share rec \\<bind> reconstruct) =\n    return_spmf (s1 \\<oplus> s2)", "apply(simp add: reconstruct_share reconstruct_def share_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. coin_spmf \\<bind>\n    (\\<lambda>y. return_spmf (y = ((s1 = (\\<not> s2)) = y))) =\n    return_spmf (s1 = (\\<not> s2))", "apply(cases s1; cases s2)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<lbrakk>s1; s2\\<rbrakk>\n    \\<Longrightarrow> coin_spmf \\<bind>\n                      (\\<lambda>y.\n                          return_spmf (y = ((s1 = (\\<not> s2)) = y))) =\n                      return_spmf (s1 = (\\<not> s2))\n 2. \\<lbrakk>s1; \\<not> s2\\<rbrakk>\n    \\<Longrightarrow> coin_spmf \\<bind>\n                      (\\<lambda>y.\n                          return_spmf (y = ((s1 = (\\<not> s2)) = y))) =\n                      return_spmf (s1 = (\\<not> s2))\n 3. \\<lbrakk>\\<not> s1; s2\\<rbrakk>\n    \\<Longrightarrow> coin_spmf \\<bind>\n                      (\\<lambda>y.\n                          return_spmf (y = ((s1 = (\\<not> s2)) = y))) =\n                      return_spmf (s1 = (\\<not> s2))\n 4. \\<lbrakk>\\<not> s1; \\<not> s2\\<rbrakk>\n    \\<Longrightarrow> coin_spmf \\<bind>\n                      (\\<lambda>y.\n                          return_spmf (y = ((s1 = (\\<not> s2)) = y))) =\n                      return_spmf (s1 = (\\<not> s2))", "by(auto simp add: bind_spmf_const)"], ["", "definition xor_evaluate ::  \"bool \\<Rightarrow> bool \\<Rightarrow> bool spmf\"\n  where \"xor_evaluate A B = return_spmf (A \\<oplus> B)\""], ["", "definition xor_funct :: \"share_wire \\<Rightarrow> share_wire \\<Rightarrow> (bool \\<times> bool) spmf\"\n  where \"xor_funct A B = do {\n    let (a1, b1) = A;\n    let (a2,b2) = B;\n    return_spmf (a1 \\<oplus> a2, b1 \\<oplus> b2)}\""], ["", "lemma lossless_xor_funct: \"lossless_spmf (xor_funct A B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lossless_spmf (xor_funct A B)", "by(simp add: xor_funct_def split_def)"], ["", "definition xor_protocol :: \"share_wire \\<Rightarrow> share_wire \\<Rightarrow> (bool \\<times> bool) spmf\"\n  where \"xor_protocol A B = do {\n    let (a1, b1) = A;\n    let (a2,b2) = B;\n    return_spmf (a1 \\<oplus> a2, b1 \\<oplus> b2)}\""], ["", "lemma lossless_xor_protocol: \"lossless_spmf (xor_protocol A B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lossless_spmf (xor_protocol A B)", "by(simp add: xor_protocol_def split_def)"], ["", "lemma share_xor_reconstruct: \n  shows \"share x \\<bind> (\\<lambda> w1. share y \\<bind> (\\<lambda> w2. xor_protocol w1 w2 \n              \\<bind> (\\<lambda> (a, b). reconstruct (a, b)))) = xor_evaluate x y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. share x \\<bind>\n    (\\<lambda>w1.\n        share y \\<bind>\n        (\\<lambda>w2.\n            xor_protocol w1 w2 \\<bind>\n            (\\<lambda>(a, b). reconstruct (a, b)))) =\n    xor_evaluate x y", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. share x \\<bind>\n    (\\<lambda>w1.\n        share y \\<bind>\n        (\\<lambda>w2.\n            xor_protocol w1 w2 \\<bind>\n            (\\<lambda>(a, b). reconstruct (a, b)))) =\n    xor_evaluate x y", "have \"(ya = (\\<not> yb)) = ((x = (\\<not> ya)) = (y = (\\<not> yb))) = (x = (\\<not> y))\" for ya yb"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((ya = (\\<not> yb)) = ((x = (\\<not> ya)) = (y = (\\<not> yb)))) =\n    (x = (\\<not> y))", "by auto"], ["proof (state)\nthis:\n  ((?ya = (\\<not> ?yb)) = ((x = (\\<not> ?ya)) = (y = (\\<not> ?yb)))) =\n  (x = (\\<not> y))\n\ngoal (1 subgoal):\n 1. share x \\<bind>\n    (\\<lambda>w1.\n        share y \\<bind>\n        (\\<lambda>w2.\n            xor_protocol w1 w2 \\<bind>\n            (\\<lambda>(a, b). reconstruct (a, b)))) =\n    xor_evaluate x y", "then"], ["proof (chain)\npicking this:\n  ((?ya = (\\<not> ?yb)) = ((x = (\\<not> ?ya)) = (y = (\\<not> ?yb)))) =\n  (x = (\\<not> y))", "show ?thesis"], ["proof (prove)\nusing this:\n  ((?ya = (\\<not> ?yb)) = ((x = (\\<not> ?ya)) = (y = (\\<not> ?yb)))) =\n  (x = (\\<not> y))\n\ngoal (1 subgoal):\n 1. share x \\<bind>\n    (\\<lambda>w1.\n        share y \\<bind>\n        (\\<lambda>w2.\n            xor_protocol w1 w2 \\<bind>\n            (\\<lambda>(a, b). reconstruct (a, b)))) =\n    xor_evaluate x y", "by(simp add: share_def xor_protocol_def reconstruct_def xor_evaluate_def bind_spmf_const)"], ["proof (state)\nthis:\n  share x \\<bind>\n  (\\<lambda>w1.\n      share y \\<bind>\n      (\\<lambda>w2.\n          xor_protocol w1 w2 \\<bind>\n          (\\<lambda>(a, b). reconstruct (a, b)))) =\n  xor_evaluate x y\n\ngoal:\nNo subgoals!", "qed"], ["", "definition R1_xor :: \"(bool \\<times> bool) \\<Rightarrow> (bool \\<times> bool) \\<Rightarrow> (bool \\<times> bool) spmf\"\n  where \"R1_xor A B = return_spmf A\""], ["", "lemma lossless_R1_xor: \"lossless_spmf (R1_xor A B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lossless_spmf (R1_xor A B)", "by(simp add: R1_xor_def)"], ["", "definition S1_xor :: \"(bool \\<times> bool) \\<Rightarrow> bool \\<Rightarrow> (bool \\<times> bool) spmf\"\n  where \"S1_xor A out  = return_spmf A\""], ["", "lemma lossless_S1_xor: \"lossless_spmf (S1_xor A out)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lossless_spmf (S1_xor A out)", "by(simp add: S1_xor_def)"], ["", "lemma P1_xor_inf_th: \"R1_xor A B = xor_funct A B \\<bind> (\\<lambda> (out1, out2). S1_xor A out1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R1_xor A B =\n    xor_funct A B \\<bind> (\\<lambda>(out1, out2). S1_xor A out1)", "by(simp add: R1_xor_def xor_funct_def S1_xor_def split_def)"], ["", "definition R2_xor :: \"(bool \\<times> bool) \\<Rightarrow> (bool \\<times> bool) \\<Rightarrow> (bool \\<times> bool) spmf\"\n  where \"R2_xor A B = return_spmf B\""], ["", "lemma lossless_R2_xor: \"lossless_spmf (R2_xor A B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lossless_spmf (R2_xor A B)", "by(simp add: R2_xor_def)"], ["", "definition S2_xor :: \"(bool \\<times> bool) \\<Rightarrow> bool \\<Rightarrow> (bool \\<times> bool) spmf\"\n  where \"S2_xor B out  = return_spmf B\""], ["", "lemma lossless_S2_xor: \"lossless_spmf (S2_xor A out)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lossless_spmf (S2_xor A out)", "by(simp add: S2_xor_def)"], ["", "lemma P2_xor_inf_th: \"R2_xor A B = xor_funct A B \\<bind> (\\<lambda> (out1, out2). S2_xor B out2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R2_xor A B =\n    xor_funct A B \\<bind> (\\<lambda>(out1, out2). S2_xor B out2)", "by(simp add: R2_xor_def xor_funct_def S2_xor_def split_def)"], ["", "sublocale xor_sim_det: sim_det_def  R1_xor S1_xor R2_xor S2_xor xor_funct xor_protocol"], ["proof (prove)\ngoal (1 subgoal):\n 1. sim_det_def R1_xor S1_xor R2_xor S2_xor xor_funct", "unfolding sim_det_def_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<forall>m1 m2. lossless_spmf (R1_xor m1 m2)) \\<and>\n     (\\<forall>m1 out1. lossless_spmf (S1_xor m1 out1))) \\<and>\n    (\\<forall>m1 m2. lossless_spmf (R2_xor m1 m2)) \\<and>\n    (\\<forall>m2 out2. lossless_spmf (S2_xor m2 out2)) \\<and>\n    (\\<forall>m1 m2. lossless_spmf (xor_funct m1 m2))", "by(simp add: lossless_R1_xor lossless_S1_xor lossless_R2_xor lossless_S2_xor lossless_xor_funct)"], ["", "lemma \"xor_sim_det.perfect_sec_P1 m1 m2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. xor_sim_det.perfect_sec_P1 m1 m2", "by(simp add: xor_sim_det.perfect_sec_P1_def P1_xor_inf_th)"], ["", "lemma \"xor_sim_det.perfect_sec_P2 m1 m2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. xor_sim_det.perfect_sec_P2 m1 m2", "by(simp add: xor_sim_det.perfect_sec_P2_def P2_xor_inf_th)"], ["", "definition and_funct :: \"(share_1 \\<times> share_2) \\<Rightarrow> (share_1 \\<times> share_2) \\<Rightarrow> share_wire spmf\"\n  where \"and_funct A B = do {\n    let (a1, a2) = A;\n    let (b1,b2) = B;\n    \\<sigma> \\<leftarrow> coin_spmf;\n    return_spmf (\\<sigma>, \\<sigma> \\<oplus> ((a1 \\<oplus> b1) \\<and> (a2 \\<oplus> b2)))}\""], ["", "lemma lossless_and_funct: \"lossless_spmf (and_funct A B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lossless_spmf (and_funct A B)", "by(simp add: and_funct_def split_def)"], ["", "definition and_evaluate :: \"bool \\<Rightarrow> bool \\<Rightarrow> bool spmf\"\n  where \"and_evaluate A B  = return_spmf (A \\<and> B)\""], ["", "definition and_protocol :: \"share_wire \\<Rightarrow> share_wire \\<Rightarrow> share_wire spmf\"\n  where \"and_protocol A B = do {\n    let (a1, b1) = A;\n    let (a2,b2) = B;\n    \\<sigma> \\<leftarrow> coin_spmf;\n    let s0 = \\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (b1 \\<oplus> False));   \n    let s1 = \\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (b1 \\<oplus> True));   \n    let s2 = \\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (b1 \\<oplus> False));   \n    let s3 = \\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (b1 \\<oplus> True)); \n    (_, s) \\<leftarrow> protocol_14_OT (s0,s1,s2,s3) (a2,b2);\n    return_spmf (\\<sigma>, s)}\""], ["", "lemma lossless_and_protocol: \"lossless_spmf (and_protocol A B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lossless_spmf (and_protocol A B)", "by(simp add: and_protocol_def split_def lossless_protocol_14_OT)"], ["", "lemma and_correct: \"and_protocol (a1, b1) (a2,b2) = and_funct (a1, b1) (a2,b2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. and_protocol (a1, b1) (a2, b2) = and_funct (a1, b1) (a2, b2)", "apply(simp add: and_protocol_def and_funct_def correct_14[symmetric] funct_14)"], ["proof (prove)\ngoal (1 subgoal):\n 1. coin_spmf \\<bind>\n    (\\<lambda>\\<sigma>.\n        return_spmf\n         (\\<sigma>,\n          if a2\n          then if b2 then \\<sigma> = (a1 \\<or> b1)\n               else \\<sigma> = (a1 \\<or> \\<not> b1)\n          else if b2 then \\<sigma> = (a1 \\<longrightarrow> b1)\n               else \\<sigma> = (a1 \\<longrightarrow> \\<not> b1))) =\n    coin_spmf \\<bind>\n    (\\<lambda>\\<sigma>.\n        return_spmf (\\<sigma>, \\<sigma> = (a1 = a2 \\<or> b1 = b2)))", "by(cases b2 ; cases b1; cases a1; cases a2; auto)"], ["", "lemma share_and_reconstruct: \n  shows \"share x \\<bind> (\\<lambda> (a1,a2). share y \\<bind> (\\<lambda> (b1,b2).\n             and_protocol (a1,b1) (a2,b2) \\<bind> (\\<lambda> (a, b). reconstruct (a, b)))) = and_evaluate x y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. share x \\<bind>\n    (\\<lambda>(a1, a2).\n        share y \\<bind>\n        (\\<lambda>(b1, b2).\n            and_protocol (a1, b1) (a2, b2) \\<bind>\n            (\\<lambda>(a, b). reconstruct (a, b)))) =\n    and_evaluate x y", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. share x \\<bind>\n    (\\<lambda>(a1, a2).\n        share y \\<bind>\n        (\\<lambda>(b1, b2).\n            and_protocol (a1, b1) (a2, b2) \\<bind>\n            (\\<lambda>(a, b). reconstruct (a, b)))) =\n    and_evaluate x y", "have \"(yc = (\\<not> (if x = (\\<not> ya) then if snd (snd (ya, x = (\\<not> ya)), snd (yb, y = (\\<not> yb))) then yc \n            = (fst (fst (ya, x = (\\<not> ya)), fst (yb, y = (\\<not> yb))) \\<or> snd (fst (ya, x = (\\<not> ya)), fst (yb, y = (\\<not> yb))))\n                   else yc = (fst (fst (ya, x = (\\<not> ya)), fst (yb, y = (\\<not> yb))) \\<or> \\<not> snd (fst (ya, x = (\\<not> ya)), fst (yb, y = (\\<not> yb))))\n                       else if snd (snd (ya, x = (\\<not> ya)), snd (yb, y = (\\<not> yb))) then yc = (fst (fst (ya, x = (\\<not> ya)), fst (yb, y = (\\<not> yb))) \n                            \\<longrightarrow> snd (fst (ya, x = (\\<not> ya)), fst (yb, y = (\\<not> yb))))\n                                  else yc = (fst (fst (ya, x = (\\<not> ya)), fst (yb, y = (\\<not> yb))) \n                                      \\<longrightarrow> \\<not> snd (fst (ya, x = (\\<not> ya)), fst (yb, y = (\\<not> yb))))))) = (x \\<and> y)\"\n    for yc yb ya"], ["proof (prove)\ngoal (1 subgoal):\n 1. (yc =\n     (\\<not> (if x = (\\<not> ya)\n              then if snd (snd (ya, x = (\\<not> ya)),\n                           snd (yb, y = (\\<not> yb)))\n                   then yc =\n                        (fst (fst (ya, x = (\\<not> ya)),\n                              fst (yb, y = (\\<not> yb))) \\<or>\n                         snd (fst (ya, x = (\\<not> ya)),\n                              fst (yb, y = (\\<not> yb))))\n                   else yc =\n                        (fst (fst (ya, x = (\\<not> ya)),\n                              fst (yb, y = (\\<not> yb))) \\<or>\n                         \\<not> snd (fst (ya, x = (\\<not> ya)),\n                                     fst (yb, y = (\\<not> yb))))\n              else if snd (snd (ya, x = (\\<not> ya)),\n                           snd (yb, y = (\\<not> yb)))\n                   then yc =\n                        (fst (fst (ya, x = (\\<not> ya)),\n                              fst (yb, y = (\\<not> yb))) \\<longrightarrow>\n                         snd (fst (ya, x = (\\<not> ya)),\n                              fst (yb, y = (\\<not> yb))))\n                   else yc =\n                        (fst (fst (ya, x = (\\<not> ya)),\n                              fst (yb, y = (\\<not> yb))) \\<longrightarrow>\n                         \\<not> snd (fst (ya, x = (\\<not> ya)),\n                                     fst (yb, y = (\\<not> yb))))))) =\n    (x \\<and> y)", "by auto"], ["proof (state)\nthis:\n  (?yc =\n   (\\<not> (if x = (\\<not> ?ya)\n            then if snd (snd (?ya, x = (\\<not> ?ya)),\n                         snd (?yb, y = (\\<not> ?yb)))\n                 then ?yc =\n                      (fst (fst (?ya, x = (\\<not> ?ya)),\n                            fst (?yb, y = (\\<not> ?yb))) \\<or>\n                       snd (fst (?ya, x = (\\<not> ?ya)),\n                            fst (?yb, y = (\\<not> ?yb))))\n                 else ?yc =\n                      (fst (fst (?ya, x = (\\<not> ?ya)),\n                            fst (?yb, y = (\\<not> ?yb))) \\<or>\n                       \\<not> snd (fst (?ya, x = (\\<not> ?ya)),\n                                   fst (?yb, y = (\\<not> ?yb))))\n            else if snd (snd (?ya, x = (\\<not> ?ya)),\n                         snd (?yb, y = (\\<not> ?yb)))\n                 then ?yc =\n                      (fst (fst (?ya, x = (\\<not> ?ya)),\n                            fst (?yb, y = (\\<not> ?yb))) \\<longrightarrow>\n                       snd (fst (?ya, x = (\\<not> ?ya)),\n                            fst (?yb, y = (\\<not> ?yb))))\n                 else ?yc =\n                      (fst (fst (?ya, x = (\\<not> ?ya)),\n                            fst (?yb, y = (\\<not> ?yb))) \\<longrightarrow>\n                       \\<not> snd (fst (?ya, x = (\\<not> ?ya)),\n                                   fst (?yb, y = (\\<not> ?yb))))))) =\n  (x \\<and> y)\n\ngoal (1 subgoal):\n 1. share x \\<bind>\n    (\\<lambda>(a1, a2).\n        share y \\<bind>\n        (\\<lambda>(b1, b2).\n            and_protocol (a1, b1) (a2, b2) \\<bind>\n            (\\<lambda>(a, b). reconstruct (a, b)))) =\n    and_evaluate x y", "then"], ["proof (chain)\npicking this:\n  (?yc =\n   (\\<not> (if x = (\\<not> ?ya)\n            then if snd (snd (?ya, x = (\\<not> ?ya)),\n                         snd (?yb, y = (\\<not> ?yb)))\n                 then ?yc =\n                      (fst (fst (?ya, x = (\\<not> ?ya)),\n                            fst (?yb, y = (\\<not> ?yb))) \\<or>\n                       snd (fst (?ya, x = (\\<not> ?ya)),\n                            fst (?yb, y = (\\<not> ?yb))))\n                 else ?yc =\n                      (fst (fst (?ya, x = (\\<not> ?ya)),\n                            fst (?yb, y = (\\<not> ?yb))) \\<or>\n                       \\<not> snd (fst (?ya, x = (\\<not> ?ya)),\n                                   fst (?yb, y = (\\<not> ?yb))))\n            else if snd (snd (?ya, x = (\\<not> ?ya)),\n                         snd (?yb, y = (\\<not> ?yb)))\n                 then ?yc =\n                      (fst (fst (?ya, x = (\\<not> ?ya)),\n                            fst (?yb, y = (\\<not> ?yb))) \\<longrightarrow>\n                       snd (fst (?ya, x = (\\<not> ?ya)),\n                            fst (?yb, y = (\\<not> ?yb))))\n                 else ?yc =\n                      (fst (fst (?ya, x = (\\<not> ?ya)),\n                            fst (?yb, y = (\\<not> ?yb))) \\<longrightarrow>\n                       \\<not> snd (fst (?ya, x = (\\<not> ?ya)),\n                                   fst (?yb, y = (\\<not> ?yb))))))) =\n  (x \\<and> y)", "show ?thesis"], ["proof (prove)\nusing this:\n  (?yc =\n   (\\<not> (if x = (\\<not> ?ya)\n            then if snd (snd (?ya, x = (\\<not> ?ya)),\n                         snd (?yb, y = (\\<not> ?yb)))\n                 then ?yc =\n                      (fst (fst (?ya, x = (\\<not> ?ya)),\n                            fst (?yb, y = (\\<not> ?yb))) \\<or>\n                       snd (fst (?ya, x = (\\<not> ?ya)),\n                            fst (?yb, y = (\\<not> ?yb))))\n                 else ?yc =\n                      (fst (fst (?ya, x = (\\<not> ?ya)),\n                            fst (?yb, y = (\\<not> ?yb))) \\<or>\n                       \\<not> snd (fst (?ya, x = (\\<not> ?ya)),\n                                   fst (?yb, y = (\\<not> ?yb))))\n            else if snd (snd (?ya, x = (\\<not> ?ya)),\n                         snd (?yb, y = (\\<not> ?yb)))\n                 then ?yc =\n                      (fst (fst (?ya, x = (\\<not> ?ya)),\n                            fst (?yb, y = (\\<not> ?yb))) \\<longrightarrow>\n                       snd (fst (?ya, x = (\\<not> ?ya)),\n                            fst (?yb, y = (\\<not> ?yb))))\n                 else ?yc =\n                      (fst (fst (?ya, x = (\\<not> ?ya)),\n                            fst (?yb, y = (\\<not> ?yb))) \\<longrightarrow>\n                       \\<not> snd (fst (?ya, x = (\\<not> ?ya)),\n                                   fst (?yb, y = (\\<not> ?yb))))))) =\n  (x \\<and> y)\n\ngoal (1 subgoal):\n 1. share x \\<bind>\n    (\\<lambda>(a1, a2).\n        share y \\<bind>\n        (\\<lambda>(b1, b2).\n            and_protocol (a1, b1) (a2, b2) \\<bind>\n            (\\<lambda>(a, b). reconstruct (a, b)))) =\n    and_evaluate x y", "by(auto simp add: share_def reconstruct_def and_protocol_def and_evaluate_def split_def correct_14[symmetric] funct_14 bind_spmf_const Let_def)"], ["proof (state)\nthis:\n  share x \\<bind>\n  (\\<lambda>(a1, a2).\n      share y \\<bind>\n      (\\<lambda>(b1, b2).\n          and_protocol (a1, b1) (a2, b2) \\<bind>\n          (\\<lambda>(a, b). reconstruct (a, b)))) =\n  and_evaluate x y\n\ngoal:\nNo subgoals!", "qed"], ["", "definition and_R1 :: \"(share_1 \\<times> share_1) \\<Rightarrow> (share_2 \\<times> share_2) \\<Rightarrow> (((share_1 \\<times> share_1) \\<times> bool \\<times> 'v_14_OT1)  \\<times> (share_1 \\<times> share_2)) spmf\"\n  where \"and_R1 A B = do {\n    let (a1, a2) = A;\n    let (b1,b2) = B;\n    \\<sigma> \\<leftarrow> coin_spmf;\n    let s0 = \\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> False));   \n    let s1 = \\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> True));   \n    let s2 = \\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> False));   \n    let s3 = \\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> True)); \n    V \\<leftarrow> R1_14_OT (s0,s1,s2,s3) (b1,b2);\n    (_, s) \\<leftarrow> protocol_14_OT (s0,s1,s2,s3) (b1,b2);\n    return_spmf (((a1,a2), \\<sigma>, V), (\\<sigma>, s))}\""], ["", "lemma lossless_and_R1: \"lossless_spmf (and_R1 A B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lossless_spmf (and_R1 A B)", "apply(simp add: and_R1_def split_def lossless_R1_14_OT lossless_protocol_14_OT Let_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x.\n       lossless_spmf\n        (R1_14_OT\n          (x = (fst A \\<longrightarrow> \\<not> snd A),\n           x = (fst A \\<longrightarrow> snd A),\n           x = (fst A \\<or> \\<not> snd A), x = (fst A \\<or> snd A))\n          B)", "by (metis prod.collapse lossless_R1_14_OT)"], ["", "definition S1_and :: \"(share_1 \\<times> share_1) \\<Rightarrow> bool \\<Rightarrow> (((bool \\<times> bool) \\<times> bool \\<times> 'v_14_OT1)) spmf\"\n  where \"S1_and A \\<sigma> = do {\n    let (a1,a2) = A;\n    let s0 = \\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> False));   \n    let s1 = \\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> True));   \n    let s2 = \\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> False));   \n    let s3 = \\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> True)); \n    V \\<leftarrow> S1_14_OT (s0,s1,s2,s3) ();\n    return_spmf ((a1,a2), \\<sigma>, V)}\""], ["", "definition out1 :: \"(share_1 \\<times> share_1) \\<Rightarrow> (share_2 \\<times> share_2) \\<Rightarrow> bool \\<Rightarrow> (share_1 \\<times> share_2) spmf\"\n  where \"out1 A B \\<sigma> = do {\n    let (a1,a2) = A;\n    let (b1,b2) = B;\n    return_spmf (\\<sigma>, \\<sigma> \\<oplus> ((a1 \\<oplus> b1) \\<and> (a2 \\<oplus> b2)))}\""], ["", "definition S1_and' :: \"(share_1 \\<times> share_1) \\<Rightarrow> (share_2 \\<times> share_2) \\<Rightarrow> bool \\<Rightarrow> (((bool \\<times> bool) \\<times> bool \\<times> 'v_14_OT1) \\<times> (share_1 \\<times> share_2)) spmf\"\n  where \"S1_and' A B \\<sigma> = do {\n    let (a1,a2) = A;\n    let (b1,b2) = B;\n    let s0 = \\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> False));   \n    let s1 = \\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> True));   \n    let s2 = \\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> False));   \n    let s3 = \\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> True)); \n    V \\<leftarrow> S1_14_OT (s0,s1,s2,s3) ();\n    return_spmf (((a1,a2), \\<sigma>, V), (\\<sigma>, \\<sigma> \\<oplus> ((a1 \\<oplus> b1) \\<and> (a2 \\<oplus> b2))))}\""], ["", "lemma sec_ex_P1_and: \n  shows \"\\<exists> (A :: 'v_14_OT1 \\<Rightarrow> bool \\<Rightarrow> bool spmf).\n          \\<bar>spmf ((and_funct (a1, a2) (b1,b2)) \\<bind> (\\<lambda> (s1, s2). (S1_and' (a1,a2) (b1,b2) s1) \n            \\<bind> (D :: (((bool \\<times> bool) \\<times> bool \\<times> 'v_14_OT1) \\<times> (share_1 \\<times> share_2)) \\<Rightarrow> bool spmf))) True - spmf ((and_R1 (a1, a2) (b1,b2)) \\<bind> D) True\\<bar> =\n              \\<bar>spmf (coin_spmf \\<bind> (\\<lambda> \\<sigma>. S1_14_OT ((\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> True))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> True)))) () \n                \\<bind>  (\\<lambda> view. A view \\<sigma>))) True \n                  - spmf (coin_spmf \\<bind> (\\<lambda> \\<sigma>. R1_14_OT ((\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> True))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> True)))) (b1, b2) \n                    \\<bind> (\\<lambda> view. A view \\<sigma>))) True\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>A.\n       \\<bar>spmf\n              (and_funct (a1, a2) (b1, b2) \\<bind>\n               (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n              True -\n             spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar> =\n       \\<bar>spmf\n              (coin_spmf \\<bind>\n               (\\<lambda>\\<sigma>.\n                   S1_14_OT\n                    (\\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                    () \\<bind>\n                   (\\<lambda>view. A view \\<sigma>)))\n              True -\n             spmf\n              (coin_spmf \\<bind>\n               (\\<lambda>\\<sigma>.\n                   R1_14_OT\n                    (\\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                    (b1, b2) \\<bind>\n                   (\\<lambda>view. A view \\<sigma>)))\n              True\\<bar>", "including monad_normalisation"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>A.\n       \\<bar>spmf\n              (and_funct (a1, a2) (b1, b2) \\<bind>\n               (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n              True -\n             spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar> =\n       \\<bar>spmf\n              (coin_spmf \\<bind>\n               (\\<lambda>\\<sigma>.\n                   S1_14_OT\n                    (\\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                    () \\<bind>\n                   (\\<lambda>view. A view \\<sigma>)))\n              True -\n             spmf\n              (coin_spmf \\<bind>\n               (\\<lambda>\\<sigma>.\n                   R1_14_OT\n                    (\\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                    (b1, b2) \\<bind>\n                   (\\<lambda>view. A view \\<sigma>)))\n              True\\<bar>", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>A.\n       \\<bar>spmf\n              (and_funct (a1, a2) (b1, b2) \\<bind>\n               (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n              True -\n             spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar> =\n       \\<bar>spmf\n              (coin_spmf \\<bind>\n               (\\<lambda>\\<sigma>.\n                   S1_14_OT\n                    (\\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                    () \\<bind>\n                   (\\<lambda>view. A view \\<sigma>)))\n              True -\n             spmf\n              (coin_spmf \\<bind>\n               (\\<lambda>\\<sigma>.\n                   R1_14_OT\n                    (\\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                    (b1, b2) \\<bind>\n                   (\\<lambda>view. A view \\<sigma>)))\n              True\\<bar>", "define A' where \"A' == \\<lambda> view \\<sigma>.  (D (((a1,a2), \\<sigma>, view), (\\<sigma>, \\<sigma> \\<oplus> ((a1 \\<oplus> b1) \\<and> (a2 \\<oplus> b2)))))\""], ["proof (state)\nthis:\n  A' \\<equiv>\n  \\<lambda>view \\<sigma>.\n     D (((a1, a2), \\<sigma>, view), \\<sigma>,\n        \\<sigma> \\<oplus> (a1 \\<oplus> b1 \\<and> a2 \\<oplus> b2))\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       \\<bar>spmf\n              (and_funct (a1, a2) (b1, b2) \\<bind>\n               (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n              True -\n             spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar> =\n       \\<bar>spmf\n              (coin_spmf \\<bind>\n               (\\<lambda>\\<sigma>.\n                   S1_14_OT\n                    (\\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                    () \\<bind>\n                   (\\<lambda>view. A view \\<sigma>)))\n              True -\n             spmf\n              (coin_spmf \\<bind>\n               (\\<lambda>\\<sigma>.\n                   R1_14_OT\n                    (\\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                    (b1, b2) \\<bind>\n                   (\\<lambda>view. A view \\<sigma>)))\n              True\\<bar>", "have \"\\<bar>spmf ((and_funct (a1, a2) (b1,b2)) \\<bind> (\\<lambda> (s1, s2). (S1_and' (a1,a2) (b1,b2) s1) \n          \\<bind> (D :: (((bool \\<times> bool) \\<times> bool \\<times> 'v_14_OT1) \\<times> (share_1 \\<times> share_2)) \\<Rightarrow> bool spmf))) True - \n            spmf ((and_R1 (a1, a2) (b1,b2)) \\<bind> (D :: (((bool \\<times> bool) \\<times> bool \\<times> 'v_14_OT1) \\<times> (bool \\<times> bool)) \\<Rightarrow> bool spmf)) True\\<bar> =\n              \\<bar>spmf (coin_spmf \\<bind> (\\<lambda> \\<sigma> :: bool. S1_14_OT ((\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> True))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> True)))) () \n                \\<bind>  (\\<lambda> view. A' view \\<sigma>))) True - spmf (coin_spmf \\<bind> (\\<lambda> \\<sigma>. R1_14_OT ((\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> True))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> True)))) (b1, b2) \n                  \\<bind> (\\<lambda> view. A' view \\<sigma>))) True\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>spmf\n           (and_funct (a1, a2) (b1, b2) \\<bind>\n            (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n           True -\n          spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar> =\n    \\<bar>spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                S1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 () \\<bind>\n                (\\<lambda>view. A' view \\<sigma>)))\n           True -\n          spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                R1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A' view \\<sigma>)))\n           True\\<bar>", "by(auto simp add: S1_and'_def A'_def and_funct_def and_R1_def Let_def split_def correct_14[symmetric] funct_14; cases a1; cases a2; cases b1; cases b2; auto)"], ["proof (state)\nthis:\n  \\<bar>spmf\n         (and_funct (a1, a2) (b1, b2) \\<bind>\n          (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n         True -\n        spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar> =\n  \\<bar>spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              S1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               () \\<bind>\n              (\\<lambda>view. A' view \\<sigma>)))\n         True -\n        spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              R1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               (b1, b2) \\<bind>\n              (\\<lambda>view. A' view \\<sigma>)))\n         True\\<bar>\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       \\<bar>spmf\n              (and_funct (a1, a2) (b1, b2) \\<bind>\n               (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n              True -\n             spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar> =\n       \\<bar>spmf\n              (coin_spmf \\<bind>\n               (\\<lambda>\\<sigma>.\n                   S1_14_OT\n                    (\\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                    () \\<bind>\n                   (\\<lambda>view. A view \\<sigma>)))\n              True -\n             spmf\n              (coin_spmf \\<bind>\n               (\\<lambda>\\<sigma>.\n                   R1_14_OT\n                    (\\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                    (b1, b2) \\<bind>\n                   (\\<lambda>view. A view \\<sigma>)))\n              True\\<bar>", "then"], ["proof (chain)\npicking this:\n  \\<bar>spmf\n         (and_funct (a1, a2) (b1, b2) \\<bind>\n          (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n         True -\n        spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar> =\n  \\<bar>spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              S1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               () \\<bind>\n              (\\<lambda>view. A' view \\<sigma>)))\n         True -\n        spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              R1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               (b1, b2) \\<bind>\n              (\\<lambda>view. A' view \\<sigma>)))\n         True\\<bar>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>spmf\n         (and_funct (a1, a2) (b1, b2) \\<bind>\n          (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n         True -\n        spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar> =\n  \\<bar>spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              S1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               () \\<bind>\n              (\\<lambda>view. A' view \\<sigma>)))\n         True -\n        spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              R1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               (b1, b2) \\<bind>\n              (\\<lambda>view. A' view \\<sigma>)))\n         True\\<bar>\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       \\<bar>spmf\n              (and_funct (a1, a2) (b1, b2) \\<bind>\n               (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n              True -\n             spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar> =\n       \\<bar>spmf\n              (coin_spmf \\<bind>\n               (\\<lambda>\\<sigma>.\n                   S1_14_OT\n                    (\\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                    () \\<bind>\n                   (\\<lambda>view. A view \\<sigma>)))\n              True -\n             spmf\n              (coin_spmf \\<bind>\n               (\\<lambda>\\<sigma>.\n                   R1_14_OT\n                    (\\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                     \\<sigma> \\<oplus>\n                     (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                    (b1, b2) \\<bind>\n                   (\\<lambda>view. A view \\<sigma>)))\n              True\\<bar>", "by auto"], ["proof (state)\nthis:\n  \\<exists>A.\n     \\<bar>spmf\n            (and_funct (a1, a2) (b1, b2) \\<bind>\n             (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n            True -\n           spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar> =\n     \\<bar>spmf\n            (coin_spmf \\<bind>\n             (\\<lambda>\\<sigma>.\n                 S1_14_OT\n                  (\\<sigma> \\<oplus>\n                   (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                   \\<sigma> \\<oplus>\n                   (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                   \\<sigma> \\<oplus>\n                   (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                   \\<sigma> \\<oplus>\n                   (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                  () \\<bind>\n                 (\\<lambda>view. A view \\<sigma>)))\n            True -\n           spmf\n            (coin_spmf \\<bind>\n             (\\<lambda>\\<sigma>.\n                 R1_14_OT\n                  (\\<sigma> \\<oplus>\n                   (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                   \\<sigma> \\<oplus>\n                   (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                   \\<sigma> \\<oplus>\n                   (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                   \\<sigma> \\<oplus>\n                   (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                  (b1, b2) \\<bind>\n                 (\\<lambda>view. A view \\<sigma>)))\n            True\\<bar>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma bound_14_OT:\n  \"\\<bar>spmf (coin_spmf \\<bind> (\\<lambda> \\<sigma>. S1_14_OT ((\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> True))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> True)))) () \n        \\<bind>  (\\<lambda> view. (A :: 'v_14_OT1 \\<Rightarrow> bool \\<Rightarrow> bool spmf) view \\<sigma>))) True - spmf (coin_spmf \\<bind> (\\<lambda> \\<sigma>. R1_14_OT ((\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> True))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> True)))) (b1, b2) \n              \\<bind> (\\<lambda> view. A view \\<sigma>))) True\\<bar> \\<le> adv_14_OT\"\n  (is \"?lhs \\<le> adv_14_OT\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                S1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 () \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True -\n          spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                R1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True\\<bar>\n    \\<le> adv_14_OT", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                S1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 () \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True -\n          spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                R1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True\\<bar>\n    \\<le> adv_14_OT", "have int1: \"integrable (measure_spmf coin_spmf) (\\<lambda>x. spmf (S1_14_OT (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False), x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True), x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False), x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True)) () \\<bind> (\\<lambda>view. A view x)) True)\"\n    and int2: \"integrable (measure_spmf coin_spmf) (\\<lambda>x. spmf (R1_14_OT (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False), x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True), x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False), x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True)) (b1, b2) \\<bind> (\\<lambda>view. A view x)) True)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (measure_spmf coin_spmf)\n     (\\<lambda>x.\n         spmf\n          (S1_14_OT\n            (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n             x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n             x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n             x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n            () \\<bind>\n           (\\<lambda>view. A view x))\n          True) &&&\n    integrable (measure_spmf coin_spmf)\n     (\\<lambda>x.\n         spmf\n          (R1_14_OT\n            (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n             x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n             x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n             x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n            (b1, b2) \\<bind>\n           (\\<lambda>view. A view x))\n          True)", "by(rule measure_spmf.integrable_const_bound[where B=1]; simp add: pmf_le_1)+"], ["proof (state)\nthis:\n  integrable (measure_spmf coin_spmf)\n   (\\<lambda>x.\n       spmf\n        (S1_14_OT\n          (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n           x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n           x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n           x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n          () \\<bind>\n         (\\<lambda>view. A view x))\n        True)\n  integrable (measure_spmf coin_spmf)\n   (\\<lambda>x.\n       spmf\n        (R1_14_OT\n          (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n           x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n           x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n           x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n          (b1, b2) \\<bind>\n         (\\<lambda>view. A view x))\n        True)\n\ngoal (1 subgoal):\n 1. \\<bar>spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                S1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 () \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True -\n          spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                R1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True\\<bar>\n    \\<le> adv_14_OT", "have \"?lhs = \\<bar>LINT x|measure_spmf coin_spmf.\n        spmf (S1_14_OT (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False), x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True), x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False), x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True)) () \\<bind> (\\<lambda>view. A view x)) True -\n        spmf (R1_14_OT (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False), x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True), x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False), x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True)) (b1, b2) \\<bind> (\\<lambda>view. A view x)) True\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                S1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 () \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True -\n          spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                R1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True\\<bar> =\n    \\<bar>LINT x|measure_spmf coin_spmf.\n             spmf\n              (S1_14_OT\n                (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                 x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                 x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                 x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True -\n             spmf\n              (R1_14_OT\n                (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                 x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                 x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                 x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>", "apply(subst (1 2) spmf_bind)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>(LINT x|measure_spmf coin_spmf.\n              spmf\n               (S1_14_OT\n                 (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 () \\<bind>\n                (\\<lambda>view. A view x))\n               True) -\n          (LINT x|measure_spmf coin_spmf.\n              spmf\n               (R1_14_OT\n                 (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A view x))\n               True)\\<bar> =\n    \\<bar>LINT x|measure_spmf coin_spmf.\n             spmf\n              (S1_14_OT\n                (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                 x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                 x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                 x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True -\n             spmf\n              (R1_14_OT\n                (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                 x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                 x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                 x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>", "using int1 int2"], ["proof (prove)\nusing this:\n  integrable (measure_spmf coin_spmf)\n   (\\<lambda>x.\n       spmf\n        (S1_14_OT\n          (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n           x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n           x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n           x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n          () \\<bind>\n         (\\<lambda>view. A view x))\n        True)\n  integrable (measure_spmf coin_spmf)\n   (\\<lambda>x.\n       spmf\n        (R1_14_OT\n          (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n           x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n           x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n           x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n          (b1, b2) \\<bind>\n         (\\<lambda>view. A view x))\n        True)\n\ngoal (1 subgoal):\n 1. \\<bar>(LINT x|measure_spmf coin_spmf.\n              spmf\n               (S1_14_OT\n                 (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 () \\<bind>\n                (\\<lambda>view. A view x))\n               True) -\n          (LINT x|measure_spmf coin_spmf.\n              spmf\n               (R1_14_OT\n                 (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A view x))\n               True)\\<bar> =\n    \\<bar>LINT x|measure_spmf coin_spmf.\n             spmf\n              (S1_14_OT\n                (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                 x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                 x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                 x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True -\n             spmf\n              (R1_14_OT\n                (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                 x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                 x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                 x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>", "by simp"], ["proof (state)\nthis:\n  \\<bar>spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              S1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               () \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True -\n        spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              R1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               (b1, b2) \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True\\<bar> =\n  \\<bar>LINT x|measure_spmf coin_spmf.\n           spmf\n            (S1_14_OT\n              (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n              () \\<bind>\n             (\\<lambda>view. A view x))\n            True -\n           spmf\n            (R1_14_OT\n              (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n              (b1, b2) \\<bind>\n             (\\<lambda>view. A view x))\n            True\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                S1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 () \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True -\n          spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                R1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True\\<bar>\n    \\<le> adv_14_OT", "also"], ["proof (state)\nthis:\n  \\<bar>spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              S1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               () \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True -\n        spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              R1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               (b1, b2) \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True\\<bar> =\n  \\<bar>LINT x|measure_spmf coin_spmf.\n           spmf\n            (S1_14_OT\n              (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n              () \\<bind>\n             (\\<lambda>view. A view x))\n            True -\n           spmf\n            (R1_14_OT\n              (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n              (b1, b2) \\<bind>\n             (\\<lambda>view. A view x))\n            True\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                S1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 () \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True -\n          spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                R1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True\\<bar>\n    \\<le> adv_14_OT", "have \"... \\<le> LINT x|measure_spmf coin_spmf. \\<bar>spmf (S1_14_OT (x = (a1 \\<longrightarrow> \\<not> a2), x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2)) () \\<bind> (\\<lambda>view. A view x)) True \n                - spmf (R1_14_OT (x = (a1 \\<longrightarrow> \\<not> a2), x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2)) (b1, b2) \\<bind> (\\<lambda>view. A view x)) True\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>LINT x|measure_spmf coin_spmf.\n             spmf\n              (S1_14_OT\n                (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                 x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                 x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                 x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True -\n             spmf\n              (R1_14_OT\n                (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                 x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                 x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                 x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>\n    \\<le> LINT x|measure_spmf coin_spmf.\n             \\<bar>spmf\n                    (S1_14_OT\n                      (x = (a1 \\<longrightarrow> \\<not> a2),\n                       x = (a1 \\<longrightarrow> a2),\n                       x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2))\n                      () \\<bind>\n                     (\\<lambda>view. A view x))\n                    True -\n                   spmf\n                    (R1_14_OT\n                      (x = (a1 \\<longrightarrow> \\<not> a2),\n                       x = (a1 \\<longrightarrow> a2),\n                       x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2))\n                      (b1, b2) \\<bind>\n                     (\\<lambda>view. A view x))\n                    True\\<bar>", "by(rule integral_abs_bound[THEN order_trans]; simp add: split_beta)"], ["proof (state)\nthis:\n  \\<bar>LINT x|measure_spmf coin_spmf.\n           spmf\n            (S1_14_OT\n              (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n              () \\<bind>\n             (\\<lambda>view. A view x))\n            True -\n           spmf\n            (R1_14_OT\n              (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n              (b1, b2) \\<bind>\n             (\\<lambda>view. A view x))\n            True\\<bar>\n  \\<le> LINT x|measure_spmf coin_spmf.\n           \\<bar>spmf\n                  (S1_14_OT\n                    (x = (a1 \\<longrightarrow> \\<not> a2),\n                     x = (a1 \\<longrightarrow> a2),\n                     x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2))\n                    () \\<bind>\n                   (\\<lambda>view. A view x))\n                  True -\n                 spmf\n                  (R1_14_OT\n                    (x = (a1 \\<longrightarrow> \\<not> a2),\n                     x = (a1 \\<longrightarrow> a2),\n                     x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2))\n                    (b1, b2) \\<bind>\n                   (\\<lambda>view. A view x))\n                  True\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                S1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 () \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True -\n          spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                R1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True\\<bar>\n    \\<le> adv_14_OT", "ultimately"], ["proof (chain)\npicking this:\n  \\<bar>spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              S1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               () \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True -\n        spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              R1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               (b1, b2) \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True\\<bar> =\n  \\<bar>LINT x|measure_spmf coin_spmf.\n           spmf\n            (S1_14_OT\n              (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n              () \\<bind>\n             (\\<lambda>view. A view x))\n            True -\n           spmf\n            (R1_14_OT\n              (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n              (b1, b2) \\<bind>\n             (\\<lambda>view. A view x))\n            True\\<bar>\n  \\<bar>LINT x|measure_spmf coin_spmf.\n           spmf\n            (S1_14_OT\n              (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n              () \\<bind>\n             (\\<lambda>view. A view x))\n            True -\n           spmf\n            (R1_14_OT\n              (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n              (b1, b2) \\<bind>\n             (\\<lambda>view. A view x))\n            True\\<bar>\n  \\<le> LINT x|measure_spmf coin_spmf.\n           \\<bar>spmf\n                  (S1_14_OT\n                    (x = (a1 \\<longrightarrow> \\<not> a2),\n                     x = (a1 \\<longrightarrow> a2),\n                     x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2))\n                    () \\<bind>\n                   (\\<lambda>view. A view x))\n                  True -\n                 spmf\n                  (R1_14_OT\n                    (x = (a1 \\<longrightarrow> \\<not> a2),\n                     x = (a1 \\<longrightarrow> a2),\n                     x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2))\n                    (b1, b2) \\<bind>\n                   (\\<lambda>view. A view x))\n                  True\\<bar>", "have \"?lhs \\<le> LINT x|measure_spmf coin_spmf. \\<bar>spmf (S1_14_OT (x = (a1 \\<longrightarrow> \\<not> a2), x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2)) () \\<bind> (\\<lambda>view. A view x)) True \n                - spmf (R1_14_OT (x = (a1 \\<longrightarrow> \\<not> a2), x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2)) (b1, b2) \\<bind> (\\<lambda>view. A view x)) True\\<bar>\""], ["proof (prove)\nusing this:\n  \\<bar>spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              S1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               () \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True -\n        spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              R1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               (b1, b2) \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True\\<bar> =\n  \\<bar>LINT x|measure_spmf coin_spmf.\n           spmf\n            (S1_14_OT\n              (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n              () \\<bind>\n             (\\<lambda>view. A view x))\n            True -\n           spmf\n            (R1_14_OT\n              (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n              (b1, b2) \\<bind>\n             (\\<lambda>view. A view x))\n            True\\<bar>\n  \\<bar>LINT x|measure_spmf coin_spmf.\n           spmf\n            (S1_14_OT\n              (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n              () \\<bind>\n             (\\<lambda>view. A view x))\n            True -\n           spmf\n            (R1_14_OT\n              (x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n               x \\<oplus> (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n              (b1, b2) \\<bind>\n             (\\<lambda>view. A view x))\n            True\\<bar>\n  \\<le> LINT x|measure_spmf coin_spmf.\n           \\<bar>spmf\n                  (S1_14_OT\n                    (x = (a1 \\<longrightarrow> \\<not> a2),\n                     x = (a1 \\<longrightarrow> a2),\n                     x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2))\n                    () \\<bind>\n                   (\\<lambda>view. A view x))\n                  True -\n                 spmf\n                  (R1_14_OT\n                    (x = (a1 \\<longrightarrow> \\<not> a2),\n                     x = (a1 \\<longrightarrow> a2),\n                     x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2))\n                    (b1, b2) \\<bind>\n                   (\\<lambda>view. A view x))\n                  True\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                S1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 () \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True -\n          spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                R1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True\\<bar>\n    \\<le> LINT x|measure_spmf coin_spmf.\n             \\<bar>spmf\n                    (S1_14_OT\n                      (x = (a1 \\<longrightarrow> \\<not> a2),\n                       x = (a1 \\<longrightarrow> a2),\n                       x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2))\n                      () \\<bind>\n                     (\\<lambda>view. A view x))\n                    True -\n                   spmf\n                    (R1_14_OT\n                      (x = (a1 \\<longrightarrow> \\<not> a2),\n                       x = (a1 \\<longrightarrow> a2),\n                       x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2))\n                      (b1, b2) \\<bind>\n                     (\\<lambda>view. A view x))\n                    True\\<bar>", "by simp"], ["proof (state)\nthis:\n  \\<bar>spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              S1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               () \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True -\n        spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              R1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               (b1, b2) \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True\\<bar>\n  \\<le> LINT x|measure_spmf coin_spmf.\n           \\<bar>spmf\n                  (S1_14_OT\n                    (x = (a1 \\<longrightarrow> \\<not> a2),\n                     x = (a1 \\<longrightarrow> a2),\n                     x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2))\n                    () \\<bind>\n                   (\\<lambda>view. A view x))\n                  True -\n                 spmf\n                  (R1_14_OT\n                    (x = (a1 \\<longrightarrow> \\<not> a2),\n                     x = (a1 \\<longrightarrow> a2),\n                     x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2))\n                    (b1, b2) \\<bind>\n                   (\\<lambda>view. A view x))\n                  True\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                S1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 () \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True -\n          spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                R1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True\\<bar>\n    \\<le> adv_14_OT", "also"], ["proof (state)\nthis:\n  \\<bar>spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              S1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               () \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True -\n        spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              R1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               (b1, b2) \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True\\<bar>\n  \\<le> LINT x|measure_spmf coin_spmf.\n           \\<bar>spmf\n                  (S1_14_OT\n                    (x = (a1 \\<longrightarrow> \\<not> a2),\n                     x = (a1 \\<longrightarrow> a2),\n                     x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2))\n                    () \\<bind>\n                   (\\<lambda>view. A view x))\n                  True -\n                 spmf\n                  (R1_14_OT\n                    (x = (a1 \\<longrightarrow> \\<not> a2),\n                     x = (a1 \\<longrightarrow> a2),\n                     x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2))\n                    (b1, b2) \\<bind>\n                   (\\<lambda>view. A view x))\n                  True\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                S1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 () \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True -\n          spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                R1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True\\<bar>\n    \\<le> adv_14_OT", "have \"LINT x|measure_spmf coin_spmf. \\<bar>spmf (S1_14_OT (x = (a1 \\<longrightarrow> \\<not> a2), x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2)) () \\<bind> (\\<lambda>view. A view x)) True \n                - spmf (R1_14_OT (x = (a1 \\<longrightarrow> \\<not> a2), x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2)) (b1, b2) \\<bind> (\\<lambda>view. A view x)) True\\<bar> \\<le> adv_14_OT\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|measure_spmf coin_spmf.\n       \\<bar>spmf\n              (S1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True -\n             spmf\n              (R1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>\n    \\<le> adv_14_OT", "apply(rule integral_mono[THEN order_trans])"], ["proof (prove)\ngoal (4 subgoals):\n 1. integrable (measure_spmf coin_spmf)\n     (\\<lambda>x.\n         \\<bar>spmf\n                (S1_14_OT\n                  (x = (a1 \\<longrightarrow> \\<not> a2),\n                   x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                   x = (a1 \\<or> a2))\n                  () \\<bind>\n                 (\\<lambda>view. A view x))\n                True -\n               spmf\n                (R1_14_OT\n                  (x = (a1 \\<longrightarrow> \\<not> a2),\n                   x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                   x = (a1 \\<or> a2))\n                  (b1, b2) \\<bind>\n                 (\\<lambda>view. A view x))\n                True\\<bar>)\n 2. integrable (measure_spmf coin_spmf) ?g1\n 3. \\<And>x.\n       x \\<in> space (measure_spmf coin_spmf) \\<Longrightarrow>\n       \\<bar>spmf\n              (S1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True -\n             spmf\n              (R1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>\n       \\<le> ?g1 x\n 4. integral\\<^sup>L (measure_spmf coin_spmf) ?g1 \\<le> adv_14_OT", "apply(rule measure_spmf.integrable_const_bound[where B=2])"], ["proof (prove)\ngoal (5 subgoals):\n 1. AE x in measure_spmf\n             coin_spmf. norm\n                         \\<bar>spmf\n                                (S1_14_OT\n                                  (x = (a1 \\<longrightarrow> \\<not> a2),\n                                   x = (a1 \\<longrightarrow> a2),\n                                   x = (a1 \\<or> \\<not> a2),\n                                   x = (a1 \\<or> a2))\n                                  () \\<bind>\n                                 (\\<lambda>view. A view x))\n                                True -\n                               spmf\n                                (R1_14_OT\n                                  (x = (a1 \\<longrightarrow> \\<not> a2),\n                                   x = (a1 \\<longrightarrow> a2),\n                                   x = (a1 \\<or> \\<not> a2),\n                                   x = (a1 \\<or> a2))\n                                  (b1, b2) \\<bind>\n                                 (\\<lambda>view. A view x))\n                                True\\<bar>\n                        \\<le> 2\n 2. (\\<lambda>x.\n        \\<bar>spmf\n               (S1_14_OT\n                 (x = (a1 \\<longrightarrow> \\<not> a2),\n                  x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                  x = (a1 \\<or> a2))\n                 () \\<bind>\n                (\\<lambda>view. A view x))\n               True -\n              spmf\n               (R1_14_OT\n                 (x = (a1 \\<longrightarrow> \\<not> a2),\n                  x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                  x = (a1 \\<or> a2))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A view x))\n               True\\<bar>)\n    \\<in> borel_measurable (measure_spmf coin_spmf)\n 3. integrable (measure_spmf coin_spmf) ?g1\n 4. \\<And>x.\n       x \\<in> space (measure_spmf coin_spmf) \\<Longrightarrow>\n       \\<bar>spmf\n              (S1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True -\n             spmf\n              (R1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>\n       \\<le> ?g1 x\n 5. integral\\<^sup>L (measure_spmf coin_spmf) ?g1 \\<le> adv_14_OT", "apply clarsimp"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>x.\n       \\<bar>spmf\n              (S1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True -\n             spmf\n              (R1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>\n       \\<le> 2\n 2. (\\<lambda>x.\n        \\<bar>spmf\n               (S1_14_OT\n                 (x = (a1 \\<longrightarrow> \\<not> a2),\n                  x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                  x = (a1 \\<or> a2))\n                 () \\<bind>\n                (\\<lambda>view. A view x))\n               True -\n              spmf\n               (R1_14_OT\n                 (x = (a1 \\<longrightarrow> \\<not> a2),\n                  x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                  x = (a1 \\<or> a2))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A view x))\n               True\\<bar>)\n    \\<in> borel_measurable (measure_spmf coin_spmf)\n 3. integrable (measure_spmf coin_spmf) ?g1\n 4. \\<And>x.\n       x \\<in> space (measure_spmf coin_spmf) \\<Longrightarrow>\n       \\<bar>spmf\n              (S1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True -\n             spmf\n              (R1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>\n       \\<le> ?g1 x\n 5. integral\\<^sup>L (measure_spmf coin_spmf) ?g1 \\<le> adv_14_OT", "apply(rule abs_triangle_ineq4[THEN order_trans])"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>x.\n       \\<bar>spmf\n              (S1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar> +\n       \\<bar>spmf\n              (R1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>\n       \\<le> 2\n 2. (\\<lambda>x.\n        \\<bar>spmf\n               (S1_14_OT\n                 (x = (a1 \\<longrightarrow> \\<not> a2),\n                  x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                  x = (a1 \\<or> a2))\n                 () \\<bind>\n                (\\<lambda>view. A view x))\n               True -\n              spmf\n               (R1_14_OT\n                 (x = (a1 \\<longrightarrow> \\<not> a2),\n                  x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                  x = (a1 \\<or> a2))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A view x))\n               True\\<bar>)\n    \\<in> borel_measurable (measure_spmf coin_spmf)\n 3. integrable (measure_spmf coin_spmf) ?g1\n 4. \\<And>x.\n       x \\<in> space (measure_spmf coin_spmf) \\<Longrightarrow>\n       \\<bar>spmf\n              (S1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True -\n             spmf\n              (R1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>\n       \\<le> ?g1 x\n 5. integral\\<^sup>L (measure_spmf coin_spmf) ?g1 \\<le> adv_14_OT", "apply(cases a1)"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<And>x.\n       a1 \\<Longrightarrow>\n       \\<bar>spmf\n              (S1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar> +\n       \\<bar>spmf\n              (R1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>\n       \\<le> 2\n 2. \\<And>x.\n       \\<not> a1 \\<Longrightarrow>\n       \\<bar>spmf\n              (S1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar> +\n       \\<bar>spmf\n              (R1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>\n       \\<le> 2\n 3. (\\<lambda>x.\n        \\<bar>spmf\n               (S1_14_OT\n                 (x = (a1 \\<longrightarrow> \\<not> a2),\n                  x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                  x = (a1 \\<or> a2))\n                 () \\<bind>\n                (\\<lambda>view. A view x))\n               True -\n              spmf\n               (R1_14_OT\n                 (x = (a1 \\<longrightarrow> \\<not> a2),\n                  x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                  x = (a1 \\<or> a2))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A view x))\n               True\\<bar>)\n    \\<in> borel_measurable (measure_spmf coin_spmf)\n 4. integrable (measure_spmf coin_spmf) ?g1\n 5. \\<And>x.\n       x \\<in> space (measure_spmf coin_spmf) \\<Longrightarrow>\n       \\<bar>spmf\n              (S1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True -\n             spmf\n              (R1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>\n       \\<le> ?g1 x\n 6. integral\\<^sup>L (measure_spmf coin_spmf) ?g1 \\<le> adv_14_OT", "apply(cases a2)"], ["proof (prove)\ngoal (7 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>a1; a2\\<rbrakk>\n       \\<Longrightarrow> \\<bar>spmf\n                                (S1_14_OT\n                                  (x = (a1 \\<longrightarrow> \\<not> a2),\n                                   x = (a1 \\<longrightarrow> a2),\n                                   x = (a1 \\<or> \\<not> a2),\n                                   x = (a1 \\<or> a2))\n                                  () \\<bind>\n                                 (\\<lambda>view. A view x))\n                                True\\<bar> +\n                         \\<bar>spmf\n                                (R1_14_OT\n                                  (x = (a1 \\<longrightarrow> \\<not> a2),\n                                   x = (a1 \\<longrightarrow> a2),\n                                   x = (a1 \\<or> \\<not> a2),\n                                   x = (a1 \\<or> a2))\n                                  (b1, b2) \\<bind>\n                                 (\\<lambda>view. A view x))\n                                True\\<bar>\n                         \\<le> 2\n 2. \\<And>x.\n       \\<lbrakk>a1; \\<not> a2\\<rbrakk>\n       \\<Longrightarrow> \\<bar>spmf\n                                (S1_14_OT\n                                  (x = (a1 \\<longrightarrow> \\<not> a2),\n                                   x = (a1 \\<longrightarrow> a2),\n                                   x = (a1 \\<or> \\<not> a2),\n                                   x = (a1 \\<or> a2))\n                                  () \\<bind>\n                                 (\\<lambda>view. A view x))\n                                True\\<bar> +\n                         \\<bar>spmf\n                                (R1_14_OT\n                                  (x = (a1 \\<longrightarrow> \\<not> a2),\n                                   x = (a1 \\<longrightarrow> a2),\n                                   x = (a1 \\<or> \\<not> a2),\n                                   x = (a1 \\<or> a2))\n                                  (b1, b2) \\<bind>\n                                 (\\<lambda>view. A view x))\n                                True\\<bar>\n                         \\<le> 2\n 3. \\<And>x.\n       \\<not> a1 \\<Longrightarrow>\n       \\<bar>spmf\n              (S1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar> +\n       \\<bar>spmf\n              (R1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>\n       \\<le> 2\n 4. (\\<lambda>x.\n        \\<bar>spmf\n               (S1_14_OT\n                 (x = (a1 \\<longrightarrow> \\<not> a2),\n                  x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                  x = (a1 \\<or> a2))\n                 () \\<bind>\n                (\\<lambda>view. A view x))\n               True -\n              spmf\n               (R1_14_OT\n                 (x = (a1 \\<longrightarrow> \\<not> a2),\n                  x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                  x = (a1 \\<or> a2))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A view x))\n               True\\<bar>)\n    \\<in> borel_measurable (measure_spmf coin_spmf)\n 5. integrable (measure_spmf coin_spmf) ?g1\n 6. \\<And>x.\n       x \\<in> space (measure_spmf coin_spmf) \\<Longrightarrow>\n       \\<bar>spmf\n              (S1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True -\n             spmf\n              (R1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>\n       \\<le> ?g1 x\n 7. integral\\<^sup>L (measure_spmf coin_spmf) ?g1 \\<le> adv_14_OT", "subgoal for M"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>a1; a2\\<rbrakk>\n    \\<Longrightarrow> \\<bar>spmf\n                             (S1_14_OT\n                               (M = (a1 \\<longrightarrow> \\<not> a2),\n                                M = (a1 \\<longrightarrow> a2),\n                                M = (a1 \\<or> \\<not> a2), M = (a1 \\<or> a2))\n                               () \\<bind>\n                              (\\<lambda>view. A view M))\n                             True\\<bar> +\n                      \\<bar>spmf\n                             (R1_14_OT\n                               (M = (a1 \\<longrightarrow> \\<not> a2),\n                                M = (a1 \\<longrightarrow> a2),\n                                M = (a1 \\<or> \\<not> a2), M = (a1 \\<or> a2))\n                               (b1, b2) \\<bind>\n                              (\\<lambda>view. A view M))\n                             True\\<bar>\n                      \\<le> 2", "using pmf_le_1[of \"R1_14_OT (\\<not> M, M, M, M) (b1,b2) \\<bind>  (\\<lambda> view. A view M)\" \"Some True\"]\n        pmf_le_1[of \"S1_14_OT (\\<not> M, M, M, M) () \\<bind>  (\\<lambda> view. A view M)\" \"Some True\"]"], ["proof (prove)\nusing this:\n  spmf\n   (R1_14_OT (\\<not> M, M, M, M) (b1, b2) \\<bind> (\\<lambda>view. A view M))\n   True\n  \\<le> 1\n  spmf (S1_14_OT (\\<not> M, M, M, M) () \\<bind> (\\<lambda>view. A view M))\n   True\n  \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>a1; a2\\<rbrakk>\n    \\<Longrightarrow> \\<bar>spmf\n                             (S1_14_OT\n                               (M = (a1 \\<longrightarrow> \\<not> a2),\n                                M = (a1 \\<longrightarrow> a2),\n                                M = (a1 \\<or> \\<not> a2), M = (a1 \\<or> a2))\n                               () \\<bind>\n                              (\\<lambda>view. A view M))\n                             True\\<bar> +\n                      \\<bar>spmf\n                             (R1_14_OT\n                               (M = (a1 \\<longrightarrow> \\<not> a2),\n                                M = (a1 \\<longrightarrow> a2),\n                                M = (a1 \\<or> \\<not> a2), M = (a1 \\<or> a2))\n                               (b1, b2) \\<bind>\n                              (\\<lambda>view. A view M))\n                             True\\<bar>\n                      \\<le> 2", "by simp"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>a1; \\<not> a2\\<rbrakk>\n       \\<Longrightarrow> \\<bar>spmf\n                                (S1_14_OT\n                                  (x = (a1 \\<longrightarrow> \\<not> a2),\n                                   x = (a1 \\<longrightarrow> a2),\n                                   x = (a1 \\<or> \\<not> a2),\n                                   x = (a1 \\<or> a2))\n                                  () \\<bind>\n                                 (\\<lambda>view. A view x))\n                                True\\<bar> +\n                         \\<bar>spmf\n                                (R1_14_OT\n                                  (x = (a1 \\<longrightarrow> \\<not> a2),\n                                   x = (a1 \\<longrightarrow> a2),\n                                   x = (a1 \\<or> \\<not> a2),\n                                   x = (a1 \\<or> a2))\n                                  (b1, b2) \\<bind>\n                                 (\\<lambda>view. A view x))\n                                True\\<bar>\n                         \\<le> 2\n 2. \\<And>x.\n       \\<not> a1 \\<Longrightarrow>\n       \\<bar>spmf\n              (S1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar> +\n       \\<bar>spmf\n              (R1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>\n       \\<le> 2\n 3. (\\<lambda>x.\n        \\<bar>spmf\n               (S1_14_OT\n                 (x = (a1 \\<longrightarrow> \\<not> a2),\n                  x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                  x = (a1 \\<or> a2))\n                 () \\<bind>\n                (\\<lambda>view. A view x))\n               True -\n              spmf\n               (R1_14_OT\n                 (x = (a1 \\<longrightarrow> \\<not> a2),\n                  x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                  x = (a1 \\<or> a2))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A view x))\n               True\\<bar>)\n    \\<in> borel_measurable (measure_spmf coin_spmf)\n 4. integrable (measure_spmf coin_spmf) ?g1\n 5. \\<And>x.\n       x \\<in> space (measure_spmf coin_spmf) \\<Longrightarrow>\n       \\<bar>spmf\n              (S1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True -\n             spmf\n              (R1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>\n       \\<le> ?g1 x\n 6. integral\\<^sup>L (measure_spmf coin_spmf) ?g1 \\<le> adv_14_OT", "subgoal for M"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>a1; \\<not> a2\\<rbrakk>\n    \\<Longrightarrow> \\<bar>spmf\n                             (S1_14_OT\n                               (M = (a1 \\<longrightarrow> \\<not> a2),\n                                M = (a1 \\<longrightarrow> a2),\n                                M = (a1 \\<or> \\<not> a2), M = (a1 \\<or> a2))\n                               () \\<bind>\n                              (\\<lambda>view. A view M))\n                             True\\<bar> +\n                      \\<bar>spmf\n                             (R1_14_OT\n                               (M = (a1 \\<longrightarrow> \\<not> a2),\n                                M = (a1 \\<longrightarrow> a2),\n                                M = (a1 \\<or> \\<not> a2), M = (a1 \\<or> a2))\n                               (b1, b2) \\<bind>\n                              (\\<lambda>view. A view M))\n                             True\\<bar>\n                      \\<le> 2", "using pmf_le_1[of \"R1_14_OT  (M, \\<not> M, M, M) (b1,b2) \\<bind>  (\\<lambda> view. A view M)\" \"Some True\"] \n        pmf_le_1[of \"S1_14_OT (M, \\<not> M, M, M) () \\<bind>  (\\<lambda> view. A view M)\" \"Some True\"]"], ["proof (prove)\nusing this:\n  spmf\n   (R1_14_OT (M, \\<not> M, M, M) (b1, b2) \\<bind> (\\<lambda>view. A view M))\n   True\n  \\<le> 1\n  spmf (S1_14_OT (M, \\<not> M, M, M) () \\<bind> (\\<lambda>view. A view M))\n   True\n  \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>a1; \\<not> a2\\<rbrakk>\n    \\<Longrightarrow> \\<bar>spmf\n                             (S1_14_OT\n                               (M = (a1 \\<longrightarrow> \\<not> a2),\n                                M = (a1 \\<longrightarrow> a2),\n                                M = (a1 \\<or> \\<not> a2), M = (a1 \\<or> a2))\n                               () \\<bind>\n                              (\\<lambda>view. A view M))\n                             True\\<bar> +\n                      \\<bar>spmf\n                             (R1_14_OT\n                               (M = (a1 \\<longrightarrow> \\<not> a2),\n                                M = (a1 \\<longrightarrow> a2),\n                                M = (a1 \\<or> \\<not> a2), M = (a1 \\<or> a2))\n                               (b1, b2) \\<bind>\n                              (\\<lambda>view. A view M))\n                             True\\<bar>\n                      \\<le> 2", "by simp"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>x.\n       \\<not> a1 \\<Longrightarrow>\n       \\<bar>spmf\n              (S1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar> +\n       \\<bar>spmf\n              (R1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>\n       \\<le> 2\n 2. (\\<lambda>x.\n        \\<bar>spmf\n               (S1_14_OT\n                 (x = (a1 \\<longrightarrow> \\<not> a2),\n                  x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                  x = (a1 \\<or> a2))\n                 () \\<bind>\n                (\\<lambda>view. A view x))\n               True -\n              spmf\n               (R1_14_OT\n                 (x = (a1 \\<longrightarrow> \\<not> a2),\n                  x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                  x = (a1 \\<or> a2))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A view x))\n               True\\<bar>)\n    \\<in> borel_measurable (measure_spmf coin_spmf)\n 3. integrable (measure_spmf coin_spmf) ?g1\n 4. \\<And>x.\n       x \\<in> space (measure_spmf coin_spmf) \\<Longrightarrow>\n       \\<bar>spmf\n              (S1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True -\n             spmf\n              (R1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>\n       \\<le> ?g1 x\n 5. integral\\<^sup>L (measure_spmf coin_spmf) ?g1 \\<le> adv_14_OT", "apply(cases a2)"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>\\<not> a1; a2\\<rbrakk>\n       \\<Longrightarrow> \\<bar>spmf\n                                (S1_14_OT\n                                  (x = (a1 \\<longrightarrow> \\<not> a2),\n                                   x = (a1 \\<longrightarrow> a2),\n                                   x = (a1 \\<or> \\<not> a2),\n                                   x = (a1 \\<or> a2))\n                                  () \\<bind>\n                                 (\\<lambda>view. A view x))\n                                True\\<bar> +\n                         \\<bar>spmf\n                                (R1_14_OT\n                                  (x = (a1 \\<longrightarrow> \\<not> a2),\n                                   x = (a1 \\<longrightarrow> a2),\n                                   x = (a1 \\<or> \\<not> a2),\n                                   x = (a1 \\<or> a2))\n                                  (b1, b2) \\<bind>\n                                 (\\<lambda>view. A view x))\n                                True\\<bar>\n                         \\<le> 2\n 2. \\<And>x.\n       \\<lbrakk>\\<not> a1; \\<not> a2\\<rbrakk>\n       \\<Longrightarrow> \\<bar>spmf\n                                (S1_14_OT\n                                  (x = (a1 \\<longrightarrow> \\<not> a2),\n                                   x = (a1 \\<longrightarrow> a2),\n                                   x = (a1 \\<or> \\<not> a2),\n                                   x = (a1 \\<or> a2))\n                                  () \\<bind>\n                                 (\\<lambda>view. A view x))\n                                True\\<bar> +\n                         \\<bar>spmf\n                                (R1_14_OT\n                                  (x = (a1 \\<longrightarrow> \\<not> a2),\n                                   x = (a1 \\<longrightarrow> a2),\n                                   x = (a1 \\<or> \\<not> a2),\n                                   x = (a1 \\<or> a2))\n                                  (b1, b2) \\<bind>\n                                 (\\<lambda>view. A view x))\n                                True\\<bar>\n                         \\<le> 2\n 3. (\\<lambda>x.\n        \\<bar>spmf\n               (S1_14_OT\n                 (x = (a1 \\<longrightarrow> \\<not> a2),\n                  x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                  x = (a1 \\<or> a2))\n                 () \\<bind>\n                (\\<lambda>view. A view x))\n               True -\n              spmf\n               (R1_14_OT\n                 (x = (a1 \\<longrightarrow> \\<not> a2),\n                  x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                  x = (a1 \\<or> a2))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A view x))\n               True\\<bar>)\n    \\<in> borel_measurable (measure_spmf coin_spmf)\n 4. integrable (measure_spmf coin_spmf) ?g1\n 5. \\<And>x.\n       x \\<in> space (measure_spmf coin_spmf) \\<Longrightarrow>\n       \\<bar>spmf\n              (S1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True -\n             spmf\n              (R1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>\n       \\<le> ?g1 x\n 6. integral\\<^sup>L (measure_spmf coin_spmf) ?g1 \\<le> adv_14_OT", "apply(auto)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>\\<not> a1; a2\\<rbrakk>\n       \\<Longrightarrow> spmf\n                          (S1_14_OT (x, x, \\<not> x, x) () \\<bind>\n                           (\\<lambda>view. A view x))\n                          True +\n                         spmf\n                          (R1_14_OT (x, x, \\<not> x, x) (b1, b2) \\<bind>\n                           (\\<lambda>view. A view x))\n                          True\n                         \\<le> 2\n 2. \\<And>x.\n       \\<lbrakk>\\<not> a1; \\<not> a2\\<rbrakk>\n       \\<Longrightarrow> spmf\n                          (S1_14_OT (x, x, x, \\<not> x) () \\<bind>\n                           (\\<lambda>view. A view x))\n                          True +\n                         spmf\n                          (R1_14_OT (x, x, x, \\<not> x) (b1, b2) \\<bind>\n                           (\\<lambda>view. A view x))\n                          True\n                         \\<le> 2\n 3. \\<And>x.\n       x \\<in> space (measure_spmf coin_spmf) \\<Longrightarrow>\n       \\<bar>spmf\n              (S1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True -\n             spmf\n              (R1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>\n       \\<le> adv_14_OT", "subgoal for M"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<not> a1; a2\\<rbrakk>\n    \\<Longrightarrow> spmf\n                       (S1_14_OT (M, M, \\<not> M, M) () \\<bind>\n                        (\\<lambda>view. A view M))\n                       True +\n                      spmf\n                       (R1_14_OT (M, M, \\<not> M, M) (b1, b2) \\<bind>\n                        (\\<lambda>view. A view M))\n                       True\n                      \\<le> 2", "using pmf_le_1[of \"R1_14_OT  (M, M, \\<not> M, M) (b1,b2) \\<bind>  (\\<lambda> view. A view M)\" \"Some True\"] \n        pmf_le_1[of \"S1_14_OT (M, M, \\<not> M, M) () \\<bind>  (\\<lambda> view. A view M)\" \"Some True\"]"], ["proof (prove)\nusing this:\n  spmf\n   (R1_14_OT (M, M, \\<not> M, M) (b1, b2) \\<bind> (\\<lambda>view. A view M))\n   True\n  \\<le> 1\n  spmf (S1_14_OT (M, M, \\<not> M, M) () \\<bind> (\\<lambda>view. A view M))\n   True\n  \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<not> a1; a2\\<rbrakk>\n    \\<Longrightarrow> spmf\n                       (S1_14_OT (M, M, \\<not> M, M) () \\<bind>\n                        (\\<lambda>view. A view M))\n                       True +\n                      spmf\n                       (R1_14_OT (M, M, \\<not> M, M) (b1, b2) \\<bind>\n                        (\\<lambda>view. A view M))\n                       True\n                      \\<le> 2", "by(simp)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>\\<not> a1; \\<not> a2\\<rbrakk>\n       \\<Longrightarrow> spmf\n                          (S1_14_OT (x, x, x, \\<not> x) () \\<bind>\n                           (\\<lambda>view. A view x))\n                          True +\n                         spmf\n                          (R1_14_OT (x, x, x, \\<not> x) (b1, b2) \\<bind>\n                           (\\<lambda>view. A view x))\n                          True\n                         \\<le> 2\n 2. \\<And>x.\n       x \\<in> space (measure_spmf coin_spmf) \\<Longrightarrow>\n       \\<bar>spmf\n              (S1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True -\n             spmf\n              (R1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>\n       \\<le> adv_14_OT", "subgoal for M"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<not> a1; \\<not> a2\\<rbrakk>\n    \\<Longrightarrow> spmf\n                       (S1_14_OT (M, M, M, \\<not> M) () \\<bind>\n                        (\\<lambda>view. A view M))\n                       True +\n                      spmf\n                       (R1_14_OT (M, M, M, \\<not> M) (b1, b2) \\<bind>\n                        (\\<lambda>view. A view M))\n                       True\n                      \\<le> 2", "using pmf_le_1[of \"R1_14_OT  (M, M, M, \\<not> M) (b1,b2) \\<bind>  (\\<lambda> view. A view M)\" \"Some True\"] \n        pmf_le_1[of \"S1_14_OT (M, M, M, \\<not> M) () \\<bind>  (\\<lambda> view. A view M)\" \"Some True\"]"], ["proof (prove)\nusing this:\n  spmf\n   (R1_14_OT (M, M, M, \\<not> M) (b1, b2) \\<bind> (\\<lambda>view. A view M))\n   True\n  \\<le> 1\n  spmf (S1_14_OT (M, M, M, \\<not> M) () \\<bind> (\\<lambda>view. A view M))\n   True\n  \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<not> a1; \\<not> a2\\<rbrakk>\n    \\<Longrightarrow> spmf\n                       (S1_14_OT (M, M, M, \\<not> M) () \\<bind>\n                        (\\<lambda>view. A view M))\n                       True +\n                      spmf\n                       (R1_14_OT (M, M, M, \\<not> M) (b1, b2) \\<bind>\n                        (\\<lambda>view. A view M))\n                       True\n                      \\<le> 2", "by(simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space (measure_spmf coin_spmf) \\<Longrightarrow>\n       \\<bar>spmf\n              (S1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True -\n             spmf\n              (R1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>\n       \\<le> adv_14_OT", "using ass_adv_14_OT"], ["proof (prove)\nusing this:\n  \\<bar>spmf (S1_14_OT ?msgs () \\<bind> ?D) True -\n        spmf (R1_14_OT ?msgs (?c0.0, ?c1.0) \\<bind> ?D) True\\<bar>\n  \\<le> adv_14_OT\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space (measure_spmf coin_spmf) \\<Longrightarrow>\n       \\<bar>spmf\n              (S1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                () \\<bind>\n               (\\<lambda>view. A view x))\n              True -\n             spmf\n              (R1_14_OT\n                (x = (a1 \\<longrightarrow> \\<not> a2),\n                 x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n                 x = (a1 \\<or> a2))\n                (b1, b2) \\<bind>\n               (\\<lambda>view. A view x))\n              True\\<bar>\n       \\<le> adv_14_OT", "by fast"], ["proof (state)\nthis:\n  LINT x|measure_spmf coin_spmf.\n     \\<bar>spmf\n            (S1_14_OT\n              (x = (a1 \\<longrightarrow> \\<not> a2),\n               x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n               x = (a1 \\<or> a2))\n              () \\<bind>\n             (\\<lambda>view. A view x))\n            True -\n           spmf\n            (R1_14_OT\n              (x = (a1 \\<longrightarrow> \\<not> a2),\n               x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n               x = (a1 \\<or> a2))\n              (b1, b2) \\<bind>\n             (\\<lambda>view. A view x))\n            True\\<bar>\n  \\<le> adv_14_OT\n\ngoal (1 subgoal):\n 1. \\<bar>spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                S1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 () \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True -\n          spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                R1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True\\<bar>\n    \\<le> adv_14_OT", "ultimately"], ["proof (chain)\npicking this:\n  \\<bar>spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              S1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               () \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True -\n        spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              R1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               (b1, b2) \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True\\<bar>\n  \\<le> LINT x|measure_spmf coin_spmf.\n           \\<bar>spmf\n                  (S1_14_OT\n                    (x = (a1 \\<longrightarrow> \\<not> a2),\n                     x = (a1 \\<longrightarrow> a2),\n                     x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2))\n                    () \\<bind>\n                   (\\<lambda>view. A view x))\n                  True -\n                 spmf\n                  (R1_14_OT\n                    (x = (a1 \\<longrightarrow> \\<not> a2),\n                     x = (a1 \\<longrightarrow> a2),\n                     x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2))\n                    (b1, b2) \\<bind>\n                   (\\<lambda>view. A view x))\n                  True\\<bar>\n  LINT x|measure_spmf coin_spmf.\n     \\<bar>spmf\n            (S1_14_OT\n              (x = (a1 \\<longrightarrow> \\<not> a2),\n               x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n               x = (a1 \\<or> a2))\n              () \\<bind>\n             (\\<lambda>view. A view x))\n            True -\n           spmf\n            (R1_14_OT\n              (x = (a1 \\<longrightarrow> \\<not> a2),\n               x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n               x = (a1 \\<or> a2))\n              (b1, b2) \\<bind>\n             (\\<lambda>view. A view x))\n            True\\<bar>\n  \\<le> adv_14_OT", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              S1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               () \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True -\n        spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              R1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               (b1, b2) \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True\\<bar>\n  \\<le> LINT x|measure_spmf coin_spmf.\n           \\<bar>spmf\n                  (S1_14_OT\n                    (x = (a1 \\<longrightarrow> \\<not> a2),\n                     x = (a1 \\<longrightarrow> a2),\n                     x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2))\n                    () \\<bind>\n                   (\\<lambda>view. A view x))\n                  True -\n                 spmf\n                  (R1_14_OT\n                    (x = (a1 \\<longrightarrow> \\<not> a2),\n                     x = (a1 \\<longrightarrow> a2),\n                     x = (a1 \\<or> \\<not> a2), x = (a1 \\<or> a2))\n                    (b1, b2) \\<bind>\n                   (\\<lambda>view. A view x))\n                  True\\<bar>\n  LINT x|measure_spmf coin_spmf.\n     \\<bar>spmf\n            (S1_14_OT\n              (x = (a1 \\<longrightarrow> \\<not> a2),\n               x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n               x = (a1 \\<or> a2))\n              () \\<bind>\n             (\\<lambda>view. A view x))\n            True -\n           spmf\n            (R1_14_OT\n              (x = (a1 \\<longrightarrow> \\<not> a2),\n               x = (a1 \\<longrightarrow> a2), x = (a1 \\<or> \\<not> a2),\n               x = (a1 \\<or> a2))\n              (b1, b2) \\<bind>\n             (\\<lambda>view. A view x))\n            True\\<bar>\n  \\<le> adv_14_OT\n\ngoal (1 subgoal):\n 1. \\<bar>spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                S1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 () \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True -\n          spmf\n           (coin_spmf \\<bind>\n            (\\<lambda>\\<sigma>.\n                R1_14_OT\n                 (\\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                  \\<sigma> \\<oplus>\n                  (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                 (b1, b2) \\<bind>\n                (\\<lambda>view. A view \\<sigma>)))\n           True\\<bar>\n    \\<le> adv_14_OT", "by simp"], ["proof (state)\nthis:\n  \\<bar>spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              S1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               () \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True -\n        spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              R1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               (b1, b2) \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True\\<bar>\n  \\<le> adv_14_OT\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma security_and_P1:\n  shows \"\\<bar>spmf ((and_funct (a1, a2) (b1,b2)) \\<bind> (\\<lambda> (s1, s2). (S1_and' (a1,a2) (b1,b2) s1) \n              \\<bind> (D :: (((bool \\<times> bool) \\<times> bool \\<times> 'v_14_OT1) \\<times> (share_1 \\<times> share_2)) \\<Rightarrow> bool spmf))) True - \n                    spmf ((and_R1 (a1, a2) (b1,b2)) \\<bind> D) True\\<bar> \\<le> adv_14_OT\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>spmf\n           (and_funct (a1, a2) (b1, b2) \\<bind>\n            (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n           True -\n          spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar>\n    \\<le> adv_14_OT", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>spmf\n           (and_funct (a1, a2) (b1, b2) \\<bind>\n            (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n           True -\n          spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar>\n    \\<le> adv_14_OT", "obtain A :: \"'v_14_OT1 \\<Rightarrow> bool \\<Rightarrow> bool spmf\" where A: \n    \"\\<bar>spmf ((and_funct (a1, a2) (b1,b2)) \\<bind> (\\<lambda> (s1, s2). (S1_and' (a1,a2) (b1,b2) s1) \\<bind> D)) True - spmf ((and_R1 (a1, a2) (b1,b2)) \\<bind> D) True\\<bar> =\n       \\<bar>spmf (coin_spmf \\<bind> (\\<lambda> \\<sigma>. S1_14_OT ((\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> True))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> True)))) () \n         \\<bind>  (\\<lambda> view. A view \\<sigma>))) True - spmf (coin_spmf \n           \\<bind> (\\<lambda> \\<sigma>. R1_14_OT ((\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> True))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> False))), (\\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> True)))) (b1, b2)\n             \\<bind> (\\<lambda> view. A view \\<sigma>))) True\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>A.\n        \\<bar>spmf\n               (and_funct (a1, a2) (b1, b2) \\<bind>\n                (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n               True -\n              spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar> =\n        \\<bar>spmf\n               (coin_spmf \\<bind>\n                (\\<lambda>\\<sigma>.\n                    S1_14_OT\n                     (\\<sigma> \\<oplus>\n                      (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                      \\<sigma> \\<oplus>\n                      (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                      \\<sigma> \\<oplus>\n                      (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                      \\<sigma> \\<oplus>\n                      (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                     () \\<bind>\n                    (\\<lambda>view. A view \\<sigma>)))\n               True -\n              spmf\n               (coin_spmf \\<bind>\n                (\\<lambda>\\<sigma>.\n                    R1_14_OT\n                     (\\<sigma> \\<oplus>\n                      (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                      \\<sigma> \\<oplus>\n                      (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                      \\<sigma> \\<oplus>\n                      (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                      \\<sigma> \\<oplus>\n                      (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                     (b1, b2) \\<bind>\n                    (\\<lambda>view. A view \\<sigma>)))\n               True\\<bar> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using sec_ex_P1_and"], ["proof (prove)\nusing this:\n  \\<exists>A.\n     \\<bar>spmf\n            (and_funct (?a1.0, ?a2.0) (?b1.0, ?b2.0) \\<bind>\n             (\\<lambda>(s1, s2).\n                 S1_and' (?a1.0, ?a2.0) (?b1.0, ?b2.0) s1 \\<bind> ?D))\n            True -\n           spmf (and_R1 (?a1.0, ?a2.0) (?b1.0, ?b2.0) \\<bind> ?D)\n            True\\<bar> =\n     \\<bar>spmf\n            (coin_spmf \\<bind>\n             (\\<lambda>\\<sigma>.\n                 S1_14_OT\n                  (\\<sigma> \\<oplus>\n                   (?a1.0 \\<oplus> False \\<and> ?a2.0 \\<oplus> False),\n                   \\<sigma> \\<oplus>\n                   (?a1.0 \\<oplus> False \\<and> ?a2.0 \\<oplus> True),\n                   \\<sigma> \\<oplus>\n                   (?a1.0 \\<oplus> True \\<and> ?a2.0 \\<oplus> False),\n                   \\<sigma> \\<oplus>\n                   (?a1.0 \\<oplus> True \\<and> ?a2.0 \\<oplus> True))\n                  () \\<bind>\n                 (\\<lambda>view. A view \\<sigma>)))\n            True -\n           spmf\n            (coin_spmf \\<bind>\n             (\\<lambda>\\<sigma>.\n                 R1_14_OT\n                  (\\<sigma> \\<oplus>\n                   (?a1.0 \\<oplus> False \\<and> ?a2.0 \\<oplus> False),\n                   \\<sigma> \\<oplus>\n                   (?a1.0 \\<oplus> False \\<and> ?a2.0 \\<oplus> True),\n                   \\<sigma> \\<oplus>\n                   (?a1.0 \\<oplus> True \\<and> ?a2.0 \\<oplus> False),\n                   \\<sigma> \\<oplus>\n                   (?a1.0 \\<oplus> True \\<and> ?a2.0 \\<oplus> True))\n                  (?b1.0, ?b2.0) \\<bind>\n                 (\\<lambda>view. A view \\<sigma>)))\n            True\\<bar>\n\ngoal (1 subgoal):\n 1. (\\<And>A.\n        \\<bar>spmf\n               (and_funct (a1, a2) (b1, b2) \\<bind>\n                (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n               True -\n              spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar> =\n        \\<bar>spmf\n               (coin_spmf \\<bind>\n                (\\<lambda>\\<sigma>.\n                    S1_14_OT\n                     (\\<sigma> \\<oplus>\n                      (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                      \\<sigma> \\<oplus>\n                      (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                      \\<sigma> \\<oplus>\n                      (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                      \\<sigma> \\<oplus>\n                      (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                     () \\<bind>\n                    (\\<lambda>view. A view \\<sigma>)))\n               True -\n              spmf\n               (coin_spmf \\<bind>\n                (\\<lambda>\\<sigma>.\n                    R1_14_OT\n                     (\\<sigma> \\<oplus>\n                      (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                      \\<sigma> \\<oplus>\n                      (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                      \\<sigma> \\<oplus>\n                      (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                      \\<sigma> \\<oplus>\n                      (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n                     (b1, b2) \\<bind>\n                    (\\<lambda>view. A view \\<sigma>)))\n               True\\<bar> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  \\<bar>spmf\n         (and_funct (a1, a2) (b1, b2) \\<bind>\n          (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n         True -\n        spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar> =\n  \\<bar>spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              S1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               () \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True -\n        spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              R1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               (b1, b2) \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>spmf\n           (and_funct (a1, a2) (b1, b2) \\<bind>\n            (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n           True -\n          spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar>\n    \\<le> adv_14_OT", "then"], ["proof (chain)\npicking this:\n  \\<bar>spmf\n         (and_funct (a1, a2) (b1, b2) \\<bind>\n          (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n         True -\n        spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar> =\n  \\<bar>spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              S1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               () \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True -\n        spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              R1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               (b1, b2) \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True\\<bar>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>spmf\n         (and_funct (a1, a2) (b1, b2) \\<bind>\n          (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n         True -\n        spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar> =\n  \\<bar>spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              S1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               () \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True -\n        spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              R1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               (b1, b2) \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>spmf\n           (and_funct (a1, a2) (b1, b2) \\<bind>\n            (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n           True -\n          spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar>\n    \\<le> adv_14_OT", "using bound_14_OT[of \"a1\" \"a2\" \"A\" \"b1\" \"b2\" ]"], ["proof (prove)\nusing this:\n  \\<bar>spmf\n         (and_funct (a1, a2) (b1, b2) \\<bind>\n          (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n         True -\n        spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar> =\n  \\<bar>spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              S1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               () \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True -\n        spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              R1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               (b1, b2) \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True\\<bar>\n  \\<bar>spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              S1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               () \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True -\n        spmf\n         (coin_spmf \\<bind>\n          (\\<lambda>\\<sigma>.\n              R1_14_OT\n               (\\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> False \\<and> a2 \\<oplus> True),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> False),\n                \\<sigma> \\<oplus>\n                (a1 \\<oplus> True \\<and> a2 \\<oplus> True))\n               (b1, b2) \\<bind>\n              (\\<lambda>view. A view \\<sigma>)))\n         True\\<bar>\n  \\<le> adv_14_OT\n\ngoal (1 subgoal):\n 1. \\<bar>spmf\n           (and_funct (a1, a2) (b1, b2) \\<bind>\n            (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n           True -\n          spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar>\n    \\<le> adv_14_OT", "by metis"], ["proof (state)\nthis:\n  \\<bar>spmf\n         (and_funct (a1, a2) (b1, b2) \\<bind>\n          (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n         True -\n        spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar>\n  \\<le> adv_14_OT\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma security_and_P1':\n  shows \"\\<bar>spmf ((and_R1 (a1, a2) (b1,b2)) \\<bind> D) True - \n           spmf ((and_funct (a1, a2) (b1,b2)) \\<bind> (\\<lambda> (s1, s2). (S1_and' (a1,a2) (b1,b2) s1) \n            \\<bind> (D :: (((bool \\<times> bool) \\<times> bool \\<times> 'v_14_OT1) \\<times> (share_1 \\<times> share_2)) \\<Rightarrow> bool spmf))) True\\<bar> \\<le> adv_14_OT\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True -\n          spmf\n           (and_funct (a1, a2) (b1, b2) \\<bind>\n            (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n           True\\<bar>\n    \\<le> adv_14_OT", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True -\n          spmf\n           (and_funct (a1, a2) (b1, b2) \\<bind>\n            (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n           True\\<bar>\n    \\<le> adv_14_OT", "have \"\\<bar>spmf ((and_R1 (a1, a2) (b1,b2)) \\<bind> D) True - \n          spmf ((and_funct (a1, a2) (b1,b2)) \\<bind> (\\<lambda> (s1, s2). (S1_and' (a1,a2) (b1,b2) s1) \n            \\<bind> (D :: (((bool \\<times> bool) \\<times> bool \\<times> 'v_14_OT1) \\<times> (share_1 \\<times> share_2)) \\<Rightarrow> bool spmf))) True\\<bar> =\n              \\<bar>spmf ((and_funct (a1, a2) (b1,b2)) \\<bind> (\\<lambda> (s1, s2). (S1_and' (a1,a2) (b1,b2) s1) \n                \\<bind> (D :: (((bool \\<times> bool) \\<times> bool \\<times> 'v_14_OT1) \\<times> (share_1 \\<times> share_2)) \\<Rightarrow> bool spmf))) True - \n                  spmf ((and_R1 (a1, a2) (b1,b2)) \\<bind> D) True\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True -\n          spmf\n           (and_funct (a1, a2) (b1, b2) \\<bind>\n            (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n           True\\<bar> =\n    \\<bar>spmf\n           (and_funct (a1, a2) (b1, b2) \\<bind>\n            (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n           True -\n          spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar>", "using abs_minus_commute"], ["proof (prove)\nusing this:\n  \\<bar>?a - ?b\\<bar> = \\<bar>?b - ?a\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True -\n          spmf\n           (and_funct (a1, a2) (b1, b2) \\<bind>\n            (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n           True\\<bar> =\n    \\<bar>spmf\n           (and_funct (a1, a2) (b1, b2) \\<bind>\n            (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n           True -\n          spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar>", "by blast"], ["proof (state)\nthis:\n  \\<bar>spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True -\n        spmf\n         (and_funct (a1, a2) (b1, b2) \\<bind>\n          (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n         True\\<bar> =\n  \\<bar>spmf\n         (and_funct (a1, a2) (b1, b2) \\<bind>\n          (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n         True -\n        spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True -\n          spmf\n           (and_funct (a1, a2) (b1, b2) \\<bind>\n            (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n           True\\<bar>\n    \\<le> adv_14_OT", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True -\n        spmf\n         (and_funct (a1, a2) (b1, b2) \\<bind>\n          (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n         True\\<bar> =\n  \\<bar>spmf\n         (and_funct (a1, a2) (b1, b2) \\<bind>\n          (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n         True -\n        spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True -\n          spmf\n           (and_funct (a1, a2) (b1, b2) \\<bind>\n            (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n           True\\<bar>\n    \\<le> adv_14_OT", "using security_and_P1"], ["proof (prove)\nusing this:\n  \\<bar>spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True -\n        spmf\n         (and_funct (a1, a2) (b1, b2) \\<bind>\n          (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n         True\\<bar> =\n  \\<bar>spmf\n         (and_funct (a1, a2) (b1, b2) \\<bind>\n          (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n         True -\n        spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True\\<bar>\n  \\<bar>spmf\n         (and_funct (?a1.0, ?a2.0) (?b1.0, ?b2.0) \\<bind>\n          (\\<lambda>(s1, s2).\n              S1_and' (?a1.0, ?a2.0) (?b1.0, ?b2.0) s1 \\<bind> ?D))\n         True -\n        spmf (and_R1 (?a1.0, ?a2.0) (?b1.0, ?b2.0) \\<bind> ?D) True\\<bar>\n  \\<le> adv_14_OT\n\ngoal (1 subgoal):\n 1. \\<bar>spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True -\n          spmf\n           (and_funct (a1, a2) (b1, b2) \\<bind>\n            (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n           True\\<bar>\n    \\<le> adv_14_OT", "by simp"], ["proof (state)\nthis:\n  \\<bar>spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True -\n        spmf\n         (and_funct (a1, a2) (b1, b2) \\<bind>\n          (\\<lambda>(s1, s2). S1_and' (a1, a2) (b1, b2) s1 \\<bind> D))\n         True\\<bar>\n  \\<le> adv_14_OT\n\ngoal:\nNo subgoals!", "qed"], ["", "definition and_R2 :: \"(share_1 \\<times> share_2) \\<Rightarrow> (share_2 \\<times> share_1) \\<Rightarrow> (((bool \\<times> bool) \\<times> 'v_14_OT2) \\<times> (share_1 \\<times> share_2)) spmf\"\n  where \"and_R2 A B = do {\n    let (a1, a2) = A;\n    let (b1,b2) = B;\n    \\<sigma> \\<leftarrow> coin_spmf;\n    let s0 = \\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> False));   \n    let s1 = \\<sigma> \\<oplus> ((a1 \\<oplus> False) \\<and> (a2 \\<oplus> True));   \n    let s2 = \\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> False));   \n    let s3 = \\<sigma> \\<oplus> ((a1 \\<oplus> True) \\<and> (a2 \\<oplus> True)); \n    (_, s) \\<leftarrow> protocol_14_OT (s0,s1,s2,s3) B;\n    V \\<leftarrow> R2_14_OT (s0,s1,s2,s3) B;\n    return_spmf ((B, V), (\\<sigma>, s))}\""], ["", "lemma lossless_and_R2: \"lossless_spmf (and_R2 A B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lossless_spmf (and_R2 A B)", "apply(simp add: and_R2_def split_def lossless_R2_14_OT lossless_protocol_14_OT Let_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x.\n       (\\<exists>b.\n           ((), b)\n           \\<in> set_spmf\n                  (protocol_14_OT\n                    (x = (fst A \\<longrightarrow> \\<not> snd A),\n                     x = (fst A \\<longrightarrow> snd A),\n                     x = (fst A \\<or> \\<not> snd A),\n                     x = (fst A \\<or> snd A))\n                    B)) \\<longrightarrow>\n       lossless_spmf\n        (R2_14_OT\n          (x = (fst A \\<longrightarrow> \\<not> snd A),\n           x = (fst A \\<longrightarrow> snd A),\n           x = (fst A \\<or> \\<not> snd A), x = (fst A \\<or> snd A))\n          B)", "by (metis lossless_R2_14_OT prod.collapse)"], ["", "definition S2_and :: \"(share_1 \\<times> share_2) \\<Rightarrow> bool \\<Rightarrow> (((bool \\<times> bool) \\<times> 'v_14_OT2)) spmf\"\n  where \"S2_and B s2 =  do {\n    let (a2,b2) = B;\n    V :: 'v_14_OT2 \\<leftarrow> S2_14_OT (a2,b2) s2;\n    return_spmf ((B, V))}\""], ["", "definition out2 :: \"(share_1 \\<times> share_2) \\<Rightarrow> (share_1 \\<times> share_2) \\<Rightarrow> bool \\<Rightarrow> (share_1 \\<times> share_2) spmf\"\n  where \"out2 B A s2 = do {\n    let (a1, b1) = A;\n    let (a2,b2) = B;\n    let s1 = s2 \\<oplus> ((a1 \\<oplus> a2) \\<and> (b1 \\<oplus> b2));\n    return_spmf (s1, s2)}\""], ["", "definition S2_and' :: \"(share_1 \\<times> share_2) \\<Rightarrow> (share_1 \\<times> share_2) \\<Rightarrow> bool \\<Rightarrow> (((bool \\<times> bool) \\<times> 'v_14_OT2) \\<times> (share_1 \\<times> share_2)) spmf\"\n  where \"S2_and' B A s2 =  do {\n    let (a1, a2) = A;\n    let (b1,b2) = B;\n    V :: 'v_14_OT2 \\<leftarrow> S2_14_OT B s2;\n    let s1 = s2 \\<oplus> ((a1 \\<oplus> b1) \\<and> (a2 \\<oplus> b2));\n    return_spmf ((B, V), s1, s2)}\""], ["", "lemma lossless_S2_and: \"lossless_spmf (S2_and B s2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lossless_spmf (S2_and B s2)", "apply(simp add: S2_and_def split_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. lossless_spmf (S2_14_OT B s2)", "by(metis prod.collapse lossless_S2_14_OT)"], ["", "sublocale and_secret_sharing: sim_non_det_def and_R1 S1_and out1 and_R2 S2_and out2 and_funct"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "lemma ideal_S1_and: \"and_secret_sharing.Ideal1 (a1, b1) (a2, b2) s2 = S1_and' (a1, b1) (a2, b2) s2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. and_secret_sharing.Ideal1 (a1, b1) (a2, b2) s2 =\n    S1_and' (a1, b1) (a2, b2) s2", "by(simp add: Let_def and_secret_sharing.Ideal1_def S1_and'_def split_def out1_def S1_and_def)"], ["", "lemma and_P2_security: \"and_secret_sharing.perfect_sec_P2 m1 m2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. and_secret_sharing.perfect_sec_P2 m1 m2", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. and_secret_sharing.perfect_sec_P2 m1 m2", "have \"and_R2 (a1, b1) (a2, b2) = and_funct (a1, b1) (a2, b2) \\<bind> (\\<lambda>(s1, s2). and_secret_sharing.Ideal2 (a2, b2) (a1, b1) s2)\"\n    for a1 a2 b1 b2"], ["proof (prove)\ngoal (1 subgoal):\n 1. and_R2 (a1, b1) (a2, b2) =\n    and_funct (a1, b1) (a2, b2) \\<bind>\n    (\\<lambda>(s1, s2). and_secret_sharing.Ideal2 (a2, b2) (a1, b1) s2)", "apply(auto simp add: split_def inf_th_14_OT_P4  S2_and'_def and_R2_def and_funct_def Let_def correct_14[symmetric] and_secret_sharing.Ideal2_def S2_and_def out2_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. coin_spmf \\<bind>\n    (\\<lambda>\\<sigma>.\n        funct_OT_14\n         (\\<sigma> = (a1 \\<longrightarrow> \\<not> b1),\n          \\<sigma> = (a1 \\<longrightarrow> b1),\n          \\<sigma> = (a1 \\<or> \\<not> b1), \\<sigma> = (a1 \\<or> b1))\n         (a2, b2) \\<bind>\n        (\\<lambda>p.\n            funct_OT_14\n             (\\<sigma> = (a1 \\<longrightarrow> \\<not> b1),\n              \\<sigma> = (a1 \\<longrightarrow> b1),\n              \\<sigma> = (a1 \\<or> \\<not> b1), \\<sigma> = (a1 \\<or> b1))\n             (a2, b2) \\<bind>\n            (\\<lambda>y.\n                S2_14_OT (a2, b2) (snd y) \\<bind>\n                (\\<lambda>V.\n                    return_spmf (((a2, b2), V), \\<sigma>, snd p))))) =\n    coin_spmf \\<bind>\n    (\\<lambda>y.\n        S2_14_OT (a2, b2) (y = (a1 = a2 \\<or> b1 = b2)) \\<bind>\n        (\\<lambda>ya.\n            return_spmf\n             (((a2, b2), ya),\n              (y = (a1 = a2 \\<or> b1 = b2)) = (a1 = a2 \\<or> b1 = b2),\n              y = (a1 = a2 \\<or> b1 = b2))))", "apply(simp only: funct_14)"], ["proof (prove)\ngoal (1 subgoal):\n 1. coin_spmf \\<bind>\n    (\\<lambda>\\<sigma>.\n        return_spmf\n         ((),\n          if a2\n          then if b2 then \\<sigma> = (a1 \\<or> b1)\n               else \\<sigma> = (a1 \\<or> \\<not> b1)\n          else if b2 then \\<sigma> = (a1 \\<longrightarrow> b1)\n               else \\<sigma> = (a1 \\<longrightarrow> \\<not> b1)) \\<bind>\n        (\\<lambda>p.\n            return_spmf\n             ((),\n              if a2\n              then if b2 then \\<sigma> = (a1 \\<or> b1)\n                   else \\<sigma> = (a1 \\<or> \\<not> b1)\n              else if b2 then \\<sigma> = (a1 \\<longrightarrow> b1)\n                   else \\<sigma> = (a1 \\<longrightarrow> \\<not> b1)) \\<bind>\n            (\\<lambda>y.\n                S2_14_OT (a2, b2) (snd y) \\<bind>\n                (\\<lambda>V.\n                    return_spmf (((a2, b2), V), \\<sigma>, snd p))))) =\n    coin_spmf \\<bind>\n    (\\<lambda>y.\n        S2_14_OT (a2, b2) (y = (a1 = a2 \\<or> b1 = b2)) \\<bind>\n        (\\<lambda>ya.\n            return_spmf\n             (((a2, b2), ya),\n              (y = (a1 = a2 \\<or> b1 = b2)) = (a1 = a2 \\<or> b1 = b2),\n              y = (a1 = a2 \\<or> b1 = b2))))", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. coin_spmf \\<bind>\n    (\\<lambda>\\<sigma>.\n        S2_14_OT (a2, b2)\n         (if a2\n          then if b2 then \\<sigma> = (a1 \\<or> b1)\n               else \\<sigma> = (a1 \\<or> \\<not> b1)\n          else if b2 then \\<sigma> = (a1 \\<longrightarrow> b1)\n               else \\<sigma> = (a1 \\<longrightarrow> \\<not> b1)) \\<bind>\n        (\\<lambda>V.\n            return_spmf\n             (((a2, b2), V), \\<sigma>,\n              if a2\n              then if b2 then \\<sigma> = (a1 \\<or> b1)\n                   else \\<sigma> = (a1 \\<or> \\<not> b1)\n              else if b2 then \\<sigma> = (a1 \\<longrightarrow> b1)\n                   else \\<sigma> = (a1 \\<longrightarrow> \\<not> b1)))) =\n    coin_spmf \\<bind>\n    (\\<lambda>y.\n        S2_14_OT (a2, b2) (y = (a1 = a2 \\<or> b1 = b2)) \\<bind>\n        (\\<lambda>ya.\n            return_spmf\n             (((a2, b2), ya),\n              (y = (a1 = a2 \\<or> b1 = b2)) = (a1 = a2 \\<or> b1 = b2),\n              y = (a1 = a2 \\<or> b1 = b2))))", "by(cases b1;cases b2; cases a1; cases a2; auto)"], ["proof (state)\nthis:\n  and_R2 (?a1.0, ?b1.0) (?a2.0, ?b2.0) =\n  and_funct (?a1.0, ?b1.0) (?a2.0, ?b2.0) \\<bind>\n  (\\<lambda>(s1, s2).\n      and_secret_sharing.Ideal2 (?a2.0, ?b2.0) (?a1.0, ?b1.0) s2)\n\ngoal (1 subgoal):\n 1. and_secret_sharing.perfect_sec_P2 m1 m2", "thus ?thesis"], ["proof (prove)\nusing this:\n  and_R2 (?a1.0, ?b1.0) (?a2.0, ?b2.0) =\n  and_funct (?a1.0, ?b1.0) (?a2.0, ?b2.0) \\<bind>\n  (\\<lambda>(s1, s2).\n      and_secret_sharing.Ideal2 (?a2.0, ?b2.0) (?a1.0, ?b1.0) s2)\n\ngoal (1 subgoal):\n 1. and_secret_sharing.perfect_sec_P2 m1 m2", "by(simp add: and_secret_sharing.perfect_sec_P2_def; metis  prod.collapse)"], ["proof (state)\nthis:\n  and_secret_sharing.perfect_sec_P2 m1 m2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma and_P1_security: \"and_secret_sharing.adv_P1 m1 m2 D \\<le> adv_14_OT\""], ["proof (prove)\ngoal (1 subgoal):\n 1. and_secret_sharing.adv_P1 m1 m2 D \\<le> adv_14_OT", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. and_secret_sharing.adv_P1 m1 m2 D \\<le> adv_14_OT", "have \"\\<bar>spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True -\n            spmf (and_funct (a1, a2) (b1, b2) \\<bind> (\\<lambda>(s1, s2). \n                and_secret_sharing.Ideal1 (a1, a2) (b1, b2) s1 \\<bind> D)) True\\<bar>\n                    \\<le> adv_14_OT\" for a1 a2 b1 b2"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True -\n          spmf\n           (and_funct (a1, a2) (b1, b2) \\<bind>\n            (\\<lambda>(s1, s2).\n                and_secret_sharing.Ideal1 (a1, a2) (b1, b2) s1 \\<bind> D))\n           True\\<bar>\n    \\<le> adv_14_OT", "using security_and_P1' ideal_S1_and prod.collapse"], ["proof (prove)\nusing this:\n  \\<bar>spmf (and_R1 (?a1.0, ?a2.0) (?b1.0, ?b2.0) \\<bind> ?D) True -\n        spmf\n         (and_funct (?a1.0, ?a2.0) (?b1.0, ?b2.0) \\<bind>\n          (\\<lambda>(s1, s2).\n              S1_and' (?a1.0, ?a2.0) (?b1.0, ?b2.0) s1 \\<bind> ?D))\n         True\\<bar>\n  \\<le> adv_14_OT\n  and_secret_sharing.Ideal1 (?a1.0, ?b1.0) (?a2.0, ?b2.0) ?s2.0 =\n  S1_and' (?a1.0, ?b1.0) (?a2.0, ?b2.0) ?s2.0\n  (fst ?prod, snd ?prod) = ?prod\n\ngoal (1 subgoal):\n 1. \\<bar>spmf (and_R1 (a1, a2) (b1, b2) \\<bind> D) True -\n          spmf\n           (and_funct (a1, a2) (b1, b2) \\<bind>\n            (\\<lambda>(s1, s2).\n                and_secret_sharing.Ideal1 (a1, a2) (b1, b2) s1 \\<bind> D))\n           True\\<bar>\n    \\<le> adv_14_OT", "by simp"], ["proof (state)\nthis:\n  \\<bar>spmf (and_R1 (?a1.0, ?a2.0) (?b1.0, ?b2.0) \\<bind> D) True -\n        spmf\n         (and_funct (?a1.0, ?a2.0) (?b1.0, ?b2.0) \\<bind>\n          (\\<lambda>(s1, s2).\n              and_secret_sharing.Ideal1 (?a1.0, ?a2.0) (?b1.0, ?b2.0)\n               s1 \\<bind>\n              D))\n         True\\<bar>\n  \\<le> adv_14_OT\n\ngoal (1 subgoal):\n 1. and_secret_sharing.adv_P1 m1 m2 D \\<le> adv_14_OT", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>spmf (and_R1 (?a1.0, ?a2.0) (?b1.0, ?b2.0) \\<bind> D) True -\n        spmf\n         (and_funct (?a1.0, ?a2.0) (?b1.0, ?b2.0) \\<bind>\n          (\\<lambda>(s1, s2).\n              and_secret_sharing.Ideal1 (?a1.0, ?a2.0) (?b1.0, ?b2.0)\n               s1 \\<bind>\n              D))\n         True\\<bar>\n  \\<le> adv_14_OT\n\ngoal (1 subgoal):\n 1. and_secret_sharing.adv_P1 m1 m2 D \\<le> adv_14_OT", "by(simp add:  and_secret_sharing.adv_P1_def; metis prod.collapse)"], ["proof (state)\nthis:\n  and_secret_sharing.adv_P1 m1 m2 D \\<le> adv_14_OT\n\ngoal:\nNo subgoals!", "qed"], ["", "definition \"F = {and_evaluate, xor_evaluate}\""], ["", "lemma share_reconstruct_xor: \"share x \\<bind> (\\<lambda>(a1, a2). share y \\<bind> (\\<lambda>(b1, b2). \n          xor_protocol (a1, b1) (a2, b2) \\<bind> (\\<lambda>(a, b). \n              reconstruct (a, b)))) = xor_evaluate x y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. share x \\<bind>\n    (\\<lambda>(a1, a2).\n        share y \\<bind>\n        (\\<lambda>(b1, b2).\n            xor_protocol (a1, b1) (a2, b2) \\<bind>\n            (\\<lambda>(a, b). reconstruct (a, b)))) =\n    xor_evaluate x y", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. share x \\<bind>\n    (\\<lambda>(a1, a2).\n        share y \\<bind>\n        (\\<lambda>(b1, b2).\n            xor_protocol (a1, b1) (a2, b2) \\<bind>\n            (\\<lambda>(a, b). reconstruct (a, b)))) =\n    xor_evaluate x y", "have \"(((ya = (x = ya)) = (yb = (y = (\\<not> yb))))) = (x = (\\<not> y))\" for ya yb"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((ya = (x = ya)) = (yb = (y = (\\<not> yb)))) = (x = (\\<not> y))", "by auto"], ["proof (state)\nthis:\n  ((?ya = (x = ?ya)) = (?yb = (y = (\\<not> ?yb)))) = (x = (\\<not> y))\n\ngoal (1 subgoal):\n 1. share x \\<bind>\n    (\\<lambda>(a1, a2).\n        share y \\<bind>\n        (\\<lambda>(b1, b2).\n            xor_protocol (a1, b1) (a2, b2) \\<bind>\n            (\\<lambda>(a, b). reconstruct (a, b)))) =\n    xor_evaluate x y", "thus ?thesis"], ["proof (prove)\nusing this:\n  ((?ya = (x = ?ya)) = (?yb = (y = (\\<not> ?yb)))) = (x = (\\<not> y))\n\ngoal (1 subgoal):\n 1. share x \\<bind>\n    (\\<lambda>(a1, a2).\n        share y \\<bind>\n        (\\<lambda>(b1, b2).\n            xor_protocol (a1, b1) (a2, b2) \\<bind>\n            (\\<lambda>(a, b). reconstruct (a, b)))) =\n    xor_evaluate x y", "by(simp add: xor_protocol_def share_def reconstruct_def xor_evaluate_def bind_spmf_const)"], ["proof (state)\nthis:\n  share x \\<bind>\n  (\\<lambda>(a1, a2).\n      share y \\<bind>\n      (\\<lambda>(b1, b2).\n          xor_protocol (a1, b1) (a2, b2) \\<bind>\n          (\\<lambda>(a, b). reconstruct (a, b)))) =\n  xor_evaluate x y\n\ngoal:\nNo subgoals!", "qed"], ["", "sublocale share_correct: secret_sharing_scheme share reconstruct F"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "lemma \"share_correct.sharing_correct input\""], ["proof (prove)\ngoal (1 subgoal):\n 1. share_correct.sharing_correct input", "by(simp add: share_correct.sharing_correct_def reconstruct_share)"], ["", "lemma \"share_correct.correct_share_eval input1 input2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. share_correct.correct_share_eval input1 input2", "unfolding share_correct.correct_share_eval_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>gate_eval\\<in>F.\n       \\<exists>gate_protocol.\n          share input1 \\<bind>\n          (\\<lambda>(s1, s2).\n              share input2 \\<bind>\n              (\\<lambda>(s3, s4).\n                  gate_protocol (s1, s3) (s2, s4) \\<bind>\n                  (\\<lambda>(S1, S2). reconstruct (S1, S2)))) =\n          gate_eval input1 input2", "apply(auto simp add: F_def)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<exists>gate_protocol.\n       share input1 \\<bind>\n       (\\<lambda>(s1, s2).\n           share input2 \\<bind>\n           (\\<lambda>(s3, s4).\n               gate_protocol (s1, s3) (s2, s4) \\<bind> reconstruct)) =\n       and_evaluate input1 input2\n 2. \\<exists>gate_protocol.\n       share input1 \\<bind>\n       (\\<lambda>(s1, s2).\n           share input2 \\<bind>\n           (\\<lambda>(s3, s4).\n               gate_protocol (s1, s3) (s2, s4) \\<bind> reconstruct)) =\n       xor_evaluate input1 input2", "using share_and_reconstruct"], ["proof (prove)\nusing this:\n  share ?x \\<bind>\n  (\\<lambda>(a1, a2).\n      share ?y \\<bind>\n      (\\<lambda>(b1, b2).\n          and_protocol (a1, b1) (a2, b2) \\<bind>\n          (\\<lambda>(a, b). reconstruct (a, b)))) =\n  and_evaluate ?x ?y\n\ngoal (2 subgoals):\n 1. \\<exists>gate_protocol.\n       share input1 \\<bind>\n       (\\<lambda>(s1, s2).\n           share input2 \\<bind>\n           (\\<lambda>(s3, s4).\n               gate_protocol (s1, s3) (s2, s4) \\<bind> reconstruct)) =\n       and_evaluate input1 input2\n 2. \\<exists>gate_protocol.\n       share input1 \\<bind>\n       (\\<lambda>(s1, s2).\n           share input2 \\<bind>\n           (\\<lambda>(s3, s4).\n               gate_protocol (s1, s3) (s2, s4) \\<bind> reconstruct)) =\n       xor_evaluate input1 input2", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>x y.\n        share x \\<bind>\n        (\\<lambda>(a1, a2).\n            share y \\<bind>\n            (\\<lambda>(b1, b2).\n                and_protocol (a1, b1) (a2, b2) \\<bind> reconstruct)) =\n        and_evaluate x y) \\<Longrightarrow>\n    \\<exists>gate_protocol.\n       share input1 \\<bind>\n       (\\<lambda>(s1, s2).\n           share input2 \\<bind>\n           (\\<lambda>(s3, s4).\n               gate_protocol (s1, s3) (s2, s4) \\<bind> reconstruct)) =\n       xor_evaluate input1 input2", "using share_reconstruct_xor"], ["proof (prove)\nusing this:\n  share ?x \\<bind>\n  (\\<lambda>(a1, a2).\n      share ?y \\<bind>\n      (\\<lambda>(b1, b2).\n          xor_protocol (a1, b1) (a2, b2) \\<bind>\n          (\\<lambda>(a, b). reconstruct (a, b)))) =\n  xor_evaluate ?x ?y\n\ngoal (1 subgoal):\n 1. (\\<And>x y.\n        share x \\<bind>\n        (\\<lambda>(a1, a2).\n            share y \\<bind>\n            (\\<lambda>(b1, b2).\n                and_protocol (a1, b1) (a2, b2) \\<bind> reconstruct)) =\n        and_evaluate x y) \\<Longrightarrow>\n    \\<exists>gate_protocol.\n       share input1 \\<bind>\n       (\\<lambda>(s1, s2).\n           share input2 \\<bind>\n           (\\<lambda>(s3, s4).\n               gate_protocol (s1, s3) (s2, s4) \\<bind> reconstruct)) =\n       xor_evaluate input1 input2", "by force"], ["", "end"], ["", "locale gmw_asym =\n  fixes S1_14_OT :: \"nat \\<Rightarrow> msgs_14_OT \\<Rightarrow> unit \\<Rightarrow> 'v_14_OT1 spmf\"\n    and R1_14_OT :: \"nat \\<Rightarrow> msgs_14_OT \\<Rightarrow> choice_14_OT \\<Rightarrow> 'v_14_OT1 spmf\"\n    and S2_14_OT :: \"nat \\<Rightarrow> choice_14_OT \\<Rightarrow> bool \\<Rightarrow> 'v_14_OT2 spmf\" \n    and R2_14_OT :: \"nat \\<Rightarrow> msgs_14_OT \\<Rightarrow> choice_14_OT \\<Rightarrow> 'v_14_OT2 spmf\"\n    and protocol_14_OT :: \"nat \\<Rightarrow> msgs_14_OT \\<Rightarrow> choice_14_OT \\<Rightarrow> (unit \\<times> bool) spmf\"\n    and adv_14_OT :: \"nat \\<Rightarrow> real\"\n  assumes gmw_base: \"\\<And> (n::nat). gmw_base (S1_14_OT n) (R1_14_OT n) (S2_14_OT n) (R2_14_OT n) (protocol_14_OT n) (adv_14_OT n)\"\nbegin"], ["", "sublocale gmw_base \"(S1_14_OT n)\" \"(R1_14_OT n)\" \"(S2_14_OT n)\" \"(R2_14_OT n)\" \"(protocol_14_OT n)\" \"(adv_14_OT n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. gmw_base (S1_14_OT n) (R1_14_OT n) (S2_14_OT n) (R2_14_OT n)\n     (protocol_14_OT n) (adv_14_OT n)", "by (simp add: gmw_base)"], ["", "lemma \"xor_sim_det.perfect_sec_P1 m1 m2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. xor_sim_det.perfect_sec_P1 m1 m2", "by (simp add: P1_xor_inf_th xor_sim_det.perfect_sec_P1_def)"], ["", "lemma \"xor_sim_det.perfect_sec_P2 m1 m2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. xor_sim_det.perfect_sec_P2 m1 m2", "by (simp add: P2_xor_inf_th xor_sim_det.perfect_sec_P2_def)"], ["", "lemma and_P1_adv_negligible:\n  assumes \"negligible (\\<lambda> n. adv_14_OT n)\"\n  shows \"negligible (\\<lambda> n. and_secret_sharing.adv_P1 n m1 m2 D)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Negligible.negligible (\\<lambda>n. and_secret_sharing.adv_P1 n m1 m2 D)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. Negligible.negligible (\\<lambda>n. and_secret_sharing.adv_P1 n m1 m2 D)", "have \"and_secret_sharing.adv_P1 n m1 m2 D \\<le> adv_14_OT n\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. and_secret_sharing.adv_P1 n m1 m2 D \\<le> adv_14_OT n", "by (simp add: and_P1_security)"], ["proof (state)\nthis:\n  and_secret_sharing.adv_P1 ?n m1 m2 D \\<le> adv_14_OT ?n\n\ngoal (1 subgoal):\n 1. Negligible.negligible (\\<lambda>n. and_secret_sharing.adv_P1 n m1 m2 D)", "thus ?thesis"], ["proof (prove)\nusing this:\n  and_secret_sharing.adv_P1 ?n m1 m2 D \\<le> adv_14_OT ?n\n\ngoal (1 subgoal):\n 1. Negligible.negligible (\\<lambda>n. and_secret_sharing.adv_P1 n m1 m2 D)", "using and_secret_sharing.adv_P1_def assms negligible_le"], ["proof (prove)\nusing this:\n  and_secret_sharing.adv_P1 ?n m1 m2 D \\<le> adv_14_OT ?n\n  and_secret_sharing.adv_P1 ?n ?m1.0 ?m2.0 ?D \\<equiv>\n  \\<bar>spmf (and_R1 ?n ?m1.0 ?m2.0 \\<bind> ?D) True -\n        spmf\n         (and_funct ?m1.0 ?m2.0 \\<bind>\n          (\\<lambda>(o1, o2).\n              and_secret_sharing.Ideal1 ?n ?m1.0 ?m2.0 o1 \\<bind> ?D))\n         True\\<bar>\n  Negligible.negligible adv_14_OT\n  \\<lbrakk>Negligible.negligible ?g;\n   \\<And>\\<eta>. \\<bar>?f \\<eta>\\<bar> \\<le> ?g \\<eta>\\<rbrakk>\n  \\<Longrightarrow> Negligible.negligible ?f\n\ngoal (1 subgoal):\n 1. Negligible.negligible (\\<lambda>n. and_secret_sharing.adv_P1 n m1 m2 D)", "by auto"], ["proof (state)\nthis:\n  Negligible.negligible (\\<lambda>n. and_secret_sharing.adv_P1 n m1 m2 D)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma and_P2_security: \"and_secret_sharing.perfect_sec_P2 n m1 m2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. and_secret_sharing.perfect_sec_P2 n m1 m2", "by (simp add: and_P2_security)"], ["", "end"], ["", "end"]]}