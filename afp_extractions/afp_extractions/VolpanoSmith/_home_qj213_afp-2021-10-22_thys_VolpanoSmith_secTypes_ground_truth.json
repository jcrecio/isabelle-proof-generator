{"file_name": "/home/qj213/afp-2021-10-22/thys/VolpanoSmith/secTypes.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/VolpanoSmith", "problem_names": ["lemma exprTypeable:\n  assumes \"fv e \\<subseteq> dom \\<Gamma>\" obtains T where \"\\<Gamma> \\<turnstile> e : T\"", "lemma exprBinopTypeable: \n  assumes \"\\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : T\"\n  shows \"(\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and> (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)\"", "lemma exprTypingHigh: \n  assumes \"\\<Gamma> \\<turnstile> e : T\" and \"x \\<in> fv e\" and \"\\<Gamma> x = Some High\"\n  shows \"\\<Gamma> \\<turnstile> e : High\"", "lemma exprTypingLow: \n  assumes \"\\<Gamma> \\<turnstile> e : Low\" and \"x \\<in> fv e\" shows \"\\<Gamma> x = Some Low\"", "lemma typeableFreevars:\n  assumes \"\\<Gamma> \\<turnstile> e : T\" shows \"fv e \\<subseteq> dom \\<Gamma>\"", "lemma exprNotNone:\nassumes \"\\<Gamma> \\<turnstile> e : T\" and \"fv e \\<subseteq> dom s\"\nshows \"\\<lbrakk>e\\<rbrakk> s \\<noteq> None\"", "lemma lowEquivReflexive: \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s1\"", "lemma lowEquivSymmetric:\n  \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2 \\<Longrightarrow> \\<Gamma> \\<turnstile> s2 \\<approx>\\<^sub>L s1\"", "lemma lowEquivTransitive:\n  \"\\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2; \\<Gamma> \\<turnstile> s2 \\<approx>\\<^sub>L s3\\<rbrakk> \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s3\"", "lemma nonInterferenceI: \n  \"\\<lbrakk>\\<And>s1 s2 s1' s2'. \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2; \\<langle>c,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>; \\<langle>c,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\\<rbrakk> \\<Longrightarrow> nonInterference \\<Gamma> c\"", "lemma interpretLow:\n  assumes \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\" and all:\"\\<forall>V\\<in>fv e. \\<Gamma> V = Some Low\"\n  shows \"\\<lbrakk>e\\<rbrakk> s1 = \\<lbrakk>e\\<rbrakk> s2\"", "lemma interpretLow2:\n  assumes \"\\<Gamma> \\<turnstile> e : Low\" and \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\" shows \"\\<lbrakk>e\\<rbrakk> s1 = \\<lbrakk>e\\<rbrakk> s2\"", "lemma assignNIhighlemma:\n  assumes \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\"  and \"\\<Gamma> V = Some High\" and \"s1' = s1(V:= \\<lbrakk>e\\<rbrakk> s1)\" \n  and \"s2' = s2(V:= \\<lbrakk>e\\<rbrakk> s2)\"\n  shows \"\\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\"", "lemma assignNIlowlemma:\n  assumes \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\"  and \"\\<Gamma> V = Some Low\" and \"\\<Gamma> \\<turnstile> e : Low\" \n  and \"s1' = s1(V:= \\<lbrakk>e\\<rbrakk> s1)\" and \"s2' = s2(V:= \\<lbrakk>e\\<rbrakk> s2)\"\n  shows \"\\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\"", "theorem SeqCompositionality:\n  assumes \"nonInterference \\<Gamma> c1\" and \"nonInterference \\<Gamma> c2\" \n  shows \"nonInterference \\<Gamma> (c1;;c2)\"", "lemma WhileStepInduct:\n  assumes while:\"\\<langle>while (b) c,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\"\n  and body:\"\\<And>s1 s2. \\<langle>c,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>  \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\" and \"\\<Gamma>,High \\<turnstile> c\"\n  shows \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\"", "theorem highBodies:\n  assumes \"\\<Gamma>,High \\<turnstile> c\" and \"\\<langle>c,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\"\n  shows \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\"\n  \\<comment> \\<open>all intermediate states must be well formed, otherwise the proof does not \n  work for uninitialized variables. Thus it is propagated through the \n  theorem conclusion\\<close>", "lemma CondHighCompositionality:\n  assumes \"\\<Gamma>,High \\<turnstile> if (b) c1 else c2\"\n  shows \"nonInterference \\<Gamma> (if (b) c1 else c2)\"", "lemma CondLowCompositionality:\n  assumes \"nonInterference \\<Gamma> c1\" and \"nonInterference \\<Gamma> c2\" and \"\\<Gamma> \\<turnstile> b : Low\" \n  shows \"nonInterference \\<Gamma> (if (b) c1 else c2)\"", "lemma WhileHighCompositionality:\n  assumes \"\\<Gamma>,High \\<turnstile> while (b) c'\"\n  shows \"nonInterference \\<Gamma> (while (b) c')\"", "lemma WhileLowStepInduct:\n  assumes  while1: \"\\<langle>while (b) c',s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\"   \n  and      while2: \"\\<langle>while (b) c',s2\\<rangle>\\<rightarrow>*\\<langle>Skip,s2'\\<rangle>\" \n  and      \"\\<Gamma> \\<turnstile> b : Low\"\n  and      body:\"\\<And>s1 s1' s2 s2'. \\<lbrakk>\\<langle>c',s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>; \\<langle>c',s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>;\n                                   \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<rbrakk>  \\<Longrightarrow>  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\"\n  and      le: \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\"\n  shows    \"\\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\"", "lemma WhileLowCompositionality:\n  assumes \"nonInterference \\<Gamma> c'\" and \"\\<Gamma> \\<turnstile> b : Low\" and \"\\<Gamma>,Low \\<turnstile> c'\"\n  shows \"nonInterference \\<Gamma> (while (b) c')\"", "theorem secTypeImpliesNonInterference:\n  \"\\<Gamma>,T \\<turnstile> c \\<Longrightarrow> nonInterference \\<Gamma> c\""], "translations": [["", "lemma exprTypeable:\n  assumes \"fv e \\<subseteq> dom \\<Gamma>\" obtains T where \"\\<Gamma> \\<turnstile> e : T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>T.\n        \\<Gamma> \\<turnstile> e : T \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>T.\n        \\<Gamma> \\<turnstile> e : T \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "from \\<open>fv e \\<subseteq> dom \\<Gamma>\\<close>"], ["proof (chain)\npicking this:\n  fv e \\<subseteq> dom \\<Gamma>", "have \"\\<exists>T. \\<Gamma> \\<turnstile> e : T\""], ["proof (prove)\nusing this:\n  fv e \\<subseteq> dom \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<exists>T. \\<Gamma> \\<turnstile> e : T", "proof(induct e)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x.\n       fv (Val x) \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n       Ex (secExprTyping \\<Gamma> (Val x))\n 2. \\<And>x.\n       fv (Var x) \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n       Ex (secExprTyping \\<Gamma> (Var x))\n 3. \\<And>e1 x2a e2.\n       \\<lbrakk>fv e1 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n                Ex (secExprTyping \\<Gamma> e1);\n        fv e2 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n        Ex (secExprTyping \\<Gamma> e2);\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> Ex (secExprTyping \\<Gamma>\n                              (e1 \\<guillemotleft>x2a\\<guillemotright> e2))", "case (Val V)"], ["proof (state)\nthis:\n  fv (Val V) \\<subseteq> dom \\<Gamma>\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       fv (Val x) \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n       Ex (secExprTyping \\<Gamma> (Val x))\n 2. \\<And>x.\n       fv (Var x) \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n       Ex (secExprTyping \\<Gamma> (Var x))\n 3. \\<And>e1 x2a e2.\n       \\<lbrakk>fv e1 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n                Ex (secExprTyping \\<Gamma> e1);\n        fv e2 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n        Ex (secExprTyping \\<Gamma> e2);\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> Ex (secExprTyping \\<Gamma>\n                              (e1 \\<guillemotleft>x2a\\<guillemotright> e2))", "have \"\\<Gamma> \\<turnstile> Val V : Low\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> Val V : Low", "by(rule typeVal)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> Val V : Low\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       fv (Val x) \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n       Ex (secExprTyping \\<Gamma> (Val x))\n 2. \\<And>x.\n       fv (Var x) \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n       Ex (secExprTyping \\<Gamma> (Var x))\n 3. \\<And>e1 x2a e2.\n       \\<lbrakk>fv e1 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n                Ex (secExprTyping \\<Gamma> e1);\n        fv e2 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n        Ex (secExprTyping \\<Gamma> e2);\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> Ex (secExprTyping \\<Gamma>\n                              (e1 \\<guillemotleft>x2a\\<guillemotright> e2))", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> Val V : Low\n\ngoal (1 subgoal):\n 1. \\<exists>a. \\<Gamma> \\<turnstile> Val V : a", "by (rule exI)"], ["proof (state)\nthis:\n  \\<exists>a. \\<Gamma> \\<turnstile> Val V : a\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       fv (Var x) \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n       Ex (secExprTyping \\<Gamma> (Var x))\n 2. \\<And>e1 x2a e2.\n       \\<lbrakk>fv e1 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n                Ex (secExprTyping \\<Gamma> e1);\n        fv e2 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n        Ex (secExprTyping \\<Gamma> e2);\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> Ex (secExprTyping \\<Gamma>\n                              (e1 \\<guillemotleft>x2a\\<guillemotright> e2))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       fv (Var x) \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n       Ex (secExprTyping \\<Gamma> (Var x))\n 2. \\<And>e1 x2a e2.\n       \\<lbrakk>fv e1 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n                Ex (secExprTyping \\<Gamma> e1);\n        fv e2 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n        Ex (secExprTyping \\<Gamma> e2);\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> Ex (secExprTyping \\<Gamma>\n                              (e1 \\<guillemotleft>x2a\\<guillemotright> e2))", "case (Var V)"], ["proof (state)\nthis:\n  fv (Var V) \\<subseteq> dom \\<Gamma>\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       fv (Var x) \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n       Ex (secExprTyping \\<Gamma> (Var x))\n 2. \\<And>e1 x2a e2.\n       \\<lbrakk>fv e1 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n                Ex (secExprTyping \\<Gamma> e1);\n        fv e2 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n        Ex (secExprTyping \\<Gamma> e2);\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> Ex (secExprTyping \\<Gamma>\n                              (e1 \\<guillemotleft>x2a\\<guillemotright> e2))", "have \"V \\<in> fv (Var V)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. V \\<in> fv (Var V)", "by simp"], ["proof (state)\nthis:\n  V \\<in> fv (Var V)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       fv (Var x) \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n       Ex (secExprTyping \\<Gamma> (Var x))\n 2. \\<And>e1 x2a e2.\n       \\<lbrakk>fv e1 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n                Ex (secExprTyping \\<Gamma> e1);\n        fv e2 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n        Ex (secExprTyping \\<Gamma> e2);\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> Ex (secExprTyping \\<Gamma>\n                              (e1 \\<guillemotleft>x2a\\<guillemotright> e2))", "with \\<open>fv (Var V) \\<subseteq> dom \\<Gamma>\\<close>"], ["proof (chain)\npicking this:\n  fv (Var V) \\<subseteq> dom \\<Gamma>\n  V \\<in> fv (Var V)", "have \"V \\<in> dom \\<Gamma>\""], ["proof (prove)\nusing this:\n  fv (Var V) \\<subseteq> dom \\<Gamma>\n  V \\<in> fv (Var V)\n\ngoal (1 subgoal):\n 1. V \\<in> dom \\<Gamma>", "by simp"], ["proof (state)\nthis:\n  V \\<in> dom \\<Gamma>\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       fv (Var x) \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n       Ex (secExprTyping \\<Gamma> (Var x))\n 2. \\<And>e1 x2a e2.\n       \\<lbrakk>fv e1 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n                Ex (secExprTyping \\<Gamma> e1);\n        fv e2 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n        Ex (secExprTyping \\<Gamma> e2);\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> Ex (secExprTyping \\<Gamma>\n                              (e1 \\<guillemotleft>x2a\\<guillemotright> e2))", "then"], ["proof (chain)\npicking this:\n  V \\<in> dom \\<Gamma>", "obtain T where \"\\<Gamma> V = Some T\""], ["proof (prove)\nusing this:\n  V \\<in> dom \\<Gamma>\n\ngoal (1 subgoal):\n 1. (\\<And>T.\n        \\<Gamma> V = Some T \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<Gamma> V = Some T\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       fv (Var x) \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n       Ex (secExprTyping \\<Gamma> (Var x))\n 2. \\<And>e1 x2a e2.\n       \\<lbrakk>fv e1 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n                Ex (secExprTyping \\<Gamma> e1);\n        fv e2 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n        Ex (secExprTyping \\<Gamma> e2);\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> Ex (secExprTyping \\<Gamma>\n                              (e1 \\<guillemotleft>x2a\\<guillemotright> e2))", "hence \"\\<Gamma> \\<turnstile> Var V : T\""], ["proof (prove)\nusing this:\n  \\<Gamma> V = Some T\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> Var V : T", "by (rule typeVar)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> Var V : T\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       fv (Var x) \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n       Ex (secExprTyping \\<Gamma> (Var x))\n 2. \\<And>e1 x2a e2.\n       \\<lbrakk>fv e1 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n                Ex (secExprTyping \\<Gamma> e1);\n        fv e2 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n        Ex (secExprTyping \\<Gamma> e2);\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> Ex (secExprTyping \\<Gamma>\n                              (e1 \\<guillemotleft>x2a\\<guillemotright> e2))", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> Var V : T\n\ngoal (1 subgoal):\n 1. \\<exists>a. \\<Gamma> \\<turnstile> Var V : a", "by (rule exI)"], ["proof (state)\nthis:\n  \\<exists>a. \\<Gamma> \\<turnstile> Var V : a\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>fv e1 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n                Ex (secExprTyping \\<Gamma> e1);\n        fv e2 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n        Ex (secExprTyping \\<Gamma> e2);\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> Ex (secExprTyping \\<Gamma>\n                              (e1 \\<guillemotleft>x2a\\<guillemotright> e2))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>fv e1 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n                Ex (secExprTyping \\<Gamma> e1);\n        fv e2 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n        Ex (secExprTyping \\<Gamma> e2);\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> Ex (secExprTyping \\<Gamma>\n                              (e1 \\<guillemotleft>x2a\\<guillemotright> e2))", "case (BinOp e1 bop e2)"], ["proof (state)\nthis:\n  fv e1 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n  \\<exists>a. \\<Gamma> \\<turnstile> e1 : a\n  fv e2 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n  \\<exists>a. \\<Gamma> \\<turnstile> e2 : a\n  fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<subseteq> dom \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>fv e1 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n                Ex (secExprTyping \\<Gamma> e1);\n        fv e2 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n        Ex (secExprTyping \\<Gamma> e2);\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> Ex (secExprTyping \\<Gamma>\n                              (e1 \\<guillemotleft>x2a\\<guillemotright> e2))", "note IH1 = \\<open>fv e1 \\<subseteq> dom \\<Gamma> \\<Longrightarrow> \\<exists>T. \\<Gamma> \\<turnstile> e1 : T\\<close>"], ["proof (state)\nthis:\n  fv e1 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n  \\<exists>T. \\<Gamma> \\<turnstile> e1 : T\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>fv e1 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n                Ex (secExprTyping \\<Gamma> e1);\n        fv e2 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n        Ex (secExprTyping \\<Gamma> e2);\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> Ex (secExprTyping \\<Gamma>\n                              (e1 \\<guillemotleft>x2a\\<guillemotright> e2))", "note IH2 = \\<open>fv e2 \\<subseteq> dom \\<Gamma> \\<Longrightarrow> \\<exists>T. \\<Gamma> \\<turnstile> e2 : T\\<close>"], ["proof (state)\nthis:\n  fv e2 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n  \\<exists>T. \\<Gamma> \\<turnstile> e2 : T\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>fv e1 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n                Ex (secExprTyping \\<Gamma> e1);\n        fv e2 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n        Ex (secExprTyping \\<Gamma> e2);\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> Ex (secExprTyping \\<Gamma>\n                              (e1 \\<guillemotleft>x2a\\<guillemotright> e2))", "from \\<open>fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<subseteq> dom \\<Gamma>\\<close>"], ["proof (chain)\npicking this:\n  fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<subseteq> dom \\<Gamma>", "have \"fv e1 \\<subseteq> dom \\<Gamma>\" and \"fv e2 \\<subseteq> dom \\<Gamma>\""], ["proof (prove)\nusing this:\n  fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<subseteq> dom \\<Gamma>\n\ngoal (1 subgoal):\n 1. fv e1 \\<subseteq> dom \\<Gamma> &&& fv e2 \\<subseteq> dom \\<Gamma>", "by auto"], ["proof (state)\nthis:\n  fv e1 \\<subseteq> dom \\<Gamma>\n  fv e2 \\<subseteq> dom \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>fv e1 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n                Ex (secExprTyping \\<Gamma> e1);\n        fv e2 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n        Ex (secExprTyping \\<Gamma> e2);\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> Ex (secExprTyping \\<Gamma>\n                              (e1 \\<guillemotleft>x2a\\<guillemotright> e2))", "from IH1[OF \\<open>fv e1 \\<subseteq> dom \\<Gamma>\\<close>]"], ["proof (chain)\npicking this:\n  \\<exists>T. \\<Gamma> \\<turnstile> e1 : T", "obtain T1 where \"\\<Gamma> \\<turnstile> e1 : T1\""], ["proof (prove)\nusing this:\n  \\<exists>T. \\<Gamma> \\<turnstile> e1 : T\n\ngoal (1 subgoal):\n 1. (\\<And>T1.\n        \\<Gamma> \\<turnstile> e1 : T1 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> e1 : T1\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>fv e1 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n                Ex (secExprTyping \\<Gamma> e1);\n        fv e2 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n        Ex (secExprTyping \\<Gamma> e2);\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> Ex (secExprTyping \\<Gamma>\n                              (e1 \\<guillemotleft>x2a\\<guillemotright> e2))", "from IH2[OF \\<open>fv e2 \\<subseteq> dom \\<Gamma>\\<close>]"], ["proof (chain)\npicking this:\n  \\<exists>T. \\<Gamma> \\<turnstile> e2 : T", "obtain T2 where \"\\<Gamma> \\<turnstile> e2 : T2\""], ["proof (prove)\nusing this:\n  \\<exists>T. \\<Gamma> \\<turnstile> e2 : T\n\ngoal (1 subgoal):\n 1. (\\<And>T2.\n        \\<Gamma> \\<turnstile> e2 : T2 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> e2 : T2\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>fv e1 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n                Ex (secExprTyping \\<Gamma> e1);\n        fv e2 \\<subseteq> dom \\<Gamma> \\<Longrightarrow>\n        Ex (secExprTyping \\<Gamma> e2);\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> Ex (secExprTyping \\<Gamma>\n                              (e1 \\<guillemotleft>x2a\\<guillemotright> e2))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a", "proof (cases T1)"], ["proof (state)\ngoal (2 subgoals):\n 1. T1 = Low \\<Longrightarrow>\n    \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a\n 2. T1 = High \\<Longrightarrow>\n    \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a", "case Low"], ["proof (state)\nthis:\n  T1 = Low\n\ngoal (2 subgoals):\n 1. T1 = Low \\<Longrightarrow>\n    \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a\n 2. T1 = High \\<Longrightarrow>\n    \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a", "proof (cases T2)"], ["proof (state)\ngoal (2 subgoals):\n 1. T2 = Low \\<Longrightarrow>\n    \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a\n 2. T2 = High \\<Longrightarrow>\n    \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a", "case Low"], ["proof (state)\nthis:\n  T2 = Low\n\ngoal (2 subgoals):\n 1. T2 = Low \\<Longrightarrow>\n    \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a\n 2. T2 = High \\<Longrightarrow>\n    \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a", "with \\<open>\\<Gamma> \\<turnstile> e1 : T1\\<close> \\<open>\\<Gamma> \\<turnstile> e2 : T2\\<close> \\<open>T1 = Low\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> e1 : T1\n  \\<Gamma> \\<turnstile> e2 : T2\n  T1 = Low\n  T2 = Low", "have \"\\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : Low\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e1 : T1\n  \\<Gamma> \\<turnstile> e2 : T2\n  T1 = Low\n  T2 = Low\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : Low", "by(simp add:typeBinOp1)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : Low\n\ngoal (2 subgoals):\n 1. T2 = Low \\<Longrightarrow>\n    \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a\n 2. T2 = High \\<Longrightarrow>\n    \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : Low\n\ngoal (1 subgoal):\n 1. \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a", "by(rule exI)"], ["proof (state)\nthis:\n  \\<exists>a.\n     \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a\n\ngoal (1 subgoal):\n 1. T2 = High \\<Longrightarrow>\n    \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. T2 = High \\<Longrightarrow>\n    \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a", "case High"], ["proof (state)\nthis:\n  T2 = High\n\ngoal (1 subgoal):\n 1. T2 = High \\<Longrightarrow>\n    \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a", "with \\<open>\\<Gamma> \\<turnstile> e1 : T1\\<close> \\<open>\\<Gamma> \\<turnstile> e2 : T2\\<close> \\<open>T1 = Low\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> e1 : T1\n  \\<Gamma> \\<turnstile> e2 : T2\n  T1 = Low\n  T2 = High", "have \"\\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e1 : T1\n  \\<Gamma> \\<turnstile> e2 : T2\n  T1 = Low\n  T2 = High\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High", "by(simp add:typeBinOp3)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High\n\ngoal (1 subgoal):\n 1. T2 = High \\<Longrightarrow>\n    \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High\n\ngoal (1 subgoal):\n 1. \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a", "by(rule exI)"], ["proof (state)\nthis:\n  \\<exists>a.\n     \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>a.\n     \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a\n\ngoal (1 subgoal):\n 1. T1 = High \\<Longrightarrow>\n    \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. T1 = High \\<Longrightarrow>\n    \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a", "case High"], ["proof (state)\nthis:\n  T1 = High\n\ngoal (1 subgoal):\n 1. T1 = High \\<Longrightarrow>\n    \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a", "with \\<open>\\<Gamma> \\<turnstile> e1 : T1\\<close> \\<open>\\<Gamma> \\<turnstile> e2 : T2\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> e1 : T1\n  \\<Gamma> \\<turnstile> e2 : T2\n  T1 = High", "have \"\\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e1 : T1\n  \\<Gamma> \\<turnstile> e2 : T2\n  T1 = High\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High", "by (simp add: typeBinOp2)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High\n\ngoal (1 subgoal):\n 1. T1 = High \\<Longrightarrow>\n    \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High\n\ngoal (1 subgoal):\n 1. \\<exists>a.\n       \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a", "by (rule exI)"], ["proof (state)\nthis:\n  \\<exists>a.\n     \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>a.\n     \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : a\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>T. \\<Gamma> \\<turnstile> e : T\n\ngoal (1 subgoal):\n 1. (\\<And>T.\n        \\<Gamma> \\<turnstile> e : T \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "with that"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> e : ?T \\<Longrightarrow> thesis\n  \\<exists>T. \\<Gamma> \\<turnstile> e : T", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e : ?T \\<Longrightarrow> thesis\n  \\<exists>T. \\<Gamma> \\<turnstile> e : T\n\ngoal (1 subgoal):\n 1. thesis", "by blast"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma exprBinopTypeable: \n  assumes \"\\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : T\"\n  shows \"(\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and> (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and>\n    (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)", "using assms"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : T\n\ngoal (1 subgoal):\n 1. (\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and>\n    (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)", "by(auto elim:secExprTyping.cases)"], ["", "lemma exprTypingHigh: \n  assumes \"\\<Gamma> \\<turnstile> e : T\" and \"x \\<in> fv e\" and \"\\<Gamma> x = Some High\"\n  shows \"\\<Gamma> \\<turnstile> e : High\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> e : High", "using assms"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e : T\n  x \\<in> fv e\n  \\<Gamma> x = Some High\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> e : High", "proof (induct e arbitrary:T)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>xa T.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Val xa : T; x \\<in> fv (Val xa);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> Val xa : High\n 2. \\<And>xa T.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var xa : T; x \\<in> fv (Var xa);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> Var xa : High\n 3. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T; x \\<in> fv e1;\n                    \\<Gamma> x = Some High\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 : High;\n        \\<And>T.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T; x \\<in> fv e2;\n            \\<Gamma> x = Some High\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> e2 : High;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : High", "case (Val V)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> Val V : T\n  x \\<in> fv (Val V)\n  \\<Gamma> x = Some High\n\ngoal (3 subgoals):\n 1. \\<And>xa T.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Val xa : T; x \\<in> fv (Val xa);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> Val xa : High\n 2. \\<And>xa T.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var xa : T; x \\<in> fv (Var xa);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> Var xa : High\n 3. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T; x \\<in> fv e1;\n                    \\<Gamma> x = Some High\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 : High;\n        \\<And>T.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T; x \\<in> fv e2;\n            \\<Gamma> x = Some High\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> e2 : High;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : High", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> Val V : High", "by (rule typeVal)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> Val V : High\n\ngoal (2 subgoals):\n 1. \\<And>xa T.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var xa : T; x \\<in> fv (Var xa);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> Var xa : High\n 2. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T; x \\<in> fv e1;\n                    \\<Gamma> x = Some High\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 : High;\n        \\<And>T.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T; x \\<in> fv e2;\n            \\<Gamma> x = Some High\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> e2 : High;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : High", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>xa T.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var xa : T; x \\<in> fv (Var xa);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> Var xa : High\n 2. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T; x \\<in> fv e1;\n                    \\<Gamma> x = Some High\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 : High;\n        \\<And>T.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T; x \\<in> fv e2;\n            \\<Gamma> x = Some High\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> e2 : High;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : High", "case (Var V)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> Var V : T\n  x \\<in> fv (Var V)\n  \\<Gamma> x = Some High\n\ngoal (2 subgoals):\n 1. \\<And>xa T.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var xa : T; x \\<in> fv (Var xa);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> Var xa : High\n 2. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T; x \\<in> fv e1;\n                    \\<Gamma> x = Some High\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 : High;\n        \\<And>T.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T; x \\<in> fv e2;\n            \\<Gamma> x = Some High\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> e2 : High;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : High", "from \\<open>x \\<in> fv (Var V)\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> fv (Var V)", "have \"x = V\""], ["proof (prove)\nusing this:\n  x \\<in> fv (Var V)\n\ngoal (1 subgoal):\n 1. x = V", "by simp"], ["proof (state)\nthis:\n  x = V\n\ngoal (2 subgoals):\n 1. \\<And>xa T.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var xa : T; x \\<in> fv (Var xa);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> Var xa : High\n 2. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T; x \\<in> fv e1;\n                    \\<Gamma> x = Some High\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 : High;\n        \\<And>T.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T; x \\<in> fv e2;\n            \\<Gamma> x = Some High\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> e2 : High;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : High", "with \\<open>\\<Gamma> x = Some High\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> x = Some High\n  x = V", "show ?case"], ["proof (prove)\nusing this:\n  \\<Gamma> x = Some High\n  x = V\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> Var V : High", "by(simp add:typeVar)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> Var V : High\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T; x \\<in> fv e1;\n                    \\<Gamma> x = Some High\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 : High;\n        \\<And>T.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T; x \\<in> fv e2;\n            \\<Gamma> x = Some High\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> e2 : High;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : High", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T; x \\<in> fv e1;\n                    \\<Gamma> x = Some High\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 : High;\n        \\<And>T.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T; x \\<in> fv e2;\n            \\<Gamma> x = Some High\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> e2 : High;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : High", "case (BinOp e1 bop e2)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<Gamma> \\<turnstile> e1 : ?T; x \\<in> fv e1;\n   \\<Gamma> x = Some High\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 : High\n  \\<lbrakk>\\<Gamma> \\<turnstile> e2 : ?T; x \\<in> fv e2;\n   \\<Gamma> x = Some High\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> e2 : High\n  \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : T\n  x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n  \\<Gamma> x = Some High\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T; x \\<in> fv e1;\n                    \\<Gamma> x = Some High\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 : High;\n        \\<And>T.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T; x \\<in> fv e2;\n            \\<Gamma> x = Some High\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> e2 : High;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : High", "note IH1 = \\<open>\\<And>T. \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T; x \\<in> fv e1; \\<Gamma> x = Some High\\<rbrakk> \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 : High\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>\\<Gamma> \\<turnstile> e1 : ?T; x \\<in> fv e1;\n   \\<Gamma> x = Some High\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 : High\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T; x \\<in> fv e1;\n                    \\<Gamma> x = Some High\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 : High;\n        \\<And>T.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T; x \\<in> fv e2;\n            \\<Gamma> x = Some High\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> e2 : High;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : High", "note IH2 = \\<open>\\<And>T. \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T; x \\<in> fv e2; \\<Gamma> x = Some High\\<rbrakk> \\<Longrightarrow> \\<Gamma> \\<turnstile> e2 : High\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>\\<Gamma> \\<turnstile> e2 : ?T; x \\<in> fv e2;\n   \\<Gamma> x = Some High\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> e2 : High\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T; x \\<in> fv e1;\n                    \\<Gamma> x = Some High\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 : High;\n        \\<And>T.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T; x \\<in> fv e2;\n            \\<Gamma> x = Some High\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> e2 : High;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : High", "from \\<open>\\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : T\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : T", "have T:\"(\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and> (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : T\n\ngoal (1 subgoal):\n 1. (\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and>\n    (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)", "by (auto intro!:exprBinopTypeable)"], ["proof (state)\nthis:\n  (\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and>\n  (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T; x \\<in> fv e1;\n                    \\<Gamma> x = Some High\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 : High;\n        \\<And>T.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T; x \\<in> fv e2;\n            \\<Gamma> x = Some High\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> e2 : High;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : High", "then"], ["proof (chain)\npicking this:\n  (\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and>\n  (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)", "obtain T1 where \"\\<Gamma> \\<turnstile> e1 : T1\""], ["proof (prove)\nusing this:\n  (\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and>\n  (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)\n\ngoal (1 subgoal):\n 1. (\\<And>T1.\n        \\<Gamma> \\<turnstile> e1 : T1 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> e1 : T1\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T; x \\<in> fv e1;\n                    \\<Gamma> x = Some High\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 : High;\n        \\<And>T.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T; x \\<in> fv e2;\n            \\<Gamma> x = Some High\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> e2 : High;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : High", "from T"], ["proof (chain)\npicking this:\n  (\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and>\n  (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)", "obtain T2 where \"\\<Gamma> \\<turnstile> e2 : T2\""], ["proof (prove)\nusing this:\n  (\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and>\n  (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)\n\ngoal (1 subgoal):\n 1. (\\<And>T2.\n        \\<Gamma> \\<turnstile> e2 : T2 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> e2 : T2\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T; x \\<in> fv e1;\n                    \\<Gamma> x = Some High\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 : High;\n        \\<And>T.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T; x \\<in> fv e2;\n            \\<Gamma> x = Some High\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> e2 : High;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : High", "from \\<open>x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2)", "have \"x \\<in> (fv e1 \\<union> fv e2)\""], ["proof (prove)\nusing this:\n  x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n\ngoal (1 subgoal):\n 1. x \\<in> fv e1 \\<union> fv e2", "by simp"], ["proof (state)\nthis:\n  x \\<in> fv e1 \\<union> fv e2\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T; x \\<in> fv e1;\n                    \\<Gamma> x = Some High\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 : High;\n        \\<And>T.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T; x \\<in> fv e2;\n            \\<Gamma> x = Some High\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> e2 : High;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : High", "hence \"x \\<in> fv e1 \\<or> x \\<in> fv e2\""], ["proof (prove)\nusing this:\n  x \\<in> fv e1 \\<union> fv e2\n\ngoal (1 subgoal):\n 1. x \\<in> fv e1 \\<or> x \\<in> fv e2", "by auto"], ["proof (state)\nthis:\n  x \\<in> fv e1 \\<or> x \\<in> fv e2\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T; x \\<in> fv e1;\n                    \\<Gamma> x = Some High\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 : High;\n        \\<And>T.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T; x \\<in> fv e2;\n            \\<Gamma> x = Some High\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> e2 : High;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2);\n        \\<Gamma> x = Some High\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : High", "thus ?case"], ["proof (prove)\nusing this:\n  x \\<in> fv e1 \\<or> x \\<in> fv e2\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> fv e1 \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High\n 2. x \\<in> fv e2 \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High", "assume \"x \\<in> fv e1\""], ["proof (state)\nthis:\n  x \\<in> fv e1\n\ngoal (2 subgoals):\n 1. x \\<in> fv e1 \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High\n 2. x \\<in> fv e2 \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High", "from IH1[OF \\<open>\\<Gamma> \\<turnstile> e1 : T1\\<close> this \\<open>\\<Gamma> x = Some High\\<close>]"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> e1 : High", "have \"\\<Gamma> \\<turnstile> e1 : High\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e1 : High\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> e1 : High", "."], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> e1 : High\n\ngoal (2 subgoals):\n 1. x \\<in> fv e1 \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High\n 2. x \\<in> fv e2 \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High", "with \\<open>\\<Gamma> \\<turnstile> e2 : T2\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> e2 : T2\n  \\<Gamma> \\<turnstile> e1 : High", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e2 : T2\n  \\<Gamma> \\<turnstile> e1 : High\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High", "by(simp add:typeBinOp2)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High\n\ngoal (1 subgoal):\n 1. x \\<in> fv e2 \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<in> fv e2 \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High", "assume \"x \\<in> fv e2\""], ["proof (state)\nthis:\n  x \\<in> fv e2\n\ngoal (1 subgoal):\n 1. x \\<in> fv e2 \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High", "from IH2[OF \\<open>\\<Gamma> \\<turnstile> e2 : T2\\<close> this \\<open>\\<Gamma> x = Some High\\<close>]"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> e2 : High", "have \"\\<Gamma> \\<turnstile> e2 : High\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e2 : High\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> e2 : High", "."], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> e2 : High\n\ngoal (1 subgoal):\n 1. x \\<in> fv e2 \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High", "with \\<open>\\<Gamma> \\<turnstile> e1 : T1\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> e1 : T1\n  \\<Gamma> \\<turnstile> e2 : High", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e1 : T1\n  \\<Gamma> \\<turnstile> e2 : High\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High", "by(simp add:typeBinOp3)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : High\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma exprTypingLow: \n  assumes \"\\<Gamma> \\<turnstile> e : Low\" and \"x \\<in> fv e\" shows \"\\<Gamma> x = Some Low\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Gamma> x = Some Low", "using assms"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e : Low\n  x \\<in> fv e\n\ngoal (1 subgoal):\n 1. \\<Gamma> x = Some Low", "proof (induct e)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>xa.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Val xa : Low;\n        x \\<in> fv (Val xa)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low\n 2. \\<And>xa.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var xa : Low;\n        x \\<in> fv (Var xa)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low\n 3. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<lbrakk>\\<Gamma> \\<turnstile> e1 : Low;\n                 x \\<in> fv e1\\<rbrakk>\n                \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<lbrakk>\\<Gamma> \\<turnstile> e2 : Low; x \\<in> fv e2\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : Low;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low", "case (Val V)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> Val V : Low\n  x \\<in> fv (Val V)\n\ngoal (3 subgoals):\n 1. \\<And>xa.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Val xa : Low;\n        x \\<in> fv (Val xa)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low\n 2. \\<And>xa.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var xa : Low;\n        x \\<in> fv (Var xa)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low\n 3. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<lbrakk>\\<Gamma> \\<turnstile> e1 : Low;\n                 x \\<in> fv e1\\<rbrakk>\n                \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<lbrakk>\\<Gamma> \\<turnstile> e2 : Low; x \\<in> fv e2\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : Low;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low", "have \"fv (Val V) =  {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv (Val V) = {}", "by (rule FVc)"], ["proof (state)\nthis:\n  fv (Val V) = {}\n\ngoal (3 subgoals):\n 1. \\<And>xa.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Val xa : Low;\n        x \\<in> fv (Val xa)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low\n 2. \\<And>xa.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var xa : Low;\n        x \\<in> fv (Var xa)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low\n 3. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<lbrakk>\\<Gamma> \\<turnstile> e1 : Low;\n                 x \\<in> fv e1\\<rbrakk>\n                \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<lbrakk>\\<Gamma> \\<turnstile> e2 : Low; x \\<in> fv e2\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : Low;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low", "with \\<open>x \\<in> fv (Val V)\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> fv (Val V)\n  fv (Val V) = {}", "have False"], ["proof (prove)\nusing this:\n  x \\<in> fv (Val V)\n  fv (Val V) = {}\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (3 subgoals):\n 1. \\<And>xa.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Val xa : Low;\n        x \\<in> fv (Val xa)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low\n 2. \\<And>xa.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var xa : Low;\n        x \\<in> fv (Var xa)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low\n 3. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<lbrakk>\\<Gamma> \\<turnstile> e1 : Low;\n                 x \\<in> fv e1\\<rbrakk>\n                \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<lbrakk>\\<Gamma> \\<turnstile> e2 : Low; x \\<in> fv e2\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : Low;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low", "thus ?thesis"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<Gamma> x = Some Low", "by simp"], ["proof (state)\nthis:\n  \\<Gamma> x = Some Low\n\ngoal (2 subgoals):\n 1. \\<And>xa.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var xa : Low;\n        x \\<in> fv (Var xa)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low\n 2. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<lbrakk>\\<Gamma> \\<turnstile> e1 : Low;\n                 x \\<in> fv e1\\<rbrakk>\n                \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<lbrakk>\\<Gamma> \\<turnstile> e2 : Low; x \\<in> fv e2\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : Low;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>xa.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var xa : Low;\n        x \\<in> fv (Var xa)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low\n 2. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<lbrakk>\\<Gamma> \\<turnstile> e1 : Low;\n                 x \\<in> fv e1\\<rbrakk>\n                \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<lbrakk>\\<Gamma> \\<turnstile> e2 : Low; x \\<in> fv e2\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : Low;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low", "case (Var V)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> Var V : Low\n  x \\<in> fv (Var V)\n\ngoal (2 subgoals):\n 1. \\<And>xa.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var xa : Low;\n        x \\<in> fv (Var xa)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low\n 2. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<lbrakk>\\<Gamma> \\<turnstile> e1 : Low;\n                 x \\<in> fv e1\\<rbrakk>\n                \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<lbrakk>\\<Gamma> \\<turnstile> e2 : Low; x \\<in> fv e2\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : Low;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low", "from \\<open>x \\<in> fv (Var V)\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> fv (Var V)", "have xV: \"x = V\""], ["proof (prove)\nusing this:\n  x \\<in> fv (Var V)\n\ngoal (1 subgoal):\n 1. x = V", "by simp"], ["proof (state)\nthis:\n  x = V\n\ngoal (2 subgoals):\n 1. \\<And>xa.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var xa : Low;\n        x \\<in> fv (Var xa)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low\n 2. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<lbrakk>\\<Gamma> \\<turnstile> e1 : Low;\n                 x \\<in> fv e1\\<rbrakk>\n                \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<lbrakk>\\<Gamma> \\<turnstile> e2 : Low; x \\<in> fv e2\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : Low;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low", "from \\<open>\\<Gamma> \\<turnstile> Var V : Low\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> Var V : Low", "have \"\\<Gamma> V = Some Low\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> Var V : Low\n\ngoal (1 subgoal):\n 1. \\<Gamma> V = Some Low", "by (auto elim:secExprTyping.cases)"], ["proof (state)\nthis:\n  \\<Gamma> V = Some Low\n\ngoal (2 subgoals):\n 1. \\<And>xa.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var xa : Low;\n        x \\<in> fv (Var xa)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low\n 2. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<lbrakk>\\<Gamma> \\<turnstile> e1 : Low;\n                 x \\<in> fv e1\\<rbrakk>\n                \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<lbrakk>\\<Gamma> \\<turnstile> e2 : Low; x \\<in> fv e2\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : Low;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low", "with xV"], ["proof (chain)\npicking this:\n  x = V\n  \\<Gamma> V = Some Low", "show ?thesis"], ["proof (prove)\nusing this:\n  x = V\n  \\<Gamma> V = Some Low\n\ngoal (1 subgoal):\n 1. \\<Gamma> x = Some Low", "by simp"], ["proof (state)\nthis:\n  \\<Gamma> x = Some Low\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<lbrakk>\\<Gamma> \\<turnstile> e1 : Low;\n                 x \\<in> fv e1\\<rbrakk>\n                \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<lbrakk>\\<Gamma> \\<turnstile> e2 : Low; x \\<in> fv e2\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : Low;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<lbrakk>\\<Gamma> \\<turnstile> e1 : Low;\n                 x \\<in> fv e1\\<rbrakk>\n                \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<lbrakk>\\<Gamma> \\<turnstile> e2 : Low; x \\<in> fv e2\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : Low;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low", "case (BinOp e1 bop e2)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<Gamma> \\<turnstile> e1 : Low; x \\<in> fv e1\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> x = Some Low\n  \\<lbrakk>\\<Gamma> \\<turnstile> e2 : Low; x \\<in> fv e2\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> x = Some Low\n  \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : Low\n  x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<lbrakk>\\<Gamma> \\<turnstile> e1 : Low;\n                 x \\<in> fv e1\\<rbrakk>\n                \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<lbrakk>\\<Gamma> \\<turnstile> e2 : Low; x \\<in> fv e2\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : Low;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low", "note IH1 = \\<open>\\<lbrakk>\\<Gamma> \\<turnstile> e1 : Low; x \\<in> fv e1\\<rbrakk> \\<Longrightarrow> \\<Gamma> x = Some Low\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>\\<Gamma> \\<turnstile> e1 : Low; x \\<in> fv e1\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> x = Some Low\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<lbrakk>\\<Gamma> \\<turnstile> e1 : Low;\n                 x \\<in> fv e1\\<rbrakk>\n                \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<lbrakk>\\<Gamma> \\<turnstile> e2 : Low; x \\<in> fv e2\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : Low;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low", "note IH2=\\<open>\\<lbrakk>\\<Gamma> \\<turnstile> e2 : Low; x \\<in> fv e2\\<rbrakk> \\<Longrightarrow> \\<Gamma> x = Some Low\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>\\<Gamma> \\<turnstile> e2 : Low; x \\<in> fv e2\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> x = Some Low\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<lbrakk>\\<Gamma> \\<turnstile> e1 : Low;\n                 x \\<in> fv e1\\<rbrakk>\n                \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<lbrakk>\\<Gamma> \\<turnstile> e2 : Low; x \\<in> fv e2\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : Low;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low", "from \\<open>\\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : Low\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : Low", "have \"\\<Gamma> \\<turnstile> e1 : Low\" and \"\\<Gamma> \\<turnstile> e2 : Low\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : Low\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> e1 : Low &&& \\<Gamma> \\<turnstile> e2 : Low", "by(auto elim:secExprTyping.cases)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> e1 : Low\n  \\<Gamma> \\<turnstile> e2 : Low\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<lbrakk>\\<Gamma> \\<turnstile> e1 : Low;\n                 x \\<in> fv e1\\<rbrakk>\n                \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<lbrakk>\\<Gamma> \\<turnstile> e2 : Low; x \\<in> fv e2\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : Low;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low", "from \\<open>x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2)", "have \"x \\<in> fv e1 \\<union> fv e2\""], ["proof (prove)\nusing this:\n  x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n\ngoal (1 subgoal):\n 1. x \\<in> fv e1 \\<union> fv e2", "by (simp add:FVe)"], ["proof (state)\nthis:\n  x \\<in> fv e1 \\<union> fv e2\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<lbrakk>\\<Gamma> \\<turnstile> e1 : Low;\n                 x \\<in> fv e1\\<rbrakk>\n                \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<lbrakk>\\<Gamma> \\<turnstile> e2 : Low; x \\<in> fv e2\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : Low;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low", "hence \"x \\<in> fv e1 \\<or> x \\<in> fv e2\""], ["proof (prove)\nusing this:\n  x \\<in> fv e1 \\<union> fv e2\n\ngoal (1 subgoal):\n 1. x \\<in> fv e1 \\<or> x \\<in> fv e2", "by auto"], ["proof (state)\nthis:\n  x \\<in> fv e1 \\<or> x \\<in> fv e2\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<lbrakk>\\<Gamma> \\<turnstile> e1 : Low;\n                 x \\<in> fv e1\\<rbrakk>\n                \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<lbrakk>\\<Gamma> \\<turnstile> e2 : Low; x \\<in> fv e2\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> x = Some Low;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : Low;\n        x \\<in> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> x = Some Low", "thus ?case"], ["proof (prove)\nusing this:\n  x \\<in> fv e1 \\<or> x \\<in> fv e2\n\ngoal (1 subgoal):\n 1. \\<Gamma> x = Some Low", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> fv e1 \\<Longrightarrow> \\<Gamma> x = Some Low\n 2. x \\<in> fv e2 \\<Longrightarrow> \\<Gamma> x = Some Low", "assume \"x \\<in> fv e1\""], ["proof (state)\nthis:\n  x \\<in> fv e1\n\ngoal (2 subgoals):\n 1. x \\<in> fv e1 \\<Longrightarrow> \\<Gamma> x = Some Low\n 2. x \\<in> fv e2 \\<Longrightarrow> \\<Gamma> x = Some Low", "with IH1[OF \\<open>\\<Gamma> \\<turnstile> e1 : Low\\<close>]"], ["proof (chain)\npicking this:\n  x \\<in> fv e1 \\<Longrightarrow> \\<Gamma> x = Some Low\n  x \\<in> fv e1", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<in> fv e1 \\<Longrightarrow> \\<Gamma> x = Some Low\n  x \\<in> fv e1\n\ngoal (1 subgoal):\n 1. \\<Gamma> x = Some Low", "by auto"], ["proof (state)\nthis:\n  \\<Gamma> x = Some Low\n\ngoal (1 subgoal):\n 1. x \\<in> fv e2 \\<Longrightarrow> \\<Gamma> x = Some Low", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<in> fv e2 \\<Longrightarrow> \\<Gamma> x = Some Low", "assume \"x \\<in> fv e2\""], ["proof (state)\nthis:\n  x \\<in> fv e2\n\ngoal (1 subgoal):\n 1. x \\<in> fv e2 \\<Longrightarrow> \\<Gamma> x = Some Low", "with IH2[OF \\<open>\\<Gamma> \\<turnstile> e2 : Low\\<close>]"], ["proof (chain)\npicking this:\n  x \\<in> fv e2 \\<Longrightarrow> \\<Gamma> x = Some Low\n  x \\<in> fv e2", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<in> fv e2 \\<Longrightarrow> \\<Gamma> x = Some Low\n  x \\<in> fv e2\n\ngoal (1 subgoal):\n 1. \\<Gamma> x = Some Low", "by auto"], ["proof (state)\nthis:\n  \\<Gamma> x = Some Low\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Gamma> x = Some Low\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma typeableFreevars:\n  assumes \"\\<Gamma> \\<turnstile> e : T\" shows \"fv e \\<subseteq> dom \\<Gamma>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv e \\<subseteq> dom \\<Gamma>", "using assms"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e : T\n\ngoal (1 subgoal):\n 1. fv e \\<subseteq> dom \\<Gamma>", "proof(induct e arbitrary:T)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x T.\n       \\<Gamma> \\<turnstile> Val x : T \\<Longrightarrow>\n       fv (Val x) \\<subseteq> dom \\<Gamma>\n 2. \\<And>x T.\n       \\<Gamma> \\<turnstile> Var x : T \\<Longrightarrow>\n       fv (Var x) \\<subseteq> dom \\<Gamma>\n 3. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma> \\<turnstile> e1 : T \\<Longrightarrow>\n                   fv e1 \\<subseteq> dom \\<Gamma>;\n        \\<And>T.\n           \\<Gamma> \\<turnstile> e2 : T \\<Longrightarrow>\n           fv e2 \\<subseteq> dom \\<Gamma>;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T\\<rbrakk>\n       \\<Longrightarrow> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n                         \\<subseteq> dom \\<Gamma>", "case (Val V)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> Val V : T\n\ngoal (3 subgoals):\n 1. \\<And>x T.\n       \\<Gamma> \\<turnstile> Val x : T \\<Longrightarrow>\n       fv (Val x) \\<subseteq> dom \\<Gamma>\n 2. \\<And>x T.\n       \\<Gamma> \\<turnstile> Var x : T \\<Longrightarrow>\n       fv (Var x) \\<subseteq> dom \\<Gamma>\n 3. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma> \\<turnstile> e1 : T \\<Longrightarrow>\n                   fv e1 \\<subseteq> dom \\<Gamma>;\n        \\<And>T.\n           \\<Gamma> \\<turnstile> e2 : T \\<Longrightarrow>\n           fv e2 \\<subseteq> dom \\<Gamma>;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T\\<rbrakk>\n       \\<Longrightarrow> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n                         \\<subseteq> dom \\<Gamma>", "have \"fv (Val V) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv (Val V) = {}", "by (rule FVc)"], ["proof (state)\nthis:\n  fv (Val V) = {}\n\ngoal (3 subgoals):\n 1. \\<And>x T.\n       \\<Gamma> \\<turnstile> Val x : T \\<Longrightarrow>\n       fv (Val x) \\<subseteq> dom \\<Gamma>\n 2. \\<And>x T.\n       \\<Gamma> \\<turnstile> Var x : T \\<Longrightarrow>\n       fv (Var x) \\<subseteq> dom \\<Gamma>\n 3. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma> \\<turnstile> e1 : T \\<Longrightarrow>\n                   fv e1 \\<subseteq> dom \\<Gamma>;\n        \\<And>T.\n           \\<Gamma> \\<turnstile> e2 : T \\<Longrightarrow>\n           fv e2 \\<subseteq> dom \\<Gamma>;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T\\<rbrakk>\n       \\<Longrightarrow> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n                         \\<subseteq> dom \\<Gamma>", "thus ?case"], ["proof (prove)\nusing this:\n  fv (Val V) = {}\n\ngoal (1 subgoal):\n 1. fv (Val V) \\<subseteq> dom \\<Gamma>", "by simp"], ["proof (state)\nthis:\n  fv (Val V) \\<subseteq> dom \\<Gamma>\n\ngoal (2 subgoals):\n 1. \\<And>x T.\n       \\<Gamma> \\<turnstile> Var x : T \\<Longrightarrow>\n       fv (Var x) \\<subseteq> dom \\<Gamma>\n 2. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma> \\<turnstile> e1 : T \\<Longrightarrow>\n                   fv e1 \\<subseteq> dom \\<Gamma>;\n        \\<And>T.\n           \\<Gamma> \\<turnstile> e2 : T \\<Longrightarrow>\n           fv e2 \\<subseteq> dom \\<Gamma>;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T\\<rbrakk>\n       \\<Longrightarrow> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n                         \\<subseteq> dom \\<Gamma>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x T.\n       \\<Gamma> \\<turnstile> Var x : T \\<Longrightarrow>\n       fv (Var x) \\<subseteq> dom \\<Gamma>\n 2. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma> \\<turnstile> e1 : T \\<Longrightarrow>\n                   fv e1 \\<subseteq> dom \\<Gamma>;\n        \\<And>T.\n           \\<Gamma> \\<turnstile> e2 : T \\<Longrightarrow>\n           fv e2 \\<subseteq> dom \\<Gamma>;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T\\<rbrakk>\n       \\<Longrightarrow> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n                         \\<subseteq> dom \\<Gamma>", "case (Var V)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> Var V : T\n\ngoal (2 subgoals):\n 1. \\<And>x T.\n       \\<Gamma> \\<turnstile> Var x : T \\<Longrightarrow>\n       fv (Var x) \\<subseteq> dom \\<Gamma>\n 2. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma> \\<turnstile> e1 : T \\<Longrightarrow>\n                   fv e1 \\<subseteq> dom \\<Gamma>;\n        \\<And>T.\n           \\<Gamma> \\<turnstile> e2 : T \\<Longrightarrow>\n           fv e2 \\<subseteq> dom \\<Gamma>;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T\\<rbrakk>\n       \\<Longrightarrow> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n                         \\<subseteq> dom \\<Gamma>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. fv (Var V) \\<subseteq> dom \\<Gamma>", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> fv (Var V) \\<Longrightarrow> x \\<in> dom \\<Gamma>", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> fv (Var V) \\<Longrightarrow> x \\<in> dom \\<Gamma>", "assume \"x \\<in> fv (Var V)\""], ["proof (state)\nthis:\n  x \\<in> fv (Var V)\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> fv (Var V) \\<Longrightarrow> x \\<in> dom \\<Gamma>", "hence \"x = V\""], ["proof (prove)\nusing this:\n  x \\<in> fv (Var V)\n\ngoal (1 subgoal):\n 1. x = V", "by simp"], ["proof (state)\nthis:\n  x = V\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> fv (Var V) \\<Longrightarrow> x \\<in> dom \\<Gamma>", "from \\<open>\\<Gamma> \\<turnstile> Var V : T\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> Var V : T", "have  \"\\<Gamma> V = Some T\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> Var V : T\n\ngoal (1 subgoal):\n 1. \\<Gamma> V = Some T", "by (auto elim:secExprTyping.cases)"], ["proof (state)\nthis:\n  \\<Gamma> V = Some T\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> fv (Var V) \\<Longrightarrow> x \\<in> dom \\<Gamma>", "with \\<open>x = V\\<close>"], ["proof (chain)\npicking this:\n  x = V\n  \\<Gamma> V = Some T", "show \"x \\<in> dom \\<Gamma>\""], ["proof (prove)\nusing this:\n  x = V\n  \\<Gamma> V = Some T\n\ngoal (1 subgoal):\n 1. x \\<in> dom \\<Gamma>", "by auto"], ["proof (state)\nthis:\n  x \\<in> dom \\<Gamma>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  fv (Var V) \\<subseteq> dom \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma> \\<turnstile> e1 : T \\<Longrightarrow>\n                   fv e1 \\<subseteq> dom \\<Gamma>;\n        \\<And>T.\n           \\<Gamma> \\<turnstile> e2 : T \\<Longrightarrow>\n           fv e2 \\<subseteq> dom \\<Gamma>;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T\\<rbrakk>\n       \\<Longrightarrow> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n                         \\<subseteq> dom \\<Gamma>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma> \\<turnstile> e1 : T \\<Longrightarrow>\n                   fv e1 \\<subseteq> dom \\<Gamma>;\n        \\<And>T.\n           \\<Gamma> \\<turnstile> e2 : T \\<Longrightarrow>\n           fv e2 \\<subseteq> dom \\<Gamma>;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T\\<rbrakk>\n       \\<Longrightarrow> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n                         \\<subseteq> dom \\<Gamma>", "case (BinOp e1 bop e2)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> e1 : ?T \\<Longrightarrow>\n  fv e1 \\<subseteq> dom \\<Gamma>\n  \\<Gamma> \\<turnstile> e2 : ?T \\<Longrightarrow>\n  fv e2 \\<subseteq> dom \\<Gamma>\n  \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : T\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma> \\<turnstile> e1 : T \\<Longrightarrow>\n                   fv e1 \\<subseteq> dom \\<Gamma>;\n        \\<And>T.\n           \\<Gamma> \\<turnstile> e2 : T \\<Longrightarrow>\n           fv e2 \\<subseteq> dom \\<Gamma>;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T\\<rbrakk>\n       \\<Longrightarrow> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n                         \\<subseteq> dom \\<Gamma>", "note IH1 = \\<open>\\<And>T. \\<Gamma> \\<turnstile> e1 : T  \\<Longrightarrow> fv e1 \\<subseteq> dom \\<Gamma>\\<close>"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> e1 : ?T \\<Longrightarrow>\n  fv e1 \\<subseteq> dom \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma> \\<turnstile> e1 : T \\<Longrightarrow>\n                   fv e1 \\<subseteq> dom \\<Gamma>;\n        \\<And>T.\n           \\<Gamma> \\<turnstile> e2 : T \\<Longrightarrow>\n           fv e2 \\<subseteq> dom \\<Gamma>;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T\\<rbrakk>\n       \\<Longrightarrow> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n                         \\<subseteq> dom \\<Gamma>", "note IH2 = \\<open>\\<And>T. \\<Gamma> \\<turnstile> e2 : T  \\<Longrightarrow> fv e2 \\<subseteq> dom \\<Gamma>\\<close>"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> e2 : ?T \\<Longrightarrow>\n  fv e2 \\<subseteq> dom \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma> \\<turnstile> e1 : T \\<Longrightarrow>\n                   fv e1 \\<subseteq> dom \\<Gamma>;\n        \\<And>T.\n           \\<Gamma> \\<turnstile> e2 : T \\<Longrightarrow>\n           fv e2 \\<subseteq> dom \\<Gamma>;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T\\<rbrakk>\n       \\<Longrightarrow> fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n                         \\<subseteq> dom \\<Gamma>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<subseteq> dom \\<Gamma>", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<Longrightarrow>\n       x \\<in> dom \\<Gamma>", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<Longrightarrow>\n       x \\<in> dom \\<Gamma>", "assume \"x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2)\""], ["proof (state)\nthis:\n  x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<Longrightarrow>\n       x \\<in> dom \\<Gamma>", "from \\<open>\\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : T\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : T", "have Q:\"(\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and> (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : T\n\ngoal (1 subgoal):\n 1. (\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and>\n    (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)", "by(rule exprBinopTypeable)"], ["proof (state)\nthis:\n  (\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and>\n  (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<Longrightarrow>\n       x \\<in> dom \\<Gamma>", "then"], ["proof (chain)\npicking this:\n  (\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and>\n  (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)", "obtain T1 where \"\\<Gamma> \\<turnstile> e1 : T1\""], ["proof (prove)\nusing this:\n  (\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and>\n  (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)\n\ngoal (1 subgoal):\n 1. (\\<And>T1.\n        \\<Gamma> \\<turnstile> e1 : T1 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> e1 : T1\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<Longrightarrow>\n       x \\<in> dom \\<Gamma>", "from Q"], ["proof (chain)\npicking this:\n  (\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and>\n  (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)", "obtain T2 where \"\\<Gamma> \\<turnstile> e2 : T2\""], ["proof (prove)\nusing this:\n  (\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and>\n  (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)\n\ngoal (1 subgoal):\n 1. (\\<And>T2.\n        \\<Gamma> \\<turnstile> e2 : T2 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> e2 : T2\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<Longrightarrow>\n       x \\<in> dom \\<Gamma>", "from IH1[OF \\<open>\\<Gamma> \\<turnstile> e1 : T1\\<close>]"], ["proof (chain)\npicking this:\n  fv e1 \\<subseteq> dom \\<Gamma>", "have \"fv e1 \\<subseteq> dom \\<Gamma>\""], ["proof (prove)\nusing this:\n  fv e1 \\<subseteq> dom \\<Gamma>\n\ngoal (1 subgoal):\n 1. fv e1 \\<subseteq> dom \\<Gamma>", "."], ["proof (state)\nthis:\n  fv e1 \\<subseteq> dom \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<Longrightarrow>\n       x \\<in> dom \\<Gamma>", "moreover"], ["proof (state)\nthis:\n  fv e1 \\<subseteq> dom \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<Longrightarrow>\n       x \\<in> dom \\<Gamma>", "from IH2[OF \\<open>\\<Gamma> \\<turnstile> e2 : T2\\<close>]"], ["proof (chain)\npicking this:\n  fv e2 \\<subseteq> dom \\<Gamma>", "have \"fv e2 \\<subseteq> dom \\<Gamma>\""], ["proof (prove)\nusing this:\n  fv e2 \\<subseteq> dom \\<Gamma>\n\ngoal (1 subgoal):\n 1. fv e2 \\<subseteq> dom \\<Gamma>", "."], ["proof (state)\nthis:\n  fv e2 \\<subseteq> dom \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<Longrightarrow>\n       x \\<in> dom \\<Gamma>", "ultimately"], ["proof (chain)\npicking this:\n  fv e1 \\<subseteq> dom \\<Gamma>\n  fv e2 \\<subseteq> dom \\<Gamma>", "have \"(fv e1) \\<union> (fv e2) \\<subseteq> dom \\<Gamma>\""], ["proof (prove)\nusing this:\n  fv e1 \\<subseteq> dom \\<Gamma>\n  fv e2 \\<subseteq> dom \\<Gamma>\n\ngoal (1 subgoal):\n 1. fv e1 \\<union> fv e2 \\<subseteq> dom \\<Gamma>", "by auto"], ["proof (state)\nthis:\n  fv e1 \\<union> fv e2 \\<subseteq> dom \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<Longrightarrow>\n       x \\<in> dom \\<Gamma>", "hence \"fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<subseteq> dom \\<Gamma>\""], ["proof (prove)\nusing this:\n  fv e1 \\<union> fv e2 \\<subseteq> dom \\<Gamma>\n\ngoal (1 subgoal):\n 1. fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<subseteq> dom \\<Gamma>", "by(simp add:FVe)"], ["proof (state)\nthis:\n  fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<subseteq> dom \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<Longrightarrow>\n       x \\<in> dom \\<Gamma>", "with \\<open>x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2)\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n  fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<subseteq> dom \\<Gamma>", "show \"x \\<in> dom \\<Gamma>\""], ["proof (prove)\nusing this:\n  x \\<in> fv (e1 \\<guillemotleft>bop\\<guillemotright> e2)\n  fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<subseteq> dom \\<Gamma>\n\ngoal (1 subgoal):\n 1. x \\<in> dom \\<Gamma>", "by auto"], ["proof (state)\nthis:\n  x \\<in> dom \\<Gamma>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<subseteq> dom \\<Gamma>\n\ngoal:\nNo subgoals!", "qed"], ["", "(* We assume that expressions are type correct and thus never evaluate to None.\n   In this setting, the first premise is not needed.\n   But for further extensions of the language with a standard type system \n   we do not remove it. *)"], ["", "lemma exprNotNone:\nassumes \"\\<Gamma> \\<turnstile> e : T\" and \"fv e \\<subseteq> dom s\"\nshows \"\\<lbrakk>e\\<rbrakk> s \\<noteq> None\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>e\\<rbrakk>s \\<noteq> None", "using assms"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e : T\n  fv e \\<subseteq> dom s\n\ngoal (1 subgoal):\n 1. \\<lbrakk>e\\<rbrakk>s \\<noteq> None", "proof (induct e arbitrary: \\<Gamma> T s)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x \\<Gamma> T s.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Val x : T;\n        fv (Val x) \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Val x\\<rbrakk>s \\<noteq> None\n 2. \\<And>x \\<Gamma> T s.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var x : T;\n        fv (Var x) \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Var x\\<rbrakk>s \\<noteq> None\n 3. \\<And>e1 x2a e2 \\<Gamma> T s.\n       \\<lbrakk>\\<And>\\<Gamma> T s.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T;\n                    fv e1 \\<subseteq> dom s\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n        \\<And>\\<Gamma> T s.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T;\n            fv e2 \\<subseteq> dom s\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>s \\<noteq> None;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                         None", "case (Val v)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> Val v : T\n  fv (Val v) \\<subseteq> dom s\n\ngoal (3 subgoals):\n 1. \\<And>x \\<Gamma> T s.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Val x : T;\n        fv (Val x) \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Val x\\<rbrakk>s \\<noteq> None\n 2. \\<And>x \\<Gamma> T s.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var x : T;\n        fv (Var x) \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Var x\\<rbrakk>s \\<noteq> None\n 3. \\<And>e1 x2a e2 \\<Gamma> T s.\n       \\<lbrakk>\\<And>\\<Gamma> T s.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T;\n                    fv e1 \\<subseteq> dom s\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n        \\<And>\\<Gamma> T s.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T;\n            fv e2 \\<subseteq> dom s\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>s \\<noteq> None;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                         None", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Val v\\<rbrakk>s \\<noteq> None", "by(simp add:Val)"], ["proof (state)\nthis:\n  \\<lbrakk>Val v\\<rbrakk>s \\<noteq> None\n\ngoal (2 subgoals):\n 1. \\<And>x \\<Gamma> T s.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var x : T;\n        fv (Var x) \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Var x\\<rbrakk>s \\<noteq> None\n 2. \\<And>e1 x2a e2 \\<Gamma> T s.\n       \\<lbrakk>\\<And>\\<Gamma> T s.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T;\n                    fv e1 \\<subseteq> dom s\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n        \\<And>\\<Gamma> T s.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T;\n            fv e2 \\<subseteq> dom s\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>s \\<noteq> None;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                         None", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x \\<Gamma> T s.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var x : T;\n        fv (Var x) \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Var x\\<rbrakk>s \\<noteq> None\n 2. \\<And>e1 x2a e2 \\<Gamma> T s.\n       \\<lbrakk>\\<And>\\<Gamma> T s.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T;\n                    fv e1 \\<subseteq> dom s\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n        \\<And>\\<Gamma> T s.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T;\n            fv e2 \\<subseteq> dom s\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>s \\<noteq> None;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                         None", "case (Var V)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> Var V : T\n  fv (Var V) \\<subseteq> dom s\n\ngoal (2 subgoals):\n 1. \\<And>x \\<Gamma> T s.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var x : T;\n        fv (Var x) \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Var x\\<rbrakk>s \\<noteq> None\n 2. \\<And>e1 x2a e2 \\<Gamma> T s.\n       \\<lbrakk>\\<And>\\<Gamma> T s.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T;\n                    fv e1 \\<subseteq> dom s\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n        \\<And>\\<Gamma> T s.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T;\n            fv e2 \\<subseteq> dom s\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>s \\<noteq> None;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                         None", "have \"\\<lbrakk>Var V\\<rbrakk> s = s V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Var V\\<rbrakk>s = s V", "by (simp add:Var)"], ["proof (state)\nthis:\n  \\<lbrakk>Var V\\<rbrakk>s = s V\n\ngoal (2 subgoals):\n 1. \\<And>x \\<Gamma> T s.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var x : T;\n        fv (Var x) \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Var x\\<rbrakk>s \\<noteq> None\n 2. \\<And>e1 x2a e2 \\<Gamma> T s.\n       \\<lbrakk>\\<And>\\<Gamma> T s.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T;\n                    fv e1 \\<subseteq> dom s\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n        \\<And>\\<Gamma> T s.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T;\n            fv e2 \\<subseteq> dom s\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>s \\<noteq> None;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                         None", "have \"V \\<in> fv (Var V)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. V \\<in> fv (Var V)", "by (auto simp add:FVv)"], ["proof (state)\nthis:\n  V \\<in> fv (Var V)\n\ngoal (2 subgoals):\n 1. \\<And>x \\<Gamma> T s.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var x : T;\n        fv (Var x) \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Var x\\<rbrakk>s \\<noteq> None\n 2. \\<And>e1 x2a e2 \\<Gamma> T s.\n       \\<lbrakk>\\<And>\\<Gamma> T s.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T;\n                    fv e1 \\<subseteq> dom s\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n        \\<And>\\<Gamma> T s.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T;\n            fv e2 \\<subseteq> dom s\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>s \\<noteq> None;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                         None", "with \\<open>fv (Var V) \\<subseteq> dom s\\<close>"], ["proof (chain)\npicking this:\n  fv (Var V) \\<subseteq> dom s\n  V \\<in> fv (Var V)", "have \"V \\<in> dom s\""], ["proof (prove)\nusing this:\n  fv (Var V) \\<subseteq> dom s\n  V \\<in> fv (Var V)\n\ngoal (1 subgoal):\n 1. V \\<in> dom s", "by simp"], ["proof (state)\nthis:\n  V \\<in> dom s\n\ngoal (2 subgoals):\n 1. \\<And>x \\<Gamma> T s.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Var x : T;\n        fv (Var x) \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Var x\\<rbrakk>s \\<noteq> None\n 2. \\<And>e1 x2a e2 \\<Gamma> T s.\n       \\<lbrakk>\\<And>\\<Gamma> T s.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T;\n                    fv e1 \\<subseteq> dom s\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n        \\<And>\\<Gamma> T s.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T;\n            fv e2 \\<subseteq> dom s\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>s \\<noteq> None;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                         None", "thus ?case"], ["proof (prove)\nusing this:\n  V \\<in> dom s\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Var V\\<rbrakk>s \\<noteq> None", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>Var V\\<rbrakk>s \\<noteq> None\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 \\<Gamma> T s.\n       \\<lbrakk>\\<And>\\<Gamma> T s.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T;\n                    fv e1 \\<subseteq> dom s\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n        \\<And>\\<Gamma> T s.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T;\n            fv e2 \\<subseteq> dom s\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>s \\<noteq> None;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                         None", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 \\<Gamma> T s.\n       \\<lbrakk>\\<And>\\<Gamma> T s.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T;\n                    fv e1 \\<subseteq> dom s\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n        \\<And>\\<Gamma> T s.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T;\n            fv e2 \\<subseteq> dom s\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>s \\<noteq> None;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                         None", "case (BinOp e1 bop e2)"], ["proof (state)\nthis:\n  \\<lbrakk>?\\<Gamma> \\<turnstile> e1 : ?T; fv e1 \\<subseteq> dom ?s\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>?s \\<noteq> None\n  \\<lbrakk>?\\<Gamma> \\<turnstile> e2 : ?T; fv e2 \\<subseteq> dom ?s\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>?s \\<noteq> None\n  \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : T\n  fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<subseteq> dom s\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 \\<Gamma> T s.\n       \\<lbrakk>\\<And>\\<Gamma> T s.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T;\n                    fv e1 \\<subseteq> dom s\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n        \\<And>\\<Gamma> T s.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T;\n            fv e2 \\<subseteq> dom s\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>s \\<noteq> None;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                         None", "note IH1 = \\<open>\\<And>T. \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T; fv e1 \\<subseteq> dom s \\<rbrakk>  \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk> s \\<noteq> None\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>\\<Gamma> \\<turnstile> e1 : ?T; fv e1 \\<subseteq> dom s\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>s \\<noteq> None\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 \\<Gamma> T s.\n       \\<lbrakk>\\<And>\\<Gamma> T s.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T;\n                    fv e1 \\<subseteq> dom s\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n        \\<And>\\<Gamma> T s.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T;\n            fv e2 \\<subseteq> dom s\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>s \\<noteq> None;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                         None", "note IH2 = \\<open>\\<And>T. \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T; fv e2 \\<subseteq> dom s \\<rbrakk>  \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk> s \\<noteq> None\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>\\<Gamma> \\<turnstile> e2 : ?T; fv e2 \\<subseteq> dom s\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>s \\<noteq> None\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 \\<Gamma> T s.\n       \\<lbrakk>\\<And>\\<Gamma> T s.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T;\n                    fv e1 \\<subseteq> dom s\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n        \\<And>\\<Gamma> T s.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T;\n            fv e2 \\<subseteq> dom s\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>s \\<noteq> None;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                         None", "from \\<open>\\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 :  T\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : T", "have \"(\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and> (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e1 \\<guillemotleft>bop\\<guillemotright> e2 : T\n\ngoal (1 subgoal):\n 1. (\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and>\n    (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)", "by(rule exprBinopTypeable)"], ["proof (state)\nthis:\n  (\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and>\n  (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 \\<Gamma> T s.\n       \\<lbrakk>\\<And>\\<Gamma> T s.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T;\n                    fv e1 \\<subseteq> dom s\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n        \\<And>\\<Gamma> T s.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T;\n            fv e2 \\<subseteq> dom s\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>s \\<noteq> None;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                         None", "then"], ["proof (chain)\npicking this:\n  (\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and>\n  (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)", "obtain T1 T2 where \"\\<Gamma> \\<turnstile> e1 : T1\" and \"\\<Gamma> \\<turnstile> e2 : T2\""], ["proof (prove)\nusing this:\n  (\\<exists>T1. \\<Gamma> \\<turnstile> e1 : T1) \\<and>\n  (\\<exists>T2. \\<Gamma> \\<turnstile> e2 : T2)\n\ngoal (1 subgoal):\n 1. (\\<And>T1 T2.\n        \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T1;\n         \\<Gamma> \\<turnstile> e2 : T2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> e1 : T1\n  \\<Gamma> \\<turnstile> e2 : T2\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 \\<Gamma> T s.\n       \\<lbrakk>\\<And>\\<Gamma> T s.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T;\n                    fv e1 \\<subseteq> dom s\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n        \\<And>\\<Gamma> T s.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T;\n            fv e2 \\<subseteq> dom s\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>s \\<noteq> None;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                         None", "from \\<open>fv (e1 \\<guillemotleft>bop\\<guillemotright> e2)  \\<subseteq> dom s\\<close>"], ["proof (chain)\npicking this:\n  fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<subseteq> dom s", "have \"fv e1 \\<union> fv e2 \\<subseteq> dom s\""], ["proof (prove)\nusing this:\n  fv (e1 \\<guillemotleft>bop\\<guillemotright> e2) \\<subseteq> dom s\n\ngoal (1 subgoal):\n 1. fv e1 \\<union> fv e2 \\<subseteq> dom s", "by(simp add:FVe)"], ["proof (state)\nthis:\n  fv e1 \\<union> fv e2 \\<subseteq> dom s\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 \\<Gamma> T s.\n       \\<lbrakk>\\<And>\\<Gamma> T s.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T;\n                    fv e1 \\<subseteq> dom s\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n        \\<And>\\<Gamma> T s.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T;\n            fv e2 \\<subseteq> dom s\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>s \\<noteq> None;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                         None", "hence \"fv e1 \\<subseteq> dom s\" and \"fv e2 \\<subseteq> dom s\""], ["proof (prove)\nusing this:\n  fv e1 \\<union> fv e2 \\<subseteq> dom s\n\ngoal (1 subgoal):\n 1. fv e1 \\<subseteq> dom s &&& fv e2 \\<subseteq> dom s", "by auto"], ["proof (state)\nthis:\n  fv e1 \\<subseteq> dom s\n  fv e2 \\<subseteq> dom s\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 \\<Gamma> T s.\n       \\<lbrakk>\\<And>\\<Gamma> T s.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T;\n                    fv e1 \\<subseteq> dom s\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n        \\<And>\\<Gamma> T s.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T;\n            fv e2 \\<subseteq> dom s\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>s \\<noteq> None;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                         None", "from IH1[OF \\<open>\\<Gamma> \\<turnstile> e1 : T1\\<close> \\<open>fv e1 \\<subseteq> dom s\\<close>]"], ["proof (chain)\npicking this:\n  \\<lbrakk>e1\\<rbrakk>s \\<noteq> None", "have \"\\<lbrakk>e1\\<rbrakk>s \\<noteq> None\""], ["proof (prove)\nusing this:\n  \\<lbrakk>e1\\<rbrakk>s \\<noteq> None\n\ngoal (1 subgoal):\n 1. \\<lbrakk>e1\\<rbrakk>s \\<noteq> None", "."], ["proof (state)\nthis:\n  \\<lbrakk>e1\\<rbrakk>s \\<noteq> None\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 \\<Gamma> T s.\n       \\<lbrakk>\\<And>\\<Gamma> T s.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T;\n                    fv e1 \\<subseteq> dom s\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n        \\<And>\\<Gamma> T s.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T;\n            fv e2 \\<subseteq> dom s\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>s \\<noteq> None;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                         None", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>e1\\<rbrakk>s \\<noteq> None\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 \\<Gamma> T s.\n       \\<lbrakk>\\<And>\\<Gamma> T s.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T;\n                    fv e1 \\<subseteq> dom s\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n        \\<And>\\<Gamma> T s.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T;\n            fv e2 \\<subseteq> dom s\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>s \\<noteq> None;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                         None", "from IH2[OF \\<open>\\<Gamma> \\<turnstile> e2 : T2\\<close> \\<open>fv e2 \\<subseteq> dom s\\<close>]"], ["proof (chain)\npicking this:\n  \\<lbrakk>e2\\<rbrakk>s \\<noteq> None", "have \"\\<lbrakk>e2\\<rbrakk>s \\<noteq> None\""], ["proof (prove)\nusing this:\n  \\<lbrakk>e2\\<rbrakk>s \\<noteq> None\n\ngoal (1 subgoal):\n 1. \\<lbrakk>e2\\<rbrakk>s \\<noteq> None", "."], ["proof (state)\nthis:\n  \\<lbrakk>e2\\<rbrakk>s \\<noteq> None\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2 \\<Gamma> T s.\n       \\<lbrakk>\\<And>\\<Gamma> T s.\n                   \\<lbrakk>\\<Gamma> \\<turnstile> e1 : T;\n                    fv e1 \\<subseteq> dom s\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n        \\<And>\\<Gamma> T s.\n           \\<lbrakk>\\<Gamma> \\<turnstile> e2 : T;\n            fv e2 \\<subseteq> dom s\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>s \\<noteq> None;\n        \\<Gamma> \\<turnstile> e1 \\<guillemotleft>x2a\\<guillemotright> e2 : T;\n        fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2)\n        \\<subseteq> dom s\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                         None", "ultimately"], ["proof (chain)\npicking this:\n  \\<lbrakk>e1\\<rbrakk>s \\<noteq> None\n  \\<lbrakk>e2\\<rbrakk>s \\<noteq> None", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>e1\\<rbrakk>s \\<noteq> None\n  \\<lbrakk>e2\\<rbrakk>s \\<noteq> None\n\ngoal (1 subgoal):\n 1. \\<lbrakk>e1 \\<guillemotleft>bop\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n    None", "apply(cases bop)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<lbrakk>\\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n     \\<lbrakk>e2\\<rbrakk>s \\<noteq> None; bop = Eq\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>bop\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                      None\n 2. \\<lbrakk>\\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n     \\<lbrakk>e2\\<rbrakk>s \\<noteq> None; bop = And\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>bop\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                      None\n 3. \\<lbrakk>\\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n     \\<lbrakk>e2\\<rbrakk>s \\<noteq> None; bop = Less\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>bop\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                      None\n 4. \\<lbrakk>\\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n     \\<lbrakk>e2\\<rbrakk>s \\<noteq> None; bop = Add\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>bop\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                      None\n 5. \\<lbrakk>\\<lbrakk>e1\\<rbrakk>s \\<noteq> None;\n     \\<lbrakk>e2\\<rbrakk>s \\<noteq> None; bop = Sub\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>bop\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n                      None", "apply auto"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>y ya.\n       \\<lbrakk>bop = And; \\<lbrakk>e1\\<rbrakk>s = Some y;\n        \\<lbrakk>e2\\<rbrakk>s = Some ya\\<rbrakk>\n       \\<Longrightarrow> \\<exists>yb. binop And y ya = Some yb\n 2. \\<And>y ya.\n       \\<lbrakk>bop = Less; \\<lbrakk>e1\\<rbrakk>s = Some y;\n        \\<lbrakk>e2\\<rbrakk>s = Some ya\\<rbrakk>\n       \\<Longrightarrow> \\<exists>yb. binop Less y ya = Some yb\n 3. \\<And>y ya.\n       \\<lbrakk>bop = Add; \\<lbrakk>e1\\<rbrakk>s = Some y;\n        \\<lbrakk>e2\\<rbrakk>s = Some ya\\<rbrakk>\n       \\<Longrightarrow> \\<exists>yb. binop Add y ya = Some yb\n 4. \\<And>y ya.\n       \\<lbrakk>bop = Sub; \\<lbrakk>e1\\<rbrakk>s = Some y;\n        \\<lbrakk>e2\\<rbrakk>s = Some ya\\<rbrakk>\n       \\<Longrightarrow> \\<exists>yb. binop Sub y ya = Some yb", "apply(case_tac y,auto,case_tac ya,auto)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<lbrakk>e1 \\<guillemotleft>bop\\<guillemotright> e2\\<rbrakk>s \\<noteq>\n  None\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Noninterference definitions\\<close>"], ["", "subsubsection \\<open>Low Equivalence\\<close>"], ["", "text \\<open>Low Equivalence is reflexive even if the involved states are undefined. \n  But in non-reflexive situations low variables must be initialized \n  (i.e. \\<open>\\<in> dom state\\<close>), otherwise the proof will not work. This is not \n  a restriction, but a natural requirement, and could be formalized as part of \n  a standard type system.\n\n  Low equivalence is also symmetric and transitiv (see lemmas) hence an\n  equivalence relation.\\<close>"], ["", "definition lowEquiv :: \"typeEnv \\<Rightarrow> state \\<Rightarrow> state \\<Rightarrow> bool\" (\"_ \\<turnstile> _ \\<approx>\\<^sub>L _\")\nwhere \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2 \\<equiv> \\<forall>v\\<in>dom \\<Gamma>. \\<Gamma> v = Some Low \\<longrightarrow> (s1 v = s2 v)\""], ["", "lemma lowEquivReflexive: \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s1", "by(simp add:lowEquiv_def)"], ["", "lemma lowEquivSymmetric:\n  \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2 \\<Longrightarrow> \\<Gamma> \\<turnstile> s2 \\<approx>\\<^sub>L s1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2 \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s2 \\<approx>\\<^sub>L s1", "by(simp add:lowEquiv_def)"], ["", "lemma lowEquivTransitive:\n  \"\\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2; \\<Gamma> \\<turnstile> s2 \\<approx>\\<^sub>L s3\\<rbrakk> \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s3\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n     \\<Gamma> \\<turnstile> s2 \\<approx>\\<^sub>L s3\\<rbrakk>\n    \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s3", "by(simp add:lowEquiv_def)"], ["", "subsubsection \\<open>Non Interference\\<close>"], ["", "definition nonInterference :: \"typeEnv \\<Rightarrow> com \\<Rightarrow> bool\"\nwhere \"nonInterference \\<Gamma> c \\<equiv> \n  (\\<forall>s1 s2 s1' s2'. (\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2 \\<and> \\<langle>c,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle> \\<and> \\<langle>c,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>) \n    \\<longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2')\""], ["", "lemma nonInterferenceI: \n  \"\\<lbrakk>\\<And>s1 s2 s1' s2'. \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2; \\<langle>c,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>; \\<langle>c,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\\<rbrakk> \\<Longrightarrow> nonInterference \\<Gamma> c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>s1 s2 s1' s2'.\n        \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n         \\<langle>c,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>;\n         \\<langle>c,s2\\<rangle> \\<rightarrow>*\n         \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2') \\<Longrightarrow>\n    nonInterference \\<Gamma> c", "by(auto simp:nonInterference_def)"], ["", "lemma interpretLow:\n  assumes \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\" and all:\"\\<forall>V\\<in>fv e. \\<Gamma> V = Some Low\"\n  shows \"\\<lbrakk>e\\<rbrakk> s1 = \\<lbrakk>e\\<rbrakk> s2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>e\\<rbrakk>s1 = \\<lbrakk>e\\<rbrakk>s2", "using all"], ["proof (prove)\nusing this:\n  \\<forall>V\\<in>fv e. \\<Gamma> V = Some Low\n\ngoal (1 subgoal):\n 1. \\<lbrakk>e\\<rbrakk>s1 = \\<lbrakk>e\\<rbrakk>s2", "proof (induct e)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x.\n       \\<forall>V\\<in>fv (Val x). \\<Gamma> V = Some Low \\<Longrightarrow>\n       \\<lbrakk>Val x\\<rbrakk>s1 = \\<lbrakk>Val x\\<rbrakk>s2\n 2. \\<And>x.\n       \\<forall>V\\<in>fv (Var x). \\<Gamma> V = Some Low \\<Longrightarrow>\n       \\<lbrakk>Var x\\<rbrakk>s1 = \\<lbrakk>Var x\\<rbrakk>s2\n 3. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<forall>V\\<in>fv e1.\n                   \\<Gamma> V = Some Low \\<Longrightarrow>\n                \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2;\n        \\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low \\<Longrightarrow>\n        \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2;\n        \\<forall>V\\<in>fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2).\n           \\<Gamma> V = Some Low\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s1 =\n                         \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s2", "case (Val v)"], ["proof (state)\nthis:\n  \\<forall>V\\<in>fv (Val v). \\<Gamma> V = Some Low\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       \\<forall>V\\<in>fv (Val x). \\<Gamma> V = Some Low \\<Longrightarrow>\n       \\<lbrakk>Val x\\<rbrakk>s1 = \\<lbrakk>Val x\\<rbrakk>s2\n 2. \\<And>x.\n       \\<forall>V\\<in>fv (Var x). \\<Gamma> V = Some Low \\<Longrightarrow>\n       \\<lbrakk>Var x\\<rbrakk>s1 = \\<lbrakk>Var x\\<rbrakk>s2\n 3. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<forall>V\\<in>fv e1.\n                   \\<Gamma> V = Some Low \\<Longrightarrow>\n                \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2;\n        \\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low \\<Longrightarrow>\n        \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2;\n        \\<forall>V\\<in>fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2).\n           \\<Gamma> V = Some Low\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s1 =\n                         \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s2", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Val v\\<rbrakk>s1 = \\<lbrakk>Val v\\<rbrakk>s2", "by (simp add: Val)"], ["proof (state)\nthis:\n  \\<lbrakk>Val v\\<rbrakk>s1 = \\<lbrakk>Val v\\<rbrakk>s2\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<forall>V\\<in>fv (Var x). \\<Gamma> V = Some Low \\<Longrightarrow>\n       \\<lbrakk>Var x\\<rbrakk>s1 = \\<lbrakk>Var x\\<rbrakk>s2\n 2. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<forall>V\\<in>fv e1.\n                   \\<Gamma> V = Some Low \\<Longrightarrow>\n                \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2;\n        \\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low \\<Longrightarrow>\n        \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2;\n        \\<forall>V\\<in>fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2).\n           \\<Gamma> V = Some Low\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s1 =\n                         \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s2", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<forall>V\\<in>fv (Var x). \\<Gamma> V = Some Low \\<Longrightarrow>\n       \\<lbrakk>Var x\\<rbrakk>s1 = \\<lbrakk>Var x\\<rbrakk>s2\n 2. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<forall>V\\<in>fv e1.\n                   \\<Gamma> V = Some Low \\<Longrightarrow>\n                \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2;\n        \\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low \\<Longrightarrow>\n        \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2;\n        \\<forall>V\\<in>fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2).\n           \\<Gamma> V = Some Low\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s1 =\n                         \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s2", "case (Var V)"], ["proof (state)\nthis:\n  \\<forall>V\\<in>fv (Var V). \\<Gamma> V = Some Low\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<forall>V\\<in>fv (Var x). \\<Gamma> V = Some Low \\<Longrightarrow>\n       \\<lbrakk>Var x\\<rbrakk>s1 = \\<lbrakk>Var x\\<rbrakk>s2\n 2. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<forall>V\\<in>fv e1.\n                   \\<Gamma> V = Some Low \\<Longrightarrow>\n                \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2;\n        \\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low \\<Longrightarrow>\n        \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2;\n        \\<forall>V\\<in>fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2).\n           \\<Gamma> V = Some Low\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s1 =\n                         \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s2", "have \"\\<lbrakk>Var V\\<rbrakk> s1 = s1 V\" and \"\\<lbrakk>Var V\\<rbrakk> s2 = s2 V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Var V\\<rbrakk>s1 = s1 V &&& \\<lbrakk>Var V\\<rbrakk>s2 = s2 V", "by(auto simp:Var)"], ["proof (state)\nthis:\n  \\<lbrakk>Var V\\<rbrakk>s1 = s1 V\n  \\<lbrakk>Var V\\<rbrakk>s2 = s2 V\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<forall>V\\<in>fv (Var x). \\<Gamma> V = Some Low \\<Longrightarrow>\n       \\<lbrakk>Var x\\<rbrakk>s1 = \\<lbrakk>Var x\\<rbrakk>s2\n 2. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<forall>V\\<in>fv e1.\n                   \\<Gamma> V = Some Low \\<Longrightarrow>\n                \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2;\n        \\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low \\<Longrightarrow>\n        \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2;\n        \\<forall>V\\<in>fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2).\n           \\<Gamma> V = Some Low\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s1 =\n                         \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s2", "have \"V \\<in> fv (Var V)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. V \\<in> fv (Var V)", "by(simp add:FVv)"], ["proof (state)\nthis:\n  V \\<in> fv (Var V)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<forall>V\\<in>fv (Var x). \\<Gamma> V = Some Low \\<Longrightarrow>\n       \\<lbrakk>Var x\\<rbrakk>s1 = \\<lbrakk>Var x\\<rbrakk>s2\n 2. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<forall>V\\<in>fv e1.\n                   \\<Gamma> V = Some Low \\<Longrightarrow>\n                \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2;\n        \\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low \\<Longrightarrow>\n        \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2;\n        \\<forall>V\\<in>fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2).\n           \\<Gamma> V = Some Low\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s1 =\n                         \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s2", "from \\<open>V \\<in> fv (Var V)\\<close> \\<open>\\<forall>X\\<in>fv (Var V). \\<Gamma> X = Some Low\\<close>"], ["proof (chain)\npicking this:\n  V \\<in> fv (Var V)\n  \\<forall>X\\<in>fv (Var V). \\<Gamma> X = Some Low", "have \"\\<Gamma> V = Some Low\""], ["proof (prove)\nusing this:\n  V \\<in> fv (Var V)\n  \\<forall>X\\<in>fv (Var V). \\<Gamma> X = Some Low\n\ngoal (1 subgoal):\n 1. \\<Gamma> V = Some Low", "by simp"], ["proof (state)\nthis:\n  \\<Gamma> V = Some Low\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<forall>V\\<in>fv (Var x). \\<Gamma> V = Some Low \\<Longrightarrow>\n       \\<lbrakk>Var x\\<rbrakk>s1 = \\<lbrakk>Var x\\<rbrakk>s2\n 2. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<forall>V\\<in>fv e1.\n                   \\<Gamma> V = Some Low \\<Longrightarrow>\n                \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2;\n        \\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low \\<Longrightarrow>\n        \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2;\n        \\<forall>V\\<in>fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2).\n           \\<Gamma> V = Some Low\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s1 =\n                         \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s2", "with assms"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<forall>V\\<in>fv e. \\<Gamma> V = Some Low\n  \\<Gamma> V = Some Low", "have \"s1 V = s2 V\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<forall>V\\<in>fv e. \\<Gamma> V = Some Low\n  \\<Gamma> V = Some Low\n\ngoal (1 subgoal):\n 1. s1 V = s2 V", "by(auto simp add:lowEquiv_def)"], ["proof (state)\nthis:\n  s1 V = s2 V\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<forall>V\\<in>fv (Var x). \\<Gamma> V = Some Low \\<Longrightarrow>\n       \\<lbrakk>Var x\\<rbrakk>s1 = \\<lbrakk>Var x\\<rbrakk>s2\n 2. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<forall>V\\<in>fv e1.\n                   \\<Gamma> V = Some Low \\<Longrightarrow>\n                \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2;\n        \\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low \\<Longrightarrow>\n        \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2;\n        \\<forall>V\\<in>fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2).\n           \\<Gamma> V = Some Low\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s1 =\n                         \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s2", "thus ?case"], ["proof (prove)\nusing this:\n  s1 V = s2 V\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Var V\\<rbrakk>s1 = \\<lbrakk>Var V\\<rbrakk>s2", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>Var V\\<rbrakk>s1 = \\<lbrakk>Var V\\<rbrakk>s2\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<forall>V\\<in>fv e1.\n                   \\<Gamma> V = Some Low \\<Longrightarrow>\n                \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2;\n        \\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low \\<Longrightarrow>\n        \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2;\n        \\<forall>V\\<in>fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2).\n           \\<Gamma> V = Some Low\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s1 =\n                         \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s2", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<forall>V\\<in>fv e1.\n                   \\<Gamma> V = Some Low \\<Longrightarrow>\n                \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2;\n        \\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low \\<Longrightarrow>\n        \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2;\n        \\<forall>V\\<in>fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2).\n           \\<Gamma> V = Some Low\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s1 =\n                         \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s2", "case (BinOp e1 bop e2)"], ["proof (state)\nthis:\n  \\<forall>V\\<in>fv e1. \\<Gamma> V = Some Low \\<Longrightarrow>\n  \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2\n  \\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low \\<Longrightarrow>\n  \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2\n  \\<forall>V\\<in>fv (e1 \\<guillemotleft>bop\\<guillemotright> e2).\n     \\<Gamma> V = Some Low\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<forall>V\\<in>fv e1.\n                   \\<Gamma> V = Some Low \\<Longrightarrow>\n                \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2;\n        \\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low \\<Longrightarrow>\n        \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2;\n        \\<forall>V\\<in>fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2).\n           \\<Gamma> V = Some Low\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s1 =\n                         \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s2", "note IH1 = \\<open>\\<forall>V\\<in>fv e1. \\<Gamma> V = Some Low \\<Longrightarrow> \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2\\<close>"], ["proof (state)\nthis:\n  \\<forall>V\\<in>fv e1. \\<Gamma> V = Some Low \\<Longrightarrow>\n  \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<forall>V\\<in>fv e1.\n                   \\<Gamma> V = Some Low \\<Longrightarrow>\n                \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2;\n        \\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low \\<Longrightarrow>\n        \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2;\n        \\<forall>V\\<in>fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2).\n           \\<Gamma> V = Some Low\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s1 =\n                         \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s2", "note IH2 = \\<open>\\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low \\<Longrightarrow> \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2\\<close>"], ["proof (state)\nthis:\n  \\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low \\<Longrightarrow>\n  \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<forall>V\\<in>fv e1.\n                   \\<Gamma> V = Some Low \\<Longrightarrow>\n                \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2;\n        \\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low \\<Longrightarrow>\n        \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2;\n        \\<forall>V\\<in>fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2).\n           \\<Gamma> V = Some Low\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s1 =\n                         \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s2", "from \\<open>\\<forall>V\\<in>fv (e1 \\<guillemotleft>bop\\<guillemotright> e2). \\<Gamma> V = Some Low\\<close>"], ["proof (chain)\npicking this:\n  \\<forall>V\\<in>fv (e1 \\<guillemotleft>bop\\<guillemotright> e2).\n     \\<Gamma> V = Some Low", "have \"\\<forall>V\\<in>fv e1. \\<Gamma> V = Some Low\"\n    and \"\\<forall>V\\<in> fv e2. \\<Gamma> V = Some Low\""], ["proof (prove)\nusing this:\n  \\<forall>V\\<in>fv (e1 \\<guillemotleft>bop\\<guillemotright> e2).\n     \\<Gamma> V = Some Low\n\ngoal (1 subgoal):\n 1. \\<forall>V\\<in>fv e1. \\<Gamma> V = Some Low &&&\n    \\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low", "by auto"], ["proof (state)\nthis:\n  \\<forall>V\\<in>fv e1. \\<Gamma> V = Some Low\n  \\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<forall>V\\<in>fv e1.\n                   \\<Gamma> V = Some Low \\<Longrightarrow>\n                \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2;\n        \\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low \\<Longrightarrow>\n        \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2;\n        \\<forall>V\\<in>fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2).\n           \\<Gamma> V = Some Low\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s1 =\n                         \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s2", "from IH1[OF \\<open>\\<forall>V\\<in>fv e1. \\<Gamma> V = Some Low\\<close>]"], ["proof (chain)\npicking this:\n  \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2", "have \"\\<lbrakk>e1\\<rbrakk> s1 = \\<lbrakk>e1\\<rbrakk> s2\""], ["proof (prove)\nusing this:\n  \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2", "."], ["proof (state)\nthis:\n  \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<forall>V\\<in>fv e1.\n                   \\<Gamma> V = Some Low \\<Longrightarrow>\n                \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2;\n        \\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low \\<Longrightarrow>\n        \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2;\n        \\<forall>V\\<in>fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2).\n           \\<Gamma> V = Some Low\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s1 =\n                         \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s2", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<forall>V\\<in>fv e1.\n                   \\<Gamma> V = Some Low \\<Longrightarrow>\n                \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2;\n        \\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low \\<Longrightarrow>\n        \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2;\n        \\<forall>V\\<in>fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2).\n           \\<Gamma> V = Some Low\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s1 =\n                         \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s2", "from IH2[OF \\<open>\\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low\\<close>]"], ["proof (chain)\npicking this:\n  \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2", "have \"\\<lbrakk>e2\\<rbrakk> s1 = \\<lbrakk>e2\\<rbrakk> s2\""], ["proof (prove)\nusing this:\n  \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2", "."], ["proof (state)\nthis:\n  \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2\n\ngoal (1 subgoal):\n 1. \\<And>e1 x2a e2.\n       \\<lbrakk>\\<forall>V\\<in>fv e1.\n                   \\<Gamma> V = Some Low \\<Longrightarrow>\n                \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2;\n        \\<forall>V\\<in>fv e2. \\<Gamma> V = Some Low \\<Longrightarrow>\n        \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2;\n        \\<forall>V\\<in>fv (e1 \\<guillemotleft>x2a\\<guillemotright> e2).\n           \\<Gamma> V = Some Low\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s1 =\n                         \\<lbrakk>e1 \\<guillemotleft>x2a\\<guillemotright> e2\\<rbrakk>s2", "ultimately"], ["proof (chain)\npicking this:\n  \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2\n  \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>e1\\<rbrakk>s1 = \\<lbrakk>e1\\<rbrakk>s2\n  \\<lbrakk>e2\\<rbrakk>s1 = \\<lbrakk>e2\\<rbrakk>s2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>e1 \\<guillemotleft>bop\\<guillemotright> e2\\<rbrakk>s1 =\n    \\<lbrakk>e1 \\<guillemotleft>bop\\<guillemotright> e2\\<rbrakk>s2", "by(cases \"\\<lbrakk>e1\\<rbrakk> s2\",auto)"], ["proof (state)\nthis:\n  \\<lbrakk>e1 \\<guillemotleft>bop\\<guillemotright> e2\\<rbrakk>s1 =\n  \\<lbrakk>e1 \\<guillemotleft>bop\\<guillemotright> e2\\<rbrakk>s2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma interpretLow2:\n  assumes \"\\<Gamma> \\<turnstile> e : Low\" and \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\" shows \"\\<lbrakk>e\\<rbrakk> s1 = \\<lbrakk>e\\<rbrakk> s2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>e\\<rbrakk>s1 = \\<lbrakk>e\\<rbrakk>s2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>e\\<rbrakk>s1 = \\<lbrakk>e\\<rbrakk>s2", "from \\<open>\\<Gamma> \\<turnstile> e : Low\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> e : Low", "have \"fv e \\<subseteq> dom \\<Gamma>\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e : Low\n\ngoal (1 subgoal):\n 1. fv e \\<subseteq> dom \\<Gamma>", "by(auto dest:typeableFreevars)"], ["proof (state)\nthis:\n  fv e \\<subseteq> dom \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>e\\<rbrakk>s1 = \\<lbrakk>e\\<rbrakk>s2", "have \"\\<forall>x\\<in> fv e. \\<Gamma> x = Some Low\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>fv e. \\<Gamma> x = Some Low", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> fv e \\<Longrightarrow> \\<Gamma> x = Some Low", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> fv e \\<Longrightarrow> \\<Gamma> x = Some Low", "assume \"x \\<in> fv e\""], ["proof (state)\nthis:\n  x \\<in> fv e\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> fv e \\<Longrightarrow> \\<Gamma> x = Some Low", "with \\<open>\\<Gamma> \\<turnstile> e : Low\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> e : Low\n  x \\<in> fv e", "show \"\\<Gamma> x = Some Low\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e : Low\n  x \\<in> fv e\n\ngoal (1 subgoal):\n 1. \\<Gamma> x = Some Low", "by(auto intro:exprTypingLow)"], ["proof (state)\nthis:\n  \\<Gamma> x = Some Low\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x\\<in>fv e. \\<Gamma> x = Some Low\n\ngoal (1 subgoal):\n 1. \\<lbrakk>e\\<rbrakk>s1 = \\<lbrakk>e\\<rbrakk>s2", "with \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<forall>x\\<in>fv e. \\<Gamma> x = Some Low", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<forall>x\\<in>fv e. \\<Gamma> x = Some Low\n\ngoal (1 subgoal):\n 1. \\<lbrakk>e\\<rbrakk>s1 = \\<lbrakk>e\\<rbrakk>s2", "by(rule interpretLow)"], ["proof (state)\nthis:\n  \\<lbrakk>e\\<rbrakk>s1 = \\<lbrakk>e\\<rbrakk>s2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma assignNIhighlemma:\n  assumes \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\"  and \"\\<Gamma> V = Some High\" and \"s1' = s1(V:= \\<lbrakk>e\\<rbrakk> s1)\" \n  and \"s2' = s2(V:= \\<lbrakk>e\\<rbrakk> s2)\"\n  shows \"\\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "fix V'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "assume \"V' \\<in> dom \\<Gamma>\" and  \"\\<Gamma> V' = Some Low\""], ["proof (state)\nthis:\n  V' \\<in> dom \\<Gamma>\n  \\<Gamma> V' = Some Low\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close>  \\<open>\\<Gamma> V' = Some Low\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<Gamma> V' = Some Low", "have \"s1 V' = s2 V'\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<Gamma> V' = Some Low\n\ngoal (1 subgoal):\n 1. s1 V' = s2 V'", "by(auto simp add:lowEquiv_def)"], ["proof (state)\nthis:\n  s1 V' = s2 V'\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "have \"s1' V' = s2' V'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s1' V' = s2' V'", "proof(cases \"V' = V\")"], ["proof (state)\ngoal (2 subgoals):\n 1. V' = V \\<Longrightarrow> s1' V' = s2' V'\n 2. V' \\<noteq> V \\<Longrightarrow> s1' V' = s2' V'", "case True"], ["proof (state)\nthis:\n  V' = V\n\ngoal (2 subgoals):\n 1. V' = V \\<Longrightarrow> s1' V' = s2' V'\n 2. V' \\<noteq> V \\<Longrightarrow> s1' V' = s2' V'", "with \\<open>\\<Gamma> V' = Some Low\\<close> \\<open>\\<Gamma> V = Some High\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> V' = Some Low\n  \\<Gamma> V = Some High\n  V' = V", "have False"], ["proof (prove)\nusing this:\n  \\<Gamma> V' = Some Low\n  \\<Gamma> V = Some High\n  V' = V\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal (2 subgoals):\n 1. V' = V \\<Longrightarrow> s1' V' = s2' V'\n 2. V' \\<noteq> V \\<Longrightarrow> s1' V' = s2' V'", "thus ?thesis"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. s1' V' = s2' V'", "by simp"], ["proof (state)\nthis:\n  s1' V' = s2' V'\n\ngoal (1 subgoal):\n 1. V' \\<noteq> V \\<Longrightarrow> s1' V' = s2' V'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. V' \\<noteq> V \\<Longrightarrow> s1' V' = s2' V'", "case False"], ["proof (state)\nthis:\n  V' \\<noteq> V\n\ngoal (1 subgoal):\n 1. V' \\<noteq> V \\<Longrightarrow> s1' V' = s2' V'", "with \\<open>s1' = s1(V:= \\<lbrakk>e\\<rbrakk> s1)\\<close> \\<open>s2' = s2(V:= \\<lbrakk>e\\<rbrakk> s2)\\<close>"], ["proof (chain)\npicking this:\n  s1' = s1(V := \\<lbrakk>e\\<rbrakk>s1)\n  s2' = s2(V := \\<lbrakk>e\\<rbrakk>s2)\n  V' \\<noteq> V", "have \"s1 V' = s1' V'\" and \"s2 V' = s2' V'\""], ["proof (prove)\nusing this:\n  s1' = s1(V := \\<lbrakk>e\\<rbrakk>s1)\n  s2' = s2(V := \\<lbrakk>e\\<rbrakk>s2)\n  V' \\<noteq> V\n\ngoal (1 subgoal):\n 1. s1 V' = s1' V' &&& s2 V' = s2' V'", "by auto"], ["proof (state)\nthis:\n  s1 V' = s1' V'\n  s2 V' = s2' V'\n\ngoal (1 subgoal):\n 1. V' \\<noteq> V \\<Longrightarrow> s1' V' = s2' V'", "with \\<open>s1 V' = s2 V'\\<close>"], ["proof (chain)\npicking this:\n  s1 V' = s2 V'\n  s1 V' = s1' V'\n  s2 V' = s2' V'", "show ?thesis"], ["proof (prove)\nusing this:\n  s1 V' = s2 V'\n  s1 V' = s1' V'\n  s2 V' = s2' V'\n\ngoal (1 subgoal):\n 1. s1' V' = s2' V'", "by simp"], ["proof (state)\nthis:\n  s1' V' = s2' V'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  s1' V' = s2' V'\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?V'2 \\<in> dom \\<Gamma>; \\<Gamma> ?V'2 = Some Low\\<rbrakk>\n  \\<Longrightarrow> s1' ?V'2 = s2' ?V'2\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>?V'2 \\<in> dom \\<Gamma>; \\<Gamma> ?V'2 = Some Low\\<rbrakk>\n  \\<Longrightarrow> s1' ?V'2 = s2' ?V'2\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "by(auto simp add:lowEquiv_def)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma assignNIlowlemma:\n  assumes \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\"  and \"\\<Gamma> V = Some Low\" and \"\\<Gamma> \\<turnstile> e : Low\" \n  and \"s1' = s1(V:= \\<lbrakk>e\\<rbrakk> s1)\" and \"s2' = s2(V:= \\<lbrakk>e\\<rbrakk> s2)\"\n  shows \"\\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "fix V'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "assume \"V' \\<in> dom \\<Gamma>\" and  \"\\<Gamma> V' = Some Low\""], ["proof (state)\nthis:\n  V' \\<in> dom \\<Gamma>\n  \\<Gamma> V' = Some Low\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close>  \\<open>\\<Gamma> V' = Some Low\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<Gamma> V' = Some Low", "have \"s1 V' = s2 V'\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<Gamma> V' = Some Low\n\ngoal (1 subgoal):\n 1. s1 V' = s2 V'", "by(auto simp add:lowEquiv_def)"], ["proof (state)\nthis:\n  s1 V' = s2 V'\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "have \"s1' V' = s2' V'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s1' V' = s2' V'", "proof(cases \"V' = V\")"], ["proof (state)\ngoal (2 subgoals):\n 1. V' = V \\<Longrightarrow> s1' V' = s2' V'\n 2. V' \\<noteq> V \\<Longrightarrow> s1' V' = s2' V'", "case True"], ["proof (state)\nthis:\n  V' = V\n\ngoal (2 subgoals):\n 1. V' = V \\<Longrightarrow> s1' V' = s2' V'\n 2. V' \\<noteq> V \\<Longrightarrow> s1' V' = s2' V'", "with \\<open>s1' = s1(V:= \\<lbrakk>e\\<rbrakk> s1)\\<close> \\<open>s2' = s2(V:= \\<lbrakk>e\\<rbrakk> s2)\\<close>"], ["proof (chain)\npicking this:\n  s1' = s1(V := \\<lbrakk>e\\<rbrakk>s1)\n  s2' = s2(V := \\<lbrakk>e\\<rbrakk>s2)\n  V' = V", "have \"s1' V' = \\<lbrakk>e\\<rbrakk> s1\" and \"s2' V' = \\<lbrakk>e\\<rbrakk> s2\""], ["proof (prove)\nusing this:\n  s1' = s1(V := \\<lbrakk>e\\<rbrakk>s1)\n  s2' = s2(V := \\<lbrakk>e\\<rbrakk>s2)\n  V' = V\n\ngoal (1 subgoal):\n 1. s1' V' = \\<lbrakk>e\\<rbrakk>s1 &&& s2' V' = \\<lbrakk>e\\<rbrakk>s2", "by auto"], ["proof (state)\nthis:\n  s1' V' = \\<lbrakk>e\\<rbrakk>s1\n  s2' V' = \\<lbrakk>e\\<rbrakk>s2\n\ngoal (2 subgoals):\n 1. V' = V \\<Longrightarrow> s1' V' = s2' V'\n 2. V' \\<noteq> V \\<Longrightarrow> s1' V' = s2' V'", "from \\<open>\\<Gamma> \\<turnstile> e : Low\\<close> \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> e : Low\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "have \"\\<lbrakk>e\\<rbrakk> s1 = \\<lbrakk>e\\<rbrakk> s2\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> e : Low\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>e\\<rbrakk>s1 = \\<lbrakk>e\\<rbrakk>s2", "by(auto intro:interpretLow2)"], ["proof (state)\nthis:\n  \\<lbrakk>e\\<rbrakk>s1 = \\<lbrakk>e\\<rbrakk>s2\n\ngoal (2 subgoals):\n 1. V' = V \\<Longrightarrow> s1' V' = s2' V'\n 2. V' \\<noteq> V \\<Longrightarrow> s1' V' = s2' V'", "with \\<open>s1' V' = \\<lbrakk>e\\<rbrakk> s1\\<close> \\<open>s2' V' = \\<lbrakk>e\\<rbrakk> s2\\<close>"], ["proof (chain)\npicking this:\n  s1' V' = \\<lbrakk>e\\<rbrakk>s1\n  s2' V' = \\<lbrakk>e\\<rbrakk>s2\n  \\<lbrakk>e\\<rbrakk>s1 = \\<lbrakk>e\\<rbrakk>s2", "show ?thesis"], ["proof (prove)\nusing this:\n  s1' V' = \\<lbrakk>e\\<rbrakk>s1\n  s2' V' = \\<lbrakk>e\\<rbrakk>s2\n  \\<lbrakk>e\\<rbrakk>s1 = \\<lbrakk>e\\<rbrakk>s2\n\ngoal (1 subgoal):\n 1. s1' V' = s2' V'", "by simp"], ["proof (state)\nthis:\n  s1' V' = s2' V'\n\ngoal (1 subgoal):\n 1. V' \\<noteq> V \\<Longrightarrow> s1' V' = s2' V'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. V' \\<noteq> V \\<Longrightarrow> s1' V' = s2' V'", "case False"], ["proof (state)\nthis:\n  V' \\<noteq> V\n\ngoal (1 subgoal):\n 1. V' \\<noteq> V \\<Longrightarrow> s1' V' = s2' V'", "with \\<open>s1' = s1(V:= \\<lbrakk>e\\<rbrakk> s1)\\<close> \\<open>s2' = s2(V:= \\<lbrakk>e\\<rbrakk> s2)\\<close>"], ["proof (chain)\npicking this:\n  s1' = s1(V := \\<lbrakk>e\\<rbrakk>s1)\n  s2' = s2(V := \\<lbrakk>e\\<rbrakk>s2)\n  V' \\<noteq> V", "have \"s1' V' = s1 V'\" and \"s2' V' = s2 V'\""], ["proof (prove)\nusing this:\n  s1' = s1(V := \\<lbrakk>e\\<rbrakk>s1)\n  s2' = s2(V := \\<lbrakk>e\\<rbrakk>s2)\n  V' \\<noteq> V\n\ngoal (1 subgoal):\n 1. s1' V' = s1 V' &&& s2' V' = s2 V'", "by auto"], ["proof (state)\nthis:\n  s1' V' = s1 V'\n  s2' V' = s2 V'\n\ngoal (1 subgoal):\n 1. V' \\<noteq> V \\<Longrightarrow> s1' V' = s2' V'", "with \\<open>s1 V' = s2 V'\\<close>"], ["proof (chain)\npicking this:\n  s1 V' = s2 V'\n  s1' V' = s1 V'\n  s2' V' = s2 V'", "have \"s1' V' = s2' V'\""], ["proof (prove)\nusing this:\n  s1 V' = s2 V'\n  s1' V' = s1 V'\n  s2' V' = s2 V'\n\ngoal (1 subgoal):\n 1. s1' V' = s2' V'", "by simp"], ["proof (state)\nthis:\n  s1' V' = s2' V'\n\ngoal (1 subgoal):\n 1. V' \\<noteq> V \\<Longrightarrow> s1' V' = s2' V'", "with False \\<open>s1' V' = s1 V'\\<close> \\<open>s2' V' = s2 V'\\<close>"], ["proof (chain)\npicking this:\n  V' \\<noteq> V\n  s1' V' = s1 V'\n  s2' V' = s2 V'\n  s1' V' = s2' V'", "show ?thesis"], ["proof (prove)\nusing this:\n  V' \\<noteq> V\n  s1' V' = s1 V'\n  s2' V' = s2 V'\n  s1' V' = s2' V'\n\ngoal (1 subgoal):\n 1. s1' V' = s2' V'", "by auto"], ["proof (state)\nthis:\n  s1' V' = s2' V'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  s1' V' = s2' V'\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?V'2 \\<in> dom \\<Gamma>; \\<Gamma> ?V'2 = Some Low\\<rbrakk>\n  \\<Longrightarrow> s1' ?V'2 = s2' ?V'2\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>?V'2 \\<in> dom \\<Gamma>; \\<Gamma> ?V'2 = Some Low\\<rbrakk>\n  \\<Longrightarrow> s1' ?V'2 = s2' ?V'2\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "by(simp add:lowEquiv_def)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Sequential Compositionality is given the status of a theorem because \n  compositionality is no longer valid in case of concurrency\\<close>"], ["", "theorem SeqCompositionality:\n  assumes \"nonInterference \\<Gamma> c1\" and \"nonInterference \\<Gamma> c2\" \n  shows \"nonInterference \\<Gamma> (c1;;c2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> (c1;; c2)", "proof(rule nonInterferenceI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>c1;; c2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>c1;; c2,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "fix s1 s2 s1' s2'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>c1;; c2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>c1;; c2,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "assume \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\" and \"\\<langle>c1;;c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\" \n    and \"\\<langle>c1;;c2,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\""], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<langle>c1;; c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\n  \\<langle>c1;; c2,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>c1;; c2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>c1;; c2,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<langle>c1;;c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<langle>c1;; c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>", "obtain s1'' where \"\\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1''\\<rangle>\"\n    and \"\\<langle>c2,s1''\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<langle>c1;; c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>s1''.\n        \\<lbrakk>\\<langle>c1,s1\\<rangle> \\<rightarrow>*\n                 \\<langle>Skip,s1''\\<rangle>;\n         \\<langle>c2,s1''\\<rangle> \\<rightarrow>*\n         \\<langle>Skip,s1'\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(auto dest:Seq_reds)"], ["proof (state)\nthis:\n  \\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1''\\<rangle>\n  \\<langle>c2,s1''\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>c1;; c2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>c1;; c2,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<langle>c1;;c2,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<langle>c1;; c2,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>", "obtain s2'' where \"\\<langle>c1,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2''\\<rangle>\"\n    and \"\\<langle>c2,s2''\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<langle>c1;; c2,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>s2''.\n        \\<lbrakk>\\<langle>c1,s2\\<rangle> \\<rightarrow>*\n                 \\<langle>Skip,s2''\\<rangle>;\n         \\<langle>c2,s2''\\<rangle> \\<rightarrow>*\n         \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(auto dest:Seq_reds)"], ["proof (state)\nthis:\n  \\<langle>c1,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2''\\<rangle>\n  \\<langle>c2,s2''\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>c1;; c2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>c1;; c2,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close> \\<open>\\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1''\\<rangle>\\<close> \\<open>\\<langle>c1,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2''\\<rangle>\\<close>\n    \\<open>nonInterference \\<Gamma> c1\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1''\\<rangle>\n  \\<langle>c1,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2''\\<rangle>\n  nonInterference \\<Gamma> c1", "have \"\\<Gamma> \\<turnstile> s1'' \\<approx>\\<^sub>L s2''\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1''\\<rangle>\n  \\<langle>c1,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2''\\<rangle>\n  nonInterference \\<Gamma> c1\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1'' \\<approx>\\<^sub>L s2''", "by(auto simp:nonInterference_def)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1'' \\<approx>\\<^sub>L s2''\n\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>c1;; c2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>c1;; c2,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "with \\<open>\\<langle>c2,s1''\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\\<close> \\<open>\\<langle>c2,s2''\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\\<close> \\<open>nonInterference \\<Gamma> c2\\<close>"], ["proof (chain)\npicking this:\n  \\<langle>c2,s1''\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\n  \\<langle>c2,s2''\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\n  nonInterference \\<Gamma> c2\n  \\<Gamma> \\<turnstile> s1'' \\<approx>\\<^sub>L s2''", "show \"\\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\""], ["proof (prove)\nusing this:\n  \\<langle>c2,s1''\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\n  \\<langle>c2,s2''\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\n  nonInterference \\<Gamma> c2\n  \\<Gamma> \\<turnstile> s1'' \\<approx>\\<^sub>L s2''\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "by(auto simp:nonInterference_def)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma WhileStepInduct:\n  assumes while:\"\\<langle>while (b) c,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\"\n  and body:\"\\<And>s1 s2. \\<langle>c,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>  \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\" and \"\\<Gamma>,High \\<turnstile> c\"\n  shows \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "using while"], ["proof (prove)\nusing this:\n  \\<langle>while (b) c,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "proof (induct rule:while_reds_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>s.\n       \\<lbrakk>b\\<rbrakk>s = Some false \\<Longrightarrow>\n       \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s\n 2. \\<And>s s''.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some true;\n        \\<langle>c,s\\<rangle> \\<rightarrow>* \\<langle>Skip,s''\\<rangle>;\n        \\<langle>while (b) c,s''\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>;\n        \\<Gamma> \\<turnstile> s'' \\<approx>\\<^sub>L s2\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2", "case (false s)"], ["proof (state)\nthis:\n  \\<lbrakk>b\\<rbrakk>s = Some false\n\ngoal (2 subgoals):\n 1. \\<And>s.\n       \\<lbrakk>b\\<rbrakk>s = Some false \\<Longrightarrow>\n       \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s\n 2. \\<And>s s''.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some true;\n        \\<langle>c,s\\<rangle> \\<rightarrow>* \\<langle>Skip,s''\\<rangle>;\n        \\<langle>while (b) c,s''\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>;\n        \\<Gamma> \\<turnstile> s'' \\<approx>\\<^sub>L s2\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>b\\<rbrakk>s = Some false\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s", "by(auto simp add:lowEquiv_def)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s\n\ngoal (1 subgoal):\n 1. \\<And>s s''.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some true;\n        \\<langle>c,s\\<rangle> \\<rightarrow>* \\<langle>Skip,s''\\<rangle>;\n        \\<langle>while (b) c,s''\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>;\n        \\<Gamma> \\<turnstile> s'' \\<approx>\\<^sub>L s2\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s s''.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some true;\n        \\<langle>c,s\\<rangle> \\<rightarrow>* \\<langle>Skip,s''\\<rangle>;\n        \\<langle>while (b) c,s''\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>;\n        \\<Gamma> \\<turnstile> s'' \\<approx>\\<^sub>L s2\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2", "case (true s1 s3)"], ["proof (state)\nthis:\n  \\<lbrakk>b\\<rbrakk>s1 = Some true\n  \\<langle>c,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s3\\<rangle>\n  \\<langle>while (b) c,s3\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\n  \\<Gamma> \\<turnstile> s3 \\<approx>\\<^sub>L s2\n\ngoal (1 subgoal):\n 1. \\<And>s s''.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some true;\n        \\<langle>c,s\\<rangle> \\<rightarrow>* \\<langle>Skip,s''\\<rangle>;\n        \\<langle>while (b) c,s''\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>;\n        \\<Gamma> \\<turnstile> s'' \\<approx>\\<^sub>L s2\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2", "from body[OF \\<open>\\<langle>c,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s3\\<rangle>\\<close>]"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s3", "have \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s3\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s3\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s3", "by simp"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s3\n\ngoal (1 subgoal):\n 1. \\<And>s s''.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some true;\n        \\<langle>c,s\\<rangle> \\<rightarrow>* \\<langle>Skip,s''\\<rangle>;\n        \\<langle>while (b) c,s''\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>;\n        \\<Gamma> \\<turnstile> s'' \\<approx>\\<^sub>L s2\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2", "with \\<open>\\<Gamma> \\<turnstile> s3 \\<approx>\\<^sub>L s2\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s3 \\<approx>\\<^sub>L s2\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s3", "show ?case"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s3 \\<approx>\\<^sub>L s2\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s3\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "by(auto intro:lowEquivTransitive)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>In case control conditions from if/while are high, the body of an\n  if/while must not change low variables in order to prevent implicit flow.\n  That is, start and end state of any if/while body must be low equivalent.\\<close>"], ["", "theorem highBodies:\n  assumes \"\\<Gamma>,High \\<turnstile> c\" and \"\\<langle>c,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\"\n  shows \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\"\n  \\<comment> \\<open>all intermediate states must be well formed, otherwise the proof does not \n  work for uninitialized variables. Thus it is propagated through the \n  theorem conclusion\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "using assms"], ["proof (prove)\nusing this:\n  \\<Gamma>,High \\<turnstile> c\n  \\<langle>c,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "proof(induct c arbitrary:s1 s2 rule:com.induct)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>s1 s2.\n       \\<lbrakk>\\<Gamma>,High \\<turnstile> Skip;\n        \\<langle>Skip,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<Gamma>,High \\<turnstile> x1:=x2;\n        \\<langle>x1:=x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 4. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 5. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "case Skip"], ["proof (state)\nthis:\n  \\<Gamma>,High \\<turnstile> Skip\n  \\<langle>Skip,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\n\ngoal (5 subgoals):\n 1. \\<And>s1 s2.\n       \\<lbrakk>\\<Gamma>,High \\<turnstile> Skip;\n        \\<langle>Skip,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<Gamma>,High \\<turnstile> x1:=x2;\n        \\<langle>x1:=x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 4. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 5. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "from \\<open>\\<langle>Skip,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<langle>Skip,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>", "have \"s1 = s2\""], ["proof (prove)\nusing this:\n  \\<langle>Skip,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\n\ngoal (1 subgoal):\n 1. s1 = s2", "by (auto dest:Skip_reds)"], ["proof (state)\nthis:\n  s1 = s2\n\ngoal (5 subgoals):\n 1. \\<And>s1 s2.\n       \\<lbrakk>\\<Gamma>,High \\<turnstile> Skip;\n        \\<langle>Skip,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<Gamma>,High \\<turnstile> x1:=x2;\n        \\<langle>x1:=x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 4. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 5. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "thus ?case"], ["proof (prove)\nusing this:\n  s1 = s2\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "by(simp add:lowEquiv_def)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n\ngoal (4 subgoals):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<Gamma>,High \\<turnstile> x1:=x2;\n        \\<langle>x1:=x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 4. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<Gamma>,High \\<turnstile> x1:=x2;\n        \\<langle>x1:=x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 4. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "case (LAss V e)"], ["proof (state)\nthis:\n  \\<Gamma>,High \\<turnstile> V:=e\n  \\<langle>V:=e,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<Gamma>,High \\<turnstile> x1:=x2;\n        \\<langle>x1:=x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 4. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "from \\<open>\\<Gamma>,High \\<turnstile> V:=e\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma>,High \\<turnstile> V:=e", "have \"\\<Gamma> V = Some High\""], ["proof (prove)\nusing this:\n  \\<Gamma>,High \\<turnstile> V:=e\n\ngoal (1 subgoal):\n 1. \\<Gamma> V = Some High", "by(auto elim:secComTyping.cases)"], ["proof (state)\nthis:\n  \\<Gamma> V = Some High\n\ngoal (4 subgoals):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<Gamma>,High \\<turnstile> x1:=x2;\n        \\<langle>x1:=x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 4. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "from \\<open>\\<langle>V:=e,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<langle>V:=e,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>", "have \"s2 = s1(V:= \\<lbrakk>e\\<rbrakk>s1)\""], ["proof (prove)\nusing this:\n  \\<langle>V:=e,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\n\ngoal (1 subgoal):\n 1. s2 = s1(V := \\<lbrakk>e\\<rbrakk>s1)", "by (auto intro:LAss_reds)"], ["proof (state)\nthis:\n  s2 = s1(V := \\<lbrakk>e\\<rbrakk>s1)\n\ngoal (4 subgoals):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<Gamma>,High \\<turnstile> x1:=x2;\n        \\<langle>x1:=x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 4. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "{"], ["proof (state)\nthis:\n  s2 = s1(V := \\<lbrakk>e\\<rbrakk>s1)\n\ngoal (4 subgoals):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<Gamma>,High \\<turnstile> x1:=x2;\n        \\<langle>x1:=x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 4. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "fix V'"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<Gamma>,High \\<turnstile> x1:=x2;\n        \\<langle>x1:=x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 4. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "assume \"V' \\<in> dom \\<Gamma>\" and \"\\<Gamma> V' = Some Low\""], ["proof (state)\nthis:\n  V' \\<in> dom \\<Gamma>\n  \\<Gamma> V' = Some Low\n\ngoal (4 subgoals):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<Gamma>,High \\<turnstile> x1:=x2;\n        \\<langle>x1:=x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 4. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "have \"s1 V' = s2 V'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s1 V' = s2 V'", "proof(cases \"V' = V\")"], ["proof (state)\ngoal (2 subgoals):\n 1. V' = V \\<Longrightarrow> s1 V' = s2 V'\n 2. V' \\<noteq> V \\<Longrightarrow> s1 V' = s2 V'", "case True"], ["proof (state)\nthis:\n  V' = V\n\ngoal (2 subgoals):\n 1. V' = V \\<Longrightarrow> s1 V' = s2 V'\n 2. V' \\<noteq> V \\<Longrightarrow> s1 V' = s2 V'", "with \\<open>\\<Gamma> V' = Some Low\\<close> \\<open>\\<Gamma> V = Some High\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> V' = Some Low\n  \\<Gamma> V = Some High\n  V' = V", "have False"], ["proof (prove)\nusing this:\n  \\<Gamma> V' = Some Low\n  \\<Gamma> V = Some High\n  V' = V\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal (2 subgoals):\n 1. V' = V \\<Longrightarrow> s1 V' = s2 V'\n 2. V' \\<noteq> V \\<Longrightarrow> s1 V' = s2 V'", "thus ?thesis"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. s1 V' = s2 V'", "by simp"], ["proof (state)\nthis:\n  s1 V' = s2 V'\n\ngoal (1 subgoal):\n 1. V' \\<noteq> V \\<Longrightarrow> s1 V' = s2 V'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. V' \\<noteq> V \\<Longrightarrow> s1 V' = s2 V'", "case False"], ["proof (state)\nthis:\n  V' \\<noteq> V\n\ngoal (1 subgoal):\n 1. V' \\<noteq> V \\<Longrightarrow> s1 V' = s2 V'", "with \\<open>s2 = s1(V:= \\<lbrakk>e\\<rbrakk>s1)\\<close>"], ["proof (chain)\npicking this:\n  s2 = s1(V := \\<lbrakk>e\\<rbrakk>s1)\n  V' \\<noteq> V", "show ?thesis"], ["proof (prove)\nusing this:\n  s2 = s1(V := \\<lbrakk>e\\<rbrakk>s1)\n  V' \\<noteq> V\n\ngoal (1 subgoal):\n 1. s1 V' = s2 V'", "by simp"], ["proof (state)\nthis:\n  s1 V' = s2 V'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  s1 V' = s2 V'\n\ngoal (4 subgoals):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<Gamma>,High \\<turnstile> x1:=x2;\n        \\<langle>x1:=x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 4. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?V'2 \\<in> dom \\<Gamma>; \\<Gamma> ?V'2 = Some Low\\<rbrakk>\n  \\<Longrightarrow> s1 ?V'2 = s2 ?V'2\n\ngoal (4 subgoals):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<Gamma>,High \\<turnstile> x1:=x2;\n        \\<langle>x1:=x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 4. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>?V'2 \\<in> dom \\<Gamma>; \\<Gamma> ?V'2 = Some Low\\<rbrakk>\n  \\<Longrightarrow> s1 ?V'2 = s2 ?V'2\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "by(auto simp add:lowEquiv_def)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n\ngoal (3 subgoals):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "case (Seq c1 c2)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<Gamma>,High \\<turnstile> c1;\n   \\<langle>c1,?s1.0\\<rangle> \\<rightarrow>*\n   \\<langle>Skip,?s2.0\\<rangle>\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?s1.0 \\<approx>\\<^sub>L ?s2.0\n  \\<lbrakk>\\<Gamma>,High \\<turnstile> c2;\n   \\<langle>c2,?s1.0\\<rangle> \\<rightarrow>*\n   \\<langle>Skip,?s2.0\\<rangle>\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?s1.0 \\<approx>\\<^sub>L ?s2.0\n  \\<Gamma>,High \\<turnstile> c1;; c2\n  \\<langle>c1;; c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "note IH1 = \\<open>\\<And>s1 s2. \\<lbrakk>\\<Gamma>,High \\<turnstile> c1; \\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\\<rbrakk> \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>\\<Gamma>,High \\<turnstile> c1;\n   \\<langle>c1,?s1.0\\<rangle> \\<rightarrow>*\n   \\<langle>Skip,?s2.0\\<rangle>\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?s1.0 \\<approx>\\<^sub>L ?s2.0\n\ngoal (3 subgoals):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "note IH2 = \\<open>\\<And>s1 s2. \\<lbrakk>\\<Gamma>,High \\<turnstile> c2; \\<langle>c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\\<rbrakk> \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>\\<Gamma>,High \\<turnstile> c2;\n   \\<langle>c2,?s1.0\\<rangle> \\<rightarrow>*\n   \\<langle>Skip,?s2.0\\<rangle>\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?s1.0 \\<approx>\\<^sub>L ?s2.0\n\ngoal (3 subgoals):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "from \\<open>\\<Gamma>,High \\<turnstile> c1;;c2\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma>,High \\<turnstile> c1;; c2", "have \"\\<Gamma>,High \\<turnstile> c1\" and \"\\<Gamma>,High \\<turnstile> c2\""], ["proof (prove)\nusing this:\n  \\<Gamma>,High \\<turnstile> c1;; c2\n\ngoal (1 subgoal):\n 1. \\<Gamma>,High \\<turnstile> c1 &&& \\<Gamma>,High \\<turnstile> c2", "by(auto elim:secComTyping.cases)"], ["proof (state)\nthis:\n  \\<Gamma>,High \\<turnstile> c1\n  \\<Gamma>,High \\<turnstile> c2\n\ngoal (3 subgoals):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "from \\<open>\\<langle>c1;;c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<langle>c1;; c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>", "have \"\\<exists>s3. \\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s3\\<rangle> \\<and> \\<langle>c2,s3\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<langle>c1;; c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>s3.\n       \\<langle>c1,s1\\<rangle> \\<rightarrow>*\n       \\<langle>Skip,s3\\<rangle> \\<and>\n       \\<langle>c2,s3\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>", "by(auto intro:Seq_reds)"], ["proof (state)\nthis:\n  \\<exists>s3.\n     \\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s3\\<rangle> \\<and>\n     \\<langle>c2,s3\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "then"], ["proof (chain)\npicking this:\n  \\<exists>s3.\n     \\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s3\\<rangle> \\<and>\n     \\<langle>c2,s3\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>", "obtain s3 where \"\\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s3\\<rangle>\" and \"\\<langle>c2,s3\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<exists>s3.\n     \\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s3\\<rangle> \\<and>\n     \\<langle>c2,s3\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>s3.\n        \\<lbrakk>\\<langle>c1,s1\\<rangle> \\<rightarrow>*\n                 \\<langle>Skip,s3\\<rangle>;\n         \\<langle>c2,s3\\<rangle> \\<rightarrow>*\n         \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s3\\<rangle>\n  \\<langle>c2,s3\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "from IH1[OF \\<open>\\<Gamma>,High \\<turnstile> c1\\<close> \\<open>\\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s3\\<rangle>\\<close>]"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s3", "have \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s3\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s3\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s3", "by simp"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s3\n\ngoal (3 subgoals):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "from IH2[OF \\<open>\\<Gamma>,High \\<turnstile> c2\\<close> \\<open>\\<langle>c2,s3\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\\<close>]"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s3 \\<approx>\\<^sub>L s2", "have \"\\<Gamma> \\<turnstile> s3 \\<approx>\\<^sub>L s2\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s3 \\<approx>\\<^sub>L s2\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s3 \\<approx>\\<^sub>L s2", "by simp"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s3 \\<approx>\\<^sub>L s2\n\ngoal (3 subgoals):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x1;\n                    \\<langle>x1,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n            \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> x1;; x2;\n        \\<langle>x1;; x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 3. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "from \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s3\\<close> \\<open>\\<Gamma> \\<turnstile> s3 \\<approx>\\<^sub>L s2\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s3\n  \\<Gamma> \\<turnstile> s3 \\<approx>\\<^sub>L s2", "show ?case"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s3\n  \\<Gamma> \\<turnstile> s3 \\<approx>\\<^sub>L s2\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "by(auto intro:lowEquivTransitive)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n\ngoal (2 subgoals):\n 1. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "case (Cond b c1 c2)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<Gamma>,High \\<turnstile> c1;\n   \\<langle>c1,?s1.0\\<rangle> \\<rightarrow>*\n   \\<langle>Skip,?s2.0\\<rangle>\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?s1.0 \\<approx>\\<^sub>L ?s2.0\n  \\<lbrakk>\\<Gamma>,High \\<turnstile> c2;\n   \\<langle>c2,?s1.0\\<rangle> \\<rightarrow>*\n   \\<langle>Skip,?s2.0\\<rangle>\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?s1.0 \\<approx>\\<^sub>L ?s2.0\n  \\<Gamma>,High \\<turnstile> if (b) c1 else c2\n  \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "note IH1 = \\<open>\\<And>s1 s2. \\<lbrakk>\\<Gamma>,High \\<turnstile> c1; \\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\\<rbrakk> \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>\\<Gamma>,High \\<turnstile> c1;\n   \\<langle>c1,?s1.0\\<rangle> \\<rightarrow>*\n   \\<langle>Skip,?s2.0\\<rangle>\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?s1.0 \\<approx>\\<^sub>L ?s2.0\n\ngoal (2 subgoals):\n 1. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "note IH2 = \\<open>\\<And>s1 s2. \\<lbrakk>\\<Gamma>,High \\<turnstile> c2; \\<langle>c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\\<rbrakk> \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>\\<Gamma>,High \\<turnstile> c2;\n   \\<langle>c2,?s1.0\\<rangle> \\<rightarrow>*\n   \\<langle>Skip,?s2.0\\<rangle>\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?s1.0 \\<approx>\\<^sub>L ?s2.0\n\ngoal (2 subgoals):\n 1. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "from \\<open>\\<Gamma>,High \\<turnstile> if (b) c1 else c2\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma>,High \\<turnstile> if (b) c1 else c2", "have \"\\<Gamma>,High \\<turnstile> c1\" and \"\\<Gamma>,High \\<turnstile> c2\""], ["proof (prove)\nusing this:\n  \\<Gamma>,High \\<turnstile> if (b) c1 else c2\n\ngoal (1 subgoal):\n 1. \\<Gamma>,High \\<turnstile> c1 &&& \\<Gamma>,High \\<turnstile> c2", "by(auto elim:secComTyping.cases)"], ["proof (state)\nthis:\n  \\<Gamma>,High \\<turnstile> c1\n  \\<Gamma>,High \\<turnstile> c2\n\ngoal (2 subgoals):\n 1. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "from \\<open>\\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2\\<rangle>", "have \"\\<lbrakk>b\\<rbrakk> s1 = Some true \\<or> \\<lbrakk>b\\<rbrakk> s1 = Some false\""], ["proof (prove)\nusing this:\n  \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b\\<rbrakk>s1 = Some true \\<or>\n    \\<lbrakk>b\\<rbrakk>s1 = Some false", "by(auto dest:Cond_True_or_False)"], ["proof (state)\nthis:\n  \\<lbrakk>b\\<rbrakk>s1 = Some true \\<or> \\<lbrakk>b\\<rbrakk>s1 = Some false\n\ngoal (2 subgoals):\n 1. \\<And>x1 x2 x3 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<And>s1 s2.\n           \\<lbrakk>\\<Gamma>,High \\<turnstile> x3;\n            \\<langle>x3,s1\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> if (x1) x2 else x3;\n        \\<langle>if (x1) x2 else x3,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>b\\<rbrakk>s1 = Some true \\<or> \\<lbrakk>b\\<rbrakk>s1 = Some false\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>b\\<rbrakk>s1 = Some true \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<lbrakk>b\\<rbrakk>s1 = Some false \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "assume \"\\<lbrakk>b\\<rbrakk> s1 = Some true\""], ["proof (state)\nthis:\n  \\<lbrakk>b\\<rbrakk>s1 = Some true\n\ngoal (2 subgoals):\n 1. \\<lbrakk>b\\<rbrakk>s1 = Some true \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<lbrakk>b\\<rbrakk>s1 = Some false \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "with \\<open>\\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2\\<rangle>\n  \\<lbrakk>b\\<rbrakk>s1 = Some true", "have \"\\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2\\<rangle>\n  \\<lbrakk>b\\<rbrakk>s1 = Some true\n\ngoal (1 subgoal):\n 1. \\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>", "by (auto intro:CondTrue_reds)"], ["proof (state)\nthis:\n  \\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>b\\<rbrakk>s1 = Some true \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n 2. \\<lbrakk>b\\<rbrakk>s1 = Some false \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "from IH1[OF \\<open>\\<Gamma>,High \\<turnstile> c1\\<close> this]"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "."], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b\\<rbrakk>s1 = Some false \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>b\\<rbrakk>s1 = Some false \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "assume \"\\<lbrakk>b\\<rbrakk> s1 = Some false\""], ["proof (state)\nthis:\n  \\<lbrakk>b\\<rbrakk>s1 = Some false\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b\\<rbrakk>s1 = Some false \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "with \\<open>\\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2\\<rangle>\n  \\<lbrakk>b\\<rbrakk>s1 = Some false", "have \"\\<langle>c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2\\<rangle>\n  \\<lbrakk>b\\<rbrakk>s1 = Some false\n\ngoal (1 subgoal):\n 1. \\<langle>c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>", "by(auto intro:CondFalse_reds)"], ["proof (state)\nthis:\n  \\<langle>c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b\\<rbrakk>s1 = Some false \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "from IH2[OF \\<open>\\<Gamma>,High \\<turnstile> c2\\<close> this]"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "."], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "case (While b c')"], ["proof (state)\nthis:\n  \\<lbrakk>\\<Gamma>,High \\<turnstile> c';\n   \\<langle>c',?s1.0\\<rangle> \\<rightarrow>*\n   \\<langle>Skip,?s2.0\\<rangle>\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?s1.0 \\<approx>\\<^sub>L ?s2.0\n  \\<Gamma>,High \\<turnstile> while (b) c'\n  \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "note IH = \\<open>\\<And>s1 s2. \\<lbrakk>\\<Gamma>,High \\<turnstile> c'; \\<langle>c',s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\\<rbrakk> \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>\\<Gamma>,High \\<turnstile> c';\n   \\<langle>c',?s1.0\\<rangle> \\<rightarrow>*\n   \\<langle>Skip,?s2.0\\<rangle>\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?s1.0 \\<approx>\\<^sub>L ?s2.0\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "from \\<open>\\<Gamma>,High \\<turnstile> while (b) c'\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma>,High \\<turnstile> while (b) c'", "have \"\\<Gamma>,High \\<turnstile> c'\""], ["proof (prove)\nusing this:\n  \\<Gamma>,High \\<turnstile> while (b) c'\n\ngoal (1 subgoal):\n 1. \\<Gamma>,High \\<turnstile> c'", "by(auto elim:secComTyping.cases)"], ["proof (state)\nthis:\n  \\<Gamma>,High \\<turnstile> c'\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "from IH[OF this]"], ["proof (chain)\npicking this:\n  \\<langle>c',?s1.0\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,?s2.0\\<rangle> \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> ?s1.0 \\<approx>\\<^sub>L ?s2.0", "have \"\\<And>s1 s2. \\<lbrakk>\\<langle>c',s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\\<rbrakk> \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\""], ["proof (prove)\nusing this:\n  \\<langle>c',?s1.0\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,?s2.0\\<rangle> \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> ?s1.0 \\<approx>\\<^sub>L ?s2.0\n\ngoal (1 subgoal):\n 1. \\<And>s1 s2.\n       \\<langle>c',s1\\<rangle> \\<rightarrow>*\n       \\<langle>Skip,s2\\<rangle> \\<Longrightarrow>\n       \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "."], ["proof (state)\nthis:\n  \\<langle>c',?s1.0\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,?s2.0\\<rangle> \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> ?s1.0 \\<approx>\\<^sub>L ?s2.0\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2 s1 s2.\n       \\<lbrakk>\\<And>s1 s2.\n                   \\<lbrakk>\\<Gamma>,High \\<turnstile> x2;\n                    \\<langle>x2,s1\\<rangle> \\<rightarrow>*\n                    \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n                   \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<Gamma>,High \\<turnstile> while (x1) x2;\n        \\<langle>while (x1) x2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "with \\<open>\\<langle>while (b) c',s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\\<close> \\<open>\\<Gamma>,High \\<turnstile> c'\\<close>"], ["proof (chain)\npicking this:\n  \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\n  \\<Gamma>,High \\<turnstile> c'\n  \\<langle>c',?s1.0\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,?s2.0\\<rangle> \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> ?s1.0 \\<approx>\\<^sub>L ?s2.0", "show ?case"], ["proof (prove)\nusing this:\n  \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s2\\<rangle>\n  \\<Gamma>,High \\<turnstile> c'\n  \\<langle>c',?s1.0\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,?s2.0\\<rangle> \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> ?s1.0 \\<approx>\\<^sub>L ?s2.0\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "by(auto dest:WhileStepInduct)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma CondHighCompositionality:\n  assumes \"\\<Gamma>,High \\<turnstile> if (b) c1 else c2\"\n  shows \"nonInterference \\<Gamma> (if (b) c1 else c2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> (if (b) c1 else c2)", "proof(rule nonInterferenceI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>if (b) c1 else c2,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "fix s1 s2 s1' s2'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>if (b) c1 else c2,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "assume \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\" and \"\\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\" \n    and \"\\<langle>if (b) c1 else c2,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\""], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s1'\\<rangle>\n  \\<langle>if (b) c1 else c2,s2\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>if (b) c1 else c2,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "show \"\\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<Gamma>,High \\<turnstile> if (b) c1 else c2\\<close> \\<open>\\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma>,High \\<turnstile> if (b) c1 else c2\n  \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s1'\\<rangle>", "have \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s1'\""], ["proof (prove)\nusing this:\n  \\<Gamma>,High \\<turnstile> if (b) c1 else c2\n  \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s1'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s1'", "by(auto dest:highBodies)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s1'\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<Gamma>,High \\<turnstile> if (b) c1 else c2\\<close> \\<open>\\<langle>if (b) c1 else c2,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma>,High \\<turnstile> if (b) c1 else c2\n  \\<langle>if (b) c1 else c2,s2\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>", "have \"\\<Gamma> \\<turnstile> s2 \\<approx>\\<^sub>L s2'\""], ["proof (prove)\nusing this:\n  \\<Gamma>,High \\<turnstile> if (b) c1 else c2\n  \\<langle>if (b) c1 else c2,s2\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s2 \\<approx>\\<^sub>L s2'", "by(auto dest:highBodies)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s2 \\<approx>\\<^sub>L s2'\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "with \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<Gamma> \\<turnstile> s2 \\<approx>\\<^sub>L s2'", "have \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2'\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<Gamma> \\<turnstile> s2 \\<approx>\\<^sub>L s2'\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2'", "by(auto intro:lowEquivTransitive)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2'\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s1'\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s1'", "have \"\\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s1\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s1'\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s1", "by(auto intro:lowEquivSymmetric)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s1\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "with \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2'\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2'\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s1", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2'\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s1\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "by(auto intro:lowEquivTransitive)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma CondLowCompositionality:\n  assumes \"nonInterference \\<Gamma> c1\" and \"nonInterference \\<Gamma> c2\" and \"\\<Gamma> \\<turnstile> b : Low\" \n  shows \"nonInterference \\<Gamma> (if (b) c1 else c2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> (if (b) c1 else c2)", "proof(rule nonInterferenceI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>if (b) c1 else c2,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "fix s1 s2 s1' s2'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>if (b) c1 else c2,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "assume \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\" and \"\\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\" \n    and \"\\<langle>if (b) c1 else c2,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\""], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s1'\\<rangle>\n  \\<langle>if (b) c1 else c2,s2\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>if (b) c1 else c2,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<Gamma> \\<turnstile> b : Low\\<close> \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> b : Low\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "have \"\\<lbrakk>b\\<rbrakk> s1 = \\<lbrakk>b\\<rbrakk> s2\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> b : Low\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b\\<rbrakk>s1 = \\<lbrakk>b\\<rbrakk>s2", "by(auto intro:interpretLow2)"], ["proof (state)\nthis:\n  \\<lbrakk>b\\<rbrakk>s1 = \\<lbrakk>b\\<rbrakk>s2\n\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>if (b) c1 else c2,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s1'\\<rangle>", "have \"\\<lbrakk>b\\<rbrakk> s1 = Some true \\<or> \\<lbrakk>b\\<rbrakk> s1 = Some false\""], ["proof (prove)\nusing this:\n  \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s1'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b\\<rbrakk>s1 = Some true \\<or>\n    \\<lbrakk>b\\<rbrakk>s1 = Some false", "by(auto dest:Cond_True_or_False)"], ["proof (state)\nthis:\n  \\<lbrakk>b\\<rbrakk>s1 = Some true \\<or> \\<lbrakk>b\\<rbrakk>s1 = Some false\n\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>if (b) c1 else c2,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "thus \"\\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\""], ["proof (prove)\nusing this:\n  \\<lbrakk>b\\<rbrakk>s1 = Some true \\<or> \\<lbrakk>b\\<rbrakk>s1 = Some false\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>b\\<rbrakk>s1 = Some true \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n 2. \\<lbrakk>b\\<rbrakk>s1 = Some false \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "assume \"\\<lbrakk>b\\<rbrakk> s1 = Some true\""], ["proof (state)\nthis:\n  \\<lbrakk>b\\<rbrakk>s1 = Some true\n\ngoal (2 subgoals):\n 1. \\<lbrakk>b\\<rbrakk>s1 = Some true \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n 2. \\<lbrakk>b\\<rbrakk>s1 = Some false \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "with \\<open>\\<lbrakk>b\\<rbrakk> s1 = \\<lbrakk>b\\<rbrakk> s2\\<close>"], ["proof (chain)\npicking this:\n  \\<lbrakk>b\\<rbrakk>s1 = \\<lbrakk>b\\<rbrakk>s2\n  \\<lbrakk>b\\<rbrakk>s1 = Some true", "have \"\\<lbrakk>b\\<rbrakk> s2 = Some true\""], ["proof (prove)\nusing this:\n  \\<lbrakk>b\\<rbrakk>s1 = \\<lbrakk>b\\<rbrakk>s2\n  \\<lbrakk>b\\<rbrakk>s1 = Some true\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b\\<rbrakk>s2 = Some true", "by(auto intro:CondTrue_reds)"], ["proof (state)\nthis:\n  \\<lbrakk>b\\<rbrakk>s2 = Some true\n\ngoal (2 subgoals):\n 1. \\<lbrakk>b\\<rbrakk>s1 = Some true \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n 2. \\<lbrakk>b\\<rbrakk>s1 = Some false \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<lbrakk>b\\<rbrakk> s1 = Some true\\<close> \\<open>\\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<lbrakk>b\\<rbrakk>s1 = Some true\n  \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s1'\\<rangle>", "have \"\\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>b\\<rbrakk>s1 = Some true\n  \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s1'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>", "by(auto intro:CondTrue_reds)"], ["proof (state)\nthis:\n  \\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>b\\<rbrakk>s1 = Some true \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n 2. \\<lbrakk>b\\<rbrakk>s1 = Some false \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<lbrakk>b\\<rbrakk> s2 = Some true\\<close> \\<open>\\<langle>if (b) c1 else c2,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<lbrakk>b\\<rbrakk>s2 = Some true\n  \\<langle>if (b) c1 else c2,s2\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>", "have \"\\<langle>c1,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>b\\<rbrakk>s2 = Some true\n  \\<langle>if (b) c1 else c2,s2\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>c1,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>", "by(auto intro:CondTrue_reds)"], ["proof (state)\nthis:\n  \\<langle>c1,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>b\\<rbrakk>s1 = Some true \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n 2. \\<lbrakk>b\\<rbrakk>s1 = Some false \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "with \\<open>\\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\\<close> \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close> \\<open>nonInterference \\<Gamma> c1\\<close>"], ["proof (chain)\npicking this:\n  \\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  nonInterference \\<Gamma> c1\n  \\<langle>c1,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<langle>c1,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  nonInterference \\<Gamma> c1\n  \\<langle>c1,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "by(auto simp:nonInterference_def)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b\\<rbrakk>s1 = Some false \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>b\\<rbrakk>s1 = Some false \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "assume \"\\<lbrakk>b\\<rbrakk> s1 = Some false\""], ["proof (state)\nthis:\n  \\<lbrakk>b\\<rbrakk>s1 = Some false\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b\\<rbrakk>s1 = Some false \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "with \\<open>\\<lbrakk>b\\<rbrakk> s1 = \\<lbrakk>b\\<rbrakk> s2\\<close>"], ["proof (chain)\npicking this:\n  \\<lbrakk>b\\<rbrakk>s1 = \\<lbrakk>b\\<rbrakk>s2\n  \\<lbrakk>b\\<rbrakk>s1 = Some false", "have \"\\<lbrakk>b\\<rbrakk> s2 = Some false\""], ["proof (prove)\nusing this:\n  \\<lbrakk>b\\<rbrakk>s1 = \\<lbrakk>b\\<rbrakk>s2\n  \\<lbrakk>b\\<rbrakk>s1 = Some false\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b\\<rbrakk>s2 = Some false", "by(auto intro:CondTrue_reds)"], ["proof (state)\nthis:\n  \\<lbrakk>b\\<rbrakk>s2 = Some false\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b\\<rbrakk>s1 = Some false \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<lbrakk>b\\<rbrakk> s1 = Some false\\<close> \\<open>\\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<lbrakk>b\\<rbrakk>s1 = Some false\n  \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s1'\\<rangle>", "have \"\\<langle>c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>b\\<rbrakk>s1 = Some false\n  \\<langle>if (b) c1 else c2,s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s1'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>", "by(auto intro:CondFalse_reds)"], ["proof (state)\nthis:\n  \\<langle>c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b\\<rbrakk>s1 = Some false \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<lbrakk>b\\<rbrakk> s2 = Some false\\<close> \\<open>\\<langle>if (b) c1 else c2,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<lbrakk>b\\<rbrakk>s2 = Some false\n  \\<langle>if (b) c1 else c2,s2\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>", "have \"\\<langle>c2,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>b\\<rbrakk>s2 = Some false\n  \\<langle>if (b) c1 else c2,s2\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<langle>c2,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>", "by(auto intro:CondFalse_reds)"], ["proof (state)\nthis:\n  \\<langle>c2,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b\\<rbrakk>s1 = Some false \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "with \\<open>\\<langle>c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\\<close> \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close> \\<open>nonInterference \\<Gamma> c2\\<close>"], ["proof (chain)\npicking this:\n  \\<langle>c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  nonInterference \\<Gamma> c2\n  \\<langle>c2,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<langle>c2,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  nonInterference \\<Gamma> c2\n  \\<langle>c2,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "by(auto simp:nonInterference_def)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma WhileHighCompositionality:\n  assumes \"\\<Gamma>,High \\<turnstile> while (b) c'\"\n  shows \"nonInterference \\<Gamma> (while (b) c')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> (while (b) c')", "proof(rule nonInterferenceI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "fix s1 s2 s1' s2'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "assume \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\" and \"\\<langle>while (b) c',s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\"\n    and \"\\<langle>while (b) c',s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\""], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s1'\\<rangle>\n  \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "show \"\\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<Gamma>,High \\<turnstile> while (b) c'\\<close> \\<open>\\<langle>while (b) c',s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma>,High \\<turnstile> while (b) c'\n  \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s1'\\<rangle>", "have \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s1'\""], ["proof (prove)\nusing this:\n  \\<Gamma>,High \\<turnstile> while (b) c'\n  \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s1'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s1'", "by(auto dest:highBodies)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s1'\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<Gamma>,High \\<turnstile> while (b) c'\\<close> \\<open>\\<langle>while (b) c',s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma>,High \\<turnstile> while (b) c'\n  \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>", "have \"\\<Gamma> \\<turnstile> s2 \\<approx>\\<^sub>L s2'\""], ["proof (prove)\nusing this:\n  \\<Gamma>,High \\<turnstile> while (b) c'\n  \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s2 \\<approx>\\<^sub>L s2'", "by(auto dest:highBodies)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s2 \\<approx>\\<^sub>L s2'\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "with \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<Gamma> \\<turnstile> s2 \\<approx>\\<^sub>L s2'", "have \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2'\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<Gamma> \\<turnstile> s2 \\<approx>\\<^sub>L s2'\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2'", "by(auto intro:lowEquivTransitive)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2'\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s1'\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s1'", "have \"\\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s1\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s1'\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s1", "by(auto intro:lowEquivSymmetric)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s1\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "with \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2'\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2'\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s1", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2'\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s1\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "by(auto intro:lowEquivTransitive)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma WhileLowStepInduct:\n  assumes  while1: \"\\<langle>while (b) c',s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\"   \n  and      while2: \"\\<langle>while (b) c',s2\\<rangle>\\<rightarrow>*\\<langle>Skip,s2'\\<rangle>\" \n  and      \"\\<Gamma> \\<turnstile> b : Low\"\n  and      body:\"\\<And>s1 s1' s2 s2'. \\<lbrakk>\\<langle>c',s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>; \\<langle>c',s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>;\n                                   \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<rbrakk>  \\<Longrightarrow>  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\"\n  and      le: \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\"\n  shows    \"\\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "using while1 le while2"], ["proof (prove)\nusing this:\n  \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s1'\\<rangle>\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "proof (induct arbitrary:s2 rule:while_reds_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>s s2.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some false;\n        \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2'\n 2. \\<And>s s'' s2.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some true;\n        \\<langle>c',s\\<rangle> \\<rightarrow>* \\<langle>Skip,s''\\<rangle>;\n        \\<langle>while (b) c',s''\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<And>s2.\n           \\<lbrakk>\\<Gamma> \\<turnstile> s'' \\<approx>\\<^sub>L s2;\n            \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2';\n        \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "case (false s1)"], ["proof (state)\nthis:\n  \\<lbrakk>b\\<rbrakk>s1 = Some false\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>s s2.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some false;\n        \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2'\n 2. \\<And>s s'' s2.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some true;\n        \\<langle>c',s\\<rangle> \\<rightarrow>* \\<langle>Skip,s''\\<rangle>;\n        \\<langle>while (b) c',s''\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<And>s2.\n           \\<lbrakk>\\<Gamma> \\<turnstile> s'' \\<approx>\\<^sub>L s2;\n            \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2';\n        \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<Gamma> \\<turnstile> b : Low\\<close> \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> b : Low\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "have \"\\<lbrakk>b\\<rbrakk> s1 = \\<lbrakk>b\\<rbrakk> s2\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> b : Low\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b\\<rbrakk>s1 = \\<lbrakk>b\\<rbrakk>s2", "by(auto intro:interpretLow2)"], ["proof (state)\nthis:\n  \\<lbrakk>b\\<rbrakk>s1 = \\<lbrakk>b\\<rbrakk>s2\n\ngoal (2 subgoals):\n 1. \\<And>s s2.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some false;\n        \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2'\n 2. \\<And>s s'' s2.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some true;\n        \\<langle>c',s\\<rangle> \\<rightarrow>* \\<langle>Skip,s''\\<rangle>;\n        \\<langle>while (b) c',s''\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<And>s2.\n           \\<lbrakk>\\<Gamma> \\<turnstile> s'' \\<approx>\\<^sub>L s2;\n            \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2';\n        \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "with \\<open>\\<lbrakk>b\\<rbrakk> s1 = Some false\\<close>"], ["proof (chain)\npicking this:\n  \\<lbrakk>b\\<rbrakk>s1 = Some false\n  \\<lbrakk>b\\<rbrakk>s1 = \\<lbrakk>b\\<rbrakk>s2", "have \"\\<lbrakk>b\\<rbrakk> s2 = Some false\""], ["proof (prove)\nusing this:\n  \\<lbrakk>b\\<rbrakk>s1 = Some false\n  \\<lbrakk>b\\<rbrakk>s1 = \\<lbrakk>b\\<rbrakk>s2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b\\<rbrakk>s2 = Some false", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk>b\\<rbrakk>s2 = Some false\n\ngoal (2 subgoals):\n 1. \\<And>s s2.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some false;\n        \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2'\n 2. \\<And>s s'' s2.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some true;\n        \\<langle>c',s\\<rangle> \\<rightarrow>* \\<langle>Skip,s''\\<rangle>;\n        \\<langle>while (b) c',s''\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<And>s2.\n           \\<lbrakk>\\<Gamma> \\<turnstile> s'' \\<approx>\\<^sub>L s2;\n            \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2';\n        \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "with \\<open>\\<langle>while (b) c',s2\\<rangle>\\<rightarrow>*\\<langle>Skip,s2'\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>\n  \\<lbrakk>b\\<rbrakk>s2 = Some false", "have \"s2 = s2'\""], ["proof (prove)\nusing this:\n  \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>\n  \\<lbrakk>b\\<rbrakk>s2 = Some false\n\ngoal (1 subgoal):\n 1. s2 = s2'", "by(auto intro:WhileFalse_reds)"], ["proof (state)\nthis:\n  s2 = s2'\n\ngoal (2 subgoals):\n 1. \\<And>s s2.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some false;\n        \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2'\n 2. \\<And>s s'' s2.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some true;\n        \\<langle>c',s\\<rangle> \\<rightarrow>* \\<langle>Skip,s''\\<rangle>;\n        \\<langle>while (b) c',s''\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<And>s2.\n           \\<lbrakk>\\<Gamma> \\<turnstile> s'' \\<approx>\\<^sub>L s2;\n            \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2';\n        \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "with \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  s2 = s2'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  s2 = s2'\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2'", "by auto"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2'\n\ngoal (1 subgoal):\n 1. \\<And>s s'' s2.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some true;\n        \\<langle>c',s\\<rangle> \\<rightarrow>* \\<langle>Skip,s''\\<rangle>;\n        \\<langle>while (b) c',s''\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<And>s2.\n           \\<lbrakk>\\<Gamma> \\<turnstile> s'' \\<approx>\\<^sub>L s2;\n            \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2';\n        \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s s'' s2.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some true;\n        \\<langle>c',s\\<rangle> \\<rightarrow>* \\<langle>Skip,s''\\<rangle>;\n        \\<langle>while (b) c',s''\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<And>s2.\n           \\<lbrakk>\\<Gamma> \\<turnstile> s'' \\<approx>\\<^sub>L s2;\n            \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2';\n        \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "case (true s1 s1'')"], ["proof (state)\nthis:\n  \\<lbrakk>b\\<rbrakk>s1 = Some true\n  \\<langle>c',s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1''\\<rangle>\n  \\<langle>while (b) c',s1''\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s1'\\<rangle>\n  \\<lbrakk>\\<Gamma> \\<turnstile> s1'' \\<approx>\\<^sub>L ?s2.0;\n   \\<langle>while (b) c',?s2.0\\<rangle> \\<rightarrow>*\n   \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>s s'' s2.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some true;\n        \\<langle>c',s\\<rangle> \\<rightarrow>* \\<langle>Skip,s''\\<rangle>;\n        \\<langle>while (b) c',s''\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<And>s2.\n           \\<lbrakk>\\<Gamma> \\<turnstile> s'' \\<approx>\\<^sub>L s2;\n            \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2';\n        \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "note IH = \\<open>\\<And>s2''. \\<lbrakk>\\<Gamma> \\<turnstile> s1'' \\<approx>\\<^sub>L s2''; \\<langle>while (b) c',s2''\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\\<rbrakk> \n    \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>\\<Gamma> \\<turnstile> s1'' \\<approx>\\<^sub>L ?s2'';\n   \\<langle>while (b) c',?s2''\\<rangle> \\<rightarrow>*\n   \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n\ngoal (1 subgoal):\n 1. \\<And>s s'' s2.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some true;\n        \\<langle>c',s\\<rangle> \\<rightarrow>* \\<langle>Skip,s''\\<rangle>;\n        \\<langle>while (b) c',s''\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<And>s2.\n           \\<lbrakk>\\<Gamma> \\<turnstile> s'' \\<approx>\\<^sub>L s2;\n            \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2';\n        \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<Gamma> \\<turnstile> b : Low\\<close> \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> b : Low\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "have \"\\<lbrakk>b\\<rbrakk> s1 = \\<lbrakk>b\\<rbrakk> s2\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> b : Low\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b\\<rbrakk>s1 = \\<lbrakk>b\\<rbrakk>s2", "by(auto intro:interpretLow2)"], ["proof (state)\nthis:\n  \\<lbrakk>b\\<rbrakk>s1 = \\<lbrakk>b\\<rbrakk>s2\n\ngoal (1 subgoal):\n 1. \\<And>s s'' s2.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some true;\n        \\<langle>c',s\\<rangle> \\<rightarrow>* \\<langle>Skip,s''\\<rangle>;\n        \\<langle>while (b) c',s''\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<And>s2.\n           \\<lbrakk>\\<Gamma> \\<turnstile> s'' \\<approx>\\<^sub>L s2;\n            \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2';\n        \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "with \\<open>\\<lbrakk>b\\<rbrakk> s1 = Some true\\<close>"], ["proof (chain)\npicking this:\n  \\<lbrakk>b\\<rbrakk>s1 = Some true\n  \\<lbrakk>b\\<rbrakk>s1 = \\<lbrakk>b\\<rbrakk>s2", "have \"\\<lbrakk>b\\<rbrakk> s2 = Some true\""], ["proof (prove)\nusing this:\n  \\<lbrakk>b\\<rbrakk>s1 = Some true\n  \\<lbrakk>b\\<rbrakk>s1 = \\<lbrakk>b\\<rbrakk>s2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b\\<rbrakk>s2 = Some true", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk>b\\<rbrakk>s2 = Some true\n\ngoal (1 subgoal):\n 1. \\<And>s s'' s2.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some true;\n        \\<langle>c',s\\<rangle> \\<rightarrow>* \\<langle>Skip,s''\\<rangle>;\n        \\<langle>while (b) c',s''\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<And>s2.\n           \\<lbrakk>\\<Gamma> \\<turnstile> s'' \\<approx>\\<^sub>L s2;\n            \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2';\n        \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "with \\<open>\\<langle>while (b) c',s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>\n  \\<lbrakk>b\\<rbrakk>s2 = Some true", "obtain s2'' where \"\\<langle>c',s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2''\\<rangle>\"\n    and \"\\<langle>while (b) c',s2''\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>\n  \\<lbrakk>b\\<rbrakk>s2 = Some true\n\ngoal (1 subgoal):\n 1. (\\<And>s2''.\n        \\<lbrakk>\\<langle>c',s2\\<rangle> \\<rightarrow>*\n                 \\<langle>Skip,s2''\\<rangle>;\n         \\<langle>while (b) c',s2''\\<rangle> \\<rightarrow>*\n         \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(auto dest:WhileTrue_reds)"], ["proof (state)\nthis:\n  \\<langle>c',s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2''\\<rangle>\n  \\<langle>while (b) c',s2''\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>s s'' s2.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some true;\n        \\<langle>c',s\\<rangle> \\<rightarrow>* \\<langle>Skip,s''\\<rangle>;\n        \\<langle>while (b) c',s''\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<And>s2.\n           \\<lbrakk>\\<Gamma> \\<turnstile> s'' \\<approx>\\<^sub>L s2;\n            \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2';\n        \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from body[OF \\<open>\\<langle>c',s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1''\\<rangle>\\<close> \\<open>\\<langle>c',s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2''\\<rangle>\\<close> \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close>]"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s1'' \\<approx>\\<^sub>L s2''", "have \"\\<Gamma> \\<turnstile> s1'' \\<approx>\\<^sub>L s2''\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s1'' \\<approx>\\<^sub>L s2''\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1'' \\<approx>\\<^sub>L s2''", "."], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1'' \\<approx>\\<^sub>L s2''\n\ngoal (1 subgoal):\n 1. \\<And>s s'' s2.\n       \\<lbrakk>\\<lbrakk>b\\<rbrakk>s = Some true;\n        \\<langle>c',s\\<rangle> \\<rightarrow>* \\<langle>Skip,s''\\<rangle>;\n        \\<langle>while (b) c',s''\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<And>s2.\n           \\<lbrakk>\\<Gamma> \\<turnstile> s'' \\<approx>\\<^sub>L s2;\n            \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n            \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2';\n        \\<Gamma> \\<turnstile> s \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from IH[OF this \\<open>\\<langle>while (b) c',s2''\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\\<close>]"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "show ?case"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "."], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma WhileLowCompositionality:\n  assumes \"nonInterference \\<Gamma> c'\" and \"\\<Gamma> \\<turnstile> b : Low\" and \"\\<Gamma>,Low \\<turnstile> c'\"\n  shows \"nonInterference \\<Gamma> (while (b) c')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> (while (b) c')", "proof(rule nonInterferenceI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "fix s1 s2 s1' s2'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "assume \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\" and \"\\<langle>while (b) c',s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\" \n    and \"\\<langle>while (b) c',s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\""], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s1'\\<rangle>\n  \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "{"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s1'\\<rangle>\n  \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "fix s1 s2 s1'' s2''"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "assume \"\\<langle>c',s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1''\\<rangle>\" and \"\\<langle>c',s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2''\\<rangle>\" \n      and  \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\""], ["proof (state)\nthis:\n  \\<langle>c',s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1''\\<rangle>\n  \\<langle>c',s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2''\\<rangle>\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "with \\<open>nonInterference \\<Gamma> c'\\<close>"], ["proof (chain)\npicking this:\n  nonInterference \\<Gamma> c'\n  \\<langle>c',s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1''\\<rangle>\n  \\<langle>c',s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2''\\<rangle>\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2", "have \"\\<Gamma> \\<turnstile> s1'' \\<approx>\\<^sub>L s2''\""], ["proof (prove)\nusing this:\n  nonInterference \\<Gamma> c'\n  \\<langle>c',s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1''\\<rangle>\n  \\<langle>c',s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2''\\<rangle>\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1'' \\<approx>\\<^sub>L s2''", "by(auto simp:nonInterference_def)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1'' \\<approx>\\<^sub>L s2''\n\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "}"], ["proof (state)\nthis:\n  \\<lbrakk>\\<langle>c',?s1a2\\<rangle> \\<rightarrow>*\n           \\<langle>Skip,?s1''2\\<rangle>;\n   \\<langle>c',?s2a2\\<rangle> \\<rightarrow>* \\<langle>Skip,?s2''2\\<rangle>;\n   \\<Gamma> \\<turnstile> ?s1a2 \\<approx>\\<^sub>L ?s2a2\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?s1''2 \\<approx>\\<^sub>L ?s2''2\n\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "hence \"\\<And>s1 s1'' s2 s2''. \\<lbrakk>\\<langle>c',s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1''\\<rangle>; \\<langle>c',s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2''\\<rangle>;\n                             \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<rbrakk>  \\<Longrightarrow>  \\<Gamma> \\<turnstile> s1'' \\<approx>\\<^sub>L s2''\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<langle>c',?s1a2\\<rangle> \\<rightarrow>*\n           \\<langle>Skip,?s1''2\\<rangle>;\n   \\<langle>c',?s2a2\\<rangle> \\<rightarrow>* \\<langle>Skip,?s2''2\\<rangle>;\n   \\<Gamma> \\<turnstile> ?s1a2 \\<approx>\\<^sub>L ?s2a2\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?s1''2 \\<approx>\\<^sub>L ?s2''2\n\ngoal (1 subgoal):\n 1. \\<And>s1 s1'' s2 s2''.\n       \\<lbrakk>\\<langle>c',s1\\<rangle> \\<rightarrow>*\n                \\<langle>Skip,s1''\\<rangle>;\n        \\<langle>c',s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2''\\<rangle>;\n        \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1'' \\<approx>\\<^sub>L s2''", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>\\<langle>c',?s1.0\\<rangle> \\<rightarrow>*\n           \\<langle>Skip,?s1''\\<rangle>;\n   \\<langle>c',?s2.0\\<rangle> \\<rightarrow>* \\<langle>Skip,?s2''\\<rangle>;\n   \\<Gamma> \\<turnstile> ?s1.0 \\<approx>\\<^sub>L ?s2.0\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?s1'' \\<approx>\\<^sub>L ?s2''\n\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "with \\<open>\\<langle>while (b) c',s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\\<close> \\<open>\\<langle>while (b) c',s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\\<close>\n    \\<open>\\<Gamma> \\<turnstile> b : Low\\<close> \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close>"], ["proof (chain)\npicking this:\n  \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s1'\\<rangle>\n  \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>\n  \\<Gamma> \\<turnstile> b : Low\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<lbrakk>\\<langle>c',?s1.0\\<rangle> \\<rightarrow>*\n           \\<langle>Skip,?s1''\\<rangle>;\n   \\<langle>c',?s2.0\\<rangle> \\<rightarrow>* \\<langle>Skip,?s2''\\<rangle>;\n   \\<Gamma> \\<turnstile> ?s1.0 \\<approx>\\<^sub>L ?s2.0\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?s1'' \\<approx>\\<^sub>L ?s2''", "show \"\\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\""], ["proof (prove)\nusing this:\n  \\<langle>while (b) c',s1\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s1'\\<rangle>\n  \\<langle>while (b) c',s2\\<rangle> \\<rightarrow>*\n  \\<langle>Skip,s2'\\<rangle>\n  \\<Gamma> \\<turnstile> b : Low\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<lbrakk>\\<langle>c',?s1.0\\<rangle> \\<rightarrow>*\n           \\<langle>Skip,?s1''\\<rangle>;\n   \\<langle>c',?s2.0\\<rangle> \\<rightarrow>* \\<langle>Skip,?s2''\\<rangle>;\n   \\<Gamma> \\<turnstile> ?s1.0 \\<approx>\\<^sub>L ?s2.0\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?s1'' \\<approx>\\<^sub>L ?s2''\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "by(auto intro:WhileLowStepInduct)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>and now: the main theorem:\\<close>"], ["", "theorem secTypeImpliesNonInterference:\n  \"\\<Gamma>,T \\<turnstile> c \\<Longrightarrow> nonInterference \\<Gamma> c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Gamma>,T \\<turnstile> c \\<Longrightarrow> nonInterference \\<Gamma> c", "proof (induct c arbitrary:T rule:com.induct)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>T.\n       \\<Gamma>,T \\<turnstile> Skip \\<Longrightarrow>\n       nonInterference \\<Gamma> Skip\n 2. \\<And>x1 x2 T.\n       \\<Gamma>,T \\<turnstile> x1:=x2 \\<Longrightarrow>\n       nonInterference \\<Gamma> (x1:=x2)\n 3. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x1 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x1;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n           nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> x1;; x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (x1;; x2)\n 4. \\<And>x1 x2 x3 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x3 \\<Longrightarrow>\n           nonInterference \\<Gamma> x3;\n        \\<Gamma>,T \\<turnstile> if (x1) x2 else x3\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (if (x1) x2 else x3)\n 5. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> while (x1) x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (while (x1) x2)", "case Skip"], ["proof (state)\nthis:\n  \\<Gamma>,T \\<turnstile> Skip\n\ngoal (5 subgoals):\n 1. \\<And>T.\n       \\<Gamma>,T \\<turnstile> Skip \\<Longrightarrow>\n       nonInterference \\<Gamma> Skip\n 2. \\<And>x1 x2 T.\n       \\<Gamma>,T \\<turnstile> x1:=x2 \\<Longrightarrow>\n       nonInterference \\<Gamma> (x1:=x2)\n 3. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x1 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x1;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n           nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> x1;; x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (x1;; x2)\n 4. \\<And>x1 x2 x3 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x3 \\<Longrightarrow>\n           nonInterference \\<Gamma> x3;\n        \\<Gamma>,T \\<turnstile> if (x1) x2 else x3\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (if (x1) x2 else x3)\n 5. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> while (x1) x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (while (x1) x2)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> Skip", "proof(rule nonInterferenceI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>Skip,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>Skip,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "fix s1 s2 s1' s2'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>Skip,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>Skip,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "assume \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\" and \"\\<langle>Skip,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\" and \"\\<langle>Skip,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\""], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<langle>Skip,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\n  \\<langle>Skip,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>Skip,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>Skip,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<langle>Skip,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<langle>Skip,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>", "have \"s1 = s1'\""], ["proof (prove)\nusing this:\n  \\<langle>Skip,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\n\ngoal (1 subgoal):\n 1. s1 = s1'", "by(auto dest:Skip_reds)"], ["proof (state)\nthis:\n  s1 = s1'\n\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>Skip,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>Skip,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<langle>Skip,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<langle>Skip,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>", "have \"s2 = s2'\""], ["proof (prove)\nusing this:\n  \\<langle>Skip,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\n\ngoal (1 subgoal):\n 1. s2 = s2'", "by(auto dest:Skip_reds)"], ["proof (state)\nthis:\n  s2 = s2'\n\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>Skip,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>Skip,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close> and \\<open>s1 = s1'\\<close> and \\<open>s2 = s2'\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  s1 = s1'\n  s2 = s2'", "show \"\\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  s1 = s1'\n  s2 = s2'\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "by simp"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  nonInterference \\<Gamma> Skip\n\ngoal (4 subgoals):\n 1. \\<And>x1 x2 T.\n       \\<Gamma>,T \\<turnstile> x1:=x2 \\<Longrightarrow>\n       nonInterference \\<Gamma> (x1:=x2)\n 2. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x1 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x1;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n           nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> x1;; x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (x1;; x2)\n 3. \\<And>x1 x2 x3 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x3 \\<Longrightarrow>\n           nonInterference \\<Gamma> x3;\n        \\<Gamma>,T \\<turnstile> if (x1) x2 else x3\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (if (x1) x2 else x3)\n 4. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> while (x1) x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (while (x1) x2)", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1 x2 T.\n       \\<Gamma>,T \\<turnstile> x1:=x2 \\<Longrightarrow>\n       nonInterference \\<Gamma> (x1:=x2)\n 2. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x1 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x1;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n           nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> x1;; x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (x1;; x2)\n 3. \\<And>x1 x2 x3 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x3 \\<Longrightarrow>\n           nonInterference \\<Gamma> x3;\n        \\<Gamma>,T \\<turnstile> if (x1) x2 else x3\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (if (x1) x2 else x3)\n 4. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> while (x1) x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (while (x1) x2)", "case (LAss V e)"], ["proof (state)\nthis:\n  \\<Gamma>,T \\<turnstile> V:=e\n\ngoal (4 subgoals):\n 1. \\<And>x1 x2 T.\n       \\<Gamma>,T \\<turnstile> x1:=x2 \\<Longrightarrow>\n       nonInterference \\<Gamma> (x1:=x2)\n 2. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x1 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x1;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n           nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> x1;; x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (x1;; x2)\n 3. \\<And>x1 x2 x3 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x3 \\<Longrightarrow>\n           nonInterference \\<Gamma> x3;\n        \\<Gamma>,T \\<turnstile> if (x1) x2 else x3\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (if (x1) x2 else x3)\n 4. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> while (x1) x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (while (x1) x2)", "from \\<open>\\<Gamma>,T \\<turnstile> V:=e\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma>,T \\<turnstile> V:=e", "have varprem:\"(\\<Gamma> V = Some High) \\<or> (\\<Gamma> V = Some Low \\<and> \\<Gamma> \\<turnstile> e : Low \\<and> T = Low)\""], ["proof (prove)\nusing this:\n  \\<Gamma>,T \\<turnstile> V:=e\n\ngoal (1 subgoal):\n 1. \\<Gamma> V = Some High \\<or>\n    \\<Gamma> V = Some Low \\<and>\n    \\<Gamma> \\<turnstile> e : Low \\<and> T = Low", "by (auto elim:secComTyping.cases)"], ["proof (state)\nthis:\n  \\<Gamma> V = Some High \\<or>\n  \\<Gamma> V = Some Low \\<and> \\<Gamma> \\<turnstile> e : Low \\<and> T = Low\n\ngoal (4 subgoals):\n 1. \\<And>x1 x2 T.\n       \\<Gamma>,T \\<turnstile> x1:=x2 \\<Longrightarrow>\n       nonInterference \\<Gamma> (x1:=x2)\n 2. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x1 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x1;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n           nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> x1;; x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (x1;; x2)\n 3. \\<And>x1 x2 x3 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x3 \\<Longrightarrow>\n           nonInterference \\<Gamma> x3;\n        \\<Gamma>,T \\<turnstile> if (x1) x2 else x3\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (if (x1) x2 else x3)\n 4. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> while (x1) x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (while (x1) x2)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> (V:=e)", "proof(rule nonInterferenceI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>V:=e,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>V:=e,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "fix s1 s2 s1' s2'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>V:=e,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>V:=e,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "assume \"\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\" and \"\\<langle>V:=e,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\" and \"\\<langle>V:=e,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\""], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  \\<langle>V:=e,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\n  \\<langle>V:=e,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>V:=e,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>V:=e,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<langle>V:=e,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<langle>V:=e,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>", "have \"s1' = s1(V:=\\<lbrakk>e\\<rbrakk> s1)\""], ["proof (prove)\nusing this:\n  \\<langle>V:=e,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>\n\ngoal (1 subgoal):\n 1. s1' = s1(V := \\<lbrakk>e\\<rbrakk>s1)", "by(auto intro:LAss_reds)"], ["proof (state)\nthis:\n  s1' = s1(V := \\<lbrakk>e\\<rbrakk>s1)\n\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>V:=e,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>V:=e,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from \\<open>\\<langle>V:=e,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  \\<langle>V:=e,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>", "have \"s2' = s2(V:=\\<lbrakk>e\\<rbrakk> s2)\""], ["proof (prove)\nusing this:\n  \\<langle>V:=e,s2\\<rangle> \\<rightarrow>* \\<langle>Skip,s2'\\<rangle>\n\ngoal (1 subgoal):\n 1. s2' = s2(V := \\<lbrakk>e\\<rbrakk>s2)", "by(auto intro:LAss_reds)"], ["proof (state)\nthis:\n  s2' = s2(V := \\<lbrakk>e\\<rbrakk>s2)\n\ngoal (1 subgoal):\n 1. \\<And>s1 s2 s1' s2'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2;\n        \\<langle>V:=e,s1\\<rangle> \\<rightarrow>* \\<langle>Skip,s1'\\<rangle>;\n        \\<langle>V:=e,s2\\<rangle> \\<rightarrow>*\n        \\<langle>Skip,s2'\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "from varprem"], ["proof (chain)\npicking this:\n  \\<Gamma> V = Some High \\<or>\n  \\<Gamma> V = Some Low \\<and> \\<Gamma> \\<turnstile> e : Low \\<and> T = Low", "show \"\\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\""], ["proof (prove)\nusing this:\n  \\<Gamma> V = Some High \\<or>\n  \\<Gamma> V = Some Low \\<and> \\<Gamma> \\<turnstile> e : Low \\<and> T = Low\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<Gamma> V = Some High \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n 2. \\<Gamma> V = Some Low \\<and>\n    \\<Gamma> \\<turnstile> e : Low \\<and> T = Low \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "assume \"\\<Gamma> V = Some High\""], ["proof (state)\nthis:\n  \\<Gamma> V = Some High\n\ngoal (2 subgoals):\n 1. \\<Gamma> V = Some High \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n 2. \\<Gamma> V = Some Low \\<and>\n    \\<Gamma> \\<turnstile> e : Low \\<and> T = Low \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "with \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close> \\<open>s1' = s1(V:=\\<lbrakk>e\\<rbrakk> s1)\\<close> \\<open>s2' = s2(V:=\\<lbrakk>e\\<rbrakk> s2)\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  s1' = s1(V := \\<lbrakk>e\\<rbrakk>s1)\n  s2' = s2(V := \\<lbrakk>e\\<rbrakk>s2)\n  \\<Gamma> V = Some High", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  s1' = s1(V := \\<lbrakk>e\\<rbrakk>s1)\n  s2' = s2(V := \\<lbrakk>e\\<rbrakk>s2)\n  \\<Gamma> V = Some High\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "by(auto intro:assignNIhighlemma)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n\ngoal (1 subgoal):\n 1. \\<Gamma> V = Some Low \\<and>\n    \\<Gamma> \\<turnstile> e : Low \\<and> T = Low \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Gamma> V = Some Low \\<and>\n    \\<Gamma> \\<turnstile> e : Low \\<and> T = Low \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "assume \"\\<Gamma> V = Some Low \\<and> \\<Gamma> \\<turnstile> e : Low \\<and> T = Low\""], ["proof (state)\nthis:\n  \\<Gamma> V = Some Low \\<and> \\<Gamma> \\<turnstile> e : Low \\<and> T = Low\n\ngoal (1 subgoal):\n 1. \\<Gamma> V = Some Low \\<and>\n    \\<Gamma> \\<turnstile> e : Low \\<and> T = Low \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "with \\<open>\\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\\<close> \\<open>s1' = s1(V:=\\<lbrakk>e\\<rbrakk> s1)\\<close> \\<open>s2' = s2(V:=\\<lbrakk>e\\<rbrakk> s2)\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  s1' = s1(V := \\<lbrakk>e\\<rbrakk>s1)\n  s2' = s2(V := \\<lbrakk>e\\<rbrakk>s2)\n  \\<Gamma> V = Some Low \\<and> \\<Gamma> \\<turnstile> e : Low \\<and> T = Low", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> s1 \\<approx>\\<^sub>L s2\n  s1' = s1(V := \\<lbrakk>e\\<rbrakk>s1)\n  s2' = s2(V := \\<lbrakk>e\\<rbrakk>s2)\n  \\<Gamma> V = Some Low \\<and> \\<Gamma> \\<turnstile> e : Low \\<and> T = Low\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'", "by(auto intro:assignNIlowlemma)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> s1' \\<approx>\\<^sub>L s2'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  nonInterference \\<Gamma> (V:=e)\n\ngoal (3 subgoals):\n 1. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x1 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x1;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n           nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> x1;; x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (x1;; x2)\n 2. \\<And>x1 x2 x3 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x3 \\<Longrightarrow>\n           nonInterference \\<Gamma> x3;\n        \\<Gamma>,T \\<turnstile> if (x1) x2 else x3\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (if (x1) x2 else x3)\n 3. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> while (x1) x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (while (x1) x2)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x1 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x1;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n           nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> x1;; x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (x1;; x2)\n 2. \\<And>x1 x2 x3 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x3 \\<Longrightarrow>\n           nonInterference \\<Gamma> x3;\n        \\<Gamma>,T \\<turnstile> if (x1) x2 else x3\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (if (x1) x2 else x3)\n 3. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> while (x1) x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (while (x1) x2)", "case (Seq c1 c2)"], ["proof (state)\nthis:\n  \\<Gamma>,?T \\<turnstile> c1 \\<Longrightarrow> nonInterference \\<Gamma> c1\n  \\<Gamma>,?T \\<turnstile> c2 \\<Longrightarrow> nonInterference \\<Gamma> c2\n  \\<Gamma>,T \\<turnstile> c1;; c2\n\ngoal (3 subgoals):\n 1. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x1 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x1;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n           nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> x1;; x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (x1;; x2)\n 2. \\<And>x1 x2 x3 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x3 \\<Longrightarrow>\n           nonInterference \\<Gamma> x3;\n        \\<Gamma>,T \\<turnstile> if (x1) x2 else x3\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (if (x1) x2 else x3)\n 3. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> while (x1) x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (while (x1) x2)", "note IH1 = \\<open>\\<And>T. \\<Gamma>,T \\<turnstile> c1 \\<Longrightarrow> nonInterference \\<Gamma> c1\\<close>"], ["proof (state)\nthis:\n  \\<Gamma>,?T \\<turnstile> c1 \\<Longrightarrow> nonInterference \\<Gamma> c1\n\ngoal (3 subgoals):\n 1. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x1 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x1;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n           nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> x1;; x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (x1;; x2)\n 2. \\<And>x1 x2 x3 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x3 \\<Longrightarrow>\n           nonInterference \\<Gamma> x3;\n        \\<Gamma>,T \\<turnstile> if (x1) x2 else x3\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (if (x1) x2 else x3)\n 3. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> while (x1) x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (while (x1) x2)", "note IH2 = \\<open>\\<And>T. \\<Gamma>,T \\<turnstile> c2 \\<Longrightarrow> nonInterference \\<Gamma> c2\\<close>"], ["proof (state)\nthis:\n  \\<Gamma>,?T \\<turnstile> c2 \\<Longrightarrow> nonInterference \\<Gamma> c2\n\ngoal (3 subgoals):\n 1. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x1 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x1;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n           nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> x1;; x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (x1;; x2)\n 2. \\<And>x1 x2 x3 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x3 \\<Longrightarrow>\n           nonInterference \\<Gamma> x3;\n        \\<Gamma>,T \\<turnstile> if (x1) x2 else x3\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (if (x1) x2 else x3)\n 3. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> while (x1) x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (while (x1) x2)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> (c1;; c2)", "proof (cases T)"], ["proof (state)\ngoal (2 subgoals):\n 1. T = Low \\<Longrightarrow> nonInterference \\<Gamma> (c1;; c2)\n 2. T = High \\<Longrightarrow> nonInterference \\<Gamma> (c1;; c2)", "case High"], ["proof (state)\nthis:\n  T = High\n\ngoal (2 subgoals):\n 1. T = Low \\<Longrightarrow> nonInterference \\<Gamma> (c1;; c2)\n 2. T = High \\<Longrightarrow> nonInterference \\<Gamma> (c1;; c2)", "with \\<open>\\<Gamma>,T \\<turnstile> c1;;c2\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma>,T \\<turnstile> c1;; c2\n  T = High", "have \"\\<Gamma>,High \\<turnstile> c1\" and \"\\<Gamma>,High \\<turnstile> c2\""], ["proof (prove)\nusing this:\n  \\<Gamma>,T \\<turnstile> c1;; c2\n  T = High\n\ngoal (1 subgoal):\n 1. \\<Gamma>,High \\<turnstile> c1 &&& \\<Gamma>,High \\<turnstile> c2", "by(auto elim:secComTyping.cases)"], ["proof (state)\nthis:\n  \\<Gamma>,High \\<turnstile> c1\n  \\<Gamma>,High \\<turnstile> c2\n\ngoal (2 subgoals):\n 1. T = Low \\<Longrightarrow> nonInterference \\<Gamma> (c1;; c2)\n 2. T = High \\<Longrightarrow> nonInterference \\<Gamma> (c1;; c2)", "from IH1[OF \\<open>\\<Gamma>,High \\<turnstile> c1\\<close>]"], ["proof (chain)\npicking this:\n  nonInterference \\<Gamma> c1", "have \"nonInterference \\<Gamma> c1\""], ["proof (prove)\nusing this:\n  nonInterference \\<Gamma> c1\n\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> c1", "."], ["proof (state)\nthis:\n  nonInterference \\<Gamma> c1\n\ngoal (2 subgoals):\n 1. T = Low \\<Longrightarrow> nonInterference \\<Gamma> (c1;; c2)\n 2. T = High \\<Longrightarrow> nonInterference \\<Gamma> (c1;; c2)", "moreover"], ["proof (state)\nthis:\n  nonInterference \\<Gamma> c1\n\ngoal (2 subgoals):\n 1. T = Low \\<Longrightarrow> nonInterference \\<Gamma> (c1;; c2)\n 2. T = High \\<Longrightarrow> nonInterference \\<Gamma> (c1;; c2)", "from IH2[OF \\<open>\\<Gamma>,High \\<turnstile> c2\\<close>]"], ["proof (chain)\npicking this:\n  nonInterference \\<Gamma> c2", "have \"nonInterference \\<Gamma> c2\""], ["proof (prove)\nusing this:\n  nonInterference \\<Gamma> c2\n\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> c2", "."], ["proof (state)\nthis:\n  nonInterference \\<Gamma> c2\n\ngoal (2 subgoals):\n 1. T = Low \\<Longrightarrow> nonInterference \\<Gamma> (c1;; c2)\n 2. T = High \\<Longrightarrow> nonInterference \\<Gamma> (c1;; c2)", "ultimately"], ["proof (chain)\npicking this:\n  nonInterference \\<Gamma> c1\n  nonInterference \\<Gamma> c2", "show ?thesis"], ["proof (prove)\nusing this:\n  nonInterference \\<Gamma> c1\n  nonInterference \\<Gamma> c2\n\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> (c1;; c2)", "by (auto intro:SeqCompositionality)"], ["proof (state)\nthis:\n  nonInterference \\<Gamma> (c1;; c2)\n\ngoal (1 subgoal):\n 1. T = Low \\<Longrightarrow> nonInterference \\<Gamma> (c1;; c2)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. T = Low \\<Longrightarrow> nonInterference \\<Gamma> (c1;; c2)", "case Low"], ["proof (state)\nthis:\n  T = Low\n\ngoal (1 subgoal):\n 1. T = Low \\<Longrightarrow> nonInterference \\<Gamma> (c1;; c2)", "with \\<open>\\<Gamma>,T \\<turnstile> c1;;c2\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma>,T \\<turnstile> c1;; c2\n  T = Low", "have \"(\\<Gamma>,Low \\<turnstile> c1 \\<and> \\<Gamma>,Low \\<turnstile> c2) \\<or> \\<Gamma>,High \\<turnstile> c1;;c2\""], ["proof (prove)\nusing this:\n  \\<Gamma>,T \\<turnstile> c1;; c2\n  T = Low\n\ngoal (1 subgoal):\n 1. \\<Gamma>,Low \\<turnstile> c1 \\<and> \\<Gamma>,Low \\<turnstile> c2 \\<or>\n    \\<Gamma>,High \\<turnstile> c1;; c2", "by(auto elim:secComTyping.cases)"], ["proof (state)\nthis:\n  \\<Gamma>,Low \\<turnstile> c1 \\<and> \\<Gamma>,Low \\<turnstile> c2 \\<or>\n  \\<Gamma>,High \\<turnstile> c1;; c2\n\ngoal (1 subgoal):\n 1. T = Low \\<Longrightarrow> nonInterference \\<Gamma> (c1;; c2)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<Gamma>,Low \\<turnstile> c1 \\<and> \\<Gamma>,Low \\<turnstile> c2 \\<or>\n  \\<Gamma>,High \\<turnstile> c1;; c2\n\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> (c1;; c2)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<Gamma>,Low \\<turnstile> c1 \\<and>\n    \\<Gamma>,Low \\<turnstile> c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (c1;; c2)\n 2. \\<Gamma>,High \\<turnstile> c1;; c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (c1;; c2)", "assume \"\\<Gamma>,Low \\<turnstile> c1 \\<and> \\<Gamma>,Low \\<turnstile> c2\""], ["proof (state)\nthis:\n  \\<Gamma>,Low \\<turnstile> c1 \\<and> \\<Gamma>,Low \\<turnstile> c2\n\ngoal (2 subgoals):\n 1. \\<Gamma>,Low \\<turnstile> c1 \\<and>\n    \\<Gamma>,Low \\<turnstile> c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (c1;; c2)\n 2. \\<Gamma>,High \\<turnstile> c1;; c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (c1;; c2)", "hence \"\\<Gamma>,Low \\<turnstile> c1\" and \"\\<Gamma>,Low \\<turnstile> c2\""], ["proof (prove)\nusing this:\n  \\<Gamma>,Low \\<turnstile> c1 \\<and> \\<Gamma>,Low \\<turnstile> c2\n\ngoal (1 subgoal):\n 1. \\<Gamma>,Low \\<turnstile> c1 &&& \\<Gamma>,Low \\<turnstile> c2", "by simp_all"], ["proof (state)\nthis:\n  \\<Gamma>,Low \\<turnstile> c1\n  \\<Gamma>,Low \\<turnstile> c2\n\ngoal (2 subgoals):\n 1. \\<Gamma>,Low \\<turnstile> c1 \\<and>\n    \\<Gamma>,Low \\<turnstile> c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (c1;; c2)\n 2. \\<Gamma>,High \\<turnstile> c1;; c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (c1;; c2)", "from IH1[OF \\<open>\\<Gamma>,Low \\<turnstile> c1\\<close>]"], ["proof (chain)\npicking this:\n  nonInterference \\<Gamma> c1", "have \"nonInterference \\<Gamma> c1\""], ["proof (prove)\nusing this:\n  nonInterference \\<Gamma> c1\n\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> c1", "."], ["proof (state)\nthis:\n  nonInterference \\<Gamma> c1\n\ngoal (2 subgoals):\n 1. \\<Gamma>,Low \\<turnstile> c1 \\<and>\n    \\<Gamma>,Low \\<turnstile> c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (c1;; c2)\n 2. \\<Gamma>,High \\<turnstile> c1;; c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (c1;; c2)", "moreover"], ["proof (state)\nthis:\n  nonInterference \\<Gamma> c1\n\ngoal (2 subgoals):\n 1. \\<Gamma>,Low \\<turnstile> c1 \\<and>\n    \\<Gamma>,Low \\<turnstile> c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (c1;; c2)\n 2. \\<Gamma>,High \\<turnstile> c1;; c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (c1;; c2)", "from IH2[OF \\<open>\\<Gamma>,Low \\<turnstile> c2\\<close>]"], ["proof (chain)\npicking this:\n  nonInterference \\<Gamma> c2", "have \"nonInterference \\<Gamma> c2\""], ["proof (prove)\nusing this:\n  nonInterference \\<Gamma> c2\n\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> c2", "."], ["proof (state)\nthis:\n  nonInterference \\<Gamma> c2\n\ngoal (2 subgoals):\n 1. \\<Gamma>,Low \\<turnstile> c1 \\<and>\n    \\<Gamma>,Low \\<turnstile> c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (c1;; c2)\n 2. \\<Gamma>,High \\<turnstile> c1;; c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (c1;; c2)", "ultimately"], ["proof (chain)\npicking this:\n  nonInterference \\<Gamma> c1\n  nonInterference \\<Gamma> c2", "show ?thesis"], ["proof (prove)\nusing this:\n  nonInterference \\<Gamma> c1\n  nonInterference \\<Gamma> c2\n\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> (c1;; c2)", "by(auto intro:SeqCompositionality)"], ["proof (state)\nthis:\n  nonInterference \\<Gamma> (c1;; c2)\n\ngoal (1 subgoal):\n 1. \\<Gamma>,High \\<turnstile> c1;; c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (c1;; c2)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Gamma>,High \\<turnstile> c1;; c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (c1;; c2)", "assume \"\\<Gamma>,High \\<turnstile> c1;;c2\""], ["proof (state)\nthis:\n  \\<Gamma>,High \\<turnstile> c1;; c2\n\ngoal (1 subgoal):\n 1. \\<Gamma>,High \\<turnstile> c1;; c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (c1;; c2)", "hence \"\\<Gamma>,High \\<turnstile> c1\" and \"\\<Gamma>,High \\<turnstile> c2\""], ["proof (prove)\nusing this:\n  \\<Gamma>,High \\<turnstile> c1;; c2\n\ngoal (1 subgoal):\n 1. \\<Gamma>,High \\<turnstile> c1 &&& \\<Gamma>,High \\<turnstile> c2", "by(auto elim:secComTyping.cases)"], ["proof (state)\nthis:\n  \\<Gamma>,High \\<turnstile> c1\n  \\<Gamma>,High \\<turnstile> c2\n\ngoal (1 subgoal):\n 1. \\<Gamma>,High \\<turnstile> c1;; c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (c1;; c2)", "from IH1[OF \\<open>\\<Gamma>,High \\<turnstile> c1\\<close>]"], ["proof (chain)\npicking this:\n  nonInterference \\<Gamma> c1", "have \"nonInterference \\<Gamma> c1\""], ["proof (prove)\nusing this:\n  nonInterference \\<Gamma> c1\n\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> c1", "."], ["proof (state)\nthis:\n  nonInterference \\<Gamma> c1\n\ngoal (1 subgoal):\n 1. \\<Gamma>,High \\<turnstile> c1;; c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (c1;; c2)", "moreover"], ["proof (state)\nthis:\n  nonInterference \\<Gamma> c1\n\ngoal (1 subgoal):\n 1. \\<Gamma>,High \\<turnstile> c1;; c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (c1;; c2)", "from IH2[OF \\<open>\\<Gamma>,High \\<turnstile> c2\\<close>]"], ["proof (chain)\npicking this:\n  nonInterference \\<Gamma> c2", "have \"nonInterference \\<Gamma> c2\""], ["proof (prove)\nusing this:\n  nonInterference \\<Gamma> c2\n\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> c2", "."], ["proof (state)\nthis:\n  nonInterference \\<Gamma> c2\n\ngoal (1 subgoal):\n 1. \\<Gamma>,High \\<turnstile> c1;; c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (c1;; c2)", "ultimately"], ["proof (chain)\npicking this:\n  nonInterference \\<Gamma> c1\n  nonInterference \\<Gamma> c2", "show ?thesis"], ["proof (prove)\nusing this:\n  nonInterference \\<Gamma> c1\n  nonInterference \\<Gamma> c2\n\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> (c1;; c2)", "by(auto intro:SeqCompositionality)"], ["proof (state)\nthis:\n  nonInterference \\<Gamma> (c1;; c2)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  nonInterference \\<Gamma> (c1;; c2)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  nonInterference \\<Gamma> (c1;; c2)\n\ngoal (2 subgoals):\n 1. \\<And>x1 x2 x3 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x3 \\<Longrightarrow>\n           nonInterference \\<Gamma> x3;\n        \\<Gamma>,T \\<turnstile> if (x1) x2 else x3\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (if (x1) x2 else x3)\n 2. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> while (x1) x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (while (x1) x2)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x1 x2 x3 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x3 \\<Longrightarrow>\n           nonInterference \\<Gamma> x3;\n        \\<Gamma>,T \\<turnstile> if (x1) x2 else x3\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (if (x1) x2 else x3)\n 2. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> while (x1) x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (while (x1) x2)", "case (Cond b c1 c2)"], ["proof (state)\nthis:\n  \\<Gamma>,?T \\<turnstile> c1 \\<Longrightarrow> nonInterference \\<Gamma> c1\n  \\<Gamma>,?T \\<turnstile> c2 \\<Longrightarrow> nonInterference \\<Gamma> c2\n  \\<Gamma>,T \\<turnstile> if (b) c1 else c2\n\ngoal (2 subgoals):\n 1. \\<And>x1 x2 x3 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x3 \\<Longrightarrow>\n           nonInterference \\<Gamma> x3;\n        \\<Gamma>,T \\<turnstile> if (x1) x2 else x3\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (if (x1) x2 else x3)\n 2. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> while (x1) x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (while (x1) x2)", "note IH1 = \\<open>\\<And>T. \\<Gamma>,T \\<turnstile> c1 \\<Longrightarrow> nonInterference \\<Gamma> c1\\<close>"], ["proof (state)\nthis:\n  \\<Gamma>,?T \\<turnstile> c1 \\<Longrightarrow> nonInterference \\<Gamma> c1\n\ngoal (2 subgoals):\n 1. \\<And>x1 x2 x3 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x3 \\<Longrightarrow>\n           nonInterference \\<Gamma> x3;\n        \\<Gamma>,T \\<turnstile> if (x1) x2 else x3\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (if (x1) x2 else x3)\n 2. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> while (x1) x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (while (x1) x2)", "note IH2 = \\<open>\\<And>T. \\<Gamma>,T \\<turnstile> c2 \\<Longrightarrow> nonInterference \\<Gamma> c2\\<close>"], ["proof (state)\nthis:\n  \\<Gamma>,?T \\<turnstile> c2 \\<Longrightarrow> nonInterference \\<Gamma> c2\n\ngoal (2 subgoals):\n 1. \\<And>x1 x2 x3 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<And>T.\n           \\<Gamma>,T \\<turnstile> x3 \\<Longrightarrow>\n           nonInterference \\<Gamma> x3;\n        \\<Gamma>,T \\<turnstile> if (x1) x2 else x3\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (if (x1) x2 else x3)\n 2. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> while (x1) x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (while (x1) x2)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> (if (b) c1 else c2)", "proof (cases T)"], ["proof (state)\ngoal (2 subgoals):\n 1. T = Low \\<Longrightarrow> nonInterference \\<Gamma> (if (b) c1 else c2)\n 2. T = High \\<Longrightarrow> nonInterference \\<Gamma> (if (b) c1 else c2)", "case High"], ["proof (state)\nthis:\n  T = High\n\ngoal (2 subgoals):\n 1. T = Low \\<Longrightarrow> nonInterference \\<Gamma> (if (b) c1 else c2)\n 2. T = High \\<Longrightarrow> nonInterference \\<Gamma> (if (b) c1 else c2)", "with \\<open>\\<Gamma>,T \\<turnstile> if (b) c1 else c2\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma>,T \\<turnstile> if (b) c1 else c2\n  T = High", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Gamma>,T \\<turnstile> if (b) c1 else c2\n  T = High\n\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> (if (b) c1 else c2)", "by(auto intro:CondHighCompositionality)"], ["proof (state)\nthis:\n  nonInterference \\<Gamma> (if (b) c1 else c2)\n\ngoal (1 subgoal):\n 1. T = Low \\<Longrightarrow> nonInterference \\<Gamma> (if (b) c1 else c2)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. T = Low \\<Longrightarrow> nonInterference \\<Gamma> (if (b) c1 else c2)", "case Low"], ["proof (state)\nthis:\n  T = Low\n\ngoal (1 subgoal):\n 1. T = Low \\<Longrightarrow> nonInterference \\<Gamma> (if (b) c1 else c2)", "with \\<open>\\<Gamma>,T \\<turnstile> if (b) c1 else c2\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma>,T \\<turnstile> if (b) c1 else c2\n  T = Low", "have \"(\\<Gamma> \\<turnstile> b : Low \\<and> \\<Gamma>,Low \\<turnstile> c1 \\<and>\\<Gamma>,Low \\<turnstile> c2) \\<or> \\<Gamma>,High \\<turnstile> if (b) c1 else c2\""], ["proof (prove)\nusing this:\n  \\<Gamma>,T \\<turnstile> if (b) c1 else c2\n  T = Low\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> b : Low \\<and>\n    \\<Gamma>,Low \\<turnstile> c1 \\<and> \\<Gamma>,Low \\<turnstile> c2 \\<or>\n    \\<Gamma>,High \\<turnstile> if (b) c1 else c2", "by(auto elim:secComTyping.cases)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> b : Low \\<and>\n  \\<Gamma>,Low \\<turnstile> c1 \\<and> \\<Gamma>,Low \\<turnstile> c2 \\<or>\n  \\<Gamma>,High \\<turnstile> if (b) c1 else c2\n\ngoal (1 subgoal):\n 1. T = Low \\<Longrightarrow> nonInterference \\<Gamma> (if (b) c1 else c2)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> b : Low \\<and>\n  \\<Gamma>,Low \\<turnstile> c1 \\<and> \\<Gamma>,Low \\<turnstile> c2 \\<or>\n  \\<Gamma>,High \\<turnstile> if (b) c1 else c2\n\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> (if (b) c1 else c2)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<Gamma> \\<turnstile> b : Low \\<and>\n    \\<Gamma>,Low \\<turnstile> c1 \\<and>\n    \\<Gamma>,Low \\<turnstile> c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (if (b) c1 else c2)\n 2. \\<Gamma>,High \\<turnstile> if (b) c1 else c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (if (b) c1 else c2)", "assume \"\\<Gamma> \\<turnstile> b : Low \\<and> \\<Gamma>,Low \\<turnstile> c1 \\<and> \\<Gamma>,Low \\<turnstile> c2\""], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> b : Low \\<and>\n  \\<Gamma>,Low \\<turnstile> c1 \\<and> \\<Gamma>,Low \\<turnstile> c2\n\ngoal (2 subgoals):\n 1. \\<Gamma> \\<turnstile> b : Low \\<and>\n    \\<Gamma>,Low \\<turnstile> c1 \\<and>\n    \\<Gamma>,Low \\<turnstile> c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (if (b) c1 else c2)\n 2. \\<Gamma>,High \\<turnstile> if (b) c1 else c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (if (b) c1 else c2)", "hence \"\\<Gamma> \\<turnstile> b : Low\" and \"\\<Gamma>,Low \\<turnstile> c1\" and \"\\<Gamma>,Low \\<turnstile> c2\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> b : Low \\<and>\n  \\<Gamma>,Low \\<turnstile> c1 \\<and> \\<Gamma>,Low \\<turnstile> c2\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> b : Low &&&\n    \\<Gamma>,Low \\<turnstile> c1 &&& \\<Gamma>,Low \\<turnstile> c2", "by simp_all"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> b : Low\n  \\<Gamma>,Low \\<turnstile> c1\n  \\<Gamma>,Low \\<turnstile> c2\n\ngoal (2 subgoals):\n 1. \\<Gamma> \\<turnstile> b : Low \\<and>\n    \\<Gamma>,Low \\<turnstile> c1 \\<and>\n    \\<Gamma>,Low \\<turnstile> c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (if (b) c1 else c2)\n 2. \\<Gamma>,High \\<turnstile> if (b) c1 else c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (if (b) c1 else c2)", "from IH1[OF \\<open>\\<Gamma>,Low \\<turnstile> c1\\<close>]"], ["proof (chain)\npicking this:\n  nonInterference \\<Gamma> c1", "have \"nonInterference \\<Gamma> c1\""], ["proof (prove)\nusing this:\n  nonInterference \\<Gamma> c1\n\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> c1", "."], ["proof (state)\nthis:\n  nonInterference \\<Gamma> c1\n\ngoal (2 subgoals):\n 1. \\<Gamma> \\<turnstile> b : Low \\<and>\n    \\<Gamma>,Low \\<turnstile> c1 \\<and>\n    \\<Gamma>,Low \\<turnstile> c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (if (b) c1 else c2)\n 2. \\<Gamma>,High \\<turnstile> if (b) c1 else c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (if (b) c1 else c2)", "moreover"], ["proof (state)\nthis:\n  nonInterference \\<Gamma> c1\n\ngoal (2 subgoals):\n 1. \\<Gamma> \\<turnstile> b : Low \\<and>\n    \\<Gamma>,Low \\<turnstile> c1 \\<and>\n    \\<Gamma>,Low \\<turnstile> c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (if (b) c1 else c2)\n 2. \\<Gamma>,High \\<turnstile> if (b) c1 else c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (if (b) c1 else c2)", "from IH2[OF \\<open>\\<Gamma>,Low \\<turnstile> c2\\<close>]"], ["proof (chain)\npicking this:\n  nonInterference \\<Gamma> c2", "have \"nonInterference \\<Gamma> c2\""], ["proof (prove)\nusing this:\n  nonInterference \\<Gamma> c2\n\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> c2", "."], ["proof (state)\nthis:\n  nonInterference \\<Gamma> c2\n\ngoal (2 subgoals):\n 1. \\<Gamma> \\<turnstile> b : Low \\<and>\n    \\<Gamma>,Low \\<turnstile> c1 \\<and>\n    \\<Gamma>,Low \\<turnstile> c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (if (b) c1 else c2)\n 2. \\<Gamma>,High \\<turnstile> if (b) c1 else c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (if (b) c1 else c2)", "ultimately"], ["proof (chain)\npicking this:\n  nonInterference \\<Gamma> c1\n  nonInterference \\<Gamma> c2", "show ?thesis"], ["proof (prove)\nusing this:\n  nonInterference \\<Gamma> c1\n  nonInterference \\<Gamma> c2\n\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> (if (b) c1 else c2)", "using \\<open>\\<Gamma> \\<turnstile> b : Low\\<close>"], ["proof (prove)\nusing this:\n  nonInterference \\<Gamma> c1\n  nonInterference \\<Gamma> c2\n  \\<Gamma> \\<turnstile> b : Low\n\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> (if (b) c1 else c2)", "by(auto intro:CondLowCompositionality)"], ["proof (state)\nthis:\n  nonInterference \\<Gamma> (if (b) c1 else c2)\n\ngoal (1 subgoal):\n 1. \\<Gamma>,High \\<turnstile> if (b) c1 else c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (if (b) c1 else c2)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Gamma>,High \\<turnstile> if (b) c1 else c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (if (b) c1 else c2)", "assume \"\\<Gamma>,High \\<turnstile> if (b) c1 else c2\""], ["proof (state)\nthis:\n  \\<Gamma>,High \\<turnstile> if (b) c1 else c2\n\ngoal (1 subgoal):\n 1. \\<Gamma>,High \\<turnstile> if (b) c1 else c2 \\<Longrightarrow>\n    nonInterference \\<Gamma> (if (b) c1 else c2)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<Gamma>,High \\<turnstile> if (b) c1 else c2\n\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> (if (b) c1 else c2)", "by(auto intro:CondHighCompositionality)"], ["proof (state)\nthis:\n  nonInterference \\<Gamma> (if (b) c1 else c2)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  nonInterference \\<Gamma> (if (b) c1 else c2)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  nonInterference \\<Gamma> (if (b) c1 else c2)\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> while (x1) x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (while (x1) x2)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> while (x1) x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (while (x1) x2)", "case (While b c')"], ["proof (state)\nthis:\n  \\<Gamma>,?T \\<turnstile> c' \\<Longrightarrow> nonInterference \\<Gamma> c'\n  \\<Gamma>,T \\<turnstile> while (b) c'\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> while (x1) x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (while (x1) x2)", "note IH = \\<open>\\<And>T. \\<Gamma>,T \\<turnstile> c' \\<Longrightarrow> nonInterference \\<Gamma> c'\\<close>"], ["proof (state)\nthis:\n  \\<Gamma>,?T \\<turnstile> c' \\<Longrightarrow> nonInterference \\<Gamma> c'\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2 T.\n       \\<lbrakk>\\<And>T.\n                   \\<Gamma>,T \\<turnstile> x2 \\<Longrightarrow>\n                   nonInterference \\<Gamma> x2;\n        \\<Gamma>,T \\<turnstile> while (x1) x2\\<rbrakk>\n       \\<Longrightarrow> nonInterference \\<Gamma> (while (x1) x2)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> (while (b) c')", "proof(cases T)"], ["proof (state)\ngoal (2 subgoals):\n 1. T = Low \\<Longrightarrow> nonInterference \\<Gamma> (while (b) c')\n 2. T = High \\<Longrightarrow> nonInterference \\<Gamma> (while (b) c')", "case High"], ["proof (state)\nthis:\n  T = High\n\ngoal (2 subgoals):\n 1. T = Low \\<Longrightarrow> nonInterference \\<Gamma> (while (b) c')\n 2. T = High \\<Longrightarrow> nonInterference \\<Gamma> (while (b) c')", "with \\<open>\\<Gamma>,T \\<turnstile> while (b) c'\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma>,T \\<turnstile> while (b) c'\n  T = High", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Gamma>,T \\<turnstile> while (b) c'\n  T = High\n\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> (while (b) c')", "by(auto intro:WhileHighCompositionality)"], ["proof (state)\nthis:\n  nonInterference \\<Gamma> (while (b) c')\n\ngoal (1 subgoal):\n 1. T = Low \\<Longrightarrow> nonInterference \\<Gamma> (while (b) c')", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. T = Low \\<Longrightarrow> nonInterference \\<Gamma> (while (b) c')", "case Low"], ["proof (state)\nthis:\n  T = Low\n\ngoal (1 subgoal):\n 1. T = Low \\<Longrightarrow> nonInterference \\<Gamma> (while (b) c')", "with \\<open>\\<Gamma>,T \\<turnstile> while (b) c'\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma>,T \\<turnstile> while (b) c'\n  T = Low", "have \"(\\<Gamma> \\<turnstile> b : Low \\<and> \\<Gamma>,Low \\<turnstile> c') \\<or> \\<Gamma>,High \\<turnstile> while (b) c'\""], ["proof (prove)\nusing this:\n  \\<Gamma>,T \\<turnstile> while (b) c'\n  T = Low\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> b : Low \\<and> \\<Gamma>,Low \\<turnstile> c' \\<or>\n    \\<Gamma>,High \\<turnstile> while (b) c'", "by(auto elim:secComTyping.cases)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> b : Low \\<and> \\<Gamma>,Low \\<turnstile> c' \\<or>\n  \\<Gamma>,High \\<turnstile> while (b) c'\n\ngoal (1 subgoal):\n 1. T = Low \\<Longrightarrow> nonInterference \\<Gamma> (while (b) c')", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> b : Low \\<and> \\<Gamma>,Low \\<turnstile> c' \\<or>\n  \\<Gamma>,High \\<turnstile> while (b) c'\n\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> (while (b) c')", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<Gamma> \\<turnstile> b : Low \\<and>\n    \\<Gamma>,Low \\<turnstile> c' \\<Longrightarrow>\n    nonInterference \\<Gamma> (while (b) c')\n 2. \\<Gamma>,High \\<turnstile> while (b) c' \\<Longrightarrow>\n    nonInterference \\<Gamma> (while (b) c')", "assume \"\\<Gamma> \\<turnstile> b : Low \\<and> \\<Gamma>,Low \\<turnstile> c'\""], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> b : Low \\<and> \\<Gamma>,Low \\<turnstile> c'\n\ngoal (2 subgoals):\n 1. \\<Gamma> \\<turnstile> b : Low \\<and>\n    \\<Gamma>,Low \\<turnstile> c' \\<Longrightarrow>\n    nonInterference \\<Gamma> (while (b) c')\n 2. \\<Gamma>,High \\<turnstile> while (b) c' \\<Longrightarrow>\n    nonInterference \\<Gamma> (while (b) c')", "hence \"\\<Gamma> \\<turnstile> b : Low\" and \"\\<Gamma>,Low \\<turnstile> c'\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> b : Low \\<and> \\<Gamma>,Low \\<turnstile> c'\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> b : Low &&& \\<Gamma>,Low \\<turnstile> c'", "by simp_all"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> b : Low\n  \\<Gamma>,Low \\<turnstile> c'\n\ngoal (2 subgoals):\n 1. \\<Gamma> \\<turnstile> b : Low \\<and>\n    \\<Gamma>,Low \\<turnstile> c' \\<Longrightarrow>\n    nonInterference \\<Gamma> (while (b) c')\n 2. \\<Gamma>,High \\<turnstile> while (b) c' \\<Longrightarrow>\n    nonInterference \\<Gamma> (while (b) c')", "moreover"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> b : Low\n  \\<Gamma>,Low \\<turnstile> c'\n\ngoal (2 subgoals):\n 1. \\<Gamma> \\<turnstile> b : Low \\<and>\n    \\<Gamma>,Low \\<turnstile> c' \\<Longrightarrow>\n    nonInterference \\<Gamma> (while (b) c')\n 2. \\<Gamma>,High \\<turnstile> while (b) c' \\<Longrightarrow>\n    nonInterference \\<Gamma> (while (b) c')", "from IH[OF \\<open>\\<Gamma>,Low \\<turnstile> c'\\<close>]"], ["proof (chain)\npicking this:\n  nonInterference \\<Gamma> c'", "have \"nonInterference \\<Gamma> c'\""], ["proof (prove)\nusing this:\n  nonInterference \\<Gamma> c'\n\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> c'", "."], ["proof (state)\nthis:\n  nonInterference \\<Gamma> c'\n\ngoal (2 subgoals):\n 1. \\<Gamma> \\<turnstile> b : Low \\<and>\n    \\<Gamma>,Low \\<turnstile> c' \\<Longrightarrow>\n    nonInterference \\<Gamma> (while (b) c')\n 2. \\<Gamma>,High \\<turnstile> while (b) c' \\<Longrightarrow>\n    nonInterference \\<Gamma> (while (b) c')", "ultimately"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> b : Low\n  \\<Gamma>,Low \\<turnstile> c'\n  nonInterference \\<Gamma> c'", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> b : Low\n  \\<Gamma>,Low \\<turnstile> c'\n  nonInterference \\<Gamma> c'\n\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> (while (b) c')", "by(auto intro:WhileLowCompositionality)"], ["proof (state)\nthis:\n  nonInterference \\<Gamma> (while (b) c')\n\ngoal (1 subgoal):\n 1. \\<Gamma>,High \\<turnstile> while (b) c' \\<Longrightarrow>\n    nonInterference \\<Gamma> (while (b) c')", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Gamma>,High \\<turnstile> while (b) c' \\<Longrightarrow>\n    nonInterference \\<Gamma> (while (b) c')", "assume \"\\<Gamma>,High \\<turnstile> while (b) c'\""], ["proof (state)\nthis:\n  \\<Gamma>,High \\<turnstile> while (b) c'\n\ngoal (1 subgoal):\n 1. \\<Gamma>,High \\<turnstile> while (b) c' \\<Longrightarrow>\n    nonInterference \\<Gamma> (while (b) c')", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<Gamma>,High \\<turnstile> while (b) c'\n\ngoal (1 subgoal):\n 1. nonInterference \\<Gamma> (while (b) c')", "by(auto intro:WhileHighCompositionality)"], ["proof (state)\nthis:\n  nonInterference \\<Gamma> (while (b) c')\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  nonInterference \\<Gamma> (while (b) c')\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  nonInterference \\<Gamma> (while (b) c')\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}