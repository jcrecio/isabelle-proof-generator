{"file_name": "/home/qj213/afp-2021-10-22/thys/Jinja/J/Progress.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Jinja", "problem_names": ["lemma final_addrE:\n  \"\\<lbrakk> P,E,h \\<turnstile> e : Class C; final e;\n    \\<And>a. e = addr a \\<Longrightarrow> R;\n    \\<And>a. e = Throw a \\<Longrightarrow> R \\<rbrakk> \\<Longrightarrow> R\"", "lemma finalRefE:\n \"\\<lbrakk> P,E,h \\<turnstile> e : T; is_refT T; final e;\n   e = null \\<Longrightarrow> R;\n   \\<And>a C. \\<lbrakk> e = addr a; T = Class C \\<rbrakk> \\<Longrightarrow> R;\n   \\<And>a. e = Throw a \\<Longrightarrow> R \\<rbrakk> \\<Longrightarrow> R\"", "lemmas WTrt'_induct = WTrt'_WTrts'.induct [split_format (complete)]\n  and WTrt'_inducts = WTrt'_WTrts'.inducts [split_format (complete)]", "lemma [iff]: \"P,E,h \\<turnstile> e\\<^sub>1;;e\\<^sub>2 :' T\\<^sub>2 = (\\<exists>T\\<^sub>1. P,E,h \\<turnstile> e\\<^sub>1:' T\\<^sub>1 \\<and> P,E,h \\<turnstile> e\\<^sub>2:' T\\<^sub>2)\"", "lemma [iff]: \"P,E,h \\<turnstile> Val v :' T = (typeof\\<^bsub>h\\<^esub> v = Some T)\"", "lemma [iff]: \"P,E,h \\<turnstile> Var v :' T = (E v = Some T)\"", "lemma wt_wt': \"P,E,h \\<turnstile> e : T \\<Longrightarrow> P,E,h \\<turnstile> e :' T\"\nand wts_wts': \"P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow> P,E,h \\<turnstile> es [:'] Ts\"", "lemma wt'_wt: \"P,E,h \\<turnstile> e :' T \\<Longrightarrow> P,E,h \\<turnstile> e : T\"\nand wts'_wts: \"P,E,h \\<turnstile> es [:'] Ts \\<Longrightarrow> P,E,h \\<turnstile> es [:] Ts\"", "lemmas WTrt_inducts2 = WTrt'_inducts [unfolded wt'_iff_wt wts'_iff_wts,\n case_names WTrtNew WTrtCast WTrtVal WTrtVar WTrtBinOpEq WTrtBinOpAdd WTrtLAss WTrtFAcc WTrtFAccNT WTrtFAss\n WTrtFAssNT WTrtCall WTrtCallNT WTrtNil WTrtCons WTrtInitBlock WTrtBlock WTrtSeq WTrtCond\n WTrtWhile WTrtThrow WTrtTry, consumes 1]", "theorem assumes wf: \"wwf_J_prog P\" and hconf: \"P \\<turnstile> h \\<surd>\"\nshows progress: \"P,E,h \\<turnstile> e : T \\<Longrightarrow>\n (\\<And>l. \\<lbrakk> \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e \\<rbrakk> \\<Longrightarrow> \\<exists>e' s'. P \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',s'\\<rangle>)\"\nand \"P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow>\n (\\<And>l. \\<lbrakk> \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es \\<rbrakk> \\<Longrightarrow> \\<exists>es' s'. P \\<turnstile> \\<langle>es,(h,l)\\<rangle> [\\<rightarrow>] \\<langle>es',s'\\<rangle>)\""], "translations": [["", "lemma final_addrE:\n  \"\\<lbrakk> P,E,h \\<turnstile> e : Class C; final e;\n    \\<And>a. e = addr a \\<Longrightarrow> R;\n    \\<And>a. e = Throw a \\<Longrightarrow> R \\<rbrakk> \\<Longrightarrow> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P,E,h \\<turnstile> e : Class C; final e;\n     \\<And>a. e = addr a \\<Longrightarrow> R;\n     \\<And>a. e = Throw a \\<Longrightarrow> R\\<rbrakk>\n    \\<Longrightarrow> R", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P,E,h \\<turnstile> e : Class C; final e;\n     \\<And>a. e = addr a \\<Longrightarrow> R;\n     \\<And>a. e = Throw a \\<Longrightarrow> R\\<rbrakk>\n    \\<Longrightarrow> R", "by(auto simp:final_def)"], ["", "(*>*)"], ["", "lemma finalRefE:\n \"\\<lbrakk> P,E,h \\<turnstile> e : T; is_refT T; final e;\n   e = null \\<Longrightarrow> R;\n   \\<And>a C. \\<lbrakk> e = addr a; T = Class C \\<rbrakk> \\<Longrightarrow> R;\n   \\<And>a. e = Throw a \\<Longrightarrow> R \\<rbrakk> \\<Longrightarrow> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P,E,h \\<turnstile> e : T; is_refT T; final e;\n     e = null \\<Longrightarrow> R;\n     \\<And>a C.\n        \\<lbrakk>e = addr a; T = Class C\\<rbrakk> \\<Longrightarrow> R;\n     \\<And>a. e = Throw a \\<Longrightarrow> R\\<rbrakk>\n    \\<Longrightarrow> R", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P,E,h \\<turnstile> e : T; is_refT T; final e;\n     e = null \\<Longrightarrow> R;\n     \\<And>a C.\n        \\<lbrakk>e = addr a; T = Class C\\<rbrakk> \\<Longrightarrow> R;\n     \\<And>a. e = Throw a \\<Longrightarrow> R\\<rbrakk>\n    \\<Longrightarrow> R", "by(auto simp:final_def is_refT_def)"], ["", "(*>*)"], ["", "text\\<open>Derivation of new induction scheme for well typing:\\<close>"], ["", "inductive\n  WTrt' :: \"[J_prog,heap,env,expr,ty] \\<Rightarrow> bool\"\n  and WTrts' :: \"[J_prog,heap,env,expr list, ty list] \\<Rightarrow> bool\"\n  and WTrt2' :: \"[J_prog,env,heap,expr,ty] \\<Rightarrow> bool\"\n        (\"_,_,_ \\<turnstile> _ :'' _\"   [51,51,51]50)\n  and WTrts2' :: \"[J_prog,env,heap,expr list, ty list] \\<Rightarrow> bool\"\n        (\"_,_,_ \\<turnstile> _ [:''] _\" [51,51,51]50)\n  for P :: J_prog and h :: heap\nwhere\n  \"P,E,h \\<turnstile> e :' T \\<equiv> WTrt' P h E e T\"\n| \"P,E,h \\<turnstile> es [:'] Ts \\<equiv> WTrts' P h E es Ts\"\n\n| \"is_class P C  \\<Longrightarrow>  P,E,h \\<turnstile> new C :' Class C\"\n| \"\\<lbrakk> P,E,h \\<turnstile> e :' T; is_refT T; is_class P C \\<rbrakk>\n  \\<Longrightarrow> P,E,h \\<turnstile> Cast C e :' Class C\"\n| \"typeof\\<^bsub>h\\<^esub> v = Some T \\<Longrightarrow> P,E,h \\<turnstile> Val v :' T\"\n| \"E v = Some T  \\<Longrightarrow>  P,E,h \\<turnstile> Var v :' T\"\n| \"\\<lbrakk> P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1;  P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2 \\<rbrakk>\n  \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2 :' Boolean\"\n| \"\\<lbrakk> P,E,h \\<turnstile> e\\<^sub>1 :' Integer;  P,E,h \\<turnstile> e\\<^sub>2 :' Integer \\<rbrakk>\n  \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2 :' Integer\"\n| \"\\<lbrakk> P,E,h \\<turnstile> Var V :' T;  P,E,h \\<turnstile> e :' T';  P \\<turnstile> T' \\<le> T \\<^cancel>\\<open>V \\<noteq> This\\<close> \\<rbrakk>\n  \\<Longrightarrow> P,E,h \\<turnstile> V:=e :' Void\"\n| \"\\<lbrakk> P,E,h \\<turnstile> e :' Class C; P \\<turnstile> C has F:T in D \\<rbrakk> \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{D} :' T\"\n| \"P,E,h \\<turnstile> e :' NT \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{D} :' T\"\n| \"\\<lbrakk> P,E,h \\<turnstile> e\\<^sub>1 :' Class C;  P \\<turnstile> C has F:T in D;\n    P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;  P \\<turnstile> T\\<^sub>2 \\<le> T \\<rbrakk>\n  \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{D}:=e\\<^sub>2 :' Void\"\n| \"\\<lbrakk> P,E,h \\<turnstile> e\\<^sub>1:'NT; P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2 \\<rbrakk> \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{D}:=e\\<^sub>2 :' Void\"\n| \"\\<lbrakk> P,E,h \\<turnstile> e :' Class C; P \\<turnstile> C sees M:Ts \\<rightarrow> T = (pns,body) in D;\n    P,E,h \\<turnstile> es [:'] Ts'; P \\<turnstile> Ts' [\\<le>] Ts \\<rbrakk>\n  \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>M(es) :' T\"\n| \"\\<lbrakk> P,E,h \\<turnstile> e :' NT; P,E,h \\<turnstile> es [:'] Ts \\<rbrakk> \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>M(es) :' T\"\n| \"P,E,h \\<turnstile> [] [:'] []\"\n| \"\\<lbrakk> P,E,h \\<turnstile> e :' T;  P,E,h \\<turnstile> es [:'] Ts \\<rbrakk> \\<Longrightarrow>  P,E,h \\<turnstile> e#es [:'] T#Ts\"\n| \"\\<lbrakk> typeof\\<^bsub>h\\<^esub> v = Some T\\<^sub>1; P \\<turnstile> T\\<^sub>1 \\<le> T; P,E(V\\<mapsto>T),h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2 \\<rbrakk>\n  \\<Longrightarrow>  P,E,h \\<turnstile> {V:T := Val v; e\\<^sub>2} :' T\\<^sub>2\"\n| \"\\<lbrakk> P,E(V\\<mapsto>T),h \\<turnstile> e :' T'; \\<not> assigned V e \\<rbrakk> \\<Longrightarrow>  P,E,h \\<turnstile> {V:T; e} :' T'\"\n| \"\\<lbrakk> P,E,h \\<turnstile> e\\<^sub>1:' T\\<^sub>1;  P,E,h \\<turnstile> e\\<^sub>2:'T\\<^sub>2 \\<rbrakk>  \\<Longrightarrow>  P,E,h \\<turnstile> e\\<^sub>1;;e\\<^sub>2 :' T\\<^sub>2\"\n| \"\\<lbrakk> P,E,h \\<turnstile> e :' Boolean;  P,E,h \\<turnstile> e\\<^sub>1:' T\\<^sub>1;  P,E,h \\<turnstile> e\\<^sub>2:' T\\<^sub>2;\n    P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or> P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n    P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow> T = T\\<^sub>2; P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow> T = T\\<^sub>1 \\<rbrakk>\n  \\<Longrightarrow> P,E,h \\<turnstile> if (e) e\\<^sub>1 else e\\<^sub>2 :' T\"\n(*\n \"\\<lbrakk> P,E,h \\<turnstile> e :' Boolean;  P,E,h \\<turnstile> e\\<^sub>1:' T\\<^sub>1;  P,E,h \\<turnstile> e\\<^sub>2:' T\\<^sub>2; P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<rbrakk>\n  \\<Longrightarrow> P,E,h \\<turnstile> if (e) e\\<^sub>1 else e\\<^sub>2 :' T\\<^sub>2\"\n \"\\<lbrakk> P,E,h \\<turnstile> e :' Boolean;  P,E,h \\<turnstile> e\\<^sub>1:' T\\<^sub>1;  P,E,h \\<turnstile> e\\<^sub>2:' T\\<^sub>2; P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<rbrakk>\n  \\<Longrightarrow> P,E,h \\<turnstile> if (e) e\\<^sub>1 else e\\<^sub>2 :' T\\<^sub>1\"\n*)\n| \"\\<lbrakk> P,E,h \\<turnstile> e :' Boolean;  P,E,h \\<turnstile> c:' T \\<rbrakk>\n  \\<Longrightarrow>  P,E,h \\<turnstile> while(e) c :' Void\"\n| \"\\<lbrakk> P,E,h \\<turnstile> e :' T\\<^sub>r; is_refT T\\<^sub>r \\<rbrakk>  \\<Longrightarrow>  P,E,h \\<turnstile> throw e :' T\"\n| \"\\<lbrakk> P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1;  P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2; P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<rbrakk>\n  \\<Longrightarrow> P,E,h \\<turnstile> try e\\<^sub>1 catch(C V) e\\<^sub>2 :' T\\<^sub>2\""], ["", "(*<*)"], ["", "lemmas WTrt'_induct = WTrt'_WTrts'.induct [split_format (complete)]\n  and WTrt'_inducts = WTrt'_WTrts'.inducts [split_format (complete)]"], ["", "inductive_cases WTrt'_elim_cases[elim!]:\n  \"P,E,h \\<turnstile> V :=e :' T\""], ["", "(*>*)"], ["", "lemma [iff]: \"P,E,h \\<turnstile> e\\<^sub>1;;e\\<^sub>2 :' T\\<^sub>2 = (\\<exists>T\\<^sub>1. P,E,h \\<turnstile> e\\<^sub>1:' T\\<^sub>1 \\<and> P,E,h \\<turnstile> e\\<^sub>2:' T\\<^sub>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e\\<^sub>1;; e\\<^sub>2 :' T\\<^sub>2) =\n    (\\<exists>T\\<^sub>1.\n        P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1 \\<and>\n        P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2)", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e\\<^sub>1;; e\\<^sub>2 :' T\\<^sub>2) =\n    (\\<exists>T\\<^sub>1.\n        P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1 \\<and>\n        P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2)", "apply(rule iffI)"], ["proof (prove)\ngoal (2 subgoals):\n 1. P,E,h \\<turnstile> e\\<^sub>1;; e\\<^sub>2 :' T\\<^sub>2 \\<Longrightarrow>\n    \\<exists>T\\<^sub>1.\n       P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1 \\<and>\n       P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2\n 2. \\<exists>T\\<^sub>1.\n       P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1 \\<and>\n       P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2 \\<Longrightarrow>\n    P,E,h \\<turnstile> e\\<^sub>1;; e\\<^sub>2 :' T\\<^sub>2", "apply (auto elim: WTrt'.cases intro!:WTrt'_WTrts'.intros)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "(*>*)"], ["", "lemma [iff]: \"P,E,h \\<turnstile> Val v :' T = (typeof\\<^bsub>h\\<^esub> v = Some T)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> Val v :' T) =\n    (typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>)", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> Val v :' T) =\n    (typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>)", "apply(rule iffI)"], ["proof (prove)\ngoal (2 subgoals):\n 1. P,E,h \\<turnstile> Val v :' T \\<Longrightarrow>\n    typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>\n 2. typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n    P,E,h \\<turnstile> Val v :' T", "apply (auto elim: WTrt'.cases intro!:WTrt'_WTrts'.intros)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "(*>*)"], ["", "lemma [iff]: \"P,E,h \\<turnstile> Var v :' T = (E v = Some T)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> Var v :' T) = (E v = \\<lfloor>T\\<rfloor>)", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> Var v :' T) = (E v = \\<lfloor>T\\<rfloor>)", "apply(rule iffI)"], ["proof (prove)\ngoal (2 subgoals):\n 1. P,E,h \\<turnstile> Var v :' T \\<Longrightarrow>\n    E v = \\<lfloor>T\\<rfloor>\n 2. E v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n    P,E,h \\<turnstile> Var v :' T", "apply (auto elim: WTrt'.cases intro!:WTrt'_WTrts'.intros)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "(*>*)"], ["", "lemma wt_wt': \"P,E,h \\<turnstile> e : T \\<Longrightarrow> P,E,h \\<turnstile> e :' T\"\nand wts_wts': \"P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow> P,E,h \\<turnstile> es [:'] Ts\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e : T \\<Longrightarrow>\n     P,E,h \\<turnstile> e :' T) &&&\n    (P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow>\n     P,E,h \\<turnstile> es [:'] Ts)", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e : T \\<Longrightarrow>\n     P,E,h \\<turnstile> e :' T) &&&\n    (P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow>\n     P,E,h \\<turnstile> es [:'] Ts)", "apply (induct rule:WTrt_inducts)"], ["proof (prove)\ngoal (21 subgoals):\n 1. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C :' Class C\n 2. \\<And>E e T C.\n       \\<lbrakk>P,E,h \\<turnstile> e : T; P,E,h \\<turnstile> e :' T;\n        is_refT T; is_class P C\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e :' Class C\n 3. \\<And>v T E.\n       typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Val v :' T\n 4. \\<And>E V T.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V :' T\n 5. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2 :' Boolean\n 6. \\<And>E e\\<^sub>1 e\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        P,E,h \\<turnstile> e\\<^sub>1 :' Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 :' Integer\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2 :' Integer\n 7. \\<And>E V T e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        P,E,h \\<turnstile> e :' T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e :' Void\n 8. \\<And>E e C F T D.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        P,E,h \\<turnstile> e :' Class C;\n        P \\<turnstile> C has F:T in D\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{D} :' T\n 9. \\<And>E e F D T.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        P,E,h \\<turnstile> e :' NT\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{D} :' T\n 10. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n         P,E,h \\<turnstile> e\\<^sub>1 :' Class C;\n         P \\<turnstile> C has F:T in D;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n         P \\<turnstile> T\\<^sub>2 \\<le> T\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2 :' Void\nA total of 21 subgoals...", "prefer 14"], ["proof (prove)\ngoal (21 subgoals):\n 1. \\<And>E V T e T'.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        P,E(V \\<mapsto> T),h \\<turnstile> e :' T'\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> {V:T; e} :' T'\n 2. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C :' Class C\n 3. \\<And>E e T C.\n       \\<lbrakk>P,E,h \\<turnstile> e : T; P,E,h \\<turnstile> e :' T;\n        is_refT T; is_class P C\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e :' Class C\n 4. \\<And>v T E.\n       typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Val v :' T\n 5. \\<And>E V T.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V :' T\n 6. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2 :' Boolean\n 7. \\<And>E e\\<^sub>1 e\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        P,E,h \\<turnstile> e\\<^sub>1 :' Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 :' Integer\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2 :' Integer\n 8. \\<And>E V T e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        P,E,h \\<turnstile> e :' T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e :' Void\n 9. \\<And>E e C F T D.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        P,E,h \\<turnstile> e :' Class C;\n        P \\<turnstile> C has F:T in D\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{D} :' T\n 10. \\<And>E e F D T.\n        \\<lbrakk>P,E,h \\<turnstile> e : NT;\n         P,E,h \\<turnstile> e :' NT\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{D} :' T\nA total of 21 subgoals...", "apply(case_tac \"assigned V e\")"], ["proof (prove)\ngoal (22 subgoals):\n 1. \\<And>E V T e T'.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        P,E(V \\<mapsto> T),h \\<turnstile> e :' T'; assigned V e\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> {V:T; e} :' T'\n 2. \\<And>E V T e T'.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        P,E(V \\<mapsto> T),h \\<turnstile> e :' T';\n        \\<not> assigned V e\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> {V:T; e} :' T'\n 3. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C :' Class C\n 4. \\<And>E e T C.\n       \\<lbrakk>P,E,h \\<turnstile> e : T; P,E,h \\<turnstile> e :' T;\n        is_refT T; is_class P C\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e :' Class C\n 5. \\<And>v T E.\n       typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Val v :' T\n 6. \\<And>E V T.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V :' T\n 7. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2 :' Boolean\n 8. \\<And>E e\\<^sub>1 e\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        P,E,h \\<turnstile> e\\<^sub>1 :' Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 :' Integer\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2 :' Integer\n 9. \\<And>E V T e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        P,E,h \\<turnstile> e :' T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e :' Void\n 10. \\<And>E e C F T D.\n        \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n         P,E,h \\<turnstile> e :' Class C;\n         P \\<turnstile> C has F:T in D\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{D} :' T\nA total of 22 subgoals...", "apply(clarsimp simp add:fun_upd_same assigned_def simp del:fun_upd_apply)"], ["proof (prove)\ngoal (22 subgoals):\n 1. \\<And>E V T' v e' T'a Tb.\n       \\<lbrakk>P,E(V \\<mapsto> Tb),h \\<turnstile> e' :' T';\n        P,E(V \\<mapsto> Tb),h \\<turnstile> e' : T';\n        P \\<turnstile> T'a \\<le> Tb;\n        typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T'a\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> {V:Tb; V:=Val v;; e'} :' T'\n 2. \\<And>E V T e T'.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        P,E(V \\<mapsto> T),h \\<turnstile> e :' T';\n        \\<not> assigned V e\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> {V:T; e} :' T'\n 3. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C :' Class C\n 4. \\<And>E e T C.\n       \\<lbrakk>P,E,h \\<turnstile> e : T; P,E,h \\<turnstile> e :' T;\n        is_refT T; is_class P C\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e :' Class C\n 5. \\<And>v T E.\n       typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Val v :' T\n 6. \\<And>E V T.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V :' T\n 7. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2 :' Boolean\n 8. \\<And>E e\\<^sub>1 e\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        P,E,h \\<turnstile> e\\<^sub>1 :' Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 :' Integer\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2 :' Integer\n 9. \\<And>E V T e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        P,E,h \\<turnstile> e :' T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e :' Void\n 10. \\<And>E e C F T D.\n        \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n         P,E,h \\<turnstile> e :' Class C;\n         P \\<turnstile> C has F:T in D\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{D} :' T\nA total of 22 subgoals...", "apply(erule (2) WTrt'_WTrts'.intros)"], ["proof (prove)\ngoal (21 subgoals):\n 1. \\<And>E V T e T'.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        P,E(V \\<mapsto> T),h \\<turnstile> e :' T';\n        \\<not> assigned V e\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> {V:T; e} :' T'\n 2. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C :' Class C\n 3. \\<And>E e T C.\n       \\<lbrakk>P,E,h \\<turnstile> e : T; P,E,h \\<turnstile> e :' T;\n        is_refT T; is_class P C\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e :' Class C\n 4. \\<And>v T E.\n       typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Val v :' T\n 5. \\<And>E V T.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V :' T\n 6. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2 :' Boolean\n 7. \\<And>E e\\<^sub>1 e\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        P,E,h \\<turnstile> e\\<^sub>1 :' Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 :' Integer\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2 :' Integer\n 8. \\<And>E V T e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        P,E,h \\<turnstile> e :' T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e :' Void\n 9. \\<And>E e C F T D.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        P,E,h \\<turnstile> e :' Class C;\n        P \\<turnstile> C has F:T in D\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{D} :' T\n 10. \\<And>E e F D T.\n        \\<lbrakk>P,E,h \\<turnstile> e : NT;\n         P,E,h \\<turnstile> e :' NT\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{D} :' T\nA total of 21 subgoals...", "apply(erule (1) WTrt'_WTrts'.intros)"], ["proof (prove)\ngoal (20 subgoals):\n 1. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C :' Class C\n 2. \\<And>E e T C.\n       \\<lbrakk>P,E,h \\<turnstile> e : T; P,E,h \\<turnstile> e :' T;\n        is_refT T; is_class P C\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e :' Class C\n 3. \\<And>v T E.\n       typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Val v :' T\n 4. \\<And>E V T.\n       E V = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var V :' T\n 5. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2 :' Boolean\n 6. \\<And>E e\\<^sub>1 e\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        P,E,h \\<turnstile> e\\<^sub>1 :' Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 :' Integer\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2 :' Integer\n 7. \\<And>E V T e T'.\n       \\<lbrakk>E V = \\<lfloor>T\\<rfloor>; P,E,h \\<turnstile> e : T';\n        P,E,h \\<turnstile> e :' T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e :' Void\n 8. \\<And>E e C F T D.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        P,E,h \\<turnstile> e :' Class C;\n        P \\<turnstile> C has F:T in D\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{D} :' T\n 9. \\<And>E e F D T.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        P,E,h \\<turnstile> e :' NT\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{D} :' T\n 10. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n         P,E,h \\<turnstile> e\\<^sub>1 :' Class C;\n         P \\<turnstile> C has F:T in D;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n         P \\<turnstile> T\\<^sub>2 \\<le> T\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2 :' Void\nA total of 20 subgoals...", "apply(blast intro:WTrt'_WTrts'.intros)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "(*>*)"], ["", "lemma wt'_wt: \"P,E,h \\<turnstile> e :' T \\<Longrightarrow> P,E,h \\<turnstile> e : T\"\nand wts'_wts: \"P,E,h \\<turnstile> es [:'] Ts \\<Longrightarrow> P,E,h \\<turnstile> es [:] Ts\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e :' T \\<Longrightarrow>\n     P,E,h \\<turnstile> e : T) &&&\n    (P,E,h \\<turnstile> es [:'] Ts \\<Longrightarrow>\n     P,E,h \\<turnstile> es [:] Ts)", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e :' T \\<Longrightarrow>\n     P,E,h \\<turnstile> e : T) &&&\n    (P,E,h \\<turnstile> es [:'] Ts \\<Longrightarrow>\n     P,E,h \\<turnstile> es [:] Ts)", "apply (induct rule:WTrt'_inducts)"], ["proof (prove)\ngoal (22 subgoals):\n 1. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 2. \\<And>E e T C.\n       \\<lbrakk>P,E,h \\<turnstile> e :' T; P,E,h \\<turnstile> e : T;\n        is_refT T; is_class P C\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 3. \\<And>v T E.\n       typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Val v : T\n 4. \\<And>E v T.\n       E v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var v : T\n 5. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2 : Boolean\n 6. \\<And>E e\\<^sub>1 e\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 :' Integer;\n        P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 :' Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2 : Integer\n 7. \\<And>E V T e T'.\n       \\<lbrakk>P,E,h \\<turnstile> Var V :' T; P,E,h \\<turnstile> Var V : T;\n        P,E,h \\<turnstile> e :' T'; P,E,h \\<turnstile> e : T';\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e : Void\n 8. \\<And>E e C F T D.\n       \\<lbrakk>P,E,h \\<turnstile> e :' Class C;\n        P,E,h \\<turnstile> e : Class C;\n        P \\<turnstile> C has F:T in D\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{D} : T\n 9. \\<And>E e F D T.\n       \\<lbrakk>P,E,h \\<turnstile> e :' NT;\n        P,E,h \\<turnstile> e : NT\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{D} : T\n 10. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 :' Class C;\n         P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n         P \\<turnstile> C has F:T in D;\n         P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         P \\<turnstile> T\\<^sub>2 \\<le> T\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2 : Void\nA total of 22 subgoals...", "prefer 16"], ["proof (prove)\ngoal (22 subgoals):\n 1. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> {V:T; V:=Val v;;\n                         e\\<^sub>2} : T\\<^sub>2\n 2. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 3. \\<And>E e T C.\n       \\<lbrakk>P,E,h \\<turnstile> e :' T; P,E,h \\<turnstile> e : T;\n        is_refT T; is_class P C\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 4. \\<And>v T E.\n       typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Val v : T\n 5. \\<And>E v T.\n       E v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var v : T\n 6. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2 : Boolean\n 7. \\<And>E e\\<^sub>1 e\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 :' Integer;\n        P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 :' Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2 : Integer\n 8. \\<And>E V T e T'.\n       \\<lbrakk>P,E,h \\<turnstile> Var V :' T; P,E,h \\<turnstile> Var V : T;\n        P,E,h \\<turnstile> e :' T'; P,E,h \\<turnstile> e : T';\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e : Void\n 9. \\<And>E e C F T D.\n       \\<lbrakk>P,E,h \\<turnstile> e :' Class C;\n        P,E,h \\<turnstile> e : Class C;\n        P \\<turnstile> C has F:T in D\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{D} : T\n 10. \\<And>E e F D T.\n        \\<lbrakk>P,E,h \\<turnstile> e :' NT;\n         P,E,h \\<turnstile> e : NT\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{D} : T\nA total of 22 subgoals...", "apply(rule WTrt_WTrts.intros)"], ["proof (prove)\ngoal (22 subgoals):\n 1. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E(V \\<mapsto> T),h \\<turnstile> V:=Val v;;\n                         e\\<^sub>2 : T\\<^sub>2\n 2. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 3. \\<And>E e T C.\n       \\<lbrakk>P,E,h \\<turnstile> e :' T; P,E,h \\<turnstile> e : T;\n        is_refT T; is_class P C\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 4. \\<And>v T E.\n       typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Val v : T\n 5. \\<And>E v T.\n       E v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var v : T\n 6. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2 : Boolean\n 7. \\<And>E e\\<^sub>1 e\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 :' Integer;\n        P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 :' Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2 : Integer\n 8. \\<And>E V T e T'.\n       \\<lbrakk>P,E,h \\<turnstile> Var V :' T; P,E,h \\<turnstile> Var V : T;\n        P,E,h \\<turnstile> e :' T'; P,E,h \\<turnstile> e : T';\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e : Void\n 9. \\<And>E e C F T D.\n       \\<lbrakk>P,E,h \\<turnstile> e :' Class C;\n        P,E,h \\<turnstile> e : Class C;\n        P \\<turnstile> C has F:T in D\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{D} : T\n 10. \\<And>E e F D T.\n        \\<lbrakk>P,E,h \\<turnstile> e :' NT;\n         P,E,h \\<turnstile> e : NT\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{D} : T\nA total of 22 subgoals...", "apply(rule WTrt_WTrts.intros)"], ["proof (prove)\ngoal (23 subgoals):\n 1. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E(V \\<mapsto>\n                         T),h \\<turnstile> V:=Val\n         v : ?T\\<^sub>124 v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2\n 2. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E(V \\<mapsto>\n                         T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n 3. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 4. \\<And>E e T C.\n       \\<lbrakk>P,E,h \\<turnstile> e :' T; P,E,h \\<turnstile> e : T;\n        is_refT T; is_class P C\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 5. \\<And>v T E.\n       typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Val v : T\n 6. \\<And>E v T.\n       E v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var v : T\n 7. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2 : Boolean\n 8. \\<And>E e\\<^sub>1 e\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 :' Integer;\n        P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 :' Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2 : Integer\n 9. \\<And>E V T e T'.\n       \\<lbrakk>P,E,h \\<turnstile> Var V :' T; P,E,h \\<turnstile> Var V : T;\n        P,E,h \\<turnstile> e :' T'; P,E,h \\<turnstile> e : T';\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e : Void\n 10. \\<And>E e C F T D.\n        \\<lbrakk>P,E,h \\<turnstile> e :' Class C;\n         P,E,h \\<turnstile> e : Class C;\n         P \\<turnstile> C has F:T in D\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{D} : T\nA total of 23 subgoals...", "apply(rule WTrt_WTrts.intros)"], ["proof (prove)\ngoal (25 subgoals):\n 1. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> (E(V \\<mapsto> T)) V =\n                         \\<lfloor>?T27 v T\\<^sub>1 T E V e\\<^sub>2\n                                   T\\<^sub>2\\<rfloor>\n 2. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E(V \\<mapsto>\n                         T),h \\<turnstile> Val\n      v : ?T'27 v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2\n 3. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> ?T'27 v T\\<^sub>1 T E V e\\<^sub>2\n   T\\<^sub>2 \\<le> ?T27 v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2\n 4. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E(V \\<mapsto>\n                         T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n 5. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 6. \\<And>E e T C.\n       \\<lbrakk>P,E,h \\<turnstile> e :' T; P,E,h \\<turnstile> e : T;\n        is_refT T; is_class P C\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 7. \\<And>v T E.\n       typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Val v : T\n 8. \\<And>E v T.\n       E v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var v : T\n 9. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2 : Boolean\n 10. \\<And>E e\\<^sub>1 e\\<^sub>2.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 :' Integer;\n         P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n         P,E,h \\<turnstile> e\\<^sub>2 :' Integer;\n         P,E,h \\<turnstile> e\\<^sub>2 : Integer\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2 : Integer\nA total of 25 subgoals...", "apply simp"], ["proof (prove)\ngoal (24 subgoals):\n 1. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E(V \\<mapsto>\n                         T),h \\<turnstile> Val\n      v : ?T'27 v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2\n 2. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> ?T'27 v T\\<^sub>1 T E V e\\<^sub>2\n   T\\<^sub>2 \\<le> T\n 3. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E(V \\<mapsto>\n                         T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n 4. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 5. \\<And>E e T C.\n       \\<lbrakk>P,E,h \\<turnstile> e :' T; P,E,h \\<turnstile> e : T;\n        is_refT T; is_class P C\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 6. \\<And>v T E.\n       typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Val v : T\n 7. \\<And>E v T.\n       E v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var v : T\n 8. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2 : Boolean\n 9. \\<And>E e\\<^sub>1 e\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 :' Integer;\n        P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 :' Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2 : Integer\n 10. \\<And>E V T e T'.\n        \\<lbrakk>P,E,h \\<turnstile> Var V :' T;\n         P,E,h \\<turnstile> Var V : T; P,E,h \\<turnstile> e :' T';\n         P,E,h \\<turnstile> e : T'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> V:=e : Void\nA total of 24 subgoals...", "apply(erule (2) WTrt_WTrts.intros)"], ["proof (prove)\ngoal (21 subgoals):\n 1. \\<And>C E.\n       is_class P C \\<Longrightarrow> P,E,h \\<turnstile> new C : Class C\n 2. \\<And>E e T C.\n       \\<lbrakk>P,E,h \\<turnstile> e :' T; P,E,h \\<turnstile> e : T;\n        is_refT T; is_class P C\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> Cast C e : Class C\n 3. \\<And>v T E.\n       typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Val v : T\n 4. \\<And>E v T.\n       E v = \\<lfloor>T\\<rfloor> \\<Longrightarrow>\n       P,E,h \\<turnstile> Var v : T\n 5. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 :' T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2 : Boolean\n 6. \\<And>E e\\<^sub>1 e\\<^sub>2.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 :' Integer;\n        P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 :' Integer;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2 : Integer\n 7. \\<And>E V T e T'.\n       \\<lbrakk>P,E,h \\<turnstile> Var V :' T; P,E,h \\<turnstile> Var V : T;\n        P,E,h \\<turnstile> e :' T'; P,E,h \\<turnstile> e : T';\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> V:=e : Void\n 8. \\<And>E e C F T D.\n       \\<lbrakk>P,E,h \\<turnstile> e :' Class C;\n        P,E,h \\<turnstile> e : Class C;\n        P \\<turnstile> C has F:T in D\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{D} : T\n 9. \\<And>E e F D T.\n       \\<lbrakk>P,E,h \\<turnstile> e :' NT;\n        P,E,h \\<turnstile> e : NT\\<rbrakk>\n       \\<Longrightarrow> P,E,h \\<turnstile> e\\<bullet>F{D} : T\n 10. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 :' Class C;\n         P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n         P \\<turnstile> C has F:T in D;\n         P,E,h \\<turnstile> e\\<^sub>2 :' T\\<^sub>2;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         P \\<turnstile> T\\<^sub>2 \\<le> T\\<rbrakk>\n        \\<Longrightarrow> P,E,h \\<turnstile> e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2 : Void\nA total of 21 subgoals...", "apply(blast intro:WTrt_WTrts.intros)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "(*>*)"], ["", "corollary wt'_iff_wt: \"(P,E,h \\<turnstile> e :' T) = (P,E,h \\<turnstile> e : T)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e :' T) = (P,E,h \\<turnstile> e : T)", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e :' T) = (P,E,h \\<turnstile> e : T)", "by(blast intro:wt_wt' wt'_wt)"], ["", "(*>*)"], ["", "corollary wts'_iff_wts: \"(P,E,h \\<turnstile> es [:'] Ts) = (P,E,h \\<turnstile> es [:] Ts)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> es [:'] Ts) = (P,E,h \\<turnstile> es [:] Ts)", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> es [:'] Ts) = (P,E,h \\<turnstile> es [:] Ts)", "by(blast intro:wts_wts' wts'_wts)"], ["", "(*>*)\n\n(*<*)"], ["", "lemmas WTrt_inducts2 = WTrt'_inducts [unfolded wt'_iff_wt wts'_iff_wts,\n case_names WTrtNew WTrtCast WTrtVal WTrtVar WTrtBinOpEq WTrtBinOpAdd WTrtLAss WTrtFAcc WTrtFAccNT WTrtFAss\n WTrtFAssNT WTrtCall WTrtCallNT WTrtNil WTrtCons WTrtInitBlock WTrtBlock WTrtSeq WTrtCond\n WTrtWhile WTrtThrow WTrtTry, consumes 1]"], ["", "(*>*)"], ["", "theorem assumes wf: \"wwf_J_prog P\" and hconf: \"P \\<turnstile> h \\<surd>\"\nshows progress: \"P,E,h \\<turnstile> e : T \\<Longrightarrow>\n (\\<And>l. \\<lbrakk> \\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e \\<rbrakk> \\<Longrightarrow> \\<exists>e' s'. P \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',s'\\<rangle>)\"\nand \"P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow>\n (\\<And>l. \\<lbrakk> \\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es \\<rbrakk> \\<Longrightarrow> \\<exists>es' s'. P \\<turnstile> \\<langle>es,(h,l)\\<rangle> [\\<rightarrow>] \\<langle>es',s'\\<rangle>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e : T \\<Longrightarrow>\n     (\\<And>l.\n         \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n         \\<Longrightarrow> \\<exists>e' s'.\n                              P \\<turnstile> \\<langle>e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>)) &&&\n    (P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow>\n     (\\<And>l.\n         \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n          \\<not> finals es\\<rbrakk>\n         \\<Longrightarrow> \\<exists>es' s'.\n                              P \\<turnstile> \\<langle>es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>))", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e : T \\<Longrightarrow>\n     (\\<And>l.\n         \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n         \\<Longrightarrow> \\<exists>e' s'.\n                              P \\<turnstile> \\<langle>e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>)) &&&\n    (P,E,h \\<turnstile> es [:] Ts \\<Longrightarrow>\n     (\\<And>l.\n         \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n          \\<not> finals es\\<rbrakk>\n         \\<Longrightarrow> \\<exists>es' s'.\n                              P \\<turnstile> \\<langle>es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>))", "proof (induct rule:WTrt_inducts2)"], ["proof (state)\ngoal (22 subgoals):\n 1. \\<And>C E l.\n       \\<lbrakk>is_class P C; \\<D> (new C) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (new C)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>new C,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e T C l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T; is_class P C; \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast C e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Cast C e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Val v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E v T l.\n       \\<lbrakk>E v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Var v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e\\<^sub>1 e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>Var V,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>V:=e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>1,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> C has F:T in D;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T\\<^sub>2 \\<le> T;\n         \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 22 subgoals...", "case WTrtNew"], ["proof (state)\nthis:\n  is_class P C_\n  \\<D> (new C_) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (new C_)\n\ngoal (22 subgoals):\n 1. \\<And>C E l.\n       \\<lbrakk>is_class P C; \\<D> (new C) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (new C)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>new C,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e T C l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T; is_class P C; \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast C e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Cast C e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Val v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E v T l.\n       \\<lbrakk>E v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Var v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e\\<^sub>1 e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>Var V,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>V:=e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>1,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> C has F:T in D;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T\\<^sub>2 \\<le> T;\n         \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 22 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>new C_,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>new C_,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>new C_,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<exists>a. h a = None\""], ["proof (state)\nthis:\n  \\<exists>a. h a = None\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>new C_,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>new C_,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with assms WTrtNew"], ["proof (chain)\npicking this:\n  wwf_J_prog P\n  P \\<turnstile> h \\<surd>\n  is_class P C_\n  \\<D> (new C_) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (new C_)\n  \\<exists>a. h a = None", "show ?thesis"], ["proof (prove)\nusing this:\n  wwf_J_prog P\n  P \\<turnstile> h \\<surd>\n  is_class P C_\n  \\<D> (new C_) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (new C_)\n  \\<exists>a. h a = None\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>new C_,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by (fastforce del:exE intro!:RedNew simp add:new_Addr_def\n                   elim!:wf_Fields_Ex[THEN exE])"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>new C_,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<nexists>a. h a = None \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>new C_,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>a. h a = None \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>new C_,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<not>(\\<exists>a. h a = None)\""], ["proof (state)\nthis:\n  \\<nexists>a. h a = None\n\ngoal (1 subgoal):\n 1. \\<nexists>a. h a = None \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>new C_,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with assms WTrtNew"], ["proof (chain)\npicking this:\n  wwf_J_prog P\n  P \\<turnstile> h \\<surd>\n  is_class P C_\n  \\<D> (new C_) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (new C_)\n  \\<nexists>a. h a = None", "show ?thesis"], ["proof (prove)\nusing this:\n  wwf_J_prog P\n  P \\<turnstile> h \\<surd>\n  is_class P C_\n  \\<D> (new C_) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (new C_)\n  \\<nexists>a. h a = None\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>new C_,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce intro:RedNewFail simp add:new_Addr_def)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>new C_,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>new C_,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (21 subgoals):\n 1. \\<And>E e T C l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T; is_class P C; \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast C e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Cast C e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Val v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E v T l.\n       \\<lbrakk>E v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Var v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e\\<^sub>1 e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>Var V,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>V:=e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>1,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 21 subgoals...", "next"], ["proof (state)\ngoal (21 subgoals):\n 1. \\<And>E e T C l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T; is_class P C; \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast C e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Cast C e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Val v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E v T l.\n       \\<lbrakk>E v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Var v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e\\<^sub>1 e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>Var V,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>V:=e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>1,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 21 subgoals...", "case (WTrtCast E e T C)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : T\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  is_refT T\n  is_class P C\n  \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Cast C e)\n\ngoal (21 subgoals):\n 1. \\<And>E e T C l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T; is_class P C; \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast C e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Cast C e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Val v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E v T l.\n       \\<lbrakk>E v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Var v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e\\<^sub>1 e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>Var V,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>V:=e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>1,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 21 subgoals...", "have wte: \"P,E,h \\<turnstile> e : T\" and ref: \"is_refT T\"\n   and IH: \"\\<And>l. \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n                \\<Longrightarrow> \\<exists>e' s'. P \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',s'\\<rangle>\"\n   and D: \"\\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e : T &&& is_refT T) &&&\n    (\\<And>l.\n        \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>e,\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>) &&&\n    \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>", "by fact+"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : T\n  is_refT T\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>\n\ngoal (21 subgoals):\n 1. \\<And>E e T C l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T; is_class P C; \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast C e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Cast C e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Val v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E v T l.\n       \\<lbrakk>E v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Var v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e\\<^sub>1 e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>Var V,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>V:=e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>1,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 21 subgoals...", "from D"], ["proof (chain)\npicking this:\n  \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>", "have De: \"\\<D> e \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\nusing this:\n  \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> e \\<lfloor>dom l\\<rfloor>", "by auto"], ["proof (state)\nthis:\n  \\<D> e \\<lfloor>dom l\\<rfloor>\n\ngoal (21 subgoals):\n 1. \\<And>E e T C l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T; is_class P C; \\<D> (Cast C e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (Cast C e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Cast C e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Val v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E v T l.\n       \\<lbrakk>E v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Var v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e\\<^sub>1 e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>Var V,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>V:=e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>1,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 21 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with wte ref"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : T\n  is_refT T\n  final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : T\n  is_refT T\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof (rule finalRefE)"], ["proof (state)\ngoal (3 subgoals):\n 1. e = null \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<And>a Ca.\n       \\<lbrakk>e = addr a; T = Class Ca\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Cast C e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume \"e = null\""], ["proof (state)\nthis:\n  e = null\n\ngoal (3 subgoals):\n 1. e = null \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<And>a Ca.\n       \\<lbrakk>e = addr a; T = Class Ca\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Cast C e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "thus ?case"], ["proof (prove)\nusing this:\n  e = null\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce intro:RedCastNull)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>a Ca.\n       \\<lbrakk>e = addr a; T = Class Ca\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Cast C e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a Ca.\n       \\<lbrakk>e = addr a; T = Class Ca\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Cast C e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix D a"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a Ca.\n       \\<lbrakk>e = addr a; T = Class Ca\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Cast C e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume A: \"T = Class D\" \"e = addr a\""], ["proof (state)\nthis:\n  T = Class D\n  e = addr a\n\ngoal (2 subgoals):\n 1. \\<And>a Ca.\n       \\<lbrakk>e = addr a; T = Class Ca\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Cast C e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"P \\<turnstile> D \\<preceq>\\<^sup>* C\""], ["proof (state)\nthis:\n  P \\<turnstile> D \\<preceq>\\<^sup>* C\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  P \\<turnstile> D \\<preceq>\\<^sup>* C\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "using A wte"], ["proof (prove)\nusing this:\n  P \\<turnstile> D \\<preceq>\\<^sup>* C\n  T = Class D\n  e = addr a\n  P,E,h \\<turnstile> e : T\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce intro:RedCast)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. (D, C) \\<notin> (subcls1 P)\\<^sup>* \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (D, C) \\<notin> (subcls1 P)\\<^sup>* \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<not> P \\<turnstile> D \\<preceq>\\<^sup>* C\""], ["proof (state)\nthis:\n  (D, C) \\<notin> (subcls1 P)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (D, C) \\<notin> (subcls1 P)\\<^sup>* \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  (D, C) \\<notin> (subcls1 P)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "using A wte"], ["proof (prove)\nusing this:\n  (D, C) \\<notin> (subcls1 P)\\<^sup>*\n  T = Class D\n  e = addr a\n  P,E,h \\<turnstile> e : T\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(force intro!:RedCastFail)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume \"e = Throw a\""], ["proof (state)\nthis:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(blast intro!:red_reds.CastThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume nf: \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "from IH[OF De nf]"], ["proof (chain)\npicking this:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by (blast intro:CastRed)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>Cast C e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (20 subgoals):\n 1. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Val v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E v T l.\n       \\<lbrakk>E v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Var v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>Var V,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>V:=e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e C M Ts T pns body D es Ts' l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n         P,E,h \\<turnstile> es [:] Ts';\n         \\<And>l.\n            \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n             \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P \\<turnstile> \\<langle>es,\n           (h, l)\\<rangle> [\\<rightarrow>]\n          \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> Ts' [\\<le>] Ts;\n         \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>e\\<bullet>M(es),\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 20 subgoals...", "next"], ["proof (state)\ngoal (20 subgoals):\n 1. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Val v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E v T l.\n       \\<lbrakk>E v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Var v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>Var V,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>V:=e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e C M Ts T pns body D es Ts' l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n         P,E,h \\<turnstile> es [:] Ts';\n         \\<And>l.\n            \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n             \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P \\<turnstile> \\<langle>es,\n           (h, l)\\<rangle> [\\<rightarrow>]\n          \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> Ts' [\\<le>] Ts;\n         \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>e\\<bullet>M(es),\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 20 subgoals...", "case WTrtVal"], ["proof (state)\nthis:\n  typeof\\<^bsub>h\\<^esub> v_ = \\<lfloor>T_\\<rfloor>\n  \\<D> (Val v_) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Val v_)\n\ngoal (20 subgoals):\n 1. \\<And>v T E l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Val v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Val v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Val v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E v T l.\n       \\<lbrakk>E v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Var v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>Var V,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>V:=e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e C M Ts T pns body D es Ts' l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n         P,E,h \\<turnstile> es [:] Ts';\n         \\<And>l.\n            \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n             \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P \\<turnstile> \\<langle>es,\n           (h, l)\\<rangle> [\\<rightarrow>]\n          \\<langle>es',s'\\<rangle>;\n         P \\<turnstile> Ts' [\\<le>] Ts;\n         \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>e\\<bullet>M(es),\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 20 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  typeof\\<^bsub>h\\<^esub> v_ = \\<lfloor>T_\\<rfloor>\n  \\<D> (Val v_) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Val v_)\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Val v_,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(simp add:final_def)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>Val v_,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (19 subgoals):\n 1. \\<And>E v T l.\n       \\<lbrakk>E v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Var v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e\\<^sub>1 e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>Var V,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>V:=e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e es Ts M T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> es [:] Ts;\n         \\<And>l.\n            \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n             \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P \\<turnstile> \\<langle>es,\n           (h, l)\\<rangle> [\\<rightarrow>]\n          \\<langle>es',s'\\<rangle>;\n         \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>e\\<bullet>M(es),\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 19 subgoals...", "next"], ["proof (state)\ngoal (19 subgoals):\n 1. \\<And>E v T l.\n       \\<lbrakk>E v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Var v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e\\<^sub>1 e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>Var V,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>V:=e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e es Ts M T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> es [:] Ts;\n         \\<And>l.\n            \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n             \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P \\<turnstile> \\<langle>es,\n           (h, l)\\<rangle> [\\<rightarrow>]\n          \\<langle>es',s'\\<rangle>;\n         \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>e\\<bullet>M(es),\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 19 subgoals...", "case WTrtVar"], ["proof (state)\nthis:\n  E_ v_ = \\<lfloor>T_\\<rfloor>\n  \\<D> (Var v_) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Var v_)\n\ngoal (19 subgoals):\n 1. \\<And>E v T l.\n       \\<lbrakk>E v = \\<lfloor>T\\<rfloor>;\n        \\<D> (Var v) \\<lfloor>dom l\\<rfloor>; \\<not> final (Var v)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>Var v,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e\\<^sub>1 e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>Var V,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>V:=e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e es Ts M T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : NT;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> es [:] Ts;\n         \\<And>l.\n            \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n             \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P \\<turnstile> \\<langle>es,\n           (h, l)\\<rangle> [\\<rightarrow>]\n          \\<langle>es',s'\\<rangle>;\n         \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>e\\<bullet>M(es),\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 19 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  E_ v_ = \\<lfloor>T_\\<rfloor>\n  \\<D> (Var v_) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (Var v_)\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>Var v_,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce intro:RedVar simp:hyper_isin_def)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>Var v_,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (18 subgoals):\n 1. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e\\<^sub>1 e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>Var V,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>V:=e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E l.\n        \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s'.\n                             P \\<turnstile> \\<langle>[],\n       (h, l)\\<rangle> [\\<rightarrow>]\n      \\<langle>es',s'\\<rangle>\nA total of 18 subgoals...", "next"], ["proof (state)\ngoal (18 subgoals):\n 1. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e\\<^sub>1 e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>Var V,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>V:=e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E l.\n        \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s'.\n                             P \\<turnstile> \\<langle>[],\n       (h, l)\\<rangle> [\\<rightarrow>]\n      \\<langle>es',s'\\<rangle>\nA total of 18 subgoals...", "case (WTrtBinOpEq E e1 T1 e2 T2)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e1 \\<guillemotleft>Eq\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>Eq\\<guillemotright> e2)\n\ngoal (18 subgoals):\n 1. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Eq\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e\\<^sub>1 e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>Var V,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>V:=e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E l.\n        \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s'.\n                             P \\<turnstile> \\<langle>[],\n       (h, l)\\<rangle> [\\<rightarrow>]\n      \\<langle>es',s'\\<rangle>\nA total of 18 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"final e1\""], ["proof (state)\nthis:\n  final e1\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e1 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix v1"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e1 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume [simp]: \"e1 = Val v1\""], ["proof (state)\nthis:\n  e1 = Val v1\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e1 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"final e2\""], ["proof (state)\nthis:\n  final e2\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix v2"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume \"e2 = Val v2\""], ["proof (state)\nthis:\n  e2 = Val v2\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e2 = Val v2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "using WTrtBinOpEq"], ["proof (prove)\nusing this:\n  e2 = Val v2\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e1 \\<guillemotleft>Eq\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>Eq\\<guillemotright> e2)\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce intro:RedBinOp)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume \"e2 = Throw a\""], ["proof (state)\nthis:\n  e2 = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e2 = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(auto intro:red_reds.BinOpThrow2)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e2\""], ["proof (state)\nthis:\n  \\<not> final e2\n\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtBinOpEq"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e1 \\<guillemotleft>Eq\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>Eq\\<guillemotright> e2)\n  \\<not> final e2", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e1 \\<guillemotleft>Eq\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>Eq\\<guillemotright> e2)\n  \\<not> final e2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by simp (fast intro!:BinOpRed2)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume \"e1 = Throw a\""], ["proof (state)\nthis:\n  e1 = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e1 = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by simp (fast intro:red_reds.BinOpThrow1)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e1\""], ["proof (state)\nthis:\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtBinOpEq"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e1 \\<guillemotleft>Eq\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>Eq\\<guillemotright> e2)\n  \\<not> final e1", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e1 \\<guillemotleft>Eq\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>Eq\\<guillemotright> e2)\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by simp (fast intro:BinOpRed1)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1 \\<guillemotleft>Eq\\<guillemotright> e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (17 subgoals):\n 1. \\<And>E e\\<^sub>1 e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>Var V,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>V:=e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 10. \\<And>E e T es Ts l.\n        \\<lbrakk>P,E,h \\<turnstile> e : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> es [:] Ts;\n         \\<And>l.\n            \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n             \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P \\<turnstile> \\<langle>es,\n           (h, l)\\<rangle> [\\<rightarrow>]\n          \\<langle>es',s'\\<rangle>;\n         \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n         \\<not> finals (e # es)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s'.\n                             P \\<turnstile> \\<langle>e # es,\n       (h, l)\\<rangle> [\\<rightarrow>]\n      \\<langle>es',s'\\<rangle>\nA total of 17 subgoals...", "next"], ["proof (state)\ngoal (17 subgoals):\n 1. \\<And>E e\\<^sub>1 e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>Var V,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>V:=e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 10. \\<And>E e T es Ts l.\n        \\<lbrakk>P,E,h \\<turnstile> e : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> es [:] Ts;\n         \\<And>l.\n            \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n             \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P \\<turnstile> \\<langle>es,\n           (h, l)\\<rangle> [\\<rightarrow>]\n          \\<langle>es',s'\\<rangle>;\n         \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n         \\<not> finals (e # es)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s'.\n                             P \\<turnstile> \\<langle>e # es,\n       (h, l)\\<rangle> [\\<rightarrow>]\n      \\<langle>es',s'\\<rangle>\nA total of 17 subgoals...", "case (WTrtBinOpAdd E e1 e2)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e1 : Integer\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : Integer\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e1 \\<guillemotleft>Add\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>Add\\<guillemotright> e2)\n\ngoal (17 subgoals):\n 1. \\<And>E e\\<^sub>1 e\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : Integer;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom l\\<rfloor>;\n        \\<not> final\n                (e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1 \\<guillemotleft>Add\\<guillemotright> e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>Var V,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>V:=e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 10. \\<And>E e T es Ts l.\n        \\<lbrakk>P,E,h \\<turnstile> e : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> es [:] Ts;\n         \\<And>l.\n            \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n             \\<not> finals es\\<rbrakk>\n            \\<Longrightarrow> \\<exists>es' s'.\n                                 P \\<turnstile> \\<langle>es,\n           (h, l)\\<rangle> [\\<rightarrow>]\n          \\<langle>es',s'\\<rangle>;\n         \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n         \\<not> finals (e # es)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s'.\n                             P \\<turnstile> \\<langle>e # es,\n       (h, l)\\<rangle> [\\<rightarrow>]\n      \\<langle>es',s'\\<rangle>\nA total of 17 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"final e1\""], ["proof (state)\nthis:\n  final e1\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e1 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix v1"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e1 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume [simp]: \"e1 = Val v1\""], ["proof (state)\nthis:\n  e1 = Val v1\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e1 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"final e2\""], ["proof (state)\nthis:\n  final e2\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix v2"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume \"e2 = Val v2\""], ["proof (state)\nthis:\n  e2 = Val v2\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e2 = Val v2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "using WTrtBinOpAdd"], ["proof (prove)\nusing this:\n  e2 = Val v2\n  P,E,h \\<turnstile> e1 : Integer\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : Integer\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e1 \\<guillemotleft>Add\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>Add\\<guillemotright> e2)\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce intro:RedBinOp)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume \"e2 = Throw a\""], ["proof (state)\nthis:\n  e2 = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e2 = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(auto intro:red_reds.BinOpThrow2)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e2\""], ["proof (state)\nthis:\n  \\<not> final e2\n\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtBinOpAdd"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : Integer\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : Integer\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e1 \\<guillemotleft>Add\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>Add\\<guillemotright> e2)\n  \\<not> final e2", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : Integer\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : Integer\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e1 \\<guillemotleft>Add\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>Add\\<guillemotright> e2)\n  \\<not> final e2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by simp (fast intro!:BinOpRed2)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume \"e1 = Throw a\""], ["proof (state)\nthis:\n  e1 = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e1 = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by simp (fast intro:red_reds.BinOpThrow1)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e1\""], ["proof (state)\nthis:\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtBinOpAdd"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : Integer\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : Integer\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e1 \\<guillemotleft>Add\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>Add\\<guillemotright> e2)\n  \\<not> final e1", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : Integer\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : Integer\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e1 \\<guillemotleft>Add\\<guillemotright> e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1 \\<guillemotleft>Add\\<guillemotright> e2)\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by simp (fast intro:BinOpRed1)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1 \\<guillemotleft>Add\\<guillemotright> e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (16 subgoals):\n 1. \\<And>E V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>Var V,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>V:=e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 9. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 10. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n        \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n         P \\<turnstile> T\\<^sub>1 \\<le> T;\n         P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n         \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n       e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 16 subgoals...", "next"], ["proof (state)\ngoal (16 subgoals):\n 1. \\<And>E V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>Var V,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>V:=e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 9. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 10. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n        \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n         P \\<turnstile> T\\<^sub>1 \\<le> T;\n         P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n         \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n       e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 16 subgoals...", "case (WTrtLAss E V T e T')"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> Var V : T\n  \\<lbrakk>\\<D> (Var V) \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final (Var V)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>Var V,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (V:=e)\n\ngoal (16 subgoals):\n 1. \\<And>E V T e T' l.\n       \\<lbrakk>P,E,h \\<turnstile> Var V : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> (Var V) \\<lfloor>dom l\\<rfloor>;\n            \\<not> final (Var V)\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>Var V,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T' \\<le> T; \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (V:=e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>V:=e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 9. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 10. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n        \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n         P \\<turnstile> T\\<^sub>1 \\<le> T;\n         P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n         \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n       e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 16 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtLAss"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> Var V : T\n  \\<lbrakk>\\<D> (Var V) \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final (Var V)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>Var V,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (V:=e)\n  final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> Var V : T\n  \\<lbrakk>\\<D> (Var V) \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final (Var V)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>Var V,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (V:=e)\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(auto simp:final_def intro!:RedLAss red_reds.LAssThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtLAss"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> Var V : T\n  \\<lbrakk>\\<D> (Var V) \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final (Var V)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>Var V,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (V:=e)\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> Var V : T\n  \\<lbrakk>\\<D> (Var V) \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final (Var V)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>Var V,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> T' \\<le> T\n  \\<D> (V:=e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (V:=e)\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by simp (fast intro:LAssRed)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>V:=e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (15 subgoals):\n 1. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 8. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 9. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E V T e T' l.\n        \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n         \\<not> final {V:T; e}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>{V:T; e},\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 15 subgoals...", "next"], ["proof (state)\ngoal (15 subgoals):\n 1. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 8. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 9. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E V T e T' l.\n        \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n         \\<not> final {V:T; e}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>{V:T; e},\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 15 subgoals...", "case (WTrtFAcc E e C F T D)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : Class C\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> C has F:T in D\n  \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{D})\n\ngoal (15 subgoals):\n 1. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 8. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 9. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E V T e T' l.\n        \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n         \\<not> final {V:T; e}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>{V:T; e},\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 15 subgoals...", "have wte: \"P,E,h \\<turnstile> e : Class C\"\n   and field: \"P \\<turnstile> C has F:T in D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h \\<turnstile> e : Class C &&& P \\<turnstile> C has F:T in D", "by fact+"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : Class C\n  P \\<turnstile> C has F:T in D\n\ngoal (15 subgoals):\n 1. \\<And>E e C F T D l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 8. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 9. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E V T e T' l.\n        \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n         \\<not> final {V:T; e}\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>{V:T; e},\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 15 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with wte"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : Class C\n  final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : Class C\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof (rule final_addrE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       e = addr a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>F{D},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>F{D},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       e = addr a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>F{D},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>F{D},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume e: \"e = addr a\""], ["proof (state)\nthis:\n  e = addr a\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       e = addr a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>F{D},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>F{D},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "with wte"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : Class C\n  e = addr a", "obtain fs where hp: \"h a = Some(C,fs)\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : Class C\n  e = addr a\n\ngoal (1 subgoal):\n 1. (\\<And>fs.\n        h a = \\<lfloor>(C, fs)\\<rfloor> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  h a = \\<lfloor>(C, fs)\\<rfloor>\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       e = addr a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>F{D},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>F{D},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "with hconf"], ["proof (chain)\npicking this:\n  P \\<turnstile> h \\<surd>\n  h a = \\<lfloor>(C, fs)\\<rfloor>", "have \"P,h \\<turnstile> (C,fs) \\<surd>\""], ["proof (prove)\nusing this:\n  P \\<turnstile> h \\<surd>\n  h a = \\<lfloor>(C, fs)\\<rfloor>\n\ngoal (1 subgoal):\n 1. P,h \\<turnstile> (C, fs) \\<surd>", "using hconf_def"], ["proof (prove)\nusing this:\n  P \\<turnstile> h \\<surd>\n  h a = \\<lfloor>(C, fs)\\<rfloor>\n  ?P \\<turnstile> ?h \\<surd> \\<equiv>\n  (\\<forall>a obj.\n      ?h a = \\<lfloor>obj\\<rfloor> \\<longrightarrow>\n      ?P,?h \\<turnstile> obj \\<surd>) \\<and>\n  preallocated ?h\n\ngoal (1 subgoal):\n 1. P,h \\<turnstile> (C, fs) \\<surd>", "by fastforce"], ["proof (state)\nthis:\n  P,h \\<turnstile> (C, fs) \\<surd>\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       e = addr a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>F{D},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>F{D},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  P,h \\<turnstile> (C, fs) \\<surd>", "obtain v where \"fs(F,D) = Some v\""], ["proof (prove)\nusing this:\n  P,h \\<turnstile> (C, fs) \\<surd>\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        fs (F, D) = \\<lfloor>v\\<rfloor> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using field"], ["proof (prove)\nusing this:\n  P,h \\<turnstile> (C, fs) \\<surd>\n  P \\<turnstile> C has F:T in D\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        fs (F, D) = \\<lfloor>v\\<rfloor> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by(fastforce dest:has_fields_fun simp:oconf_def has_field_def)"], ["proof (state)\nthis:\n  fs (F, D) = \\<lfloor>v\\<rfloor>\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       e = addr a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>F{D},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>F{D},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "with hp e"], ["proof (chain)\npicking this:\n  h a = \\<lfloor>(C, fs)\\<rfloor>\n  e = addr a\n  fs (F, D) = \\<lfloor>v\\<rfloor>", "show ?thesis"], ["proof (prove)\nusing this:\n  h a = \\<lfloor>(C, fs)\\<rfloor>\n  e = addr a\n  fs (F, D) = \\<lfloor>v\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce intro:RedFAcc)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>F{D},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>F{D},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>F{D},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume \"e = Throw a\""], ["proof (state)\nthis:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>F{D},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce intro:red_reds.FAccThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtFAcc"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : Class C\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> C has F:T in D\n  \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{D})\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : Class C\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> C has F:T in D\n  \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{D})\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce intro!:FAccRed)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (14 subgoals):\n 1. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 7. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 8. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>1,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 14 subgoals...", "next"], ["proof (state)\ngoal (14 subgoals):\n 1. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 7. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 8. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>1,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 14 subgoals...", "case (WTrtFAccNT E e F D T)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{D})\n\ngoal (14 subgoals):\n 1. \\<And>E e F D T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>F{D})\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>F{D},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 7. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 8. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>1,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 14 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"final e\"  \\<comment> \\<open>@{term e} is @{term null} or @{term throw}\\<close>"], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtFAccNT"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{D})\n  final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{D})\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce simp:final_def intro: RedFAccNull red_reds.FAccThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\" \\<comment> \\<open>@{term e} reduces by IH\\<close>"], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtFAccNT"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{D})\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e\\<bullet>F{D}) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>F{D})\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by simp (fast intro:FAccRed)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>F{D},(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (13 subgoals):\n 1. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 6. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 7. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>1,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n         P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n         P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n         T = T\\<^sub>2;\n         P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n         T = T\\<^sub>1;\n         \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n       else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 13 subgoals...", "next"], ["proof (state)\ngoal (13 subgoals):\n 1. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 6. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 7. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>1,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n         P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n         P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n         T = T\\<^sub>2;\n         P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n         T = T\\<^sub>1;\n         \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n       else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 13 subgoals...", "case (WTrtFAss E e1 C F T D e2 T2)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e1 : Class C\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> C has F:T in D\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> T2 \\<le> T\n  \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>F{D} := e2)\n\ngoal (13 subgoals):\n 1. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 6. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 7. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>1,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n         P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n         P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n         T = T\\<^sub>2;\n         P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n         T = T\\<^sub>1;\n         \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n       else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 13 subgoals...", "have wte1: \"P,E,h \\<turnstile> e1 : Class C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h \\<turnstile> e1 : Class C", "by fact"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e1 : Class C\n\ngoal (13 subgoals):\n 1. \\<And>E e\\<^sub>1 C F T D e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C has F:T in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>2 \\<le> T;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 6. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 7. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>1,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n         P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n         P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n         T = T\\<^sub>2;\n         P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n         T = T\\<^sub>1;\n         \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n       else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 13 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"final e1\""], ["proof (state)\nthis:\n  final e1\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with wte1"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : Class C\n  final e1", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : Class C\n  final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof (rule final_addrE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       e1 = addr a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       e1 = addr a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume e1: \"e1 = addr a\""], ["proof (state)\nthis:\n  e1 = addr a\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       e1 = addr a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"final e2\""], ["proof (state)\nthis:\n  final e2\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume \"e2 = Val v\""], ["proof (state)\nthis:\n  e2 = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e2 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e2 = Val v\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "using e1 wte1"], ["proof (prove)\nusing this:\n  e2 = Val v\n  e1 = addr a\n  P,E,h \\<turnstile> e1 : Class C\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce intro:RedFAss)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume \"e2 = Throw a\""], ["proof (state)\nthis:\n  e2 = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e2 = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "using e1"], ["proof (prove)\nusing this:\n  e2 = Throw a\n  e1 = addr a__\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce intro:red_reds.FAssThrow2)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e2\""], ["proof (state)\nthis:\n  \\<not> final e2\n\ngoal (1 subgoal):\n 1. \\<not> final e2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtFAss e1"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : Class C\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> C has F:T in D\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> T2 \\<le> T\n  \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>F{D} := e2)\n  e1 = addr a\n  \\<not> final e2", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : Class C\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> C has F:T in D\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> T2 \\<le> T\n  \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>F{D} := e2)\n  e1 = addr a\n  \\<not> final e2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by simp (fast intro!:FAssRed2)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume \"e1 = Throw a\""], ["proof (state)\nthis:\n  e1 = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e1 = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce intro:red_reds.FAssThrow1)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e1\""], ["proof (state)\nthis:\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtFAss"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : Class C\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> C has F:T in D\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> T2 \\<le> T\n  \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>F{D} := e2)\n  \\<not> final e1", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : Class C\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> C has F:T in D\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> T2 \\<le> T\n  \\<D> (e1\\<bullet>F{D} := e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1\\<bullet>F{D} := e2)\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by simp (blast intro!:FAssRed1)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1\\<bullet>F{D} := e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (12 subgoals):\n 1. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 5. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 6. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e c T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> c : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>c,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (while (e) c)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>while (e) c,\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 12 subgoals...", "next"], ["proof (state)\ngoal (12 subgoals):\n 1. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 5. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 6. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e c T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> c : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>c,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (while (e) c)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>while (e) c,\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 12 subgoals...", "case (WTrtFAssNT E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e\\<^sub>1 : NT\n  \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e\\<^sub>1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e\\<^sub>2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\n\ngoal (12 subgoals):\n 1. \\<And>E e\\<^sub>1 e\\<^sub>2 T\\<^sub>2 F D l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 5. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 6. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e c T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E,h \\<turnstile> c : T;\n         \\<And>l.\n            \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>c,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (while (e) c)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>while (e) c,\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 12 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume e1: \"final e\\<^sub>1\"  \\<comment> \\<open>@{term e\\<^sub>1} is @{term null} or @{term throw}\\<close>"], ["proof (state)\nthis:\n  final e\\<^sub>1\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"final e\\<^sub>2\"  \\<comment> \\<open>@{term e\\<^sub>2} is @{term Val} or @{term throw}\\<close>"], ["proof (state)\nthis:\n  final e\\<^sub>2\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtFAssNT e1"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e\\<^sub>1 : NT\n  \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e\\<^sub>1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e\\<^sub>2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\n  final e\\<^sub>1\n  final e\\<^sub>2", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e\\<^sub>1 : NT\n  \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e\\<^sub>1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e\\<^sub>2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\n  final e\\<^sub>1\n  final e\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce simp:final_def intro: RedFAssNull red_reds.FAssThrow1 red_reds.FAssThrow2)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\\<^sub>2\" \\<comment> \\<open>@{term e\\<^sub>2} reduces by IH\\<close>"], ["proof (state)\nthis:\n  \\<not> final e\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtFAssNT e1"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e\\<^sub>1 : NT\n  \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e\\<^sub>1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e\\<^sub>2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\n  final e\\<^sub>1\n  \\<not> final e\\<^sub>2", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e\\<^sub>1 : NT\n  \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e\\<^sub>1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e\\<^sub>2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\n  final e\\<^sub>1\n  \\<not> final e\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by (fastforce  simp:final_def intro!:red_reds.FAssRed2 red_reds.FAssThrow1)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\\<^sub>1\" \\<comment> \\<open>@{term e\\<^sub>1} reduces by IH\\<close>"], ["proof (state)\nthis:\n  \\<not> final e\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtFAssNT"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e\\<^sub>1 : NT\n  \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e\\<^sub>1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e\\<^sub>2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\n  \\<not> final e\\<^sub>1", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e\\<^sub>1 : NT\n  \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e\\<^sub>1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e\\<^sub>2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2)\n  \\<not> final e\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by (fastforce intro:FAssRed1)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<^sub>1\\<bullet>F{D} := e\\<^sub>2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (11 subgoals):\n 1. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 4. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 5. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e T\\<^sub>r T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (throw e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>throw e,\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 11 subgoals...", "next"], ["proof (state)\ngoal (11 subgoals):\n 1. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 4. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 5. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e T\\<^sub>r T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (throw e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>throw e,\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 11 subgoals...", "case (WTrtCall E e C M Ts T pns body D es Ts')"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : Class C\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D\n  P,E,h \\<turnstile> es [:] Ts'\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P \\<turnstile> \\<langle>es,\n (h, ?l)\\<rangle> [\\<rightarrow>]\n\\<langle>es',s'\\<rangle>\n  P \\<turnstile> Ts' [\\<le>] Ts\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n\ngoal (11 subgoals):\n 1. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 4. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 5. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e T\\<^sub>r T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (throw e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>throw e,\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 11 subgoals...", "have wte: \"P,E,h \\<turnstile> e : Class C\"\n   and \"method\": \"P \\<turnstile> C sees M:Ts\\<rightarrow>T = (pns,body) in D\"\n   and wtes: \"P,E,h \\<turnstile> es [:] Ts'\"and sub: \"P \\<turnstile> Ts' [\\<le>] Ts\"\n   and IHes: \"\\<And>l.\n             \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n             \\<Longrightarrow> \\<exists>es' s'. P \\<turnstile> \\<langle>es,(h,l)\\<rangle> [\\<rightarrow>] \\<langle>es',s'\\<rangle>\"\n   and D: \"\\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P,E,h \\<turnstile> e : Class C &&&\n     P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D &&&\n     P,E,h \\<turnstile> es [:] Ts') &&&\n    P \\<turnstile> Ts' [\\<le>] Ts &&&\n    (\\<And>l.\n        \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n        \\<Longrightarrow> \\<exists>es' s'.\n                             P \\<turnstile> \\<langle>es,\n       (h, l)\\<rangle> [\\<rightarrow>]\n      \\<langle>es',s'\\<rangle>) &&&\n    \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>", "by fact+"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : Class C\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D\n  P,E,h \\<turnstile> es [:] Ts'\n  P \\<turnstile> Ts' [\\<le>] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P \\<turnstile> \\<langle>es,\n (h, ?l)\\<rangle> [\\<rightarrow>]\n\\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n\ngoal (11 subgoals):\n 1. \\<And>E e C M Ts T pns body D es Ts' l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Class C;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        P \\<turnstile> Ts' [\\<le>] Ts;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 4. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 5. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e T\\<^sub>r T l.\n        \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n         \\<And>l.\n            \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (throw e)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>throw e,\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>\nA total of 11 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with wte"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : Class C\n  final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : Class C\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof (rule final_addrE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       e = addr a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>M(es),\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>M(es),\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       e = addr a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>M(es),\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>M(es),\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume e_addr: \"e = addr a\""], ["proof (state)\nthis:\n  e = addr a\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       e = addr a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>M(es),\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>M(es),\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume es: \"\\<exists>vs. es = map Val vs\""], ["proof (state)\nthis:\n  \\<exists>vs. es = map Val vs\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "from wte e_addr"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : Class C\n  e = addr a", "obtain fs where ha: \"h a = Some(C,fs)\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : Class C\n  e = addr a\n\ngoal (1 subgoal):\n 1. (\\<And>fs.\n        h a = \\<lfloor>(C, fs)\\<rfloor> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  h a = \\<lfloor>(C, fs)\\<rfloor>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "using e_addr ha \"method\" WTrts_same_length[OF wtes] sub es sees_wf_mdecl[OF wf \"method\"]"], ["proof (prove)\nusing this:\n  e = addr a\n  h a = \\<lfloor>(C, fs)\\<rfloor>\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D\n  length es = length Ts'\n  P \\<turnstile> Ts' [\\<le>] Ts\n  \\<exists>vs. es = map Val vs\n  wf_mdecl wwf_J_mdecl P D (M, Ts, T, pns, body)\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by (fastforce intro!: RedCall simp:list_all2_iff wf_mdecl_def)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<not>(\\<exists>vs. es = map Val vs)\""], ["proof (state)\nthis:\n  \\<nexists>vs. es = map Val vs\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "hence not_all_Val: \"\\<not>(\\<forall>e \\<in> set es. \\<exists>v. e = Val v)\""], ["proof (prove)\nusing this:\n  \\<nexists>vs. es = map Val vs\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>e\\<in>set es. \\<exists>v. e = Val v)", "by(simp add:ex_map_conv)"], ["proof (state)\nthis:\n  \\<not> (\\<forall>e\\<in>set es. \\<exists>v. e = Val v)\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "let ?ves = \"takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "let ?rest = \"dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "let ?ex = \"hd ?rest\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "let ?rst = \"tl ?rest\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "from not_all_Val"], ["proof (chain)\npicking this:\n  \\<not> (\\<forall>e\\<in>set es. \\<exists>v. e = Val v)", "have nonempty: \"?rest \\<noteq> []\""], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>e\\<in>set es. \\<exists>v. e = Val v)\n\ngoal (1 subgoal):\n 1. dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es \\<noteq> []", "by auto"], ["proof (state)\nthis:\n  dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es \\<noteq> []\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "hence es: \"es = ?ves @ ?ex # ?rst\""], ["proof (prove)\nusing this:\n  dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es \\<noteq> []\n\ngoal (1 subgoal):\n 1. es =\n    takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n    hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)", "by simp"], ["proof (state)\nthis:\n  es =\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n  hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n  tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "have \"\\<forall>e \\<in> set ?ves. \\<exists>v. e = Val v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>e\\<in>set (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es).\n       \\<exists>v. e = Val v", "by(fastforce dest:set_takeWhileD)"], ["proof (state)\nthis:\n  \\<forall>e\\<in>set (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es).\n     \\<exists>v. e = Val v\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  \\<forall>e\\<in>set (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es).\n     \\<exists>v. e = Val v", "obtain vs where ves: \"?ves = map Val vs\""], ["proof (prove)\nusing this:\n  \\<forall>e\\<in>set (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es).\n     \\<exists>v. e = Val v\n\ngoal (1 subgoal):\n 1. (\\<And>vs.\n        takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es =\n        map Val vs \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using ex_map_conv"], ["proof (prove)\nusing this:\n  \\<forall>e\\<in>set (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es).\n     \\<exists>v. e = Val v\n  (\\<exists>xs. ?ys = map ?f xs) =\n  (\\<forall>y\\<in>set ?ys. \\<exists>x. y = ?f x)\n\ngoal (1 subgoal):\n 1. (\\<And>vs.\n        takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es =\n        map Val vs \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es = map Val vs\n\ngoal (1 subgoal):\n 1. \\<nexists>vs. es = map Val vs \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"final ?ex\""], ["proof (state)\nthis:\n  final (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "moreover"], ["proof (state)\nthis:\n  final (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "from nonempty"], ["proof (chain)\npicking this:\n  dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es \\<noteq> []", "have \"\\<not>(\\<exists>v. ?ex = Val v)\""], ["proof (prove)\nusing this:\n  dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es \\<noteq> []\n\ngoal (1 subgoal):\n 1. \\<nexists>v.\n       hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Val v", "by(auto simp:neq_Nil_conv simp del:dropWhile_eq_Nil_conv)\n              (simp add:dropWhile_eq_Cons_conv)"], ["proof (state)\nthis:\n  \\<nexists>v. hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Val v\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  final (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n  \\<nexists>v. hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Val v", "obtain b where ex_Throw: \"?ex = Throw b\""], ["proof (prove)\nusing this:\n  final (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n  \\<nexists>v. hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Val v\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) =\n        Throw b \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by(fast elim!:finalE)"], ["proof (state)\nthis:\n  hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Throw b\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "using e_addr es ex_Throw ves"], ["proof (prove)\nusing this:\n  e = addr a\n  es =\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n  hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n  tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)\n  hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) = Throw b\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es = map Val vs\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce intro:CallThrowParams)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume not_fin: \"\\<not> final ?ex\""], ["proof (state)\nthis:\n  \\<not> final (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "have \"finals es = finals(?ves @ ?ex # ?rst)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finals es =\n    finals\n     (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n      hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "using es"], ["proof (prove)\nusing this:\n  es =\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n  hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n  tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)\n\ngoal (1 subgoal):\n 1. finals es =\n    finals\n     (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n      hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "by(rule arg_cong)"], ["proof (state)\nthis:\n  finals es =\n  finals\n   (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n    hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "also"], ["proof (state)\nthis:\n  finals es =\n  finals\n   (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n    hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "have \"\\<dots> = finals(?ex # ?rst)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finals\n     (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n      hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)) =\n    finals\n     (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "using ves"], ["proof (prove)\nusing this:\n  takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es = map Val vs\n\ngoal (1 subgoal):\n 1. finals\n     (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n      hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)) =\n    finals\n     (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "by simp"], ["proof (state)\nthis:\n  finals\n   (takeWhile (\\<lambda>e. \\<exists>v. e = Val v) es @\n    hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es)) =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "finally"], ["proof (chain)\npicking this:\n  finals es =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "have \"finals es = finals(?ex # ?rst)\""], ["proof (prove)\nusing this:\n  finals es =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. finals es =\n    finals\n     (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n      tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))", "."], ["proof (state)\nthis:\n  finals es =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "hence \"\\<not> finals es\""], ["proof (prove)\nusing this:\n  finals es =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n\ngoal (1 subgoal):\n 1. \\<not> finals es", "using not_finals_ConsI[OF not_fin]"], ["proof (prove)\nusing this:\n  finals es =\n  finals\n   (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) #\n    tl (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es))\n  \\<not> finals\n          (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v) es) # ?es)\n\ngoal (1 subgoal):\n 1. \\<not> finals es", "by blast"], ["proof (state)\nthis:\n  \\<not> finals es\n\ngoal (1 subgoal):\n 1. \\<not> final\n            (hd (dropWhile (\\<lambda>e. \\<exists>v. e = Val v)\n                  es)) \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<not> finals es\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "using e_addr D IHes"], ["proof (prove)\nusing this:\n  \\<not> finals es\n  e = addr a\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P \\<turnstile> \\<langle>es,\n (h, ?l)\\<rangle> [\\<rightarrow>]\n\\<langle>es',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce intro!:CallParams)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>M(es),\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>M(es),\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>M(es),\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume \"e = Throw a\""], ["proof (state)\nthis:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>e\\<bullet>M(es),\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "with WTrtCall.prems"], ["proof (chain)\npicking this:\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  e = Throw a", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fast intro!:CallThrowObj)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtCall"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : Class C\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D\n  P,E,h \\<turnstile> es [:] Ts'\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P \\<turnstile> \\<langle>es,\n (h, ?l)\\<rangle> [\\<rightarrow>]\n\\<langle>es',s'\\<rangle>\n  P \\<turnstile> Ts' [\\<le>] Ts\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : Class C\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D\n  P,E,h \\<turnstile> es [:] Ts'\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P \\<turnstile> \\<langle>es,\n (h, ?l)\\<rangle> [\\<rightarrow>]\n\\<langle>es',s'\\<rangle>\n  P \\<turnstile> Ts' [\\<le>] Ts\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by simp (blast intro!:CallObj)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (10 subgoals):\n 1. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 3. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 4. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>1,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n         \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>try e\\<^sub>1\n       catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (10 subgoals):\n 1. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 3. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 4. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>1,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n         \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>try e\\<^sub>1\n       catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>", "case (WTrtCallNT E e es Ts M T)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P \\<turnstile> \\<langle>es,\n (h, ?l)\\<rangle> [\\<rightarrow>]\n\\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n\ngoal (10 subgoals):\n 1. \\<And>E e es Ts M T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : NT;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<bullet>M(es))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<bullet>M(es),\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 3. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 4. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 10. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n        \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>1\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>1,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n         \\<And>l.\n            \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n             \\<not> final e\\<^sub>2\\<rbrakk>\n            \\<Longrightarrow> \\<exists>e' s'.\n                                 P \\<turnstile> \\<langle>e\\<^sub>2,\n           (h, l)\\<rangle> \\<rightarrow>\n          \\<langle>e',s'\\<rangle>;\n         P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n         \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n         \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>try e\\<^sub>1\n       catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "moreover"], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "{"], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume e: \"e = Val v\""], ["proof (state)\nthis:\n  e = Val v\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "hence \"e = null\""], ["proof (prove)\nusing this:\n  e = Val v\n\ngoal (1 subgoal):\n 1. e = null", "using WTrtCallNT"], ["proof (prove)\nusing this:\n  e = Val v\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P \\<turnstile> \\<langle>es,\n (h, ?l)\\<rangle> [\\<rightarrow>]\n\\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n\ngoal (1 subgoal):\n 1. e = null", "by simp"], ["proof (state)\nthis:\n  e = null\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "have ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"finals es\""], ["proof (state)\nthis:\n  finals es\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "moreover"], ["proof (state)\nthis:\n  finals es\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "{"], ["proof (state)\nthis:\n  finals es\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "fix vs"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"es = map Val vs\""], ["proof (state)\nthis:\n  es = map Val vs\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtCallNT e"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P \\<turnstile> \\<langle>es,\n (h, ?l)\\<rangle> [\\<rightarrow>]\n\\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  e = Val v\n  es = map Val vs", "have ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P \\<turnstile> \\<langle>es,\n (h, ?l)\\<rangle> [\\<rightarrow>]\n\\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  e = Val v\n  es = map Val vs\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce intro: RedCallNull)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "}"], ["proof (state)\nthis:\n  es = map Val ?vs2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "moreover"], ["proof (state)\nthis:\n  es = map Val ?vs2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "{"], ["proof (state)\nthis:\n  es = map Val ?vs2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "fix vs a es'"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"es = map Val vs @ Throw a # es'\""], ["proof (state)\nthis:\n  es = map Val vs @ Throw a # es'\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtCallNT e"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P \\<turnstile> \\<langle>es,\n (h, ?l)\\<rangle> [\\<rightarrow>]\n\\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  e = Val v\n  es = map Val vs @ Throw a # es'", "have ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P \\<turnstile> \\<langle>es,\n (h, ?l)\\<rangle> [\\<rightarrow>]\n\\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  e = Val v\n  es = map Val vs @ Throw a # es'\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce intro: CallThrowParams)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "}"], ["proof (state)\nthis:\n  es = map Val ?vs2 @ Throw ?a2 # ?es'2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  finals es\n  es = map Val ?vs2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n  es = map Val ?vs2 @ Throw ?a2 # ?es'2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  finals es\n  es = map Val ?vs2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n  es = map Val ?vs2 @ Throw ?a2 # ?es'2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce simp:finals_def)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> finals es \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> finals es \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<not> finals es\" \\<comment> \\<open>@{term es} reduces by IH\\<close>"], ["proof (state)\nthis:\n  \\<not> finals es\n\ngoal (1 subgoal):\n 1. \\<not> finals es \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtCallNT e"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P \\<turnstile> \\<langle>es,\n (h, ?l)\\<rangle> [\\<rightarrow>]\n\\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  e = Val v\n  \\<not> finals es", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P \\<turnstile> \\<langle>es,\n (h, ?l)\\<rangle> [\\<rightarrow>]\n\\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  e = Val v\n  \\<not> finals es\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce intro: CallParams)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "}"], ["proof (state)\nthis:\n  e = Val ?v2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "moreover"], ["proof (state)\nthis:\n  e = Val ?v2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "{"], ["proof (state)\nthis:\n  e = Val ?v2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"e = Throw a\""], ["proof (state)\nthis:\n  e = Throw a\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtCallNT"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P \\<turnstile> \\<langle>es,\n (h, ?l)\\<rangle> [\\<rightarrow>]\n\\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  e = Throw a", "have ?case"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P \\<turnstile> \\<langle>es,\n (h, ?l)\\<rangle> [\\<rightarrow>]\n\\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce intro: CallThrowObj)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "}"], ["proof (state)\nthis:\n  e = Throw ?a2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  final e\n  e = Val ?v2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n  e = Throw ?a2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\nusing this:\n  final e\n  e = Val ?v2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n  e = Throw ?a2 \\<Longrightarrow>\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce simp:final_def)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\" \\<comment> \\<open>@{term e} reduces by IH\\<close>"], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtCallNT"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P \\<turnstile> \\<langle>es,\n (h, ?l)\\<rangle> [\\<rightarrow>]\n\\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P \\<turnstile> \\<langle>es,\n (h, ?l)\\<rangle> [\\<rightarrow>]\n\\<langle>es',s'\\<rangle>\n  \\<D> (e\\<bullet>M(es)) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e\\<bullet>M(es))\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by (fastforce intro:CallObj)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<bullet>M(es),(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (9 subgoals):\n 1. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 2. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 3. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (9 subgoals):\n 1. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 2. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 3. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "case WTrtNil"], ["proof (state)\nthis:\n  \\<D>s [] \\<lfloor>dom l\\<rfloor>\n  \\<not> finals []\n\ngoal (9 subgoals):\n 1. \\<And>E l.\n       \\<lbrakk>\\<D>s [] \\<lfloor>dom l\\<rfloor>; \\<not> finals []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>[],\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 2. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 3. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 9. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "thus ?case"], ["proof (prove)\nusing this:\n  \\<D>s [] \\<lfloor>dom l\\<rfloor>\n  \\<not> finals []\n\ngoal (1 subgoal):\n 1. \\<exists>es' s'.\n       P \\<turnstile> \\<langle>[],(h, l)\\<rangle> [\\<rightarrow>]\n                      \\<langle>es',s'\\<rangle>", "by simp"], ["proof (state)\nthis:\n  \\<exists>es' s'.\n     P \\<turnstile> \\<langle>[],(h, l)\\<rangle> [\\<rightarrow>]\n                    \\<langle>es',s'\\<rangle>\n\ngoal (8 subgoals):\n 1. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 2. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (8 subgoals):\n 1. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 2. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "case (WTrtCons E e T es Ts)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : T\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> es [:] Ts\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P \\<turnstile> \\<langle>es,\n (h, ?l)\\<rangle> [\\<rightarrow>]\n\\<langle>es',s'\\<rangle>\n  \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>\n  \\<not> finals (e # es)\n\ngoal (8 subgoals):\n 1. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 2. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "have IHe: \"\\<And>l. \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n                \\<Longrightarrow> \\<exists>e' s'. P \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',s'\\<rangle>\"\n   and IHes: \"\\<And>l. \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>; \\<not> finals es\\<rbrakk>\n             \\<Longrightarrow> \\<exists>es' s'. P \\<turnstile> \\<langle>es,(h,l)\\<rangle> [\\<rightarrow>] \\<langle>es',s'\\<rangle>\"\n   and D: \"\\<D>s (e#es) \\<lfloor>dom l\\<rfloor>\" and not_fins: \"\\<not> finals(e # es)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<And>l.\n         \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n         \\<Longrightarrow> \\<exists>e' s'.\n                              P \\<turnstile> \\<langle>e,\n        (h, l)\\<rangle> \\<rightarrow>\n       \\<langle>e',s'\\<rangle>) &&&\n     (\\<And>l.\n         \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n          \\<not> finals es\\<rbrakk>\n         \\<Longrightarrow> \\<exists>es' s'.\n                              P \\<turnstile> \\<langle>es,\n        (h, l)\\<rangle> [\\<rightarrow>]\n       \\<langle>es',s'\\<rangle>)) &&&\n    \\<D>s (e # es) \\<lfloor>dom l\\<rfloor> &&& \\<not> finals (e # es)", "by fact+"], ["proof (state)\nthis:\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<lbrakk>\\<D>s es \\<lfloor>dom ?l\\<rfloor>; \\<not> finals es\\<rbrakk>\n  \\<Longrightarrow> \\<exists>es' s'.\n                       P \\<turnstile> \\<langle>es,\n (h, ?l)\\<rangle> [\\<rightarrow>]\n\\<langle>es',s'\\<rangle>\n  \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>\n  \\<not> finals (e # es)\n\ngoal (8 subgoals):\n 1. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 2. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "have De: \"\\<D> e \\<lfloor>dom l\\<rfloor>\" and Des: \"\\<D>s es (\\<lfloor>dom l\\<rfloor> \\<squnion> \\<A> e)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<D> e \\<lfloor>dom l\\<rfloor> &&&\n    \\<D>s es (\\<lfloor>dom l\\<rfloor> \\<squnion> \\<A> e)", "using D"], ["proof (prove)\nusing this:\n  \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> e \\<lfloor>dom l\\<rfloor> &&&\n    \\<D>s es (\\<lfloor>dom l\\<rfloor> \\<squnion> \\<A> e)", "by auto"], ["proof (state)\nthis:\n  \\<D> e \\<lfloor>dom l\\<rfloor>\n  \\<D>s es (\\<lfloor>dom l\\<rfloor> \\<squnion> \\<A> e)\n\ngoal (8 subgoals):\n 1. \\<And>E e T es Ts l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> es [:] Ts;\n        \\<And>l.\n           \\<lbrakk>\\<D>s es \\<lfloor>dom l\\<rfloor>;\n            \\<not> finals es\\<rbrakk>\n           \\<Longrightarrow> \\<exists>es' s'.\n                                P \\<turnstile> \\<langle>es,\n          (h, l)\\<rangle> [\\<rightarrow>]\n         \\<langle>es',s'\\<rangle>;\n        \\<D>s (e # es) \\<lfloor>dom l\\<rfloor>;\n        \\<not> finals (e # es)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>es' s'.\n                            P \\<turnstile> \\<langle>e # es,\n      (h, l)\\<rangle> [\\<rightarrow>]\n     \\<langle>es',s'\\<rangle>\n 2. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 8. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>es' s'.\n       P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                      \\<langle>es',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>es' s'.\n       P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                      \\<langle>es',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>es' s'.\n       P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                      \\<langle>es',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>es' s'.\n       P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                      \\<langle>es',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>es' s'.\n       P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                      \\<langle>es',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>es' s'.\n       P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                      \\<langle>es',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>es' s'.\n          P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                         \\<langle>es',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>es' s'.\n          P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                         \\<langle>es',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>es' s'.\n          P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                         \\<langle>es',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>es' s'.\n          P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                         \\<langle>es',s'\\<rangle>", "assume e: \"e = Val v\""], ["proof (state)\nthis:\n  e = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>es' s'.\n          P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                         \\<langle>es',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>es' s'.\n          P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                         \\<langle>es',s'\\<rangle>", "hence Des': \"\\<D>s es \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\nusing this:\n  e = Val v\n\ngoal (1 subgoal):\n 1. \\<D>s es \\<lfloor>dom l\\<rfloor>", "using De Des"], ["proof (prove)\nusing this:\n  e = Val v\n  \\<D> e \\<lfloor>dom l\\<rfloor>\n  \\<D>s es (\\<lfloor>dom l\\<rfloor> \\<squnion> \\<A> e)\n\ngoal (1 subgoal):\n 1. \\<D>s es \\<lfloor>dom l\\<rfloor>", "by auto"], ["proof (state)\nthis:\n  \\<D>s es \\<lfloor>dom l\\<rfloor>\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>es' s'.\n          P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                         \\<langle>es',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>es' s'.\n          P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                         \\<langle>es',s'\\<rangle>", "have not_fins_tl: \"\\<not> finals es\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> finals es", "using not_fins e"], ["proof (prove)\nusing this:\n  \\<not> finals (e # es)\n  e = Val v\n\ngoal (1 subgoal):\n 1. \\<not> finals es", "by simp"], ["proof (state)\nthis:\n  \\<not> finals es\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>es' s'.\n          P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                         \\<langle>es',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>es' s'.\n          P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                         \\<langle>es',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>es' s'.\n       P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                      \\<langle>es',s'\\<rangle>", "using e IHes[OF Des' not_fins_tl]"], ["proof (prove)\nusing this:\n  e = Val v\n  \\<exists>es' s'.\n     P \\<turnstile> \\<langle>es,(h, l)\\<rangle> [\\<rightarrow>]\n                    \\<langle>es',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>es' s'.\n       P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                      \\<langle>es',s'\\<rangle>", "by (blast intro!:ListRed2)"], ["proof (state)\nthis:\n  \\<exists>es' s'.\n     P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                    \\<langle>es',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>es' s'.\n          P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                         \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>es' s'.\n          P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                         \\<langle>es',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>es' s'.\n          P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                         \\<langle>es',s'\\<rangle>", "assume \"e = Throw a\""], ["proof (state)\nthis:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>es' s'.\n          P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                         \\<langle>es',s'\\<rangle>", "hence False"], ["proof (prove)\nusing this:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. False", "using not_fins"], ["proof (prove)\nusing this:\n  e = Throw a\n  \\<not> finals (e # es)\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>es' s'.\n          P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                         \\<langle>es',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>es' s'.\n       P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                      \\<langle>es',s'\\<rangle>", ".."], ["proof (state)\nthis:\n  \\<exists>es' s'.\n     P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                    \\<langle>es',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>es' s'.\n     P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                    \\<langle>es',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>es' s'.\n       P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                      \\<langle>es',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>es' s'.\n       P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                      \\<langle>es',s'\\<rangle>", "assume \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>es' s'.\n       P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                      \\<langle>es',s'\\<rangle>", "with IHe[OF De]"], ["proof (chain)\npicking this:\n  \\<not> final e \\<Longrightarrow>\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> final e \\<Longrightarrow>\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>es' s'.\n       P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                      \\<langle>es',s'\\<rangle>", "by(fast intro!:ListRed1)"], ["proof (state)\nthis:\n  \\<exists>es' s'.\n     P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                    \\<langle>es',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>es' s'.\n     P \\<turnstile> \\<langle>e # es,(h, l)\\<rangle> [\\<rightarrow>]\n                    \\<langle>es',s'\\<rangle>\n\ngoal (7 subgoals):\n 1. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (7 subgoals):\n 1. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "case (WTrtInitBlock v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2)"], ["proof (state)\nthis:\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>\n  P \\<turnstile> T\\<^sub>1 \\<le> T\n  P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e\\<^sub>2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>\n  \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\n\ngoal (7 subgoals):\n 1. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "have IH2: \"\\<And>l. \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<^sub>2\\<rbrakk>\n                  \\<Longrightarrow> \\<exists>e' s'. P \\<turnstile> \\<langle>e\\<^sub>2,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',s'\\<rangle>\"\n   and D: \"\\<D> {V:T := Val v; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>l.\n        \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n         \\<not> final e\\<^sub>2\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>e\\<^sub>2,\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>) &&&\n    \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>", "by fact+"], ["proof (state)\nthis:\n  \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e\\<^sub>2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>\n\ngoal (7 subgoals):\n 1. \\<And>v T\\<^sub>1 T E V e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T;\n        P,E(V \\<mapsto> T),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; V:=Val v;; e\\<^sub>2}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; V:=Val v;;\n      e\\<^sub>2},(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 7. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"final e\\<^sub>2\""], ["proof (state)\nthis:\n  final e\\<^sub>2\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  final e\\<^sub>2", "show ?thesis"], ["proof (prove)\nusing this:\n  final e\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>va.\n       e\\<^sub>2 = Val va \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e\\<^sub>2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix v\\<^sub>2"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>va.\n       e\\<^sub>2 = Val va \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e\\<^sub>2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume \"e\\<^sub>2 = Val v\\<^sub>2\""], ["proof (state)\nthis:\n  e\\<^sub>2 = Val v\\<^sub>2\n\ngoal (2 subgoals):\n 1. \\<And>va.\n       e\\<^sub>2 = Val va \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e\\<^sub>2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e\\<^sub>2 = Val v\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fast intro:RedInitBlock)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e\\<^sub>2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e\\<^sub>2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e\\<^sub>2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume \"e\\<^sub>2 = Throw a\""], ["proof (state)\nthis:\n  e\\<^sub>2 = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e\\<^sub>2 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e\\<^sub>2 = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fast intro:red_reds.InitBlockThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume not_fin2: \"\\<not> final e\\<^sub>2\""], ["proof (state)\nthis:\n  \\<not> final e\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "from D"], ["proof (chain)\npicking this:\n  \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>", "have D2: \"\\<D> e\\<^sub>2 \\<lfloor>dom(l(V\\<mapsto>v))\\<rfloor>\""], ["proof (prove)\nusing this:\n  \\<D> {V:T; V:=Val v;; e\\<^sub>2} \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> e\\<^sub>2 \\<lfloor>dom (l(V \\<mapsto> v))\\<rfloor>", "by (auto simp:hyperset_defs)"], ["proof (state)\nthis:\n  \\<D> e\\<^sub>2 \\<lfloor>dom (l(V \\<mapsto> v))\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "from IH2[OF D2 not_fin2]"], ["proof (chain)\npicking this:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<^sub>2,\n                     (h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>", "obtain h' l' e' where red2: \"P \\<turnstile> \\<langle>e\\<^sub>2,(h, l(V\\<mapsto>v))\\<rangle> \\<rightarrow> \\<langle>e',(h', l')\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e\\<^sub>2,\n                     (h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>e' h' l'.\n        P \\<turnstile> \\<langle>e\\<^sub>2,\n                        (h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                       \\<langle>e',(h', l')\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e\\<^sub>2,\n                  (h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "from red_lcl_incr[OF red2]"], ["proof (chain)\npicking this:\n  dom (l(V \\<mapsto> v)) \\<subseteq> dom l'", "have \"V \\<in> dom l'\""], ["proof (prove)\nusing this:\n  dom (l(V \\<mapsto> v)) \\<subseteq> dom l'\n\ngoal (1 subgoal):\n 1. V \\<in> dom l'", "by auto"], ["proof (state)\nthis:\n  V \\<in> dom l'\n\ngoal (1 subgoal):\n 1. \\<not> final e\\<^sub>2 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with red2"], ["proof (chain)\npicking this:\n  P \\<turnstile> \\<langle>e\\<^sub>2,\n                  (h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n  V \\<in> dom l'", "show ?thesis"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e\\<^sub>2,\n                  (h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n  V \\<in> dom l'\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce intro:InitBlockRed)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>{V:T; V:=Val v;; e\\<^sub>2},\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (6 subgoals):\n 1. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "case (WTrtBlock E V T e T')"], ["proof (state)\nthis:\n  P,E(V \\<mapsto> T),h \\<turnstile> e : T'\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<not> assigned V e\n  \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>\n  \\<not> final {V:T; e}\n\ngoal (6 subgoals):\n 1. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "have IH: \"\\<And>l. \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n                 \\<Longrightarrow> \\<exists>e' s'. P \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',s'\\<rangle>\"\n   and unass: \"\\<not> assigned V e\" and D: \"\\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>l.\n        \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n        \\<Longrightarrow> \\<exists>e' s'.\n                             P \\<turnstile> \\<langle>e,\n       (h, l)\\<rangle> \\<rightarrow>\n      \\<langle>e',s'\\<rangle>) &&&\n    \\<not> assigned V e &&& \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>", "by fact+"], ["proof (state)\nthis:\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<not> assigned V e\n  \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>\n\ngoal (6 subgoals):\n 1. \\<And>E V T e T' l.\n       \\<lbrakk>P,E(V \\<mapsto> T),h \\<turnstile> e : T';\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<not> assigned V e; \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>;\n        \\<not> final {V:T; e}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>{V:T; e},\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 6. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume \"e = Val v\""], ["proof (state)\nthis:\n  e = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e = Val v\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fast intro:RedBlock)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume \"e = Throw a\""], ["proof (state)\nthis:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fast intro:red_reds.BlockThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume not_fin: \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "from D"], ["proof (chain)\npicking this:\n  \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>", "have De: \"\\<D> e \\<lfloor>dom(l(V:=None))\\<rfloor>\""], ["proof (prove)\nusing this:\n  \\<D> {V:T; e} \\<lfloor>dom l\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> e \\<lfloor>dom (l(V := None))\\<rfloor>", "by(simp add:hyperset_defs)"], ["proof (state)\nthis:\n  \\<D> e \\<lfloor>dom (l(V := None))\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "from IH[OF De not_fin]"], ["proof (chain)\npicking this:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>", "obtain h' l' e' where red: \"P \\<turnstile> \\<langle>e,(h,l(V:=None))\\<rangle> \\<rightarrow> \\<langle>e',(h',l')\\<rangle>\""], ["proof (prove)\nusing this:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<And>e' h' l'.\n        P \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                       \\<langle>e',(h', l')\\<rangle> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof (cases \"l' V\")"], ["proof (state)\ngoal (2 subgoals):\n 1. l' V = None \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       l' V = \\<lfloor>a\\<rfloor> \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume \"l' V = None\""], ["proof (state)\nthis:\n  l' V = None\n\ngoal (2 subgoals):\n 1. l' V = None \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       l' V = \\<lfloor>a\\<rfloor> \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "with red unass"], ["proof (chain)\npicking this:\n  P \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n  \\<not> assigned V e\n  l' V = None", "show ?thesis"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n  \\<not> assigned V e\n  l' V = None\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(blast intro: BlockRedNone)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       l' V = \\<lfloor>a\\<rfloor> \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       l' V = \\<lfloor>a\\<rfloor> \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       l' V = \\<lfloor>a\\<rfloor> \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume \"l' V = Some v\""], ["proof (state)\nthis:\n  l' V = \\<lfloor>v\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       l' V = \\<lfloor>a\\<rfloor> \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "with red unass"], ["proof (chain)\npicking this:\n  P \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n  \\<not> assigned V e\n  l' V = \\<lfloor>v\\<rfloor>", "show ?thesis"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n  \\<not> assigned V e\n  l' V = \\<lfloor>v\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(blast intro: BlockRedSome)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>{V:T; e},(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (5 subgoals):\n 1. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "case (WTrtSeq E e1 T1 e2 T2)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1;; e2)\n\ngoal (5 subgoals):\n 1. \\<And>E e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (e\\<^sub>1;; e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (e\\<^sub>1;; e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>e\\<^sub>1;; e\\<^sub>2,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 5. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1;; e2,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1;; e2,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1;; e2,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"final e1\""], ["proof (state)\nthis:\n  final e1\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1;; e2,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1;; e2,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1;; e2,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fast elim:finalE intro:RedSeq red_reds.SeqThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1;; e2,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1;; e2,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1;; e2,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e1\""], ["proof (state)\nthis:\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1;; e2,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtSeq"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1;; e2)\n  \\<not> final e1", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (e1;; e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (e1;; e2)\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>e1;; e2,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by simp (blast intro:SeqRed)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1;; e2,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>e1;; e2,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (4 subgoals):\n 1. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "case (WTrtCond E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : Boolean\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1\n  \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e\\<^sub>1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e\\<^sub>2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n  P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1\n  P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow> T = T\\<^sub>2\n  P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow> T = T\\<^sub>1\n  \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\n\ngoal (4 subgoals):\n 1. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "have wt: \"P,E,h \\<turnstile> e : Boolean\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h \\<turnstile> e : Boolean", "by fact"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : Boolean\n\ngoal (4 subgoals):\n 1. \\<And>E e e\\<^sub>1 T\\<^sub>1 e\\<^sub>2 T\\<^sub>2 T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow>\n        T = T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow>\n        T = T\\<^sub>1;\n        \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>if (e) e\\<^sub>1\n      else e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 4. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"final e\""], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume val: \"e = Val v\""], ["proof (state)\nthis:\n  e = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "then"], ["proof (chain)\npicking this:\n  e = Val v", "obtain b where v: \"v = Bool b\""], ["proof (prove)\nusing this:\n  e = Val v\n\ngoal (1 subgoal):\n 1. (\\<And>b. v = Bool b \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using wt"], ["proof (prove)\nusing this:\n  e = Val v\n  P,E,h \\<turnstile> e : Boolean\n\ngoal (1 subgoal):\n 1. (\\<And>b. v = Bool b \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  v = Bool b\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof (cases b)"], ["proof (state)\ngoal (2 subgoals):\n 1. b \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> b \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "case True"], ["proof (state)\nthis:\n  b\n\ngoal (2 subgoals):\n 1. b \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> b \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with val v"], ["proof (chain)\npicking this:\n  e = Val v\n  v = Bool b\n  b", "show ?thesis"], ["proof (prove)\nusing this:\n  e = Val v\n  v = Bool b\n  b\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(auto intro:RedCondT)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> b \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> b \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "case False"], ["proof (state)\nthis:\n  \\<not> b\n\ngoal (1 subgoal):\n 1. \\<not> b \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with val v"], ["proof (chain)\npicking this:\n  e = Val v\n  v = Bool b\n  \\<not> b", "show ?thesis"], ["proof (prove)\nusing this:\n  e = Val v\n  v = Bool b\n  \\<not> b\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(auto intro:RedCondF)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume \"e = Throw a\""], ["proof (state)\nthis:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e = Throw a\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fast intro:red_reds.CondThrow)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\""], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtCond"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : Boolean\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1\n  \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e\\<^sub>1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e\\<^sub>2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n  P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1\n  P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow> T = T\\<^sub>2\n  P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow> T = T\\<^sub>1\n  \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : Boolean\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1\n  \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e\\<^sub>1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom ?l\\<rfloor>;\n   \\<not> final e\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e\\<^sub>2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<or>\n  P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1\n  P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2 \\<longrightarrow> T = T\\<^sub>2\n  P \\<turnstile> T\\<^sub>2 \\<le> T\\<^sub>1 \\<longrightarrow> T = T\\<^sub>1\n  \\<D> (if (e) e\\<^sub>1 else e\\<^sub>2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (if (e) e\\<^sub>1 else e\\<^sub>2)\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by simp (fast intro:CondRed)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>if (e) e\\<^sub>1 else e\\<^sub>2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "case WTrtWhile"], ["proof (state)\nthis:\n  P,E_,h \\<turnstile> e_ : Boolean\n  \\<lbrakk>\\<D> e_ \\<lfloor>dom ?l\\<rfloor>; \\<not> final e_\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e_,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E_,h \\<turnstile> c_ : T_\n  \\<lbrakk>\\<D> c_ \\<lfloor>dom ?l\\<rfloor>; \\<not> final c_\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>c_,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  \\<D> (while (e_) c_) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (while (e_) c_)\n\ngoal (3 subgoals):\n 1. \\<And>E e c T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : Boolean;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E,h \\<turnstile> c : T;\n        \\<And>l.\n           \\<lbrakk>\\<D> c \\<lfloor>dom l\\<rfloor>; \\<not> final c\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>c,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        \\<D> (while (e) c) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (while (e) c)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>while (e) c,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 3. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>while (e_) c_,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fast intro:RedWhile)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>while (e_) c_,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "case (WTrtThrow E e T\\<^sub>r T)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : T\\<^sub>r\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  is_refT T\\<^sub>r\n  \\<D> (throw e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (throw e)\n\ngoal (2 subgoals):\n 1. \\<And>E e T\\<^sub>r T l.\n       \\<lbrakk>P,E,h \\<turnstile> e : T\\<^sub>r;\n        \\<And>l.\n           \\<lbrakk>\\<D> e \\<lfloor>dom l\\<rfloor>; \\<not> final e\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        is_refT T\\<^sub>r; \\<D> (throw e) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (throw e)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>throw e,\n      (h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>\n 2. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"final e\" \\<comment> \\<open>Then @{term e} must be @{term throw} or @{term null}\\<close>"], ["proof (state)\nthis:\n  final e\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtThrow"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : T\\<^sub>r\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  is_refT T\\<^sub>r\n  \\<D> (throw e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (throw e)\n  final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : T\\<^sub>r\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  is_refT T\\<^sub>r\n  \\<D> (throw e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (throw e)\n  final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce simp:final_def is_refT_def\n                  intro:red_reds.ThrowThrow red_reds.RedThrowNull)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e\" \\<comment> \\<open>Then @{term e} must reduce\\<close>"], ["proof (state)\nthis:\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<not> final e \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtThrow"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : T\\<^sub>r\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  is_refT T\\<^sub>r\n  \\<D> (throw e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (throw e)\n  \\<not> final e", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : T\\<^sub>r\n  \\<lbrakk>\\<D> e \\<lfloor>dom ?l\\<rfloor>; \\<not> final e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  is_refT T\\<^sub>r\n  \\<D> (throw e) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (throw e)\n  \\<not> final e\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by simp (blast intro:ThrowRed)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>throw e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "case (WTrtTry E e1 T1 V C e2 T2)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> T1 \\<le> T2\n  \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (try e1 catch(C V) e2)\n\ngoal (1 subgoal):\n 1. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "have wt1: \"P,E,h \\<turnstile> e1 : T1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h \\<turnstile> e1 : T1", "by fact"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e1 : T1\n\ngoal (1 subgoal):\n 1. \\<And>E e\\<^sub>1 T\\<^sub>1 V C e\\<^sub>2 T\\<^sub>2 l.\n       \\<lbrakk>P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>1 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>1\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>1,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P,E(V \\<mapsto> Class C),h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        \\<And>l.\n           \\<lbrakk>\\<D> e\\<^sub>2 \\<lfloor>dom l\\<rfloor>;\n            \\<not> final e\\<^sub>2\\<rbrakk>\n           \\<Longrightarrow> \\<exists>e' s'.\n                                P \\<turnstile> \\<langle>e\\<^sub>2,\n          (h, l)\\<rangle> \\<rightarrow>\n         \\<langle>e',s'\\<rangle>;\n        P \\<turnstile> T\\<^sub>1 \\<le> T\\<^sub>2;\n        \\<D> (try e\\<^sub>1 catch(C V) e\\<^sub>2) \\<lfloor>dom l\\<rfloor>;\n        \\<not> final (try e\\<^sub>1 catch(C V) e\\<^sub>2)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>e' s'.\n                            P \\<turnstile> \\<langle>try e\\<^sub>1\n      catch(C V) e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n     \\<langle>e',s'\\<rangle>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"final e1\""], ["proof (state)\nthis:\n  final e1\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof (rule finalE)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e1 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       e1 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume \"e1 = Val v\""], ["proof (state)\nthis:\n  e1 = Val v\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       e1 = Val v \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>\n 2. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  e1 = Val v\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fast intro:RedTry)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "assume e1_Throw: \"e1 = Throw a\""], ["proof (state)\nthis:\n  e1 = Throw a\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "with wt1"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : T1\n  e1 = Throw a", "obtain D fs where ha: \"h a = Some(D,fs)\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : T1\n  e1 = Throw a\n\ngoal (1 subgoal):\n 1. (\\<And>D fs.\n        h a = \\<lfloor>(D, fs)\\<rfloor> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  h a = \\<lfloor>(D, fs)\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       e1 = Throw a \\<Longrightarrow>\n       \\<exists>e' s'.\n          P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                          (h, l)\\<rangle> \\<rightarrow>\n                         \\<langle>e',s'\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"P \\<turnstile> D \\<preceq>\\<^sup>* C\""], ["proof (state)\nthis:\n  P \\<turnstile> D \\<preceq>\\<^sup>* C\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with e1_Throw ha"], ["proof (chain)\npicking this:\n  e1 = Throw a\n  h a = \\<lfloor>(D, fs)\\<rfloor>\n  P \\<turnstile> D \\<preceq>\\<^sup>* C", "show ?thesis"], ["proof (prove)\nusing this:\n  e1 = Throw a\n  h a = \\<lfloor>(D, fs)\\<rfloor>\n  P \\<turnstile> D \\<preceq>\\<^sup>* C\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(fastforce intro!:RedTryCatch)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. (D, C) \\<notin> (subcls1 P)\\<^sup>* \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (D, C) \\<notin> (subcls1 P)\\<^sup>* \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<not> P \\<turnstile> D \\<preceq>\\<^sup>* C\""], ["proof (state)\nthis:\n  (D, C) \\<notin> (subcls1 P)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (D, C) \\<notin> (subcls1 P)\\<^sup>* \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with e1_Throw ha"], ["proof (chain)\npicking this:\n  e1 = Throw a\n  h a = \\<lfloor>(D, fs)\\<rfloor>\n  (D, C) \\<notin> (subcls1 P)\\<^sup>*", "show ?thesis"], ["proof (prove)\nusing this:\n  e1 = Throw a\n  h a = \\<lfloor>(D, fs)\\<rfloor>\n  (D, C) \\<notin> (subcls1 P)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by(force intro!:RedTryFail)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "assume \"\\<not> final e1\""], ["proof (state)\nthis:\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<not> final e1 \\<Longrightarrow>\n    \\<exists>e' s'.\n       P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "with WTrtTry"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> T1 \\<le> T2\n  \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (try e1 catch(C V) e2)\n  \\<not> final e1", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e1 : T1\n  \\<lbrakk>\\<D> e1 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e1,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P,E(V \\<mapsto> Class C),h \\<turnstile> e2 : T2\n  \\<lbrakk>\\<D> e2 \\<lfloor>dom ?l\\<rfloor>; \\<not> final e2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>e2,\n (h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n  P \\<turnstile> T1 \\<le> T2\n  \\<D> (try e1 catch(C V) e2) \\<lfloor>dom l\\<rfloor>\n  \\<not> final (try e1 catch(C V) e2)\n  \\<not> final e1\n\ngoal (1 subgoal):\n 1. \\<exists>e' s'.\n       P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                       (h, l)\\<rangle> \\<rightarrow>\n                      \\<langle>e',s'\\<rangle>", "by simp (fast intro:TryRed)"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>e' s'.\n     P \\<turnstile> \\<langle>try e1 catch(C V) e2,\n                     (h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "end"]]}