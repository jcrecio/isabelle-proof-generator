{"file_name": "/home/qj213/afp-2021-10-22/thys/Jinja/J/TypeSafe.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Jinja", "problem_names": ["theorem red_preserves_hconf:\n  \"P \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',(h',l')\\<rangle> \\<Longrightarrow> (\\<And>T E. \\<lbrakk> P,E,h \\<turnstile> e : T; P \\<turnstile> h \\<surd> \\<rbrakk> \\<Longrightarrow> P \\<turnstile> h' \\<surd>)\"\nand reds_preserves_hconf:\n  \"P \\<turnstile> \\<langle>es,(h,l)\\<rangle> [\\<rightarrow>] \\<langle>es',(h',l')\\<rangle> \\<Longrightarrow> (\\<And>Ts E. \\<lbrakk> P,E,h \\<turnstile> es [:] Ts; P \\<turnstile> h \\<surd> \\<rbrakk> \\<Longrightarrow> P \\<turnstile> h' \\<surd>)\"", "theorem red_preserves_lconf:\n  \"P \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',(h',l')\\<rangle> \\<Longrightarrow>\n  (\\<And>T E. \\<lbrakk> P,E,h \\<turnstile> e:T; P,h \\<turnstile> l (:\\<le>) E \\<rbrakk> \\<Longrightarrow> P,h' \\<turnstile> l' (:\\<le>) E)\"\nand reds_preserves_lconf:\n  \"P \\<turnstile> \\<langle>es,(h,l)\\<rangle> [\\<rightarrow>] \\<langle>es',(h',l')\\<rangle> \\<Longrightarrow>\n  (\\<And>Ts E. \\<lbrakk> P,E,h \\<turnstile> es[:]Ts; P,h \\<turnstile> l (:\\<le>) E \\<rbrakk> \\<Longrightarrow> P,h' \\<turnstile> l' (:\\<le>) E)\"", "lemma [iff]: \"\\<And>A. \\<lbrakk> length Vs = length Ts; length vs = length Ts\\<rbrakk> \\<Longrightarrow>\n \\<D> (blocks (Vs,Ts,vs,e)) A = \\<D> e (A \\<squnion> \\<lfloor>set Vs\\<rfloor>)\"", "lemma red_lA_incr: \"P \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',(h',l')\\<rangle> \\<Longrightarrow> \\<lfloor>dom l\\<rfloor> \\<squnion> \\<A> e \\<sqsubseteq>  \\<lfloor>dom l'\\<rfloor> \\<squnion> \\<A> e'\"\nand reds_lA_incr: \"P \\<turnstile> \\<langle>es,(h,l)\\<rangle> [\\<rightarrow>] \\<langle>es',(h',l')\\<rangle> \\<Longrightarrow> \\<lfloor>dom l\\<rfloor> \\<squnion> \\<A>s es \\<sqsubseteq>  \\<lfloor>dom l'\\<rfloor> \\<squnion> \\<A>s es'\"", "lemma assumes wf: \"wf_J_prog P\"\nshows red_preserves_defass:\n  \"P \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',(h',l')\\<rangle> \\<Longrightarrow> \\<D> e \\<lfloor>dom l\\<rfloor> \\<Longrightarrow> \\<D> e' \\<lfloor>dom l'\\<rfloor>\"\nand \"P \\<turnstile> \\<langle>es,(h,l)\\<rangle> [\\<rightarrow>] \\<langle>es',(h',l')\\<rangle> \\<Longrightarrow> \\<D>s es \\<lfloor>dom l\\<rfloor> \\<Longrightarrow> \\<D>s es' \\<lfloor>dom l'\\<rfloor>\"", "lemma red_preserves_sconf:\n  \"\\<lbrakk> P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow> \\<langle>e',s'\\<rangle>; P,E,hp s \\<turnstile> e : T; P,E \\<turnstile> s \\<surd> \\<rbrakk> \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>\"", "lemma reds_preserves_sconf:\n  \"\\<lbrakk> P \\<turnstile> \\<langle>es,s\\<rangle> [\\<rightarrow>] \\<langle>es',s'\\<rangle>; P,E,hp s \\<turnstile> es [:] Ts; P,E \\<turnstile> s \\<surd> \\<rbrakk> \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>\"", "lemma wt_blocks:\n \"\\<And>E. \\<lbrakk> length Vs = length Ts; length vs = length Ts \\<rbrakk> \\<Longrightarrow>\n       (P,E,h \\<turnstile> blocks(Vs,Ts,vs,e) : T) =\n       (P,E(Vs[\\<mapsto>]Ts),h \\<turnstile> e:T \\<and> (\\<exists>Ts'. map (typeof\\<^bsub>h\\<^esub>) vs = map Some Ts' \\<and> P \\<turnstile> Ts' [\\<le>] Ts))\"", "theorem assumes wf: \"wf_J_prog P\"\nshows subject_reduction2: \"P \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',(h',l')\\<rangle> \\<Longrightarrow>\n  (\\<And>E T. \\<lbrakk> P,E \\<turnstile> (h,l) \\<surd>; P,E,h \\<turnstile> e:T \\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'. P,E,h' \\<turnstile> e':T' \\<and> P \\<turnstile> T' \\<le> T)\"\nand subjects_reduction2: \"P \\<turnstile> \\<langle>es,(h,l)\\<rangle> [\\<rightarrow>] \\<langle>es',(h',l')\\<rangle> \\<Longrightarrow>\n  (\\<And>E Ts. \\<lbrakk> P,E \\<turnstile> (h,l) \\<surd>; P,E,h \\<turnstile> es [:] Ts \\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'. P,E,h' \\<turnstile> es' [:] Ts' \\<and> P \\<turnstile> Ts' [\\<le>] Ts)\"", "lemma Red_preserves_sconf:\nassumes wf: \"wf_J_prog P\" and Red: \"P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>* \\<langle>e',s'\\<rangle>\"\nshows \"\\<And>T. \\<lbrakk> P,E,hp s \\<turnstile> e : T; P,E \\<turnstile> s \\<surd> \\<rbrakk> \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>\"", "lemma Red_preserves_defass:\nassumes wf: \"wf_J_prog P\" and reds: \"P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>* \\<langle>e',s'\\<rangle>\"\nshows \"\\<D> e \\<lfloor>dom(lcl s)\\<rfloor> \\<Longrightarrow> \\<D> e' \\<lfloor>dom(lcl s')\\<rfloor>\"", "lemma Red_preserves_type:\nassumes wf: \"wf_J_prog P\" and Red: \"P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>* \\<langle>e',s'\\<rangle>\"\nshows \"!!T. \\<lbrakk> P,E \\<turnstile> s\\<surd>; P,E,hp s \\<turnstile> e:T \\<rbrakk>\n    \\<Longrightarrow> \\<exists>T'. P \\<turnstile> T' \\<le> T \\<and> P,E,hp s' \\<turnstile> e':T'\"", "lemma eval_preserves_sconf:\n  \"\\<lbrakk> wf_J_prog P; P \\<turnstile> \\<langle>e,s\\<rangle> \\<Rightarrow> \\<langle>e',s'\\<rangle>; P,E \\<turnstile> e::T; P,E \\<turnstile> s\\<surd> \\<rbrakk> \\<Longrightarrow> P,E \\<turnstile> s'\\<surd>\"", "lemma eval_preserves_type: assumes wf: \"wf_J_prog P\"\nshows \"\\<lbrakk> P \\<turnstile> \\<langle>e,s\\<rangle> \\<Rightarrow> \\<langle>e',s'\\<rangle>; P,E \\<turnstile> s\\<surd>; P,E \\<turnstile> e::T \\<rbrakk>\n   \\<Longrightarrow> \\<exists>T'. P \\<turnstile> T' \\<le> T \\<and> P,E,hp s' \\<turnstile> e':T'\"", "theorem Subject_reduction: assumes wf: \"wf_J_prog P\"\nshows \"P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow> \\<langle>e',s'\\<rangle> \\<Longrightarrow> P,E,s \\<turnstile> e : T \\<surd>\n       \\<Longrightarrow> \\<exists>T'. P,E,s' \\<turnstile> e' : T' \\<surd> \\<and> P \\<turnstile> T' \\<le> T\"", "theorem Subject_reductions:\nassumes wf: \"wf_J_prog P\" and reds: \"P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>* \\<langle>e',s'\\<rangle>\"\nshows \"\\<And>T. P,E,s \\<turnstile> e:T \\<surd> \\<Longrightarrow> \\<exists>T'. P,E,s' \\<turnstile> e':T' \\<surd> \\<and> P \\<turnstile> T' \\<le> T\""], "translations": [["", "theorem red_preserves_hconf:\n  \"P \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',(h',l')\\<rangle> \\<Longrightarrow> (\\<And>T E. \\<lbrakk> P,E,h \\<turnstile> e : T; P \\<turnstile> h \\<surd> \\<rbrakk> \\<Longrightarrow> P \\<turnstile> h' \\<surd>)\"\nand reds_preserves_hconf:\n  \"P \\<turnstile> \\<langle>es,(h,l)\\<rangle> [\\<rightarrow>] \\<langle>es',(h',l')\\<rangle> \\<Longrightarrow> (\\<And>Ts E. \\<lbrakk> P,E,h \\<turnstile> es [:] Ts; P \\<turnstile> h \\<surd> \\<rbrakk> \\<Longrightarrow> P \\<turnstile> h' \\<surd>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',(h', l')\\<rangle> \\<Longrightarrow>\n     (\\<And>T E.\n         \\<lbrakk>P,E,h \\<turnstile> e : T;\n          P \\<turnstile> h \\<surd>\\<rbrakk>\n         \\<Longrightarrow> P \\<turnstile> h' \\<surd>)) &&&\n    (P \\<turnstile> \\<langle>es,(h, l)\\<rangle> [\\<rightarrow>]\n                    \\<langle>es',(h', l')\\<rangle> \\<Longrightarrow>\n     (\\<And>Ts E.\n         \\<lbrakk>P,E,h \\<turnstile> es [:] Ts;\n          P \\<turnstile> h \\<surd>\\<rbrakk>\n         \\<Longrightarrow> P \\<turnstile> h' \\<surd>))", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',(h', l')\\<rangle> \\<Longrightarrow>\n     (\\<And>T E.\n         \\<lbrakk>P,E,h \\<turnstile> e : T;\n          P \\<turnstile> h \\<surd>\\<rbrakk>\n         \\<Longrightarrow> P \\<turnstile> h' \\<surd>)) &&&\n    (P \\<turnstile> \\<langle>es,(h, l)\\<rangle> [\\<rightarrow>]\n                    \\<langle>es',(h', l')\\<rangle> \\<Longrightarrow>\n     (\\<And>Ts E.\n         \\<lbrakk>P,E,h \\<turnstile> es [:] Ts;\n          P \\<turnstile> h \\<surd>\\<rbrakk>\n         \\<Longrightarrow> P \\<turnstile> h' \\<surd>))", "proof (induct rule:red_reds_inducts)"], ["proof (state)\ngoal (56 subgoals):\n 1. \\<And>h a C FDTs h' l T E.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E,h \\<turnstile> new C : T; P \\<turnstile> h \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> h' \\<surd>\n 2. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P \\<turnstile> h \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> h \\<surd>\n 3. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 4. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 6. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 10. \\<And>a b V v T E.\n        \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n         P,E,a \\<turnstile> Var V : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n        \\<Longrightarrow> P \\<turnstile> a \\<surd>\nA total of 56 subgoals...", "case (RedNew h a C FDTs h' l)"], ["proof (state)\nthis:\n  new_Addr h = \\<lfloor>a\\<rfloor>\n  P \\<turnstile> C has_fields FDTs\n  h' = h(a \\<mapsto> (C, init_fields FDTs))\n  P,E,h \\<turnstile> new C : T\n  P \\<turnstile> h \\<surd>\n\ngoal (56 subgoals):\n 1. \\<And>h a C FDTs h' l T E.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E,h \\<turnstile> new C : T; P \\<turnstile> h \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> h' \\<surd>\n 2. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P \\<turnstile> h \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> h \\<surd>\n 3. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 4. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 6. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 10. \\<And>a b V v T E.\n        \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n         P,E,a \\<turnstile> Var V : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n        \\<Longrightarrow> P \\<turnstile> a \\<surd>\nA total of 56 subgoals...", "have new: \"new_Addr h = Some a\" and fields: \"P \\<turnstile> C has_fields FDTs\"\n   and h': \"h' = h(a\\<mapsto>(C, init_fields FDTs))\"\n   and hconf: \"P \\<turnstile> h \\<surd>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (new_Addr h = \\<lfloor>a\\<rfloor> &&&\n     P \\<turnstile> C has_fields FDTs) &&&\n    h' = h(a \\<mapsto> (C, init_fields FDTs)) &&& P \\<turnstile> h \\<surd>", "by fact+"], ["proof (state)\nthis:\n  new_Addr h = \\<lfloor>a\\<rfloor>\n  P \\<turnstile> C has_fields FDTs\n  h' = h(a \\<mapsto> (C, init_fields FDTs))\n  P \\<turnstile> h \\<surd>\n\ngoal (56 subgoals):\n 1. \\<And>h a C FDTs h' l T E.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E,h \\<turnstile> new C : T; P \\<turnstile> h \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> h' \\<surd>\n 2. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P \\<turnstile> h \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> h \\<surd>\n 3. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 4. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 6. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 10. \\<And>a b V v T E.\n        \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n         P,E,a \\<turnstile> Var V : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n        \\<Longrightarrow> P \\<turnstile> a \\<surd>\nA total of 56 subgoals...", "from new"], ["proof (chain)\npicking this:\n  new_Addr h = \\<lfloor>a\\<rfloor>", "have None: \"h a = None\""], ["proof (prove)\nusing this:\n  new_Addr h = \\<lfloor>a\\<rfloor>\n\ngoal (1 subgoal):\n 1. h a = None", "by(rule new_Addr_SomeD)"], ["proof (state)\nthis:\n  h a = None\n\ngoal (56 subgoals):\n 1. \\<And>h a C FDTs h' l T E.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E,h \\<turnstile> new C : T; P \\<turnstile> h \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> h' \\<surd>\n 2. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P \\<turnstile> h \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> h \\<surd>\n 3. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 4. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 6. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 10. \\<And>a b V v T E.\n        \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n         P,E,a \\<turnstile> Var V : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n        \\<Longrightarrow> P \\<turnstile> a \\<surd>\nA total of 56 subgoals...", "moreover"], ["proof (state)\nthis:\n  h a = None\n\ngoal (56 subgoals):\n 1. \\<And>h a C FDTs h' l T E.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E,h \\<turnstile> new C : T; P \\<turnstile> h \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> h' \\<surd>\n 2. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P \\<turnstile> h \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> h \\<surd>\n 3. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 4. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 6. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 10. \\<And>a b V v T E.\n        \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n         P,E,a \\<turnstile> Var V : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n        \\<Longrightarrow> P \\<turnstile> a \\<surd>\nA total of 56 subgoals...", "have \"P,h \\<turnstile> (C,init_fields FDTs) \\<surd>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,h \\<turnstile> (C, init_fields FDTs) \\<surd>", "using fields"], ["proof (prove)\nusing this:\n  P \\<turnstile> C has_fields FDTs\n\ngoal (1 subgoal):\n 1. P,h \\<turnstile> (C, init_fields FDTs) \\<surd>", "by(rule oconf_init_fields)"], ["proof (state)\nthis:\n  P,h \\<turnstile> (C, init_fields FDTs) \\<surd>\n\ngoal (56 subgoals):\n 1. \\<And>h a C FDTs h' l T E.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E,h \\<turnstile> new C : T; P \\<turnstile> h \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> h' \\<surd>\n 2. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P \\<turnstile> h \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> h \\<surd>\n 3. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 4. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 6. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 10. \\<And>a b V v T E.\n        \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n         P,E,a \\<turnstile> Var V : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n        \\<Longrightarrow> P \\<turnstile> a \\<surd>\nA total of 56 subgoals...", "ultimately"], ["proof (chain)\npicking this:\n  h a = None\n  P,h \\<turnstile> (C, init_fields FDTs) \\<surd>", "show \"P \\<turnstile> h' \\<surd>\""], ["proof (prove)\nusing this:\n  h a = None\n  P,h \\<turnstile> (C, init_fields FDTs) \\<surd>\n\ngoal (1 subgoal):\n 1. P \\<turnstile> h' \\<surd>", "using h'"], ["proof (prove)\nusing this:\n  h a = None\n  P,h \\<turnstile> (C, init_fields FDTs) \\<surd>\n  h' = h(a \\<mapsto> (C, init_fields FDTs))\n\ngoal (1 subgoal):\n 1. P \\<turnstile> h' \\<surd>", "by(fast intro: hconf_new[OF hconf])"], ["proof (state)\nthis:\n  P \\<turnstile> h' \\<surd>\n\ngoal (55 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P \\<turnstile> h \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> h \\<surd>\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P \\<turnstile> a \\<surd>\\<rbrakk>\n            \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n         P,E,a \\<turnstile> V:=e : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n        \\<Longrightarrow> P \\<turnstile> aa \\<surd>\nA total of 55 subgoals...", "next"], ["proof (state)\ngoal (55 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P \\<turnstile> h \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> h \\<surd>\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P \\<turnstile> a \\<surd>\\<rbrakk>\n            \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n         P,E,a \\<turnstile> V:=e : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n        \\<Longrightarrow> P \\<turnstile> aa \\<surd>\nA total of 55 subgoals...", "case (RedFAss h a C fs F D v l)"], ["proof (state)\nthis:\n  h a = \\<lfloor>(C, fs)\\<rfloor>\n  P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\n  P \\<turnstile> h \\<surd>\n\ngoal (55 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P \\<turnstile> h \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> h \\<surd>\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P \\<turnstile> a \\<surd>\\<rbrakk>\n            \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n         P,E,a \\<turnstile> V:=e : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n        \\<Longrightarrow> P \\<turnstile> aa \\<surd>\nA total of 55 subgoals...", "let ?fs' = \"fs((F,D)\\<mapsto>v)\""], ["proof (state)\ngoal (55 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P \\<turnstile> h \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> h \\<surd>\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P \\<turnstile> a \\<surd>\\<rbrakk>\n            \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n         P,E,a \\<turnstile> V:=e : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n        \\<Longrightarrow> P \\<turnstile> aa \\<surd>\nA total of 55 subgoals...", "have hconf: \"P \\<turnstile> h \\<surd>\" and ha: \"h a = Some(C,fs)\"\n   and wt: \"P,E,h \\<turnstile> addr a\\<bullet>F{D}:=Val v : T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<turnstile> h \\<surd> &&&\n    h a = \\<lfloor>(C, fs)\\<rfloor> &&&\n    P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T", "by fact+"], ["proof (state)\nthis:\n  P \\<turnstile> h \\<surd>\n  h a = \\<lfloor>(C, fs)\\<rfloor>\n  P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\n\ngoal (55 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P \\<turnstile> h \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> h \\<surd>\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P \\<turnstile> a \\<surd>\\<rbrakk>\n            \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n         P,E,a \\<turnstile> V:=e : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n        \\<Longrightarrow> P \\<turnstile> aa \\<surd>\nA total of 55 subgoals...", "from wt ha"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\n  h a = \\<lfloor>(C, fs)\\<rfloor>", "obtain TF Tv where typeofv: \"typeof\\<^bsub>h\\<^esub> v = Some Tv\"\n    and has: \"P \\<turnstile> C has F:TF in D\"\n    and sub: \"P \\<turnstile> Tv \\<le> TF\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\n  h a = \\<lfloor>(C, fs)\\<rfloor>\n\ngoal (1 subgoal):\n 1. (\\<And>Tv TF.\n        \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>Tv\\<rfloor>;\n         P \\<turnstile> C has F:TF in D; P \\<turnstile> Tv \\<le> TF\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>Tv\\<rfloor>\n  P \\<turnstile> C has F:TF in D\n  P \\<turnstile> Tv \\<le> TF\n\ngoal (55 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P \\<turnstile> h \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> h \\<surd>\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P \\<turnstile> a \\<surd>\\<rbrakk>\n            \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n         P,E,a \\<turnstile> V:=e : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n        \\<Longrightarrow> P \\<turnstile> aa \\<surd>\nA total of 55 subgoals...", "have \"P,h \\<turnstile> (C, ?fs') \\<surd>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,h \\<turnstile> (C, fs((F, D) \\<mapsto> v)) \\<surd>", "proof (rule oconf_fupd[OF has])"], ["proof (state)\ngoal (2 subgoals):\n 1. P,h \\<turnstile> v :\\<le> TF\n 2. P,h \\<turnstile> (C, fs) \\<surd>", "show \"P,h \\<turnstile> (C, fs) \\<surd>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,h \\<turnstile> (C, fs) \\<surd>", "using hconf ha"], ["proof (prove)\nusing this:\n  P \\<turnstile> h \\<surd>\n  h a = \\<lfloor>(C, fs)\\<rfloor>\n\ngoal (1 subgoal):\n 1. P,h \\<turnstile> (C, fs) \\<surd>", "by(simp add:hconf_def)"], ["proof (state)\nthis:\n  P,h \\<turnstile> (C, fs) \\<surd>\n\ngoal (1 subgoal):\n 1. P,h \\<turnstile> v :\\<le> TF", "show \"P,h \\<turnstile> v :\\<le> TF\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,h \\<turnstile> v :\\<le> TF", "using sub typeofv"], ["proof (prove)\nusing this:\n  P \\<turnstile> Tv \\<le> TF\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>Tv\\<rfloor>\n\ngoal (1 subgoal):\n 1. P,h \\<turnstile> v :\\<le> TF", "by(simp add:conf_def)"], ["proof (state)\nthis:\n  P,h \\<turnstile> v :\\<le> TF\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P,h \\<turnstile> (C, fs((F, D) \\<mapsto> v)) \\<surd>\n\ngoal (55 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P \\<turnstile> h \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> h \\<surd>\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P \\<turnstile> a \\<surd>\\<rbrakk>\n            \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n         P,E,a \\<turnstile> V:=e : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n        \\<Longrightarrow> P \\<turnstile> aa \\<surd>\nA total of 55 subgoals...", "with hconf ha"], ["proof (chain)\npicking this:\n  P \\<turnstile> h \\<surd>\n  h a = \\<lfloor>(C, fs)\\<rfloor>\n  P,h \\<turnstile> (C, fs((F, D) \\<mapsto> v)) \\<surd>", "show \"P \\<turnstile> h(a\\<mapsto>(C, ?fs')) \\<surd>\""], ["proof (prove)\nusing this:\n  P \\<turnstile> h \\<surd>\n  h a = \\<lfloor>(C, fs)\\<rfloor>\n  P,h \\<turnstile> (C, fs((F, D) \\<mapsto> v)) \\<surd>\n\ngoal (1 subgoal):\n 1. P \\<turnstile> h(a \\<mapsto> (C, fs((F, D) \\<mapsto> v))) \\<surd>", "by (rule hconf_upd_obj)"], ["proof (state)\nthis:\n  P \\<turnstile> h(a \\<mapsto> (C, fs((F, D) \\<mapsto> v))) \\<surd>\n\ngoal (54 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P \\<turnstile> h \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> h \\<surd>\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P \\<turnstile> a \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> aa \\<surd>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P \\<turnstile> a \\<surd>\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P \\<turnstile> a \\<surd>\\<rbrakk>\n            \\<Longrightarrow> P \\<turnstile> aa \\<surd>;\n         P,E,a \\<turnstile> V:=e : T; P \\<turnstile> a \\<surd>\\<rbrakk>\n        \\<Longrightarrow> P \\<turnstile> aa \\<surd>\nA total of 54 subgoals...", "qed auto"], ["", "(*>*)"], ["", "theorem red_preserves_lconf:\n  \"P \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',(h',l')\\<rangle> \\<Longrightarrow>\n  (\\<And>T E. \\<lbrakk> P,E,h \\<turnstile> e:T; P,h \\<turnstile> l (:\\<le>) E \\<rbrakk> \\<Longrightarrow> P,h' \\<turnstile> l' (:\\<le>) E)\"\nand reds_preserves_lconf:\n  \"P \\<turnstile> \\<langle>es,(h,l)\\<rangle> [\\<rightarrow>] \\<langle>es',(h',l')\\<rangle> \\<Longrightarrow>\n  (\\<And>Ts E. \\<lbrakk> P,E,h \\<turnstile> es[:]Ts; P,h \\<turnstile> l (:\\<le>) E \\<rbrakk> \\<Longrightarrow> P,h' \\<turnstile> l' (:\\<le>) E)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',(h', l')\\<rangle> \\<Longrightarrow>\n     (\\<And>T E.\n         \\<lbrakk>P,E,h \\<turnstile> e : T;\n          P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n         \\<Longrightarrow> P,h' \\<turnstile> l' (:\\<le>) E)) &&&\n    (P \\<turnstile> \\<langle>es,(h, l)\\<rangle> [\\<rightarrow>]\n                    \\<langle>es',(h', l')\\<rangle> \\<Longrightarrow>\n     (\\<And>Ts E.\n         \\<lbrakk>P,E,h \\<turnstile> es [:] Ts;\n          P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n         \\<Longrightarrow> P,h' \\<turnstile> l' (:\\<le>) E))", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',(h', l')\\<rangle> \\<Longrightarrow>\n     (\\<And>T E.\n         \\<lbrakk>P,E,h \\<turnstile> e : T;\n          P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n         \\<Longrightarrow> P,h' \\<turnstile> l' (:\\<le>) E)) &&&\n    (P \\<turnstile> \\<langle>es,(h, l)\\<rangle> [\\<rightarrow>]\n                    \\<langle>es',(h', l')\\<rangle> \\<Longrightarrow>\n     (\\<And>Ts E.\n         \\<lbrakk>P,E,h \\<turnstile> es [:] Ts;\n          P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n         \\<Longrightarrow> P,h' \\<turnstile> l' (:\\<le>) E))", "proof(induct rule:red_reds_inducts)"], ["proof (state)\ngoal (56 subgoals):\n 1. \\<And>h a C FDTs h' l T E.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E,h \\<turnstile> new C : T; P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h' \\<turnstile> l (:\\<le>) E\n 2. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 3. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 4. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>a b V v T E.\n        \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n         P,E,a \\<turnstile> Var V : T;\n         P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\nA total of 56 subgoals...", "case RedNew"], ["proof (state)\nthis:\n  new_Addr h_ = \\<lfloor>a_\\<rfloor>\n  P \\<turnstile> C_ has_fields FDTs_\n  h'_ = h_(a_ \\<mapsto> (C_, init_fields FDTs_))\n  P,E,h_ \\<turnstile> new C_ : T\n  P,h_ \\<turnstile> l_ (:\\<le>) E\n\ngoal (56 subgoals):\n 1. \\<And>h a C FDTs h' l T E.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E,h \\<turnstile> new C : T; P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h' \\<turnstile> l (:\\<le>) E\n 2. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 3. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 4. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>a b V v T E.\n        \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n         P,E,a \\<turnstile> Var V : T;\n         P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\nA total of 56 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  new_Addr h_ = \\<lfloor>a_\\<rfloor>\n  P \\<turnstile> C_ has_fields FDTs_\n  h'_ = h_(a_ \\<mapsto> (C_, init_fields FDTs_))\n  P,E,h_ \\<turnstile> new C_ : T\n  P,h_ \\<turnstile> l_ (:\\<le>) E\n\ngoal (1 subgoal):\n 1. P,h'_ \\<turnstile> l_ (:\\<le>) E", "by(fast intro:lconf_hext red_hext_incr[OF red_reds.RedNew])"], ["proof (state)\nthis:\n  P,h'_ \\<turnstile> l_ (:\\<le>) E\n\ngoal (55 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 55 subgoals...", "next"], ["proof (state)\ngoal (55 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 55 subgoals...", "case RedLAss"], ["proof (state)\nthis:\n  P,E,h_ \\<turnstile> V_:=Val v_ : T\n  P,h_ \\<turnstile> l_ (:\\<le>) E\n\ngoal (55 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 55 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P,E,h_ \\<turnstile> V_:=Val v_ : T\n  P,h_ \\<turnstile> l_ (:\\<le>) E\n\ngoal (1 subgoal):\n 1. P,h_ \\<turnstile> l_(V_ \\<mapsto> v_) (:\\<le>) E", "by(fastforce elim: lconf_upd simp:conf_def)"], ["proof (state)\nthis:\n  P,h_ \\<turnstile> l_(V_ \\<mapsto> v_) (:\\<le>) E\n\ngoal (54 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 54 subgoals...", "next"], ["proof (state)\ngoal (54 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 54 subgoals...", "case RedFAss"], ["proof (state)\nthis:\n  h_ a_ = \\<lfloor>(C_, fs_)\\<rfloor>\n  P,E,h_ \\<turnstile> addr a_\\<bullet>F_{D_} := Val v_ : T\n  P,h_ \\<turnstile> l_ (:\\<le>) E\n\ngoal (54 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 54 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  h_ a_ = \\<lfloor>(C_, fs_)\\<rfloor>\n  P,E,h_ \\<turnstile> addr a_\\<bullet>F_{D_} := Val v_ : T\n  P,h_ \\<turnstile> l_ (:\\<le>) E\n\ngoal (1 subgoal):\n 1. P,h_(a_ \\<mapsto>\n    (C_, fs_((F_, D_) \\<mapsto> v_))) \\<turnstile> l_ (:\\<le>) E", "by(fast intro:lconf_hext red_hext_incr[OF red_reds.RedFAss])"], ["proof (state)\nthis:\n  P,h_(a_ \\<mapsto>\n  (C_, fs_((F_, D_) \\<mapsto> v_))) \\<turnstile> l_ (:\\<le>) E\n\ngoal (53 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 53 subgoals...", "next"], ["proof (state)\ngoal (53 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 53 subgoals...", "case (InitBlockRed e h l V v e' h' l' v' T T')"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e,(h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n  \\<lbrakk>P,?E,h \\<turnstile> e : ?T;\n   P,h \\<turnstile> l(V \\<mapsto> v) (:\\<le>) ?E\\<rbrakk>\n  \\<Longrightarrow> P,h' \\<turnstile> l' (:\\<le>) ?E\n  l' V = \\<lfloor>v'\\<rfloor>\n  P,E,h \\<turnstile> {V:T; V:=Val v;; e} : T'\n  P,h \\<turnstile> l (:\\<le>) E\n\ngoal (53 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 53 subgoals...", "have red: \"P \\<turnstile> \\<langle>e, (h, l(V\\<mapsto>v))\\<rangle> \\<rightarrow> \\<langle>e',(h', l')\\<rangle>\"\n   and IH: \"\\<And>T E . \\<lbrakk> P,E,h \\<turnstile> e:T; P,h \\<turnstile> l(V\\<mapsto>v) (:\\<le>) E \\<rbrakk>\n                     \\<Longrightarrow> P,h' \\<turnstile> l' (:\\<le>) E\"\n   and l'V: \"l' V = Some v'\" and lconf: \"P,h \\<turnstile> l (:\\<le>) E\"\n   and wt: \"P,E,h \\<turnstile> {V:T := Val v; e} : T'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<turnstile> \\<langle>e,(h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                    \\<langle>e',(h', l')\\<rangle> &&&\n     (\\<And>T E.\n         \\<lbrakk>P,E,h \\<turnstile> e : T;\n          P,h \\<turnstile> l(V \\<mapsto> v) (:\\<le>) E\\<rbrakk>\n         \\<Longrightarrow> P,h' \\<turnstile> l' (:\\<le>) E)) &&&\n    l' V = \\<lfloor>v'\\<rfloor> &&&\n    P,h \\<turnstile> l (:\\<le>) E &&&\n    P,E,h \\<turnstile> {V:T; V:=Val v;; e} : T'", "by fact+"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e,(h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n  \\<lbrakk>P,?E,h \\<turnstile> e : ?T;\n   P,h \\<turnstile> l(V \\<mapsto> v) (:\\<le>) ?E\\<rbrakk>\n  \\<Longrightarrow> P,h' \\<turnstile> l' (:\\<le>) ?E\n  l' V = \\<lfloor>v'\\<rfloor>\n  P,h \\<turnstile> l (:\\<le>) E\n  P,E,h \\<turnstile> {V:T; V:=Val v;; e} : T'\n\ngoal (53 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 53 subgoals...", "from lconf_hext[OF lconf red_hext_incr[OF red]]"], ["proof (chain)\npicking this:\n  P,h' \\<turnstile> l (:\\<le>) E", "have \"P,h' \\<turnstile> l (:\\<le>) E\""], ["proof (prove)\nusing this:\n  P,h' \\<turnstile> l (:\\<le>) E\n\ngoal (1 subgoal):\n 1. P,h' \\<turnstile> l (:\\<le>) E", "."], ["proof (state)\nthis:\n  P,h' \\<turnstile> l (:\\<le>) E\n\ngoal (53 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 53 subgoals...", "moreover"], ["proof (state)\nthis:\n  P,h' \\<turnstile> l (:\\<le>) E\n\ngoal (53 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 53 subgoals...", "from IH lconf wt"], ["proof (chain)\npicking this:\n  \\<lbrakk>P,?E,h \\<turnstile> e : ?T;\n   P,h \\<turnstile> l(V \\<mapsto> v) (:\\<le>) ?E\\<rbrakk>\n  \\<Longrightarrow> P,h' \\<turnstile> l' (:\\<le>) ?E\n  P,h \\<turnstile> l (:\\<le>) E\n  P,E,h \\<turnstile> {V:T; V:=Val v;; e} : T'", "have \"P,h' \\<turnstile> l' (:\\<le>) E(V\\<mapsto>T)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>P,?E,h \\<turnstile> e : ?T;\n   P,h \\<turnstile> l(V \\<mapsto> v) (:\\<le>) ?E\\<rbrakk>\n  \\<Longrightarrow> P,h' \\<turnstile> l' (:\\<le>) ?E\n  P,h \\<turnstile> l (:\\<le>) E\n  P,E,h \\<turnstile> {V:T; V:=Val v;; e} : T'\n\ngoal (1 subgoal):\n 1. P,h' \\<turnstile> l' (:\\<le>) E(V \\<mapsto> T)", "by(auto simp del: fun_upd_apply simp: fun_upd_same lconf_upd2 conf_def)"], ["proof (state)\nthis:\n  P,h' \\<turnstile> l' (:\\<le>) E(V \\<mapsto> T)\n\ngoal (53 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 53 subgoals...", "ultimately"], ["proof (chain)\npicking this:\n  P,h' \\<turnstile> l (:\\<le>) E\n  P,h' \\<turnstile> l' (:\\<le>) E(V \\<mapsto> T)", "show \"P,h' \\<turnstile> l'(V := l V) (:\\<le>) E\""], ["proof (prove)\nusing this:\n  P,h' \\<turnstile> l (:\\<le>) E\n  P,h' \\<turnstile> l' (:\\<le>) E(V \\<mapsto> T)\n\ngoal (1 subgoal):\n 1. P,h' \\<turnstile> l'(V := l V) (:\\<le>) E", "by (fastforce simp:lconf_def split:if_split_asm)"], ["proof (state)\nthis:\n  P,h' \\<turnstile> l'(V := l V) (:\\<le>) E\n\ngoal (52 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 52 subgoals...", "next"], ["proof (state)\ngoal (52 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 52 subgoals...", "case (BlockRedNone e h l V e' h' l' T T')"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n  \\<lbrakk>P,?E,h \\<turnstile> e : ?T;\n   P,h \\<turnstile> l(V := None) (:\\<le>) ?E\\<rbrakk>\n  \\<Longrightarrow> P,h' \\<turnstile> l' (:\\<le>) ?E\n  l' V = None\n  \\<not> assigned V e\n  P,E,h \\<turnstile> {V:T; e} : T'\n  P,h \\<turnstile> l (:\\<le>) E\n\ngoal (52 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 52 subgoals...", "have red: \"P \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow> \\<langle>e',(h', l')\\<rangle>\"\n   and IH: \"\\<And>E T. \\<lbrakk> P,E,h \\<turnstile> e : T; P,h \\<turnstile> l(V:=None) (:\\<le>) E \\<rbrakk>\n                   \\<Longrightarrow> P,h' \\<turnstile> l' (:\\<le>) E\"\n   and lconf: \"P,h \\<turnstile> l (:\\<le>) E\" and wt: \"P,E,h \\<turnstile> {V:T; e} : T'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                    \\<langle>e',(h', l')\\<rangle> &&&\n     (\\<And>E T.\n         \\<lbrakk>P,E,h \\<turnstile> e : T;\n          P,h \\<turnstile> l(V := None) (:\\<le>) E\\<rbrakk>\n         \\<Longrightarrow> P,h' \\<turnstile> l' (:\\<le>) E)) &&&\n    P,h \\<turnstile> l (:\\<le>) E &&& P,E,h \\<turnstile> {V:T; e} : T'", "by fact+"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n  \\<lbrakk>P,?E,h \\<turnstile> e : ?T;\n   P,h \\<turnstile> l(V := None) (:\\<le>) ?E\\<rbrakk>\n  \\<Longrightarrow> P,h' \\<turnstile> l' (:\\<le>) ?E\n  P,h \\<turnstile> l (:\\<le>) E\n  P,E,h \\<turnstile> {V:T; e} : T'\n\ngoal (52 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 52 subgoals...", "from lconf_hext[OF lconf red_hext_incr[OF red]]"], ["proof (chain)\npicking this:\n  P,h' \\<turnstile> l (:\\<le>) E", "have \"P,h' \\<turnstile> l (:\\<le>) E\""], ["proof (prove)\nusing this:\n  P,h' \\<turnstile> l (:\\<le>) E\n\ngoal (1 subgoal):\n 1. P,h' \\<turnstile> l (:\\<le>) E", "."], ["proof (state)\nthis:\n  P,h' \\<turnstile> l (:\\<le>) E\n\ngoal (52 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 52 subgoals...", "moreover"], ["proof (state)\nthis:\n  P,h' \\<turnstile> l (:\\<le>) E\n\ngoal (52 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 52 subgoals...", "have \"P,h' \\<turnstile> l' (:\\<le>) E(V\\<mapsto>T)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,h' \\<turnstile> l' (:\\<le>) E(V \\<mapsto> T)", "by(rule IH, insert lconf wt, auto simp:lconf_def)"], ["proof (state)\nthis:\n  P,h' \\<turnstile> l' (:\\<le>) E(V \\<mapsto> T)\n\ngoal (52 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 52 subgoals...", "ultimately"], ["proof (chain)\npicking this:\n  P,h' \\<turnstile> l (:\\<le>) E\n  P,h' \\<turnstile> l' (:\\<le>) E(V \\<mapsto> T)", "show \"P,h' \\<turnstile> l'(V := l V) (:\\<le>) E\""], ["proof (prove)\nusing this:\n  P,h' \\<turnstile> l (:\\<le>) E\n  P,h' \\<turnstile> l' (:\\<le>) E(V \\<mapsto> T)\n\ngoal (1 subgoal):\n 1. P,h' \\<turnstile> l'(V := l V) (:\\<le>) E", "by (fastforce simp:lconf_def split:if_split_asm)"], ["proof (state)\nthis:\n  P,h' \\<turnstile> l'(V := l V) (:\\<le>) E\n\ngoal (51 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 51 subgoals...", "next"], ["proof (state)\ngoal (51 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 51 subgoals...", "case (BlockRedSome e h l V e' h' l' v T T')"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n  \\<lbrakk>P,?E,h \\<turnstile> e : ?T;\n   P,h \\<turnstile> l(V := None) (:\\<le>) ?E\\<rbrakk>\n  \\<Longrightarrow> P,h' \\<turnstile> l' (:\\<le>) ?E\n  l' V = \\<lfloor>v\\<rfloor>\n  \\<not> assigned V e\n  P,E,h \\<turnstile> {V:T; e} : T'\n  P,h \\<turnstile> l (:\\<le>) E\n\ngoal (51 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 51 subgoals...", "have red: \"P \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow> \\<langle>e',(h', l')\\<rangle>\"\n   and IH: \"\\<And>E T. \\<lbrakk>P,E,h \\<turnstile> e : T; P,h \\<turnstile> l(V:=None) (:\\<le>) E\\<rbrakk>\n                   \\<Longrightarrow> P,h' \\<turnstile> l' (:\\<le>) E\"\n   and lconf: \"P,h \\<turnstile> l (:\\<le>) E\" and wt: \"P,E,h \\<turnstile> {V:T; e} : T'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                    \\<langle>e',(h', l')\\<rangle> &&&\n     (\\<And>E T.\n         \\<lbrakk>P,E,h \\<turnstile> e : T;\n          P,h \\<turnstile> l(V := None) (:\\<le>) E\\<rbrakk>\n         \\<Longrightarrow> P,h' \\<turnstile> l' (:\\<le>) E)) &&&\n    P,h \\<turnstile> l (:\\<le>) E &&& P,E,h \\<turnstile> {V:T; e} : T'", "by fact+"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n  \\<lbrakk>P,?E,h \\<turnstile> e : ?T;\n   P,h \\<turnstile> l(V := None) (:\\<le>) ?E\\<rbrakk>\n  \\<Longrightarrow> P,h' \\<turnstile> l' (:\\<le>) ?E\n  P,h \\<turnstile> l (:\\<le>) E\n  P,E,h \\<turnstile> {V:T; e} : T'\n\ngoal (51 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 51 subgoals...", "from lconf_hext[OF lconf red_hext_incr[OF red]]"], ["proof (chain)\npicking this:\n  P,h' \\<turnstile> l (:\\<le>) E", "have \"P,h' \\<turnstile> l (:\\<le>) E\""], ["proof (prove)\nusing this:\n  P,h' \\<turnstile> l (:\\<le>) E\n\ngoal (1 subgoal):\n 1. P,h' \\<turnstile> l (:\\<le>) E", "."], ["proof (state)\nthis:\n  P,h' \\<turnstile> l (:\\<le>) E\n\ngoal (51 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 51 subgoals...", "moreover"], ["proof (state)\nthis:\n  P,h' \\<turnstile> l (:\\<le>) E\n\ngoal (51 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 51 subgoals...", "have \"P,h' \\<turnstile> l' (:\\<le>) E(V\\<mapsto>T)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,h' \\<turnstile> l' (:\\<le>) E(V \\<mapsto> T)", "by(rule IH, insert lconf wt, auto simp:lconf_def)"], ["proof (state)\nthis:\n  P,h' \\<turnstile> l' (:\\<le>) E(V \\<mapsto> T)\n\ngoal (51 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 51 subgoals...", "ultimately"], ["proof (chain)\npicking this:\n  P,h' \\<turnstile> l (:\\<le>) E\n  P,h' \\<turnstile> l' (:\\<le>) E(V \\<mapsto> T)", "show \"P,h' \\<turnstile> l'(V := l V) (:\\<le>) E\""], ["proof (prove)\nusing this:\n  P,h' \\<turnstile> l (:\\<le>) E\n  P,h' \\<turnstile> l' (:\\<le>) E(V \\<mapsto> T)\n\ngoal (1 subgoal):\n 1. P,h' \\<turnstile> l'(V := l V) (:\\<le>) E", "by (fastforce simp:lconf_def split:if_split_asm)"], ["proof (state)\nthis:\n  P,h' \\<turnstile> l'(V := l V) (:\\<le>) E\n\ngoal (50 subgoals):\n 1. \\<And>h C l T E.\n       \\<lbrakk>new_Addr h = None; P,E,h \\<turnstile> new C : T;\n        P,h \\<turnstile> l (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,h \\<turnstile> l (:\\<le>) E\n 2. \\<And>e a b e' aa ba C T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Cast C e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 3. \\<And>C a b T E.\n       \\<lbrakk>P,E,a \\<turnstile> Cast C null : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 4. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 5. \\<And>a b aa D fs C T E.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E,a \\<turnstile> Cast C (addr aa) : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop T E.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>T E.\n           \\<lbrakk>P,E,a \\<turnstile> e : T;\n            P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n           \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b T E.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T;\n        P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 9. \\<And>a b V v T E.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E,a \\<turnstile> Var V : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n       \\<Longrightarrow> P,a \\<turnstile> b (:\\<le>) E\n 10. \\<And>e a b e' aa ba V T E.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>T E.\n            \\<lbrakk>P,E,a \\<turnstile> e : T;\n             P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n            \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E;\n         P,E,a \\<turnstile> V:=e : T; P,a \\<turnstile> b (:\\<le>) E\\<rbrakk>\n        \\<Longrightarrow> P,aa \\<turnstile> ba (:\\<le>) E\nA total of 50 subgoals...", "qed auto"], ["", "(*>*)"], ["", "text\\<open>Preservation of definite assignment more complex and requires a\nfew lemmas first.\\<close>"], ["", "lemma [iff]: \"\\<And>A. \\<lbrakk> length Vs = length Ts; length vs = length Ts\\<rbrakk> \\<Longrightarrow>\n \\<D> (blocks (Vs,Ts,vs,e)) A = \\<D> e (A \\<squnion> \\<lfloor>set Vs\\<rfloor>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>A.\n       \\<lbrakk>length Vs = length Ts; length vs = length Ts\\<rbrakk>\n       \\<Longrightarrow> \\<D> (blocks (Vs, Ts, vs, e)) A =\n                         \\<D> e (A \\<squnion> \\<lfloor>set Vs\\<rfloor>)", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>A.\n       \\<lbrakk>length Vs = length Ts; length vs = length Ts\\<rbrakk>\n       \\<Longrightarrow> \\<D> (blocks (Vs, Ts, vs, e)) A =\n                         \\<D> e (A \\<squnion> \\<lfloor>set Vs\\<rfloor>)", "apply(induct Vs Ts vs e rule:blocks_induct)"], ["proof (prove)\ngoal (8 subgoals):\n 1. \\<And>V Vs T Ts v vs e A.\n       \\<lbrakk>\\<And>A.\n                   \\<lbrakk>length Vs = length Ts;\n                    length vs = length Ts\\<rbrakk>\n                   \\<Longrightarrow> \\<D> (blocks (Vs, Ts, vs, e)) A =\n                                     \\<D> e\n(A \\<squnion> \\<lfloor>set Vs\\<rfloor>);\n        length (V # Vs) = length (T # Ts);\n        length (v # vs) = length (T # Ts)\\<rbrakk>\n       \\<Longrightarrow> \\<D> (blocks (V # Vs, T # Ts, v # vs, e)) A =\n                         \\<D> e\n                          (A \\<squnion> \\<lfloor>set (V # Vs)\\<rfloor>)\n 2. \\<And>e A.\n       \\<lbrakk>length [] = length []; length [] = length []\\<rbrakk>\n       \\<Longrightarrow> \\<D> (blocks ([], [], [], e)) A =\n                         \\<D> e (A \\<squnion> \\<lfloor>set []\\<rfloor>)\n 3. \\<And>vc vd a b A.\n       \\<lbrakk>length [] = length (vc # vd);\n        length a = length (vc # vd)\\<rbrakk>\n       \\<Longrightarrow> \\<D> (blocks ([], vc # vd, a, b)) A =\n                         \\<D> b (A \\<squnion> \\<lfloor>set []\\<rfloor>)\n 4. \\<And>v ve vf vd A.\n       \\<lbrakk>length [] = length v; length (ve # vf) = length v\\<rbrakk>\n       \\<Longrightarrow> \\<D> (blocks ([], v, ve # vf, vd)) A =\n                         \\<D> vd (A \\<squnion> \\<lfloor>set []\\<rfloor>)\n 5. \\<And>va vb a b A.\n       \\<lbrakk>length (va # vb) = length []; length a = length []\\<rbrakk>\n       \\<Longrightarrow> \\<D> (blocks (va # vb, [], a, b)) A =\n                         \\<D> b\n                          (A \\<squnion> \\<lfloor>set (va # vb)\\<rfloor>)\n 6. \\<And>v vd ve vb A.\n       \\<lbrakk>length v = length []; length (vd # ve) = length []\\<rbrakk>\n       \\<Longrightarrow> \\<D> (blocks (v, [], vd # ve, vb)) A =\n                         \\<D> vb (A \\<squnion> \\<lfloor>set v\\<rfloor>)\n 7. \\<And>va vc vb ve A.\n       \\<lbrakk>length (va # vc) = length vb; length [] = length vb\\<rbrakk>\n       \\<Longrightarrow> \\<D> (blocks (va # vc, vb, [], ve)) A =\n                         \\<D> ve\n                          (A \\<squnion> \\<lfloor>set (va # vc)\\<rfloor>)\n 8. \\<And>v va vc ve A.\n       \\<lbrakk>length v = length (va # vc);\n        length [] = length (va # vc)\\<rbrakk>\n       \\<Longrightarrow> \\<D> (blocks (v, va # vc, [], ve)) A =\n                         \\<D> ve (A \\<squnion> \\<lfloor>set v\\<rfloor>)", "apply(simp_all add:hyperset_defs)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "(*>*)"], ["", "lemma red_lA_incr: \"P \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',(h',l')\\<rangle> \\<Longrightarrow> \\<lfloor>dom l\\<rfloor> \\<squnion> \\<A> e \\<sqsubseteq>  \\<lfloor>dom l'\\<rfloor> \\<squnion> \\<A> e'\"\nand reds_lA_incr: \"P \\<turnstile> \\<langle>es,(h,l)\\<rangle> [\\<rightarrow>] \\<langle>es',(h',l')\\<rangle> \\<Longrightarrow> \\<lfloor>dom l\\<rfloor> \\<squnion> \\<A>s es \\<sqsubseteq>  \\<lfloor>dom l'\\<rfloor> \\<squnion> \\<A>s es'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',(h', l')\\<rangle> \\<Longrightarrow>\n     \\<lfloor>dom l\\<rfloor> \\<squnion> \\<A> e \\<sqsubseteq>\n     \\<lfloor>dom l'\\<rfloor> \\<squnion> \\<A> e') &&&\n    (P \\<turnstile> \\<langle>es,(h, l)\\<rangle> [\\<rightarrow>]\n                    \\<langle>es',(h', l')\\<rangle> \\<Longrightarrow>\n     \\<lfloor>dom l\\<rfloor> \\<squnion> \\<A>s es \\<sqsubseteq>\n     \\<lfloor>dom l'\\<rfloor> \\<squnion> \\<A>s es')", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',(h', l')\\<rangle> \\<Longrightarrow>\n     \\<lfloor>dom l\\<rfloor> \\<squnion> \\<A> e \\<sqsubseteq>\n     \\<lfloor>dom l'\\<rfloor> \\<squnion> \\<A> e') &&&\n    (P \\<turnstile> \\<langle>es,(h, l)\\<rangle> [\\<rightarrow>]\n                    \\<langle>es',(h', l')\\<rangle> \\<Longrightarrow>\n     \\<lfloor>dom l\\<rfloor> \\<squnion> \\<A>s es \\<sqsubseteq>\n     \\<lfloor>dom l'\\<rfloor> \\<squnion> \\<A>s es')", "apply(induct rule:red_reds_inducts)"], ["proof (prove)\ngoal (56 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs))\\<rbrakk>\n       \\<Longrightarrow> \\<lfloor>dom l\\<rfloor> \\<squnion>\n                         \\<A> (new C) \\<sqsubseteq>\n                         \\<lfloor>dom l\\<rfloor> \\<squnion> \\<A> (addr a)\n 2. \\<And>h C l.\n       new_Addr h = None \\<Longrightarrow>\n       \\<lfloor>dom l\\<rfloor> \\<squnion> \\<A> (new C) \\<sqsubseteq>\n       \\<lfloor>dom l\\<rfloor> \\<squnion> \\<A> (THROW OutOfMemory)\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<lfloor>dom b\\<rfloor> \\<squnion> \\<A> e \\<sqsubseteq>\n        \\<lfloor>dom ba\\<rfloor> \\<squnion> \\<A> e'\\<rbrakk>\n       \\<Longrightarrow> \\<lfloor>dom b\\<rfloor> \\<squnion>\n                         \\<A> (Cast C e) \\<sqsubseteq>\n                         \\<lfloor>dom ba\\<rfloor> \\<squnion>\n                         \\<A> (Cast C e')\n 4. \\<And>C a b.\n       \\<lfloor>dom b\\<rfloor> \\<squnion> \\<A> (Cast C null) \\<sqsubseteq>\n       \\<lfloor>dom b\\<rfloor> \\<squnion> \\<A> null\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C\\<rbrakk>\n       \\<Longrightarrow> \\<lfloor>dom b\\<rfloor> \\<squnion>\n                         \\<A> (Cast C (addr aa)) \\<sqsubseteq>\n                         \\<lfloor>dom b\\<rfloor> \\<squnion> \\<A> (addr aa)\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> \\<lfloor>dom b\\<rfloor> \\<squnion>\n                         \\<A> (Cast C (addr aa)) \\<sqsubseteq>\n                         \\<lfloor>dom b\\<rfloor> \\<squnion>\n                         \\<A> (THROW ClassCast)\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<lfloor>dom b\\<rfloor> \\<squnion> \\<A> e \\<sqsubseteq>\n        \\<lfloor>dom ba\\<rfloor> \\<squnion> \\<A> e'\\<rbrakk>\n       \\<Longrightarrow> \\<lfloor>dom b\\<rfloor> \\<squnion>\n                         \\<A>\n                          (e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2) \\<sqsubseteq>\n                         \\<lfloor>dom ba\\<rfloor> \\<squnion>\n                         \\<A>\n                          (e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<lfloor>dom b\\<rfloor> \\<squnion> \\<A> e \\<sqsubseteq>\n        \\<lfloor>dom ba\\<rfloor> \\<squnion> \\<A> e'\\<rbrakk>\n       \\<Longrightarrow> \\<lfloor>dom b\\<rfloor> \\<squnion>\n                         \\<A>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e) \\<sqsubseteq>\n                         \\<lfloor>dom ba\\<rfloor> \\<squnion>\n                         \\<A>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       binop (bop, v\\<^sub>1, v\\<^sub>2) =\n       \\<lfloor>v\\<rfloor> \\<Longrightarrow>\n       \\<lfloor>dom b\\<rfloor> \\<squnion>\n       \\<A>\n        (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n                       v\\<^sub>2) \\<sqsubseteq>\n       \\<lfloor>dom b\\<rfloor> \\<squnion> \\<A> (Val v)\n 10. \\<And>a b V v.\n        lcl (a, b) V = \\<lfloor>v\\<rfloor> \\<Longrightarrow>\n        \\<lfloor>dom b\\<rfloor> \\<squnion> \\<A> (Var V) \\<sqsubseteq>\n        \\<lfloor>dom b\\<rfloor> \\<squnion> \\<A> (Val v)\nA total of 56 subgoals...", "apply(simp_all del:fun_upd_apply add:hyperset_defs)"], ["proof (prove)\ngoal (18 subgoals):\n 1. \\<And>e a b e' aa ba e\\<^sub>2 x2 x2a x2b x2c.\n       \\<lbrakk>x2b \\<subseteq> x2;\n        P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                       \\<langle>e',(aa, ba)\\<rangle>;\n        \\<A> e' = \\<lfloor>x2a\\<rfloor>; dom ba \\<union> x2a = x2;\n        \\<A> e = \\<lfloor>x2c\\<rfloor>; dom b \\<union> x2c = x2b\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x2.\n                            \\<A> e\\<^sub>2 =\n                            \\<lfloor>x2\\<rfloor> \\<longrightarrow>\n                            dom b\n                            \\<subseteq> dom ba \\<union>\n  (x2a \\<union> x2) \\<and>\n                            x2c\n                            \\<subseteq> dom ba \\<union>\n  (x2a \\<union> x2) \\<and>\n                            x2 \\<subseteq> dom ba \\<union> (x2a \\<union> x2)\n 2. \\<And>e a b e' aa ba x2 x2a x2b x2c.\n       \\<lbrakk>x2b \\<subseteq> x2;\n        P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                       \\<langle>e',(aa, ba)\\<rangle>;\n        \\<A> e' = \\<lfloor>x2a\\<rfloor>; dom ba \\<union> x2a = x2;\n        \\<A> e = \\<lfloor>x2c\\<rfloor>; dom b \\<union> x2c = x2b\\<rbrakk>\n       \\<Longrightarrow> dom b \\<subseteq> x2 \\<and> x2c \\<subseteq> x2\n 3. \\<And>e a b e' aa ba V x2 x2a x2b x2c.\n       \\<lbrakk>x2b \\<subseteq> x2;\n        P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                       \\<langle>e',(aa, ba)\\<rangle>;\n        \\<A> e' = \\<lfloor>x2a\\<rfloor>; dom ba \\<union> x2a = x2;\n        \\<A> e = \\<lfloor>x2c\\<rfloor>; dom b \\<union> x2c = x2b\\<rbrakk>\n       \\<Longrightarrow> dom b \\<subseteq> insert V x2 \\<and>\n                         x2c \\<subseteq> insert V x2\n 4. \\<And>e a b e' aa ba e\\<^sub>2 x2 x2a x2b x2c.\n       \\<lbrakk>x2b \\<subseteq> x2;\n        P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                       \\<langle>e',(aa, ba)\\<rangle>;\n        \\<A> e' = \\<lfloor>x2a\\<rfloor>; dom ba \\<union> x2a = x2;\n        \\<A> e = \\<lfloor>x2c\\<rfloor>; dom b \\<union> x2c = x2b\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x2.\n                            \\<A> e\\<^sub>2 =\n                            \\<lfloor>x2\\<rfloor> \\<longrightarrow>\n                            dom b\n                            \\<subseteq> dom ba \\<union>\n  (x2a \\<union> x2) \\<and>\n                            x2c\n                            \\<subseteq> dom ba \\<union>\n  (x2a \\<union> x2) \\<and>\n                            x2 \\<subseteq> dom ba \\<union> (x2a \\<union> x2)\n 5. \\<And>e a b e' aa ba x2 x2a x2b x2c.\n       \\<lbrakk>x2b \\<subseteq> x2;\n        P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                       \\<langle>e',(aa, ba)\\<rangle>;\n        \\<A> e' = \\<lfloor>x2a\\<rfloor>; dom ba \\<union> x2a = x2;\n        \\<A> e = \\<lfloor>x2c\\<rfloor>; dom b \\<union> x2c = x2b\\<rbrakk>\n       \\<Longrightarrow> dom b \\<subseteq> x2 \\<and> x2c \\<subseteq> x2\n 6. \\<And>e a b e' aa ba es x2 x2a x2b x2c.\n       \\<lbrakk>x2b \\<subseteq> x2;\n        P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                       \\<langle>e',(aa, ba)\\<rangle>;\n        \\<A> e' = \\<lfloor>x2a\\<rfloor>; dom ba \\<union> x2a = x2;\n        \\<A> e = \\<lfloor>x2c\\<rfloor>; dom b \\<union> x2c = x2b\\<rbrakk>\n       \\<Longrightarrow> \\<forall>x2.\n                            \\<A>s es =\n                            \\<lfloor>x2\\<rfloor> \\<longrightarrow>\n                            dom b\n                            \\<subseteq> dom ba \\<union>\n  (x2a \\<union> x2) \\<and>\n                            x2c\n                            \\<subseteq> dom ba \\<union>\n  (x2a \\<union> x2) \\<and>\n                            x2 \\<subseteq> dom ba \\<union> (x2a \\<union> x2)\n 7. \\<And>es a b es' aa ba x2 x2a x2b x2c.\n       \\<lbrakk>x2b \\<subseteq> x2;\n        P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                       \\<langle>es',(aa, ba)\\<rangle>;\n        \\<A>s es' = \\<lfloor>x2a\\<rfloor>; dom ba \\<union> x2a = x2;\n        \\<A>s es = \\<lfloor>x2c\\<rfloor>; dom b \\<union> x2c = x2b\\<rbrakk>\n       \\<Longrightarrow> dom b \\<subseteq> x2 \\<and> x2c \\<subseteq> x2\n 8. \\<And>e h l V e' h' l' x2 x2a x2b x2c.\n       \\<lbrakk>x2b \\<subseteq> x2; l' V = None; \\<not> assigned V e;\n        P \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                       \\<langle>e',(h', l')\\<rangle>;\n        \\<A> e' = \\<lfloor>x2a\\<rfloor>; dom l' \\<union> x2a = x2;\n        \\<A> e = \\<lfloor>x2c\\<rfloor>;\n        dom l - {V} \\<union> x2c = x2b\\<rbrakk>\n       \\<Longrightarrow> (l V = None \\<longrightarrow>\n                          dom l\n                          \\<subseteq> dom l' - {V} \\<union>\n(x2a - {V}) \\<and>\n                          x2c - {V}\n                          \\<subseteq> dom l' - {V} \\<union>\n(x2a - {V})) \\<and>\n                         ((\\<exists>y.\n                              l V = \\<lfloor>y\\<rfloor>) \\<longrightarrow>\n                          dom l\n                          \\<subseteq> insert V\n (dom l' \\<union> (x2a - {V})) \\<and>\n                          x2c - {V}\n                          \\<subseteq> insert V\n (dom l' \\<union> (x2a - {V})))\n 9. \\<And>e h l V e' h' l' v x2 x2a x2b x2c.\n       \\<lbrakk>x2b \\<subseteq> x2; l' V = \\<lfloor>v\\<rfloor>;\n        \\<not> assigned V e;\n        P \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                       \\<langle>e',(h', l')\\<rangle>;\n        \\<A> e' = \\<lfloor>x2a\\<rfloor>; dom l' \\<union> x2a = x2;\n        \\<A> e = \\<lfloor>x2c\\<rfloor>;\n        dom l - {V} \\<union> x2c = x2b\\<rbrakk>\n       \\<Longrightarrow> (l V = None \\<longrightarrow>\n                          dom l\n                          \\<subseteq> dom l' - {V} \\<union>\n(x2a - {V}) \\<and>\n                          x2c - {V}\n                          \\<subseteq> dom l' - {V} \\<union>\n(x2a - {V})) \\<and>\n                         ((\\<exists>y.\n                              l V = \\<lfloor>y\\<rfloor>) \\<longrightarrow>\n                          dom l\n                          \\<subseteq> insert V\n (dom l' \\<union> (x2a - {V})) \\<and>\n                          x2c - {V}\n                          \\<subseteq> insert V\n (dom l' \\<union> (x2a - {V})))\n 10. \\<And>e h l V v e' h' l' v' x2 x2a x2b x2c.\n        \\<lbrakk>x2b \\<subseteq> x2; l' V = \\<lfloor>v'\\<rfloor>;\n         P \\<turnstile> \\<langle>e,\n                         (h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                        \\<langle>e',(h', l')\\<rangle>;\n         \\<A> e' = \\<lfloor>x2a\\<rfloor>; dom l' \\<union> x2a = x2;\n         \\<A> e = \\<lfloor>x2c\\<rfloor>;\n         insert V (dom l \\<union> x2c) = x2b\\<rbrakk>\n        \\<Longrightarrow> (l V = None \\<longrightarrow>\n                           dom l\n                           \\<subseteq> dom l' - {V} \\<union>\n (x2a - {V}) \\<and>\n                           x2c - {V}\n                           \\<subseteq> dom l' - {V} \\<union>\n (x2a - {V})) \\<and>\n                          ((\\<exists>y.\n                               l V = \\<lfloor>y\\<rfloor>) \\<longrightarrow>\n                           dom l\n                           \\<subseteq> insert V\n  (dom l' \\<union> (x2a - {V})) \\<and>\n                           x2c - {V}\n                           \\<subseteq> insert V\n  (dom l' \\<union> (x2a - {V})))\nA total of 18 subgoals...", "apply auto"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<And>e a b e' aa ba e\\<^sub>2 x2 x y.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<A> e' = None; \\<A> e = None;\n        \\<A> e\\<^sub>2 = \\<lfloor>x2\\<rfloor>; b x = \\<lfloor>y\\<rfloor>;\n        ba x = None\\<rbrakk>\n       \\<Longrightarrow> x \\<in> x2\n 2. \\<And>e a b e' aa ba V e\\<^sub>2 x2 y.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<A> e' = None; \\<A> e = None;\n        \\<A> e\\<^sub>2 = \\<lfloor>x2\\<rfloor>; b V = \\<lfloor>y\\<rfloor>;\n        ba V = None\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>e a b e' aa ba e\\<^sub>2 x2 x2a x y.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<A> e' = None; \\<A> e = \\<lfloor>x2\\<rfloor>;\n        \\<A> e\\<^sub>2 = \\<lfloor>x2a\\<rfloor>; b x = \\<lfloor>y\\<rfloor>;\n        ba x = None\\<rbrakk>\n       \\<Longrightarrow> x \\<in> x2a\n 4. \\<And>e a b e' aa ba V e\\<^sub>2 x2 x2a y.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<A> e' = None; \\<A> e = \\<lfloor>x2\\<rfloor>;\n        \\<A> e\\<^sub>2 = \\<lfloor>x2a\\<rfloor>; b V = \\<lfloor>y\\<rfloor>;\n        ba V = None\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>e a b e' aa ba e\\<^sub>2 x2a x2c x2d x y.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<A> e' = \\<lfloor>x2a\\<rfloor>; \\<A> e = \\<lfloor>x2c\\<rfloor>;\n        \\<A> e\\<^sub>2 = \\<lfloor>x2d\\<rfloor>; b x = \\<lfloor>y\\<rfloor>;\n        ba x = None; dom b \\<subseteq> dom ba \\<union> x2a;\n        x2c \\<subseteq> dom ba \\<union> x2a\\<rbrakk>\n       \\<Longrightarrow> x \\<in> x2d\n 6. \\<And>e a b e' aa ba V e\\<^sub>2 x2a x2c x2d y.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<A> e' = \\<lfloor>x2a\\<rfloor>; \\<A> e = \\<lfloor>x2c\\<rfloor>;\n        \\<A> e\\<^sub>2 = \\<lfloor>x2d\\<rfloor>; b V = \\<lfloor>y\\<rfloor>;\n        ba V = None; dom b \\<subseteq> dom ba \\<union> x2a;\n        x2c \\<subseteq> dom ba \\<union> x2a\\<rbrakk>\n       \\<Longrightarrow> False", "apply(blast dest:red_lcl_incr)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "(*>*)"], ["", "text\\<open>Now preservation of definite assignment.\\<close>"], ["", "lemma assumes wf: \"wf_J_prog P\"\nshows red_preserves_defass:\n  \"P \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',(h',l')\\<rangle> \\<Longrightarrow> \\<D> e \\<lfloor>dom l\\<rfloor> \\<Longrightarrow> \\<D> e' \\<lfloor>dom l'\\<rfloor>\"\nand \"P \\<turnstile> \\<langle>es,(h,l)\\<rangle> [\\<rightarrow>] \\<langle>es',(h',l')\\<rangle> \\<Longrightarrow> \\<D>s es \\<lfloor>dom l\\<rfloor> \\<Longrightarrow> \\<D>s es' \\<lfloor>dom l'\\<rfloor>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lbrakk>P \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                             \\<langle>e',(h', l')\\<rangle>;\n      \\<D> e \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n     \\<Longrightarrow> \\<D> e' \\<lfloor>dom l'\\<rfloor>) &&&\n    (\\<lbrakk>P \\<turnstile> \\<langle>es,(h, l)\\<rangle> [\\<rightarrow>]\n                             \\<langle>es',(h', l')\\<rangle>;\n      \\<D>s es \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n     \\<Longrightarrow> \\<D>s es' \\<lfloor>dom l'\\<rfloor>)", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lbrakk>P \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                             \\<langle>e',(h', l')\\<rangle>;\n      \\<D> e \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n     \\<Longrightarrow> \\<D> e' \\<lfloor>dom l'\\<rfloor>) &&&\n    (\\<lbrakk>P \\<turnstile> \\<langle>es,(h, l)\\<rangle> [\\<rightarrow>]\n                             \\<langle>es',(h', l')\\<rangle>;\n      \\<D>s es \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n     \\<Longrightarrow> \\<D>s es' \\<lfloor>dom l'\\<rfloor>)", "proof (induct rule:red_reds_inducts)"], ["proof (state)\ngoal (56 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>a b V v.\n        \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n         \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\nA total of 56 subgoals...", "case BinOpRed1"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<D> e_ \\<lfloor>dom b___\\<rfloor> \\<Longrightarrow>\n  \\<D> e'_ \\<lfloor>dom b_\\<rfloor>\n  \\<D> (e_ \\<guillemotleft>bop_\\<guillemotright> e\\<^sub>2_)\n   \\<lfloor>dom b___\\<rfloor>\n\ngoal (56 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2)\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>a b V v.\n        \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n         \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\nA total of 56 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<D> e_ \\<lfloor>dom b___\\<rfloor> \\<Longrightarrow>\n  \\<D> e'_ \\<lfloor>dom b_\\<rfloor>\n  \\<D> (e_ \\<guillemotleft>bop_\\<guillemotright> e\\<^sub>2_)\n   \\<lfloor>dom b___\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> (e'_ \\<guillemotleft>bop_\\<guillemotright> e\\<^sub>2_)\n     \\<lfloor>dom b_\\<rfloor>", "by (auto elim!: D_mono[OF red_lA_incr])"], ["proof (state)\nthis:\n  \\<D> (e'_ \\<guillemotleft>bop_\\<guillemotright> e\\<^sub>2_)\n   \\<lfloor>dom b_\\<rfloor>\n\ngoal (55 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 55 subgoals...", "next"], ["proof (state)\ngoal (55 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 55 subgoals...", "case FAssRed1"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<D> e_ \\<lfloor>dom b___\\<rfloor> \\<Longrightarrow>\n  \\<D> e'_ \\<lfloor>dom b_\\<rfloor>\n  \\<D> (e_\\<bullet>F_{D_} := e\\<^sub>2_) \\<lfloor>dom b___\\<rfloor>\n\ngoal (55 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 55 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<D> e_ \\<lfloor>dom b___\\<rfloor> \\<Longrightarrow>\n  \\<D> e'_ \\<lfloor>dom b_\\<rfloor>\n  \\<D> (e_\\<bullet>F_{D_} := e\\<^sub>2_) \\<lfloor>dom b___\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> (e'_\\<bullet>F_{D_} := e\\<^sub>2_) \\<lfloor>dom b_\\<rfloor>", "by (auto elim!: D_mono[OF red_lA_incr])"], ["proof (state)\nthis:\n  \\<D> (e'_\\<bullet>F_{D_} := e\\<^sub>2_) \\<lfloor>dom b_\\<rfloor>\n\ngoal (54 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 54 subgoals...", "next"], ["proof (state)\ngoal (54 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 54 subgoals...", "case CallObj"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<D> e_ \\<lfloor>dom b___\\<rfloor> \\<Longrightarrow>\n  \\<D> e'_ \\<lfloor>dom b_\\<rfloor>\n  \\<D> (e_\\<bullet>M_(es_)) \\<lfloor>dom b___\\<rfloor>\n\ngoal (54 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 54 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<D> e_ \\<lfloor>dom b___\\<rfloor> \\<Longrightarrow>\n  \\<D> e'_ \\<lfloor>dom b_\\<rfloor>\n  \\<D> (e_\\<bullet>M_(es_)) \\<lfloor>dom b___\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> (e'_\\<bullet>M_(es_)) \\<lfloor>dom b_\\<rfloor>", "by (auto elim!: Ds_mono[OF red_lA_incr])"], ["proof (state)\nthis:\n  \\<D> (e'_\\<bullet>M_(es_)) \\<lfloor>dom b_\\<rfloor>\n\ngoal (53 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 53 subgoals...", "next"], ["proof (state)\ngoal (53 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 53 subgoals...", "case RedCall"], ["proof (state)\nthis:\n  hp (a___, b_) a_ = \\<lfloor>(C_, fs_)\\<rfloor>\n  P \\<turnstile> C_ sees M_: Ts_\\<rightarrow>T_ = (pns_, body_) in D_\n  length vs_ = length pns_\n  length Ts_ = length pns_\n  \\<D> (addr a_\\<bullet>M_(map Val vs_)) \\<lfloor>dom b_\\<rfloor>\n\ngoal (53 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 53 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  hp (a___, b_) a_ = \\<lfloor>(C_, fs_)\\<rfloor>\n  P \\<turnstile> C_ sees M_: Ts_\\<rightarrow>T_ = (pns_, body_) in D_\n  length vs_ = length pns_\n  length Ts_ = length pns_\n  \\<D> (addr a_\\<bullet>M_(map Val vs_)) \\<lfloor>dom b_\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> (blocks (this # pns_, Class D_ # Ts_, Addr a_ # vs_, body_))\n     \\<lfloor>dom b_\\<rfloor>", "apply (auto dest!:sees_wf_mdecl[OF wf] simp:wf_mdecl_def elim!:D_mono')"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>T'.\n       \\<lbrakk>a___ a_ = \\<lfloor>(C_, fs_)\\<rfloor>;\n        length vs_ = length pns_; length Ts_ = length pns_;\n        \\<D>s (map Val vs_) \\<lfloor>dom b_\\<rfloor>;\n        \\<forall>x\\<in>set Ts_. is_type P x; is_type P T_; distinct pns_;\n        this \\<notin> set pns_;\n        P,[pns_ [\\<mapsto>] Ts_, this \\<mapsto>\n           Class D_] \\<turnstile> body_ :: T';\n        P \\<turnstile> T' \\<le> T_\\<rbrakk>\n       \\<Longrightarrow> \\<lfloor>insert this\n                                   (set pns_)\\<rfloor> \\<sqsubseteq>\n                         \\<lfloor>insert this\n                                   (dom b_ \\<union> set pns_)\\<rfloor>", "by(auto simp:hyperset_defs)"], ["proof (state)\nthis:\n  \\<D> (blocks (this # pns_, Class D_ # Ts_, Addr a_ # vs_, body_))\n   \\<lfloor>dom b_\\<rfloor>\n\ngoal (52 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 52 subgoals...", "next"], ["proof (state)\ngoal (52 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 52 subgoals...", "case InitBlockRed"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e_,\n                  (h_, l_(V_ \\<mapsto> v_))\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(h'_, l'_)\\<rangle>\n  \\<D> e_ \\<lfloor>dom (l_(V_ \\<mapsto> v_))\\<rfloor> \\<Longrightarrow>\n  \\<D> e'_ \\<lfloor>dom l'_\\<rfloor>\n  l'_ V_ = \\<lfloor>v'_\\<rfloor>\n  \\<D> {V_:T_; V_:=Val v_;; e_} \\<lfloor>dom l_\\<rfloor>\n\ngoal (52 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 52 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e_,\n                  (h_, l_(V_ \\<mapsto> v_))\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(h'_, l'_)\\<rangle>\n  \\<D> e_ \\<lfloor>dom (l_(V_ \\<mapsto> v_))\\<rfloor> \\<Longrightarrow>\n  \\<D> e'_ \\<lfloor>dom l'_\\<rfloor>\n  l'_ V_ = \\<lfloor>v'_\\<rfloor>\n  \\<D> {V_:T_; V_:=Val v_;; e_} \\<lfloor>dom l_\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> {V_:T_; V_:=Val v'_;; e'_} \\<lfloor>dom (l'_(V_ := l_ V_))\\<rfloor>", "by(auto simp:hyperset_defs elim!:D_mono' simp del:fun_upd_apply)"], ["proof (state)\nthis:\n  \\<D> {V_:T_; V_:=Val v'_;; e'_} \\<lfloor>dom (l'_(V_ := l_ V_))\\<rfloor>\n\ngoal (51 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 51 subgoals...", "next"], ["proof (state)\ngoal (51 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 51 subgoals...", "case BlockRedNone"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e_,(h_, l_(V_ := None))\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(h'_, l'_)\\<rangle>\n  \\<D> e_ \\<lfloor>dom (l_(V_ := None))\\<rfloor> \\<Longrightarrow>\n  \\<D> e'_ \\<lfloor>dom l'_\\<rfloor>\n  l'_ V_ = None\n  \\<not> assigned V_ e_\n  \\<D> {V_:T_; e_} \\<lfloor>dom l_\\<rfloor>\n\ngoal (51 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 51 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e_,(h_, l_(V_ := None))\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(h'_, l'_)\\<rangle>\n  \\<D> e_ \\<lfloor>dom (l_(V_ := None))\\<rfloor> \\<Longrightarrow>\n  \\<D> e'_ \\<lfloor>dom l'_\\<rfloor>\n  l'_ V_ = None\n  \\<not> assigned V_ e_\n  \\<D> {V_:T_; e_} \\<lfloor>dom l_\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> {V_:T_; e'_} \\<lfloor>dom (l'_(V_ := l_ V_))\\<rfloor>", "by(auto simp:hyperset_defs elim!:D_mono' simp del:fun_upd_apply)"], ["proof (state)\nthis:\n  \\<D> {V_:T_; e'_} \\<lfloor>dom (l'_(V_ := l_ V_))\\<rfloor>\n\ngoal (50 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 50 subgoals...", "next"], ["proof (state)\ngoal (50 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 50 subgoals...", "case BlockRedSome"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e_,(h_, l_(V_ := None))\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(h'_, l'_)\\<rangle>\n  \\<D> e_ \\<lfloor>dom (l_(V_ := None))\\<rfloor> \\<Longrightarrow>\n  \\<D> e'_ \\<lfloor>dom l'_\\<rfloor>\n  l'_ V_ = \\<lfloor>v_\\<rfloor>\n  \\<not> assigned V_ e_\n  \\<D> {V_:T_; e_} \\<lfloor>dom l_\\<rfloor>\n\ngoal (50 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 50 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e_,(h_, l_(V_ := None))\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(h'_, l'_)\\<rangle>\n  \\<D> e_ \\<lfloor>dom (l_(V_ := None))\\<rfloor> \\<Longrightarrow>\n  \\<D> e'_ \\<lfloor>dom l'_\\<rfloor>\n  l'_ V_ = \\<lfloor>v_\\<rfloor>\n  \\<not> assigned V_ e_\n  \\<D> {V_:T_; e_} \\<lfloor>dom l_\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> {V_:T_; V_:=Val v_;; e'_} \\<lfloor>dom (l'_(V_ := l_ V_))\\<rfloor>", "by(auto simp:hyperset_defs elim!:D_mono' simp del:fun_upd_apply)"], ["proof (state)\nthis:\n  \\<D> {V_:T_; V_:=Val v_;; e'_} \\<lfloor>dom (l'_(V_ := l_ V_))\\<rfloor>\n\ngoal (49 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 49 subgoals...", "next"], ["proof (state)\ngoal (49 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 49 subgoals...", "case SeqRed"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<D> e_ \\<lfloor>dom b___\\<rfloor> \\<Longrightarrow>\n  \\<D> e'_ \\<lfloor>dom b_\\<rfloor>\n  \\<D> (e_;; e\\<^sub>2_) \\<lfloor>dom b___\\<rfloor>\n\ngoal (49 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 49 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<D> e_ \\<lfloor>dom b___\\<rfloor> \\<Longrightarrow>\n  \\<D> e'_ \\<lfloor>dom b_\\<rfloor>\n  \\<D> (e_;; e\\<^sub>2_) \\<lfloor>dom b___\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> (e'_;; e\\<^sub>2_) \\<lfloor>dom b_\\<rfloor>", "by (auto elim!: D_mono[OF red_lA_incr])"], ["proof (state)\nthis:\n  \\<D> (e'_;; e\\<^sub>2_) \\<lfloor>dom b_\\<rfloor>\n\ngoal (48 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 48 subgoals...", "next"], ["proof (state)\ngoal (48 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 48 subgoals...", "case CondRed"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<D> e_ \\<lfloor>dom b___\\<rfloor> \\<Longrightarrow>\n  \\<D> e'_ \\<lfloor>dom b_\\<rfloor>\n  \\<D> (if (e_) e\\<^sub>1_ else e\\<^sub>2_) \\<lfloor>dom b___\\<rfloor>\n\ngoal (48 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 48 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<D> e_ \\<lfloor>dom b___\\<rfloor> \\<Longrightarrow>\n  \\<D> e'_ \\<lfloor>dom b_\\<rfloor>\n  \\<D> (if (e_) e\\<^sub>1_ else e\\<^sub>2_) \\<lfloor>dom b___\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> (if (e'_) e\\<^sub>1_ else e\\<^sub>2_) \\<lfloor>dom b_\\<rfloor>", "by (auto elim!: D_mono[OF red_lA_incr])"], ["proof (state)\nthis:\n  \\<D> (if (e'_) e\\<^sub>1_ else e\\<^sub>2_) \\<lfloor>dom b_\\<rfloor>\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 47 subgoals...", "next"], ["proof (state)\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 47 subgoals...", "case TryRed"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<D> e_ \\<lfloor>dom b___\\<rfloor> \\<Longrightarrow>\n  \\<D> e'_ \\<lfloor>dom b_\\<rfloor>\n  \\<D> (try e_ catch(C_ V_) e\\<^sub>2_) \\<lfloor>dom b___\\<rfloor>\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 47 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<D> e_ \\<lfloor>dom b___\\<rfloor> \\<Longrightarrow>\n  \\<D> e'_ \\<lfloor>dom b_\\<rfloor>\n  \\<D> (try e_ catch(C_ V_) e\\<^sub>2_) \\<lfloor>dom b___\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> (try e'_ catch(C_ V_) e\\<^sub>2_) \\<lfloor>dom b_\\<rfloor>", "by (fastforce dest:red_lcl_incr intro:D_mono' simp:hyperset_defs)"], ["proof (state)\nthis:\n  \\<D> (try e'_ catch(C_ V_) e\\<^sub>2_) \\<lfloor>dom b_\\<rfloor>\n\ngoal (46 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 46 subgoals...", "next"], ["proof (state)\ngoal (46 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 46 subgoals...", "case ListRed1"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<D> e_ \\<lfloor>dom b___\\<rfloor> \\<Longrightarrow>\n  \\<D> e'_ \\<lfloor>dom b_\\<rfloor>\n  \\<D>s (e_ # es_) \\<lfloor>dom b___\\<rfloor>\n\ngoal (46 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 46 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<D> e_ \\<lfloor>dom b___\\<rfloor> \\<Longrightarrow>\n  \\<D> e'_ \\<lfloor>dom b_\\<rfloor>\n  \\<D>s (e_ # es_) \\<lfloor>dom b___\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D>s (e'_ # es_) \\<lfloor>dom b_\\<rfloor>", "by (auto elim!: Ds_mono[OF red_lA_incr])"], ["proof (state)\nthis:\n  \\<D>s (e'_ # es_) \\<lfloor>dom b_\\<rfloor>\n\ngoal (45 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 45 subgoals...", "next"], ["proof (state)\ngoal (45 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 45 subgoals...", "case RedWhile"], ["proof (state)\nthis:\n  \\<D> (while (b___) c_) \\<lfloor>dom b_\\<rfloor>\n\ngoal (45 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 45 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  \\<D> (while (b___) c_) \\<lfloor>dom b_\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> (if (b___) (c_;; while (b___) c_) else unit)\n     \\<lfloor>dom b_\\<rfloor>", "by(auto simp:hyperset_defs elim!:D_mono')"], ["proof (state)\nthis:\n  \\<D> (if (b___) (c_;; while (b___) c_) else unit) \\<lfloor>dom b_\\<rfloor>\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr a) \\<lfloor>dom l\\<rfloor>\n 2. \\<And>h C l.\n       \\<lbrakk>new_Addr h = None;\n        \\<D> (new C) \\<lfloor>dom l\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW OutOfMemory) \\<lfloor>dom l\\<rfloor>\n 3. \\<And>e a b e' aa ba C.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Cast C e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Cast C e') \\<lfloor>dom ba\\<rfloor>\n 4. \\<And>C a b.\n       \\<D> (Cast C null) \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n       \\<D> null \\<lfloor>dom b\\<rfloor>\n 5. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (addr aa) \\<lfloor>dom b\\<rfloor>\n 6. \\<And>a b aa D fs C.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        \\<D> (Cast C (addr aa)) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (THROW ClassCast) \\<lfloor>dom b\\<rfloor>\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n        \\<D> (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D>\n                          (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e')\n                          \\<lfloor>dom ba\\<rfloor>\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        \\<D>\n         (Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val v\\<^sub>2)\n         \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 9. \\<And>a b V v.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        \\<D> (Var V) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> (Val v) \\<lfloor>dom b\\<rfloor>\n 10. \\<And>e a b e' aa ba V.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<D> e \\<lfloor>dom b\\<rfloor> \\<Longrightarrow>\n         \\<D> e' \\<lfloor>dom ba\\<rfloor>;\n         \\<D> (V:=e) \\<lfloor>dom b\\<rfloor>\\<rbrakk>\n        \\<Longrightarrow> \\<D> (V:=e') \\<lfloor>dom ba\\<rfloor>\nA total of 44 subgoals...", "qed (auto simp:hyperset_defs)"], ["", "(*>*)"], ["", "text\\<open>Combining conformance of heap and local variables:\\<close>"], ["", "definition sconf :: \"J_prog \\<Rightarrow> env \\<Rightarrow> state \\<Rightarrow> bool\"   (\"_,_ \\<turnstile> _ \\<surd>\"   [51,51,51]50)\nwhere\n  \"P,E \\<turnstile> s \\<surd>  \\<equiv>  let (h,l) = s in P \\<turnstile> h \\<surd> \\<and> P,h \\<turnstile> l (:\\<le>) E\""], ["", "lemma red_preserves_sconf:\n  \"\\<lbrakk> P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow> \\<langle>e',s'\\<rangle>; P,E,hp s \\<turnstile> e : T; P,E \\<turnstile> s \\<surd> \\<rbrakk> \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>\n                            \\<langle>e',s'\\<rangle>;\n     P,E,hp s \\<turnstile> e : T; P,E \\<turnstile> s \\<surd>\\<rbrakk>\n    \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>\n                            \\<langle>e',s'\\<rangle>;\n     P,E,hp s \\<turnstile> e : T; P,E \\<turnstile> s \\<surd>\\<rbrakk>\n    \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>", "by(fastforce intro:red_preserves_hconf red_preserves_lconf\n            simp add:sconf_def)"], ["", "(*>*)"], ["", "lemma reds_preserves_sconf:\n  \"\\<lbrakk> P \\<turnstile> \\<langle>es,s\\<rangle> [\\<rightarrow>] \\<langle>es',s'\\<rangle>; P,E,hp s \\<turnstile> es [:] Ts; P,E \\<turnstile> s \\<surd> \\<rbrakk> \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P \\<turnstile> \\<langle>es,s\\<rangle> [\\<rightarrow>]\n                            \\<langle>es',s'\\<rangle>;\n     P,E,hp s \\<turnstile> es [:] Ts; P,E \\<turnstile> s \\<surd>\\<rbrakk>\n    \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P \\<turnstile> \\<langle>es,s\\<rangle> [\\<rightarrow>]\n                            \\<langle>es',s'\\<rangle>;\n     P,E,hp s \\<turnstile> es [:] Ts; P,E \\<turnstile> s \\<surd>\\<rbrakk>\n    \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>", "by(fastforce intro:reds_preserves_hconf reds_preserves_lconf\n            simp add:sconf_def)"], ["", "(*>*)"], ["", "subsection \"Subject reduction\""], ["", "lemma wt_blocks:\n \"\\<And>E. \\<lbrakk> length Vs = length Ts; length vs = length Ts \\<rbrakk> \\<Longrightarrow>\n       (P,E,h \\<turnstile> blocks(Vs,Ts,vs,e) : T) =\n       (P,E(Vs[\\<mapsto>]Ts),h \\<turnstile> e:T \\<and> (\\<exists>Ts'. map (typeof\\<^bsub>h\\<^esub>) vs = map Some Ts' \\<and> P \\<turnstile> Ts' [\\<le>] Ts))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>E.\n       \\<lbrakk>length Vs = length Ts; length vs = length Ts\\<rbrakk>\n       \\<Longrightarrow> (P,E,h \\<turnstile> blocks (Vs, Ts, vs, e) : T) =\n                         (P,E(Vs [\\<mapsto>] Ts),h \\<turnstile> e : T \\<and>\n                          (\\<exists>Ts'.\n                              map typeof\\<^bsub>h\\<^esub> vs =\n                              map Some Ts' \\<and>\n                              P \\<turnstile> Ts' [\\<le>] Ts))", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>E.\n       \\<lbrakk>length Vs = length Ts; length vs = length Ts\\<rbrakk>\n       \\<Longrightarrow> (P,E,h \\<turnstile> blocks (Vs, Ts, vs, e) : T) =\n                         (P,E(Vs [\\<mapsto>] Ts),h \\<turnstile> e : T \\<and>\n                          (\\<exists>Ts'.\n                              map typeof\\<^bsub>h\\<^esub> vs =\n                              map Some Ts' \\<and>\n                              P \\<turnstile> Ts' [\\<le>] Ts))", "apply(induct Vs Ts vs e rule:blocks_induct)"], ["proof (prove)\ngoal (8 subgoals):\n 1. \\<And>V Vs Ta Ts v vs e E.\n       \\<lbrakk>\\<And>E.\n                   \\<lbrakk>length Vs = length Ts;\n                    length vs = length Ts\\<rbrakk>\n                   \\<Longrightarrow> (P,E,h \\<turnstile> blocks\n                    (Vs, Ts, vs, e) : T) =\n                                     (P,E(Vs [\\<mapsto>]\nTs),h \\<turnstile> e : T \\<and>\n(\\<exists>Ts'.\n    map typeof\\<^bsub>h\\<^esub> vs = map Some Ts' \\<and>\n    P \\<turnstile> Ts' [\\<le>] Ts));\n        length (V # Vs) = length (Ta # Ts);\n        length (v # vs) = length (Ta # Ts)\\<rbrakk>\n       \\<Longrightarrow> (P,E,h \\<turnstile> blocks\n        (V # Vs, Ta # Ts, v # vs, e) : T) =\n                         (P,E(V # Vs [\\<mapsto>]\n                          Ta # Ts),h \\<turnstile> e : T \\<and>\n                          (\\<exists>Ts'.\n                              map typeof\\<^bsub>h\\<^esub> (v # vs) =\n                              map Some Ts' \\<and>\n                              P \\<turnstile> Ts' [\\<le>] (Ta # Ts)))\n 2. \\<And>e E.\n       \\<lbrakk>length [] = length []; length [] = length []\\<rbrakk>\n       \\<Longrightarrow> (P,E,h \\<turnstile> blocks ([], [], [], e) : T) =\n                         (P,E([] [\\<mapsto>] []),h \\<turnstile> e : T \\<and>\n                          (\\<exists>Ts'.\n                              map typeof\\<^bsub>h\\<^esub> [] =\n                              map Some Ts' \\<and>\n                              P \\<turnstile> Ts' [\\<le>] []))\n 3. \\<And>vc vd a b E.\n       \\<lbrakk>length [] = length (vc # vd);\n        length a = length (vc # vd)\\<rbrakk>\n       \\<Longrightarrow> (P,E,h \\<turnstile> blocks\n        ([], vc # vd, a, b) : T) =\n                         (P,E([] [\\<mapsto>]\n                          vc # vd),h \\<turnstile> b : T \\<and>\n                          (\\<exists>Ts'.\n                              map typeof\\<^bsub>h\\<^esub> a =\n                              map Some Ts' \\<and>\n                              P \\<turnstile> Ts' [\\<le>] (vc # vd)))\n 4. \\<And>v ve vf vd E.\n       \\<lbrakk>length [] = length v; length (ve # vf) = length v\\<rbrakk>\n       \\<Longrightarrow> (P,E,h \\<turnstile> blocks\n        ([], v, ve # vf, vd) : T) =\n                         (P,E([] [\\<mapsto>] v),h \\<turnstile> vd : T \\<and>\n                          (\\<exists>Ts'.\n                              map typeof\\<^bsub>h\\<^esub> (ve # vf) =\n                              map Some Ts' \\<and>\n                              P \\<turnstile> Ts' [\\<le>] v))\n 5. \\<And>va vb a b E.\n       \\<lbrakk>length (va # vb) = length []; length a = length []\\<rbrakk>\n       \\<Longrightarrow> (P,E,h \\<turnstile> blocks\n        (va # vb, [], a, b) : T) =\n                         (P,E(va # vb [\\<mapsto>]\n                          []),h \\<turnstile> b : T \\<and>\n                          (\\<exists>Ts'.\n                              map typeof\\<^bsub>h\\<^esub> a =\n                              map Some Ts' \\<and>\n                              P \\<turnstile> Ts' [\\<le>] []))\n 6. \\<And>v vd ve vb E.\n       \\<lbrakk>length v = length []; length (vd # ve) = length []\\<rbrakk>\n       \\<Longrightarrow> (P,E,h \\<turnstile> blocks\n        (v, [], vd # ve, vb) : T) =\n                         (P,E(v [\\<mapsto>] []),h \\<turnstile> vb : T \\<and>\n                          (\\<exists>Ts'.\n                              map typeof\\<^bsub>h\\<^esub> (vd # ve) =\n                              map Some Ts' \\<and>\n                              P \\<turnstile> Ts' [\\<le>] []))\n 7. \\<And>va vc vb ve E.\n       \\<lbrakk>length (va # vc) = length vb; length [] = length vb\\<rbrakk>\n       \\<Longrightarrow> (P,E,h \\<turnstile> blocks\n        (va # vc, vb, [], ve) : T) =\n                         (P,E(va # vc [\\<mapsto>]\n                          vb),h \\<turnstile> ve : T \\<and>\n                          (\\<exists>Ts'.\n                              map typeof\\<^bsub>h\\<^esub> [] =\n                              map Some Ts' \\<and>\n                              P \\<turnstile> Ts' [\\<le>] vb))\n 8. \\<And>v va vc ve E.\n       \\<lbrakk>length v = length (va # vc);\n        length [] = length (va # vc)\\<rbrakk>\n       \\<Longrightarrow> (P,E,h \\<turnstile> blocks\n        (v, va # vc, [], ve) : T) =\n                         (P,E(v [\\<mapsto>]\n                          va # vc),h \\<turnstile> ve : T \\<and>\n                          (\\<exists>Ts'.\n                              map typeof\\<^bsub>h\\<^esub> [] =\n                              map Some Ts' \\<and>\n                              P \\<turnstile> Ts' [\\<le>] (va # vc)))", "apply (force simp add:rel_list_all2_Cons2)"], ["proof (prove)\ngoal (7 subgoals):\n 1. \\<And>e E.\n       \\<lbrakk>length [] = length []; length [] = length []\\<rbrakk>\n       \\<Longrightarrow> (P,E,h \\<turnstile> blocks ([], [], [], e) : T) =\n                         (P,E([] [\\<mapsto>] []),h \\<turnstile> e : T \\<and>\n                          (\\<exists>Ts'.\n                              map typeof\\<^bsub>h\\<^esub> [] =\n                              map Some Ts' \\<and>\n                              P \\<turnstile> Ts' [\\<le>] []))\n 2. \\<And>vc vd a b E.\n       \\<lbrakk>length [] = length (vc # vd);\n        length a = length (vc # vd)\\<rbrakk>\n       \\<Longrightarrow> (P,E,h \\<turnstile> blocks\n        ([], vc # vd, a, b) : T) =\n                         (P,E([] [\\<mapsto>]\n                          vc # vd),h \\<turnstile> b : T \\<and>\n                          (\\<exists>Ts'.\n                              map typeof\\<^bsub>h\\<^esub> a =\n                              map Some Ts' \\<and>\n                              P \\<turnstile> Ts' [\\<le>] (vc # vd)))\n 3. \\<And>v ve vf vd E.\n       \\<lbrakk>length [] = length v; length (ve # vf) = length v\\<rbrakk>\n       \\<Longrightarrow> (P,E,h \\<turnstile> blocks\n        ([], v, ve # vf, vd) : T) =\n                         (P,E([] [\\<mapsto>] v),h \\<turnstile> vd : T \\<and>\n                          (\\<exists>Ts'.\n                              map typeof\\<^bsub>h\\<^esub> (ve # vf) =\n                              map Some Ts' \\<and>\n                              P \\<turnstile> Ts' [\\<le>] v))\n 4. \\<And>va vb a b E.\n       \\<lbrakk>length (va # vb) = length []; length a = length []\\<rbrakk>\n       \\<Longrightarrow> (P,E,h \\<turnstile> blocks\n        (va # vb, [], a, b) : T) =\n                         (P,E(va # vb [\\<mapsto>]\n                          []),h \\<turnstile> b : T \\<and>\n                          (\\<exists>Ts'.\n                              map typeof\\<^bsub>h\\<^esub> a =\n                              map Some Ts' \\<and>\n                              P \\<turnstile> Ts' [\\<le>] []))\n 5. \\<And>v vd ve vb E.\n       \\<lbrakk>length v = length []; length (vd # ve) = length []\\<rbrakk>\n       \\<Longrightarrow> (P,E,h \\<turnstile> blocks\n        (v, [], vd # ve, vb) : T) =\n                         (P,E(v [\\<mapsto>] []),h \\<turnstile> vb : T \\<and>\n                          (\\<exists>Ts'.\n                              map typeof\\<^bsub>h\\<^esub> (vd # ve) =\n                              map Some Ts' \\<and>\n                              P \\<turnstile> Ts' [\\<le>] []))\n 6. \\<And>va vc vb ve E.\n       \\<lbrakk>length (va # vc) = length vb; length [] = length vb\\<rbrakk>\n       \\<Longrightarrow> (P,E,h \\<turnstile> blocks\n        (va # vc, vb, [], ve) : T) =\n                         (P,E(va # vc [\\<mapsto>]\n                          vb),h \\<turnstile> ve : T \\<and>\n                          (\\<exists>Ts'.\n                              map typeof\\<^bsub>h\\<^esub> [] =\n                              map Some Ts' \\<and>\n                              P \\<turnstile> Ts' [\\<le>] vb))\n 7. \\<And>v va vc ve E.\n       \\<lbrakk>length v = length (va # vc);\n        length [] = length (va # vc)\\<rbrakk>\n       \\<Longrightarrow> (P,E,h \\<turnstile> blocks\n        (v, va # vc, [], ve) : T) =\n                         (P,E(v [\\<mapsto>]\n                          va # vc),h \\<turnstile> ve : T \\<and>\n                          (\\<exists>Ts'.\n                              map typeof\\<^bsub>h\\<^esub> [] =\n                              map Some Ts' \\<and>\n                              P \\<turnstile> Ts' [\\<le>] (va # vc)))", "apply simp_all"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "(*>*)"], ["", "theorem assumes wf: \"wf_J_prog P\"\nshows subject_reduction2: \"P \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',(h',l')\\<rangle> \\<Longrightarrow>\n  (\\<And>E T. \\<lbrakk> P,E \\<turnstile> (h,l) \\<surd>; P,E,h \\<turnstile> e:T \\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'. P,E,h' \\<turnstile> e':T' \\<and> P \\<turnstile> T' \\<le> T)\"\nand subjects_reduction2: \"P \\<turnstile> \\<langle>es,(h,l)\\<rangle> [\\<rightarrow>] \\<langle>es',(h',l')\\<rangle> \\<Longrightarrow>\n  (\\<And>E Ts. \\<lbrakk> P,E \\<turnstile> (h,l) \\<surd>; P,E,h \\<turnstile> es [:] Ts \\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'. P,E,h' \\<turnstile> es' [:] Ts' \\<and> P \\<turnstile> Ts' [\\<le>] Ts)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',(h', l')\\<rangle> \\<Longrightarrow>\n     (\\<And>E T.\n         \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n          P,E,h \\<turnstile> e : T\\<rbrakk>\n         \\<Longrightarrow> \\<exists>T'.\n                              P,E,h' \\<turnstile> e' : T' \\<and>\n                              P \\<turnstile> T' \\<le> T)) &&&\n    (P \\<turnstile> \\<langle>es,(h, l)\\<rangle> [\\<rightarrow>]\n                    \\<langle>es',(h', l')\\<rangle> \\<Longrightarrow>\n     (\\<And>E Ts.\n         \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n          P,E,h \\<turnstile> es [:] Ts\\<rbrakk>\n         \\<Longrightarrow> \\<exists>Ts'.\n                              P,E,h' \\<turnstile> es' [:] Ts' \\<and>\n                              P \\<turnstile> Ts' [\\<le>] Ts))", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',(h', l')\\<rangle> \\<Longrightarrow>\n     (\\<And>E T.\n         \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n          P,E,h \\<turnstile> e : T\\<rbrakk>\n         \\<Longrightarrow> \\<exists>T'.\n                              P,E,h' \\<turnstile> e' : T' \\<and>\n                              P \\<turnstile> T' \\<le> T)) &&&\n    (P \\<turnstile> \\<langle>es,(h, l)\\<rangle> [\\<rightarrow>]\n                    \\<langle>es',(h', l')\\<rangle> \\<Longrightarrow>\n     (\\<And>E Ts.\n         \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n          P,E,h \\<turnstile> es [:] Ts\\<rbrakk>\n         \\<Longrightarrow> \\<exists>Ts'.\n                              P,E,h' \\<turnstile> es' [:] Ts' \\<and>\n                              P \\<turnstile> Ts' [\\<le>] Ts))", "proof (induct rule:red_reds_inducts)"], ["proof (state)\ngoal (56 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>h C l E T.\n       \\<lbrakk>new_Addr h = None; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> THROW OutOfMemory : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>e a b e' aa ba C E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Cast C e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW ClassCast : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>a b V v E T.\n        \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Var V : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val v : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 56 subgoals...", "case (RedCall h l a C fs M Ts T pns body D vs E T')"], ["proof (state)\nthis:\n  hp (h, l) a = \\<lfloor>(C, fs)\\<rfloor>\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D\n  length vs = length pns\n  length Ts = length pns\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> addr a\\<bullet>M(map Val vs) : T'\n\ngoal (56 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>h C l E T.\n       \\<lbrakk>new_Addr h = None; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> THROW OutOfMemory : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>e a b e' aa ba C E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Cast C e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW ClassCast : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>a b V v E T.\n        \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Var V : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val v : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 56 subgoals...", "have hp: \"hp(h,l) a = Some(C,fs)\"\n   and \"method\": \"P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns,body) in D\"\n   and wt: \"P,E,h \\<turnstile> addr a\\<bullet>M(map Val vs) : T'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. hp (h, l) a = \\<lfloor>(C, fs)\\<rfloor> &&&\n    P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D &&&\n    P,E,h \\<turnstile> addr a\\<bullet>M(map Val vs) : T'", "by fact+"], ["proof (state)\nthis:\n  hp (h, l) a = \\<lfloor>(C, fs)\\<rfloor>\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D\n  P,E,h \\<turnstile> addr a\\<bullet>M(map Val vs) : T'\n\ngoal (56 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>h C l E T.\n       \\<lbrakk>new_Addr h = None; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> THROW OutOfMemory : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>e a b e' aa ba C E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Cast C e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW ClassCast : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>a b V v E T.\n        \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Var V : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val v : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 56 subgoals...", "obtain Ts' where wtes: \"P,E,h \\<turnstile> map Val vs [:] Ts'\"\n    and subs: \"P \\<turnstile> Ts' [\\<le>] Ts\" and T'isT: \"T' = T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>Ts'.\n        \\<lbrakk>P,E,h \\<turnstile> map Val vs [:] Ts';\n         P \\<turnstile> Ts' [\\<le>] Ts; T' = T\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using wt \"method\" hp"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> addr a\\<bullet>M(map Val vs) : T'\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D\n  hp (h, l) a = \\<lfloor>(C, fs)\\<rfloor>\n\ngoal (1 subgoal):\n 1. (\\<And>Ts'.\n        \\<lbrakk>P,E,h \\<turnstile> map Val vs [:] Ts';\n         P \\<turnstile> Ts' [\\<le>] Ts; T' = T\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto dest:sees_method_fun)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> map Val vs [:] Ts'\n  P \\<turnstile> Ts' [\\<le>] Ts\n  T' = T\n\ngoal (56 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>h C l E T.\n       \\<lbrakk>new_Addr h = None; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> THROW OutOfMemory : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>e a b e' aa ba C E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Cast C e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW ClassCast : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>a b V v E T.\n        \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Var V : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val v : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 56 subgoals...", "from wtes subs"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> map Val vs [:] Ts'\n  P \\<turnstile> Ts' [\\<le>] Ts", "have length_vs: \"length vs = length Ts\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> map Val vs [:] Ts'\n  P \\<turnstile> Ts' [\\<le>] Ts\n\ngoal (1 subgoal):\n 1. length vs = length Ts", "by(fastforce simp:list_all2_iff dest!:WTrts_same_length)"], ["proof (state)\nthis:\n  length vs = length Ts\n\ngoal (56 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>h C l E T.\n       \\<lbrakk>new_Addr h = None; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> THROW OutOfMemory : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>e a b e' aa ba C E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Cast C e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW ClassCast : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>a b V v E T.\n        \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Var V : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val v : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 56 subgoals...", "from sees_wf_mdecl[OF wf \"method\"]"], ["proof (chain)\npicking this:\n  wf_mdecl wf_J_mdecl P D (M, Ts, T, pns, body)", "obtain T''\n    where wtabody: \"P,[this#pns [\\<mapsto>] Class D#Ts] \\<turnstile> body :: T''\"\n    and T''subT: \"P \\<turnstile> T'' \\<le> T\" and length_pns: \"length pns = length Ts\""], ["proof (prove)\nusing this:\n  wf_mdecl wf_J_mdecl P D (M, Ts, T, pns, body)\n\ngoal (1 subgoal):\n 1. (\\<And>T''.\n        \\<lbrakk>P,[this # pns [\\<mapsto>]\n                    Class D # Ts] \\<turnstile> body :: T'';\n         P \\<turnstile> T'' \\<le> T; length pns = length Ts\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(fastforce simp:wf_mdecl_def simp del:map_upds_twist)"], ["proof (state)\nthis:\n  P,[this # pns [\\<mapsto>] Class D # Ts] \\<turnstile> body :: T''\n  P \\<turnstile> T'' \\<le> T\n  length pns = length Ts\n\ngoal (56 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>h C l E T.\n       \\<lbrakk>new_Addr h = None; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> THROW OutOfMemory : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>e a b e' aa ba C E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Cast C e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW ClassCast : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>a b V v E T.\n        \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Var V : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val v : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 56 subgoals...", "from wtabody"], ["proof (chain)\npicking this:\n  P,[this # pns [\\<mapsto>] Class D # Ts] \\<turnstile> body :: T''", "have \"P,Map.empty(this#pns [\\<mapsto>] Class D#Ts),h \\<turnstile> body : T''\""], ["proof (prove)\nusing this:\n  P,[this # pns [\\<mapsto>] Class D # Ts] \\<turnstile> body :: T''\n\ngoal (1 subgoal):\n 1. P,[this # pns [\\<mapsto>] Class D # Ts],h \\<turnstile> body : T''", "by(rule WT_implies_WTrt)"], ["proof (state)\nthis:\n  P,[this # pns [\\<mapsto>] Class D # Ts],h \\<turnstile> body : T''\n\ngoal (56 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>h C l E T.\n       \\<lbrakk>new_Addr h = None; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> THROW OutOfMemory : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>e a b e' aa ba C E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Cast C e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW ClassCast : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>a b V v E T.\n        \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Var V : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val v : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 56 subgoals...", "hence \"P,E(this#pns [\\<mapsto>] Class D#Ts),h \\<turnstile> body : T''\""], ["proof (prove)\nusing this:\n  P,[this # pns [\\<mapsto>] Class D # Ts],h \\<turnstile> body : T''\n\ngoal (1 subgoal):\n 1. P,E(this # pns [\\<mapsto>] Class D # Ts),h \\<turnstile> body : T''", "by(rule WTrt_env_mono) simp"], ["proof (state)\nthis:\n  P,E(this # pns [\\<mapsto>] Class D # Ts),h \\<turnstile> body : T''\n\ngoal (56 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>h C l E T.\n       \\<lbrakk>new_Addr h = None; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> THROW OutOfMemory : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>e a b e' aa ba C E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Cast C e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW ClassCast : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>a b V v E T.\n        \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Var V : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val v : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 56 subgoals...", "hence \"P,E,h \\<turnstile> blocks(this#pns, Class D#Ts, Addr a#vs, body) : T''\""], ["proof (prove)\nusing this:\n  P,E(this # pns [\\<mapsto>] Class D # Ts),h \\<turnstile> body : T''\n\ngoal (1 subgoal):\n 1. P,E,h \\<turnstile> blocks\n                        (this # pns, Class D # Ts, Addr a # vs, body) : T''", "using wtes subs hp sees_method_decl_above[OF \"method\"] length_vs length_pns"], ["proof (prove)\nusing this:\n  P,E(this # pns [\\<mapsto>] Class D # Ts),h \\<turnstile> body : T''\n  P,E,h \\<turnstile> map Val vs [:] Ts'\n  P \\<turnstile> Ts' [\\<le>] Ts\n  hp (h, l) a = \\<lfloor>(C, fs)\\<rfloor>\n  P \\<turnstile> C \\<preceq>\\<^sup>* D\n  length vs = length Ts\n  length pns = length Ts\n\ngoal (1 subgoal):\n 1. P,E,h \\<turnstile> blocks\n                        (this # pns, Class D # Ts, Addr a # vs, body) : T''", "by(fastforce simp add:wt_blocks rel_list_all2_Cons2)"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> blocks\n                      (this # pns, Class D # Ts, Addr a # vs, body) : T''\n\ngoal (56 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>h C l E T.\n       \\<lbrakk>new_Addr h = None; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> THROW OutOfMemory : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>e a b e' aa ba C E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Cast C e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW ClassCast : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>a b V v E T.\n        \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Var V : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val v : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 56 subgoals...", "with T''subT T'isT"], ["proof (chain)\npicking this:\n  P \\<turnstile> T'' \\<le> T\n  T' = T\n  P,E,h \\<turnstile> blocks\n                      (this # pns, Class D # Ts, Addr a # vs, body) : T''", "show ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> T'' \\<le> T\n  T' = T\n  P,E,h \\<turnstile> blocks\n                      (this # pns, Class D # Ts, Addr a # vs, body) : T''\n\ngoal (1 subgoal):\n 1. \\<exists>T'a.\n       P,E,h \\<turnstile> blocks\n                           (this # pns, Class D # Ts, Addr a # vs,\n                            body) : T'a \\<and>\n       P \\<turnstile> T'a \\<le> T'", "by blast"], ["proof (state)\nthis:\n  \\<exists>T'a.\n     P,E,h \\<turnstile> blocks\n                         (this # pns, Class D # Ts, Addr a # vs,\n                          body) : T'a \\<and>\n     P \\<turnstile> T'a \\<le> T'\n\ngoal (55 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>h C l E T.\n       \\<lbrakk>new_Addr h = None; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> THROW OutOfMemory : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>e a b e' aa ba C E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Cast C e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW ClassCast : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>a b V v E T.\n        \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Var V : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val v : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 55 subgoals...", "next"], ["proof (state)\ngoal (55 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>h C l E T.\n       \\<lbrakk>new_Addr h = None; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> THROW OutOfMemory : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>e a b e' aa ba C E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Cast C e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW ClassCast : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>a b V v E T.\n        \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Var V : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val v : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 55 subgoals...", "case RedNewFail"], ["proof (state)\nthis:\n  new_Addr h_ = None\n  P,E \\<turnstile> (h_, l_) \\<surd>\n  P,E,h_ \\<turnstile> new C_ : T\n\ngoal (55 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>h C l E T.\n       \\<lbrakk>new_Addr h = None; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> THROW OutOfMemory : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>e a b e' aa ba C E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Cast C e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW ClassCast : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>a b V v E T.\n        \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Var V : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val v : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 55 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  new_Addr h_ = None\n  P,E \\<turnstile> (h_, l_) \\<surd>\n  P,E,h_ \\<turnstile> new C_ : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h_ \\<turnstile> THROW OutOfMemory : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by (unfold sconf_def hconf_def) (fastforce elim!:typeof_OutOfMemory)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h_ \\<turnstile> THROW OutOfMemory : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (54 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>e a b e' aa ba C E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Cast C e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW ClassCast : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>a b V v E T.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Var V : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba V E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 54 subgoals...", "next"], ["proof (state)\ngoal (54 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>e a b e' aa ba C E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Cast C e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW ClassCast : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>a b V v E T.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Var V : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba V E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 54 subgoals...", "case CastRed"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (a___, b___) \\<surd>;\n   P,?E,a___ \\<turnstile> e_ : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,a_ \\<turnstile> e'_ : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  P,E \\<turnstile> (a___, b___) \\<surd>\n  P,E,a___ \\<turnstile> Cast C_ e_ : T\n\ngoal (54 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>e a b e' aa ba C E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Cast C e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW ClassCast : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>a b V v E T.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Var V : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba V E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 54 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (a___, b___) \\<surd>;\n   P,?E,a___ \\<turnstile> e_ : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,a_ \\<turnstile> e'_ : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  P,E \\<turnstile> (a___, b___) \\<surd>\n  P,E,a___ \\<turnstile> Cast C_ e_ : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,a_ \\<turnstile> Cast C_ e'_ : T' \\<and> P \\<turnstile> T' \\<le> T", "by(clarsimp simp:is_refT_def)\n      (blast intro: widens_trans dest!:widen_Class[THEN iffD1])"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,a_ \\<turnstile> Cast C_ e'_ : T' \\<and> P \\<turnstile> T' \\<le> T\n\ngoal (53 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW ClassCast : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>a b V v E T.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Var V : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba V E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>V v h l E T.\n        \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 53 subgoals...", "next"], ["proof (state)\ngoal (53 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW ClassCast : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>a b V v E T.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Var V : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba V E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>V v h l E T.\n        \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 53 subgoals...", "case RedCastFail"], ["proof (state)\nthis:\n  hp (a___, b_) a_ = \\<lfloor>(D_, fs_)\\<rfloor>\n  (D_, C_) \\<notin> (subcls1 P)\\<^sup>*\n  P,E \\<turnstile> (a___, b_) \\<surd>\n  P,E,a___ \\<turnstile> Cast C_ (addr a_) : T\n\ngoal (53 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        (D, C) \\<notin> (subcls1 P)\\<^sup>*;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW ClassCast : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>a b V v E T.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Var V : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba V E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>V v h l E T.\n        \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 53 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  hp (a___, b_) a_ = \\<lfloor>(D_, fs_)\\<rfloor>\n  (D_, C_) \\<notin> (subcls1 P)\\<^sup>*\n  P,E \\<turnstile> (a___, b_) \\<surd>\n  P,E,a___ \\<turnstile> Cast C_ (addr a_) : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,a___ \\<turnstile> THROW ClassCast : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by (unfold sconf_def hconf_def)  (fastforce elim!:typeof_ClassCast)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,a___ \\<turnstile> THROW ClassCast : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (52 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>a b V v E T.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Var V : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba V E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba F D E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 52 subgoals...", "next"], ["proof (state)\ngoal (52 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>a b V v E T.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Var V : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba V E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba F D E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 52 subgoals...", "case (BinOpRed1 e\\<^sub>1 h l e\\<^sub>1' h' l' bop e\\<^sub>2)"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e\\<^sub>1,(h, l)\\<rangle> \\<rightarrow>\n                 \\<langle>e\\<^sub>1',(h', l')\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (h, l) \\<surd>;\n   P,?E,h \\<turnstile> e\\<^sub>1 : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,h' \\<turnstile> e\\<^sub>1' : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n\ngoal (52 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>a b V v E T.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Var V : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba V E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba F D E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 52 subgoals...", "have red: \"P \\<turnstile> \\<langle>e\\<^sub>1,(h,l)\\<rangle> \\<rightarrow> \\<langle>e\\<^sub>1',(h',l')\\<rangle>\"\n   and IH: \"\\<And>E T. \\<lbrakk>P,E \\<turnstile> (h,l) \\<surd>; P,E,h \\<turnstile> e\\<^sub>1:T\\<rbrakk>\n                 \\<Longrightarrow> \\<exists>U. P,E,h' \\<turnstile> e\\<^sub>1' : U \\<and> P \\<turnstile> U \\<le> T\"\n   and conf: \"P,E \\<turnstile> (h,l) \\<surd>\" and wt: \"P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<turnstile> \\<langle>e\\<^sub>1,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e\\<^sub>1',(h', l')\\<rangle> &&&\n     (\\<And>E T.\n         \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n          P,E,h \\<turnstile> e\\<^sub>1 : T\\<rbrakk>\n         \\<Longrightarrow> \\<exists>U.\n                              P,E,h' \\<turnstile> e\\<^sub>1' : U \\<and>\n                              P \\<turnstile> U \\<le> T)) &&&\n    P,E \\<turnstile> (h, l) \\<surd> &&&\n    P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T", "by fact+"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e\\<^sub>1,(h, l)\\<rangle> \\<rightarrow>\n                 \\<langle>e\\<^sub>1',(h', l')\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (h, l) \\<surd>;\n   P,?E,h \\<turnstile> e\\<^sub>1 : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>U.\n                       P,?E,h' \\<turnstile> e\\<^sub>1' : U \\<and>\n                       P \\<turnstile> U \\<le> ?T\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n\ngoal (52 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>a b V v E T.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Var V : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba V E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba F D E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 52 subgoals...", "have \"P,E,h' \\<turnstile> e\\<^sub>1' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> e\\<^sub>1' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T", "proof (cases bop)"], ["proof (state)\ngoal (2 subgoals):\n 1. bop = Eq \\<Longrightarrow>\n    P,E,h' \\<turnstile> e\\<^sub>1' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n 2. bop = Add \\<Longrightarrow>\n    P,E,h' \\<turnstile> e\\<^sub>1' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T", "assume [simp]: \"bop = Eq\""], ["proof (state)\nthis:\n  bop = Eq\n\ngoal (2 subgoals):\n 1. bop = Eq \\<Longrightarrow>\n    P,E,h' \\<turnstile> e\\<^sub>1' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n 2. bop = Add \\<Longrightarrow>\n    P,E,h' \\<turnstile> e\\<^sub>1' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T", "from wt"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T", "obtain T\\<^sub>1 T\\<^sub>2 where [simp]: \"T = Boolean\"\n      and wt\\<^sub>1: \"P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1\" and wt\\<^sub>2: \"P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n\ngoal (1 subgoal):\n 1. (\\<And>T\\<^sub>1 T\\<^sub>2.\n        \\<lbrakk>T = Boolean; P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  T = Boolean\n  P,E,h \\<turnstile> e\\<^sub>1 : T\\<^sub>1\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n\ngoal (2 subgoals):\n 1. bop = Eq \\<Longrightarrow>\n    P,E,h' \\<turnstile> e\\<^sub>1' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n 2. bop = Add \\<Longrightarrow>\n    P,E,h' \\<turnstile> e\\<^sub>1' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> e\\<^sub>1' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T", "using WTrt_hext_mono[OF wt\\<^sub>2 red_hext_incr[OF red]] IH[OF conf wt\\<^sub>1]"], ["proof (prove)\nusing this:\n  P,E,h' \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  \\<exists>U.\n     P,E,h' \\<turnstile> e\\<^sub>1' : U \\<and>\n     P \\<turnstile> U \\<le> T\\<^sub>1\n\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> e\\<^sub>1' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T", "by auto"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> e\\<^sub>1' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n\ngoal (1 subgoal):\n 1. bop = Add \\<Longrightarrow>\n    P,E,h' \\<turnstile> e\\<^sub>1' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. bop = Add \\<Longrightarrow>\n    P,E,h' \\<turnstile> e\\<^sub>1' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T", "assume  [simp]: \"bop = Add\""], ["proof (state)\nthis:\n  bop = Add\n\ngoal (1 subgoal):\n 1. bop = Add \\<Longrightarrow>\n    P,E,h' \\<turnstile> e\\<^sub>1' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T", "from wt"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T", "have [simp]: \"T = Integer\"\n      and wt\\<^sub>1: \"P,E,h \\<turnstile> e\\<^sub>1 : Integer\" and wt\\<^sub>2: \"P,E,h \\<turnstile> e\\<^sub>2 : Integer\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n\ngoal (1 subgoal):\n 1. T = Integer &&&\n    P,E,h \\<turnstile> e\\<^sub>1 : Integer &&&\n    P,E,h \\<turnstile> e\\<^sub>2 : Integer", "by auto"], ["proof (state)\nthis:\n  T = Integer\n  P,E,h \\<turnstile> e\\<^sub>1 : Integer\n  P,E,h \\<turnstile> e\\<^sub>2 : Integer\n\ngoal (1 subgoal):\n 1. bop = Add \\<Longrightarrow>\n    P,E,h' \\<turnstile> e\\<^sub>1' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> e\\<^sub>1' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T", "using IH[OF conf wt\\<^sub>1] WTrt_hext_mono[OF wt\\<^sub>2 red_hext_incr[OF red]]"], ["proof (prove)\nusing this:\n  \\<exists>U.\n     P,E,h' \\<turnstile> e\\<^sub>1' : U \\<and>\n     P \\<turnstile> U \\<le> Integer\n  P,E,h' \\<turnstile> e\\<^sub>2 : Integer\n\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> e\\<^sub>1' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T", "by auto"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> e\\<^sub>1' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> e\\<^sub>1' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n\ngoal (52 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>e a b e' aa ba bop e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>a b V v E T.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Var V : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba V E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba F D E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 52 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P,E,h' \\<turnstile> e\\<^sub>1' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e\\<^sub>1' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by auto"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e\\<^sub>1' \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (51 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b V v E T.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Var V : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba V E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>a b aa C fs F D v E T.\n        \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n         fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val v : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 51 subgoals...", "next"], ["proof (state)\ngoal (51 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b V v E T.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Var V : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba V E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>a b aa C fs F D v E T.\n        \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n         fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val v : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 51 subgoals...", "case (BinOpRed2 e\\<^sub>2 h l e\\<^sub>2' h' l' v\\<^sub>1 bop)"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n                 \\<langle>e\\<^sub>2',(h', l')\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (h, l) \\<surd>;\n   P,?E,h \\<turnstile> e\\<^sub>2 : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,h' \\<turnstile> e\\<^sub>2' : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n\ngoal (51 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b V v E T.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Var V : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba V E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>a b aa C fs F D v E T.\n        \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n         fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val v : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 51 subgoals...", "have red: \"P \\<turnstile> \\<langle>e\\<^sub>2,(h,l)\\<rangle> \\<rightarrow> \\<langle>e\\<^sub>2',(h',l')\\<rangle>\"\n   and IH: \"\\<And>E T. \\<lbrakk>P,E \\<turnstile> (h,l) \\<surd>; P,E,h \\<turnstile> e\\<^sub>2:T\\<rbrakk>\n                 \\<Longrightarrow> \\<exists>U. P,E,h' \\<turnstile> e\\<^sub>2' : U \\<and> P \\<turnstile> U \\<le> T\"\n   and conf: \"P,E \\<turnstile> (h,l) \\<surd>\" and wt: \"P,E,h \\<turnstile> (Val v\\<^sub>1) \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<turnstile> \\<langle>e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e\\<^sub>2',(h', l')\\<rangle> &&&\n     (\\<And>E T.\n         \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n          P,E,h \\<turnstile> e\\<^sub>2 : T\\<rbrakk>\n         \\<Longrightarrow> \\<exists>U.\n                              P,E,h' \\<turnstile> e\\<^sub>2' : U \\<and>\n                              P \\<turnstile> U \\<le> T)) &&&\n    P,E \\<turnstile> (h, l) \\<surd> &&&\n    P,E,h \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T", "by fact+"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n                 \\<langle>e\\<^sub>2',(h', l')\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (h, l) \\<surd>;\n   P,?E,h \\<turnstile> e\\<^sub>2 : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>U.\n                       P,?E,h' \\<turnstile> e\\<^sub>2' : U \\<and>\n                       P \\<turnstile> U \\<le> ?T\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n\ngoal (51 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b V v E T.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Var V : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba V E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>a b aa C fs F D v E T.\n        \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n         fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val v : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 51 subgoals...", "have \"P,E,h' \\<turnstile> (Val v\\<^sub>1) \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2' : T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2' : T", "proof (cases bop)"], ["proof (state)\ngoal (2 subgoals):\n 1. bop = Eq \\<Longrightarrow>\n    P,E,h' \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2' : T\n 2. bop = Add \\<Longrightarrow>\n    P,E,h' \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2' : T", "assume [simp]: \"bop = Eq\""], ["proof (state)\nthis:\n  bop = Eq\n\ngoal (2 subgoals):\n 1. bop = Eq \\<Longrightarrow>\n    P,E,h' \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2' : T\n 2. bop = Add \\<Longrightarrow>\n    P,E,h' \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2' : T", "from wt"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T", "obtain T\\<^sub>1 T\\<^sub>2 where [simp]: \"T = Boolean\"\n      and wt\\<^sub>1: \"P,E,h \\<turnstile> Val v\\<^sub>1 : T\\<^sub>1\" and wt\\<^sub>2: \"P,E,h \\<turnstile> e\\<^sub>2:T\\<^sub>2\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n\ngoal (1 subgoal):\n 1. (\\<And>T\\<^sub>1 T\\<^sub>2.\n        \\<lbrakk>T = Boolean; P,E,h \\<turnstile> Val v\\<^sub>1 : T\\<^sub>1;\n         P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  T = Boolean\n  P,E,h \\<turnstile> Val v\\<^sub>1 : T\\<^sub>1\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n\ngoal (2 subgoals):\n 1. bop = Eq \\<Longrightarrow>\n    P,E,h' \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2' : T\n 2. bop = Add \\<Longrightarrow>\n    P,E,h' \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2' : T", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2' : T", "using IH[OF conf wt\\<^sub>2] WTrt_hext_mono[OF wt\\<^sub>1 red_hext_incr[OF red]]"], ["proof (prove)\nusing this:\n  \\<exists>U.\n     P,E,h' \\<turnstile> e\\<^sub>2' : U \\<and>\n     P \\<turnstile> U \\<le> T\\<^sub>2\n  P,E,h' \\<turnstile> Val v\\<^sub>1 : T\\<^sub>1\n\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2' : T", "by auto"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2' : T\n\ngoal (1 subgoal):\n 1. bop = Add \\<Longrightarrow>\n    P,E,h' \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2' : T", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. bop = Add \\<Longrightarrow>\n    P,E,h' \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2' : T", "assume  [simp]: \"bop = Add\""], ["proof (state)\nthis:\n  bop = Add\n\ngoal (1 subgoal):\n 1. bop = Add \\<Longrightarrow>\n    P,E,h' \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2' : T", "from wt"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T", "have [simp]: \"T = Integer\"\n      and wt\\<^sub>1: \"P,E,h \\<turnstile> Val v\\<^sub>1 : Integer\" and wt\\<^sub>2: \"P,E,h \\<turnstile> e\\<^sub>2 : Integer\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2 : T\n\ngoal (1 subgoal):\n 1. T = Integer &&&\n    P,E,h \\<turnstile> Val v\\<^sub>1 : Integer &&&\n    P,E,h \\<turnstile> e\\<^sub>2 : Integer", "by auto"], ["proof (state)\nthis:\n  T = Integer\n  P,E,h \\<turnstile> Val v\\<^sub>1 : Integer\n  P,E,h \\<turnstile> e\\<^sub>2 : Integer\n\ngoal (1 subgoal):\n 1. bop = Add \\<Longrightarrow>\n    P,E,h' \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2' : T", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2' : T", "using IH[OF conf wt\\<^sub>2] WTrt_hext_mono[OF wt\\<^sub>1 red_hext_incr[OF red]]"], ["proof (prove)\nusing this:\n  \\<exists>U.\n     P,E,h' \\<turnstile> e\\<^sub>2' : U \\<and>\n     P \\<turnstile> U \\<le> Integer\n  P,E,h' \\<turnstile> Val v\\<^sub>1 : Integer\n\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2' : T", "by auto"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2' : T\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2' : T\n\ngoal (51 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>e a b e' aa ba v\\<^sub>1 bop E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b V v E T.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Var V : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba V E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>a b aa C fs F D v E T.\n        \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n         fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val v : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 51 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P,E,h' \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2' : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2' : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by auto"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> e\\<^sub>2' : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (50 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>a b V v E T.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Var V : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba V E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>F D a b E T.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> THROW\n           NullPointer : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 50 subgoals...", "next"], ["proof (state)\ngoal (50 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>a b V v E T.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Var V : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba V E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>F D a b E T.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> THROW\n           NullPointer : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 50 subgoals...", "case (RedBinOp bop)"], ["proof (state)\nthis:\n  binop (bop, v\\<^sub>1_, v\\<^sub>2_) = \\<lfloor>v_\\<rfloor>\n  P,E \\<turnstile> (a_, b_) \\<surd>\n  P,E,a_ \\<turnstile> Val v\\<^sub>1_ \\<guillemotleft>bop\\<guillemotright> Val\n                                     v\\<^sub>2_ : T\n\ngoal (50 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>bop v\\<^sub>1 v\\<^sub>2 v a b E T.\n       \\<lbrakk>binop (bop, v\\<^sub>1, v\\<^sub>2) = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<^sub>1 \\<guillemotleft>bop\\<guillemotright> Val\n   v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>a b V v E T.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Var V : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba V E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>F D a b E T.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> THROW\n           NullPointer : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 50 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  binop (bop, v\\<^sub>1_, v\\<^sub>2_) = \\<lfloor>v_\\<rfloor>\n  P,E \\<turnstile> (a_, b_) \\<surd>\n  P,E,a_ \\<turnstile> Val v\\<^sub>1_ \\<guillemotleft>bop\\<guillemotright> Val\n                                     v\\<^sub>2_ : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,a_ \\<turnstile> Val v_ : T' \\<and> P \\<turnstile> T' \\<le> T", "proof (cases bop)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>binop (bop, v\\<^sub>1_, v\\<^sub>2_) = \\<lfloor>v_\\<rfloor>;\n     P,E \\<turnstile> (a_, b_) \\<surd>;\n     P,E,a_ \\<turnstile> Val v\\<^sub>1_ \\<guillemotleft>bop\\<guillemotright> Val\n  v\\<^sub>2_ : T;\n     bop = Eq\\<rbrakk>\n    \\<Longrightarrow> \\<exists>T'.\n                         P,E,a_ \\<turnstile> Val v_ : T' \\<and>\n                         P \\<turnstile> T' \\<le> T\n 2. \\<lbrakk>binop (bop, v\\<^sub>1_, v\\<^sub>2_) = \\<lfloor>v_\\<rfloor>;\n     P,E \\<turnstile> (a_, b_) \\<surd>;\n     P,E,a_ \\<turnstile> Val v\\<^sub>1_ \\<guillemotleft>bop\\<guillemotright> Val\n  v\\<^sub>2_ : T;\n     bop = Add\\<rbrakk>\n    \\<Longrightarrow> \\<exists>T'.\n                         P,E,a_ \\<turnstile> Val v_ : T' \\<and>\n                         P \\<turnstile> T' \\<le> T", "case Eq"], ["proof (state)\nthis:\n  bop = Eq\n\ngoal (2 subgoals):\n 1. \\<lbrakk>binop (bop, v\\<^sub>1_, v\\<^sub>2_) = \\<lfloor>v_\\<rfloor>;\n     P,E \\<turnstile> (a_, b_) \\<surd>;\n     P,E,a_ \\<turnstile> Val v\\<^sub>1_ \\<guillemotleft>bop\\<guillemotright> Val\n  v\\<^sub>2_ : T;\n     bop = Eq\\<rbrakk>\n    \\<Longrightarrow> \\<exists>T'.\n                         P,E,a_ \\<turnstile> Val v_ : T' \\<and>\n                         P \\<turnstile> T' \\<le> T\n 2. \\<lbrakk>binop (bop, v\\<^sub>1_, v\\<^sub>2_) = \\<lfloor>v_\\<rfloor>;\n     P,E \\<turnstile> (a_, b_) \\<surd>;\n     P,E,a_ \\<turnstile> Val v\\<^sub>1_ \\<guillemotleft>bop\\<guillemotright> Val\n  v\\<^sub>2_ : T;\n     bop = Add\\<rbrakk>\n    \\<Longrightarrow> \\<exists>T'.\n                         P,E,a_ \\<turnstile> Val v_ : T' \\<and>\n                         P \\<turnstile> T' \\<le> T", "thus ?thesis"], ["proof (prove)\nusing this:\n  bop = Eq\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,a_ \\<turnstile> Val v_ : T' \\<and> P \\<turnstile> T' \\<le> T", "using RedBinOp"], ["proof (prove)\nusing this:\n  bop = Eq\n  binop (bop, v\\<^sub>1_, v\\<^sub>2_) = \\<lfloor>v_\\<rfloor>\n  P,E \\<turnstile> (a_, b_) \\<surd>\n  P,E,a_ \\<turnstile> Val v\\<^sub>1_ \\<guillemotleft>bop\\<guillemotright> Val\n                                     v\\<^sub>2_ : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,a_ \\<turnstile> Val v_ : T' \\<and> P \\<turnstile> T' \\<le> T", "by auto"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,a_ \\<turnstile> Val v_ : T' \\<and> P \\<turnstile> T' \\<le> T\n\ngoal (1 subgoal):\n 1. \\<lbrakk>binop (bop, v\\<^sub>1_, v\\<^sub>2_) = \\<lfloor>v_\\<rfloor>;\n     P,E \\<turnstile> (a_, b_) \\<surd>;\n     P,E,a_ \\<turnstile> Val v\\<^sub>1_ \\<guillemotleft>bop\\<guillemotright> Val\n  v\\<^sub>2_ : T;\n     bop = Add\\<rbrakk>\n    \\<Longrightarrow> \\<exists>T'.\n                         P,E,a_ \\<turnstile> Val v_ : T' \\<and>\n                         P \\<turnstile> T' \\<le> T", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>binop (bop, v\\<^sub>1_, v\\<^sub>2_) = \\<lfloor>v_\\<rfloor>;\n     P,E \\<turnstile> (a_, b_) \\<surd>;\n     P,E,a_ \\<turnstile> Val v\\<^sub>1_ \\<guillemotleft>bop\\<guillemotright> Val\n  v\\<^sub>2_ : T;\n     bop = Add\\<rbrakk>\n    \\<Longrightarrow> \\<exists>T'.\n                         P,E,a_ \\<turnstile> Val v_ : T' \\<and>\n                         P \\<turnstile> T' \\<le> T", "case Add"], ["proof (state)\nthis:\n  bop = Add\n\ngoal (1 subgoal):\n 1. \\<lbrakk>binop (bop, v\\<^sub>1_, v\\<^sub>2_) = \\<lfloor>v_\\<rfloor>;\n     P,E \\<turnstile> (a_, b_) \\<surd>;\n     P,E,a_ \\<turnstile> Val v\\<^sub>1_ \\<guillemotleft>bop\\<guillemotright> Val\n  v\\<^sub>2_ : T;\n     bop = Add\\<rbrakk>\n    \\<Longrightarrow> \\<exists>T'.\n                         P,E,a_ \\<turnstile> Val v_ : T' \\<and>\n                         P \\<turnstile> T' \\<le> T", "thus ?thesis"], ["proof (prove)\nusing this:\n  bop = Add\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,a_ \\<turnstile> Val v_ : T' \\<and> P \\<turnstile> T' \\<le> T", "using RedBinOp"], ["proof (prove)\nusing this:\n  bop = Add\n  binop (bop, v\\<^sub>1_, v\\<^sub>2_) = \\<lfloor>v_\\<rfloor>\n  P,E \\<turnstile> (a_, b_) \\<surd>\n  P,E,a_ \\<turnstile> Val v\\<^sub>1_ \\<guillemotleft>bop\\<guillemotright> Val\n                                     v\\<^sub>2_ : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,a_ \\<turnstile> Val v_ : T' \\<and> P \\<turnstile> T' \\<le> T", "by auto"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,a_ \\<turnstile> Val v_ : T' \\<and> P \\<turnstile> T' \\<le> T\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,a_ \\<turnstile> Val v_ : T' \\<and> P \\<turnstile> T' \\<le> T\n\ngoal (49 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>a b V v E T.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Var V : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba V E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 49 subgoals...", "next"], ["proof (state)\ngoal (49 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>a b V v E T.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Var V : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba V E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 49 subgoals...", "case RedVar"], ["proof (state)\nthis:\n  lcl (a_, b_) V_ = \\<lfloor>v_\\<rfloor>\n  P,E \\<turnstile> (a_, b_) \\<surd>\n  P,E,a_ \\<turnstile> Var V_ : T\n\ngoal (49 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>a b V v E T.\n       \\<lbrakk>lcl (a, b) V = \\<lfloor>v\\<rfloor>;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Var V : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba V E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 49 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  lcl (a_, b_) V_ = \\<lfloor>v_\\<rfloor>\n  P,E \\<turnstile> (a_, b_) \\<surd>\n  P,E,a_ \\<turnstile> Var V_ : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,a_ \\<turnstile> Val v_ : T' \\<and> P \\<turnstile> T' \\<le> T", "by (fastforce simp:sconf_def lconf_def conf_def)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,a_ \\<turnstile> Val v_ : T' \\<and> P \\<turnstile> T' \\<le> T\n\ngoal (48 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>e a b e' aa ba V E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba v F D E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>F{D} := e' : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 48 subgoals...", "next"], ["proof (state)\ngoal (48 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>e a b e' aa ba V E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba v F D E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>F{D} := e' : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 48 subgoals...", "case LAssRed"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (a___, b___) \\<surd>;\n   P,?E,a___ \\<turnstile> e_ : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,a_ \\<turnstile> e'_ : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  P,E \\<turnstile> (a___, b___) \\<surd>\n  P,E,a___ \\<turnstile> V_:=e_ : T\n\ngoal (48 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>e a b e' aa ba V E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> V:=e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> V:=e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba v F D E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>F{D} := e' : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 48 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (a___, b___) \\<surd>;\n   P,?E,a___ \\<turnstile> e_ : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,a_ \\<turnstile> e'_ : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  P,E \\<turnstile> (a___, b___) \\<surd>\n  P,E,a___ \\<turnstile> V_:=e_ : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,a_ \\<turnstile> V_:=e'_ : T' \\<and> P \\<turnstile> T' \\<le> T", "by(blast intro:widen_trans)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,a_ \\<turnstile> V_:=e'_ : T' \\<and> P \\<turnstile> T' \\<le> T\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "next"], ["proof (state)\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "case (FAccRed e h l e' h' l' F D)"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (h, l) \\<surd>;\n   P,?E,h \\<turnstile> e : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,h' \\<turnstile> e' : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> e\\<bullet>F{D} : T\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "have IH: \"\\<And>E T. \\<lbrakk>P,E \\<turnstile> (h,l) \\<surd>; P,E,h \\<turnstile> e : T\\<rbrakk>\n                 \\<Longrightarrow> \\<exists>U. P,E,h' \\<turnstile> e' : U \\<and> P \\<turnstile> U \\<le> T\"\n   and conf: \"P,E \\<turnstile> (h,l) \\<surd>\" and wt: \"P,E,h \\<turnstile> e\\<bullet>F{D} : T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>E T.\n        \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> e : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>U.\n                             P,E,h' \\<turnstile> e' : U \\<and>\n                             P \\<turnstile> U \\<le> T) &&&\n    P,E \\<turnstile> (h, l) \\<surd> &&&\n    P,E,h \\<turnstile> e\\<bullet>F{D} : T", "by fact+\n  \\<comment> \\<open>The goal: ?case = @{prop ?case}\\<close>\n  \\<comment> \\<open>Now distinguish the two cases how wt can have arisen.\\<close>"], ["proof (state)\nthis:\n  \\<lbrakk>P,?E \\<turnstile> (h, l) \\<surd>;\n   P,?E,h \\<turnstile> e : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>U.\n                       P,?E,h' \\<turnstile> e' : U \\<and>\n                       P \\<turnstile> U \\<le> ?T\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> e\\<bullet>F{D} : T\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "{"], ["proof (state)\nthis:\n  \\<lbrakk>P,?E \\<turnstile> (h, l) \\<surd>;\n   P,?E,h \\<turnstile> e : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>U.\n                       P,?E,h' \\<turnstile> e' : U \\<and>\n                       P \\<turnstile> U \\<le> ?T\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> e\\<bullet>F{D} : T\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "fix C"], ["proof (state)\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "assume wte: \"P,E,h \\<turnstile> e : Class C\"\n             and has: \"P \\<turnstile> C has F:T in D\""], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : Class C\n  P \\<turnstile> C has F:T in D\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "from IH[OF conf wte]"], ["proof (chain)\npicking this:\n  \\<exists>U.\n     P,E,h' \\<turnstile> e' : U \\<and> P \\<turnstile> U \\<le> Class C", "obtain U where wte': \"P,E,h' \\<turnstile> e' : U\" and UsubC: \"P \\<turnstile> U \\<le> Class C\""], ["proof (prove)\nusing this:\n  \\<exists>U.\n     P,E,h' \\<turnstile> e' : U \\<and> P \\<turnstile> U \\<le> Class C\n\ngoal (1 subgoal):\n 1. (\\<And>U.\n        \\<lbrakk>P,E,h' \\<turnstile> e' : U;\n         P \\<turnstile> U \\<le> Class C\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto\n    \\<comment> \\<open>Now distinguish what @{term U} can be.\\<close>"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> e' : U\n  P \\<turnstile> U \\<le> Class C\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "{"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> e' : U\n  P \\<turnstile> U \\<le> Class C\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "assume \"U = NT\""], ["proof (state)\nthis:\n  U = NT\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "hence ?case"], ["proof (prove)\nusing this:\n  U = NT\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "using wte'"], ["proof (prove)\nusing this:\n  U = NT\n  P,E,h' \\<turnstile> e' : U\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by(blast intro:WTrtFAccNT widen_refl)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "}"], ["proof (state)\nthis:\n  U = NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "moreover"], ["proof (state)\nthis:\n  U = NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "{"], ["proof (state)\nthis:\n  U = NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "fix C'"], ["proof (state)\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "assume U: \"U = Class C'\" and C'subC: \"P \\<turnstile> C' \\<preceq>\\<^sup>* C\""], ["proof (state)\nthis:\n  U = Class C'\n  P \\<turnstile> C' \\<preceq>\\<^sup>* C\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "from has_field_mono[OF has C'subC] wte' U"], ["proof (chain)\npicking this:\n  P \\<turnstile> C' has F:T in D\n  P,E,h' \\<turnstile> e' : U\n  U = Class C'", "have ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> C' has F:T in D\n  P,E,h' \\<turnstile> e' : U\n  U = Class C'\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by(blast intro:WTrtFAcc)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "}"], ["proof (state)\nthis:\n  \\<lbrakk>U = Class ?C'2; P \\<turnstile> ?C'2 \\<preceq>\\<^sup>* C\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "ultimately"], ["proof (chain)\npicking this:\n  U = NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n  \\<lbrakk>U = Class ?C'2; P \\<turnstile> ?C'2 \\<preceq>\\<^sup>* C\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                       P \\<turnstile> T' \\<le> T", "have ?case"], ["proof (prove)\nusing this:\n  U = NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n  \\<lbrakk>U = Class ?C'2; P \\<turnstile> ?C'2 \\<preceq>\\<^sup>* C\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "using UsubC"], ["proof (prove)\nusing this:\n  U = NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n  \\<lbrakk>U = Class ?C'2; P \\<turnstile> ?C'2 \\<preceq>\\<^sup>* C\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n  P \\<turnstile> U \\<le> Class C\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by(simp add: widen_Class) blast"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P,E,h \\<turnstile> e : Class ?C2;\n   P \\<turnstile> ?C2 has F:T in D\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>P,E,h \\<turnstile> e : Class ?C2;\n   P \\<turnstile> ?C2 has F:T in D\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "{"], ["proof (state)\nthis:\n  \\<lbrakk>P,E,h \\<turnstile> e : Class ?C2;\n   P \\<turnstile> ?C2 has F:T in D\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "assume \"P,E,h \\<turnstile> e : NT\""], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : NT\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "hence \"P,E,h' \\<turnstile> e' : NT\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> e' : NT", "using IH[OF conf]"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  P,E,h \\<turnstile> e : ?T \\<Longrightarrow>\n  \\<exists>U. P,E,h' \\<turnstile> e' : U \\<and> P \\<turnstile> U \\<le> ?T\n\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> e' : NT", "by fastforce"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> e' : NT\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "hence ?case"], ["proof (prove)\nusing this:\n  P,E,h' \\<turnstile> e' : NT\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by(fastforce intro:WTrtFAccNT widen_refl)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "}"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (47 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>h a C fs F D v l E T.\n        \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h(a \\<mapsto>\n                             (C, fs((F, D) \\<mapsto>\n                              v))) \\<turnstile> unit : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 47 subgoals...", "ultimately"], ["proof (chain)\npicking this:\n  \\<lbrakk>P,E,h \\<turnstile> e : Class ?C2;\n   P \\<turnstile> ?C2 has F:T in D\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n  P,E,h \\<turnstile> e : NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n     P \\<turnstile> T' \\<le> T", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>P,E,h \\<turnstile> e : Class ?C2;\n   P \\<turnstile> ?C2 has F:T in D\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n  P,E,h \\<turnstile> e : NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "using wt"], ["proof (prove)\nusing this:\n  \\<lbrakk>P,E,h \\<turnstile> e : Class ?C2;\n   P \\<turnstile> ?C2 has F:T in D\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n  P,E,h \\<turnstile> e : NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n  P,E,h \\<turnstile> e\\<bullet>F{D} : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by blast"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (46 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>F D v a b E T.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> THROW\n           NullPointer : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 46 subgoals...", "next"], ["proof (state)\ngoal (46 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>F D v a b E T.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> THROW\n           NullPointer : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 46 subgoals...", "case RedFAcc"], ["proof (state)\nthis:\n  hp (a___, b_) a_ = \\<lfloor>(C_, fs_)\\<rfloor>\n  fs_ (F_, D_) = \\<lfloor>v_\\<rfloor>\n  P,E \\<turnstile> (a___, b_) \\<surd>\n  P,E,a___ \\<turnstile> addr a_\\<bullet>F_{D_} : T\n\ngoal (46 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>a b aa C fs F D v E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(C, fs)\\<rfloor>;\n        fs (F, D) = \\<lfloor>v\\<rfloor>; P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> addr aa\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val v : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>F D v a b E T.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> THROW\n           NullPointer : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 46 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  hp (a___, b_) a_ = \\<lfloor>(C_, fs_)\\<rfloor>\n  fs_ (F_, D_) = \\<lfloor>v_\\<rfloor>\n  P,E \\<turnstile> (a___, b_) \\<surd>\n  P,E,a___ \\<turnstile> addr a_\\<bullet>F_{D_} : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,a___ \\<turnstile> Val v_ : T' \\<and> P \\<turnstile> T' \\<le> T", "by(fastforce simp:sconf_def hconf_def oconf_def conf_def has_field_def\n                dest:has_fields_fun)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,a___ \\<turnstile> Val v_ : T' \\<and> P \\<turnstile> T' \\<le> T\n\ngoal (45 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba M es E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 45 subgoals...", "next"], ["proof (state)\ngoal (45 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba M es E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 45 subgoals...", "case RedFAccNull"], ["proof (state)\nthis:\n  P,E \\<turnstile> (a_, b_) \\<surd>\n  P,E,a_ \\<turnstile> null\\<bullet>F_{D_} : T\n\ngoal (45 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>F D a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba M es E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 45 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P,E \\<turnstile> (a_, b_) \\<surd>\n  P,E,a_ \\<turnstile> null\\<bullet>F_{D_} : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,a_ \\<turnstile> THROW NullPointer : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by(fastforce intro: widen_refl WTThrow[OF WTVal] elim!: typeof_NullPointer\n                simp: sconf_def hconf_def)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,a_ \\<turnstile> THROW NullPointer : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "next"], ["proof (state)\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "case (FAssRed1 e h l e' h' l' F D e\\<^sub>2)"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (h, l) \\<surd>;\n   P,?E,h \\<turnstile> e : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,h' \\<turnstile> e' : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "have red: \"P \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',(h',l')\\<rangle>\"\n   and IH: \"\\<And>E T. \\<lbrakk>P,E \\<turnstile> (h,l) \\<surd>; P,E,h \\<turnstile> e : T\\<rbrakk>\n                 \\<Longrightarrow> \\<exists>U. P,E,h' \\<turnstile> e' : U \\<and> P \\<turnstile> U \\<le> T\"\n   and conf: \"P,E \\<turnstile> (h,l) \\<surd>\" and wt: \"P,E,h \\<turnstile> e\\<bullet>F{D}:=e\\<^sub>2 : T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',(h', l')\\<rangle> &&&\n     (\\<And>E T.\n         \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n          P,E,h \\<turnstile> e : T\\<rbrakk>\n         \\<Longrightarrow> \\<exists>U.\n                              P,E,h' \\<turnstile> e' : U \\<and>\n                              P \\<turnstile> U \\<le> T)) &&&\n    P,E \\<turnstile> (h, l) \\<surd> &&&\n    P,E,h \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T", "by fact+"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (h, l) \\<surd>;\n   P,?E,h \\<turnstile> e : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>U.\n                       P,?E,h' \\<turnstile> e' : U \\<and>\n                       P \\<turnstile> U \\<le> ?T\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "from wt"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T", "have void: \"T = Void\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\n\ngoal (1 subgoal):\n 1. T = Void", "by blast\n  \\<comment> \\<open>We distinguish if @{term e} has type @{term NT} or a Class type\\<close>\n  \\<comment> \\<open>Remember ?case = @{term ?case}\\<close>"], ["proof (state)\nthis:\n  T = Void\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "{"], ["proof (state)\nthis:\n  T = Void\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "assume \"P,E,h \\<turnstile> e : NT\""], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : NT\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "hence \"P,E,h' \\<turnstile> e' : NT\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> e' : NT", "using IH[OF conf]"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  P,E,h \\<turnstile> e : ?T \\<Longrightarrow>\n  \\<exists>U. P,E,h' \\<turnstile> e' : U \\<and> P \\<turnstile> U \\<le> ?T\n\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> e' : NT", "by fastforce"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> e' : NT\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "moreover"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> e' : NT\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "obtain T\\<^sub>2 where \"P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>T\\<^sub>2.\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using wt"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\n\ngoal (1 subgoal):\n 1. (\\<And>T\\<^sub>2.\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "from this red_hext_incr[OF red]"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  h \\<unlhd> h'", "have  \"P,E,h' \\<turnstile> e\\<^sub>2 : T\\<^sub>2\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  h \\<unlhd> h'\n\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> e\\<^sub>2 : T\\<^sub>2", "by(rule WTrt_hext_mono)"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "ultimately"], ["proof (chain)\npicking this:\n  P,E,h' \\<turnstile> e' : NT\n  P,E,h' \\<turnstile> e\\<^sub>2 : T\\<^sub>2", "have ?case"], ["proof (prove)\nusing this:\n  P,E,h' \\<turnstile> e' : NT\n  P,E,h' \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "using void"], ["proof (prove)\nusing this:\n  P,E,h' \\<turnstile> e' : NT\n  P,E,h' \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  T = Void\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by(blast intro!:WTrtFAssNT)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "}"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "moreover"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "{"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "fix C TF T\\<^sub>2"], ["proof (state)\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "assume wt\\<^sub>1: \"P,E,h \\<turnstile> e : Class C\" and wt\\<^sub>2: \"P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\"\n    and has: \"P \\<turnstile> C has F:TF in D\" and sub: \"P \\<turnstile> T\\<^sub>2 \\<le> TF\""], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : Class C\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  P \\<turnstile> C has F:TF in D\n  P \\<turnstile> T\\<^sub>2 \\<le> TF\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "obtain U where wt\\<^sub>1': \"P,E,h' \\<turnstile> e' : U\" and UsubC: \"P \\<turnstile> U \\<le> Class C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>U.\n        \\<lbrakk>P,E,h' \\<turnstile> e' : U;\n         P \\<turnstile> U \\<le> Class C\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using IH[OF conf wt\\<^sub>1]"], ["proof (prove)\nusing this:\n  \\<exists>U.\n     P,E,h' \\<turnstile> e' : U \\<and> P \\<turnstile> U \\<le> Class C\n\ngoal (1 subgoal):\n 1. (\\<And>U.\n        \\<lbrakk>P,E,h' \\<turnstile> e' : U;\n         P \\<turnstile> U \\<le> Class C\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> e' : U\n  P \\<turnstile> U \\<le> Class C\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "have wt\\<^sub>2': \"P,E,h' \\<turnstile> e\\<^sub>2 : T\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> e\\<^sub>2 : T\\<^sub>2", "by(rule WTrt_hext_mono[OF wt\\<^sub>2 red_hext_incr[OF red]])\n    \\<comment> \\<open>Is @{term U} the null type or a class type?\\<close>"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "{"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "assume \"U = NT\""], ["proof (state)\nthis:\n  U = NT\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "with wt\\<^sub>1' wt\\<^sub>2' void"], ["proof (chain)\npicking this:\n  P,E,h' \\<turnstile> e' : U\n  P,E,h' \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  T = Void\n  U = NT", "have ?case"], ["proof (prove)\nusing this:\n  P,E,h' \\<turnstile> e' : U\n  P,E,h' \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  T = Void\n  U = NT\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by(blast intro!:WTrtFAssNT)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "}"], ["proof (state)\nthis:\n  U = NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "moreover"], ["proof (state)\nthis:\n  U = NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "{"], ["proof (state)\nthis:\n  U = NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "fix C'"], ["proof (state)\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "assume UClass: \"U = Class C'\" and \"subclass\": \"P \\<turnstile> C' \\<preceq>\\<^sup>* C\""], ["proof (state)\nthis:\n  U = Class C'\n  P \\<turnstile> C' \\<preceq>\\<^sup>* C\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "have \"P,E,h' \\<turnstile> e' : Class C'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> e' : Class C'", "using wt\\<^sub>1' UClass"], ["proof (prove)\nusing this:\n  P,E,h' \\<turnstile> e' : U\n  U = Class C'\n\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> e' : Class C'", "by auto"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> e' : Class C'\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "moreover"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> e' : Class C'\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "have \"P \\<turnstile> C' has F:TF in D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<turnstile> C' has F:TF in D", "by(rule has_field_mono[OF has \"subclass\"])"], ["proof (state)\nthis:\n  P \\<turnstile> C' has F:TF in D\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "ultimately"], ["proof (chain)\npicking this:\n  P,E,h' \\<turnstile> e' : Class C'\n  P \\<turnstile> C' has F:TF in D", "have ?case"], ["proof (prove)\nusing this:\n  P,E,h' \\<turnstile> e' : Class C'\n  P \\<turnstile> C' has F:TF in D\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "using wt\\<^sub>2' sub void"], ["proof (prove)\nusing this:\n  P,E,h' \\<turnstile> e' : Class C'\n  P \\<turnstile> C' has F:TF in D\n  P,E,h' \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  P \\<turnstile> T\\<^sub>2 \\<le> TF\n  T = Void\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by(blast intro:WTrtFAss)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "}"], ["proof (state)\nthis:\n  \\<lbrakk>U = Class ?C'2; P \\<turnstile> ?C'2 \\<preceq>\\<^sup>* C\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "ultimately"], ["proof (chain)\npicking this:\n  U = NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n  \\<lbrakk>U = Class ?C'2; P \\<turnstile> ?C'2 \\<preceq>\\<^sup>* C\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                       P \\<turnstile> T' \\<le> T", "have ?case"], ["proof (prove)\nusing this:\n  U = NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n  \\<lbrakk>U = Class ?C'2; P \\<turnstile> ?C'2 \\<preceq>\\<^sup>* C\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "using UsubC"], ["proof (prove)\nusing this:\n  U = NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n  \\<lbrakk>U = Class ?C'2; P \\<turnstile> ?C'2 \\<preceq>\\<^sup>* C\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n  P \\<turnstile> U \\<le> Class C\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by(auto simp add:widen_Class)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P,E,h \\<turnstile> e : Class ?C2;\n   P,E,h \\<turnstile> e\\<^sub>2 : ?T\\<^sub>22;\n   P \\<turnstile> ?C2 has F:?TF2 in D;\n   P \\<turnstile> ?T\\<^sub>22 \\<le> ?TF2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n\ngoal (44 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba F D e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>es a b es' aa ba v M E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                                \\<langle>es',(aa, ba)\\<rangle>;\n         \\<And>E Ts.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n            \\<Longrightarrow> \\<exists>Ts'.\n                                 P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                 P \\<turnstile> Ts' [\\<le>] Ts;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> Val\n            v\\<bullet>M(es') : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 44 subgoals...", "ultimately"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> e : NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n  \\<lbrakk>P,E,h \\<turnstile> e : Class ?C2;\n   P,E,h \\<turnstile> e\\<^sub>2 : ?T\\<^sub>22;\n   P \\<turnstile> ?C2 has F:?TF2 in D;\n   P \\<turnstile> ?T\\<^sub>22 \\<le> ?TF2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                       P \\<turnstile> T' \\<le> T", "show ?case"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n  \\<lbrakk>P,E,h \\<turnstile> e : Class ?C2;\n   P,E,h \\<turnstile> e\\<^sub>2 : ?T\\<^sub>22;\n   P \\<turnstile> ?C2 has F:?TF2 in D;\n   P \\<turnstile> ?T\\<^sub>22 \\<le> ?TF2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "using wt"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n  \\<lbrakk>P,E,h \\<turnstile> e : Class ?C2;\n   P,E,h \\<turnstile> e\\<^sub>2 : ?T\\<^sub>22;\n   P \\<turnstile> ?C2 has F:?TF2 in D;\n   P \\<turnstile> ?T\\<^sub>22 \\<le> ?TF2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n  P,E,h \\<turnstile> e\\<bullet>F{D} := e\\<^sub>2 : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by blast"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>F{D} := e\\<^sub>2 : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (43 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>M vs a b E T.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> THROW\n           NullPointer : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 43 subgoals...", "next"], ["proof (state)\ngoal (43 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>M vs a b E T.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> THROW\n           NullPointer : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 43 subgoals...", "case (FAssRed2 e\\<^sub>2 h l e\\<^sub>2' h' l' v F D)"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n                 \\<langle>e\\<^sub>2',(h', l')\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (h, l) \\<surd>;\n   P,?E,h \\<turnstile> e\\<^sub>2 : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,h' \\<turnstile> e\\<^sub>2' : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> Val v\\<bullet>F{D} := e\\<^sub>2 : T\n\ngoal (43 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>M vs a b E T.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> THROW\n           NullPointer : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 43 subgoals...", "have red: \"P \\<turnstile> \\<langle>e\\<^sub>2,(h,l)\\<rangle> \\<rightarrow> \\<langle>e\\<^sub>2',(h',l')\\<rangle>\"\n   and IH: \"\\<And>E T. \\<lbrakk>P,E \\<turnstile> (h,l) \\<surd>; P,E,h \\<turnstile> e\\<^sub>2 : T\\<rbrakk>\n                 \\<Longrightarrow> \\<exists>U. P,E,h' \\<turnstile> e\\<^sub>2' : U \\<and> P \\<turnstile> U \\<le> T\"\n   and conf: \"P,E \\<turnstile> (h,l) \\<surd>\" and wt: \"P,E,h \\<turnstile> Val v\\<bullet>F{D}:=e\\<^sub>2 : T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<turnstile> \\<langle>e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e\\<^sub>2',(h', l')\\<rangle> &&&\n     (\\<And>E T.\n         \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n          P,E,h \\<turnstile> e\\<^sub>2 : T\\<rbrakk>\n         \\<Longrightarrow> \\<exists>U.\n                              P,E,h' \\<turnstile> e\\<^sub>2' : U \\<and>\n                              P \\<turnstile> U \\<le> T)) &&&\n    P,E \\<turnstile> (h, l) \\<surd> &&&\n    P,E,h \\<turnstile> Val v\\<bullet>F{D} := e\\<^sub>2 : T", "by fact+"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e\\<^sub>2,(h, l)\\<rangle> \\<rightarrow>\n                 \\<langle>e\\<^sub>2',(h', l')\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (h, l) \\<surd>;\n   P,?E,h \\<turnstile> e\\<^sub>2 : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>U.\n                       P,?E,h' \\<turnstile> e\\<^sub>2' : U \\<and>\n                       P \\<turnstile> U \\<le> ?T\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> Val v\\<bullet>F{D} := e\\<^sub>2 : T\n\ngoal (43 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>M vs a b E T.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> THROW\n           NullPointer : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 43 subgoals...", "from wt"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> Val v\\<bullet>F{D} := e\\<^sub>2 : T", "have [simp]: \"T = Void\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> Val v\\<bullet>F{D} := e\\<^sub>2 : T\n\ngoal (1 subgoal):\n 1. T = Void", "by auto"], ["proof (state)\nthis:\n  T = Void\n\ngoal (43 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba v F D E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>F{D} := e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>F{D} := e' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>M vs a b E T.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> THROW\n           NullPointer : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 43 subgoals...", "from wt"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> Val v\\<bullet>F{D} := e\\<^sub>2 : T", "show ?case"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> Val v\\<bullet>F{D} := e\\<^sub>2 : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> Val v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "proof (rule WTrt_elim_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>C Ta T\\<^sub>2.\n       \\<lbrakk>T = Void; P,E,h \\<turnstile> Val v : Class C;\n        P \\<turnstile> C has F:Ta in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>T\\<^sub>2.\n       \\<lbrakk>T = Void; P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "fix C TF T\\<^sub>2"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>C Ta T\\<^sub>2.\n       \\<lbrakk>T = Void; P,E,h \\<turnstile> Val v : Class C;\n        P \\<turnstile> C has F:Ta in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>T\\<^sub>2.\n       \\<lbrakk>T = Void; P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "assume wt\\<^sub>1: \"P,E,h \\<turnstile> Val v : Class C\"\n      and has: \"P \\<turnstile> C has F:TF in D\"\n      and wt\\<^sub>2: \"P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\" and TsubTF: \"P \\<turnstile> T\\<^sub>2 \\<le> TF\""], ["proof (state)\nthis:\n  P,E,h \\<turnstile> Val v : Class C\n  P \\<turnstile> C has F:TF in D\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n  P \\<turnstile> T\\<^sub>2 \\<le> TF\n\ngoal (2 subgoals):\n 1. \\<And>C Ta T\\<^sub>2.\n       \\<lbrakk>T = Void; P,E,h \\<turnstile> Val v : Class C;\n        P \\<turnstile> C has F:Ta in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>T\\<^sub>2.\n       \\<lbrakk>T = Void; P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "have wt\\<^sub>1': \"P,E,h' \\<turnstile> Val v : Class C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> Val v : Class C", "by(rule WTrt_hext_mono[OF wt\\<^sub>1 red_hext_incr[OF red]])"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> Val v : Class C\n\ngoal (2 subgoals):\n 1. \\<And>C Ta T\\<^sub>2.\n       \\<lbrakk>T = Void; P,E,h \\<turnstile> Val v : Class C;\n        P \\<turnstile> C has F:Ta in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>T\\<^sub>2.\n       \\<lbrakk>T = Void; P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "obtain T\\<^sub>2' where wt\\<^sub>2': \"P,E,h' \\<turnstile> e\\<^sub>2' : T\\<^sub>2'\" and T'subT: \"P \\<turnstile> T\\<^sub>2' \\<le> T\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>T\\<^sub>2'.\n        \\<lbrakk>P,E,h' \\<turnstile> e\\<^sub>2' : T\\<^sub>2';\n         P \\<turnstile> T\\<^sub>2' \\<le> T\\<^sub>2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using IH[OF conf wt\\<^sub>2]"], ["proof (prove)\nusing this:\n  \\<exists>U.\n     P,E,h' \\<turnstile> e\\<^sub>2' : U \\<and>\n     P \\<turnstile> U \\<le> T\\<^sub>2\n\ngoal (1 subgoal):\n 1. (\\<And>T\\<^sub>2'.\n        \\<lbrakk>P,E,h' \\<turnstile> e\\<^sub>2' : T\\<^sub>2';\n         P \\<turnstile> T\\<^sub>2' \\<le> T\\<^sub>2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> e\\<^sub>2' : T\\<^sub>2'\n  P \\<turnstile> T\\<^sub>2' \\<le> T\\<^sub>2\n\ngoal (2 subgoals):\n 1. \\<And>C Ta T\\<^sub>2.\n       \\<lbrakk>T = Void; P,E,h \\<turnstile> Val v : Class C;\n        P \\<turnstile> C has F:Ta in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>T\\<^sub>2.\n       \\<lbrakk>T = Void; P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "have \"P,E,h' \\<turnstile> Val v\\<bullet>F{D}:=e\\<^sub>2' : Void\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> Val v\\<bullet>F{D} := e\\<^sub>2' : Void", "by(rule WTrtFAss[OF wt\\<^sub>1' has wt\\<^sub>2' widen_trans[OF T'subT TsubTF]])"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> Val v\\<bullet>F{D} := e\\<^sub>2' : Void\n\ngoal (2 subgoals):\n 1. \\<And>C Ta T\\<^sub>2.\n       \\<lbrakk>T = Void; P,E,h \\<turnstile> Val v : Class C;\n        P \\<turnstile> C has F:Ta in D;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2;\n        P \\<turnstile> T\\<^sub>2 \\<le> Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>T\\<^sub>2.\n       \\<lbrakk>T = Void; P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "thus ?case"], ["proof (prove)\nusing this:\n  P,E,h' \\<turnstile> Val v\\<bullet>F{D} := e\\<^sub>2' : Void\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> Val v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by auto"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> Val v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (1 subgoal):\n 1. \\<And>T\\<^sub>2.\n       \\<lbrakk>T = Void; P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>T\\<^sub>2.\n       \\<lbrakk>T = Void; P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "fix T\\<^sub>2"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>T\\<^sub>2.\n       \\<lbrakk>T = Void; P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "assume null: \"P,E,h \\<turnstile> Val v : NT\" and wt\\<^sub>2: \"P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\""], ["proof (state)\nthis:\n  P,E,h \\<turnstile> Val v : NT\n  P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<And>T\\<^sub>2.\n       \\<lbrakk>T = Void; P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "from null"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> Val v : NT", "have \"v = Null\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> Val v : NT\n\ngoal (1 subgoal):\n 1. v = Null", "by simp"], ["proof (state)\nthis:\n  v = Null\n\ngoal (1 subgoal):\n 1. \\<And>T\\<^sub>2.\n       \\<lbrakk>T = Void; P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "moreover"], ["proof (state)\nthis:\n  v = Null\n\ngoal (1 subgoal):\n 1. \\<And>T\\<^sub>2.\n       \\<lbrakk>T = Void; P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "obtain T\\<^sub>2' where \"P,E,h' \\<turnstile> e\\<^sub>2' : T\\<^sub>2' \\<and> P \\<turnstile> T\\<^sub>2' \\<le> T\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>T\\<^sub>2'.\n        P,E,h' \\<turnstile> e\\<^sub>2' : T\\<^sub>2' \\<and>\n        P \\<turnstile> T\\<^sub>2' \\<le> T\\<^sub>2 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using IH[OF conf wt\\<^sub>2]"], ["proof (prove)\nusing this:\n  \\<exists>U.\n     P,E,h' \\<turnstile> e\\<^sub>2' : U \\<and>\n     P \\<turnstile> U \\<le> T\\<^sub>2\n\ngoal (1 subgoal):\n 1. (\\<And>T\\<^sub>2'.\n        P,E,h' \\<turnstile> e\\<^sub>2' : T\\<^sub>2' \\<and>\n        P \\<turnstile> T\\<^sub>2' \\<le> T\\<^sub>2 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> e\\<^sub>2' : T\\<^sub>2' \\<and>\n  P \\<turnstile> T\\<^sub>2' \\<le> T\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<And>T\\<^sub>2.\n       \\<lbrakk>T = Void; P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> e\\<^sub>2 : T\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "ultimately"], ["proof (chain)\npicking this:\n  v = Null\n  P,E,h' \\<turnstile> e\\<^sub>2' : T\\<^sub>2' \\<and>\n  P \\<turnstile> T\\<^sub>2' \\<le> T\\<^sub>2", "show ?thesis"], ["proof (prove)\nusing this:\n  v = Null\n  P,E,h' \\<turnstile> e\\<^sub>2' : T\\<^sub>2' \\<and>\n  P \\<turnstile> T\\<^sub>2' \\<le> T\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> Val v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by(fastforce intro:WTrtFAssNT)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> Val v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> Val v\\<bullet>F{D} := e\\<^sub>2' : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (42 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e h l V e' h' l' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V := None))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                             P \\<turnstile> T' \\<le> Ta\nA total of 42 subgoals...", "next"], ["proof (state)\ngoal (42 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e h l V e' h' l' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V := None))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                             P \\<turnstile> T' \\<le> Ta\nA total of 42 subgoals...", "case RedFAss"], ["proof (state)\nthis:\n  h_ a_ = \\<lfloor>(C_, fs_)\\<rfloor>\n  P,E \\<turnstile> (h_, l_) \\<surd>\n  P,E,h_ \\<turnstile> addr a_\\<bullet>F_{D_} := Val v_ : T\n\ngoal (42 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>h a C fs F D v l E T.\n       \\<lbrakk>h a = \\<lfloor>(C, fs)\\<rfloor>;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> addr a\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h(a \\<mapsto>\n                            (C, fs((F, D) \\<mapsto>\n                             v))) \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e h l V e' h' l' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V := None))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                             P \\<turnstile> T' \\<le> Ta\nA total of 42 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  h_ a_ = \\<lfloor>(C_, fs_)\\<rfloor>\n  P,E \\<turnstile> (h_, l_) \\<surd>\n  P,E,h_ \\<turnstile> addr a_\\<bullet>F_{D_} := Val v_ : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h_(a_ \\<mapsto>\n       (C_, fs_((F_, D_) \\<mapsto> v_))) \\<turnstile> unit : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by(auto simp del:fun_upd_apply)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h_(a_ \\<mapsto>\n     (C_, fs_((F_, D_) \\<mapsto> v_))) \\<turnstile> unit : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (41 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V e' h' l' v T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V := None))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 41 subgoals...", "next"], ["proof (state)\ngoal (41 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V e' h' l' v T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V := None))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 41 subgoals...", "case RedFAssNull"], ["proof (state)\nthis:\n  P,E \\<turnstile> (a_, b_) \\<surd>\n  P,E,a_ \\<turnstile> null\\<bullet>F_{D_} := Val v_ : T\n\ngoal (41 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>F D v a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>F{D} := Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V e' h' l' v T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V := None))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n         P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 41 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P,E \\<turnstile> (a_, b_) \\<surd>\n  P,E,a_ \\<turnstile> null\\<bullet>F_{D_} := Val v_ : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,a_ \\<turnstile> THROW NullPointer : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by(fastforce intro: WTThrow[OF WTVal] elim!:typeof_NullPointer simp:sconf_def hconf_def)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,a_ \\<turnstile> THROW NullPointer : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "next"], ["proof (state)\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "case (CallObj e h l e' h' l' M es)"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (h, l) \\<surd>;\n   P,?E,h \\<turnstile> e : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,h' \\<turnstile> e' : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> e\\<bullet>M(es) : T\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "have red: \"P \\<turnstile> \\<langle>e,(h,l)\\<rangle> \\<rightarrow> \\<langle>e',(h',l')\\<rangle>\"\n   and IH: \"\\<And>E T. \\<lbrakk>P,E \\<turnstile> (h,l) \\<surd>; P,E,h \\<turnstile> e : T\\<rbrakk>\n                 \\<Longrightarrow> \\<exists>U. P,E,h' \\<turnstile> e' : U \\<and> P \\<turnstile> U \\<le> T\"\n   and conf: \"P,E \\<turnstile> (h,l) \\<surd>\" and wt: \"P,E,h \\<turnstile> e\\<bullet>M(es) : T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                    \\<langle>e',(h', l')\\<rangle> &&&\n     (\\<And>E T.\n         \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n          P,E,h \\<turnstile> e : T\\<rbrakk>\n         \\<Longrightarrow> \\<exists>U.\n                              P,E,h' \\<turnstile> e' : U \\<and>\n                              P \\<turnstile> U \\<le> T)) &&&\n    P,E \\<turnstile> (h, l) \\<surd> &&&\n    P,E,h \\<turnstile> e\\<bullet>M(es) : T", "by fact+\n  \\<comment> \\<open>We distinguish if @{term e} has type @{term NT} or a Class type\\<close>\n  \\<comment> \\<open>Remember ?case = @{term ?case}\\<close>"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (h, l) \\<surd>;\n   P,?E,h \\<turnstile> e : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>U.\n                       P,?E,h' \\<turnstile> e' : U \\<and>\n                       P \\<turnstile> U \\<le> ?T\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> e\\<bullet>M(es) : T\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "{"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e,(h, l)\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (h, l) \\<surd>;\n   P,?E,h \\<turnstile> e : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>U.\n                       P,?E,h' \\<turnstile> e' : U \\<and>\n                       P \\<turnstile> U \\<le> ?T\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> e\\<bullet>M(es) : T\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "assume \"P,E,h \\<turnstile> e:NT\""], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : NT\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "hence \"P,E,h' \\<turnstile> e' : NT\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> e' : NT", "using IH[OF conf]"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> e : NT\n  P,E,h \\<turnstile> e : ?T \\<Longrightarrow>\n  \\<exists>U. P,E,h' \\<turnstile> e' : U \\<and> P \\<turnstile> U \\<le> ?T\n\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> e' : NT", "by fastforce"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> e' : NT\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "moreover"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> e' : NT\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "fix Ts"], ["proof (state)\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "assume wtes: \"P,E,h \\<turnstile> es [:] Ts\""], ["proof (state)\nthis:\n  P,E,h \\<turnstile> es [:] Ts\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "have \"P,E,h' \\<turnstile> es [:] Ts\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> es [:] Ts", "by(rule WTrts_hext_mono[OF wtes red_hext_incr[OF red]])"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> es [:] Ts\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "ultimately"], ["proof (chain)\npicking this:\n  P,E,h' \\<turnstile> e' : NT\n  P,E,h' \\<turnstile> es [:] Ts", "have ?case"], ["proof (prove)\nusing this:\n  P,E,h' \\<turnstile> e' : NT\n  P,E,h' \\<turnstile> es [:] Ts\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by(blast intro!:WTrtCallNT)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P,E,h \\<turnstile> e : NT;\n   P,E,h \\<turnstile> es [:] ?Ts2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>P,E,h \\<turnstile> e : NT;\n   P,E,h \\<turnstile> es [:] ?Ts2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "{"], ["proof (state)\nthis:\n  \\<lbrakk>P,E,h \\<turnstile> e : NT;\n   P,E,h \\<turnstile> es [:] ?Ts2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "fix C D Ts Us pns body"], ["proof (state)\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "assume wte: \"P,E,h \\<turnstile> e : Class C\"\n      and \"method\": \"P \\<turnstile> C sees M:Ts\\<rightarrow>T = (pns,body) in D\"\n      and wtes: \"P,E,h \\<turnstile> es [:] Us\" and subs: \"P \\<turnstile> Us [\\<le>] Ts\""], ["proof (state)\nthis:\n  P,E,h \\<turnstile> e : Class C\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D\n  P,E,h \\<turnstile> es [:] Us\n  P \\<turnstile> Us [\\<le>] Ts\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "obtain U where wte': \"P,E,h' \\<turnstile> e' : U\" and UsubC: \"P \\<turnstile> U \\<le> Class C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>U.\n        \\<lbrakk>P,E,h' \\<turnstile> e' : U;\n         P \\<turnstile> U \\<le> Class C\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using IH[OF conf wte]"], ["proof (prove)\nusing this:\n  \\<exists>U.\n     P,E,h' \\<turnstile> e' : U \\<and> P \\<turnstile> U \\<le> Class C\n\ngoal (1 subgoal):\n 1. (\\<And>U.\n        \\<lbrakk>P,E,h' \\<turnstile> e' : U;\n         P \\<turnstile> U \\<le> Class C\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast\n    \\<comment> \\<open>Is @{term U} the null type or a class type?\\<close>"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> e' : U\n  P \\<turnstile> U \\<le> Class C\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "{"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> e' : U\n  P \\<turnstile> U \\<le> Class C\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "assume \"U = NT\""], ["proof (state)\nthis:\n  U = NT\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "moreover"], ["proof (state)\nthis:\n  U = NT\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "have \"P,E,h' \\<turnstile> es [:] Us\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> es [:] Us", "by(rule WTrts_hext_mono[OF wtes red_hext_incr[OF red]])"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> es [:] Us\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "ultimately"], ["proof (chain)\npicking this:\n  U = NT\n  P,E,h' \\<turnstile> es [:] Us", "have ?case"], ["proof (prove)\nusing this:\n  U = NT\n  P,E,h' \\<turnstile> es [:] Us\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "using wte'"], ["proof (prove)\nusing this:\n  U = NT\n  P,E,h' \\<turnstile> es [:] Us\n  P,E,h' \\<turnstile> e' : U\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by(blast intro!:WTrtCallNT)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "}"], ["proof (state)\nthis:\n  U = NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "moreover"], ["proof (state)\nthis:\n  U = NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "{"], ["proof (state)\nthis:\n  U = NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "fix C'"], ["proof (state)\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "assume UClass: \"U = Class C'\" and \"subclass\": \"P \\<turnstile> C' \\<preceq>\\<^sup>* C\""], ["proof (state)\nthis:\n  U = Class C'\n  P \\<turnstile> C' \\<preceq>\\<^sup>* C\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "have \"P,E,h' \\<turnstile> e' : Class C'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> e' : Class C'", "using wte' UClass"], ["proof (prove)\nusing this:\n  P,E,h' \\<turnstile> e' : U\n  U = Class C'\n\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> e' : Class C'", "by auto"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> e' : Class C'\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "moreover"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> e' : Class C'\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "obtain Ts' T' pns' body' D'\n        where method': \"P \\<turnstile> C' sees M:Ts'\\<rightarrow>T' = (pns',body') in D'\"\n        and subs': \"P \\<turnstile> Ts [\\<le>] Ts'\" and sub': \"P \\<turnstile> T' \\<le> T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>Ts' T' pns' body' D'.\n        \\<lbrakk>P \\<turnstile> C' sees M: Ts'\\<rightarrow>T' = (pns',\n                           body') in D';\n         P \\<turnstile> Ts [\\<le>] Ts'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using Call_lemma[OF \"method\" \"subclass\" wf]"], ["proof (prove)\nusing this:\n  \\<exists>D' Ts' T' m'.\n     P \\<turnstile> C' sees M: Ts'\\<rightarrow>T' = m' in D' \\<and>\n     P \\<turnstile> Ts [\\<le>] Ts' \\<and>\n     P \\<turnstile> T' \\<le> T \\<and>\n     P \\<turnstile> C' \\<preceq>\\<^sup>* D' \\<and>\n     is_type P T' \\<and>\n     (\\<forall>T\\<in>set Ts'. is_type P T) \\<and>\n     wf_J_mdecl P D' (M, Ts', T', m')\n\ngoal (1 subgoal):\n 1. (\\<And>Ts' T' pns' body' D'.\n        \\<lbrakk>P \\<turnstile> C' sees M: Ts'\\<rightarrow>T' = (pns',\n                           body') in D';\n         P \\<turnstile> Ts [\\<le>] Ts'; P \\<turnstile> T' \\<le> T\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fast"], ["proof (state)\nthis:\n  P \\<turnstile> C' sees M: Ts'\\<rightarrow>T' = (pns', body') in D'\n  P \\<turnstile> Ts [\\<le>] Ts'\n  P \\<turnstile> T' \\<le> T\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "moreover"], ["proof (state)\nthis:\n  P \\<turnstile> C' sees M: Ts'\\<rightarrow>T' = (pns', body') in D'\n  P \\<turnstile> Ts [\\<le>] Ts'\n  P \\<turnstile> T' \\<le> T\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "have \"P,E,h' \\<turnstile> es [:] Us\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> es [:] Us", "by(rule WTrts_hext_mono[OF wtes red_hext_incr[OF red]])"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> es [:] Us\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "ultimately"], ["proof (chain)\npicking this:\n  P,E,h' \\<turnstile> e' : Class C'\n  P \\<turnstile> C' sees M: Ts'\\<rightarrow>T' = (pns', body') in D'\n  P \\<turnstile> Ts [\\<le>] Ts'\n  P \\<turnstile> T' \\<le> T\n  P,E,h' \\<turnstile> es [:] Us", "have ?case"], ["proof (prove)\nusing this:\n  P,E,h' \\<turnstile> e' : Class C'\n  P \\<turnstile> C' sees M: Ts'\\<rightarrow>T' = (pns', body') in D'\n  P \\<turnstile> Ts [\\<le>] Ts'\n  P \\<turnstile> T' \\<le> T\n  P,E,h' \\<turnstile> es [:] Us\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "using subs"], ["proof (prove)\nusing this:\n  P,E,h' \\<turnstile> e' : Class C'\n  P \\<turnstile> C' sees M: Ts'\\<rightarrow>T' = (pns', body') in D'\n  P \\<turnstile> Ts [\\<le>] Ts'\n  P \\<turnstile> T' \\<le> T\n  P,E,h' \\<turnstile> es [:] Us\n  P \\<turnstile> Us [\\<le>] Ts\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by(blast intro:WTrtCall rtrancl_trans widens_trans)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "}"], ["proof (state)\nthis:\n  \\<lbrakk>U = Class ?C'2; P \\<turnstile> ?C'2 \\<preceq>\\<^sup>* C\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "ultimately"], ["proof (chain)\npicking this:\n  U = NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n  \\<lbrakk>U = Class ?C'2; P \\<turnstile> ?C'2 \\<preceq>\\<^sup>* C\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                       P \\<turnstile> T' \\<le> T", "have ?case"], ["proof (prove)\nusing this:\n  U = NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n  \\<lbrakk>U = Class ?C'2; P \\<turnstile> ?C'2 \\<preceq>\\<^sup>* C\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "using UsubC"], ["proof (prove)\nusing this:\n  U = NT \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n  \\<lbrakk>U = Class ?C'2; P \\<turnstile> ?C'2 \\<preceq>\\<^sup>* C\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n  P \\<turnstile> U \\<le> Class C\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by(auto simp add:widen_Class)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P,E,h \\<turnstile> e : Class ?C2;\n   P \\<turnstile> ?C2 sees M: ?Ts2\\<rightarrow>T = (?pns2, ?body2) in ?D2;\n   P,E,h \\<turnstile> es [:] ?Us2; P \\<turnstile> ?Us2 [\\<le>] ?Ts2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n\ngoal (40 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e a b e' aa ba M es E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e h l V v e' h' l' v' T E Ta.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                 (h, l(V \\<mapsto>\n                                  v))\\<rangle> \\<rightarrow>\n                                \\<langle>e',(h', l')\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n             P,E,h \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,h' \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n         P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                             e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\nA total of 40 subgoals...", "ultimately"], ["proof (chain)\npicking this:\n  \\<lbrakk>P,E,h \\<turnstile> e : NT;\n   P,E,h \\<turnstile> es [:] ?Ts2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n  \\<lbrakk>P,E,h \\<turnstile> e : Class ?C2;\n   P \\<turnstile> ?C2 sees M: ?Ts2\\<rightarrow>T = (?pns2, ?body2) in ?D2;\n   P,E,h \\<turnstile> es [:] ?Us2; P \\<turnstile> ?Us2 [\\<le>] ?Ts2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                       P \\<turnstile> T' \\<le> T", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>P,E,h \\<turnstile> e : NT;\n   P,E,h \\<turnstile> es [:] ?Ts2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n  \\<lbrakk>P,E,h \\<turnstile> e : Class ?C2;\n   P \\<turnstile> ?C2 sees M: ?Ts2\\<rightarrow>T = (?pns2, ?body2) in ?D2;\n   P,E,h \\<turnstile> es [:] ?Us2; P \\<turnstile> ?Us2 [\\<le>] ?Ts2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "using wt"], ["proof (prove)\nusing this:\n  \\<lbrakk>P,E,h \\<turnstile> e : NT;\n   P,E,h \\<turnstile> es [:] ?Ts2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n  \\<lbrakk>P,E,h \\<turnstile> e : Class ?C2;\n   P \\<turnstile> ?C2 sees M: ?Ts2\\<rightarrow>T = (?pns2, ?body2) in ?D2;\n   P,E,h \\<turnstile> es [:] ?Us2; P \\<turnstile> ?Us2 [\\<le>] ?Ts2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n                       P \\<turnstile> T' \\<le> T\n  P,E,h \\<turnstile> e\\<bullet>M(es) : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by auto"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> e'\\<bullet>M(es) : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (39 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 8. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V v e' h' l' v' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>V T u a b E Ta.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val u : T' \\<and>\n                             P \\<turnstile> T' \\<le> Ta\nA total of 39 subgoals...", "next"], ["proof (state)\ngoal (39 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 8. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V v e' h' l' v' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>V T u a b E Ta.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val u : T' \\<and>\n                             P \\<turnstile> T' \\<le> Ta\nA total of 39 subgoals...", "case (CallParams es h l es' h' l' v M)"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>es,(h, l)\\<rangle> [\\<rightarrow>]\n                 \\<langle>es',(h', l')\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (h, l) \\<surd>;\n   P,?E,h \\<turnstile> es [:] ?Ts\\<rbrakk>\n  \\<Longrightarrow> \\<exists>Ts'.\n                       P,?E,h' \\<turnstile> es' [:] Ts' \\<and>\n                       P \\<turnstile> Ts' [\\<le>] ?Ts\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> Val v\\<bullet>M(es) : T\n\ngoal (39 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 8. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V v e' h' l' v' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>V T u a b E Ta.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val u : T' \\<and>\n                             P \\<turnstile> T' \\<le> Ta\nA total of 39 subgoals...", "have reds: \"P \\<turnstile> \\<langle>es,(h,l)\\<rangle> [\\<rightarrow>] \\<langle>es',(h',l')\\<rangle>\"\n   and IH: \"\\<And>E Ts. \\<lbrakk>P,E \\<turnstile> (h,l) \\<surd>; P,E,h \\<turnstile> es [:] Ts\\<rbrakk>\n                 \\<Longrightarrow> \\<exists>Us. P,E,h' \\<turnstile> es' [:] Us \\<and> P \\<turnstile> Us [\\<le>] Ts\"\n   and conf: \"P,E \\<turnstile> (h,l) \\<surd>\" and wt: \"P,E,h \\<turnstile> Val v\\<bullet>M(es) : T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<turnstile> \\<langle>es,(h, l)\\<rangle> [\\<rightarrow>]\n                    \\<langle>es',(h', l')\\<rangle> &&&\n     (\\<And>E Ts.\n         \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n          P,E,h \\<turnstile> es [:] Ts\\<rbrakk>\n         \\<Longrightarrow> \\<exists>Us.\n                              P,E,h' \\<turnstile> es' [:] Us \\<and>\n                              P \\<turnstile> Us [\\<le>] Ts)) &&&\n    P,E \\<turnstile> (h, l) \\<surd> &&&\n    P,E,h \\<turnstile> Val v\\<bullet>M(es) : T", "by fact+"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>es,(h, l)\\<rangle> [\\<rightarrow>]\n                 \\<langle>es',(h', l')\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (h, l) \\<surd>;\n   P,?E,h \\<turnstile> es [:] ?Ts\\<rbrakk>\n  \\<Longrightarrow> \\<exists>Us.\n                       P,?E,h' \\<turnstile> es' [:] Us \\<and>\n                       P \\<turnstile> Us [\\<le>] ?Ts\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> Val v\\<bullet>M(es) : T\n\ngoal (39 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>es a b es' aa ba v M E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>es,(a, b)\\<rangle> [\\<rightarrow>]\n                               \\<langle>es',(aa, ba)\\<rangle>;\n        \\<And>E Ts.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> es [:] Ts\\<rbrakk>\n           \\<Longrightarrow> \\<exists>Ts'.\n                                P,E,aa \\<turnstile> es' [:] Ts' \\<and>\n                                P \\<turnstile> Ts' [\\<le>] Ts;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v\\<bullet>M(es) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 7. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 8. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e h l V v e' h' l' v' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 10. \\<And>V T u a b E Ta.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val u : T' \\<and>\n                             P \\<turnstile> T' \\<le> Ta\nA total of 39 subgoals...", "from wt"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> Val v\\<bullet>M(es) : T", "show ?case"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> Val v\\<bullet>M(es) : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> Val v\\<bullet>M(es') : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "proof (rule WTrt_elim_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>C Ts pns body D Ts'.\n       \\<lbrakk>P,E,h \\<turnstile> Val v : Class C;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>Ts.\n       \\<lbrakk>P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> es [:] Ts\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "fix C D Ts Us pns body"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>C Ts pns body D Ts'.\n       \\<lbrakk>P,E,h \\<turnstile> Val v : Class C;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>Ts.\n       \\<lbrakk>P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> es [:] Ts\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "assume wte: \"P,E,h \\<turnstile> Val v : Class C\"\n      and \"P \\<turnstile> C sees M:Ts\\<rightarrow>T = (pns,body) in D\"\n      and wtes: \"P,E,h \\<turnstile> es [:] Us\" and \"P \\<turnstile> Us [\\<le>] Ts\""], ["proof (state)\nthis:\n  P,E,h \\<turnstile> Val v : Class C\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D\n  P,E,h \\<turnstile> es [:] Us\n  P \\<turnstile> Us [\\<le>] Ts\n\ngoal (2 subgoals):\n 1. \\<And>C Ts pns body D Ts'.\n       \\<lbrakk>P,E,h \\<turnstile> Val v : Class C;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>Ts.\n       \\<lbrakk>P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> es [:] Ts\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "moreover"], ["proof (state)\nthis:\n  P,E,h \\<turnstile> Val v : Class C\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D\n  P,E,h \\<turnstile> es [:] Us\n  P \\<turnstile> Us [\\<le>] Ts\n\ngoal (2 subgoals):\n 1. \\<And>C Ts pns body D Ts'.\n       \\<lbrakk>P,E,h \\<turnstile> Val v : Class C;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>Ts.\n       \\<lbrakk>P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> es [:] Ts\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "have \"P,E,h' \\<turnstile> Val v : Class C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E,h' \\<turnstile> Val v : Class C", "by(rule WTrt_hext_mono[OF wte reds_hext_incr[OF reds]])"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> Val v : Class C\n\ngoal (2 subgoals):\n 1. \\<And>C Ts pns body D Ts'.\n       \\<lbrakk>P,E,h \\<turnstile> Val v : Class C;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>Ts.\n       \\<lbrakk>P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> es [:] Ts\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "moreover"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> Val v : Class C\n\ngoal (2 subgoals):\n 1. \\<And>C Ts pns body D Ts'.\n       \\<lbrakk>P,E,h \\<turnstile> Val v : Class C;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>Ts.\n       \\<lbrakk>P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> es [:] Ts\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "obtain Us' where \"P,E,h' \\<turnstile> es' [:] Us' \\<and> P \\<turnstile> Us' [\\<le>] Us\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>Us'.\n        P,E,h' \\<turnstile> es' [:] Us' \\<and>\n        P \\<turnstile> Us' [\\<le>] Us \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using IH[OF conf wtes]"], ["proof (prove)\nusing this:\n  \\<exists>Usa.\n     P,E,h' \\<turnstile> es' [:] Usa \\<and> P \\<turnstile> Usa [\\<le>] Us\n\ngoal (1 subgoal):\n 1. (\\<And>Us'.\n        P,E,h' \\<turnstile> es' [:] Us' \\<and>\n        P \\<turnstile> Us' [\\<le>] Us \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> es' [:] Us' \\<and> P \\<turnstile> Us' [\\<le>] Us\n\ngoal (2 subgoals):\n 1. \\<And>C Ts pns body D Ts'.\n       \\<lbrakk>P,E,h \\<turnstile> Val v : Class C;\n        P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D;\n        P,E,h \\<turnstile> es [:] Ts';\n        P \\<turnstile> Ts' [\\<le>] Ts\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>Ts.\n       \\<lbrakk>P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> es [:] Ts\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "ultimately"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> Val v : Class C\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D\n  P,E,h \\<turnstile> es [:] Us\n  P \\<turnstile> Us [\\<le>] Ts\n  P,E,h' \\<turnstile> Val v : Class C\n  P,E,h' \\<turnstile> es' [:] Us' \\<and> P \\<turnstile> Us' [\\<le>] Us", "show ?thesis"], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> Val v : Class C\n  P \\<turnstile> C sees M: Ts\\<rightarrow>T = (pns, body) in D\n  P,E,h \\<turnstile> es [:] Us\n  P \\<turnstile> Us [\\<le>] Ts\n  P,E,h' \\<turnstile> Val v : Class C\n  P,E,h' \\<turnstile> es' [:] Us' \\<and> P \\<turnstile> Us' [\\<le>] Us\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> Val v\\<bullet>M(es') : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by(blast intro:WTrtCall widens_trans)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> Val v\\<bullet>M(es') : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (1 subgoal):\n 1. \\<And>Ts.\n       \\<lbrakk>P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> es [:] Ts\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Ts.\n       \\<lbrakk>P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> es [:] Ts\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "fix Us"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Ts.\n       \\<lbrakk>P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> es [:] Ts\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "assume null: \"P,E,h \\<turnstile> Val v : NT\" and wtes: \"P,E,h \\<turnstile> es [:] Us\""], ["proof (state)\nthis:\n  P,E,h \\<turnstile> Val v : NT\n  P,E,h \\<turnstile> es [:] Us\n\ngoal (1 subgoal):\n 1. \\<And>Ts.\n       \\<lbrakk>P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> es [:] Ts\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "from null"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> Val v : NT", "have \"v = Null\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> Val v : NT\n\ngoal (1 subgoal):\n 1. v = Null", "by simp"], ["proof (state)\nthis:\n  v = Null\n\ngoal (1 subgoal):\n 1. \\<And>Ts.\n       \\<lbrakk>P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> es [:] Ts\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "moreover"], ["proof (state)\nthis:\n  v = Null\n\ngoal (1 subgoal):\n 1. \\<And>Ts.\n       \\<lbrakk>P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> es [:] Ts\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "obtain Us' where \"P,E,h' \\<turnstile> es' [:] Us' \\<and> P \\<turnstile> Us' [\\<le>] Us\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>Us'.\n        P,E,h' \\<turnstile> es' [:] Us' \\<and>\n        P \\<turnstile> Us' [\\<le>] Us \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using IH[OF conf wtes]"], ["proof (prove)\nusing this:\n  \\<exists>Usa.\n     P,E,h' \\<turnstile> es' [:] Usa \\<and> P \\<turnstile> Usa [\\<le>] Us\n\ngoal (1 subgoal):\n 1. (\\<And>Us'.\n        P,E,h' \\<turnstile> es' [:] Us' \\<and>\n        P \\<turnstile> Us' [\\<le>] Us \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  P,E,h' \\<turnstile> es' [:] Us' \\<and> P \\<turnstile> Us' [\\<le>] Us\n\ngoal (1 subgoal):\n 1. \\<And>Ts.\n       \\<lbrakk>P,E,h \\<turnstile> Val v : NT;\n        P,E,h \\<turnstile> es [:] Ts\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> Val\n           v\\<bullet>M(es') : T' \\<and>\n                            P \\<turnstile> T' \\<le> T", "ultimately"], ["proof (chain)\npicking this:\n  v = Null\n  P,E,h' \\<turnstile> es' [:] Us' \\<and> P \\<turnstile> Us' [\\<le>] Us", "show ?thesis"], ["proof (prove)\nusing this:\n  v = Null\n  P,E,h' \\<turnstile> es' [:] Us' \\<and> P \\<turnstile> Us' [\\<le>] Us\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> Val v\\<bullet>M(es') : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by(fastforce intro:WTrtCallNT)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> Val v\\<bullet>M(es') : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> Val v\\<bullet>M(es') : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (38 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 8. \\<And>e h l V v e' h' l' v' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 9. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 10. \\<And>V T v u a b E Ta.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val u : T' \\<and>\n                             P \\<turnstile> T' \\<le> Ta\nA total of 38 subgoals...", "next"], ["proof (state)\ngoal (38 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 8. \\<And>e h l V v e' h' l' v' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 9. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 10. \\<And>V T v u a b E Ta.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val u : T' \\<and>\n                             P \\<turnstile> T' \\<le> Ta\nA total of 38 subgoals...", "case RedCallNull"], ["proof (state)\nthis:\n  P,E \\<turnstile> (a_, b_) \\<surd>\n  P,E,a_ \\<turnstile> null\\<bullet>M_(map Val vs_) : T\n\ngoal (38 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>M vs a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> null\\<bullet>M(map Val vs) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> THROW NullPointer : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 6. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 8. \\<And>e h l V v e' h' l' v' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 9. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 10. \\<And>V T v u a b E Ta.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> Val u : T' \\<and>\n                             P \\<turnstile> T' \\<le> Ta\nA total of 38 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P,E \\<turnstile> (a_, b_) \\<surd>\n  P,E,a_ \\<turnstile> null\\<bullet>M_(map Val vs_) : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,a_ \\<turnstile> THROW NullPointer : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by(fastforce intro: WTThrow[OF WTVal] elim!:typeof_NullPointer simp: sconf_def hconf_def)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,a_ \\<turnstile> THROW NullPointer : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (37 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 7. \\<And>e h l V v e' h' l' v' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 8. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e a b e' aa ba e\\<^sub>2 E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> e;; e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> e';; e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 37 subgoals...", "next"], ["proof (state)\ngoal (37 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 7. \\<And>e h l V v e' h' l' v' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 8. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e a b e' aa ba e\\<^sub>2 E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> e;; e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> e';; e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 37 subgoals...", "case (InitBlockRed e h l V v e' h' l' v' T E T')"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e,(h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n   P,?E,h \\<turnstile> e : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,h' \\<turnstile> e' : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  l' V = \\<lfloor>v'\\<rfloor>\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> {V:T; V:=Val v;; e} : T'\n\ngoal (37 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 7. \\<And>e h l V v e' h' l' v' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 8. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e a b e' aa ba e\\<^sub>2 E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> e;; e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> e';; e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 37 subgoals...", "have red: \"P \\<turnstile> \\<langle>e, (h,l(V\\<mapsto>v))\\<rangle> \\<rightarrow> \\<langle>e',(h',l')\\<rangle>\"\n   and IH: \"\\<And>E T. \\<lbrakk>P,E \\<turnstile> (h,l(V\\<mapsto>v)) \\<surd>; P,E,h \\<turnstile> e : T\\<rbrakk>\n                    \\<Longrightarrow> \\<exists>U. P,E,h' \\<turnstile> e' : U \\<and> P \\<turnstile> U \\<le> T\"\n   and v': \"l' V = Some v'\" and conf: \"P,E \\<turnstile> (h,l) \\<surd>\"\n   and wt: \"P,E,h \\<turnstile> {V:T := Val v; e} : T'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<turnstile> \\<langle>e,(h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                    \\<langle>e',(h', l')\\<rangle> &&&\n     (\\<And>E T.\n         \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n          P,E,h \\<turnstile> e : T\\<rbrakk>\n         \\<Longrightarrow> \\<exists>U.\n                              P,E,h' \\<turnstile> e' : U \\<and>\n                              P \\<turnstile> U \\<le> T)) &&&\n    l' V = \\<lfloor>v'\\<rfloor> &&&\n    P,E \\<turnstile> (h, l) \\<surd> &&&\n    P,E,h \\<turnstile> {V:T; V:=Val v;; e} : T'", "by fact+"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e,(h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n   P,?E,h \\<turnstile> e : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>U.\n                       P,?E,h' \\<turnstile> e' : U \\<and>\n                       P \\<turnstile> U \\<le> ?T\n  l' V = \\<lfloor>v'\\<rfloor>\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> {V:T; V:=Val v;; e} : T'\n\ngoal (37 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 7. \\<And>e h l V v e' h' l' v' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 8. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e a b e' aa ba e\\<^sub>2 E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> e;; e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> e';; e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 37 subgoals...", "from wt"], ["proof (chain)\npicking this:\n  P,E,h \\<turnstile> {V:T; V:=Val v;; e} : T'", "obtain T\\<^sub>1 where wt\\<^sub>1: \"typeof\\<^bsub>h\\<^esub> v = Some T\\<^sub>1\"\n    and T1subT: \"P \\<turnstile> T\\<^sub>1 \\<le> T\" and wt\\<^sub>2: \"P,E(V\\<mapsto>T),h \\<turnstile> e : T'\""], ["proof (prove)\nusing this:\n  P,E,h \\<turnstile> {V:T; V:=Val v;; e} : T'\n\ngoal (1 subgoal):\n 1. (\\<And>T\\<^sub>1.\n        \\<lbrakk>typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>;\n         P \\<turnstile> T\\<^sub>1 \\<le> T;\n         P,E(V \\<mapsto> T),h \\<turnstile> e : T'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>\n  P \\<turnstile> T\\<^sub>1 \\<le> T\n  P,E(V \\<mapsto> T),h \\<turnstile> e : T'\n\ngoal (37 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 7. \\<And>e h l V v e' h' l' v' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 8. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e a b e' aa ba e\\<^sub>2 E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> e;; e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> e';; e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 37 subgoals...", "have lconf\\<^sub>2: \"P,h \\<turnstile> l(V\\<mapsto>v) (:\\<le>) E(V\\<mapsto>T)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,h \\<turnstile> l(V \\<mapsto> v) (:\\<le>) E(V \\<mapsto> T)", "using conf wt\\<^sub>1 T1subT"], ["proof (prove)\nusing this:\n  P,E \\<turnstile> (h, l) \\<surd>\n  typeof\\<^bsub>h\\<^esub> v = \\<lfloor>T\\<^sub>1\\<rfloor>\n  P \\<turnstile> T\\<^sub>1 \\<le> T\n\ngoal (1 subgoal):\n 1. P,h \\<turnstile> l(V \\<mapsto> v) (:\\<le>) E(V \\<mapsto> T)", "by(simp add:sconf_def lconf_upd2 conf_def)"], ["proof (state)\nthis:\n  P,h \\<turnstile> l(V \\<mapsto> v) (:\\<le>) E(V \\<mapsto> T)\n\ngoal (37 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 7. \\<And>e h l V v e' h' l' v' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 8. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e a b e' aa ba e\\<^sub>2 E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> e;; e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> e';; e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 37 subgoals...", "have \"\\<exists>T\\<^sub>1'. typeof\\<^bsub>h'\\<^esub> v' = Some T\\<^sub>1' \\<and> P \\<turnstile> T\\<^sub>1' \\<le> T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>T\\<^sub>1'.\n       typeof\\<^bsub>h'\\<^esub> v' = \\<lfloor>T\\<^sub>1'\\<rfloor> \\<and>\n       P \\<turnstile> T\\<^sub>1' \\<le> T", "using v' red_preserves_lconf[OF red wt\\<^sub>2 lconf\\<^sub>2]"], ["proof (prove)\nusing this:\n  l' V = \\<lfloor>v'\\<rfloor>\n  P,h' \\<turnstile> l' (:\\<le>) E(V \\<mapsto> T)\n\ngoal (1 subgoal):\n 1. \\<exists>T\\<^sub>1'.\n       typeof\\<^bsub>h'\\<^esub> v' = \\<lfloor>T\\<^sub>1'\\<rfloor> \\<and>\n       P \\<turnstile> T\\<^sub>1' \\<le> T", "by(fastforce simp:lconf_def conf_def)"], ["proof (state)\nthis:\n  \\<exists>T\\<^sub>1'.\n     typeof\\<^bsub>h'\\<^esub> v' = \\<lfloor>T\\<^sub>1'\\<rfloor> \\<and>\n     P \\<turnstile> T\\<^sub>1' \\<le> T\n\ngoal (37 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 7. \\<And>e h l V v e' h' l' v' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V \\<mapsto> v))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v'\\<rfloor>; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; V:=Val v;; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v';;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 8. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 10. \\<And>e a b e' aa ba e\\<^sub>2 E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> e;; e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> e';; e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 37 subgoals...", "with IH conf lconf\\<^sub>2 wt\\<^sub>2"], ["proof (chain)\npicking this:\n  \\<lbrakk>P,?E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n   P,?E,h \\<turnstile> e : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>U.\n                       P,?E,h' \\<turnstile> e' : U \\<and>\n                       P \\<turnstile> U \\<le> ?T\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,h \\<turnstile> l(V \\<mapsto> v) (:\\<le>) E(V \\<mapsto> T)\n  P,E(V \\<mapsto> T),h \\<turnstile> e : T'\n  \\<exists>T\\<^sub>1'.\n     typeof\\<^bsub>h'\\<^esub> v' = \\<lfloor>T\\<^sub>1'\\<rfloor> \\<and>\n     P \\<turnstile> T\\<^sub>1' \\<le> T", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>P,?E \\<turnstile> (h, l(V \\<mapsto> v)) \\<surd>;\n   P,?E,h \\<turnstile> e : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>U.\n                       P,?E,h' \\<turnstile> e' : U \\<and>\n                       P \\<turnstile> U \\<le> ?T\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,h \\<turnstile> l(V \\<mapsto> v) (:\\<le>) E(V \\<mapsto> T)\n  P,E(V \\<mapsto> T),h \\<turnstile> e : T'\n  \\<exists>T\\<^sub>1'.\n     typeof\\<^bsub>h'\\<^esub> v' = \\<lfloor>T\\<^sub>1'\\<rfloor> \\<and>\n     P \\<turnstile> T\\<^sub>1' \\<le> T\n\ngoal (1 subgoal):\n 1. \\<exists>T'a.\n       P,E,h' \\<turnstile> {V:T; V:=Val v';; e'} : T'a \\<and>\n       P \\<turnstile> T'a \\<le> T'", "by (fastforce simp add:sconf_def)"], ["proof (state)\nthis:\n  \\<exists>T'a.\n     P,E,h' \\<turnstile> {V:T; V:=Val v';; e'} : T'a \\<and>\n     P \\<turnstile> T'a \\<le> T'\n\ngoal (36 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 7. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 8. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e a b e' aa ba e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e';; e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>v e\\<^sub>2 a b E T.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 36 subgoals...", "next"], ["proof (state)\ngoal (36 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 7. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 8. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e a b e' aa ba e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e';; e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>v e\\<^sub>2 a b E T.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 36 subgoals...", "case BlockRedNone"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e_,(h_, l_(V_ := None))\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(h'_, l'_)\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (h_, l_(V_ := None)) \\<surd>;\n   P,?E,h_ \\<turnstile> e_ : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,h'_ \\<turnstile> e'_ : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  l'_ V_ = None\n  \\<not> assigned V_ e_\n  P,E \\<turnstile> (h_, l_) \\<surd>\n  P,E,h_ \\<turnstile> {V_:T_; e_} : T\n\ngoal (36 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e h l V e' h' l' T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = None; \\<not> assigned V e; P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; e'} : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 7. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 8. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 9. \\<And>e a b e' aa ba e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e';; e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>v e\\<^sub>2 a b E T.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 36 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e_,(h_, l_(V_ := None))\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(h'_, l'_)\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (h_, l_(V_ := None)) \\<surd>;\n   P,?E,h_ \\<turnstile> e_ : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,h'_ \\<turnstile> e'_ : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  l'_ V_ = None\n  \\<not> assigned V_ e_\n  P,E \\<turnstile> (h_, l_) \\<surd>\n  P,E,h_ \\<turnstile> {V_:T_; e_} : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h'_ \\<turnstile> {V_:T_; e'_} : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by(auto simp del:fun_upd_apply)(fastforce simp:sconf_def lconf_def)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h'_ \\<turnstile> {V_:T_; e'_} : T' \\<and> P \\<turnstile> T' \\<le> T\n\ngoal (35 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 8. \\<And>e a b e' aa ba e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e';; e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba e\\<^sub>1 e\\<^sub>2 E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> if (e) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> if (e') e\\<^sub>1\n                             else e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 35 subgoals...", "next"], ["proof (state)\ngoal (35 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 8. \\<And>e a b e' aa ba e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e';; e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba e\\<^sub>1 e\\<^sub>2 E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> if (e) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> if (e') e\\<^sub>1\n                             else e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 35 subgoals...", "case (BlockRedSome e h l V e' h' l' v T E Te)"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (h, l(V := None)) \\<surd>;\n   P,?E,h \\<turnstile> e : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,h' \\<turnstile> e' : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  l' V = \\<lfloor>v\\<rfloor>\n  \\<not> assigned V e\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> {V:T; e} : Te\n\ngoal (35 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 8. \\<And>e a b e' aa ba e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e';; e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba e\\<^sub>1 e\\<^sub>2 E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> if (e) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> if (e') e\\<^sub>1\n                             else e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 35 subgoals...", "have red: \"P \\<turnstile> \\<langle>e,(h,l(V:=None))\\<rangle> \\<rightarrow> \\<langle>e',(h',l')\\<rangle>\"\n   and IH: \"\\<And>E T. \\<lbrakk>P,E \\<turnstile> (h,l(V:=None)) \\<surd>; P,E,h \\<turnstile> e : T\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>T'. P,E,h' \\<turnstile> e' : T' \\<and> P \\<turnstile> T' \\<le> T\"\n   and Some: \"l' V = Some v\" and conf: \"P,E \\<turnstile> (h,l) \\<surd>\"\n   and wt: \"P,E,h \\<turnstile> {V:T; e} : Te\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                    \\<langle>e',(h', l')\\<rangle> &&&\n     (\\<And>E T.\n         \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n          P,E,h \\<turnstile> e : T\\<rbrakk>\n         \\<Longrightarrow> \\<exists>T'.\n                              P,E,h' \\<turnstile> e' : T' \\<and>\n                              P \\<turnstile> T' \\<le> T)) &&&\n    l' V = \\<lfloor>v\\<rfloor> &&&\n    P,E \\<turnstile> (h, l) \\<surd> &&& P,E,h \\<turnstile> {V:T; e} : Te", "by fact+"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e,(h, l(V := None))\\<rangle> \\<rightarrow>\n                 \\<langle>e',(h', l')\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (h, l(V := None)) \\<surd>;\n   P,?E,h \\<turnstile> e : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,h' \\<turnstile> e' : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  l' V = \\<lfloor>v\\<rfloor>\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> {V:T; e} : Te\n\ngoal (35 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 8. \\<And>e a b e' aa ba e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e';; e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba e\\<^sub>1 e\\<^sub>2 E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> if (e) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> if (e') e\\<^sub>1\n                             else e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 35 subgoals...", "obtain Te' where IH': \"P,E(V\\<mapsto>T),h' \\<turnstile> e' : Te' \\<and> P \\<turnstile> Te' \\<le> Te\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>Te'.\n        P,E(V \\<mapsto> T),h' \\<turnstile> e' : Te' \\<and>\n        P \\<turnstile> Te' \\<le> Te \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using IH conf wt"], ["proof (prove)\nusing this:\n  \\<lbrakk>P,?E \\<turnstile> (h, l(V := None)) \\<surd>;\n   P,?E,h \\<turnstile> e : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,h' \\<turnstile> e' : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> {V:T; e} : Te\n\ngoal (1 subgoal):\n 1. (\\<And>Te'.\n        P,E(V \\<mapsto> T),h' \\<turnstile> e' : Te' \\<and>\n        P \\<turnstile> Te' \\<le> Te \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by(fastforce simp:sconf_def lconf_def)"], ["proof (state)\nthis:\n  P,E(V \\<mapsto> T),h' \\<turnstile> e' : Te' \\<and>\n  P \\<turnstile> Te' \\<le> Te\n\ngoal (35 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 8. \\<And>e a b e' aa ba e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e';; e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba e\\<^sub>1 e\\<^sub>2 E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> if (e) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> if (e') e\\<^sub>1\n                             else e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 35 subgoals...", "have \"P,h' \\<turnstile> l' (:\\<le>) E(V\\<mapsto>T)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P,h' \\<turnstile> l' (:\\<le>) E(V \\<mapsto> T)", "using conf wt"], ["proof (prove)\nusing this:\n  P,E \\<turnstile> (h, l) \\<surd>\n  P,E,h \\<turnstile> {V:T; e} : Te\n\ngoal (1 subgoal):\n 1. P,h' \\<turnstile> l' (:\\<le>) E(V \\<mapsto> T)", "by(fastforce intro:red_preserves_lconf[OF red] simp:sconf_def lconf_def)"], ["proof (state)\nthis:\n  P,h' \\<turnstile> l' (:\\<le>) E(V \\<mapsto> T)\n\ngoal (35 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 8. \\<And>e a b e' aa ba e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e';; e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba e\\<^sub>1 e\\<^sub>2 E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> if (e) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> if (e') e\\<^sub>1\n                             else e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 35 subgoals...", "hence \"P,h' \\<turnstile> v :\\<le> T\""], ["proof (prove)\nusing this:\n  P,h' \\<turnstile> l' (:\\<le>) E(V \\<mapsto> T)\n\ngoal (1 subgoal):\n 1. P,h' \\<turnstile> v :\\<le> T", "using Some"], ["proof (prove)\nusing this:\n  P,h' \\<turnstile> l' (:\\<le>) E(V \\<mapsto> T)\n  l' V = \\<lfloor>v\\<rfloor>\n\ngoal (1 subgoal):\n 1. P,h' \\<turnstile> v :\\<le> T", "by(fastforce simp:lconf_def)"], ["proof (state)\nthis:\n  P,h' \\<turnstile> v :\\<le> T\n\ngoal (35 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>e h l V e' h' l' v T E Ta.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,\n                                (h, l(V := None))\\<rangle> \\<rightarrow>\n                               \\<langle>e',(h', l')\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (h, l(V := None)) \\<surd>;\n            P,E,h \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,h' \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        l' V = \\<lfloor>v\\<rfloor>; \\<not> assigned V e;\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> {V:T; e} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> {V:T; V:=Val v;;\n                            e'} : T' \\<and> P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 8. \\<And>e a b e' aa ba e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e';; e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e a b e' aa ba e\\<^sub>1 e\\<^sub>2 E T.\n        \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                                \\<langle>e',(aa, ba)\\<rangle>;\n         \\<And>E T.\n            \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n             P,E,a \\<turnstile> e : T\\<rbrakk>\n            \\<Longrightarrow> \\<exists>T'.\n                                 P,E,aa \\<turnstile> e' : T' \\<and>\n                                 P \\<turnstile> T' \\<le> T;\n         P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> if (e) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,aa \\<turnstile> if (e') e\\<^sub>1\n                             else e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 35 subgoals...", "with IH'"], ["proof (chain)\npicking this:\n  P,E(V \\<mapsto> T),h' \\<turnstile> e' : Te' \\<and>\n  P \\<turnstile> Te' \\<le> Te\n  P,h' \\<turnstile> v :\\<le> T", "show ?case"], ["proof (prove)\nusing this:\n  P,E(V \\<mapsto> T),h' \\<turnstile> e' : Te' \\<and>\n  P \\<turnstile> Te' \\<le> Te\n  P,h' \\<turnstile> v :\\<le> T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,h' \\<turnstile> {V:T; V:=Val v;; e'} : T' \\<and>\n       P \\<turnstile> T' \\<le> Te", "by(fastforce simp:sconf_def conf_def fun_upd_same simp del:fun_upd_apply)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,h' \\<turnstile> {V:T; V:=Val v;; e'} : T' \\<and>\n     P \\<turnstile> T' \\<le> Te\n\ngoal (34 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>e a b e' aa ba e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e';; e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba e\\<^sub>1 e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (e) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> if (e') e\\<^sub>1\n                            else e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 34 subgoals...", "next"], ["proof (state)\ngoal (34 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>e a b e' aa ba e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e';; e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba e\\<^sub>1 e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (e) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> if (e') e\\<^sub>1\n                            else e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 34 subgoals...", "case SeqRed"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (a___, b___) \\<surd>;\n   P,?E,a___ \\<turnstile> e_ : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,a_ \\<turnstile> e'_ : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  P,E \\<turnstile> (a___, b___) \\<surd>\n  P,E,a___ \\<turnstile> e_;; e\\<^sub>2_ : T\n\ngoal (34 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>e a b e' aa ba e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> e;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> e';; e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e a b e' aa ba e\\<^sub>1 e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (e) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> if (e') e\\<^sub>1\n                            else e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 34 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (a___, b___) \\<surd>;\n   P,?E,a___ \\<turnstile> e_ : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,a_ \\<turnstile> e'_ : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  P,E \\<turnstile> (a___, b___) \\<surd>\n  P,E,a___ \\<turnstile> e_;; e\\<^sub>2_ : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,a_ \\<turnstile> e'_;; e\\<^sub>2_ : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by auto (blast dest:WTrt_hext_mono[OF _ red_hext_incr])"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,a_ \\<turnstile> e'_;; e\\<^sub>2_ : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (33 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba e\\<^sub>1 e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (e) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> if (e') e\\<^sub>1\n                            else e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> if (false) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 33 subgoals...", "next"], ["proof (state)\ngoal (33 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba e\\<^sub>1 e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (e) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> if (e') e\\<^sub>1\n                            else e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> if (false) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 33 subgoals...", "case CondRed"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (a___, b___) \\<surd>;\n   P,?E,a___ \\<turnstile> e_ : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,a_ \\<turnstile> e'_ : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  P,E \\<turnstile> (a___, b___) \\<surd>\n  P,E,a___ \\<turnstile> if (e_) e\\<^sub>1_ else e\\<^sub>2_ : T\n\ngoal (33 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e a b e' aa ba e\\<^sub>1 e\\<^sub>2 E T.\n       \\<lbrakk>P \\<turnstile> \\<langle>e,(a, b)\\<rangle> \\<rightarrow>\n                               \\<langle>e',(aa, ba)\\<rangle>;\n        \\<And>E T.\n           \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n            P,E,a \\<turnstile> e : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P,E,aa \\<turnstile> e' : T' \\<and>\n                                P \\<turnstile> T' \\<le> T;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (e) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,aa \\<turnstile> if (e') e\\<^sub>1\n                            else e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n        \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n         P,E,a \\<turnstile> if (false) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                             P \\<turnstile> T' \\<le> T\nA total of 33 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (a___, b___) \\<surd>;\n   P,?E,a___ \\<turnstile> e_ : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,a_ \\<turnstile> e'_ : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  P,E \\<turnstile> (a___, b___) \\<surd>\n  P,E,a___ \\<turnstile> if (e_) e\\<^sub>1_ else e\\<^sub>2_ : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,a_ \\<turnstile> if (e'_) e\\<^sub>1_ else e\\<^sub>2_ : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by auto (blast intro:WTrt_hext_mono[OF _ red_hext_incr])+"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,a_ \\<turnstile> if (e'_) e\\<^sub>1_ else e\\<^sub>2_ : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (32 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (false) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>b c a ba E T.\n        \\<lbrakk>P,E \\<turnstile> (a, ba) \\<surd>;\n         P,E,a \\<turnstile> while (b) c : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> if (b) (c;; while (b) c)\n                             else unit : T' \\<and> P \\<turnstile> T' \\<le> T\nA total of 32 subgoals...", "next"], ["proof (state)\ngoal (32 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (false) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>b c a ba E T.\n        \\<lbrakk>P,E \\<turnstile> (a, ba) \\<surd>;\n         P,E,a \\<turnstile> while (b) c : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> if (b) (c;; while (b) c)\n                             else unit : T' \\<and> P \\<turnstile> T' \\<le> T\nA total of 32 subgoals...", "case ThrowRed"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (a___, b___) \\<surd>;\n   P,?E,a___ \\<turnstile> e_ : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,a_ \\<turnstile> e'_ : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  P,E \\<turnstile> (a___, b___) \\<surd>\n  P,E,a___ \\<turnstile> throw e_ : T\n\ngoal (32 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (false) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>b c a ba E T.\n        \\<lbrakk>P,E \\<turnstile> (a, ba) \\<surd>;\n         P,E,a \\<turnstile> while (b) c : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> if (b) (c;; while (b) c)\n                             else unit : T' \\<and> P \\<turnstile> T' \\<le> T\nA total of 32 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (a___, b___) \\<surd>;\n   P,?E,a___ \\<turnstile> e_ : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,a_ \\<turnstile> e'_ : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  P,E \\<turnstile> (a___, b___) \\<surd>\n  P,E,a___ \\<turnstile> throw e_ : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,a_ \\<turnstile> throw e'_ : T' \\<and> P \\<turnstile> T' \\<le> T", "by(auto simp:is_refT_def)(blast dest:widen_Class[THEN iffD1])+"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,a_ \\<turnstile> throw e'_ : T' \\<and> P \\<turnstile> T' \\<le> T\n\ngoal (31 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (false) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>b c a ba E T.\n        \\<lbrakk>P,E \\<turnstile> (a, ba) \\<surd>;\n         P,E,a \\<turnstile> while (b) c : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> if (b) (c;; while (b) c)\n                             else unit : T' \\<and> P \\<turnstile> T' \\<le> T\nA total of 31 subgoals...", "next"], ["proof (state)\ngoal (31 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (false) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>b c a ba E T.\n        \\<lbrakk>P,E \\<turnstile> (a, ba) \\<surd>;\n         P,E,a \\<turnstile> while (b) c : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> if (b) (c;; while (b) c)\n                             else unit : T' \\<and> P \\<turnstile> T' \\<le> T\nA total of 31 subgoals...", "case RedThrowNull"], ["proof (state)\nthis:\n  P,E \\<turnstile> (a_, b_) \\<surd>\n  P,E,a_ \\<turnstile> throw null : T\n\ngoal (31 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (false) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>b c a ba E T.\n        \\<lbrakk>P,E \\<turnstile> (a, ba) \\<surd>;\n         P,E,a \\<turnstile> while (b) c : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> if (b) (c;; while (b) c)\n                             else unit : T' \\<and> P \\<turnstile> T' \\<le> T\nA total of 31 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P,E \\<turnstile> (a_, b_) \\<surd>\n  P,E,a_ \\<turnstile> throw null : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,a_ \\<turnstile> THROW NullPointer : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by(fastforce intro: WTThrow[OF WTVal] elim!:typeof_NullPointer simp:sconf_def hconf_def)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,a_ \\<turnstile> THROW NullPointer : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (30 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (false) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>b c a ba E T.\n        \\<lbrakk>P,E \\<turnstile> (a, ba) \\<surd>;\n         P,E,a \\<turnstile> while (b) c : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> if (b) (c;; while (b) c)\n                             else unit : T' \\<and> P \\<turnstile> T' \\<le> T\nA total of 30 subgoals...", "next"], ["proof (state)\ngoal (30 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (false) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>b c a ba E T.\n        \\<lbrakk>P,E \\<turnstile> (a, ba) \\<surd>;\n         P,E,a \\<turnstile> while (b) c : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> if (b) (c;; while (b) c)\n                             else unit : T' \\<and> P \\<turnstile> T' \\<le> T\nA total of 30 subgoals...", "case TryRed"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (a___, b___) \\<surd>;\n   P,?E,a___ \\<turnstile> e_ : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,a_ \\<turnstile> e'_ : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  P,E \\<turnstile> (a___, b___) \\<surd>\n  P,E,a___ \\<turnstile> try e_ catch(C_ V_) e\\<^sub>2_ : T\n\ngoal (30 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (false) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>b c a ba E T.\n        \\<lbrakk>P,E \\<turnstile> (a, ba) \\<surd>;\n         P,E,a \\<turnstile> while (b) c : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> if (b) (c;; while (b) c)\n                             else unit : T' \\<and> P \\<turnstile> T' \\<le> T\nA total of 30 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (a___, b___) \\<surd>;\n   P,?E,a___ \\<turnstile> e_ : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,a_ \\<turnstile> e'_ : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  P,E \\<turnstile> (a___, b___) \\<surd>\n  P,E,a___ \\<turnstile> try e_ catch(C_ V_) e\\<^sub>2_ : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,a_ \\<turnstile> try e'_ catch(C_ V_) e\\<^sub>2_ : T' \\<and>\n       P \\<turnstile> T' \\<le> T", "by auto (blast intro:widen_trans WTrt_hext_mono[OF _ red_hext_incr])"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,a_ \\<turnstile> try e'_ catch(C_ V_) e\\<^sub>2_ : T' \\<and>\n     P \\<turnstile> T' \\<le> T\n\ngoal (29 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (false) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>b c a ba E T.\n        \\<lbrakk>P,E \\<turnstile> (a, ba) \\<surd>;\n         P,E,a \\<turnstile> while (b) c : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> if (b) (c;; while (b) c)\n                             else unit : T' \\<and> P \\<turnstile> T' \\<le> T\nA total of 29 subgoals...", "next"], ["proof (state)\ngoal (29 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (false) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>b c a ba E T.\n        \\<lbrakk>P,E \\<turnstile> (a, ba) \\<surd>;\n         P,E,a \\<turnstile> while (b) c : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> if (b) (c;; while (b) c)\n                             else unit : T' \\<and> P \\<turnstile> T' \\<le> T\nA total of 29 subgoals...", "case RedTryFail"], ["proof (state)\nthis:\n  hp (a___, b_) a_ = \\<lfloor>(D_, fs_)\\<rfloor>\n  (D_, C_) \\<notin> (subcls1 P)\\<^sup>*\n  P,E \\<turnstile> (a___, b_) \\<surd>\n  P,E,a___ \\<turnstile> try Throw a_ catch(C_ V_) e\\<^sub>2_ : T\n\ngoal (29 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (false) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>b c a ba E T.\n        \\<lbrakk>P,E \\<turnstile> (a, ba) \\<surd>;\n         P,E,a \\<turnstile> while (b) c : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> if (b) (c;; while (b) c)\n                             else unit : T' \\<and> P \\<turnstile> T' \\<le> T\nA total of 29 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  hp (a___, b_) a_ = \\<lfloor>(D_, fs_)\\<rfloor>\n  (D_, C_) \\<notin> (subcls1 P)\\<^sup>*\n  P,E \\<turnstile> (a___, b_) \\<surd>\n  P,E,a___ \\<turnstile> try Throw a_ catch(C_ V_) e\\<^sub>2_ : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,a___ \\<turnstile> Throw a_ : T' \\<and> P \\<turnstile> T' \\<le> T", "by(fastforce intro: WTrtThrow[OF WTrtVal] simp:sconf_def hconf_def)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,a___ \\<turnstile> Throw a_ : T' \\<and> P \\<turnstile> T' \\<le> T\n\ngoal (28 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (false) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>b c a ba E T.\n        \\<lbrakk>P,E \\<turnstile> (a, ba) \\<surd>;\n         P,E,a \\<turnstile> while (b) c : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> if (b) (c;; while (b) c)\n                             else unit : T' \\<and> P \\<turnstile> T' \\<le> T\nA total of 28 subgoals...", "next"], ["proof (state)\ngoal (28 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (false) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>b c a ba E T.\n        \\<lbrakk>P,E \\<turnstile> (a, ba) \\<surd>;\n         P,E,a \\<turnstile> while (b) c : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> if (b) (c;; while (b) c)\n                             else unit : T' \\<and> P \\<turnstile> T' \\<le> T\nA total of 28 subgoals...", "case ListRed1"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (a___, b___) \\<surd>;\n   P,?E,a___ \\<turnstile> e_ : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,a_ \\<turnstile> e'_ : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  P,E \\<turnstile> (a___, b___) \\<surd>\n  P,E,a___ \\<turnstile> e_ # es_ [:] Ts\n\ngoal (28 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (false) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>b c a ba E T.\n        \\<lbrakk>P,E \\<turnstile> (a, ba) \\<surd>;\n         P,E,a \\<turnstile> while (b) c : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> if (b) (c;; while (b) c)\n                             else unit : T' \\<and> P \\<turnstile> T' \\<le> T\nA total of 28 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e_,(a___, b___)\\<rangle> \\<rightarrow>\n                 \\<langle>e'_,(a_, b_)\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (a___, b___) \\<surd>;\n   P,?E,a___ \\<turnstile> e_ : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P,?E,a_ \\<turnstile> e'_ : T' \\<and>\n                       P \\<turnstile> T' \\<le> ?T\n  P,E \\<turnstile> (a___, b___) \\<surd>\n  P,E,a___ \\<turnstile> e_ # es_ [:] Ts\n\ngoal (1 subgoal):\n 1. \\<exists>Ts'.\n       P,E,a_ \\<turnstile> e'_ # es_ [:] Ts' \\<and>\n       P \\<turnstile> Ts' [\\<le>] Ts", "by(fastforce dest: WTrts_hext_mono[OF _ red_hext_incr])"], ["proof (state)\nthis:\n  \\<exists>Ts'.\n     P,E,a_ \\<turnstile> e'_ # es_ [:] Ts' \\<and>\n     P \\<turnstile> Ts' [\\<le>] Ts\n\ngoal (27 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (false) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>b c a ba E T.\n        \\<lbrakk>P,E \\<turnstile> (a, ba) \\<surd>;\n         P,E,a \\<turnstile> while (b) c : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> if (b) (c;; while (b) c)\n                             else unit : T' \\<and> P \\<turnstile> T' \\<le> T\nA total of 27 subgoals...", "next"], ["proof (state)\ngoal (27 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (false) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>b c a ba E T.\n        \\<lbrakk>P,E \\<turnstile> (a, ba) \\<surd>;\n         P,E,a \\<turnstile> while (b) c : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> if (b) (c;; while (b) c)\n                             else unit : T' \\<and> P \\<turnstile> T' \\<le> T\nA total of 27 subgoals...", "case ListRed2"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>es_,(a___, b___)\\<rangle> [\\<rightarrow>]\n                 \\<langle>es'_,(a_, b_)\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (a___, b___) \\<surd>;\n   P,?E,a___ \\<turnstile> es_ [:] ?Ts\\<rbrakk>\n  \\<Longrightarrow> \\<exists>Ts'.\n                       P,?E,a_ \\<turnstile> es'_ [:] Ts' \\<and>\n                       P \\<turnstile> Ts' [\\<le>] ?Ts\n  P,E \\<turnstile> (a___, b___) \\<surd>\n  P,E,a___ \\<turnstile> Val v_ # es_ [:] Ts\n\ngoal (27 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (false) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>b c a ba E T.\n        \\<lbrakk>P,E \\<turnstile> (a, ba) \\<surd>;\n         P,E,a \\<turnstile> while (b) c : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> if (b) (c;; while (b) c)\n                             else unit : T' \\<and> P \\<turnstile> T' \\<le> T\nA total of 27 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>es_,(a___, b___)\\<rangle> [\\<rightarrow>]\n                 \\<langle>es'_,(a_, b_)\\<rangle>\n  \\<lbrakk>P,?E \\<turnstile> (a___, b___) \\<surd>;\n   P,?E,a___ \\<turnstile> es_ [:] ?Ts\\<rbrakk>\n  \\<Longrightarrow> \\<exists>Ts'.\n                       P,?E,a_ \\<turnstile> es'_ [:] Ts' \\<and>\n                       P \\<turnstile> Ts' [\\<le>] ?Ts\n  P,E \\<turnstile> (a___, b___) \\<surd>\n  P,E,a___ \\<turnstile> Val v_ # es_ [:] Ts\n\ngoal (1 subgoal):\n 1. \\<exists>Ts'.\n       P,E,a_ \\<turnstile> Val v_ # es'_ [:] Ts' \\<and>\n       P \\<turnstile> Ts' [\\<le>] Ts", "by(fastforce dest: hext_typeof_mono[OF reds_hext_incr])"], ["proof (state)\nthis:\n  \\<exists>Ts'.\n     P,E,a_ \\<turnstile> Val v_ # es'_ [:] Ts' \\<and>\n     P \\<turnstile> Ts' [\\<le>] Ts\n\ngoal (26 subgoals):\n 1. \\<And>h a C FDTs h' l E T.\n       \\<lbrakk>new_Addr h = \\<lfloor>a\\<rfloor>;\n        P \\<turnstile> C has_fields FDTs;\n        h' = h(a \\<mapsto> (C, init_fields FDTs));\n        P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> new C : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h' \\<turnstile> addr a : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 2. \\<And>C a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C null : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> null : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 3. \\<And>a b aa D fs C E T.\n       \\<lbrakk>hp (a, b) aa = \\<lfloor>(D, fs)\\<rfloor>;\n        P \\<turnstile> D \\<preceq>\\<^sup>* C;\n        P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Cast C (addr aa) : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> addr aa : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 4. \\<And>V v h l E T.\n       \\<lbrakk>P,E \\<turnstile> (h, l) \\<surd>;\n        P,E,h \\<turnstile> V:=Val v : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,h \\<turnstile> unit : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 5. \\<And>V T u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 6. \\<And>V T v u a b E Ta.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> {V:T; V:=Val v;; Val u} : Ta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> Val u : T' \\<and>\n                            P \\<turnstile> T' \\<le> Ta\n 7. \\<And>v e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> Val v;; e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 8. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (true) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>1 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 9. \\<And>e\\<^sub>1 e\\<^sub>2 a b E T.\n       \\<lbrakk>P,E \\<turnstile> (a, b) \\<surd>;\n        P,E,a \\<turnstile> if (false) e\\<^sub>1 else e\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,a \\<turnstile> e\\<^sub>2 : T' \\<and>\n                            P \\<turnstile> T' \\<le> T\n 10. \\<And>b c a ba E T.\n        \\<lbrakk>P,E \\<turnstile> (a, ba) \\<surd>;\n         P,E,a \\<turnstile> while (b) c : T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>T'.\n                             P,E,a \\<turnstile> if (b) (c;; while (b) c)\n                             else unit : T' \\<and> P \\<turnstile> T' \\<le> T\nA total of 26 subgoals...", "qed fastforce+"], ["", "(* esp all Throw propagation rules are dealt with here *)\n(*>*)"], ["", "corollary subject_reduction:\n  \"\\<lbrakk> wf_J_prog P; P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow> \\<langle>e',s'\\<rangle>; P,E \\<turnstile> s \\<surd>; P,E,hp s \\<turnstile> e:T \\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'. P,E,hp s' \\<turnstile> e':T' \\<and> P \\<turnstile> T' \\<le> T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wf_J_prog P;\n     P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>;\n     P,E \\<turnstile> s \\<surd>; P,E,hp s \\<turnstile> e : T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>T'.\n                         P,E,hp s' \\<turnstile> e' : T' \\<and>\n                         P \\<turnstile> T' \\<le> T", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wf_J_prog P;\n     P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>\n                    \\<langle>e',s'\\<rangle>;\n     P,E \\<turnstile> s \\<surd>; P,E,hp s \\<turnstile> e : T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>T'.\n                         P,E,hp s' \\<turnstile> e' : T' \\<and>\n                         P \\<turnstile> T' \\<le> T", "by(cases s, cases s', fastforce dest:subject_reduction2)"], ["", "(*>*)"], ["", "corollary subjects_reduction:\n  \"\\<lbrakk> wf_J_prog P; P \\<turnstile> \\<langle>es,s\\<rangle> [\\<rightarrow>] \\<langle>es',s'\\<rangle>; P,E \\<turnstile> s \\<surd>; P,E,hp s \\<turnstile> es[:]Ts \\<rbrakk>\n  \\<Longrightarrow> \\<exists>Ts'. P,E,hp s' \\<turnstile> es'[:]Ts' \\<and> P \\<turnstile> Ts' [\\<le>] Ts\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wf_J_prog P;\n     P \\<turnstile> \\<langle>es,s\\<rangle> [\\<rightarrow>]\n                    \\<langle>es',s'\\<rangle>;\n     P,E \\<turnstile> s \\<surd>; P,E,hp s \\<turnstile> es [:] Ts\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Ts'.\n                         P,E,hp s' \\<turnstile> es' [:] Ts' \\<and>\n                         P \\<turnstile> Ts' [\\<le>] Ts", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wf_J_prog P;\n     P \\<turnstile> \\<langle>es,s\\<rangle> [\\<rightarrow>]\n                    \\<langle>es',s'\\<rangle>;\n     P,E \\<turnstile> s \\<surd>; P,E,hp s \\<turnstile> es [:] Ts\\<rbrakk>\n    \\<Longrightarrow> \\<exists>Ts'.\n                         P,E,hp s' \\<turnstile> es' [:] Ts' \\<and>\n                         P \\<turnstile> Ts' [\\<le>] Ts", "by(cases s, cases s', fastforce dest:subjects_reduction2)"], ["", "(*>*)"], ["", "subsection \\<open>Lifting to \\<open>\\<rightarrow>*\\<close>\\<close>"], ["", "text\\<open>Now all these preservation lemmas are first lifted to the transitive\nclosure \\dots\\<close>"], ["", "lemma Red_preserves_sconf:\nassumes wf: \"wf_J_prog P\" and Red: \"P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>* \\<langle>e',s'\\<rangle>\"\nshows \"\\<And>T. \\<lbrakk> P,E,hp s \\<turnstile> e : T; P,E \\<turnstile> s \\<surd> \\<rbrakk> \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>T.\n       \\<lbrakk>P,E,hp s \\<turnstile> e : T;\n        P,E \\<turnstile> s \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>T.\n       \\<lbrakk>P,E,hp s \\<turnstile> e : T;\n        P,E \\<turnstile> s \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>", "using Red"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>*\n                 \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>T.\n       \\<lbrakk>P,E,hp s \\<turnstile> e : T;\n        P,E \\<turnstile> s \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>", "proof (induct rule:converse_rtrancl_induct2)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>T.\n       \\<lbrakk>P,E,hp s' \\<turnstile> e' : T;\n        P,E \\<turnstile> s' \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>\n 2. \\<And>a b aa ba T.\n       \\<lbrakk>P \\<turnstile> \\<langle>a,b\\<rangle> \\<rightarrow>\n                               \\<langle>aa,ba\\<rangle>;\n        P \\<turnstile> \\<langle>aa,ba\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<And>T.\n           \\<lbrakk>P,E,hp ba \\<turnstile> aa : T;\n            P,E \\<turnstile> ba \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>;\n        P,E,hp b \\<turnstile> a : T; P,E \\<turnstile> b \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>", "case refl"], ["proof (state)\nthis:\n  P,E,hp s' \\<turnstile> e' : T\n  P,E \\<turnstile> s' \\<surd>\n\ngoal (2 subgoals):\n 1. \\<And>T.\n       \\<lbrakk>P,E,hp s' \\<turnstile> e' : T;\n        P,E \\<turnstile> s' \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>\n 2. \\<And>a b aa ba T.\n       \\<lbrakk>P \\<turnstile> \\<langle>a,b\\<rangle> \\<rightarrow>\n                               \\<langle>aa,ba\\<rangle>;\n        P \\<turnstile> \\<langle>aa,ba\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<And>T.\n           \\<lbrakk>P,E,hp ba \\<turnstile> aa : T;\n            P,E \\<turnstile> ba \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>;\n        P,E,hp b \\<turnstile> a : T; P,E \\<turnstile> b \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. P,E \\<turnstile> s' \\<surd>", "by fact"], ["proof (state)\nthis:\n  P,E \\<turnstile> s' \\<surd>\n\ngoal (1 subgoal):\n 1. \\<And>a b aa ba T.\n       \\<lbrakk>P \\<turnstile> \\<langle>a,b\\<rangle> \\<rightarrow>\n                               \\<langle>aa,ba\\<rangle>;\n        P \\<turnstile> \\<langle>aa,ba\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<And>T.\n           \\<lbrakk>P,E,hp ba \\<turnstile> aa : T;\n            P,E \\<turnstile> ba \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>;\n        P,E,hp b \\<turnstile> a : T; P,E \\<turnstile> b \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b aa ba T.\n       \\<lbrakk>P \\<turnstile> \\<langle>a,b\\<rangle> \\<rightarrow>\n                               \\<langle>aa,ba\\<rangle>;\n        P \\<turnstile> \\<langle>aa,ba\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<And>T.\n           \\<lbrakk>P,E,hp ba \\<turnstile> aa : T;\n            P,E \\<turnstile> ba \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>;\n        P,E,hp b \\<turnstile> a : T; P,E \\<turnstile> b \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>", "case step"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>a___,b___\\<rangle> \\<rightarrow>\n                 \\<langle>a_,b_\\<rangle>\n  P \\<turnstile> \\<langle>a_,b_\\<rangle> \\<rightarrow>*\n                 \\<langle>e',s'\\<rangle>\n  \\<lbrakk>P,E,hp b_ \\<turnstile> a_ : ?T;\n   P,E \\<turnstile> b_ \\<surd>\\<rbrakk>\n  \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>\n  P,E,hp b___ \\<turnstile> a___ : T\n  P,E \\<turnstile> b___ \\<surd>\n\ngoal (1 subgoal):\n 1. \\<And>a b aa ba T.\n       \\<lbrakk>P \\<turnstile> \\<langle>a,b\\<rangle> \\<rightarrow>\n                               \\<langle>aa,ba\\<rangle>;\n        P \\<turnstile> \\<langle>aa,ba\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<And>T.\n           \\<lbrakk>P,E,hp ba \\<turnstile> aa : T;\n            P,E \\<turnstile> ba \\<surd>\\<rbrakk>\n           \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>;\n        P,E,hp b \\<turnstile> a : T; P,E \\<turnstile> b \\<surd>\\<rbrakk>\n       \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>a___,b___\\<rangle> \\<rightarrow>\n                 \\<langle>a_,b_\\<rangle>\n  P \\<turnstile> \\<langle>a_,b_\\<rangle> \\<rightarrow>*\n                 \\<langle>e',s'\\<rangle>\n  \\<lbrakk>P,E,hp b_ \\<turnstile> a_ : ?T;\n   P,E \\<turnstile> b_ \\<surd>\\<rbrakk>\n  \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>\n  P,E,hp b___ \\<turnstile> a___ : T\n  P,E \\<turnstile> b___ \\<surd>\n\ngoal (1 subgoal):\n 1. P,E \\<turnstile> s' \\<surd>", "by(blast intro:red_preserves_sconf dest: subject_reduction[OF wf])"], ["proof (state)\nthis:\n  P,E \\<turnstile> s' \\<surd>\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "lemma Red_preserves_defass:\nassumes wf: \"wf_J_prog P\" and reds: \"P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>* \\<langle>e',s'\\<rangle>\"\nshows \"\\<D> e \\<lfloor>dom(lcl s)\\<rfloor> \\<Longrightarrow> \\<D> e' \\<lfloor>dom(lcl s')\\<rfloor>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<D> e \\<lfloor>dom (lcl s)\\<rfloor> \\<Longrightarrow>\n    \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>", "using reds"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>*\n                 \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<D> e \\<lfloor>dom (lcl s)\\<rfloor> \\<Longrightarrow>\n    \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>", "proof (induct rule:converse_rtrancl_induct2)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor> \\<Longrightarrow>\n    \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>\n 2. \\<And>a b aa ba.\n       \\<lbrakk>P \\<turnstile> \\<langle>a,b\\<rangle> \\<rightarrow>\n                               \\<langle>aa,ba\\<rangle>;\n        P \\<turnstile> \\<langle>aa,ba\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<D> aa \\<lfloor>dom (lcl ba)\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>;\n        \\<D> a \\<lfloor>dom (lcl b)\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>", "case refl"], ["proof (state)\nthis:\n  \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>\n\ngoal (2 subgoals):\n 1. \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor> \\<Longrightarrow>\n    \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>\n 2. \\<And>a b aa ba.\n       \\<lbrakk>P \\<turnstile> \\<langle>a,b\\<rangle> \\<rightarrow>\n                               \\<langle>aa,ba\\<rangle>;\n        P \\<turnstile> \\<langle>aa,ba\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<D> aa \\<lfloor>dom (lcl ba)\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>;\n        \\<D> a \\<lfloor>dom (lcl b)\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>", "thus ?case"], ["proof (prove)\nusing this:\n  \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>", "."], ["proof (state)\nthis:\n  \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<And>a b aa ba.\n       \\<lbrakk>P \\<turnstile> \\<langle>a,b\\<rangle> \\<rightarrow>\n                               \\<langle>aa,ba\\<rangle>;\n        P \\<turnstile> \\<langle>aa,ba\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<D> aa \\<lfloor>dom (lcl ba)\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>;\n        \\<D> a \\<lfloor>dom (lcl b)\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b aa ba.\n       \\<lbrakk>P \\<turnstile> \\<langle>a,b\\<rangle> \\<rightarrow>\n                               \\<langle>aa,ba\\<rangle>;\n        P \\<turnstile> \\<langle>aa,ba\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<D> aa \\<lfloor>dom (lcl ba)\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>;\n        \\<D> a \\<lfloor>dom (lcl b)\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>", "case (step e s e' s')"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow> \\<langle>e',s'\\<rangle>\n  P \\<turnstile> \\<langle>e',s'\\<rangle> \\<rightarrow>*\n                 \\<langle>e',s'\\<rangle>\n  \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor> \\<Longrightarrow>\n  \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>\n  \\<D> e \\<lfloor>dom (lcl s)\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<And>a b aa ba.\n       \\<lbrakk>P \\<turnstile> \\<langle>a,b\\<rangle> \\<rightarrow>\n                               \\<langle>aa,ba\\<rangle>;\n        P \\<turnstile> \\<langle>aa,ba\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<D> aa \\<lfloor>dom (lcl ba)\\<rfloor> \\<Longrightarrow>\n        \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>;\n        \\<D> a \\<lfloor>dom (lcl b)\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow> \\<langle>e',s'\\<rangle>\n  P \\<turnstile> \\<langle>e',s'\\<rangle> \\<rightarrow>*\n                 \\<langle>e',s'\\<rangle>\n  \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor> \\<Longrightarrow>\n  \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>\n  \\<D> e \\<lfloor>dom (lcl s)\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>", "by(cases s,cases s')(auto dest:red_preserves_defass[OF wf])"], ["proof (state)\nthis:\n  \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Red_preserves_type:\nassumes wf: \"wf_J_prog P\" and Red: \"P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>* \\<langle>e',s'\\<rangle>\"\nshows \"!!T. \\<lbrakk> P,E \\<turnstile> s\\<surd>; P,E,hp s \\<turnstile> e:T \\<rbrakk>\n    \\<Longrightarrow> \\<exists>T'. P \\<turnstile> T' \\<le> T \\<and> P,E,hp s' \\<turnstile> e':T'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>T.\n       \\<lbrakk>P,E \\<turnstile> s \\<surd>;\n        P,E,hp s \\<turnstile> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P \\<turnstile> T' \\<le> T \\<and>\n                            P,E,hp s' \\<turnstile> e' : T'", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>T.\n       \\<lbrakk>P,E \\<turnstile> s \\<surd>;\n        P,E,hp s \\<turnstile> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P \\<turnstile> T' \\<le> T \\<and>\n                            P,E,hp s' \\<turnstile> e' : T'", "using Red"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>*\n                 \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>T.\n       \\<lbrakk>P,E \\<turnstile> s \\<surd>;\n        P,E,hp s \\<turnstile> e : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P \\<turnstile> T' \\<le> T \\<and>\n                            P,E,hp s' \\<turnstile> e' : T'", "proof (induct rule:converse_rtrancl_induct2)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>T.\n       \\<lbrakk>P,E \\<turnstile> s' \\<surd>;\n        P,E,hp s' \\<turnstile> e' : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P \\<turnstile> T' \\<le> T \\<and>\n                            P,E,hp s' \\<turnstile> e' : T'\n 2. \\<And>a b aa ba T.\n       \\<lbrakk>P \\<turnstile> \\<langle>a,b\\<rangle> \\<rightarrow>\n                               \\<langle>aa,ba\\<rangle>;\n        P \\<turnstile> \\<langle>aa,ba\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<And>T.\n           \\<lbrakk>P,E \\<turnstile> ba \\<surd>;\n            P,E,hp ba \\<turnstile> aa : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P \\<turnstile> T' \\<le> T \\<and>\n                                P,E,hp s' \\<turnstile> e' : T';\n        P,E \\<turnstile> b \\<surd>; P,E,hp b \\<turnstile> a : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P \\<turnstile> T' \\<le> T \\<and>\n                            P,E,hp s' \\<turnstile> e' : T'", "case refl"], ["proof (state)\nthis:\n  P,E \\<turnstile> s' \\<surd>\n  P,E,hp s' \\<turnstile> e' : T\n\ngoal (2 subgoals):\n 1. \\<And>T.\n       \\<lbrakk>P,E \\<turnstile> s' \\<surd>;\n        P,E,hp s' \\<turnstile> e' : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P \\<turnstile> T' \\<le> T \\<and>\n                            P,E,hp s' \\<turnstile> e' : T'\n 2. \\<And>a b aa ba T.\n       \\<lbrakk>P \\<turnstile> \\<langle>a,b\\<rangle> \\<rightarrow>\n                               \\<langle>aa,ba\\<rangle>;\n        P \\<turnstile> \\<langle>aa,ba\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<And>T.\n           \\<lbrakk>P,E \\<turnstile> ba \\<surd>;\n            P,E,hp ba \\<turnstile> aa : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P \\<turnstile> T' \\<le> T \\<and>\n                                P,E,hp s' \\<turnstile> e' : T';\n        P,E \\<turnstile> b \\<surd>; P,E,hp b \\<turnstile> a : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P \\<turnstile> T' \\<le> T \\<and>\n                            P,E,hp s' \\<turnstile> e' : T'", "thus ?case"], ["proof (prove)\nusing this:\n  P,E \\<turnstile> s' \\<surd>\n  P,E,hp s' \\<turnstile> e' : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P \\<turnstile> T' \\<le> T \\<and> P,E,hp s' \\<turnstile> e' : T'", "by blast"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P \\<turnstile> T' \\<le> T \\<and> P,E,hp s' \\<turnstile> e' : T'\n\ngoal (1 subgoal):\n 1. \\<And>a b aa ba T.\n       \\<lbrakk>P \\<turnstile> \\<langle>a,b\\<rangle> \\<rightarrow>\n                               \\<langle>aa,ba\\<rangle>;\n        P \\<turnstile> \\<langle>aa,ba\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<And>T.\n           \\<lbrakk>P,E \\<turnstile> ba \\<surd>;\n            P,E,hp ba \\<turnstile> aa : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P \\<turnstile> T' \\<le> T \\<and>\n                                P,E,hp s' \\<turnstile> e' : T';\n        P,E \\<turnstile> b \\<surd>; P,E,hp b \\<turnstile> a : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P \\<turnstile> T' \\<le> T \\<and>\n                            P,E,hp s' \\<turnstile> e' : T'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b aa ba T.\n       \\<lbrakk>P \\<turnstile> \\<langle>a,b\\<rangle> \\<rightarrow>\n                               \\<langle>aa,ba\\<rangle>;\n        P \\<turnstile> \\<langle>aa,ba\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<And>T.\n           \\<lbrakk>P,E \\<turnstile> ba \\<surd>;\n            P,E,hp ba \\<turnstile> aa : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P \\<turnstile> T' \\<le> T \\<and>\n                                P,E,hp s' \\<turnstile> e' : T';\n        P,E \\<turnstile> b \\<surd>; P,E,hp b \\<turnstile> a : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P \\<turnstile> T' \\<le> T \\<and>\n                            P,E,hp s' \\<turnstile> e' : T'", "case step"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>a___,b___\\<rangle> \\<rightarrow>\n                 \\<langle>a_,b_\\<rangle>\n  P \\<turnstile> \\<langle>a_,b_\\<rangle> \\<rightarrow>*\n                 \\<langle>e',s'\\<rangle>\n  \\<lbrakk>P,E \\<turnstile> b_ \\<surd>;\n   P,E,hp b_ \\<turnstile> a_ : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P \\<turnstile> T' \\<le> ?T \\<and>\n                       P,E,hp s' \\<turnstile> e' : T'\n  P,E \\<turnstile> b___ \\<surd>\n  P,E,hp b___ \\<turnstile> a___ : T\n\ngoal (1 subgoal):\n 1. \\<And>a b aa ba T.\n       \\<lbrakk>P \\<turnstile> \\<langle>a,b\\<rangle> \\<rightarrow>\n                               \\<langle>aa,ba\\<rangle>;\n        P \\<turnstile> \\<langle>aa,ba\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<And>T.\n           \\<lbrakk>P,E \\<turnstile> ba \\<surd>;\n            P,E,hp ba \\<turnstile> aa : T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>T'.\n                                P \\<turnstile> T' \\<le> T \\<and>\n                                P,E,hp s' \\<turnstile> e' : T';\n        P,E \\<turnstile> b \\<surd>; P,E,hp b \\<turnstile> a : T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P \\<turnstile> T' \\<le> T \\<and>\n                            P,E,hp s' \\<turnstile> e' : T'", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>a___,b___\\<rangle> \\<rightarrow>\n                 \\<langle>a_,b_\\<rangle>\n  P \\<turnstile> \\<langle>a_,b_\\<rangle> \\<rightarrow>*\n                 \\<langle>e',s'\\<rangle>\n  \\<lbrakk>P,E \\<turnstile> b_ \\<surd>;\n   P,E,hp b_ \\<turnstile> a_ : ?T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>T'.\n                       P \\<turnstile> T' \\<le> ?T \\<and>\n                       P,E,hp s' \\<turnstile> e' : T'\n  P,E \\<turnstile> b___ \\<surd>\n  P,E,hp b___ \\<turnstile> a___ : T\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P \\<turnstile> T' \\<le> T \\<and> P,E,hp s' \\<turnstile> e' : T'", "by(blast intro:widen_trans red_preserves_sconf\n             dest:subject_reduction[OF wf])"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P \\<turnstile> T' \\<le> T \\<and> P,E,hp s' \\<turnstile> e' : T'\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "subsection \\<open>Lifting to \\<open>\\<Rightarrow>\\<close>\\<close>"], ["", "text\\<open>\\dots and now to the big step semantics, just for fun.\\<close>"], ["", "lemma eval_preserves_sconf:\n  \"\\<lbrakk> wf_J_prog P; P \\<turnstile> \\<langle>e,s\\<rangle> \\<Rightarrow> \\<langle>e',s'\\<rangle>; P,E \\<turnstile> e::T; P,E \\<turnstile> s\\<surd> \\<rbrakk> \\<Longrightarrow> P,E \\<turnstile> s'\\<surd>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wf_J_prog P;\n     P \\<turnstile> \\<langle>e,s\\<rangle> \\<Rightarrow>\n                    \\<langle>e',s'\\<rangle>;\n     P,E \\<turnstile> e :: T; P,E \\<turnstile> s \\<surd>\\<rbrakk>\n    \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wf_J_prog P;\n     P \\<turnstile> \\<langle>e,s\\<rangle> \\<Rightarrow>\n                    \\<langle>e',s'\\<rangle>;\n     P,E \\<turnstile> e :: T; P,E \\<turnstile> s \\<surd>\\<rbrakk>\n    \\<Longrightarrow> P,E \\<turnstile> s' \\<surd>", "by(blast intro:Red_preserves_sconf big_by_small WT_implies_WTrt wf_prog_wwf_prog)"], ["", "(*>*)"], ["", "lemma eval_preserves_type: assumes wf: \"wf_J_prog P\"\nshows \"\\<lbrakk> P \\<turnstile> \\<langle>e,s\\<rangle> \\<Rightarrow> \\<langle>e',s'\\<rangle>; P,E \\<turnstile> s\\<surd>; P,E \\<turnstile> e::T \\<rbrakk>\n   \\<Longrightarrow> \\<exists>T'. P \\<turnstile> T' \\<le> T \\<and> P,E,hp s' \\<turnstile> e':T'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P \\<turnstile> \\<langle>e,s\\<rangle> \\<Rightarrow>\n                            \\<langle>e',s'\\<rangle>;\n     P,E \\<turnstile> s \\<surd>; P,E \\<turnstile> e :: T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>T'.\n                         P \\<turnstile> T' \\<le> T \\<and>\n                         P,E,hp s' \\<turnstile> e' : T'", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P \\<turnstile> \\<langle>e,s\\<rangle> \\<Rightarrow>\n                            \\<langle>e',s'\\<rangle>;\n     P,E \\<turnstile> s \\<surd>; P,E \\<turnstile> e :: T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>T'.\n                         P \\<turnstile> T' \\<le> T \\<and>\n                         P,E,hp s' \\<turnstile> e' : T'", "by(blast dest:big_by_small[OF wf_prog_wwf_prog[OF wf]]\n              WT_implies_WTrt Red_preserves_type[OF wf])"], ["", "(*>*)"], ["", "subsection \"The final polish\""], ["", "text\\<open>The above preservation lemmas are now combined and packed nicely.\\<close>"], ["", "definition wf_config :: \"J_prog \\<Rightarrow> env \\<Rightarrow> state \\<Rightarrow> expr \\<Rightarrow> ty \\<Rightarrow> bool\"   (\"_,_,_ \\<turnstile> _ : _ \\<surd>\"   [51,0,0,0,0]50)\nwhere\n  \"P,E,s \\<turnstile> e:T \\<surd>  \\<equiv>  P,E \\<turnstile> s \\<surd> \\<and> P,E,hp s \\<turnstile> e:T\""], ["", "theorem Subject_reduction: assumes wf: \"wf_J_prog P\"\nshows \"P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow> \\<langle>e',s'\\<rangle> \\<Longrightarrow> P,E,s \\<turnstile> e : T \\<surd>\n       \\<Longrightarrow> \\<exists>T'. P,E,s' \\<turnstile> e' : T' \\<surd> \\<and> P \\<turnstile> T' \\<le> T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>\n                            \\<langle>e',s'\\<rangle>;\n     P,E,s \\<turnstile> e : T \\<surd>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>T'.\n                         P,E,s' \\<turnstile> e' : T' \\<surd> \\<and>\n                         P \\<turnstile> T' \\<le> T", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>\n                            \\<langle>e',s'\\<rangle>;\n     P,E,s \\<turnstile> e : T \\<surd>\\<rbrakk>\n    \\<Longrightarrow> \\<exists>T'.\n                         P,E,s' \\<turnstile> e' : T' \\<surd> \\<and>\n                         P \\<turnstile> T' \\<le> T", "by(force simp add: wf_config_def\n   elim:red_preserves_sconf dest:subject_reduction[OF wf])"], ["", "(*>*)"], ["", "theorem Subject_reductions:\nassumes wf: \"wf_J_prog P\" and reds: \"P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>* \\<langle>e',s'\\<rangle>\"\nshows \"\\<And>T. P,E,s \\<turnstile> e:T \\<surd> \\<Longrightarrow> \\<exists>T'. P,E,s' \\<turnstile> e':T' \\<surd> \\<and> P \\<turnstile> T' \\<le> T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>T.\n       P,E,s \\<turnstile> e : T \\<surd> \\<Longrightarrow>\n       \\<exists>T'.\n          P,E,s' \\<turnstile> e' : T' \\<surd> \\<and>\n          P \\<turnstile> T' \\<le> T", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>T.\n       P,E,s \\<turnstile> e : T \\<surd> \\<Longrightarrow>\n       \\<exists>T'.\n          P,E,s' \\<turnstile> e' : T' \\<surd> \\<and>\n          P \\<turnstile> T' \\<le> T", "using reds"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>*\n                 \\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>T.\n       P,E,s \\<turnstile> e : T \\<surd> \\<Longrightarrow>\n       \\<exists>T'.\n          P,E,s' \\<turnstile> e' : T' \\<surd> \\<and>\n          P \\<turnstile> T' \\<le> T", "proof (induct rule:converse_rtrancl_induct2)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>T.\n       P,E,s' \\<turnstile> e' : T \\<surd> \\<Longrightarrow>\n       \\<exists>T'.\n          P,E,s' \\<turnstile> e' : T' \\<surd> \\<and>\n          P \\<turnstile> T' \\<le> T\n 2. \\<And>a b aa ba T.\n       \\<lbrakk>P \\<turnstile> \\<langle>a,b\\<rangle> \\<rightarrow>\n                               \\<langle>aa,ba\\<rangle>;\n        P \\<turnstile> \\<langle>aa,ba\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<And>T.\n           P,E,ba \\<turnstile> aa : T \\<surd> \\<Longrightarrow>\n           \\<exists>T'.\n              P,E,s' \\<turnstile> e' : T' \\<surd> \\<and>\n              P \\<turnstile> T' \\<le> T;\n        P,E,b \\<turnstile> a : T \\<surd>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,s' \\<turnstile> e' : T' \\<surd> \\<and>\n                            P \\<turnstile> T' \\<le> T", "case refl"], ["proof (state)\nthis:\n  P,E,s' \\<turnstile> e' : T \\<surd>\n\ngoal (2 subgoals):\n 1. \\<And>T.\n       P,E,s' \\<turnstile> e' : T \\<surd> \\<Longrightarrow>\n       \\<exists>T'.\n          P,E,s' \\<turnstile> e' : T' \\<surd> \\<and>\n          P \\<turnstile> T' \\<le> T\n 2. \\<And>a b aa ba T.\n       \\<lbrakk>P \\<turnstile> \\<langle>a,b\\<rangle> \\<rightarrow>\n                               \\<langle>aa,ba\\<rangle>;\n        P \\<turnstile> \\<langle>aa,ba\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<And>T.\n           P,E,ba \\<turnstile> aa : T \\<surd> \\<Longrightarrow>\n           \\<exists>T'.\n              P,E,s' \\<turnstile> e' : T' \\<surd> \\<and>\n              P \\<turnstile> T' \\<le> T;\n        P,E,b \\<turnstile> a : T \\<surd>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,s' \\<turnstile> e' : T' \\<surd> \\<and>\n                            P \\<turnstile> T' \\<le> T", "thus ?case"], ["proof (prove)\nusing this:\n  P,E,s' \\<turnstile> e' : T \\<surd>\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,s' \\<turnstile> e' : T' \\<surd> \\<and> P \\<turnstile> T' \\<le> T", "by blast"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,s' \\<turnstile> e' : T' \\<surd> \\<and> P \\<turnstile> T' \\<le> T\n\ngoal (1 subgoal):\n 1. \\<And>a b aa ba T.\n       \\<lbrakk>P \\<turnstile> \\<langle>a,b\\<rangle> \\<rightarrow>\n                               \\<langle>aa,ba\\<rangle>;\n        P \\<turnstile> \\<langle>aa,ba\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<And>T.\n           P,E,ba \\<turnstile> aa : T \\<surd> \\<Longrightarrow>\n           \\<exists>T'.\n              P,E,s' \\<turnstile> e' : T' \\<surd> \\<and>\n              P \\<turnstile> T' \\<le> T;\n        P,E,b \\<turnstile> a : T \\<surd>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,s' \\<turnstile> e' : T' \\<surd> \\<and>\n                            P \\<turnstile> T' \\<le> T", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b aa ba T.\n       \\<lbrakk>P \\<turnstile> \\<langle>a,b\\<rangle> \\<rightarrow>\n                               \\<langle>aa,ba\\<rangle>;\n        P \\<turnstile> \\<langle>aa,ba\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<And>T.\n           P,E,ba \\<turnstile> aa : T \\<surd> \\<Longrightarrow>\n           \\<exists>T'.\n              P,E,s' \\<turnstile> e' : T' \\<surd> \\<and>\n              P \\<turnstile> T' \\<le> T;\n        P,E,b \\<turnstile> a : T \\<surd>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,s' \\<turnstile> e' : T' \\<surd> \\<and>\n                            P \\<turnstile> T' \\<le> T", "case step"], ["proof (state)\nthis:\n  P \\<turnstile> \\<langle>a___,b___\\<rangle> \\<rightarrow>\n                 \\<langle>a_,b_\\<rangle>\n  P \\<turnstile> \\<langle>a_,b_\\<rangle> \\<rightarrow>*\n                 \\<langle>e',s'\\<rangle>\n  P,E,b_ \\<turnstile> a_ : ?T \\<surd> \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,s' \\<turnstile> e' : T' \\<surd> \\<and> P \\<turnstile> T' \\<le> ?T\n  P,E,b___ \\<turnstile> a___ : T \\<surd>\n\ngoal (1 subgoal):\n 1. \\<And>a b aa ba T.\n       \\<lbrakk>P \\<turnstile> \\<langle>a,b\\<rangle> \\<rightarrow>\n                               \\<langle>aa,ba\\<rangle>;\n        P \\<turnstile> \\<langle>aa,ba\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<And>T.\n           P,E,ba \\<turnstile> aa : T \\<surd> \\<Longrightarrow>\n           \\<exists>T'.\n              P,E,s' \\<turnstile> e' : T' \\<surd> \\<and>\n              P \\<turnstile> T' \\<le> T;\n        P,E,b \\<turnstile> a : T \\<surd>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>T'.\n                            P,E,s' \\<turnstile> e' : T' \\<surd> \\<and>\n                            P \\<turnstile> T' \\<le> T", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<turnstile> \\<langle>a___,b___\\<rangle> \\<rightarrow>\n                 \\<langle>a_,b_\\<rangle>\n  P \\<turnstile> \\<langle>a_,b_\\<rangle> \\<rightarrow>*\n                 \\<langle>e',s'\\<rangle>\n  P,E,b_ \\<turnstile> a_ : ?T \\<surd> \\<Longrightarrow>\n  \\<exists>T'.\n     P,E,s' \\<turnstile> e' : T' \\<surd> \\<and> P \\<turnstile> T' \\<le> ?T\n  P,E,b___ \\<turnstile> a___ : T \\<surd>\n\ngoal (1 subgoal):\n 1. \\<exists>T'.\n       P,E,s' \\<turnstile> e' : T' \\<surd> \\<and> P \\<turnstile> T' \\<le> T", "by(blast dest:Subject_reduction[OF wf] intro:widen_trans)"], ["proof (state)\nthis:\n  \\<exists>T'.\n     P,E,s' \\<turnstile> e' : T' \\<surd> \\<and> P \\<turnstile> T' \\<le> T\n\ngoal:\nNo subgoals!", "qed"], ["", "(*>*)"], ["", "corollary Progress: assumes wf: \"wf_J_prog P\"\nshows \"\\<lbrakk> P,E,s  \\<turnstile> e : T \\<surd>; \\<D> e \\<lfloor>dom(lcl s)\\<rfloor>; \\<not> final e \\<rbrakk> \\<Longrightarrow> \\<exists>e' s'. P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow> \\<langle>e',s'\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P,E,s \\<turnstile> e : T \\<surd>;\n     \\<D> e \\<lfloor>dom (lcl s)\\<rfloor>; \\<not> final e\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>P,E,s \\<turnstile> e : T \\<surd>;\n     \\<D> e \\<lfloor>dom (lcl s)\\<rfloor>; \\<not> final e\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>", "using progress[OF wf_prog_wwf_prog[OF wf]]"], ["proof (prove)\nusing this:\n  \\<lbrakk>P \\<turnstile> ?h \\<surd>; P,?E,?h \\<turnstile> ?e : ?T;\n   \\<D> ?e \\<lfloor>dom ?l\\<rfloor>; \\<not> final ?e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>e' s'.\n                       P \\<turnstile> \\<langle>?e,\n (?h, ?l)\\<rangle> \\<rightarrow>\n\\<langle>e',s'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>P,E,s \\<turnstile> e : T \\<surd>;\n     \\<D> e \\<lfloor>dom (lcl s)\\<rfloor>; \\<not> final e\\<rbrakk>\n    \\<Longrightarrow> \\<exists>e' s'.\n                         P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>\n  \\<langle>e',s'\\<rangle>", "by(auto simp:wf_config_def sconf_def)"], ["", "(*>*)"], ["", "corollary TypeSafety:\n  \"\\<lbrakk> wf_J_prog P; P,E \\<turnstile> s \\<surd>; P,E \\<turnstile> e::T; \\<D> e \\<lfloor>dom(lcl s)\\<rfloor>;\n     P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>* \\<langle>e',s'\\<rangle>; \\<not>(\\<exists>e'' s''. P \\<turnstile> \\<langle>e',s'\\<rangle> \\<rightarrow> \\<langle>e'',s''\\<rangle>) \\<rbrakk>\n \\<Longrightarrow> (\\<exists>v. e' = Val v \\<and> P,hp s' \\<turnstile> v :\\<le> T) \\<or>\n      (\\<exists>a. e' = Throw a \\<and> a \\<in> dom(hp s'))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wf_J_prog P; P,E \\<turnstile> s \\<surd>;\n     P,E \\<turnstile> e :: T; \\<D> e \\<lfloor>dom (lcl s)\\<rfloor>;\n     P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>*\n                    \\<langle>e',s'\\<rangle>;\n     \\<nexists>e'' s''.\n        P \\<turnstile> \\<langle>e',s'\\<rangle> \\<rightarrow>\n                       \\<langle>e'',s''\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> (\\<exists>v.\n                          e' = Val v \\<and>\n                          P,hp s' \\<turnstile> v :\\<le> T) \\<or>\n                      (\\<exists>a. e' = Throw a \\<and> a \\<in> dom (hp s'))", "(*<*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wf_J_prog P; P,E \\<turnstile> s \\<surd>;\n     P,E \\<turnstile> e :: T; \\<D> e \\<lfloor>dom (lcl s)\\<rfloor>;\n     P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>*\n                    \\<langle>e',s'\\<rangle>;\n     \\<nexists>e'' s''.\n        P \\<turnstile> \\<langle>e',s'\\<rangle> \\<rightarrow>\n                       \\<langle>e'',s''\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> (\\<exists>v.\n                          e' = Val v \\<and>\n                          P,hp s' \\<turnstile> v :\\<le> T) \\<or>\n                      (\\<exists>a. e' = Throw a \\<and> a \\<in> dom (hp s'))", "apply(subgoal_tac \" P,E,s \\<turnstile> e:T \\<surd>\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>wf_J_prog P; P,E \\<turnstile> s \\<surd>;\n     P,E \\<turnstile> e :: T; \\<D> e \\<lfloor>dom (lcl s)\\<rfloor>;\n     P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>*\n                    \\<langle>e',s'\\<rangle>;\n     \\<nexists>e'' s''.\n        P \\<turnstile> \\<langle>e',s'\\<rangle> \\<rightarrow>\n                       \\<langle>e'',s''\\<rangle>;\n     P,E,s \\<turnstile> e : T \\<surd>\\<rbrakk>\n    \\<Longrightarrow> (\\<exists>v.\n                          e' = Val v \\<and>\n                          P,hp s' \\<turnstile> v :\\<le> T) \\<or>\n                      (\\<exists>a. e' = Throw a \\<and> a \\<in> dom (hp s'))\n 2. \\<lbrakk>wf_J_prog P; P,E \\<turnstile> s \\<surd>;\n     P,E \\<turnstile> e :: T; \\<D> e \\<lfloor>dom (lcl s)\\<rfloor>;\n     P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>*\n                    \\<langle>e',s'\\<rangle>;\n     \\<nexists>e'' s''.\n        P \\<turnstile> \\<langle>e',s'\\<rangle> \\<rightarrow>\n                       \\<langle>e'',s''\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> P,E,s \\<turnstile> e : T \\<surd>", "prefer 2"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>wf_J_prog P; P,E \\<turnstile> s \\<surd>;\n     P,E \\<turnstile> e :: T; \\<D> e \\<lfloor>dom (lcl s)\\<rfloor>;\n     P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>*\n                    \\<langle>e',s'\\<rangle>;\n     \\<nexists>e'' s''.\n        P \\<turnstile> \\<langle>e',s'\\<rangle> \\<rightarrow>\n                       \\<langle>e'',s''\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> P,E,s \\<turnstile> e : T \\<surd>\n 2. \\<lbrakk>wf_J_prog P; P,E \\<turnstile> s \\<surd>;\n     P,E \\<turnstile> e :: T; \\<D> e \\<lfloor>dom (lcl s)\\<rfloor>;\n     P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>*\n                    \\<langle>e',s'\\<rangle>;\n     \\<nexists>e'' s''.\n        P \\<turnstile> \\<langle>e',s'\\<rangle> \\<rightarrow>\n                       \\<langle>e'',s''\\<rangle>;\n     P,E,s \\<turnstile> e : T \\<surd>\\<rbrakk>\n    \\<Longrightarrow> (\\<exists>v.\n                          e' = Val v \\<and>\n                          P,hp s' \\<turnstile> v :\\<le> T) \\<or>\n                      (\\<exists>a. e' = Throw a \\<and> a \\<in> dom (hp s'))", "apply(fastforce simp:wf_config_def dest:WT_implies_WTrt)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wf_J_prog P; P,E \\<turnstile> s \\<surd>;\n     P,E \\<turnstile> e :: T; \\<D> e \\<lfloor>dom (lcl s)\\<rfloor>;\n     P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>*\n                    \\<langle>e',s'\\<rangle>;\n     \\<nexists>e'' s''.\n        P \\<turnstile> \\<langle>e',s'\\<rangle> \\<rightarrow>\n                       \\<langle>e'',s''\\<rangle>;\n     P,E,s \\<turnstile> e : T \\<surd>\\<rbrakk>\n    \\<Longrightarrow> (\\<exists>v.\n                          e' = Val v \\<and>\n                          P,hp s' \\<turnstile> v :\\<le> T) \\<or>\n                      (\\<exists>a. e' = Throw a \\<and> a \\<in> dom (hp s'))", "apply(frule (2) Subject_reductions)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wf_J_prog P; P,E \\<turnstile> s \\<surd>;\n     P,E \\<turnstile> e :: T; \\<D> e \\<lfloor>dom (lcl s)\\<rfloor>;\n     P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>*\n                    \\<langle>e',s'\\<rangle>;\n     \\<nexists>e'' s''.\n        P \\<turnstile> \\<langle>e',s'\\<rangle> \\<rightarrow>\n                       \\<langle>e'',s''\\<rangle>;\n     P,E,s \\<turnstile> e : T \\<surd>;\n     \\<exists>T'.\n        P,E,s' \\<turnstile> e' : T' \\<surd> \\<and>\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n    \\<Longrightarrow> (\\<exists>v.\n                          e' = Val v \\<and>\n                          P,hp s' \\<turnstile> v :\\<le> T) \\<or>\n                      (\\<exists>a. e' = Throw a \\<and> a \\<in> dom (hp s'))", "apply(erule exE conjE)+"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>T'.\n       \\<lbrakk>wf_J_prog P; P,E \\<turnstile> s \\<surd>;\n        P,E \\<turnstile> e :: T; \\<D> e \\<lfloor>dom (lcl s)\\<rfloor>;\n        P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<nexists>e'' s''.\n           P \\<turnstile> \\<langle>e',s'\\<rangle> \\<rightarrow>\n                          \\<langle>e'',s''\\<rangle>;\n        P,E,s \\<turnstile> e : T \\<surd>;\n        P,E,s' \\<turnstile> e' : T' \\<surd>;\n        P \\<turnstile> T' \\<le> T\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>v.\n                             e' = Val v \\<and>\n                             P,hp s' \\<turnstile> v :\\<le> T) \\<or>\n                         (\\<exists>a.\n                             e' = Throw a \\<and> a \\<in> dom (hp s'))", "apply(frule (2) Red_preserves_defass)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>T'.\n       \\<lbrakk>wf_J_prog P; P,E \\<turnstile> s \\<surd>;\n        P,E \\<turnstile> e :: T; \\<D> e \\<lfloor>dom (lcl s)\\<rfloor>;\n        P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<nexists>e'' s''.\n           P \\<turnstile> \\<langle>e',s'\\<rangle> \\<rightarrow>\n                          \\<langle>e'',s''\\<rangle>;\n        P,E,s \\<turnstile> e : T \\<surd>;\n        P,E,s' \\<turnstile> e' : T' \\<surd>; P \\<turnstile> T' \\<le> T;\n        \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>v.\n                             e' = Val v \\<and>\n                             P,hp s' \\<turnstile> v :\\<le> T) \\<or>\n                         (\\<exists>a.\n                             e' = Throw a \\<and> a \\<in> dom (hp s'))", "apply(subgoal_tac \"final e'\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>T'.\n       \\<lbrakk>wf_J_prog P; P,E \\<turnstile> s \\<surd>;\n        P,E \\<turnstile> e :: T; \\<D> e \\<lfloor>dom (lcl s)\\<rfloor>;\n        P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<nexists>e'' s''.\n           P \\<turnstile> \\<langle>e',s'\\<rangle> \\<rightarrow>\n                          \\<langle>e'',s''\\<rangle>;\n        P,E,s \\<turnstile> e : T \\<surd>;\n        P,E,s' \\<turnstile> e' : T' \\<surd>; P \\<turnstile> T' \\<le> T;\n        \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>; final e'\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>v.\n                             e' = Val v \\<and>\n                             P,hp s' \\<turnstile> v :\\<le> T) \\<or>\n                         (\\<exists>a.\n                             e' = Throw a \\<and> a \\<in> dom (hp s'))\n 2. \\<And>T'.\n       \\<lbrakk>wf_J_prog P; P,E \\<turnstile> s \\<surd>;\n        P,E \\<turnstile> e :: T; \\<D> e \\<lfloor>dom (lcl s)\\<rfloor>;\n        P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<nexists>e'' s''.\n           P \\<turnstile> \\<langle>e',s'\\<rangle> \\<rightarrow>\n                          \\<langle>e'',s''\\<rangle>;\n        P,E,s \\<turnstile> e : T \\<surd>;\n        P,E,s' \\<turnstile> e' : T' \\<surd>; P \\<turnstile> T' \\<le> T;\n        \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> final e'", "prefer 2"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>T'.\n       \\<lbrakk>wf_J_prog P; P,E \\<turnstile> s \\<surd>;\n        P,E \\<turnstile> e :: T; \\<D> e \\<lfloor>dom (lcl s)\\<rfloor>;\n        P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<nexists>e'' s''.\n           P \\<turnstile> \\<langle>e',s'\\<rangle> \\<rightarrow>\n                          \\<langle>e'',s''\\<rangle>;\n        P,E,s \\<turnstile> e : T \\<surd>;\n        P,E,s' \\<turnstile> e' : T' \\<surd>; P \\<turnstile> T' \\<le> T;\n        \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> final e'\n 2. \\<And>T'.\n       \\<lbrakk>wf_J_prog P; P,E \\<turnstile> s \\<surd>;\n        P,E \\<turnstile> e :: T; \\<D> e \\<lfloor>dom (lcl s)\\<rfloor>;\n        P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<nexists>e'' s''.\n           P \\<turnstile> \\<langle>e',s'\\<rangle> \\<rightarrow>\n                          \\<langle>e'',s''\\<rangle>;\n        P,E,s \\<turnstile> e : T \\<surd>;\n        P,E,s' \\<turnstile> e' : T' \\<surd>; P \\<turnstile> T' \\<le> T;\n        \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>; final e'\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>v.\n                             e' = Val v \\<and>\n                             P,hp s' \\<turnstile> v :\\<le> T) \\<or>\n                         (\\<exists>a.\n                             e' = Throw a \\<and> a \\<in> dom (hp s'))", "apply(blast dest: Progress)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>T'.\n       \\<lbrakk>wf_J_prog P; P,E \\<turnstile> s \\<surd>;\n        P,E \\<turnstile> e :: T; \\<D> e \\<lfloor>dom (lcl s)\\<rfloor>;\n        P \\<turnstile> \\<langle>e,s\\<rangle> \\<rightarrow>*\n                       \\<langle>e',s'\\<rangle>;\n        \\<nexists>e'' s''.\n           P \\<turnstile> \\<langle>e',s'\\<rangle> \\<rightarrow>\n                          \\<langle>e'',s''\\<rangle>;\n        P,E,s \\<turnstile> e : T \\<surd>;\n        P,E,s' \\<turnstile> e' : T' \\<surd>; P \\<turnstile> T' \\<le> T;\n        \\<D> e' \\<lfloor>dom (lcl s')\\<rfloor>; final e'\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>v.\n                             e' = Val v \\<and>\n                             P,hp s' \\<turnstile> v :\\<le> T) \\<or>\n                         (\\<exists>a.\n                             e' = Throw a \\<and> a \\<in> dom (hp s'))", "apply (fastforce simp:wf_config_def final_def conf_def dest: Progress)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "(*>*)"], ["", "end"]]}